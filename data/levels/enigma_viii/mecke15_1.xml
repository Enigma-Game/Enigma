<?xml version="1.0" encoding="utf-8" standalone="no" ?>
<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd"
  xmlns:el="http://enigma-game.org/schema/level/1">
  <el:protected >
    <el:info el:type="level">
      <el:identity el:title="Enigmaparcour" el:subtitle="Open the Doors" el:id="mecke15"/>
      <el:version el:score="1" el:release="1" el:revision="$Revision: 12 $" el:status="released"/>
      <el:author  el:name="mecke" el:email="" el:homepage=""/>
      <el:copyright>Copyright © 2008 Thomas Bernhardt</el:copyright>
      <el:license el:type="GPL v2.0 or above" el:open="true"/>
      <el:compatibility el:enigma="1.10"/>
      <el:modes el:easy="true" el:single="true" el:network="false" el:control="force"
        el:scoreunit="duration" el:scoretarget="time"/>
      <el:comments>
        <el:credits el:showinfo="true" el:showstart="false">Thanks to Raoul Bourquin for the patterns, in the new API,
		and to Ronald Lamprecht for the "bottlepattern"</el:credits>
      </el:comments>
      <el:score el:easy="14:51" el:difficult="18:10"/>
    </el:info>
    <el:luamain><![CDATA[
wo["ConserveLevel"] = true

if wo ["IsDifficult"] then
ti[" "] = {"fl-abyss_fake"}
ti["v"] = {"fl-ice"}
ti["+"] = {"ac-rotor", 0.5, 0.5,}
else
ti[" "] = {"fl-rough"}
ti["v"] = {"fl-rough"}
ti["+"] = {"ac-rotor", 0.5, 0.5}
end
ti["~"] = {"fl-water"}
ti["_"] = {"fl-swamp"}
ti["."] = {"fl-space"}

ti["t"] = {"st-stone_break"}
ti["U"] = ti[" "] .. {"st-black4"}
ti["u"] = ti["_"] .. {"st-grate2"}
ti["i"] = ti["U"] .. {"fl-inverse"}
ti["w"] = ti["U"] .. {"fl-water"}
ti["("] = {"fl-gradient", type=3}
ti["#"] = ti[" "] .. {"st_lightpassenger"}
ti["K"] = ti[" "] .. {"st-knight"}
ti["D"] = ti[" "] .. {"st-death"}
ti["d"] = ti[" "] .. {"st-death_invisible"}
ti["B"] = ti[" "] .. {"st-brick_magic"}
ti["O"] = ti[" "] .. {"st_rotator_ccw", movable=true}
ti["R"] = ti[" "] .. {"st-rubberband"}
ti["T"] = ti[" "] .. {"st-thief"}
ti["r"] = ti[" "] .. {"st-brownie"}
ti["H"] = ti["i"] .. {"st_key", code=1, target={"door#5"}}
ti["G"] = ti["_"] .. {"st-glass"}
ti["Y"] = ti[" "] .. {"st-glass"}
ti["L"] = ti["_"] .. {"st_laser_e", name="laser", state=ON}
ti["h"] = ti[" "] .. {"st-bluegray_hole"}
ti["A"] = ti["~"] .. {"st_actorimpulse"}
ti["I"] = ti[" "] .. {"st-oneway_black-w"}
ti["^"] = ti[" "] .. {"st_boulder_n"}
ti[">"] = ti["v"] .. {"st_boulder_e"}
ti["<"] = ti[" "] .. {"st_boulder_w"}
ti["3"] = ti["v"] .. {"st-wood"}
ti["2"] = ti[" "] .. {"st-oneway_black-s"}
ti["4"] = ti[" "] .. {"st-oneway-w"}
ti["6"] = ti[" "] .. {"st-oneway-e"}
ti["8"] = ti[" "] .. {"st-oneway_black-n"}
ti["Q"] = ti[" "] .. {"st-stone_break"}
ti["m"] = ti["_"] .. {"st_mirror_slab", movable=false, transparent=true, orientation=2}
ti["M"] = ti["_"] .. {"st_mirror_slab", movable=false, orientation=1}
ti["X"] = ti["~"] .. {"st_oxyd", flavor="a"}
ti["S"] = ti["_"] .. {"st_laserswitch", target={"door#7", "door#8"}}
ti[":"] = ti[" "] .. {"st-door-v", name="door#"}
ti["9"] = ti[" "] .. {"st-turnstile"}
ti["?"] = ti["~"] .. {"st_actorimpulse_invisible"}
ti["z"] = ti["v"] .. {"st-stone_break"}
ti["N"] = ti["t"] .. {"fl-ice"}
ti["-"] = ti["~"] .. {"it-hstrip"}
ti["b"] = ti["~"] .. {"it-booze"}
ti["o"] = {"it-springboard"}
ti["P"] = {"st-grate1"}

ti["*"] = {"ac-blackball", 0.5, 0.5}

ti["="] = {"ac-horse", 0.5, 0.5}

w, h = wo(ti, " ", {
"#########################",
"#iHwiiidddddd . = . #vvv#",
"#iwwiww hhh d~~.D.~~#vXv#",
"#iiwiiw TTT  r      #vvv#",
"#wiiwii  *  DAAAAA2##vXv#",
"#MGGmGM- ~ -6+vvvv6v#vvv#",
"#__GGGG~~9~~K########vXv#",
"#L_GMGM- ~ -:::::::::KKK#",
"#__GGGG~~9~~K########vXv#",
"#SuGmGM- ~ -43<Nvvv #vvv#",
"#>^^^ Y     D Q888Q #vXv#",
"#^^^^UU hTh BO  O  D#vvv#",
"#    UU ThT B ??o?? #vXv#",
"#RRRRRR hhh B  Pb   #vvv#",
"#########################"
})

base = st({1,1})
if wo ["IsDifficult"] then
wo[base+{12, 4}] = {"fl-rough"}
else
wo[base+{12, 4}] = {"fl-rough"}
end
wo[base+{8, 9}] = {"ac-top", 0.5, 0.5, range=1, force=1} 
wo[base+{8, 3}] = {"it-crack3"} 
wo[base+{8, 4}] = {"st-turnstile-n"}
wo[base+{8, 6}] = {"st-turnstile-s"}
wo[base+{7, 7}] = {"st-turnstile-w"}
wo[base+{9, 7}] = {"st-turnstile-e"}

wo[base+{18, 11}] = {"it_key", code=1}
wo[base+{8, 1}] = {"it_glasses"}
wo[base+{8, 0}] = {"it_umbrella_new"}
wo[base+{0, 11}] = {"it-magicwand"}
wo[base+{5, 11}] = {"it_extralife"}
wo[base+{8, 11}] = {"it-cherry"}
wo[base+{8, 12}] = {"it-cherry"}
wo[base+{5, 0}] = {"it_hammer"}
wo[base+{11, 8}] = {"it_wrench"}
wo[base+{12, 0}] = {"it_brush"}
wo[base+{12, 0}] = {"fl-gradient", type=3}

wo[base+{3, 8}] = {"it_cross"}
wo[base+{3, 9}] = {"it_cross"}

wo[base+{2,3}] = {"it_vortex_open", name="vortex1", destination="vortex2"}
wo[base+{3,2}] = {"it_vortex_open", name="vortex2", destination="vortex1"}

wo[base+{3, 9}] = ti["~"]
wo[base+{2, 9}] = ti["~"]
wo[base+{3, 6}] = {"st_mirror_slab", movable=false, orientation=4}

wo[base+{18, 0}] = {"it_trigger", target="door#2"}
wo[base+{18, 4}] = {"it_trigger", target="door#1"}
wo[base+{11, 2}] = {"it_trigger", target="laser"}
wo[base+{4, 9}] = {"it_trigger", target="door#3"}
wo[base+{18, 8}] = {"it_trigger", target="door#4"}
wo[base+{18, 12}] = {"it_trigger", target="door#9"}
wo[base+{18, 9}] = {"it_trigger", target="door#6"}

wo:shuffleOxyd()
    ]]></el:luamain>
      <el:i18n>
        <el:string el:key="title">
          <el:english el:translate="false"/>
        </el:string>
        <el:string el:key="subtitle">
          <el:english el:translate="true"/>
	  <el:translation el:lang="de">Öffne die Tore</el:translation>
        </el:string>
     </el:i18n>
  </el:protected>
</el:level>
