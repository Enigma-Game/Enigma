<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<el:level xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://enigma-game.org/schema/level/1 level.xsd" xmlns:el="http://enigma-game.org/schema/level/1">
  <el:protected>
    <el:info el:type="level">
      <el:identity el:title="Dry Run" el:subtitle="" el:id="devnull168"/>
      <el:version el:score="1" el:release="1" el:revision="1" el:status="stable"/>
      <el:author el:name="/dev/null" el:email="" el:homepage=""/>
      <el:copyright>Copyright © 2014 /dev/null</el:copyright>
      <el:license el:type="GPL v2.0 or above" el:open="true"/>
      <el:compatibility el:enigma="1.20"/>
      <el:modes el:easy="false" el:single="true" el:network="true"/>
      <el:score el:easy="-" el:difficult="5:55"/>
    </el:info>
    <el:luamain><![CDATA[
wo["AutoRespawn"] = true
wo["AllowSuicide"] = false
wo["WormholeStrength"] = 0.0
wo["MaxOxydColor"] = OXYD_ORANGE

ti[" ."] = {"fl_rock"}
ti[" :"] = {"fl_rock_framed"}
ti["  "] = {"fl_rock", floodable = true}
ti["+ "] = {"st_box_hay"}
ti[" ~"] = {"fl_water"}
ti[" -"] = {"fl_water", name = "srcWhite#", interval = 1.0}
ti[" _"] = {"fl_water", name = "srcBlack#", interval = 1.0}
ti["# "] = {"st_redmarble"}
ti["= "] = {"st_lightglass"}
ti["H "] = {"st_lightglass_hollow"}
ti["* "] = {"st_magic_oxydc"}
ti["B "] = {"st_passage_black", flavor = "frame"}
ti["W "] = {"st_passage_white", flavor = "frame"}
ti[">b"] = ti[" ."] .. {"st_oneway_black", name = "owBlack", orientation = EAST}
ti[">w"] = ti[" ."] .. {"st_oneway_white", name = "owWhite", orientation = EAST}
ti["<b"] = {"st_oneway_black", orientation = WEST}
ti["<w"] = {"st_oneway_white", orientation = WEST}
ti["Sb"] = {"st_switch", target = {"srcBlack#*", "doorWhite#*", "flipBlack"}}
ti["Sw"] = {"st_switch", target = {"srcWhite#*", "doorBlack#*", "flipWhite"}}
ti["I "] = {"st_stoneimpulse"}
ti["|b"] = ti({"fl_rock", name = "floorBlack#", floodable = true}) .. {"st_door_a", name = "doorBlack#"}
ti["|w"] = ti({"fl_rock", name = "floorWhite#", floodable = true}) .. {"st_door_a", name = "doorWhite#"}
ti["Db"] = {"st_door_a", name = "doorBlack#", state = OPEN}
ti["Dw"] = {"st_door_a", name = "doorWhite#", state = OPEN}
ti["_b"] = {"fl_scales_concrete", name = "triggerBlack", target = "chFloor"}
ti["_w"] = {"fl_scales_concrete", name = "triggerWhite", target = "chFloor"}
ti["wb"] = {"it_wormhole", destination = "owWhite"}
ti["ww"] = {"it_wormhole", destination = "owBlack"}
ti[" c"] = {"it_cherry"}
ti[" ,"] = {"it_seed_hay"}
ti["x "] = {"it_cross"}
ti["X "] = ti["x "] .. ti["H "]
ti["d "] = {"it_document", text = "doc"}
ti["O "] = {"st_oxyd_a", name = "black#"}
ti["0 "] = {"st_oxyd_a", name = "white#"}
ti["@0"] = {"#ac_marble_black", essential = INDISPENSABLE}
ti["@1"] = {"#ac_marble_white", essential = INDISPENSABLE}

wo(res.composer(ti), "  ", {
  "# # # # # # # # # # # # # # # # # O # ", 
  "# wb#   >b :   ~       _+:X: ~  O W O ", 
  "#   #   #      ~  +:H_ _ _ ~ : ~|wW O ", 
  "#   #  ,Sbx: :X: :   _ _*cH    ~O W O ", 
  "#   # Dw# *c  +~@0*   + H *c ~  |wW O ", 
  "#   <b_w#   *cd   +  ~          O W O ", 
  "# # # # # # I # # # # # # # I # # # # ", 
  "#   <w_b#   *cd *c      +       0 B 0 ", 
  "#   # Db#       @1*c    *-   ~  |bB 0 ", 
  "#   #  ,Swx:    +- - - -H      ~0 B 0 ", 
  "#   #   # *c  +-H  -H-H    : : ~|bB 0 ", 
  "# ww#   >w :    X: - :+ X:   ~  0 B 0 ", 
  "# # # # # # # # # # # # # # # # # 0 # " 
})
wo:shuffleOxyd({"black#*", max = 0}, {"white#*", max = 0})
fb = po(no["floorBlack#*"])
fw = po(no["floorWhite#*"])
function flipBlack()
  no["owBlack"]:flip()
end
function flipWhite()
  no["owWhite"]:flip()
end
function chFloor(val, src) 
  if src == no["triggerBlack"] then
    wo[fb] = ti[" ."]
  end
  if src == no["triggerWhite"] then
    wo[fw] = ti[" ."]
  end
end
 ]]></el:luamain>
    <el:i18n>
      <el:string el:key="title">
        <el:english el:translate="false"/>
      </el:string>
      <el:string el:key="doc">
        <el:english el:translate="true">Tiles marked with a cross are safe.</el:english>
        <el:translation el:lang="de">Mit einem Kreuz markierte Böden sind sicher.</el:translation>
      </el:string>
    </el:i18n>
  </el:protected>
</el:level>
