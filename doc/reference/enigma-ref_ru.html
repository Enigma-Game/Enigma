<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html401/loose.dtd">
<html>
<!-- Created on March 29, 2013 by texi2html 1.82
texi2html was written by: 
            Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people.
Send bugs and suggestions to <texi2html-bug@nongnu.org>
-->
<head>
<title>Справочное руководство Enigma</title>

<meta name="description" content="Enigma Reference Manual">
<meta name="keywords" content="Enigma Reference Manual">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2html 1.82">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.smallquotation {font-size: smaller}
code {color:rgb(0%,50%,0%)}
h3 {background-color:rgb(95%,95%,100%)}
hr {height:0px;}
pre.display {font-family: serif}
pre.example {background-color:rgb(97%,97%,97%)}
pre.example b {color:rgb(0%,0%,100%); font-weight:normal}
pre.example i {color:rgb(0%,60%,0%); font-style:normal}
pre.example var {color:rgb(80%,0%,80%)}
pre.format {font-family: serif}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: serif; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: serif; font-size: smaller}
pre.smalllisp {font-size: smaller}
samp {color:rgb(0%,50%,0%)}
span.roman {font-family:serif; font-weight:normal;}
span.sansserif {font-family:sans-serif; font-weight:normal;}
ul.toc {list-style: none}
-->
</style>


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">

<a name="Top"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="SEC_Top"></a>
<h1 class="settitle">Справочное руководство Enigma</h1>

<p>Данное руководство описывает внутреннюю структуру игры <a href="http://www.nongnu.org/enigma/">Enigma</a> версии 1.20, в частности процесс создания уровней с использованием языка программирования Lua и особенности взаимодействия с движком игры.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Running-Enigma">1. Использование Enigma</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#Levelpack-Basics">2. Основы работы с пакетами уровней</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Добавление уровней в пакеты и управление уровнями
</td></tr>
<tr><td align="left" valign="top"><a href="#Level-Basics">3. Основы работы с уровнями</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                Введение в описание уровней
</td></tr>
<tr><td align="left" valign="top"><a href="#Enigma-Paradigm">4. Ключевые понятия Enigma</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">             Принципы структуры мира, объектов и сообщений
</td></tr>
<tr><td align="left" valign="top"><a href="#Lua-API">5. Lua API</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                     Описание уровня со всеми его объектами и взаимодействиями
</td></tr>
<tr><td align="left" valign="top"><a href="#Common-Attributes-and-Messages">6. Общие атрибуты и сообщения</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">  Те, которые поддерживаются всеми объектами
</td></tr>
<tr><td align="left" valign="top"><a href="#Floor-Objects">7. Покрытия</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Item-Objects">8. Предметы</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Stone-Objects">9. Камни</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Actor-Objects">10. Актёры</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Other-Objects">11. Остальные объекты</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">               Проволоки, резиновые ленты и гаджеты
</td></tr>
<tr><td align="left" valign="top"><a href="#Libraries">12. Библиотеки</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                   Вспомогательные функции и возможности
</td></tr>
<tr><td align="left" valign="top"><a href="#Advanced-Features">13. Дополнительные возможности</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Преобразования, прокрутка, наводнение, пожар и т.п.
</td></tr>
<tr><td align="left" valign="top"><a href="#Extension-Development">14. Разработка расширений</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       Разработка преобразований, библиотек
</td></tr>
<tr><td align="left" valign="top"><a href="#Guidelines-and-Hints">15. Советы и рекомендации</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        Рекомендации и подсказки для авторов уровней
</td></tr>
<tr><td align="left" valign="top"><a href="#Compatibility">16. Совместимость</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">               Совместимость режимов и версий движка
</td></tr>
<tr><td align="left" valign="top"><a href="#Object-Index">Указатель объектов</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Attribute-Index">Указатель атрибутов</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Message-Index">Указатель сообщений</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Function-Index">Указатель функций</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Concept-Index">Указатель терминов</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Renaming-Index">Список изменений</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">              Список отличий между старым и новым API
</td></tr>
</table>

<hr size="1">
<a name="Running-Enigma"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Top" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Locating-Resources" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Levelpack-Basics" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Running-Enigma-1"></a>
<h1 class="chapter">1. Использование Enigma</h1>

<p>После того, как вы установили Enigma и прошли несколько уровней, вам, надеемся, будет интересно узнать, как Enigma устроена, как настроить её в соответствии со своими предпочтениями и для чего служат некоторые опции и атрибуты игры.
</p>
<p>Эта глава должна помочь ответить на эти вопросы, а также предоставить основные сведения, которые могут понадобиться для того, чтобы управлять пакетами уровней, отдельными уровнями и создавать собственные уровни (подробно обо всём этом в следующих главах).
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Locating-Resources">1.1 Размещение ресурсов</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Startup-Switches">1.2 Опции запуска</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#User-Options">1.3 Пользовательские опции</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Inventory-Console">1.4 Консольная функция инвентаря</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Ввод команд и история документов
</td></tr>
<tr><td align="left" valign="top"><a href="#Level-Info">1.5 Информация об уровне</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Handicap-and-PAR">1.6 Гандикап и пар (PAR)</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Принципы подсчёта очков и гандикапа
</td></tr>
<tr><td align="left" valign="top"><a href="#User-Sound-Sets">1.7 Пользовательские наборы звуков</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Создание и установка звукового сопровождения
</td></tr>
</table>

<hr size="6">
<a name="Locating-Resources"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Running-Enigma" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Startup-Switches" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Running-Enigma" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Running-Enigma" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Levelpack-Basics" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Locating-Resources-1"></a>
<h2 class="section">1.1 Размещение ресурсов</h2>

<p>Для создания резервных копий, внесения изменений в систему, особых конфигураций, а также для добавления новых уровней (в том числе, надеемся, и своих собственных) вам нужно знать, где хранятся ресурсы Enigma и как ими можно управлять.
</p>
<p>Для управления загрузкой игры и хранением данных служат несколько путей. Их список можно вызвать в подменю справки или запустив Enigma из консоли с опцией &lsquo;<samp>--log</samp>&rsquo; (см. раздел <a href="#Startup-Switches">Опции запуска</a>).
</p>
<dl compact="compact">
<dd><a name="index-preferences-path"></a>
</dd>
<dt> <b>Путь к настройкам</b></dt>
<dd><p>Это путь к файлу с пользовательским настройками приложения. Этот файл обычно размещается у пользователя в директории <code>HOME</code>. Данные пользователей систем Windows, в которых <code>HOME</code> отсутствует, хранятся в директории &lsquo;<samp>Application Data\Enigma</samp>&rsquo;. Поскольку это третья версия игры, файл по умолчанию называется &lsquo;<samp>.enigmarc.xml</samp>&rsquo;.
</p>
<p>Мы рекомендуем создать резервную копию этого файла, хотя там и содержится совсем немного данных, которые можно быстро восстановить.
</p>
<p>Поскольку эти настройки очень сильно зависят от операционной системы и конфигурации, каждая установленная игра использует отдельную версию данного файла.
</p>
<p>Для разработчиков игры существует опция &lsquo;<samp>--pref</samp>&rsquo; (см. раздел <a href="#Startup-Switches">Опции запуска</a>), с помощью которой можно переименовать файл настроек. Запустив программу с переименованным файлом настроек, разработчик может проверить новую конфигурацию, не рискуя потерять свои собственные настройки. Также разработчик в целях проверки может использовать переименованный файл, чтобы запустить игру со стандартной конфигурацией.
</p>
<p>В любом случае файл настроек будет скрыт при помощи знака &lsquo;<samp>.</samp>&rsquo; в начале имени файла.
</p>
<a name="index-user-path"></a>
</dd>
<dt> <b>Папка пользователя</b></dt>
<dd><p>В этой папке хранится основная часть пользовательских данных игры. Здесь содержатся все обновления, уровни, написанные или установленные пользователем, счёт, история и, как правило, сделанные пользователем снимки экрана и эскизы уровней.
</p>
<p>Обязательно создайте резервную копию этой папки!
</p>
<p>Её стандартное размещение &mdash; директория &lsquo;<samp>.enigma</samp>&rsquo; в вашей директории <code>HOME</code>. В системах Windows, в которых отсутствует <code>HOME</code>, этой цели служит директория &lsquo;<samp>%APPDATA%\Enigma</samp>&rsquo;, которая разрешается в подпапку &lsquo;<samp>Application Data\Enigma</samp>&rsquo; в Windows XP/2000 или &lsquo;<samp>AppData\Roaming\Enigma</samp>&rsquo; в Vista/Windows 7, расположенную в папке данных пользователя.
</p>
<p>В папке пользователя также хранятся файлы журналов событий и ошибок.
</p>
<p>Путь к папке с пользовательскими данными можно задать в меню Настройки (см. раздел <a href="#User-Options">Пользовательские опции</a>). Так можно сохранить данные игры на внешнем накопителе или общем разделе жёсткого диска и использовать их на различных установках Enigma.
</p>
<a name="index-user-image-path"></a>
</dd>
<dt> <b>Папка эскизов</b></dt>
<dd><p>Это ещё одна пользовательская папка Enigma. В ней хранятся изображения, в частности снимки экрана и эскизы уровней. Обычно папка пользователя, указанная в строке &lsquo;<samp>Папка пользователя</samp>&rsquo;, является одновременно и папкой изображений.
</p>
<p>Если вы делаете много снимков экрана, а место в директории, указанной в строке &lsquo;<samp>Папка пользователя</samp>&rsquo; ограничено, можно задать отдельный путь для папки с изображениями в меню Настройки (см. раздел <a href="#User-Options">Пользовательские опции</a>).
</p>
<a name="index-system-path"></a>
</dd>
<dt> <b>Системная папка</b></dt>
<dd><p>В этой папке содержатся все системные ресурсы дистрибутива Enigma. Здесь находятся уровни, библиотеки и т. д. Начинающим создавать свои собственные уровни обязательно нужно сюда заглянуть в поисках примеров.
</p>
<a name="index-resource-paths"></a>
</dd>
<dt> <b>Папки с ресурсами</b></dt>
<dd><p>Это список папок. Каждый ресурс, независимый от версии игры, ищется во всех папках из этого списка и загружается из первой найденной папки.
</p>
<p>Пользовательские данные в этом списке предваряют системные данные. Таким образом, приоритетом обновления обладают папки пользователя. Если вы заметили разницу между изначальным поведением программы и её работой в данный момент, обратите внимание на этот список. Возможно, вы посмотрели на файл, который был перекрыт другим файлом из предыдущего пути в этом списке.
</p>
<a name="index-l10n-path"></a> <a name="index-localization-path"></a>
</dd>
<dt> <b>Папка локализации</b></dt>
<dd><p>В этой папке размещаются данные локализаций.
</p>
</dd>
</dl>

<p>Обратите внимание, что некоторые ресурсы, например уровни, могут храниться в zip-архивах. В таких случаях ресурс, который вы ожидаете найти по адресу &lsquo;<samp>имя_директории/имя_файла</samp>&rsquo;, может храниться в zip-файле &lsquo;<samp>имя_директории.zip</samp>&rsquo;. Путём к файлу в zip-архиве может выглядеть как &lsquo;<samp>имя_директории/имя_файла&rsquo;</samp> или &lsquo;<samp>./имя_файла</samp>&rsquo;. В случае, если ресурс присутствует как в виде zip-файла, так и в другом формате, приоритет отдаётся второму файлу, так как программа воспринимает его как обновление zip-файла.
</p>
<hr size="6">
<a name="Startup-Switches"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Locating-Resources" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#User-Options" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Running-Enigma" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Running-Enigma" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Levelpack-Basics" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Startup-Switches-1"></a>
<h2 class="section">1.2 Опции запуска</h2>

<p>Помимо запуска игры с помощью щелчка по ярлыку на рабочем столе или меню &quot;Пуск&quot;, Enigma можно запустить из оболочки или командной строки. Это позволяет добавить при запуске игры набор опций, который будет действовать только для данного запуска.
</p>
<p>Для многократного использования одинакового набора опций запуска можно создать ярлык на рабочем столе или запись в меню &quot;Пуск&quot; и добавить опции запуска к целевой строке исполняемого файла Enigma.
</p>
<p>Ниже следует список поддерживаемых программой пользовательских опций. Если в списке указано как полное имя опции, следующее за двумя знаками &quot;минус&quot;, так и однобуквенное сокращение, следующее за одним знаком &quot;минус&quot;, используйте один из вариантов (а не два одновременно), например: &lsquo;<samp>--data путь</samp>&rsquo; или &lsquo;<samp>-d путь</samp>&rsquo;.
</p>
<dl compact="compact">
<dt> <b>--assert</b></dt>
<dd><p>Опция, предназначенная для разработчиков игры, которая принудительно выполняет все отладочные проверки, даже ресурсоёмкие. Результаты дополнительной проверки выглядят примерно так: &lsquo;<samp>ASSERT(noAssert || long_lasting_check(), XLevelRuntime, &quot;remark&quot;);</samp>&rsquo;.
</p>
</dd>
<dt> <b>--data -d путь</b></dt>
<dd><p>Опция, предназначенная для разработчиков игры; она позволяет добавить к списку путей ресурсов дополнительный путь, который будет располагаться перед путём к системной папке (см. раздел <a href="#Startup-Switches">Опции запуска</a>). Разработчик может проверить сборку Enigma, не устанавливая её, посредством её вызова из оболочки с текущей рабочей директорией в качестве главной директории с помощью опции &lsquo;<samp>src/Enigma -d ./data</samp>&rsquo;.
</p>
</dd>
<dt> <b>--help -h</b></dt>
<dd><p>Просто выводит на экран все опции запуска и завершает свою работу.
</p>
</dd>
<dt> <b>--lang -l язык</b></dt>
<dd><p>Опция, позволяющая выбрать язык игры. Язык задаётся стандартным двухбуквенным обозначением, например &lsquo;<samp>fr</samp>&rsquo; для французского или &lsquo;<samp>ru</samp>&rsquo; для русского.
</p>
</dd>
<dt> <b>--log</b></dt>
<dd><p>Эта опция добавляет к стандартному выводу внутреннюю информацию. Пользователи Windows могут найти её в файле  &lsquo;<samp>Output.log</samp>&rsquo; в стандартной &lsquo;<samp>Папке пользователя</samp>&rsquo;. В ещё одном файле &lsquo;<samp>Error.log</samp>&rsquo; перечислены критические ошибки.
</p>
<p>В выводимую информацию будут включены, к примеру, пути, описанные в разделе <a href="#Locating-Resources">Размещение ресурсов</a>.
</p>
</dd>
<dt> <b>--nograb</b></dt>
<dd><p>Опция для разработчиков Enigma; она отключает в игре управление мышью. В этом режиме вы вряд ли сможете пройти хотя бы один уровень, но это даёт возможность исправлять ошибки в ядре приложения.
</p>
</dd>
<dt> <b>--nomusic</b></dt>
<dd><p>Запускает игру с выключенным музыкальным сопровождением.
</p>
</dd>
<dt> <b>--nosound</b></dt>
<dd><p>Запускает игру с выключенным звуковым сопровождением.
</p>
</dd>
<dt> <b>--pref -p имя_файла</b></dt>
<dd><p>Имя альтернативного файла настроек (без точки для имён скрытых файлов в начале). Как поясняет раздел <a href="#Locating-Resources">Размещение ресурсов</a>, эта опция предназначена исключительно для разработчиков игры.
</p>
</dd>
<dt> <b>--pref -p путь_к_директории</b></dt>
<dd><p>Путь к альтернативной директории, в которой содержится файл настроек со стандартным именем &lsquo;<samp>.enigmarc.xml</samp>&rsquo;. Если файл настроек или папка не существуют, они автоматически создаются. При создании файла настроек здесь по умолчанию располагается пользовательская папка данных. Это позволяет размещать все пользовательские данные игры в отдельной директории, которая может располагаться где угодно, например на USB-накопителе. Чтобы использовать эту новую настройку, всегда нужно запускать Enigma с данной опцией. Помните, что путь, содержащий пробелы, нужно заключать в кавычки.
</p>
</dd>
<dt> <b>--redirect</b></dt>
<dd><p>Перенаправляет &lsquo;<samp>stdout</samp>&rsquo; и &lsquo;<samp>stderr</samp>&rsquo; в файлы с названиями &lsquo;<samp>Output.log</samp>&rsquo; и &lsquo;<samp>Error.log</samp>&rsquo; в стандартной папке пользователя (см. раздел <a href="#Locating-Resources">Размещение ресурсов</a>). Для Windows данная опция всегда имеет значение <code>true</code>, но она полезна на любых операционных системах, если Enigma запускается через ярлык на рабочем столе или кнопку меню.
</p>
</dd>
<dt> <b>--robinson</b></dt>
<dd><p>Закрытие всех подключений к Интернету. При этом не будут выполняться никакие автоматические обновления и на все запросы пользователя, для выполнения которых требуется подключение к Интернету, будет выводиться сообщение об ошибке.
</p>
</dd>
<dt> <b>--showfps</b></dt>
<dd><p>Позволяет отображать во время игры количество кадров в секунду (FPS).
</p>
</dd>
<dt> <b>--version</b></dt>
<dd><p>Отображает номер версии и завершает свою работу.
</p>
</dd>
<dt> <b>--window -w</b></dt>
<dd><p>Позволяет запустить Enigma в оконном режиме (не в полноэкранном).
</p>
</dd>
</dl>

<p>Enigma интерпретирует все дальнейшие аргументы командной строки как адреса файлов уровней. Можно вводить абсолютные или относительные адреса файлов уровней, размещённых на компьютере. Также можно добавлять URL для уровней, выложенных в Интернете.
</p>
<p>Пользователи Unix могут запустить Enigma при помощи следующей команды:
</p>
<p><code>enigma --log ~/mylevel.xml http://somewhere.com/netlevel.xml</code>
</p>
<p>Пользователи Windows могут запустить Enigma из командной строки (не забудьте внести изменения в путь установки, чтобы он соответствовал пути установки Enigma на компьютере):
</p>
<p><code>C:\Programs\Enigma\enigma.exe --log demo_simple.xml</code>
</p>
<p>Эти уровни можно найти в пакете уровней &lsquo;<samp>Startup Levels</samp>&rsquo;. По умолчанию он является видимым, только если в командной строке указаны какие-либо уровни.
</p>
<hr size="6">
<a name="User-Options"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Startup-Switches" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Inventory-Console" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Running-Enigma" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Running-Enigma" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Levelpack-Basics" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="User-Options-1"></a>
<h2 class="section">1.3 Пользовательские опции</h2>

<dl compact="compact">
<dt> <b>Обновление рейтинга</b></dt>
<dd><p>Пожалуйста, для версий ниже 1.00 оставьте следующее значение для этой опции: &lsquo;<samp>Не обновлять</samp>&rsquo;.
</p>
</dd>
<dt> <b>Имя игрока</b></dt>
<dd><p>Введите ник, под которым Enigma будет сохранять ваши баллы. Пожалуйста, взгляните на список уже используемых ников на домашней странице Enigma и выберите ещё не используемый. Свой ник можно изменить в любой момент, не рискуя потерять свои данные.
</p>
</dd>
<dt> <b>Папка пользователя</b></dt>
<dd><p>Как поясняет раздел <a href="#Locating-Resources">Размещение ресурсов</a>, здесь можно указать произвольную директорию для хранения ваших пользовательских данных.
</p>
<p>Если очистить данную строку, то данные будут размещены в директории по умолчанию.
</p>
<p>Enigma активирует новый путь к папке эскизов после выхода из меню настроек. Хотя она сохраняет все файлы в новой папке и ещё может находить файлы в старой, мы советуем сразу выйти из игры и перенести данные из старой папки в новую. Это необходимо, так как при следующем запуске Enigma будет работать с данными только в новой директории.
</p>
</dd>
<dt> <b>Папка эскизов</b></dt>
<dd><p>Как поясняет раздел <a href="#Locating-Resources">Размещение ресурсов</a>, здесь можно ввести новую директорию для пользовательских изображений.
</p>
<p>Если очистить данную строку, то данные будут размещены в директории по умолчанию.
</p>
<p>Enigma активирует новый путь к папке эскизов после выхода из меню настроек. Хотя она сохраняет все файлы в новой папке и ещё может находить файлы в старой, мы советуем сразу выйти из игры и перенести данные из старой папки в новую. Это необходимо, так как при следующем запуске Enigma будет работать с данными только в новой директории.
</p>
</dd>
</dl>


<hr size="6">
<a name="Inventory-Console"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#User-Options" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Level-Info" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Running-Enigma" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Running-Enigma" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Levelpack-Basics" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Inventory-Console-1"></a>
<h2 class="section">1.4 Консольная функция инвентаря</h2>

<p>Нижняя правая область экрана, где обычно отображаются предметы, содержащиеся в инвентаре, и прокручиваются тексты активированных документов, также позволяет пользователю выводить тексты ранее активированных документов, вводить тесктовые команды и повторно вводить предыдущие команды.
</p>
<p>Команду можно ввести с клавиатуры. Просто введите команду и активируйте её, нажав клавишу &lt;Enter&gt;. Поддерживаются следующие команды:
</p>
<dl compact="compact">
<dt> <b>help</b></dt>
<dd><p>Выводит список всех доступных пользователю команд.
</p></dd>
<dt> <b>abort</b></dt>
<dd><p>Завершение уровня и возврат в меню уровней. Аналогично нажатию &lt;Alt+X&gt;
</p></dd>
<dt> <b>April 1st</b></dt>
<dd><p>Просто шутка.
</p></dd>
<dt> <b>cheats</b></dt>
<dd><p>Выводит &quot;читы&quot;, предназначенные для быстрого тестирования уровня его разработчиком.
</p></dd>
<dt> <b>collision</b></dt>
<dd><p>Необходимый разработчикам &quot;чит&quot;, отключающий столкновения между камнями и шариками или жемчужинами. При его использовании счёт в случае успешного завершения уровня сохранён не будет.
</p></dd>
<dt> <b>easy</b></dt>
<dd><p>Перезапуск уровня в простом режиме.
</p></dd>
<dt> <b>find</b> строка_поиска</dt>
<dd><p>Осуществляет во всех пакетах уровней поиск уровней, которые содержат указанную строку в заглавии, имени автора или имени файла.
</p></dd>
<dt> <b>god</b></dt>
<dd><p>Необходимый разработчикам &quot;чит&quot;, который защищает актёров, присвоенных текущему игроку, подобно активированному объекту <a href="#it_005fumbrella">it_umbrella</a>. При его использовании счёт в случае успешного завершения уровня сохранён не будет.
</p></dd>
<dt> <b>hunt</b></dt>
<dd><p>Переход в режим охоты за мировыми рекордами. Аналогично выбору иконки мирового рекорда на левой кнопке в меню уровней.
</p></dd>
<dt> <b>info</b></dt>
<dd><p>Выводит информацию об уровне, включая пакет уровней, расположение в пакете, путь к файлу, заглавие, автора, версию и внутренний идентификатор уровня.
</p></dd>
<dt> <b>jumpto</b> пакет,номер</dt>
<dd><p>Непосредственный запуск указанного уровня. Для пакета уровней указывается его название. Для уровня указывается его порядковый номер в пакете. Например <code>jumpto Enigma IV,33</code>.
</p></dd>
<dt> <b>nohunt</b></dt>
<dd><p>Выключает режим охоты за мировыми рекордами. Аналогично выбору иконки шарика на левой кнопке в меню уровней.
</p></dd>
<dt> <b>regular</b></dt>
<dd><p>Перезапуск уровня в сложном режиме.
</p></dd>
<dt> <b>restart</b></dt>
<dd><p>Перезапуск уровня в ранее выбранном режиме сложности.
</p></dd>
<dt> <b>suicide</b></dt>
<dd><p>Убивает актёров, но без завершения уровня, если это возможно. Аналогично нажатию клавиши F3&gt;.
</p></dd>
</dl>

<p>Игра сохраняет историю команд и отображаемых документов. Эту историю можно вывести с помощью стрелок вверх и вниз.
</p>
<ul>
<li> <b>инвентарь</b> &ndash;&gt; переход в начало
</li><li> <b>команда 10</b>, самая ранняя команда в истории
</li><li> <b>команда 9</b>
</li><li> &hellip;
</li><li> <b>команда 2</b>
</li><li> <b>команда 1</b>, последняя выполненная команда
</li><li> <b>выполняемая команда</b>, если последняя команда ещё не была выполнена
</li><li> <b>инвентарь</b> &lt;&ndash; начало
</li><li> <b>документ 1</b>, последний просмотренный документ
</li><li> <b>документ 2</b>, предыдущий просмотренный документ
</li><li> &hellip;
</li><li> <b>документ n</b>, первый просмотренный документ
</li><li> <b>название уровня, подзаголовок, автор</b>, информация, отображаемая при запуске уровня
</li><li> <b>инвентарь</b> &ndash;&gt; переход в начало
</li></ul>

<p>Стрелка вверх, изначально нажатая при отображении предметов в инвентаре, позволяет прокручивать ранее введённые команды. Повторно отправить команду можно нажатием клавиши &lt;Enter&gt;. История будет пересортирована, при этом последняя команда окажется непосредственно над инвентарём. Историю команд можно редактировать в любой момент, в том числе и добавлять туда новые команды. Если после ввода команды не была нажата клавиша &lt;Enter&gt;, строка всё же будет записана и выведена в качестве первой команды над инвентарём. История команд постоянно поддерживается в актуальном состоянии. 
</p>
<p>Историю документов можно вызвать с помощью стрелки вниз. Все документы, ранее отображённые на уровне, можно вывести повторно. Кроме того, можно снова вывести информацию, отображаемую при запуске уровня.
</p>
<p>Если клавишу вверх или вниз нажать после вывода на экран, соответственно, самой ранней команды или сообщения, то будет осуществлён возврат к инвентарю.
</p>
<hr size="6">
<a name="Level-Info"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Inventory-Console" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Public-Ratings" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Running-Enigma" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Running-Enigma" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Levelpack-Basics" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Level-Info-1"></a>
<h2 class="section">1.5 Информация об уровне</h2>

<a name="index-levelinspector"></a>
<p>Enigma хранит гораздо больше сведений о каждом уровне, чем можно отобразить в меню уровней. Эти сведения можно просмотреть с помощью инспектора уровней. Его можно вызвать, щёлкнув правой кнопкой мыши (или любой кнопкой мыши + Ctrl) по эскизу уровня в меню уровней.
</p>
<p>Помимо названия и автора уровня Enigma приводит публичный рейтинг уровня, различные типы баллов, информацию о версии уровня, размещении файла уровня и др. Также в инспекторе уровней можно ввести своё примечание к уровню. Из инспектора уровней можно просмотреть и сделанные снимки экрана уровня.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Public-Ratings">1.5.1 Публичные рейтинги</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Scores">1.5.2 Баллы</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Versions">1.5.3 Версии</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Private-Annotations-and-Ratings">1.5.4 Личные примечания и оценки</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Screenshots">1.5.5 Снимки экрана</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Public-Ratings"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Level-Info" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Scores" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Running-Enigma" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Level-Info" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Levelpack-Basics" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Public-Ratings-1"></a>
<h3 class="subsection">1.5.1 Публичные рейтинги</h3>

<p>Большинство уровней игры оцениваются по пяти различным категориям:
</p><ul>
<li>
инт = Интеллект

</li><li>
ловк = Ловкость

</li><li>
терп = Терпение

</li><li>
знан = Знание игры

</li><li>
скор = Скорость и контроль над скоростью

</li></ul>

<p>Мы используем сокращения, чтобы подчеркнуть отличие наименований категорий рейтинга от повседневных значений этих слов. В каждой из этих категорий уровни оцениваются по пятибалльной шкале от 1 (лёгкий) до 5 (сложный), за исключением категории &lsquo;знан&rsquo;, где уровням может присваиваться 6 баллов (уникальный механизм).
</p>
<p>Пожалуйста, имейте в виду, что строго придерживаться приведённых ниже критериев в почти 750 случаях чрезвычайно затруднительно, поэтому в отдельных уровнях могут быть (и будут) отклонения от них.
</p>
<p><strong>Интеллект (инт)</strong>
</p>
<p>Этот рейтинг отражает творческие и аналитические способности, а также способность к планированию, необходимые для решения уровня. Интеллект сам по себе довольно сложное понятие, которое не так-то легко сразу понять или оценить. Следовательно, фиксированные определения каждого пункта оценочной шкалы не только желательны, но и необходимы при выставлении оценок. Допустим, вам известны все отдельные элементы уровня. Задайте себе следующие вопросы:
</p><ul>
<li>
Понятно ли мне решение сразу же? Да -&gt; инт 1

</li><li>
Требуется ли от меня только сориентироваться на местности, например проверить, куда ведут телепорты или для чего служат переключатели? -&gt; инт 2

</li><li>
Существует ли стандартный алгоритм решения проблемы, например, нужно найти спрятанный предмет или выход из лабиринта? -&gt; инт 3

</li><li>
Не работают ни метод проб и ошибок, ни стандартные алгоритмы; это простой пример кода или требуется предварительное планирование? -&gt; инт 4

</li><li>
Это сложный код, цепочка шаблонов или причинно-следственных связей? -&gt; инт 5

</li></ul>

<p>Высокие рейтинги обычно присваиваются головоломкам. Инт-рейтинги не накапливаются: рейтинг уровня определяет его самая сложная задача.
</p>
<p><strong>Ловкость (ловк)</strong>
</p>
<p>Для решения многих уровней вам потребуются, главным образом, точные движения мышкой или терпение. В данном случае под ловкостью мы понимаем не &quot;аккуратность в противоположность поспешным, нетерпеливым движениям&quot;, а точность, необходимую, чтобы избежать смерти. Таким образом, данный рейтинг учитывает все потенциальные смертельные опасности уровня, не только пропасти и смертоносные камни, но и, например, потенциальную возможность случайно толкнуть нужный камень в угол, достать из которого его невозможно.
</p>
<ul>
<li>
Не важно, к чему я прикасаюсь, здесь мне абсолютно ничего не грозит. -&gt; ловк 1

</li><li>
Здесь есть смертельные опасности, но их несложно избежать. -&gt; ловк 2

</li><li>
На уровне есть потенциальные опасности, сравнимые с узким мостом над пропастью. -&gt; ловк 3

</li><li>
На уровне есть потенциальные опасности, сравнимые с необходимостью передвинуть камень направо, когда слева от вас пропасть, или пройти по узкому проходу между смертоносными камнями. -&gt; ловк 4

</li><li>
Чтобы решить уровень, нужно множество попыток. -&gt; ловк 5

</li></ul>

<p>В противоположность инт-рейтингам, данные рейтинги могут накапливаться: так, уровень, на котором имеется множество опасностей, оцениваемых в три балла, в результате может получить 4 или даже 5. Роторы в уровнях также ассоциируются с рейтингами ловкости &lsquo;ловк&rsquo; и скорости (&lsquo;скор&rsquo;). Поэтому уровни с комбинацией из &lsquo;ловк-скор&rsquo; в основном подвижные и активные, тогда как комбинации с высокими &lsquo;ловк-терп&rsquo; характерны для лабиринтов.
</p>
<p><strong>Терпение (терп)</strong>
</p>
<p>Терпение &mdash; это субъективный рейтинг; он в большей степени отражает &quot;ощущение времени&quot;, много ли времени потребовалось для решения уровня, исходя из субъективных ощущений игрока. Таким образом, два однотипных уровня могут иметь различные терп-рейтинги, если, например, у одного из них более привлекательный дизайн или прогресс игрока на нём более очевиден (например, сразу видно количество открытых оксидов). Необходимость много раз начинать уровень заново оказывает существенное влияние на этот рейтинг; важно не время в нижнем левом углу экрана и не счёт, а субъективное ощущение времени, прошедшего с момента, как вы впервые окинули уровень взглядом, до завершения уровня.
</p><ul>
<li>
Я решил уровень сразу же, как только понял, что от меня требуется. -&gt; терп 1

</li><li>
Мне потребовалось некоторое время, но было не скучно. -&gt; терп 2

</li><li>
Да, мне пришлось потратить достаточно времени на этот уровень, но дизайн здесь симпатичный... -&gt; терп 3

</li><li>
Я знаю, что здесь нужно делать, но, похоже, этот уровень никогда не кончится. -&gt; терп 4

</li><li>
Для этого уровня нужны стальные нервы. -&gt; терп 5

</li></ul>

<p>Большое количество оксидов на уровне может повысить его терп-рейтинг или же понизить его: если игроку нужно обойти уровень несколько раз, чтобы открыть все пары оксидов, это определённо повышает рейтинг. Однако, если оксиды расположены так, чтобы отмечать прогресс игрока, и являются своего рода наградой за пройденные этапы, они могут понизить терп-рейтинг. То же самое и с уровнями, на которых имеется большое количество дверей: решающим фактором является их расположение.
</p>
<p>Высокие терп-рейтинги обычно присваиваются лабиринтам. В сочетании с &quot;инт 3&quot; высокий терп-рейтинг обычно свидетельствует о наличии на уровне спрятанного предмета или полого камня. Терп-рейтинги относятся ко всему уровню, так что они не могут накапливаться.
</p>
<p><strong>Знание игры (знан)</strong>
</p>
<p>Рейтинг знания игры в основном учитывает функции и способы взаимодействия различных объектов игры, таких как камни, покрытия, предметы и актёры. Однако в некоторых случаях он учитывает и особые способы решения уровней. Основой при выставлении рейтинга является уровень &quot;Advanced Tutorial&quot;, которому присвоен рейтинг &quot;знан 3&quot;. Рейтинг &quot;знан 4&quot; присваивается уровням, на которых встречаются стандартные объекты, отсутствующие в &quot;Advanced Tutorial&quot;. Уровни с рейтингом &quot;знан 5&quot; требуют более глубокого знания внутренних закономерностей игры. И, наконец, рейтинг &quot;знан 6&quot; является показателем уникальных либо редко встречающихся способов решения уровня. Общий знан-рейтинг уровня определяется по наиболее сложным объектам или способам решения, встречающимся на нём, и, таким образом, не накапливается:
</p><ol>
<li>
Управление одним шариком на обычных покрытиях, обычные стены, оксиды, оксидоподобные камни, смертоносные камни, вода, пропасть, документы, использование инвентаря, неизменная гравитация, видимые склоны.

</li><li>
Перемещение камней, несложные задания а-ля &quot;Сокобан&quot;, постройка мостов через воду и пропасть, соединённые камни-мозаики, управление более чем одним шариком, медитация, решётки, роторы и волчки, невидимые склоны, триггеры и переключатели, двери, отверстия (кроме сделанных динамитом), болото, дискеты и камни для дискет (st-floppy), ключи и замки, монеты и отверстия для монет, трещины в полу, камни-таймеры.

</li><li>
Различные типы покрытий с различным трением и силой мыши, космос, лёд, инверсное покрытие, сочетание тонущих и плавучих камней, чёрные решетки, не пропускающие роторы и волчки, динамитные шашки, камни, которые можно взорвать с помощью динамита, лопаты, болдеры, волшебные палочки, изменяющие направление движения болдеров, необходимость загнать болдеров в пропасть, стекло, ложки, актёры и предметы, прячущиеся под подвижными камнями, маленькие белые шарики (не опасные), улицы определённого цвета с односторонним движением, импульсные камни (&quot;бамперы&quot;), роторы, перелетающие через пропасть, выхлопные камни, мечи и рыцари, лазеры, неподвижные и подвижные зеркала, трансформация предметов и монет под воздействием веса и лазера, зонтики, позволяющие перелетать через пропасть, молотки и бьющиеся камни (хотя и отсутствуют в &quot;Advanced Tutorial&quot;).

</li><li>
Постройка мостов на болотах, резиновые ленты, ленточные камни, камни-ножницы, разъединённые камни-мозаики, взрывающиеся камни-мозаики, изменение расположения камней-мозаик (волшебной палочкой и без неё), пружины (оба типа &mdash; напольные и встроенные, как на уровне &quot;Upstream Journey&quot;), воры, сёгун-камни из трёх частей, камни-невидимки, полые камни, камни-хамелеоны, предметы, спрятанные под камнями-хамелеонами, камни, замаскированные под другие камни (например фальшивые смертоносные камни), телепорты, магниты, необходимость использовать клавишу &lt;F3&gt; для решения уровня, символы Инь-Ян, одноцветные камни, камни Инь-Ян, обратные камни Инь-Ян, камни, которые можно разбить только шариком определённого цвета, шарики-убийцы, обменные камни, камни для кисточки и рисования, изменение направления на улице с односторонним движением при помощи волшебной палочки, превращение камней в стекло при помощи волшебной палочки, импульсные камни (подвижные, статичные и полые), чёрные и белые бомбы, камни-бомбохранилища, огонь, огнетушители, вращающиеся камни, жёлтые антиобменные камни, мины, флажки, семена, гири, необходимость положить объект под однонаправленные и другие полые камни, электрические камни, турникеты, почтовые камни и каналы связи, кольца (для одного и нескольких игроков), вулканы, сумки, генерирование случайного набора объектов (как возможный результат действия переключателя), лошади (актёры) и камни, через которые лошади могут проходить, шипы, бананы, вишни (необходимы, чтобы сделать шарик невидимым), сюрпризы.

</li><li>
Трещины, напольные пружины, телепорты и т. д. &mdash; все предметы, семена растут внутри камней, лазер блокируется всеми предметами, шарики-убийцы не тонут в воде, столкновения, подобные тем, которые присутствуют на уровне &quot;Space Meditation&quot;, необходимость удерживать кнопку мыши, невидимость как способ пройти сквозь стекло, прыжки через лазеры...

</li><li>
Плюющиеся камни, камни-сюрпризы, уровни типа &quot;Enigris&quot; или &quot;Flood Gates&quot; ...

</li></ol>

<p>&quot;Знан 6&quot; не обязательно означает, что уровень сложен для понимания; уникальный объект или механизм может быть и интуитивно понятным, как, например, во &quot;Flood Gates&quot;.
</p>
<p><strong>Скорость и контроль над скоростью (скор)</strong>
</p>
<p>Скор-рейтинг отражает не только максимальную скорость, которая требуется от игрока (например, когда вам нужно убежать от ротора), но и степень контроля над мышью, которой обладает игрок. Отличными примерами применения второго критерия являются уровень &quot;Mourning Palace&quot; и средняя часть &quot;Sacrifice&quot;. Этот критерий учитывает необходимость двигать мышью с постоянной скоростью на протяжении длительного времени, а также необходимость правильной оценки скорости, требуемой для выполнения определённого задания (например, разбить стекло).
</p>
<ol>
<li>
Никаких ограничений по времени.

</li><li>
Не останавливайтесь надолго. Вас, к примеру, может кто-нибудь преследовать на невысокой скорости.

</li><li>
Присутствует умеренное ограничение по времени либо необходимость контроля над скоростью. Это может быть один не очень быстрый ротор на открытой территории.

</li><li>
Не останавливайтесь! На уровне могут быть, к примеру, задания с ограничением по времени или роторы (один быстрый либо несколько медленных).

</li><li>
Скорее! Если &quot;скор 4&quot; означает, что уровень сложный, но решаемый, то рейтинг &quot;скор 5&quot; применяется для уровней, для которых данное определение было бы очень сильным преуменьшением.

</li></ol>

<p>Скор-рейтинг накапливается, так как множество медленных роторов могут в сумме составить задание, по сложности подпадающее под &quot;скор 3&quot; или &quot;скор 4&quot;, а несколько медленных таймеров-переключателей, которые нужно нажать в определенном порядке, могут представлять собой задание, находящееся на пределе человеческих возможностей. В отличие от остальных категорий, для которых средний рейтинг приближается к 3 (или находится между 3 и 4 для знан), большинство уровней определённо подпадают под определение &quot;скор 1&quot;. Таким образом, скор-рейтинг можно, скорее, рассматривать как приложение к трём основным рейтингам: инт, ловк и терп.
</p>
<p><strong>Совокупность рейтингов</strong>
</p>
<p>Иногда бывает интересно определить общую шкалу, по которой можно измерить сложность уровня. Простейший способ вычислить такой общий рейтинг &mdash; это выбрать линейную комбинацию пяти отдельных рейтингов, взятых с определёнными коэффициентами. Эти коэффициенты должны соответствовать тому вкладу, который данная категория вносит в общую сложность уровня. Но коэффициенты следует выбирать с осторожностью, чтобы избежать теоретических казусов при вычислении (к примеру, если коэффициенты для всех рейтингов, кроме скор, являются чётными, мы получим заметное различие в распределении чётных и нечётных общих рейтингов, что может заметно исказить картину). Ниже мы приводим работающую и чрезвычайно интересную линейную комбинацию, которую мы применяли для изменения порядка следования уровней:
</p>

<table><tr><td>&nbsp;</td><td><pre class="example">общая сложность  =  7*инт + 6*ловк + 4*терп + 3*знан + 4*скор - 23
</pre></td></tr></table>

<p>Особенностью данного способа вычисления общего рейтинга является то, что он распределяет уровни по относительно широкой и непрерывной шкале от 1 (все рейтинги равны 1) до 100 (все рейтинги 5, знание 6) и основной упор в нём сделан на самые сложные категории &mdash; интеллект и ловкость. Однако некоторые очень низкие и очень высокие значения (например 2 и 99) не могут встречаться в этой комбинации. Другие комбинации позволяют получить полную, но узкую, либо широкую, но не являющуюся непрерывной шкалу.
</p>
<hr size="6">
<a name="Scores"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Public-Ratings" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Versions" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Running-Enigma" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Level-Info" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Levelpack-Basics" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Scores-1"></a>
<h3 class="subsection">1.5.2 Баллы</h3>

<p>В колонке баллов находятся ваши баллы, а также некоторые сравнительные величины для нормального и лёгкого режимов (если уровень поддерживает лёгкий режим).
</p>
<p>Мировой рекорд &mdash; это лучшее время прохождения уровня, которое было прислано команде разработчиков Enigma. Мировые рекордсмены перечислены под колонкой с баллами.
</p>
<p>PAR &mdash; это профессиональный усреднённый рейтинг (professional average rating) уровня. Это гармоническое среднее всех баллов, которые были присланы нам игроками. Однако мы учитываем только баллы, набранные игроками, которые решили определённое количество уровней. В отличие от мирового рекорда, побить который очень сложно, PAR представляет собой куда более достижимую цель для амбициозного игрока. Уровни, пройденные за время, равное PAR либо лучшее, чем PAR, отмечаются изображением ускоряющегося шарика в меню уровней.
</p>
<p>Ещё один тип сведений в данной колонке &mdash; это авторское время. Большинство авторов не ставят себе цели удерживать мировые рекорды для своих собственных уровней. Однако им обычно известен кратчайший путь решения уровня. Если ваше время значительно превышает авторское, то для этого уровня, вполне возможно, существует более простое решение.
</p>
<p>Количество решивших &mdash; это количество игроков, которые решили данную версию уровня.
</p>
<p>Процент решивших &mdash; это отношение количества игроков, решивших данный уровень, к общему количеству игроков, приславших нам свои баллы. Мы учитываем только тех игроков, у которых была возможность решить данный уровень. К примеру, игроки, которые прислали нам свои баллы до написания уровня и после их не обновляли, нами не учитываются. Низкий процент решивших указывает на то, что решить уровень не так-то просто.
</p>
<hr size="6">
<a name="Versions"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Scores" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Private-Annotations-and-Ratings" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Running-Enigma" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Level-Info" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Levelpack-Basics" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Versions-1"></a>
<h3 class="subsection">1.5.3 Версии</h3>

<p>В колонке &quot;Версия&quot; содержится подробная информация об уровне. Обратитесь к разделам <a href="#g_t_003cversion_003e">&lt;version&gt;</a> и <a href="#g_t_003cmodes_003e">&lt;modes&gt;</a> главы Основы работы с уровнями, где объяснены приведённые в колонке значения.
</p>
<p>Для игрока наибольший интерес представляет строка &lsquo;<samp>Номер версии</samp>&rsquo;. На эскизе уровня, который решён за определённое время, после обновления Enigma может появиться красный треугольник. Хотя медали, которые указывают на то, что уровень решён, и присутствуют в меню уровней, баллы больше не указываются. Это происходит из-за того, что обновлённый уровень требует нового решения и баллы, набранные при решении предыдущего уровня, к нему неприменимы. В таких случаях автор увеличит номер версии уровня.
</p>
<hr size="6">
<a name="Private-Annotations-and-Ratings"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Versions" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Screenshots" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Running-Enigma" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Level-Info" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Levelpack-Basics" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Private-Annotations-and-Ratings-1"></a>
<h3 class="subsection">1.5.4 Личные примечания и оценки</h3>

<p>В этом поле можно ввести свою аннотацию уровня, которую можно изменить при повторных попытках пройти уровень. Обратите внимание, что нынешние возможности текстового поля ограничены (нельзя ввести некоторые символы, и курсор при введении текста должен оставаться в границах поля). Тем не менее, это поле подходит для ввода кратких примечаний, которые могут пригодиться позже.
</p>
<p>Примечания хранятся в вашем персональном файле &lsquo;<samp>state.xml</samp>&rsquo;. Для каждого уровня, вне зависимости от его версии, можно ввести только одно примечание.
</p>
<p>Кроме того, уровням можно выставлять оценки. Просто нажмите на кнопку &quot;Рейтинг&quot;. Можно выставлять оценки от 1 до 10, знак &lsquo;<samp>-</samp>&rsquo; означает &quot;воздержался&quot;. 0 означает очень плохой уровень, в который, по вашему мнению, не стоит и играть, 5 обозначает средний уровень, 10 &mdash; самый лучший. Старайтесь использовать все значения при выставлении оценок.
</p>
<p>Ваши оценки хранятся вместе с баллами и обрабатываются анонимно. Средняя оценка, полученная после обработки всех оценок, выставленных уровню игроками, выводится для вашего сведения. Обратите внимание, что для различных версий уровня возможны разные оценки, так как уровни могут улучшиться под влиянием комментариев пользователей. Если вы не выставили оценку новой версии уровня, Enigma оставляет оценку, которая была выставлена предыдущей версии.
</p>
<hr size="6">
<a name="Screenshots"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Private-Annotations-and-Ratings" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Handicap-and-PAR" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Running-Enigma" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Level-Info" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Levelpack-Basics" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Screenshots-1"></a>
<h3 class="subsection">1.5.5 Снимки экрана</h3>

<p>Играя на уровне, можно делать снимки экрана при помощи клавиши &lt;F10&gt;. Можно сделать целую серию снимков экрана, чтобы получить документальные свидетельства об игре. Каждый снимок экрана программа сохраняет под уникальным именем файла. При помощи инспектора уровней можно просматривать снимки экрана прямо из игры. Просто нажмите на кнопку &lt;Снимок экрана&gt; для просмотра первого изображения.
</p>
<p>Так как кнопки могут помешать просмотру, управление игрой в данном режиме осуществляется исключительно с помощью клавиатуры. Нажмите &lt;F1&gt; для вызова экрана помощи, &lt;ESC&gt;, чтобы вернуться к инспектору уровней, &lt;Page Up&gt; и &lt;Page Down&gt; для просмотра, соответственно, предыдущего и следующего снимка экрана. Если продолжить просмотр после показа последнего снимка экрана, &quot;недостающий&quot; файл снимка экрана получит имя. Это может быть полезной подсказкой, где искать другие файлы снимков экрана в вашей &lsquo;<samp>папке эскизов</samp>&rsquo; (см. раздел <a href="#Locating-Resources">Размещение ресурсов</a>).
</p>
<hr size="6">
<a name="Handicap-and-PAR"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Screenshots" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#User-Sound-Sets" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Running-Enigma" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Running-Enigma" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Levelpack-Basics" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Handicap-and-PAR-1"></a>
<h2 class="section">1.6 Гандикап и пар (PAR)</h2>

<p>В то время как PAR описывает степень сложности уровня (см. раздел <a href="#Scores">Баллы</a>), гандикап (&lsquo;<samp>гкп</samp>&rsquo;) описывает способность решать уровни в рамках PAR. Гандикап всегда привязан к пакету уровней либо группе пакетов. Свой гандикап для каждого пакета в меню уровней можно узнать, выбрав режим соответствия (нажимайте на кнопку в нижнем левом углу экрана, пока не появится изображение ускоряющегося чёрного шарика). Гандикап выводится в правом верхнем углу экрана вместе с количеством уровней, которые решены ниже PAR.
</p>
<p>Гандикап в Enigma напоминает гандикап, используемый в гольфе. Чем он ниже, тем лучше. Если решить все уровни за время, равное PAR, гандикап будет равен 0. Если их решить за время, лучшее, чем PAR, гандикап будет выражаться отрицательным числом. Игроки могут использовать гандикап для сравнения своего мастерства.
</p>
<p>Для тех, кто хочет узнать больше о PAR и гандикапе, ниже мы приводим дополнительную информацию. Остальные могут её пропустить и перейти к следующей главе <a href="#Levelpack-Basics">Основы работы с пакетами уровней</a>.
</p>
<p>Мы просим всех игроков присылать нам свои баллы. Все присланные баллы учитываются при определении мировых рекордов и подсчёте процента и количества игроков, решивших уровень.
</p>
<p>Однако при подсчете PAR мы учитываем баллы только тех пользователей, которые решили более определённого количества уровней (на данный момент примерно 10% всех уровней). Для каждого уровня мы подсчитываем гармоническое среднее баллов, набранных &lsquo;<samp>профессиональными игроками</samp>&rsquo;. Профессионалы, не решившие уровень, учитываются при подсчете с баллами в 10 раз большими, чем мировой рекорд. Гармоническое среднее вычисляется по формуле:
</p>
<p>гарм.средн. = N / (sum_[j=1..N] 1/баллы_j) )
</p>
<p>При таком способе подсчёта меньшее время прохождения уровня соответствует более высоким величинам, чем большее время.
</p>
<p>Гандикап &mdash; это сумма величин, которая описывает соответствие баллов рейтингу PAR. Поскольку необходимо учитывать, что для каких-то уровней баллов у вас может и не быть либо PAR может отсутствовать, мы ввели несколько исключений:
</p>
<table>
<tr><td width="10%">&bull;</td><td width="15%">+ 1.0</td><td width="75%">Для каждого нерешённого уровня</td></tr>
<tr><td width="10%">&bull;</td><td width="15%">+ log10(время/par)</td><td width="75%">Для каждого решённого уровня, для которого существует PAR, если ваше время &gt;= par</td></tr>
<tr><td width="10%">&bull;</td><td width="15%">+ 0.7</td><td width="75%">Верхний предел для каждого решённого уровня, для которого существует PAR, если ваше время &gt;= par</td></tr>
<tr><td width="10%">&bull;</td><td width="15%">+ log2(время/par)</td><td width="75%">Для каждого решённого уровня, для которого существует PAR, если ваше время &lt; par</td></tr>
<tr><td width="10%">&bull;</td><td width="15%">- 3.0</td><td width="75%">Нижний предел, а также величина для уровней, для которых нет PAR</td></tr>
</table>

<p>Обратите внимание, что всем баллам, лучшим, чем PAR, соответствует отрицательная величина, таким образом они уменьшают общую величину гандикапа. Для пакета, состоящего из 100 уровней, гандикап может быть в пределах от +100 до -300. Для пакетов, состоящих из большего либо меньшего количества уровней, Enigma применяет коэффициент &quot;100/размер пакета&quot; для получения сравнимых величин гандикапа. Гандикапы указываются с точностью до одной десятой.
</p>

<hr size="6">
<a name="User-Sound-Sets"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Handicap-and-PAR" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Levelpack-Basics" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Running-Enigma" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Running-Enigma" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Levelpack-Basics" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="User-Sound-Sets-1"></a>
<h2 class="section">1.7 Пользовательские наборы звуков</h2>

<p>(Следующая информация действительна только для версии Enigma 1.01 и выше.) Звуковые эффекты вызываются так называемыми &lsquo;<samp>звуковыми событиями</samp>&rsquo; (&lsquo;<samp>sound events</samp>&rsquo;). У этих звуковых событий обычно есть имя (например &lsquo;<samp>dooropen</samp>&rsquo; &mdash; открытие двери) и ассоциированное размещение (координаты двери), которые влияют на проигрывание звукового эффекта. Собрание всех аудио файлов, их соотнесение со звуковыми событиями, а также некоторая дополнительная информация по их использованию называется &lsquo;набором звуков&rsquo; (&lsquo;<samp>sound set</samp>&rsquo;).
</p>
<p>Можно использовать свои собственные аудиофайлы для создания персональных наборов звуков Enigma и выбирать между наборами звуков в меню настроек (опция &lsquo;<samp>Набор звуков</samp>&rsquo;). Эти наборы звуков можно распространять на условиях любой лицензии, а также устанавливать наборы звуков, созданные другими пользователями. В игре не предусмотрено никаких ограничений на количество установленных наборов звуков.
</p>
<p>Звуковое событие конвертируется в звуковой эффект с помощью таблиц. Эти таблицы можно найти в файле &lsquo;<samp>data/sound-defaults.lua</samp>&rsquo;, а также в пустом файле сэмплов &lsquo;<samp>reference/soundset.lua</samp>&rsquo;. Каждый пункт в этих таблицах представляет собой либо строку типа &lsquo;<samp>enigma/st-coinslot</samp>&rsquo;, которая понимается программой как файл &lsquo;<samp>soundsets/enigma/st-coinslot.wav</samp>&rsquo; с некими свойствами по умолчанию, либо список звуковых атрибутов в фигурных скобках. Звуковые события, вызываемые с помощью сообщения <a href="#sound">sound</a>, конвертируются таким же способом. Ниже мы приводим пример подобного пункта таблицы:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">dooropen = { file=&quot;my_soundset/open-door&quot;, volume=0.9, priority=4 },
</pre></td></tr></table>

<p>Данные атрибуты имеют следующие значения:
</p>
<ul>
<li> &lsquo;<samp>file</samp>&rsquo; Путь и имя файла для данного события (без расширения &lsquo;<samp>.wav</samp>&rsquo;).

</li><li> &lsquo;<samp>volume</samp>&rsquo; Громкость звука: 1.0 &mdash; по умолчанию, 0.0 &mdash; звук выключен.

</li><li> &lsquo;<samp>priority</samp>&rsquo; Если одновременно активны несколько эффектов, то эффекты с высоким приоритетом могут замещать эффекты с более низким приоритетом. Задайте приоритет при помощи целых чисел от 1 до 10 (по умолчанию - 1). Эта опция ещё не работает в Enigma 1.01.

</li><li> &lsquo;<samp>global</samp>&rsquo; Может являться истинным &lsquo;<samp>true</samp>&rsquo; или ложным &lsquo;<samp>false</samp>&rsquo;.  Если &lsquo;<samp>true</samp>&rsquo;, стерео эффекты и затухание отсутствуют.  Используется для звукового сопровождения меню, финалов уровней и т. д.  По умолчанию задано &lsquo;<samp>false</samp>&rsquo;.

</li><li> &lsquo;<samp>loop</samp>&rsquo; &lsquo;<samp>true</samp>&rsquo; или &lsquo;<samp>false</samp>&rsquo;. Если &lsquo;<samp>true</samp>&rsquo;, звуковой эффект повторяется бесконечное количество раз, пока его не отменят. По умолчанию задано &lsquo;<samp>false</samp>&rsquo;.

</li><li> &lsquo;<samp>damp_max</samp>&rsquo;, &lsquo;<samp>damp_inc</samp>&rsquo;, &lsquo;<samp>damp_mult</samp>&rsquo;, &lsquo;<samp>damp_min</samp>&rsquo;, &lsquo;<samp>damp_tick</samp>&rsquo; Параметры приглушения звуков.  Звуки, издаваемые шумными объектами, такими как камни-наездники, в игре приглушаются.  Для этого подсчитывается частота звука.  &lsquo;<samp>damp_max</samp>&rsquo; задаёт максимальный коэффициент приглушения (чем выше коэффициент, тем тише звук), &lsquo;<samp>damp_inc</samp>&rsquo; задаёт скорость нарастания приглушения, &lsquo;<samp>damp_mult</samp>&rsquo; &mdash; общий коэффициент, &lsquo;<samp>damp_min</samp>&rsquo; задаёт нижнюю границу для записей о приглушении (если значения расположены ниже этой границы, то они стираются из памяти), а &lsquo;<samp>damp_tick</samp>&rsquo; продолжительность (десятых секунды).  Более подробную информацию смотрите в файле &lsquo;<samp>sound.hh</samp>&rsquo;. По умолчанию: 10.0, 1.0, 1.0, 0.5, 0.9.

</li></ul>

<p>Чтобы создать новый набор звуков, следуйте следующей инструкции:
</p>
<ol>
<li>
Создайте новую папку, содержащую копию файла сэмплов &lsquo;<samp>soundset.lua</samp>&rsquo; и wav-файлы, которые вы хотите использовать.

</li><li>
Переместите её в папку &quot;soundsets&quot;, находящуюся в вашей пользовательской папке (возможно, придётся её создать). Структура директории должна выглядеть примерно так:

<table><tr><td>&nbsp;</td><td><pre class="example">(папка пользователя)/soundsets/my_sounds/
                               /soundset.lua
                               /high_pitch.wav
                               /soundfile_13.wav
                               ...
</pre></td></tr></table>

</li><li>
Запустите игру и выберите &lsquo;<samp>My Soundset</samp>&rsquo; в меню настроек.  Так как в данном наборе звуков звуковые эффекты не ассоциированы с wav-файлами, звук должен отсутствовать.

</li><li>
Отредактируйте файл &lsquo;<samp>soundset.lua</samp>&rsquo; по своему усмотрению.  Можно использовать звуковые файлы по умолчанию, например:

<table><tr><td>&nbsp;</td><td><pre class="example">...
coinsloton = { file=&quot;enigma/st-coinslot&quot; },
...
</pre></td></tr></table>

<p>Если используете свои собственные файлы, не забудьте создать соответствующие подпапки, например:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">...
coinsloton = { file=&quot;my_sounds/soundfile_13&quot; },
...
</pre></td></tr></table>

<p>Ни в коем случае не указывайте расширение &quot;.wav&quot;! Оно добавляется автоматически. Проверьте, чтобы расширение было написано строчными буквами.
</p>
</li><li>
Замените &lsquo;<samp>MY_SOUNDSET</samp>&rsquo; подходящим именем переменной, а &lsquo;<samp>My Soundset</samp>&rsquo; &mdash; именем, которое вы хотите видеть в меню звуковых настроек.  Не делайте его слишком длинным, чтобы оно уместилось на кнопке.  Три переменных-идентификатора, имя кнопки и имя директории не обязательно должны быть одинаковыми, но похожие имена, уникальные для каждого набора звука, облегчают жизнь другим разработчикам.

</li></ol>

<p>Не забудьте выбрать нужный набор звуков в меню настроек всякий раз, когда вы переименовываете его.  И всегда выходите из игры, когда вносите изменения в набор звуков: Enigma не определяет новые наборы звуков без перезапуска.
</p>
<p>У вас есть право свободно распространять zip-архивы, содержащие ваш набор звуков и файл &lsquo;<samp>soundset.lua</samp>&rsquo;. Новый набор звуков можно установить из архива, просто распаковав его в поддиректорию &lsquo;<samp>soundsets</samp>&rsquo; вашей папки пользователя. Убедитесь, что файл &lsquo;<samp>soundset.lua</samp>&rsquo; находится на одну поддиректорию ниже, чем &lsquo;<samp>soundsets</samp>&rsquo;. Деинсталлировать набор звуков можно, просто удалив соответствующую папку. Если вы хотите сделать набор звуков невидимым для Enigma, одного только переименования директории недостаточно, следует переименовать и файл &lsquo;<samp>soundset.lua</samp>&rsquo;. Это может пригодиться, если вы используете взаимозависимые наборы звуков (звуковые наборы, использующие общие файлы) и хотите сделать недоступным только один из них.
</p>

<hr size="6">
<a name="Levelpack-Basics"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#User-Sound-Sets" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Getting-Started-with-Levelpacks" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Running-Enigma" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Level-Basics" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Levelpack-Basics-1"></a>
<h1 class="chapter">2. Основы работы с пакетами уровней</h1>

<p>Теперь, после ознакомления с основами работы с Enigma, вам, наверное, будет интересно узнать, как уровни организуются в пакеты и как можно добавить уровни либо пакеты уровней в игру.
</p>
<a name="index-crossreference"></a> <a name="index-crossindex"></a> <a name="index-levelpack"></a> <a name="index-index"></a>
<p>Пакеты уровней &mdash; это отсортированные коллекции уровней, состоящие из указателя и (необязательно) приложенных к нему источников уровней. Не все источники уровней должны обязательно находиться в самом пакете. В пакете уровней могут использоваться перекрёстные ссылки на уровни из других пакетов. Если пакет не содержит собственных источников и состоит исключительно из перёкрестных ссылок, уместно называть его перекрёстным указателем, поскольку он представляет собой только файл-указатель.
</p>
<p>Приведённое выше описание соответствует всем версиям Enigma. Однако вплоть до версии 0.92 пакеты уровней нужно было редактировать вручную, а регистрация пакетов была сложным процессом. Поэтому для версии Enigma 1.00 мы решили переписать всю систему пакетов, постаравшись сделать её гибкой и лёгкой в использовании. Мы преследовали следующие цели:
</p>
<ul>
<li>
пакет уровней &lsquo;<samp>Auto</samp>&rsquo;, который позволял бы добавлять уровни путём перетаскивания исходного уровня

</li><li>
добавление пакетов уровней путём копирования файлов в папку пользователя

</li><li>
автоматическое определение всех пакетов без необходимости прибегать к редактированию регистрационного файла

</li><li>
уровни, задаваемые из командной строки, как стандартный пакет

</li><li>
пакет уровней &lsquo;<samp>History</samp>&rsquo; (История) с перекрёстными ссылками на последние сыгранные уровни

</li><li>
вывод результатов поиска в виде пакета с перекрёстными ссылками

</li><li>
пакеты уровней в формате zip, являющиеся архивами директорий с пакетами и файлами уровней

</li><li>
группировка пакетов уровней в меню

</li><li>
встроенный инструмент для создания и редактирования пакетов

</li><li>
обновление пакетов без необходимости обновления самой игры

</li><li>
автоматическое преобразование пакетов уровней из Enigma 0.92

</li></ul>

<p>Некоторые из этих функций работают автоматически. Их можно задействовать прямо из меню уровней. Для использования других необходимо знать, где размещать файлы. Более подробная информация приводится в следующих разделах:
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Getting-Started-with-Levelpacks">2.1 Начало работы с пакетами уровней</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Converting-0_002e92-Levelpacks">2.2 Конвертирование пакетов из версии 0.92</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Zip-Levelpacks">2.3 Пакеты в формате zip</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Grouping-and-Sorting-Levelpacks">2.4 Группировка и сортировка пакетов</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Creating-New-Levelpacks">2.5 Создание новых пакетов уровней</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Modifying-and-Deleting-Levelpacks">2.6 Изменение и удаление пакетов</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Composing-Levelpacks">2.7 Составление пакетов уровней</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Getting-Started-with-Levelpacks"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Levelpack-Basics" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Converting-0_002e92-Levelpacks" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Levelpack-Basics" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Levelpack-Basics" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Level-Basics" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Getting-Started-with-Levelpacks-1"></a>
<h2 class="section">2.1 Начало работы с пакетами уровней</h2>

<p>Одна из наиболее выдающихся черт Enigma &mdash; это возможность добавлять в неё новые уровни. А сообщество пользователей обычно присылает нам несколько новых превосходных уровней каждую неделю.
</p>
<p>Добавить новый уровень, полученный в виде XML-файла, очень просто. Найдите поддиректорию &lsquo;<samp>levels/auto</samp>&rsquo; в вашей &lsquo;<samp>папке пользователя</samp>&rsquo; (см. раздел <a href="#Locating-Resources">Размещение ресурсов</a>), скопируйте файл уровня в эту папку и перезапустите игру. Новый уровень появится в пакете &lsquo;<samp>Auto</samp>&rsquo; и в него можно будет сыграть точно так же, как и в любой другой.
</p>
<p>Обратите внимание, что для уровней, содержащих ошибки либо несовместимых с данной версией, в меню уровней отображается значок ошибки. Естественно, при попытке сыграть в уровень будет получено сообщение об ошибке Просмотрите метаданные уровня в инспекторе уровня (см. раздел <a href="#Level-Info">Информация об уровне</a>), чтобы определить совместимую версию, и свяжитесь с автором уровня по электронной почте в случае наличия ошибок в коде.
</p>
<p>Второй способ сыграть в новые уровни &mdash; это добавить адреса файлов этих уровней в командную строку (см. раздел <a href="#Startup-Switches">Опции запуска</a>). Так можно играть в уровни, которые хранятся где угодно, можно даже вводить URL уровней, размещённых в Интернете. Уровни, добавленные в командную строку, находятся в пакете &lsquo;<samp>Startup Levels</samp>&rsquo;.
</p>
<p>При желании сыграть в уровень Lua, написанный с использованием устаревшего формата для Enigma 0.92 или более ранней версии, можно попытаться запустить его из командной строки. В таких уровнях отсутствуют необходимые метаданные для автоматического определения. Однако уровни, заданные из командной строки, воспринимаются игрой как временные, доступные только для одного запуска; недостающие данные заменяются уместными данными по умолчанию. Такой уровень, возможно, запустится, но сохранение баллов, копирование и ссылки на уровень будут невозможны.
</p>
<p>Помимо отдельных новых уровней в сообществе пользователей могут распространяться целые пакеты. Эти пакеты могут представлять собой папки с уровнями, zip-архивы или отдельные XML-файлы. Все пакеты могут быть установлены простым копированием файлов, но между этими тремя форматами существуют различия.
</p>
<p>Пакеты уровней, распространяемые в виде папок с файлами уровней и файлом-указателем, следует копировать в папку &lsquo;<samp>levels</samp>&rsquo; в вашей папке пользователя (см. раздел <a href="#Locating-Resources">Размещение ресурсов</a>).
</p>
<p>Пакеты уровней, распространяемые в виде zip-архивов, следует копировать в папку &lsquo;<samp>levels</samp>&rsquo; в вашей папке пользователя. Распаковывать их не обязательно, хотя это и возможно (см. раздел <a href="#Zip-Levelpacks">Пакеты в формате zip</a>).
</p>
<p>Пакеты уровней, распространяемые в виде отдельных файлов-указателей XML, следует копировать в папку &lsquo;<samp>levels/cross</samp>&rsquo; в вашей папке пользователя.
</p>
<p>Все новые пакеты должны быть доступны из меню пакетов уровней после перезапуска Enigma.
</p>
<p>Это всё, что нужно знать для того, чтобы добавлять новые уровни и пакеты уровней для тестирования и игры. Если вы заинтересованы прежде всего в том, чтобы создавать новые уровни, то стоит сразу же обратиться к главе <a href="#Level-Basics">Основы работы с уровнями</a>. В остальных же разделах этой главы объясняется, как размещать и сортировать уровни в пользовательских пакетах.
</p>
<hr size="6">
<a name="Converting-0_002e92-Levelpacks"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Getting-Started-with-Levelpacks" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Zip-Levelpacks" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Levelpack-Basics" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Levelpack-Basics" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Level-Basics" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Converting-0_002e92-Levelpacks-1"></a>
<h2 class="section">2.2 Конвертирование пакетов из версии 0.92</h2>

<p>В связи с изменением формата указателя пакета уровней возникла необходимость в конвертировании пакетов из предыдущих версий. Хотя основная работа выполняется автоматически при запуске Enigma, в некоторых случаях требуется подготовка вручную. К тому же и после автоматического преобразования полезно вручную подчистить его результаты.
</p>
<p>Если раньше вы хранили пакеты в папке системных файлов Enigma, то из старой версии игры их нужно скопировать в поддиректорию &lsquo;<samp>levels</samp>&rsquo; в папке пользователя (см. раздел <a href="#Locating-Resources">Размещение ресурсов</a>). Пользовательская папка существует на всех системах, и, начиная с версии 1.00, Enigma никогда не вносит изменения в системную директорию файлов уровней; обновления и преобразование она выполняет только в папке пользователя. Если пакеты были внесены в файл &lsquo;<samp>index.lua</samp>&rsquo; в системной директории, то нужно скопировать регистрационные строки в файл &lsquo;<samp>index_user.lua</samp>&rsquo;, который следует хранить в папке пользователя.
</p>
<p>Если у вас было несколько пакетов уровней, в Enigma 0.92 их можно было хранить в различных поддиректориях папки &lsquo;<samp>levels</samp>&rsquo;. Однако, поскольку можно было хранить все файлы уровней и различные указатели в самой папке &lsquo;<samp>levels</samp>&rsquo;, с автопреобразованием возникнут трудности, так как Enigma 1.00 допускает только один пакет уровней с приложенными файлами уровней в каждой папке. В подобных случаях мы рекомендуем поэтапное преобразование: на каждом этапе конвертируйте только один старый указатель. Enigma сконвертирует этот указатель в новый файл &lsquo;<samp>index.xml</samp>&rsquo;. Переместите полученный указатель в соответствующую папку вместе с уровнями и приступайте к преобразованию нового пакета.
</p>
<p>Следует отдельно рассмотреть случаи, когда указатель в папке &lsquo;<samp>levels</samp>&rsquo; содержал ссылки на уровни, хранящиеся в различных поддиректориях папки &lsquo;<samp>levels</samp>&rsquo;. Поскольку в Enigma 0.92 не применялись перекрёстные указатели, а Enigma 1.00 требует, чтобы все файлы уровней пакета хранились в отдельной папке, алгоритму преобразования приходится самому определять нужную папку. Он просто берёт поддиректорию первого уровня. Если это не подходит, то перед преобразованием нужно очистить пакет из версии 0.92.
</p>
<p>Все прочие стандартные пакеты уровней Enigma конвертирует без особых проблем. Преобразование она выполняет только один раз. После создания нового файла &lsquo;<samp>index.xml</samp>&rsquo; используется только этот указатель. Следовательно, после тщательной проверки старый &lsquo;<samp>index.txt</samp>&rsquo; может быть удалён. Мы рекомендуем сохранять резервную копию старого индекса до окончательного перехода на Enigma 1.00.
</p>
<p>Если вы использовали персональный пакет уровней в формате zip, то вы найдёте поддиректорию с именем zip-архива в папке &lsquo;<samp>levels</samp>&rsquo;. В этой папке Enigma сохраняет конвертированный файл &lsquo;<samp>index.xml</samp>&rsquo;. Вам, скорее всего, придётся заменить старый &lsquo;<samp>index.txt</samp>&rsquo; в zip-архиве на новый указатель. После этого поддиректория может быть полностью удалена, так как Enigma будет загружать указатель прямо из zip-архива.
</p>
<p>После окончания конверсии пакетов мы настоятельно рекомендуем обновить уровни до нового формата XML (см. раздел <a href="#Level-Basics">Основы работы с уровнями</a>).
</p>
<hr size="6">
<a name="Zip-Levelpacks"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Converting-0_002e92-Levelpacks" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Grouping-and-Sorting-Levelpacks" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Levelpack-Basics" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Levelpack-Basics" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Level-Basics" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Zip-Levelpacks-1"></a>
<h2 class="section">2.3 Пакеты в формате zip</h2>

<p>Помимо классических пакетов уровней, представляющих собой поддиректорию папки &lsquo;<samp>levels</samp>&rsquo; с файлом &lsquo;<samp>index.xml</samp>&rsquo; и несколькими файлами уровней, в Enigma 1.00 предусмотрен совместимый формат zip-архивов. Zip-формат позволяет уменьшить размер ресурсов игры и облегчает распространение пакетов.
</p>
<p>Этот формат стопроцентно совместим. Если у вас есть обычный пакет уровней, размещённый в поддиректории, то можно просто заархивировать всю папку и назвать архив её именем с расширением .zip. Теперь эту папку можно полностью удалить: Enigma автоматически определит пакет уровней и позволит играть в него без ограничений. Сохранятся даже перекрёстные ссылки на этот пакет.
</p>
<p>С другой стороны, Enigma предоставляет возможность превратить заархивированный пакет в папку с указателем и файлами уровней. Опять же, на уровнях из пакета можно играть без ограничений и все перекрёстные ссылки сохраняются.
</p>
<p>Если сохранить и архив, и папку, то файлы папки обладают приоритетом перед архивом. Таким образом, Enigma сохраняет обновления в поддиректориях параллельно с существующими zip-архивами.
</p>
<hr size="6">
<a name="Grouping-and-Sorting-Levelpacks"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Zip-Levelpacks" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Creating-New-Levelpacks" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Levelpack-Basics" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Levelpack-Basics" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Level-Basics" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Grouping-and-Sorting-Levelpacks-1"></a>
<h2 class="section">2.4 Группировка и сортировка пакетов</h2>

<p>С увеличением количества пакетов возникла необходимость сгруппировать их в меню. Мы попытались предложить набор групп по умолчанию, основанный на простом и удобном распределении пакетов по группам:
</p>
<ul>
<li>
<b>Enigma </b>&mdash; уровни, написанные специально для Enigma

</li><li>
<b>D&eacute;j&agrave;-vu</b> &mdash; уровни, которые можно было увидеть и раньше

</li><li>
<b>Sokoban</b>

</li><li>
<b>Facets &mdash;</b> уровни из перечисленных выше пакетов, сгруппированные по каким-либо иным признакам

</li><li>
<b>User &mdash;</b> личные уровни и пакеты уровней (например пакеты History и Auto, автоматически генерируемые системой для пользователя).

</li><li>
<b>Development </b>&mdash; шаблоны и незаконченные уровни от команды Enigma

</li><li>
<b>All Packs <B>&mdash;<B> Все пакеты</B></B></b>

</li></ul>

<p>Тем не менее, своё мнение мы не навязываем. Вы вольны переименовывать группы, добавлять новые и изменять расположение пакетов. Как и в случае с другими аспектами Enigma, управлять пакетами и группами пакетов можно, щёлкнув любой кнопкой мыши + Ctrl либо одной правой кнопкой по кнопке соответствующего пакета или группы.
</p>
<p>В меню конфигурации групп можно переименовать группу либо изменить её расположение. Группе можно выбрать любое имя, которое ещё не использовалось, не заключено в квадратные скобки и отличается от &lsquo;<samp>Every Group</samp>&rsquo;. Обратите внимание, что, возможно, вам не удастся ввести все желаемые символы. Приносим извинения за это неудобство.
</p>
<p>В меню конфигурации пакетов можно поместить пакет в какую-либо группу. Список групп содержит два специальных пункта: &lsquo;<samp>[Every Group]</samp>&rsquo; и ещё одно имя в квадратных скобках. При выборе первой псевдогруппы пакет уровней отображается в каждой группе. Это является размещением по умолчанию группы &lsquo;<samp>Startup Levels</samp>&rsquo;. Второе имя в квадратных скобках &mdash; это группа, в которой по умолчанию размещается сам пакет уровней. Это подсказка, которая позволит переадресовать пакет уровней в группу по умолчанию, даже если удалить саму группу.
</p>
<hr size="6">
<a name="Creating-New-Levelpacks"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Grouping-and-Sorting-Levelpacks" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Modifying-and-Deleting-Levelpacks" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Levelpack-Basics" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Levelpack-Basics" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Level-Basics" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Creating-New-Levelpacks-1"></a>
<h2 class="section">2.5 Создание новых пакетов уровней</h2>

<p>Чтобы создать новый пакет уровней, выберите группу, в которую следует этот пакет добавить. Скорее всего, это будет группа &lsquo;<samp>User</samp>&rsquo;. Щёлкните любой кнопкой мыши + Ctrl или одной правой кнопкой по группе, затем нажмите на кнопку &lsquo;<samp>Новый пакет</samp>&rsquo;. На экране отобразится меню конфигурации пакетов, где можно ввести все данные, необходимые для создания пакета уровней.
</p>
<p>Вначале нужно ввести имя пакета. Здесь также есть ограничение в выборе символов, которые можно использовать для имён файлов. Разрешается использовать алфавитно-цифровые символы A-Z, a-z, 0-9, пробелы, &quot;_&quot; и дефис. Обратите внимание, что позже вы сможете переименовать пакет, если захотите дать ему более удачное или более подходящее имя (см. раздел <a href="#Modifying-and-Deleting-Levelpacks">Изменение и удаление пакетов</a>).
</p>
<p>После этого следует определить, хотите ли вы  создать пакет, в котором могут находиться источники уровней или только перекрёстные ссылки. Первый вариант удобен для хранения самостоятельно написанных либо загруженных из Интернета уровней. Пакет с перекрёстными ссылками можно использовать для хранения коллекций своих любимых уровней, для которых просто отбираются существующие уровни из других пакетов, исходя из своих собственных критериев. Нужный тип пакета можно выбрать с помощью кнопки &lsquo;<samp>Типы уровней</samp>&rsquo;, которая использует символы для ссылок и копий.
</p>
<p>&lsquo;<samp>Размещение</samp>&rsquo; &mdash; это величина, которая определяет размещение среди групп пакетов, если пакет не был пересортирован вручную (см. раздел <a href="#Grouping-and-Sorting-Levelpacks">Группировка и сортировка пакетов</a>). Эта задаваемая по умолчанию величина имеет значение, только если вы распространяете свой пакет и хотите быть уверенным, что пользователи поместят этот пакет там, где нужно. В большинстве случаев величина, автоматически задаваемая после создания нового пакета, является оптимальной.
</p>
<p>Можете указать себя в качестве владельца или создателя пакета. Это просто строка для идентификации.
</p>
<p>Наконец, после окончания настройки вы можете создать пакет, нажав кнопку &lsquo;<samp>OK</samp>&rsquo;. Enigma создаст новый пакет в папке пользователя (см. раздел <a href="#Locating-Resources">Размещение ресурсов</a>).
</p>
<p>Если вы решите не создавать новый пакет, нажмите кнопку &lsquo;<samp>Отмена</samp>&rsquo;. В этом случае всё останется без изменений.
</p>
<p>Если вы хотите сразу же добавить уровни в пакет, нажмите кнопку &lsquo;<samp>Составить пакет</samp>&rsquo;. Enigma создаст пакет, и вы сможете использовать составитель пакетов, чтобы наполнить этот пакет уровнями.
</p>
<hr size="6">
<a name="Modifying-and-Deleting-Levelpacks"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Creating-New-Levelpacks" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Composing-Levelpacks" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Levelpack-Basics" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Levelpack-Basics" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Level-Basics" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Modifying-and-Deleting-Levelpacks-1"></a>
<h2 class="section">2.6 Изменение и удаление пакетов</h2>

<p>Чтобы изменить пакет, щёлкните по нему любой кнопкой мыши + Ctrl либо одной правой кнопкой в меню пакетов уровней. На экран будут выведены метаданные всех пакетов. Однако кнопка &lsquo;<samp>Ред. метаданные</samp>&rsquo; появится только для ваших собственных пакетов, которые хранятся в папке пользователя. Нажав на неё, можно отредактировать метаданные.
</p>
<p>Пакет можно переименовать, но нельзя изменить имена файлов. Enigma будет использовать новое имя в качестве логического имени пакета, которое отображается в меню.
</p>
<p>Другие свойства, которые можно изменить, включают в себя &lsquo;<samp>Размещение</samp>&rsquo; и &lsquo;<samp>Владелец</samp>&rsquo;.
</p>
<p>Имейте в виду, что изменить тип уже существующего пакета нельзя. Следует создать новый пакет нужного типа и скопировать туда уровни (см. раздел <a href="#Composing-Levelpacks">Составление пакетов уровней</a>).
</p>
<p>Во избежание случайной потери файлов уровней в игре не предусмотрена функция удаления пакетов. Тем не менее, пакет можно удалить, просто удалив папку с этим пакетом из вашей папки пользователя. Для пакетов, состоящих из перекрёстных ссылок, просто нужно удалить файл-указатель XML в поддиректории &lsquo;<samp>levels/cross</samp>&rsquo; вашей папки пользователя.
</p>
<hr size="6">
<a name="Composing-Levelpacks"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Modifying-and-Deleting-Levelpacks" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Level-Basics" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Levelpack-Basics" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Levelpack-Basics" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Level-Basics" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Composing-Levelpacks-1"></a>
<h2 class="section">2.7 Составление пакетов уровней</h2>

<p>Изменения в состав пакета могут быть внесены при помощи составителя пакетов. Его можно вызвать, нажав любой кнопкой мыши + Ctrl либо одной правой кнопкой мыши на кнопку пакета в меню пакетов уровней, а затем на кнопку &lsquo;<samp>Составить пакет</samp>&rsquo; в меню конфигурации пакета.
</p>
<p>Составитель выглядит почти так же, как меню уровней, но отличается от него своими функциями. Список всех команд можно вывести на экран с помощью клавиши &lt;F1&gt;. При составлении собственного пакета уровни пакета отображаются в красной рамке. Это предупреждение о том, что вы можете модифицировать этот пакет. В системных пакетах (поставляемых с дистрибутивом Enigma) уровни отображаются в серой рамке, поскольку составитель можно использовать только для того, чтобы скопировать уровни в буфер обмена.
</p>
<p>Буфер обмена позволяет выбрать уровни из одного или нескольких пакетов и вставить их в виде копии либо перекрёстной ссылки в свой пакет. Сначала очистите буфер обмена при помощи клавиш &lsquo;<samp>Shift + delete</samp>&rsquo;. Затем выберите нужные уровни из составителя. Добавьте их в буфер обмена с помощью &lsquo;<samp>Shift + щелчок&rsquo;</samp>. Они отобразятся в строке вверху экрана. Вернитесь в пакет, в который желаете добавить уровни. Выберите уровень, после которого желаете вставить уровни. Используйте клавишу &lsquo;<samp>F8</samp>&rsquo;, чтобы вставить уровни из буфера в виде ссылок. При редактировании пакета, в котором допускаются копии уровней, их можно вставить при помощи клавиши &lsquo;<samp>F9</samp>&rsquo;.
</p>
<p>При внесении каких-либо изменений в пакет уровней в левом верхнем углу экрана появляется маленький красный треугольник. Подтвердить все изменения можно, выйдя из составителя с помощью кнопки &lsquo;<samp>OK</samp>&rsquo;. Если выйти из составителя с помощью кнопки &lsquo;<samp>Отмена</samp>&rsquo;, то все изменения будут отменены.
</p>
<p>Помимо добавления уровней, их можно удалять с помощью клавиши &lsquo;<samp>delete</samp>&rsquo;. Имейте в виду, что если удалить уровень, который является файлом, а не просто ссылкой, то Enigma удалит и сам файл уровня. Будьте осторожны с уровнями, на эскизе которых имеется изображение документа. Отменить удаление можно с помощью кнопки &lsquo;<samp>Отмена</samp>&rsquo;.
</p>
<p>Сортировка уровней осуществляется с помощью клавиш &lsquo;<samp>alt + стрелка влево</samp>&rsquo; и &lsquo;<samp>alt + стрелка вправо</samp>&rsquo;. Новый порядок следования уровней отображается на экране незамедлительно, и его можно сохранить, нажав кнопку &lsquo;<samp>OK</samp>&rsquo;.
</p>
<p>Чтобы обновить индекс уровней, можно воспользоваться клавишей &lsquo;<samp>F5</samp>&rsquo;. Это может пригодиться во время редактирования уровня. В пакете отразятся изменения названия, версии, появление простого режима для уровней и т. д. Все уровни пакета Enigma обновляет одновременно.
</p>
<p>Используя пакет уровней Auto и составитель пакетов, можно создавать пакеты, состоящие из ваших собственных уровней:  создайте новый пакет, добавьте файлы уровней в папку &lsquo;<samp>auto</samp>&rsquo;, перезапустите игру, добавьте уровни из папки &lsquo;<samp>auto</samp>&rsquo; в буфер обмена, с помощью составителя вставьте уровни из буфера обмена в свой пакет в виде копии и удалите неиспользуемые файлы уровней из папки &lsquo;<samp>auto</samp>&rsquo;.
</p>

<hr size="6">
<a name="Level-Basics"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Composing-Levelpacks" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Getting-Started-with-Levels" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Levelpack-Basics" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Level-Basics-1"></a>
<h1 class="chapter">3. Основы работы с уровнями</h1>

<p>Сыграв в несколько уровней Enigma, вы наверняка заметили, что Enigma &mdash; довольно динамичная игра с разнообразными уровнями. Поэтому нет ничего удивительного в том, что такие уровни невозможно описать каким-то определённым способом, как простую карту с объектами в Сокобане. Некоторые уровни, такие как лабиринты, каждый раз генерируют свой вид заново и во время каждого сеанса игры выглядят по-разному. Другие уровни предусматривают динамику в процессе игры, например, переключатели могут открывать двери только при определённых условиях. Чтобы обеспечить эти возможности, мы встроили в Enigma мощное и лёгкое расширение языка C &mdash; <a href="http://www.lua.org">Lua</a> версии 5.1.4.
</p>
<p>Вплоть до Enigma версии 0.92 существовало два различных формата уровней. Один из них был XML-подобным форматом, разработанным в основном для сторонних редакторов уровней. Из-за того, что его описание статической карты объектов было неудобно редактировать вручную, многие авторы никогда этот формат не использовали. Вторым форматом был обычный код Lua, который использовался в качестве интерфейса для Lua-функций Enigma по добавлению объектов и функций обратного вызова. Почти все авторы использовали этот формат, но у него был небольшой недостаток: при его использовании хранить метаданные уровня (такие как имя автора, информацию о лицензии и, конечно же, название самого уровня) можно было только в виде неформатированных комментариев Lua, которые нужно было заново вставлять вручную в структуру пакетов уровней.
</p>
<p>С XML-икацией Enigma после выхода версии 0.92 мы добились полной поддержки XML, интегрировав Apache Xerces и задались целью избавиться от недостатков старого формата уровней и добавить некоторые новые недостижимые ранее возможности:
</p>
<ul>
<li>
единый формат с необязательными частями &mdash; используйте только те части, которые необходимы

</li><li>
никаких ограничений или существенных изменений для авторов уровней на Lua

</li><li>
сохранение метаданных, добавленных автором, в самом уровне

</li><li>
добавление plug &amp; play для пользователей &mdash; скопируйте уровень автора и играйте в него без ручного редактирования структуры

</li><li>
поддержка различных кодировок, таких как US-ASCII, UTF-8, UTF-16, Windows-1252

</li><li>
интернационализация уровней &mdash; позволяет авторам добавить строки на своём родном языке, а переводчиков снабжает всеми строками для перевода и авторскими комментариями, касающимися перевода

</li><li>
добавление управления выпусками и зависимостями для уровней и библиотек

</li><li>
добавление поддержки обновления и дополнения уровней и библиотек

</li><li>
замена старого формата XML гибким интерфейсом для редактирования

</li><li>
сохранение открытости формата для дальнейших расширений

</li></ul>

<p>Позвольте привести пример готового простого уровня &lsquo;<samp>Hello World</samp>&rsquo; в новом формате:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">&lt;?xml version=&quot;1.0&quot; encoding=&quot;<var>UTF-8</var>&quot; standalone=&quot;no&quot; ?&gt;
&lt;<i>el</i>:<b>level</b> xsi:schemaLocation=&quot;<i>http://enigma-game.org/schema/level/1 level.xsd</i>&quot; xmlns:<i>el</i>=&quot;<i>http://enigma-game.org/schema/level/1</i>&quot;&gt;
  &lt;<i>el</i>:<b>protected</b> &gt;
    &lt;<i>el</i>:<b>info</b> <i>el</i>:<b>type</b>=&quot;<var>level</var>&quot;&gt;
      &lt;<i>el</i>:<b>identity</b> <i>el</i>:<b>title</b>=&quot;<var>Demo Simple</var>&quot; <i>el</i>:<b>id</b>=&quot;<var>20060210ral001</var>&quot;/&gt;
      &lt;<i>el</i>:<b>version</b> <i>el</i>:<b>score</b>=&quot;<var>1</var>&quot; <i>el</i>:<b>release</b>=&quot;<var>1</var>&quot; <i>el</i>:<b>revision</b>=&quot;<var>2</var>&quot; <i>el</i>:<b>status</b>=&quot;<var>stable</var>&quot;/&gt;
      &lt;<i>el</i>:<b>author</b>  <i>el</i>:<b>name</b>=&quot;<var>Ronald Lamprecht</var>&quot;/&gt;
      &lt;<i>el</i>:<b>copyright</b>&gt;<var>Copyright &copy; 2006,2009 Ronald Lamprecht</var>&lt;/<i>el</i>:<b>copyright</b>&gt;
      &lt;<i>el</i>:<b>license</b> <i>el</i>:<b>type</b>=&quot;<var>GPL v2.0 or above</var>&quot; <i>el</i>:<b>open</b>=&quot;<var>true</var>&quot;/&gt;
      &lt;<i>el</i>:<b>compatibility</b> <i>el</i>:<b>enigma</b>=&quot;<var>1.10</var>&quot;/&gt;
      &lt;<i>el</i>:<b>modes</b> <i>el</i>:<b>easy</b>=&quot;<var>false</var>&quot; <i>el</i>:<b>single</b>=&quot;<var>true</var>&quot; <i>el</i>:<b>network</b>=&quot;<var>false</var>&quot;/&gt;
      &lt;<i>el</i>:<b>score</b> <i>el</i>:<b>easy</b>=&quot;<var>-</var>&quot; <i>el</i>:<b>difficult</b>=&quot;<var>-</var>&quot;/&gt;
    &lt;/<i>el</i>:<b>info</b>&gt;
    &lt;<i>el</i>:<b>luamain</b>&gt;&lt;![CDATA[
<i>ti</i>[&quot;<var> </var>&quot;] = {&quot;<b>fl_lawn_b</b>&quot;}
<i>ti</i>[&quot;<var>#</var>&quot;] = {&quot;<b>st_box</b>&quot;}
<i>ti</i>[&quot;<var>o</var>&quot;] = {&quot;<b>st_oxyd</b>&quot;}
<i>ti</i>[&quot;<var>@</var>&quot;] = {&quot;#<b>ac_marble</b>&quot;}

<i>wo</i>(<i>ti</i>, &quot; &quot;, {
    &quot;<var>####################</var>&quot;,
    &quot;<var>#                  #</var>&quot;,
    &quot;<var>#  o      @     o  #</var>&quot;,
    &quot;<var>#                  #</var>&quot;,
    &quot;<var>####################</var>&quot;,
})
    ]]&gt;&lt;/<i>el</i>:<b>luamain</b>&gt;
    &lt;<i>el</i>:<b>i18n</b>/&gt;
  &lt;/<i>el</i>:<b>protected</b>&gt;
&lt;/<i>el</i>:<b>level</b>&gt;
</pre></td></tr></table>

<p>Несложно заметить, что XML-часть содержит все привычные метаданные, поставляемые автором уровня. Это, по сути, формула, которую можно скопировать из шаблона и заполнить.
</p>
<p>Код Lua вставлен в XML. Единственное ограничение для Lua-части состоит в том, что для обозначения конца она резервирует &lsquo;<samp>]]&gt;</samp>&rsquo; и может понадобиться заменить его на &lsquo;<samp>]] &gt;</samp>&rsquo;. Больше никаких ограничений нет.
</p>
<p>Поскольку приведённый выше пример включает в себя все обязательные части XML, скорее всего, нам больше не потребуется вносить существенные изменения для авторов уровней на Lua (как мы того и хотели).
</p>
<p>Приведённый пример можно найти в пакете уровней &lsquo;<samp>Experimental</samp>&rsquo; из группы &lsquo;<samp>Development</samp>&rsquo;. Исходный код находится в поддиректории &lsquo;<samp>levels/enigma_experimental</samp>&rsquo; системного пути (см. раздел <a href="#Locating-Resources">Размещение ресурсов</a>).
</p>
<p>Если вы пробуете себя в программировании, используя копию этого уровня в качестве шаблона, то добавьте её в папку Auto (см. раздел <a href="#Getting-Started-with-Levelpacks">Начало работы с пакетами уровней</a>) либо используйте как аргумент в командной строке (см. раздел <a href="#Startup-Switches">Опции запуска</a>).
</p>
<p>В следующих разделах мы остановимся на подробностях форматирования и поясним необязательные части.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Getting-Started-with-Levels">3.1 Общее знакомство с уровнями</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#XML-Level-structure">3.2 XML-структура уровня</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Info-metadata">3.3 Информация о метаданных</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#LUA-code">3.4 Код LUA</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Internationalization-_0028i18n_0029">3.5 Интернационализация (i18n)</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Usage">3.6 Использование</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Update-and-Upgrade">3.7 Обновление и дополнение</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Library-Files">3.8 Использование библиотек</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Multilevel-Files">3.9 Многоуровневые файлы</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Getting-Started-with-Levels"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Level-Basics" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#XML-Level-structure" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Level-Basics" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Level-Basics" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Getting-Started-with-Levels-1"></a>
<h2 class="section">3.1 Общее знакомство с уровнями</h2>

<p>Скорее всего, вам хочется понять основные принципы расположения объектов на уровне. Здесь приведено описание очень простого уровня, которое также может служить отправной точкой для новых уровней.  (Вообще-то, это первый уровень Enigma, так что можете попробовать сыграть в него прямо сейчас.)
</p>
<table><tr><td>&nbsp;</td><td><pre class="example"> 1    <i>ti</i>[&quot;<var> </var>&quot;] = {&quot;<b>fl_gravel</b>&quot;}
 2    <i>ti</i>[&quot;<var>#</var>&quot;] = {&quot;<b>st_box</b>&quot;}
 3    <i>ti</i>[&quot;<var>O</var>&quot;] = {&quot;<b>st_oxyd</b>&quot;}
 4    if <i>wo</i>[&quot;<b>IsDifficult</b>&quot;] then
 5        <i>ti</i>[&quot;<var>Q</var>&quot;] = {&quot;<b>st_quake</b>&quot;, <b>name</b>=&quot;<var>quake</var>&quot;}
 6        <i>ti</i>[&quot;<var>T</var>&quot;] = {&quot;<b>st_timer</b>&quot;, <b>interval</b>=<var>10.0</var>, <b>target</b>=&quot;<var>quake</var>&quot;}
 7    else
 8        <i>ti</i>[&quot;<var>Q</var>&quot;] = <i>ti</i>[&quot; &quot;]
 9        <i>ti</i>[&quot;<var>T</var>&quot;] = <i>ti</i>[&quot; &quot;]
10    end
11    <i>ti</i>[&quot;<var>@</var>&quot;] = {&quot;<b>ac_marble_black</b>&quot;, <var>0.0</var>, <var>0.5</var>}
11
12    <i>wo</i>(<i>ti</i>, &quot; &quot;, {
13	&quot;<var>####################</var>&quot;,
14	&quot;<var>#                  #</var>&quot;,
15	&quot;<var>#                  #</var>&quot;,
16	&quot;<var>#  O            O  #</var>&quot;,
17	&quot;<var>#         @        #</var>&quot;,
18	&quot;<var>#                  #</var>&quot;,
19	&quot;<var>#        QT        #</var>&quot;,
20	&quot;<var>#                  #</var>&quot;,
21	&quot;<var>#                  #</var>&quot;,
22	&quot;<var>#  O            O  #</var>&quot;,
23	&quot;<var>#                  #</var>&quot;,
24	&quot;<var>#                  #</var>&quot;,
25	&quot;<var>####################</var>&quot;})
</pre></td></tr></table>

<p>Результат выглядит в игре следующим образом:
</p>
<img src="images/first_level.png" alt="images/first_level">

<p>Давайте теперь проанализируем эту программу строка за строкой:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example"> 1    <i>ti</i>[&quot;<var> </var>&quot;] = {&quot;<b>fl_gravel</b>&quot;}
 2    <i>ti</i>[&quot;<var>#</var>&quot;] = {&quot;<b>st_box</b>&quot;}
 3    <i>ti</i>[&quot;<var>O</var>&quot;] = {&quot;<b>st_oxyd</b>&quot;}
</pre></td></tr></table>

<p>Сначала мы объявляем несколько кодов для объектов, которые мы хотим использовать на нашей карте уровня. Просто добавляем каждый код в наше хранилище секций <i>ti </i>и ставим ему в соответствие описание объекта секции, которая в простейшем случае состоит из вида объекта. Двухсимвольная приставка указывает на тип объекта, такой как покрытие, предмет, камень, актёр и т.п.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example"> 4    if <i>wo</i>[&quot;<b>IsDifficult</b>&quot;] then
 5        <i>ti</i>[&quot;<var>Q</var>&quot;] = {&quot;<b>st_quake</b>&quot;, <b>name</b>=&quot;<var>quake</var>&quot;}
 6        <i>ti</i>[&quot;<var>T</var>&quot;] = {&quot;<b>st_timer</b>&quot;, <b>interval</b>=<var>10.0</var>, <b>target</b>=&quot;<var>quake</var>&quot;}
 7    else
 8        <i>ti</i>[&quot;<var>Q</var>&quot;] = <i>ti</i>[&quot; &quot;]
 9        <i>ti</i>[&quot;<var>T</var>&quot;] = <i>ti</i>[&quot; &quot;]
10    end
</pre></td></tr></table>

<p>У вводного уровня есть два режима: обычная сложность и простая. Поскольку обычная сложность отличается от простой всего двумя дополнительными камнями, для этого режима мы добавляем два описания секций.
</p>
<p>В сложном режиме мы задаем значения двум описаниям камней. Каждое представляет собой описание камня с дополнительными атрибутами. &lsquo;<samp>st_quake</samp>&rsquo; &mdash; это камень, который после прикосновения к нему или срабатывания переключателя закрывает все камни-оксиды. Для того, чтобы к нему можно было обратиться впоследствии, просто назначаем ему имя. Второй камень &mdash; таймер, который должен запускаться каждые 10 секунд и посылать своей цели, закрывающему оксиды &lsquo;<samp>st_quake</samp>&rsquo;, сообщение о том, чтобы он сменил своё состояние. Поскольку мы присвоили этому камню имя, здесь мы можем использовать в качестве цели его имя.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">11    <i>ti</i>[&quot;<var>@</var>&quot;] = {&quot;<b>ac_marble_black</b>&quot;, <var>0.0</var>, <var>0.5</var>}
</pre></td></tr></table>

<p>Теперь мы просто объявляем нашего актёра. Это чёрный шарик, который следует расположить не в левом верхнем углу решётки, а посредине левой границы решётки секций. В принципе, мы хотим просто поместить его в центре уровня. Поскольку размеры одноэкранного уровня составляют 20 x 13, нам следует использовать смещения, указанные выше.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">12    <i>wo</i>(<i>ti</i>, &quot; &quot;, {
13        &quot;<var>####################</var>&quot;,
14        &quot;<var>#                  #</var>&quot;,
15        &quot;<var>#                  #</var>&quot;,
16        &quot;<var>#  O            O  #</var>&quot;,
17        &quot;<var>#         @        #</var>&quot;,
18        &quot;<var>#                  #</var>&quot;,
19        &quot;<var>#        QT        #</var>&quot;,
20        &quot;<var>#                  #</var>&quot;,
21        &quot;<var>#                  #</var>&quot;,
22        &quot;<var>#  O            O  #</var>&quot;,
23        &quot;<var>#                  #</var>&quot;,
24        &quot;<var>#                  #</var>&quot;,
25        &quot;<var>####################</var>&quot;})
</pre></td></tr></table>

<p>Теперь можно создать мир, просто указав его карту. Необходимо только вызвать &lsquo;<samp>wo</samp>&rsquo;, представление нашего мира, указав для него преобразование секций, код покрытия по умолчанию и карту кодов секций.
</p>
<p>Необходимую теоретическую информацию можно найти в разделе <a href="#Enigma-Paradigm">Ключевые понятия Enigma</a>, а дополнительные примеры и информацию о синтаксисе в разделе <a href="#Lua-API">Lua API</a>. Но сперва следует разобраться с метаданными уровня на основе XML.
</p>

<hr size="6">
<a name="XML-Level-structure"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Getting-Started-with-Levels" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Info-metadata" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Level-Basics" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Level-Basics" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="XML-Level-structure-1"></a>
<h2 class="section">3.2 XML-структура уровня</h2>

<p>Давайте начнём с полного обзора всех существующих ключевых элементов верхнего уровня XML. Следующий скелет уровня содержит необязательные элементы, выходящие за рамки основ создания уровней. Мы включили эти элементы для полноты:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">&lt;?xml version=&quot;1.0&quot; encoding=&quot;<var>UTF-8</var>&quot; standalone=&quot;no&quot; ?&gt;
&lt;<i>el</i>:<b>level</b> xsi:schemaLocation=&quot;<i>http://enigma-game.org/schema/level/1 level.xsd http://enigma-game.org/schema/editor editor.xsd</i>&quot; xmlns:<i>el</i>=&quot;<i>http://enigma-game.org/schema/level/1</i>&quot; xmlns:<i>ee</i>=&quot;<i>http://enigma-game.org/schema/editor</i>&quot;&gt;
  &lt;<i>el</i>:<b>protected</b>&gt;
    &lt;<i>el</i>:<b>info</b> <i>el</i>:<b>type</b>=&quot;<var>level</var>&quot;&gt;
      &lt;!-- требуемые элементы пропущены --&gt;
    &lt;/<i>el</i>:<b>info</b>&gt;
    &lt;<i>el</i>:<b>elements</b>/&gt;
    &lt;<i>el</i>:<b>luamain</b>&gt;&lt;![CDATA[
    ]]&gt;&lt;/<i>el</i>:<b>luamain</b>&gt;
    &lt;<i>ee</i>:<b>editor</b>/&gt;
    &lt;<i>el</i>:<b>i18n</b>/&gt;
  &lt;/<i>el</i>:<b>protected</b>&gt;
  &lt;<i>el</i>:<b>public</b>&gt;
    &lt;<i>el</i>:<b>i18n</b>/&gt;
    &lt;<i>el</i>:<b>upgrade</b>/&gt;
  &lt;/<i>el</i>:<b>public</b>&gt;
&lt;/<i>el</i>:<b>level</b>&gt;
</pre></td></tr></table>

<p>Первая строка &mdash; это объявление XML. Не считая задания кодировки, оно фиксировано. На всех платформах Enigma поддерживает по крайней мере &lsquo;<samp>US-ASCII</samp>&rsquo;, &lsquo;<samp>UTF-8</samp>&rsquo;, &lsquo;<samp>UTF-16</samp>&rsquo;, &lsquo;<samp>ISO-8859-1</samp>&rsquo;, &lsquo;<samp>windows-1252</samp>&rsquo;. Введите вашу кодировку и убедитесь, что ваш редактор сохраняет уровень в этой кодировке. В некоторых редакторах можно начать работу в режиме ASCII, скопировать скелет уровня с другим объявлением кодировки, например UTF-8, сохранить уровень в том же режиме ASCII и заново открыть файл.  После этого редактор может автоматически обнаружить объявление XML и автоматически переключиться на указанную кодировку. Имейте в виду, что если не вводить в уровне строки на языке, отличном от английского, о кодировке можно вообще не беспокоиться. В этом случае можно выбрать UTF-8.
</p>
<p>Несколько дополнительных замечаний для новичков в XML: теги разметки XML очень похожи на теги HTML. Но для каждого начального тега &lsquo;<samp>&lt;element&gt;</samp>&rsquo; XML нуждается в соответствующем теге завершения &lsquo;<samp>&lt;/element&gt;</samp>&rsquo;. Для элементов, у которых есть только атрибуты, но нет содержимого, следует использовать альтернативную запись пустого элемента &lsquo;<samp>&lt;element/&gt;</samp>&rsquo;. Заметим, что когда мы определяем элемент как пустой или с состоянием, которое лишает его содержимого, между начальным и завершающим тегом не разрешается использовать ни одиночный пробел, ни даже конец строки. Во избежание ошибок используйте запись пустого элемента.
</p>
<p>Мы используем приятный глазу формат записи с отступом в 2 символа. Каждый элемент начинается с отдельной строки. У элементов с текстовым содержимым на той же строке есть завершающий тег. Только у элементов с дочерними элементами завершающий тег находится на отдельной строке с таким же отступом.
</p>
<p>Такой формат не обязателен. Можно даже вставлять разрывы строки в текстовое содержимое, метки и даже значения атрибутов. Но имейте в виду, что каждый разрыв строки во время парсинга (обработки интерпретатором) XML будет заменяться пробелом. Учитывайте это во избежание ошибок или просто используйте длинные строки.
</p>
<p>Идентификатор пространства имён предваряет все названия тегов и атрибутов.  В уровнях Enigma в качестве сокращения мы используем &lsquo;<samp>el</samp>&rsquo;. Этот префикс используют все названия тегов, которые можно отредактировать вручную.
</p>
<p>Наконец, короткий комментарий о зарезервированных символах XML, &lsquo;<samp>&amp;</samp>&rsquo; и &lsquo;<samp>&lt;</samp>&rsquo;. Эти два символа зарезервированы как начальные символы тега и объекта. Если они понадобятся в текстовом содержимом или значениях атрибутов, их следует заменить соответственно объектами &lsquo;<samp>&amp;amp;</samp>&rsquo; и &lsquo;<samp>&amp;lt;</samp>&rsquo;. К тому же, значения атрибутов следует заключать между &lsquo;<samp>&quot;</samp>&rsquo; или &lsquo;<samp>'</samp>&rsquo;. Безусловно, необходимо заменять и кавычки, используемые в значениях атрибутов. Используйте &lsquo;<samp>&amp;quot</samp>&rsquo; и &lsquo;<samp>&amp;apos</samp>&rsquo;.
</p>
<p><b>Элементы:</b>
</p>
<dl compact="compact">
<dt> <b>/level</b>, <i>необходим, уникальный </i></dt>
<dd><p>Это основной элемент. В каждом файле он присутствует только в одном экземпляре. Как и первая строка объявления XML, эта вторая строка довольно фиксирована. Существует две её версии. Простая версия с 3 атрибутами, которая использовалась в первом примере, и версия предназначенная только для редакторов уровней, использующая 4 атрибута, как в последнем примере. Для ручного редактирования уровня просто скопируйте простую версию во вторую строку своего файла уровня.
</p>
<p><b>Атрибуты:</b>
</p>
<dl compact="compact">
<dt> <b>xmlns:xsi</b>, <i>необходим, фиксированное содержимое </i></dt>
<dd><p>Определение пространства имён схемы. Содержимое установлено в &ldquo;http://www.w3.org/2001/XMLSchema-instance&rdquo;. Тег атрибута &lsquo;<samp>xsi</samp>&rsquo; должен соответствовать префиксу следующего тега атрибута и является стандартным.
</p>
</dd>
<dt> <b>xsi:schemaLocation</b>, <i>необходим, фиксированное содержимое </i></dt>
<dd><p>Размещение используемых схем. Содержимым служит фиксированное пространство имён уровней Enigma, после которого следует URL размещения схемы. Редакторы уровней добавят свои пространства имён и URL размещения схемы, как во втором примере.
</p>
</dd>
<dt> <b>xmlns:el</b>, <i>необходим, фиксированное содержимое </i></dt>
<dd><p>Определение пространства имён для &ldquo;уровня Enigma&rdquo;. В качестве префикса пространства имён всех тегов элементов и атрибутов уровня мы, как правило, используем &lsquo;<samp>el</samp>&rsquo;. Используемый префикс может быть произвольным, но должен соответствовать своему тегу атрибутов. Содержимое атрибута зависит от пространства имён уровня Enigma.
</p>
</dd>
<dt> <b>xmlns:ee</b>, <i>необязательный </i></dt>
<dd><p>Последнее определение пространства имён используют только редакторы уровней. Например, мы объявили &lsquo;<samp>ee</samp>&rsquo; как префикс пространства имён для всех тегов элементов и атрибутов редактора.  Используемый префикс может быть произвольным, но должен соответствовать своему тегу атрибутов. Содержимым атрибута является пространство имён редактора.
</p>
</dd>
</dl>

</dd>
<dt> <b>/level/protected</b>, <i>необходим, уникальный </i></dt>
<dd>
<p>Защищённый раздел содержит все данные уровня, полученные от автора, которые не может изменять никто другой.
</p>
</dd>
<dt> <b>/level/protected/info</b>, <i>необходим, уникальный </i></dt>
<dd>
<p>Информационный раздел содержит все метаданные уровня. Он обязателен и детально описан в разделе <a href="#Info-metadata">Информация о метаданных</a>.
</p>
</dd>
<dt> <b>/level/protected/elements</b>, <i>необязательный, уникальный </i></dt>
<dd>
<p>Раздел элементов необязателен. Он содержит части описания уровня, полученные с помощью управления данными. Хотя данный элемент введён для поддержки редакторов уровней, автор уровня может использовать любые части этого раздела как ему или ей захочется.
</p>
</dd>
<dt> <b>/level/protected/luamain</b>, <i>необязательный, уникальный </i></dt>
<dd>
<p>Раздел luamain является частью для ручной вставки определений уровня Lua. Он подробно описан в разделе <a href="#LUA-code">Код LUA</a>.
</p>
</dd>
<dt> <b>/level/protected/editor</b>, <i>необязательный, уникальный </i></dt>
<dd>
<p>Раздел редактора &mdash; это зона расширений, открытая для редакторов уровней. Они могут добавлять в этот раздел необходимую дополнительную информацию. Enigma же игнорирует этот раздел.
</p>
</dd>
<dt> <b>/level/protected/i18n</b>, <i>необходим, уникальный </i></dt>
<dd>
<p>Раздел интернационализации содержит строки на английском, переводы на другие языки и комментарии, предоставляемые переводчикам самим автором. Это обязательный раздел, и он подробно описан в разделе <a href="#Internationalization-_0028i18n_0029">Интернационализация (i18n)</a>.
</p>
</dd>
<dt> <b>/level/public</b>, <i>необязательный, уникальный </i></dt>
<dd>
<p>Общедоступный раздел &mdash; это необязательное расширение защищённого раздела. Он содержит информацию не подтверждённую автором и даже может быть добавлен после последнего пересмотра самим автором.
</p>
</dd>
<dt> <b>/level/public/i18n</b>, <i>необязательный, уникальный </i></dt>
<dd>
<p>Общедоступный раздел интернационализации содержит дополнительные переводы, поставляемые с уровнем. Их можно получить у автора или из других источников. Переводчики утверждают эти переводы и они могут использоваться, пока переводчики не предоставят исправленные версии (см. раздел <a href="#Internationalization-_0028i18n_0029">Интернационализация (i18n)</a>).
</p>
</dd>
<dt> <b>/level/public/upgrade</b>, <i>необязательный, уникальный </i></dt>
<dd>
<p>Раздел обновления является частью системы <a href="#Update-and-Upgrade">Обновление и дополнение</a>.
</p>
</dd>
</dl>

<hr size="6">
<a name="Info-metadata"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#XML-Level-structure" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#g_t_003cidentity_003e" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Level-Basics" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Level-Basics" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Info-metadata-1"></a>
<h2 class="section">3.3 Информация о метаданных</h2>

<p>Раздел информации содержит все предоставленные автором метаданные для этого уровня. Это источник таких данных. Все остальные части Enigma, такие как индексы уровней, просто содержат копии, которые автоматически обновляются с обновлением оригинальных данных уровня.
</p>
<p>Далее мы рассмотрим все поддерживаемые информационные подразделы с их типичными атрибутами:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">&lt;<i>el</i>:<b>info</b> <i>el</i>:<b>type</b>=&quot;<var>level</var>&quot;&gt;
  &lt;<i>el</i>:<b>identity</b> <i>el</i>:<b>title</b>=&quot;<var>Demo I18N</var>&quot; <i>el</i>:<b>subtitle</b>=&quot;<var>Translate or let it be translated</var>&quot; <i>el</i>:<b>id</b>=&quot;<var>20060211ral002</var>&quot;/&gt;
  &lt;<i>el</i>:<b>version</b> <i>el</i>:<b>score</b>=&quot;<var>1</var>&quot; <i>el</i>:<b>release</b>=&quot;<var>1</var>&quot; <i>el</i>:<b>revision</b>=&quot;<var>0</var>&quot; <i>el</i>:<b>status</b>=&quot;<var>experimental</var>&quot;/&gt;
  &lt;<i>el</i>:<b>author</b>  <i>el</i>:<b>name</b>=&quot;<var>Ronald Lamprecht</var>&quot; <i>el</i>:<b>email</b>=&quot;<var>ral@users.berlios.de</var>&quot;/&gt;
  &lt;<i>el</i>:<b>copyright</b>&gt;<var>Copyright &copy; 2006 Ronald Lamprecht</var>&lt;/<i>el</i>:<b>copyright</b>&gt;
  &lt;<i>el</i>:<b>license</b> <i>el</i>:<b>type</b>=&quot;<var>GPL v2.0 or above</var>&quot; <i>el</i>:<b>open</b>=&quot;<var>true</var>&quot;/&gt;
  &lt;<i>el</i>:<b>compatibility</b> <i>el</i>:<b>enigma</b>=&quot;<var>0.92</var>&quot;/&gt;
  &lt;<i>el</i>:<b>modes</b> <i>el</i>:<b>easy</b>=&quot;<var>false</var>&quot; <i>el</i>:<b>single</b>=&quot;<var>true</var>&quot; <i>el</i>:<b>network</b>=&quot;<var>false</var>&quot;/&gt;
  &lt;<i>el</i>:<b>comments</b>/&gt;
  &lt;<i>el</i>:<b>update</b> <i>el</i>:<b>url</b>=&quot;<var>http://&hellip;</var>&quot;/&gt;
  &lt;<i>el</i>:<b>upgrade</b> <i>el</i>:<b>url</b>=&quot;<var>http://&hellip;</var>&quot; <i>el</i>:<b>release</b>=&quot;<var>2</var>&quot;/&gt;
  &lt;<i>el</i>:<b>score</b> <i>el</i>:<b>easy</b>=&quot;<var>-</var>&quot; <i>el</i>:<b>difficult</b>=&quot;<var>-</var>&quot;/&gt;
&lt;/<i>el</i>:<b>info</b>&gt;
</pre></td></tr></table>

<p><b>Атрибуты:</b>
</p>
<dl compact="compact">
<dt> <b>type</b>, <i>необходим</i>, значения = <code>&ldquo;level&rdquo;</code>, <code>&ldquo;library&rdquo;</code>, <code>&ldquo;multilevel&rdquo;</code></dt>
<dd><p>Схему можно использовать для отдельных уровней Enigma, библиотек, содержащих описания частей уровня для многократного использования, и описаний сразу нескольких уровней.
</p>
<p>&lsquo;<samp>level</samp>&rsquo; предназначен для всех определений отдельного уровня. Не имеет значения, редактируется ли он вручную или с помощью редактора уровней и какое используется описание элементов.
</p>
<p>&lsquo;<samp>library</samp>&rsquo; предназначен для описания частей уровня, которые могут быть включены в другой уровень. <a href="#Library-Files">Библиотека</a> состоит только из кода Lua в разделе luamain. Библиотеки могут использовать почти все разделы кроме &lsquo;<samp>/level/protected/info/score</samp>&rsquo; и &lsquo;<samp>/level/*/i18n</samp>&rsquo;, которые должны предоставляться, но не могут использоваться. Библиотеки включаются в уровни с помощью элемента зависимости (см. раздел <a href="#g_t_003ccompatibility_003e">&lt;compatibility&gt;</a>).
</p>
<p>&lsquo;<samp>multilevel</samp>&rsquo; предназначен для описания сразу нескольких уровней. Основная цель &mdash; поддержка форматов уровней сторонних игр, таких как формат уровней Сокобан, которые обычно описывают в одном файле целый набор карт уровней (см. раздел <a href="#Multilevel-Files">Многоуровневые файлы</a>).
</p>
</dd>
<dt> <b>quantity</b>, <i>необязательный</i></dt>
<dd><p>Количество уровней в файле, содержащем несколько уровней (см. раздел <a href="#Multilevel-Files">Многоуровневые файлы</a>).
</p>
</dd>
</dl>

<p><b>Содержимое &mdash; элементы:</b>
</p>
<dl compact="compact">
<dt> <b>identity</b>, <i>необходим</i></dt>
<dd><p>Заголовок, подзаголовок и основная строка описания уровня (см. раздел <a href="#g_t_003cidentity_003e">&lt;identity&gt;</a>).
</p>
</dd>
<dt> <b>version</b>, <i>необходим</i></dt>
<dd><p>Все аспекты версии уровня (см. раздел <a href="#g_t_003cversion_003e">&lt;version&gt;</a>).
</p>
</dd>
<dt> <b>author</b>, <i>необходим </i></dt>
<dd><p>Вся предоставленная автором информация о себе (см. раздел <a href="#g_t_003cauthor_003e">&lt;author&gt;</a>).
</p>
</dd>
<dt> <b>copyright</b>, <i>необходим </i></dt>
<dd><p>Сообщение об авторском праве на уровень (см. раздел <a href="#g_t_003ccopyright_003e">&lt;copyright&gt;</a>).
</p>
</dd>
<dt> <b>license</b>, <i>необходим </i></dt>
<dd><p>Информация об условиях лицензии (см. раздел <a href="#g_t_003clicense_003e">&lt;license&gt;</a>).
</p>
</dd>
<dt> <b>compatibility</b>, <i>необходим </i></dt>
<dd><p>Вся информация о совместимости с версиями Enigma, зависимостях от библиотек, внешних данных и редакторе, в котором был создан уровень (см. раздел <a href="#g_t_003ccompatibility_003e">&lt;compatibility&gt;</a>).
</p>
</dd>
<dt> <b>modes</b>, <i>необходим </i></dt>
<dd><p>Режимы, которые поддерживает уровень, такие как сложность, сетевой режим и контроль (см. раздел <a href="#g_t_003cmodes_003e">&lt;modes&gt;</a>).
</p>
</dd>
<dt> <b>comments</b>, <i>необязательный </i></dt>
<dd><p>Необязательные комментарии, такие как благодарности, посвящения и комментарии по коду (см. раздел <a href="#g_t_003ccomments_003e">&lt;comments&gt;</a>).
</p>
</dd>
<dt> <b>update</b>, <i>необязательный </i></dt>
<dd><p><a href="#Update-and-Upgrade">Обновление и дополнение</a>
</p>
</dd>
<dt> <b>upgrade</b>, <i>необязательный </i></dt>
<dd><p><a href="#Update-and-Upgrade">Обновление и дополнение</a>
</p>
</dd>
<dt> <b>score</b>, <i>необходим </i></dt>
<dd><p>Результат самого автора уровня (см. раздел <a href="#g_t_003cscore_003e">&lt;score&gt;</a>).
</p>
</dd>
</dl>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#g_t_003cidentity_003e">3.3.1 &lt;identity&gt;</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#g_t_003cversion_003e">3.3.2 &lt;version&gt;</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#g_t_003cauthor_003e">3.3.3 &lt;author&gt;</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#g_t_003ccopyright_003e">3.3.4 &lt;copyright&gt;</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#g_t_003clicense_003e">3.3.5 &lt;license&gt;</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#g_t_003ccompatibility_003e">3.3.6 &lt;compatibility&gt;</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#g_t_003cmodes_003e">3.3.7 &lt;modes&gt;</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#g_t_003ccomments_003e">3.3.8 &lt;comments&gt;</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#g_t_003cscore_003e">3.3.9 &lt;score&gt;</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>


<hr size="6">
<a name="g_t_003cidentity_003e"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Info-metadata" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#g_t_003cversion_003e" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Level-Basics" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Info-metadata" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="g_t_003cidentity_003e-1"></a>
<h3 class="subsection">3.3.1 &lt;identity&gt;</h3>

<p>Элемент &lsquo;<samp>identity</samp>&rsquo; необходим, т.к. он предоставляет информацию для идентификации уровня человеком и системой.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">&lt;<i>el</i>:<b>identity</b> <i>el</i>:<b>title</b>=&quot;<var>Demo I18N</var>&quot; <i>el</i>:<b>subtitle</b>=&quot;<var>Translate or let it be translated</var>&quot; <i>el</i>:<b>id</b>=&quot;<var>20060211ral002</var>&quot;/&gt;
</pre></td></tr></table>

<p><b>Атрибуты:</b>
</p>
<dl compact="compact">
<dt> <b>title</b>, <i>необходим</i></dt>
<dd><p>Английское название уровня. Строка может содержать произвольные символы, которые могут быть отображены шрифтом Enigma и поддерживаются XML. В многоуровневых файлах заключительный знак &quot;#&quot; имеет особое значение. Название не должно быть слишком длинным, потому что Enigma использует его в меню выбора уровня. Переводы названия можно предусмотреть в разделе <a href="#Internationalization-_0028i18n_0029">Интернационализация (i18n)</a>.
</p>
</dd>
<dt> <b>subtitle</b>, <i>необязательный</i></dt>
<dd><p>Необязательный английский подзаголовок. Используется для частей названия, которые не помещаются в основное название, или для небольшого совета в начале. Enigma показывает подзаголовок на странице информации об уровне и в начале уровня. Переводы подзаголовка можно предусмотреть в разделе <a href="#Internationalization-_0028i18n_0029">Интернационализация (i18n)</a>.
</p>
</dd>
<dt> <b>id</b>, <i>необходим</i></dt>
<dd><p>Это основная строка идентификации уровня, которая всегда актуальна, независимо от последующих обновлений выпуска. Данная строка не должна содержать пробелов, скобок и масок (&lsquo;<samp>*? ()[]{}</samp>&rsquo;. Главное требование Enigma к id в том, чтобы он был уникальным для всех уровней, созданных всеми авторами по всему миру, и не заканчивался закрывающей квадратной скобкой.
</p>
<p>Так как уровни можно редактировать в любом текстовом редакторе или различных специальных редакторах уровней Enigma, то проконтролировать уникальность id не представляется возможным. Поэтому мы предлагаем простой стандарт id во избежание возможных противоречий между id различных уровней:
</p>
<p><var><b>ГГГГММДДпользовательNNN</b></var>
</p>
<p>Где &lsquo;<samp>ГГГГ</samp>&rsquo;,&lsquo;<samp>ММ</samp>&rsquo;,&lsquo;<samp>ДД</samp>&rsquo; &mdash; это дата создания первой экспериментальной версии, &lsquo;<samp>пользователь</samp>&rsquo; заменяется уникальным именем автора, а &lsquo;<samp>NNN</samp>&rsquo; случайным числом. Например, у моего уровня под названием &lsquo;<samp>Houdini</samp>&rsquo; такой id: &lsquo;<samp>20060816ral719</samp>&rsquo;. Конечно, у всех уровней созданных в один день случайное число должно отличаться. id &mdash; это системный идентификаток уровня Enigma, и пользователь никогда в нём не нуждается.
</p>
<p>Для обратной совместимости уровни, созданные для предыдущих версий игры, сохраняют своё прежнее имя файла в качестве id нового уровня и не используют приведённую выше схему. Это не создаёт никаких проблем, потому что единственным требованием к id является его уникальность.
</p>
</dd>
</dl>

<p><b>Содержимое:</b>
</p>
<p>Этот элемент пуст &mdash; его нельзя заполнять.
</p>
<hr size="6">
<a name="g_t_003cversion_003e"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#g_t_003cidentity_003e" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#g_t_003cauthor_003e" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Level-Basics" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Info-metadata" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="g_t_003cversion_003e-1"></a>
<h3 class="subsection">3.3.2 &lt;version&gt;</h3>

<p>Этот элемент предоставляет системе информацию о версии.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">&lt;<i>el</i>:<b>version</b> <i>el</i>:<b>score</b>=&quot;<var>1</var>&quot; <i>el</i>:<b>release</b>=&quot;<var>1</var>&quot; <i>el</i>:<b>revision</b>=&quot;<var>0</var>&quot; <i>el</i>:<b>status</b>=&quot;<var>experimental</var>&quot;/&gt;
</pre></td></tr></table>

<p><b>Атрибуты:</b>
</p>
<dl compact="compact">
<dt> <b>score</b>, <i>необходим </i></dt>
<dd><p>Номер версии задаётся как положительное целое число. Новые уровни начинают с версии под номером &quot;1&quot;. Если изменения в уровне вызывают появление новых способов решения с несопоставимыми результатами, то новые версии уровня должны увеличивать номер версии. Конечно, авторы уровней должны прибегать к подобным изменениям только в крайних случаях.
</p>
<p>При создании уровня, следует пользоваться атрибутом &lsquo;<samp>status</samp>&rsquo;, чтобы пометить уровень как неготовый. Когда автор сменит &lsquo;<samp>status</samp>&rsquo; на &lsquo;<samp>released</samp>&rsquo;, он должен проверить сопоставимость результатов и, при необходимости, увеличить номер версии.
</p>
<p>Этот атрибут &mdash; логический эквивалент атрибута &lsquo;<samp>revision</samp>&rsquo; файла &lsquo;<samp>index.txt</samp>&rsquo; в Enigma 0.92.
</p>
</dd>
<dt> <b>release</b>, <i>необходим </i></dt>
<dd><p>Технический выпуск версии задаётся как положительное целое число. Новые уровни начинают с выпуска под номером &quot;1&quot;. Если изменения в уровне вызывают техническую несовместимость с предыдущими выпусками Enigma или несовместимость номеров версии, то следует увеличить номер выпуска версии.
</p>
<p>Основной причиной технической несовместимости может стать изменение движка Enigma. Поскольку такая коррекция не будет работать на старой версии Enigma, версии уровней должны отличаться различными номерами выпуска.
</p>
<p>И в случае технической несовместимости, и в случае несовместимости номеров версий также должно быть изменено имя файла уровня. Это необходимо, потому что на некоторые системы одновременно могут быть установлены различные версии Enigma. Они нуждаются в одновременном доступе к обеим версиям уровня. Также одновременный доступ к различным версиям уровней Enigma должны предоставлять интернет-сервера.
</p>
<p>Чтобы дать игрокам возможность пользоваться различными выпусками файлов уровней, мы настоятельно рекомендуем использовать следующий стандарт именования уровней <var>ИдентификаторАвтораНомерУровня_НомерВыпуска.Суффикс</var>, где номер уровня состоит по крайней мере из 2 цифр; например, &lsquo;<samp>ral01_2.xml</samp>&rsquo;
</p>
</dd>
<dt> <b>revision</b>, <i>необходим</i></dt>
<dd><p>Номер издания &mdash; это простой, постоянно увеличивающийся номер версии. Новый номер издания должен быть у каждой изданной версии уровня. Номер издания независим от номера версии и выпуска.
</p>
<p>Если в своих путях поиска данных Enigma найдёт два файла уровней с одинаковыми именами, идентификатором, номером и выпуском версии, она загрузит тот, у которого номер издания больше. Эта возможность гарантирует, что более старое издание уровня, хранящееся в домашней директории уровней пользователя, не будет использоваться вместо нового издания уровня, поставляемого с новым выпуском Enigma. Обновления по сети также проверяют номера изданий уровней.
</p>
<p>Хотя издание задается числом, атрибут может получить другую строку в виде ключевого слова &lsquo;<samp>$Revision$</samp>&rsquo;. Этот формат <a href="http://subversion.tigris.org/">Subversion </a> позволяет репозиторию Subversion авторов уровней автоматически вставлять номер издания уровня. Они должны просто установить значение &lsquo;<samp>svn propset svn:keywords &quot;Revision&quot; level.xml</samp>&rsquo; для каждого файла уровня в своем репозитории. Поскольку номер издания Subversion &mdash; это постоянно увеличивающаяся величина, она удовлетворяет нашим критериям. Заметьте, что Enigma не требует, чтобы номера издания шли по порядку.
</p>
</dd>
<dt> <b>status</b>, <i>необходим</i>, значения = &ldquo;released&rdquo;, &ldquo;stable&rdquo;, &ldquo;test&rdquo;, &ldquo;experimental&rdquo;</dt>
<dd><p>Этот атрибут описывает качество уровня во время разработки. Enigma использует состояние для защиты базы данных результатов от искажений непредусмотренными результатами решения. Она записывает только результаты уровней, помеченных как &lsquo;<samp>released</samp>&rsquo;.
</p>
<p>К сведению авторов уровней: при изменении уже выпущенного уровня следует снова сменить его статус на &lsquo;<samp>experimental</samp>&rsquo;. Затем внесите изменения и протестируйте уровень. Когда будете абсолютно уверены, что не добавили никаких спойлеров, то можете снова выпустить уровень с новым изданием, а может, и новым выпуском или номером версии.
</p>
</dd>
</dl>

<p><b>Содержимое:</b>
</p>
<p>Этот элемент пуст &mdash; его нельзя заполнять.
</p>
<hr size="6">
<a name="g_t_003cauthor_003e"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#g_t_003cversion_003e" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#g_t_003ccopyright_003e" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Level-Basics" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Info-metadata" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="g_t_003cauthor_003e-1"></a>
<h3 class="subsection">3.3.3 &lt;author&gt;</h3>

<p>Информация о самом авторе. Enigma необходим только сам элемент автора, а все атрибуты необязательны, чтобы оставить автору возможность остаться анонимом. Пожалуйста, помните, что у администраторов уровней и переводчиков может возникнуть необходимость связаться с вами. Поэтому, пожалуйста, предоставьте им такую возможность.
</p>
<p>Элемент автора может выглядеть следующим образом:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">&lt;<i>el</i>:<b>author</b>  <i>el</i>:<b>name</b>=&quot;<var>Ronald Lamprecht</var>&quot; <i>el</i>:<b>email</b>=&quot;<var>ral@users.berlios.de</var>&quot; <i>el</i>:<b>homepage</b>=&quot;<var>http://myhomepage.domain</var>&quot;/&gt;
</pre></td></tr></table>

<p><b>Атрибуты:</b>
</p>
<dl compact="compact">
<dt> <b>name</b>, <i>необязательный</i>, по умолчанию = &ldquo;anonymous&rdquo;</dt>
<dd><p>Имя автора в том виде, в каком оно будет показываться на странице информации об уровне и в начале уровня. По умолчанию это имя &lsquo;<samp>anonymous</samp>&rsquo;.
</p>
</dd>
<dt> <b>email</b>, <i>необязательный </i></dt>
<dd><p>Электронная почта автора, новостная лента или форум, которые он просматривает. В основном это указание о том, как связаться с ним/ней. Значение просто показывается в виде строки на странице информации об уровне.
</p>
</dd>
<dt> <b>homepage</b>, <i>необязательный </i></dt>
<dd><p>Домашняя страница автора или место, где он размещает дополнительные уровни Enigma. Значение просто показывается в виде строки на странице информации об уровне.
</p>
</dd>
</dl>

<p><b>Содержимое:</b>
</p>
<p>Этот элемент пуст &mdash; его нельзя заполнять.
</p>
<hr size="6">
<a name="g_t_003ccopyright_003e"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#g_t_003cauthor_003e" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#g_t_003clicense_003e" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Level-Basics" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Info-metadata" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="g_t_003ccopyright_003e-1"></a>
<h3 class="subsection">3.3.4 &lt;copyright&gt;</h3>

<p>Стандартизованное расположение сообщения об авторских правах:
</p><table><tr><td>&nbsp;</td><td><pre class="example">&lt;<i>el</i>:<b>copyright</b>&gt;<var>Copyright &copy; 2006 Ronald Lamprecht</var>&lt;/<i>el</i>:<b>copyright</b>&gt;
</pre></td></tr></table>

<p><b>Атрибуты:</b>
</p>
<p>отсутствует
</p>
<p><b>Содержимое:</b>
</p>
<p>Уведомление об авторских правах.
</p>
<hr size="6">
<a name="g_t_003clicense_003e"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#g_t_003ccopyright_003e" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#g_t_003ccompatibility_003e" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Level-Basics" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Info-metadata" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="g_t_003clicense_003e-1"></a>
<h3 class="subsection">3.3.5 &lt;license&gt;</h3>

<p>Конечно, каждый автор волен сам выбирать условия лицензии для своих уровней. Однако, автор должен указать эти условия. Для этого и нужен этот элемент и его атрибуты:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">&lt;<i>el</i>:<b>license</b> <i>el</i>:<b>type</b>=&quot;<var>GPL v2.0 or above</var>&quot; <i>el</i>:<b>open</b>=&quot;<var>true</var>&quot;/&gt;
</pre></td></tr></table>

<p><b>Атрибуты:</b>
</p>
<dl compact="compact">
<dt> <b>type</b>, <i>необходим</i></dt>
<dd><p>Короткое определение типа лицензии, с необязательной ссылкой на текст лицензии или строкой &lsquo;<samp>special</samp>&rsquo;, если автор приводит в содержимом этого элемента свою собственную лицензию.
</p>
</dd>
<dt> <b>open</b>, необходим</dt>
<dd><p>Булево значение, показывающее, удовлетворяет ли выбранная лицензия критериям <a href="http://www.opensource.org/">Open Source Initiative (OSI)</a>. Пожалуйста, имейте в виду, что значение &lsquo;<samp>false</samp>&rsquo; может помешать распространению вашего уровня с Enigma.
</p>
</dd>
</dl>

<p><b>Содержимое:</b>
</p>
<p>В качестве содержимого этого элемента допускается использовать полный текст лицензии. Воспользуйтесь атрибутом &lsquo;type&rsquo;, чтобы определить уровень.
</p>
<hr size="6">
<a name="g_t_003ccompatibility_003e"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#g_t_003clicense_003e" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#g_t_003cmodes_003e" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Level-Basics" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Info-metadata" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="g_t_003ccompatibility_003e-1"></a>
<h3 class="subsection">3.3.6 &lt;compatibility&gt;</h3>

<table><tr><td>&nbsp;</td><td><pre class="example">&lt;<i>el</i>:<b>compatibility</b> <i>el</i>:<b>enigma</b>=&quot;<var>0.92</var>&quot; <i>el</i>:<b>engine</b>=&quot;<var>enigma</var>&quot;&gt;
  &lt;<i>el</i>:<b>dependency</b> <i>el</i>:<b>path</b>=&quot;<var>lib/natmaze</var>&quot; <i>el</i>:<b>id</b>=&quot;<var>lib/natmaze</var>&quot; <i>el</i>:<b>release</b>=&quot;<var>1</var>&quot; <i>el</i>:<b>preload</b>=&quot;<var>true</var>&quot; <i>el</i>:<b>url</b>=&quot;<var>http://anywhere.xxx/mypage/natmaze.xml</var>&quot;/&gt;
  &lt;<i>el</i>:<b>externaldata</b> <i>el</i>:<b>path</b>=&quot;<var>./extfile</var>&quot; <i>el</i>:<b>url</b>=&quot;<var>http://anywhere.xxx/mypage/extdata.xml</var>&quot;/&gt;
  &lt;<i>el</i>:<b>editor</b> <i>el</i>:<b>name</b>=&quot;<var>none</var>&quot; <i>el</i>:<b>version</b>=&quot;<var></var>&quot;/&gt;
&lt;/<i>el</i>:<b>compatibility</b>&gt;
</pre></td></tr></table>

<p><b>Атрибуты:</b>
</p>
<dl compact="compact">
<dt> <b>enigma</b>, <i>необходим</i></dt>
<dd><p>Минимальный номер выпуска Enigma, с которым совместим уровень.
</p>
</dd>
<dt> <b>engine</b>, <i>необязательный</i>, значения = &ldquo;enigma&rdquo;, &ldquo;oxyd1&rdquo;, &ldquo;per.oxyd&rdquo;, &ldquo;oxyd.extra&rdquo;, &ldquo;oxyd.magnum&rdquo;; по умолчанию = &ldquo;enigma&rdquo;</dt>
<dd><p>Необходимый режим совместимости движка, который влияет на поведение различных объектов. Этот атрибут используется только для уровней. Библиотеки данный атрибут игнорируют.
</p></dd>
</dl>

<p><b>Содержимое &mdash; элементы:</b>
</p>
<p>Сам элемент совместимости в качестве содержимого включает только подэлементы.
</p>
<dl compact="compact">
<dt> <b>dependency</b>, <i>необязательный, несколько экземпляров</i></dt>
<dd><p>Этот элемент используется для указания библиотеки Enigma-Lua, от которой зависит этот уровень. Используя несколько экземпляров данного элемента, можно указать несколько библиотек. Если библиотека настроена на предварительный запуск, движок загрузит её перед загрузкой или исполнением любого кода Lua, используемого в уровне. Порядок загрузки нескольких библиотек основывается непосредственно на порядке элементов зависимостей.
</p>
<p><b>Атрибуты:</b>
</p><dl compact="compact">
<dt> <b>path</b>, <i>необходим</i></dt>
<dd><p>Путь к ресурсам библиотеки без её суффикса и любого расширения. Большинство библиотек Enigma хранит в поддиректории &lsquo;<samp>lib</samp>&rsquo; своей директории &lsquo;<samp>levels</samp>&rsquo;, в большинстве случаев путь к ресурсам будет примерно таким: &lsquo;<samp>lib/ant</samp>&rsquo;. Это действительный путь к файлу библиотеки, который может иметь вид &lsquo;<samp>levels/lib/ant.xml</samp>&rsquo;, &lsquo;<samp>levels/lib/ant.lua</samp>&rsquo; или &lsquo;<samp>levels/lib/ant_1.xml</samp>&rsquo;.
</p>
<p>Однако, библиотеки могут быть и полностью зависимыми от пакета уровней. В этом случае можно выбрать относительный путь, такой как &lsquo;<samp>./mylib</samp>&rsquo;, и хранить библиотеку в самой директории пакета уровней.
</p>
</dd>
<dt> <b>id</b>, <i>необходим</i></dt>
<dd><p>Это независимый от версии id библиотеки, указанный в её метаданных. Во избежание проблем Enigma проверит данный атрибут при загрузке библиотеки и, вместе с номером выпуска версии, может использовать для определения перемещённых библиотек.
</p>
</dd>
<dt> <b>release</b>, <i>необходим </i></dt>
<dd><p>Хотя у различных выпусков библиотек должны быть различные имена, следует указывать версию библиотеки.  Во избежание проблем Enigma проверит данный атрибут при загрузке библиотеки и, вместе с номером выпуска версии, может использовать для определения перемещённых библиотек.
</p>
</dd>
<dt> <b>preload</b>, <i>необходим</i></dt>
<dd><p>Булево выражение, которое указывает, должна ли библиотека загружаться предварительно. Если библиотека не является предварительно загружаемой, её всё равно можно загрузить с помощью кодовых выражений Lua. Но даже эти библиотеки должны быть определены, т.к. Enigma проверит их на соответствие. При использовании раздела &lsquo;<samp>elements</samp>&rsquo; всегда нужно предварительно загружать библиотеки.
</p>
</dd>
<dt> <b>url</b>, <i>необязательный</i></dt>
<dd><p>Этот необязательный атрибут позволяет указать для библиотеки запасной адрес. Это будет полезно при использовании новых библиотек, ещё не поставляемых с системой.
</p>
<p>Во время разработки и тестирования новых библиотек разработчик может распространять пробные уровни с пустым атрибутом пути к ресурсам &lsquo;<samp>library</samp>&rsquo;. Пробные уровни загрузят новейшую версию библиотеки, которая указана в полученном URL.
</p>
</dd>
</dl>

<p><b>Содержимое:</b>
</p>
<p>отсутствует
</p>
</dd>
<dt> <b>externaldata</b>, <i>необязательный, несколько экземпляров</i></dt>
<dd><p>Этот элемент можно использовать для указания любого внешнего текстового файла данных, от которого зависит этот уровень. Добавляя несколько экземпляров этого элемента, можно указать несколько файлов. Заданные файлы могут быть прочитаны с помощью интерфейса Lua.
</p>
<p>Эта возможность призвана обеспечить поддержку других игр в Enigma, например Сокобана. В виду авторских прав и лицензионных соглашений, включение некоторых данных в уровень может оказаться неприемлемым. Однако распространение данных в оригинальном неизменном формате, возможно, будет законным.
</p>
<p><b>Атрибуты:</b>
</p><dl compact="compact">
<dt> <b>path</b>, <i>необходим</i></dt>
<dd><p>Путь к ресурсам внешнего файла данных без расширения &lsquo;<samp>.txt</samp>&rsquo;. Путь должен иметь формат <code>&quot;./name&quot;</code> для внешнего файла данных, который хранится локально в той же папке, что и файл уровня, или будет сохранён по данному адресу при загрузке, или <code>&quot;externaldata/name&quot;</code> для общих внешних файлов данных, на которые ссылаются различные файлы уровней, хранящиеся в разных папках. Внешний файл данных может храниться локально или сохраняться в папке <code>&quot;levels/externaldata&quot;</code>. В любом случае локальное имя внешнего файла данных будет иметь расширение &lsquo;<samp>.txt</samp>&rsquo;, чтобы обозначить его как читаемый, но не исполняемый для локальной операционной системы.
</p>
</dd>
<dt> <b>url</b>, <i>необязательный</i></dt>
<dd><p>Этот необязательный атрибут позволяет задать сетевой адрес к внешнему файлу данных. При первом доступе отсутствующий внешний файл данных будет загружен, а его копия будет сохранена локально для последующего доступа.
</p></dd>
</dl>

<p><b>Содержимое:</b>
</p>
<p>отсутствует
</p>
</dd>
<dt> <b>editor</b>, <i>необязательный, уникальный </i></dt>
<dd><p>Специальные редакторы уровней используют этот элемент, чтобы хранить информацию о себе.
</p>
<p><b>Атрибуты:</b>
</p>
<dl compact="compact">
<dt> <b>name</b>, <i>необходим</i></dt>
<dd><p>Название редактора уровней.
</p>
</dd>
<dt> <b>version</b>, <i>необходим</i></dt>
<dd><p>Номер версии редактора, полученный в виде строки .
</p></dd>
</dl>

<p><b>Содержимое:</b>
</p>
<p>отсутствует
</p>
</dd>
</dl>

<p><b>Содержимое:</b>
</p>
<p>отсутствует
</p>
<hr size="6">
<a name="g_t_003cmodes_003e"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#g_t_003ccompatibility_003e" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#g_t_003ccomments_003e" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Level-Basics" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Info-metadata" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="g_t_003cmodes_003e-1"></a>
<h3 class="subsection">3.3.7 &lt;modes&gt;</h3>

<p>Элемент &lsquo;modes&rsquo; позволяет автору указать поддерживаемый режим и режим уровня по умолчанию. Движок Enigma проверяет, используется ли уровень в поддерживаемом режиме.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">&lt;<i>el</i>:<b>modes</b> <i>el</i>:<b>easy</b>=&quot;<var>false</var>&quot; <i>el</i>:<b>single</b>=&quot;<var>true</var>&quot; <i>el</i>:<b>network</b>=&quot;<var>false</var>&quot; <i>el</i>:<b>control</b>=&quot;<var>force</var>&quot; <i>el</i>:<b>scoreunit</b>=&quot;<var>duration</var>&quot; <i>el</i>:<b>scoretarget</b>=&quot;<var>time</var>&quot;/&gt;
</pre></td></tr></table>

<p><b>Атрибуты:</b>
</p>
<dl compact="compact">
<dt> <b>easy</b>, <i>необходим</i>, значения = &ldquo;true&rdquo;, &ldquo;false&rdquo;</dt>
<dd><p>Если уровень поддерживает второй, упрощённый, режим, установите этот атрибут в &lsquo;<samp>true</samp>&rsquo;. Если поддерживается только сложный режим, установите атрибут в &lsquo;<samp>false</samp>&rsquo;.
</p>
</dd>
<dt> <b>single</b>, <i>необходим</i>, значения = &ldquo;true&rdquo;, &ldquo;false&rdquo;</dt>
<dd><p>Если уровень, как и стандартные, предоставляет возможность одиночной игры, установите этот атрибут в &lsquo;<samp>true</samp>&rsquo;. Установите этот атрибут в &lsquo;<samp>false</samp>&rsquo;, только если уровень представляет собой сетевую игру для 2 игроков.
</p>
</dd>
<dt> <b>network</b>, <i>необходим</i>, значения = &ldquo;true&rdquo;, &ldquo;false&rdquo;</dt>
<dd><p>Если уровень предоставляет возможность сетевой игры для 2 игроков, установите этот атрибут в &lsquo;<samp>true</samp>&rsquo;. В противном случае установите этот атрибут в &lsquo;<samp>false</samp>&rsquo;.
</p>
</dd>
<dt> <b>control</b>, <i>необязательный</i>, значения = &ldquo;force&rdquo;, &ldquo;balance&rdquo;, &ldquo;key&rdquo;, &ldquo;other&rdquo;; по умолчанию = &ldquo;force&rdquo;</dt>
<dd><p>Этот атрибут задаёт для уровня стандартный режим управления. На уровне можно играть, пользуясь мышью, движение которой влияет на положение шариков: это стандартный способ, и он был единственным вплоть до Enigma 0.92. Или же можно играть на уровне, используя мышь или другие устройства ввода для балансировки шариками в мире уровня. Кроме того, можно использовать клавиши со стрелками на клавиатуре, чтобы перемещать актёра, как в классических играх Сокобан.
</p>
<p>Хотя последнее слово в выборе более подходящего способа управления всегда остаётся за пользователем, автор должен задать стандартный режим управления, который использует система подсчёта результатов. Enigma сохранит и рассчитает для списков рекордов только результаты, полученные в заданном режиме управления.
</p>
</dd>
<dt> <b>scoreunit</b>, <i>необязательный</i>, значения = &ldquo;duration&rdquo;, &ldquo;number&rdquo;; по умолчанию = &ldquo;duration&rdquo;</dt>
<dd><p>Этот атрибут задаёт режим подсчёта и отображения результатов. В режиме по умолчанию, &lsquo;<samp>duration</samp>&rsquo; результаты интерпретируются как время решения уровня и отображаются в формате <b>ММ:СС</b>. Режим &lsquo;<samp>number</samp>&rsquo; отображает результаты в виде обычных чисел, а меньшие числа означают лучшие результаты. Этот режим подходит для подсчета толчков и шагов.
</p>
</dd>
<dt> <b>scoretarget</b>, <i>необязательный</i>, значения = &ldquo;time&rdquo;, &ldquo;pushes&rdquo;, &ldquo;moves&rdquo;, *; по умолчанию = &ldquo;time&rdquo;</dt>
<dd><p>Целевое значение задаёт способ подсчёта баллов. При выборе &lsquo;<samp>time</samp>&rsquo; учитывается время решения, при выборе &lsquo;<samp>pushes</samp>&rsquo; &mdash; количество толчков камней, при выборе &lsquo;<samp>moves</samp>&rsquo; &mdash; шаги актёра. Любое другое значение вызовет функцию Lua для подсчёта результатов. Цель в пользовательском интерфейсе представлена в виде короткого наименования для результатов.
</p>
</dd>
</dl>

<p><b>Содержимое:</b>
</p>
<p>отсутствует
</p>
<hr size="6">
<a name="g_t_003ccomments_003e"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#g_t_003cmodes_003e" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#g_t_003cscore_003e" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Level-Basics" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Info-metadata" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="g_t_003ccomments_003e-1"></a>
<h3 class="subsection">3.3.8 &lt;comments&gt;</h3>

<p>Необязательный раздел комментариев позволяет автору добавить несколько комментариев и определить, как их нужно использовать. Пожалуйста, имейте в виду, что поддержка интернационализации не позволяет переводить комментарии.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">&lt;<i>el</i>:<b>comments</b>&gt;
    &lt;<i>el</i>:<b>credits</b> <i>el</i>:<b>showinfo</b>=&quot;<var>true</var>&quot; <i>el</i>:<b>showstart</b>=&quot;<var>false</var>&quot;&gt;<var>Thanks to the author of my favorite libs</var>&lt;/<i>el</i>:<b>credits</b>&gt;
    &lt;<i>el</i>:<b>dedication</b> <i>el</i>:<b>showinfo</b>=&quot;<var>true</var>&quot; <i>el</i>:<b>showstart</b>=&quot;<var>false</var>&quot;&gt;<var>To a honorable or a beloved person</var>&lt;/<i>el</i>:<b>dedication</b>&gt;
    &lt;<i>el</i>:<b>code</b>&gt;<var>some important general notes</var>&lt;/<i>el</i>:<b>code</b>&gt;
&lt;/<i>el</i>:<b>comments</b>&gt;
</pre></td></tr></table>

<p><b>Атрибуты: </b>отсутствуют
</p>
<p><b>Содержимое &mdash; элементы:</b>
</p>
<p>Сам элемент комментариев в качестве содержимого включает только подэлементы.
</p>
<dl compact="compact">
<dt> <b>credits</b>, <i>необязательный, уникальный </i></dt>
<dd><p>Место для того, чтобы поблагодарить людей, помогавших вам при создании уровня.
</p>
<p><b>Атрибуты:</b>
</p><dl compact="compact">
<dt> <b>showinfo</b>, <i>необязательный</i>, по умолчанию = &ldquo;false&rdquo;</dt>
<dd><p>Значение &lsquo;<samp>true</samp>&rsquo; покажет сообщение на странице информации об уровне.
</p>
</dd>
<dt> <b>showstart</b>, <i>необязательный</i>, по умолчанию = &ldquo;false&rdquo;</dt>
<dd><p>Значение &lsquo;<samp>true</samp>&rsquo; покажет сообщение при запуске уровня. Пожалуйста, используйте эту возможность только в исключительных случаях.
</p></dd>
</dl>

<p><b>Содержимое:</b>
</p>
<p>Сами благодарности. Он может быть разделён на несколько строк. Перед отображением лишние пробелы убираются.
</p>
</dd>
<dt> <b>dedication</b>, <i>необязательный, уникальный </i></dt>
<dd><p>Место для посвящения уровня уважаемому или любимому человеку. Пожалуйста, используйте для этой цели данное поле, а не документы на самом уровне.
</p>
<p><b>Атрибуты:</b>
</p><dl compact="compact">
<dt> <b>showinfo</b>, <i>необязательный</i>, по умолчанию = &ldquo;false&rdquo;</dt>
<dd><p>Значение &lsquo;<samp>true</samp>&rsquo; покажет сообщение на странице информации об уровне.
</p>
</dd>
<dt> <b>showstart</b>, <i>необязательный</i>, по умолчанию = &ldquo;false&rdquo;</dt>
<dd><p>Значение &lsquo;<samp>true</samp>&rsquo; покажет сообщение при запуске уровня. Пожалуйста, используйте эту возможность только в исключительных случаях.
</p></dd>
</dl>

<p><b>Содержимое:</b>
</p>
<p>Само посвящение. Он может быть разделён на несколько строк. Перед отображением лишние пробелы убираются.
</p>
</dd>
<dt> <b>code</b>, <i>необязательный, уникальный </i></dt>
<dd>
<p><b>Атрибуты:</b>
</p>
<p>отсутствуют
</p>
<p><b>Содержимое:</b>
</p>
<p>Главный комментарий к коду, который может представлять собой пояснение состояния <a href="#g_t_003cversion_003e">&lt;version&gt;</a> или список запланированных изменений. Он может быть разделён на несколько строк. Этот комментарий не обрабатывается.
</p>
</dd>
</dl>

<hr size="6">
<a name="g_t_003cscore_003e"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#g_t_003ccomments_003e" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#LUA-code" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Level-Basics" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Info-metadata" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="g_t_003cscore_003e-1"></a>
<h3 class="subsection">3.3.9 &lt;score&gt;</h3>

<p>В этом разделе автор должен опубликовать свои собственные результаты в качестве ориентира и вызова для остальных игроков. Все значения связаны с режимом управления, заданным в <a href="#g_t_003cmodes_003e">&lt;modes&gt;</a>.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">&lt;<i>el</i>:<b>score</b> <i>el</i>:<b>easy</b>=&quot;<var>01:07</var>&quot; <i>el</i>:<b>difficult</b>=&quot;<var>-</var>&quot;/&gt;
</pre></td></tr></table>

<p><b>Атрибуты:</b>
</p>
<dl compact="compact">
<dt> <b>easy</b>, <i>необходим</i></dt>
<dd><p>Время решения уровня в упрощённом режиме. Формат: <var><b>ММ:СС</b></var>, где ММ означает минуты, а СС секунды, либо <var>-</var> если автор ещё не решил свой уровень. Для уровней с единицей измерения результатов &lsquo;<samp>number</samp>&rsquo; значение должно быть числом шагов шарика или толчков.
</p>
</dd>
<dt> <b>difficult</b>, <i>необходим</i></dt>
<dd><p>Время решения уровня в сложном режиме. Формат: <var><b>ММ:СС</b></var>, где ММ означает минуты, а СС секунды, либо <var>-</var> если автор ещё не решил свой уровень. Для уровней с единицей измерения результатов &lsquo;<samp>number</samp>&rsquo; значение должно быть числом шагов шарика или толчков.
</p>
</dd>
</dl>

<p><b>Содержимое:</b>
</p>
<hr size="6">
<a name="LUA-code"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#g_t_003cscore_003e" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Internationalization-_0028i18n_0029" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Level-Basics" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Level-Basics" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="LUA-code-1"></a>
<h2 class="section">3.4 Код LUA</h2>

<p>Этот элемент включает в себя любой код Lua в виде единого блока почти без ограничений:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">    &lt;<i>el</i>:<b>luamain</b>&gt;&lt;![CDATA[
levelw = 20
levelh = 13

create_world( levelw, levelh)
draw_border(&quot;st-wood&quot;)
fill_floor(&quot;fl-leavesb&quot;, 0,0,levelw,levelh)

oxyd( 4,4)
oxyd( 14,4)

document(5,10,&quot;hint1&quot;)
document(10,10,&quot;hint2&quot;)
document(10,5,&quot;Heureka!&quot;)
set_actor(&quot;ac-blackball&quot;, 4, 11)
    ]]&gt;&lt;/<i>el</i>:<b>luamain</b>&gt;
</pre></td></tr></table>

<p><b>Атрибуты:</b>
</p>
<p>отсутствуют
</p>
<p><b>Содержимое:</b>
</p>
<p>В качестве содержимого этого элемента выступает основной код Lua.
</p>
<p>Все остальные библиотеки, объявленные как зависимости, и поставляемые элементами XML фрагменты кодаLua загружаются предварительно, как описано в разделе <a href="#g_t_003ccompatibility_003e">&lt;compatibility&gt;</a>. Обычно для того, чтобы загрузить библиотеки, нет необходимости в использовании таких функций Lua как &lsquo;<samp>Require</samp>&rsquo;. В случае, если нужно контролировать точку входа в процедуру, где должна загружаться библиотека, можно объявить библиотеку с атрибутом &lsquo;<samp>el:preload=&quot;false&quot;</samp>&rsquo;. Чтобы загрузить библиотеку следует использовать новую функцию @ref{enigma.LoadLib}.
</p>
<p>Код Lua &mdash; это код, заключённый в разделе XML под названием CDATA. Это накладывает на код Lua ограничения в виде невозможности использования завершающего тега &lsquo;<samp>]]&gt;</samp>&rsquo;. Любое его вхождение должно быть заменено на &lsquo;<samp>]] &gt;</samp>&rsquo;.
</p>
<p>С другой стороны, формат XML расширяет возможности использования кодировок в Lua. В строках и комментариях Lua можно использовать умляуты, но идентификаторы Lua всё же ограничиваются чистым US-ASCII. Преимущество в том, что допускается использовать умляуты и другие символы, отсутствующие в ASCII, в подсказках it-document.
</p>
<hr size="6">
<a name="Internationalization-_0028i18n_0029"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#LUA-code" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Usage" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Level-Basics" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Level-Basics" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Internationalization-_0028i18n_0029-1"></a>
<h2 class="section">3.5 Интернационализация (i18n)</h2>

<p>Интернационализация уровней стала движущей силой изменений в формате уровней. Можно заметить, что существует два элемента &lsquo;<samp>i18n</samp>&rsquo;: один в защищённом авторском разделе и один в общедоступном. Рассмотрим, как использовать их для интернационализации трёх документов нашего уровня &lsquo;<samp>demo_i18n.xml</samp>&rsquo;:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">  &lt;<i>el</i>:<b>protected</b> &gt;
    &lt;!-- elements omitted --&gt;
    &lt;<i>el</i>:<b>i18n</b>&gt;
      &lt;<i>el</i>:<b>string</b> <i>el</i>:<b>key</b>=&quot;<var>title</var>&quot;&gt;
        &lt;<i>el</i>:<b>english</b> <i>el</i>:<b>translate</b>=&quot;<var>false</var>&quot;/&gt;
      &lt;/<i>el</i>:<b>string</b>&gt;
      &lt;<i>el</i>:<b>string</b> <i>el</i>:<b>key</b>=&quot;<var>subtitle</var>&quot;&gt;
        &lt;<i>el</i>:<b>english</b> <i>el</i>:<b>translate</b>=&quot;<var>true</var>&quot;/&gt;
        &lt;<i>el</i>:<b>translation</b> <i>el</i>:<b>lang</b>=&quot;<var>de</var>&quot;&gt;<var>Ьbersetzten oder ьbersetzten lassen</var>&lt;/<i>el</i>:<b>translation</b>&gt;
      &lt;/<i>el</i>:<b>string</b>&gt;
      &lt;<i>el</i>:<b>string</b> <i>el</i>:<b>key</b>=&quot;<var>hint1</var>&quot;&gt;
        &lt;<i>el</i>:<b>english</b> <i>el</i>:<b>comment</b>=&quot;<var>Let 'right' be ambiguous: correct and opposite of left - if not possible choose correct&quot;&gt;Read the right document</var>&lt;/<i>el</i>:<b>english</b>&gt;
        &lt;<i>el</i>:<b>translation</b> <i>el</i>:<b>lang</b>=&quot;<var>de</var>&quot;&gt;<var>Lies das rechte Dokument</var>&lt;/<i>el</i>:<b>translation</b>&gt;
      &lt;/<i>el</i>:<b>string</b>&gt;
      &lt;<i>el</i>:<b>string</b> <i>el</i>:<b>key</b>=&quot;<var>hint2</var>&quot;&gt;
        &lt;<i>el</i>:<b>english</b> <i>el</i>:<b>comment</b>=&quot;<var>the correct one and not the right positioned one</var>&quot;&gt;<var>The right one, not the right one!</var>&lt;/<i>el</i>:<b>english</b>&gt;
        &lt;<i>el</i>:<b>translation</b> <i>el</i>:<b>lang</b>=&quot;<var>de</var>&quot;&gt;<var>Das rechte, nicht das rechte</var>&lt;/<i>el</i>:<b>translation</b>&gt;
      &lt;/<i>el</i>:<b>string</b>&gt;
      &lt;<i>el</i>:<b>string</b> <i>el</i>:<b>key</b>=&quot;<var>Heureka!</var>&quot;&gt;
        &lt;<i>el</i>:<b>english</b> <i>el</i>:<b>translate</b>=&quot;<var>false</var>&quot;&gt;<var>Heureka!</var>&lt;/<i>el</i>:<b>english</b>&gt;
      &lt;/<i>el</i>:<b>string</b>&gt;
    &lt;/<i>el</i>:<b>i18n</b>&gt;
  &lt;/<i>el</i>:<b>protected</b>&gt;
  &lt;<i>el</i>:<b>public</b>&gt;
    &lt;<i>el</i>:<b>i18n</b>&gt;
      &lt;<i>el</i>:<b>string</b> <i>el</i>:<b>key</b>=&quot;<var>hint1</var>&quot;&gt;
        &lt;<i>el</i>:<b>translation</b> <i>el</i>:<b>lang</b>=&quot;<var>fr</var>&quot;&gt;<var>Lisez la document de droite</var>&lt;/<i>el</i>:<b>translation</b>&gt;
      &lt;/<i>el</i>:<b>string</b>&gt;
    &lt;/<i>el</i>:<b>i18n</b>&gt;
  &lt;/<i>el</i>:<b>public</b>&gt;
</pre></td></tr></table>

<p>Два документа для обращения к строке используют ключевые слова. Последний использует в качестве ключа непосредственно английскую строку. Существует ещё два дополнительных зарезервированных ключа: &lsquo;<samp>title</samp>&rsquo; и &lsquo;<samp>subtitle</samp>&rsquo;.
</p>
<p>Для каждой переведённой строки или той, которая нуждается в переводе, мы определяем подэлемент защищённого раздела &mdash; &lsquo;<samp>string</samp>&rsquo; и добавляем к самому элементу подэлемент &lsquo;<samp>english</samp>&rsquo;. Элемент &lsquo;<samp>string</samp>&rsquo; получает один обязательный атрибут &mdash; код строки. У элемента &lsquo;<samp>english</samp>&rsquo; один обязательный атрибут &lsquo;<samp>translate</samp>&rsquo; (который по умолчанию инициализируется значением &lsquo;<samp>true</samp>&rsquo;), отражающий решение автора о необходимости перевода строки. Если автор не желает, чтобы строка была переведена, он может и должен вообще не добавлять в эту строку элемент &lsquo;<samp>string</samp>&rsquo;. Таким образом, элементы для строк с ключами &lsquo;<samp>title</samp>&rsquo; и &lsquo;<samp>Heureka!</samp>&rsquo; необязательны и встречаются довольно редко.
</p>
<p>&lsquo;<samp>title</samp>&rsquo; и &lsquo;<samp>subtitle</samp>&rsquo; отображают текст на английском в элементе <a href="#g_t_003cidentity_003e">&lt;identity&gt;</a>. Все остальные строки, к которым обращаются, используя их код, в качестве содержимого элемента &lsquo;<samp>english</samp>&rsquo; должны включать в себя английский текст. Примерами служат &lsquo;<samp>hint1</samp>&rsquo; и &lsquo;<samp>hint2</samp>&rsquo;.
</p>
<p>Ввиду того, что мы выбрали довольно неясные английские тексты, переводчики, которые сами не играли в игру, могут перевести их неправильно. Во избежание ошибок автор уровня может добавить к элементу &lsquo;<samp>english</samp>&rsquo; атрибут &lsquo;<samp>comment</samp>&rsquo;. Как мы увидим ниже, переводчик получит в своё распоряжение комментарий вместе со строкой на английском.
</p>
<p>Если для автора английский язык не родной, он должен добавить к элементу &lsquo;<samp>string</samp>&rsquo; свой подэлемент &lsquo;<samp>translation</samp>&rsquo;. У элемента &lsquo;<samp>translation</samp>&rsquo; есть один обязательный атрибут &lsquo;<samp>lang</samp>&rsquo;, который принимает 2-буквенное сокращение языка. Содержимое этого элемента &mdash; сам перевод.
</p>
<p>Все переводы, добавленные в защищённый раздел, получают преимущество над любыми переводами, выполненными переводчиками, и используются сразу после добавления, не дожидаясь перевода уровня переводчиками.
</p>
<p>Необходимо упомянуть, что в общедоступном разделе у нас есть элемент &lsquo;<samp>i18n</samp>&rsquo;. В этом элементе содержатся предложения по переводу. Автор может самостоятельно добавить его для других известных ему языков. Они могут быть добавлены на пути уровня к пользователю или даже самим пользователем.
</p>
<p>Переводы в этом разделе используются сразу после добавления, не дожидаясь переводов уровня переводчиками. Однако, у переводов, выполненных переводчиками, есть преимущество над ними.
</p>
<p>Формат аналогичен используемому в защищённом разделе, исключая неиспользуемые элементы &lsquo;<samp>english</samp>&rsquo;. Атрибут &lsquo;<samp>key</samp>&rsquo; элемента &lsquo;<samp>string</samp>&rsquo; должен точно совпадать с атрибутом &lsquo;<samp>key</samp>&rsquo; соответствующего элемента &lsquo;<samp>string</samp>&rsquo; из защищённого раздела. Тут есть одно трудноуловимое различие, вызванное причинами технического и практического характера. Атрибуты &lsquo;<samp>key</samp>&rsquo; в общедоступном разделе должны быть идентификаторами XML; поэтому, нельзя предоставить общедоступный перевод строк, использующих фразу на английском в качестве кода. Чтобы избежать подобных проблем, выберите ключевое слово и вынесите английскую строку в общедоступный раздел &lsquo;<samp>i18n</samp>&rsquo;.
</p>
<p>Элемент &lsquo;<samp>string</samp>&rsquo; из защищённого и общедоступного разделов должен быть уникальным относительно атрибута &lsquo;<samp>key</samp>&rsquo; в соответствующем разделе. Это значит, что переводы для всех известных языков следует добавить для строки в элементе &lsquo;<samp>string</samp>&rsquo; из защищённого и общедоступного разделов. Порядок не имеет значения.
</p>
<p>Давайте посмотрим, что получит переводчик для каждой из строк. Давайте начнём с &lsquo;<samp>hint2</samp>&rsquo; для немецкого переводчика:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">#  <i>level</i>: &quot;<var>Demo Internationalization</var>&quot;
#  <i>author</i>: &quot;<var>Ronald Lamprecht</var>&quot; <i>email</i> &quot;<var>ral@users.berlios.de</var>&quot;
#  <i>comment</i>: &quot;<var>the correct one and not the right positioned one</var>&quot;
#  <i>use</i>: &quot;<var>Das rechte, nicht das rechte</var>&quot;
#: po/level_i18n.cc:17
<b>msgid</b> &quot;<var>The right one, not the right one!</var>&quot;
<b>msgstr</b> &quot;&quot;
</pre></td></tr></table>

<p>&lsquo;<samp>msgid</samp>&rsquo; &mdash; это строка на английском. &lsquo;<samp>msgstr</samp>&rsquo; принимает немецкий перевод. Но переводчику не надо ничего переводить, потому что автор предоставил перевод на немецкий в строке &lsquo;<samp>#  use:</samp>&rsquo;.
</p>
<p>Другим примером может послужить &lsquo;<samp>hint1</samp>&rsquo; для французского переводчика:
</p><table><tr><td>&nbsp;</td><td><pre class="example">#  <i>level</i>: &quot;<var>Demo Internationalization</var>&quot;
#  <i>author</i>: &quot;<var>Ronald Lamprecht</var>&quot; <i>email</i> &quot;<var>ral@users.berlios.de</var>&quot;
#  <i>comment</i>: &quot;<var>Let 'right' be ambiguous: correct and opposite of left - if not possible choose correct</var>&quot;
#  <i>check</i>: &quot;<var>Lisez la document de droite</var>&quot;
#: po/level_i18n.cc:14
<b>msgid</b> &quot;<var>Read the right document</var>&quot;
<b>msgstr</b> &quot;<var>Lisez le document de droite</var>&quot;
</pre></td></tr></table>

<p>Здесь автор предоставляет общедоступный перевод в строке &lsquo;<samp>#  check:</samp>&rsquo;. Так как в нём есть по крайней мере одна ошибка, переводчик должен его исправить, как показано в строке &lsquo;<samp>msgstr</samp>&rsquo;.
</p>
<hr size="6">
<a name="Usage"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Internationalization-_0028i18n_0029" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Update-and-Upgrade" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Level-Basics" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Level-Basics" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Usage-1"></a>
<h2 class="section">3.6 Использование</h2>

<p>После сухой теории давайте посмотрим, как обращаться с форматом уровней XML на практике. Конечно, не обязательно заново собирать воедино метаданные XML для каждого нового уровня, который будет писаться. Целесообразнее использовать шаблоны. Можно начать с любого существующего уровня, например &lsquo;<samp>demo_i18n.xml</samp>&rsquo;, поставляемого с этой документацией. Добавьте в него свои личные данные и храните его в качестве шаблона для всех новых уровней, которые вы напишете.
</p>
<p>Некоторые авторы уровней хорошо знакомы с форматом файлов Lua, так как их любимый редактор поддерживает подсветку синтаксиса в этих файлах. Имя файла XML и элементы XML указывают их редактору использовать подсветку синтаксиса XML. Тем не менее, эти авторы привыкли вносить метаданные в заголовки своих уровней Lua в виде нестандартных комментариев Lua; мы решили добавить поддержку подобного формата XML, совместимого с Lua. Мы называем его &quot;XML с комментариями Lua&quot;, потому что он просто комментирует все строки XML комментариями Lua &mdash; &lsquo;<samp>--xml-- </samp>&rsquo;. Например:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">--xml-- &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot; ?&gt;
--xml-- &lt;el:level xsi:schemaLocation=&quot;http://enigma-game.org/schema/level/1 level.xsd&quot; xmlns:el=&quot;http://enigma-game.org/schema/level/1&quot;&gt;
--xml--   &lt;el:protected &gt;
--xml--     &lt;el:info el:type=&quot;level&quot;&gt;
--xml--       &lt;el:identity el:title=&quot;Demo Simple&quot; el:id=&quot;20060210ral001&quot;/&gt;
--xml--       &lt;el:version el:score=&quot;1&quot; el:release=&quot;1&quot; el:revision=&quot;0&quot; el:status=&quot;stable&quot;/&gt;
--xml--       &lt;el:author el:name=&quot;Ronald Lamprecht&quot;/&gt;
--xml--       &lt;el:copyright&gt;Copyright &copy; 2006 Ronald Lamprecht&lt;/el:copyright&gt;
--xml--       &lt;el:license el:type=&quot;GPL2&quot; el:open=&quot;true&quot;&gt;GPL v2.0 or above&lt;/el:license&gt;
--xml--       &lt;el:compatibility el:enigma=&quot;0.92&quot;/&gt;
--xml--       &lt;el:modes el:easy=&quot;false&quot; el:single=&quot;true&quot; el:network=&quot;false&quot;/&gt;
--xml--       &lt;el:score el:easy=&quot;-&quot; el:difficult=&quot;-&quot;/&gt;
--xml--     &lt;/el:info&gt;
--xml--     &lt;el:luamain&gt;&lt;![CDATA[
levelw = 20
levelh = 13

<b>create_world</b>( levelw, levelh)
<b>draw_border</b>(&quot;<i>st-wood</i>&quot;)
<b>fill_floor</b>(&quot;<i>fl-leavesb</i>&quot;, 0,0,levelw,levelh)

<b>oxyd</b>( 4,4)
<b>oxyd</b>( 14,4)

<b>set_actor</b>(&quot;<i>ac-blackball</i>&quot;, 4, 11)
--xml--     ]]&gt;&lt;/el:luamain&gt;
--xml--     &lt;el:i18n/&gt;
--xml--   &lt;/el:protected&gt;
--xml-- &lt;/el:level&gt;
</pre></td></tr></table>

<p>Пожалуйста, имейте в виду, что каждая строка с метаданными XML начинается именно с &lsquo;<samp>--xml-- </samp>&rsquo;, 8 символов, включая пробел в конце. Дополнительное ограничение формата XML с комментариями Lua возникает из-за способности Lua хранить кодировки символов. Для успешного использования формата XML с комментариями Lua следует ограничиться &lsquo;<samp>UTF-8</samp>&rsquo; или, конечно, &lsquo;<samp>US-ASCII&rsquo;</samp>. Пожалуйста, помните, что хотя часть XML комментируется Lua, она всё так же должна обрабатываться, а значит и быть верной.
</p>
<p>Каждый уровень, хранящийся в формате XML с комментариями Lua, как файл с расширением &lsquo;<samp>.lua</samp>&rsquo;, может использоваться непосредственно в командной строке, равно как и в любом пакете уровней, который хранится в пользовательской домашней директории Enigma. Однако уровни в формате XML с комментариями Lua не могут храниться на серверах в интернете или обновляться в режиме реального времени. Поэтому этот формат хорош для создания уровней, но перед распространением их необходимо преобразовать в чистый формат XML. Пожалуйста, имейте в виду, что сначала Enigma ищет уровни XML, а уровни Lua использует, только если не найдёт уровень XML.
</p>
<p>Ещё одним вариантом применения уровней в формате XML с комментариями Lua служит обратная совместимость с Enigma 0.92. Если уровни в этом формате не используют новые возможности Enigma, то их можно включить в пакеты уровней Enigma 0.92.
</p>
<p>Так как вам может понадобиться несколько раз преобразовать уровни из формата XML в Lua и обратно, мы предлагаем инструменты преобразования: &lsquo;<samp>xml2lua</samp>&rsquo; и &lsquo;<samp>lua2xml</samp>&rsquo;. Оба они &mdash; очень простые скрипты Lua 5, которые, если 5-я версия Lua установлена правильно, можно использовать следующим образом: &lsquo;<samp>lua xml2lua demo_simple.xml &gt; demo_simple.lua</samp>&rsquo;. В системах Unix можно пометить скрипты как исполняемые и просто вводить &lsquo;<samp>xml2lua demo_simple.xml &gt; demo_simple.lua</samp>&rsquo;.
</p>
<p>Конечно, можно добавить алгоритм преобразования в виде простых макросов для своего любимого редактора. Пожалуйста, публикуйте любые написанные вами скрипты для редакторов.
</p>
<p>В процессе работы с метаданными XML, безусловно, могут быть допущены синтаксические ошибки. Свой уровень можно проверить, попробовав запустить его в Enigma. Ошибки XML выводятся на экран, так же как и ошибки Lua. Если сообщения об ошибках не помещаются в экран, можно запустить Enigma из командной строки с опцией &lsquo;<samp>--log</samp>&rsquo; и прочесть сообщения, выведенные в командной строке или (для систем Windows) записанные в файле &lsquo;<samp>stdout.txt</samp>&rsquo; в текущей директории.
</p>
<p>Конечно, можно использовать и сторонний инструмент проверки корректности XML. Нужно только скопировать файл схемы &lsquo;<samp>level.xsd</samp>&rsquo; в директорию, в которой находится сам уровень. Примером возможных инструментов контроля может быть программа Xerces-C &lsquo;<samp>DOMPrint.exe -n -s -f -v=always level.xml</samp>&rsquo; или редакторы с проверкой корректности, такие как <a href="http://www.freexmleditor.com/">Exchanger XML Lite</a>. Такие редакторы выделят во всех местах все возможные элементы и атрибуты.
</p>
<hr size="6">
<a name="Update-and-Upgrade"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Usage" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Library-Files" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Level-Basics" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Level-Basics" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Update-and-Upgrade-1"></a>
<h2 class="section">3.7 Обновление и дополнение</h2>

<p>Поскольку мы указываем все необходимые атрибуты в элементе <a href="#g_t_003cversion_003e">&lt;version&gt;</a>, Enigma может загружать новые версии уровней.
</p>
<p>Если Enigma загружает новые версии, у которых отличается только номер издания &lsquo;<samp>revision</samp>&rsquo;, мы подразумеваем &lsquo;<samp>обновление</samp>&rsquo;. Обновление может быть выполнено автоматически с заменой старых версий обновлёнными, поскольку автор гарантирует их совместимость в результатах и зависимостях. Автор должен предоставить адрес для загрузки автоматических обновлений в защищённом информационном элементе:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">&lt;<i>el</i>:<b>update</b> <i>el</i>:<b>url</b>=&quot;<var>http://myLevelServer.org/path/level_1.xml</var>&quot;/&gt;
</pre></td></tr></table>

<p><b>Атрибуты:</b>
</p>
<dl compact="compact">
<dt> <b>url</b>, <i>необходим</i></dt>
<dd><p>Доступный в течение длительного времени, полный адрес для загрузки обновлений этого уровня с теми же номером и выпуском версии.
</p>
</dd>
</dl>

<p>Если автор уровня вносит в уровень элементы, приводящие к несовместимости, он увеличивает выпуск версии уровня и сохраняет файл уровня под новым именем. Мы называем загрузку такой версии нового уровня &lsquo;<samp>дополнением</samp>&rsquo;.
</p>
<p>Чтобы сообщить о доступности выпуска дополнения, автор должен обновить предыдущий выпуск с последним номером издания, просто добавив элемент дополнения, сообщающий о новом выпуске:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">&lt;<i>el</i>:<b>upgrade</b> <i>el</i>:<b>url</b>=&quot;<var>http://myLevelServer.org/path/level_2.xml</var>&quot; <i>el</i>:<b>release</b>=&quot;<var>2</var>&quot;/&gt;
</pre></td></tr></table>

<p><b>Атрибуты:</b>
</p>
<dl compact="compact">
<dt> <b>url</b>, <i>необходим</i></dt>
<dd><p>Действительный в течение длительного времени, полный адрес для загрузки дополнений этого уровня. Путь к новому файлу.
</p>
</dd>
<dt> <b>release</b>, <i>необходим </i></dt>
<dd><p>Выпуск версии дополнения.
</p>
</dd>
</dl>

<p>Поскольку автор самостоятельно не может обновить все распространяемые уровни, чтобы сообщить о доступности нового выпуска, мы добавили ещё один элемент дополнения в общедоступном разделе. Администраторы уровней могут использовать этот элемент в тех же целях, с тем же синтаксисом без изменения защищённого раздела автора.
</p>
<hr size="6">
<a name="Library-Files"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Update-and-Upgrade" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Writing-a-Library" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Level-Basics" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Level-Basics" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Library-Files-1"></a>
<h2 class="section">3.8 Использование библиотек</h2>

<p>Библиотеки &mdash; это набор функций Lua для многократного использования во многих уровнях. Для использования библиотеки её необходимо объявить как зависимость, как описано в разделе <a href="#g_t_003ccompatibility_003e">&lt;compatibility&gt;</a>. Предварительная загрузка библиотеки &mdash; это всё, что необходимо для её использования. Кроме того, для загрузки библиотеки в определенной точке выполнения можно использовать функцию @ref{enigma.LoadLib}.
</p>
<p>Enigma предоставляет несколько очень полезных <a href="#Libraries">библиотек</a>. Их можно найти по системному пути в поддиректории &lsquo;<samp>levels/lib</samp>&rsquo;. Большинство из них хорошо прокомментированы непосредственно в исходном коде. Для &lsquo;<samp>ant</samp>&rsquo; существует отдельный файл с документацией: &lsquo;<samp>doc/ant_lua.txt</samp>&rsquo;.
</p>
<p>В этом разделе, мы сконцентрируемся на аспектах написания и поддержки библиотек:
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Writing-a-Library">3.8.1 Написание библиотеки</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Maintaining-a-Library">3.8.2 Поддержка библиотеки</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Writing-a-Library"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Library-Files" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Maintaining-a-Library" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Level-Basics" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Library-Files" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Writing-a-Library-1"></a>
<h3 class="subsection">3.8.1 Написание библиотеки</h3>

<p>Файлы библиотеки практически аналогичны файлам уровней. Основное отличие в атрибуте &lsquo;<samp>el:type</samp>&rsquo; элемента &lsquo;<samp>info</samp>&rsquo;, который следует установить в &lsquo;<samp>library</samp>&rsquo;. Все остальные элементы и атрибуты должны быть такими же, как и для уровней. Конечно, никакие атрибуты, основанные на результатах, не будут учитываться и им следует присвоить значения по умолчанию.
</p>
<p>Библиотеки могут зависеть от других библиотек, поэтому необходимо предоставить идентификационный номер и номер выпуска версии. Несколько выпусков библиотеки могут сосуществовать, и их можно обновить и дополнить, если предоставить необходимую информацию. Конечно, библиотеки могут содержать строки документов, которые могут быть локализованы, если вы предоставите элементы &lsquo;<samp>i18n</samp>&rsquo;.
</p>
<p>Элемент &lsquo;<samp>el:luamain</samp>&rsquo; принимает полный код Lua, как и для уровней. Давайте взглянем на важнейшие XML-части библиотеки:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">&lt;?xml version=&quot;1.0&quot; encoding=&quot;<var>UTF-8</var>&quot; standalone=&quot;no&quot; ?&gt;
&lt;<i>el</i>:<b>level</b> xsi:schemaLocation=&quot;<i>http://enigma-game.org/schema/level/1 level.xsd</i>&quot; xmlns:<i>el</i>=&quot;<i>http://enigma-game.org/schema/level/1</i>&quot;&gt;
  &lt;<i>el</i>:<b>protected</b> &gt;
    &lt;<i>el</i>:<b>info</b> <i>el</i>:<b>type</b>=&quot;<var>library</var>&quot;&gt;
      &lt;<i>el</i>:<b>identity</b> <i>el</i>:<b>title</b>=&quot;&quot; <i>el</i>:<b>id</b>=&quot;<var>lib/ant</var>&quot;/&gt;
      &lt;<i>el</i>:<b>version</b> <i>el</i>:<b>score</b>=&quot;<var>1</var>&quot; <i>el</i>:<b>release</b>=&quot;<var>1</var>&quot; <i>el</i>:<b>revision</b>=&quot;<var>0</var>&quot; <i>el</i>:<b>status</b>=&quot;<var>released</var>&quot;/&gt;
      &lt;<i>el</i>:<b>author</b>  <i>el</i>:<b>name</b>=&quot;<var>Petr Machata</var>&quot;/&gt;
      &lt;<i>el</i>:<b>copyright</b>&gt;<var>Copyright &copy; 2002-2003 Petr Machata</var>&lt;/<i>el</i>:<b>copyright</b>&gt;
      &lt;<i>el</i>:<b>license</b> <i>el</i>:<b>type</b>=&quot;<var>GPL v2.0 or above</var>&quot; <i>el</i>:<b>open</b>=&quot;<var>true</var>&quot;/&gt;
      &lt;<i>el</i>:<b>compatibility</b> <i>el</i>:<b>enigma</b>=&quot;<var>0.92</var>&quot;&gt;
        &lt;<i>el</i>:<b>dependency</b> <i>el</i>:<b>path</b>=&quot;<var>lib/natmaze</var>&quot; <i>el</i>:<b>id</b>=&quot;<var>lib/natmaze</var>&quot; <i>el</i>:<b>release</b>=&quot;<var>1</var>&quot; <i>el</i>:<b>preload</b>=&quot;<var>false</var>&quot;&gt;
      &lt;/<i>el</i>:<b>compatibility</b>&gt;
      &lt;<i>el</i>:<b>modes</b> <i>el</i>:<b>easy</b>=&quot;<var>false</var>&quot; <i>el</i>:<b>single</b>=&quot;<var>false</var>&quot; <i>el</i>:<b>network</b>=&quot;<var>false</var>&quot;/&gt;
      &lt;<i>el</i>:<b>score</b> <i>el</i>:<b>easy</b>=&quot;<var>-</var>&quot; <i>el</i>:<b>difficult</b>=&quot;<var>-</var>&quot;/&gt;
    &lt;/<i>el</i>:<b>info</b>&gt;
    &lt;<i>el</i>:<b>luamain</b>&gt;&lt;![CDATA[
    &hellip;
    ]]&gt;&lt;/<i>el</i>:<b>luamain</b>&gt;
    &lt;<i>el</i>:<b>i18n</b>/&gt;
  &lt;/<i>el</i>:<b>protected</b>&gt;
&lt;/<i>el</i>:<b>level</b>&gt;
</pre></td></tr></table>

<hr size="6">
<a name="Maintaining-a-Library"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Writing-a-Library" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Multilevel-Files" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Level-Basics" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Library-Files" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Maintaining-a-Library-1"></a>
<h3 class="subsection">3.8.2 Поддержка библиотеки</h3>

<p>Библиотеки могут существовать в виде различных выпусков и изданий. Версии библиотек, которые отличаются только номером издания, считаются совместимыми версиями. Версии библиотеки, которые привносят несовместимость, должны отличаться номером выпуска версии. Однако ввиду того, что существующие уровни могут зависеть от поведения более ранних выпусков, необходимо поддерживать оба выпуска версии библиотеки и распространять их вместе с Enigma.
</p>
<p>Для сосуществования эти различные выпуски библиотек должны следовать жёсткой схеме именования. У каждой библиотеки должно быть своё основное имя. В предыдущем примере это &lsquo;<samp>lib/ant</samp>&rsquo;. Имя файла данного конкретного выпуска &mdash; это основное имя с добавлением символа подчёркивания и номера версии плюс суффикс &lsquo;<samp>xml</samp>&rsquo;. Поэтому выпуск &lsquo;<samp>lib/ant</samp>&rsquo; следует хранить в виде &lsquo;<samp>lib/ant_2.xml</samp>&rsquo;.
</p>
<p>Если посмотреть в директорию lib, то можно обнаружить, что Enigma хранит большинство библиотек без добавления к основному имени номера выпуска. Это из-за поддержки совместимости форматов уровней Lua для версии 0.92. Допускается хранить один, и только один, выпуск каждой библиотеки без добавления к основному имени номера выпуска. Enigma загрузит эту версию из обычных уровней Lua, которые не предоставляют никакой информации о необходимом выпуске библиотеки.
</p>
<p>Если файла библиотеки с полным основным именем файла нет, для запросов загрузки XML также будет загружен файл библиотеки по умолчанию, в названии которого отсутствует номер выпуска. Однако в будущем новая схема именования станет единственной, и каждая новая библиотека должна с самого начала следовать ей.
</p>
<hr size="6">
<a name="Multilevel-Files"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Maintaining-a-Library" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Enigma-Paradigm" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Level-Basics" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Level-Basics" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Multilevel-Files-1"></a>
<h2 class="section">3.9 Многоуровневые файлы</h2>

<p>Ещё одним способом повторного использования кода, помимо <a href="#Library-Files">файлов библиотек</a>, являются многоуровневые файлы. Код, содержащийся в одном файле, может генерировать несколько уровней, называемых подуровнями, которые присутствуют в пакете в качестве автономных уровней. Конечно, данный способ является менее гибким, чем использование библиотек, поскольку другие файли не могут повторно использовать код. Но вы можете использовать данный способ, если вы написали большой объём специфического кода для сложного уровня, предусматривающего более двух вариантов (в противном случае эти варианты указывались бы как &lsquo;<samp>difficult</samp>&rsquo; и &lsquo;<samp>easy</samp>&rsquo; в элементе <a href="#g_t_003cmodes_003e">&lt;modes&gt;</a>).
</p>
<p>Но основная роль, выполняемая многоуровневыми файлами, заключается в поддержке форматов других игр, например Сокобана; целые серии таких уровней могут быть описаны в одном многоуровневом файле. Enigma позволяет импортировать эти оригинальные файлы с помощью нескольких строчек кода. Написать же пустую подпрограмму для каждого уровня, импортируемого в Enigma из единого файла в другом формате, возможно, но нерационально.
</p>
<p>Но у многоуровневых файлов есть свои ограничения. Они используют единый набор метаданных XML. Поэтому эти метаданные должны подходить для всех уровней. Элемент <a href="#g_t_003cversion_003e">&lt;version&gt;</a> будет идентичным, поскольку он отражает версию кода оригинального уровня или версию файла, импортируемого из другой игры. Но другие данные, например <a href="#g_t_003cauthor_003e">&lt;author&gt;</a>, <a href="#g_t_003ccompatibility_003e">&lt;compatibility&gt;</a> и <a href="#g_t_003cmodes_003e">&lt;modes&gt;</a>, также должны совпадать.. В противном случае использовать многоуровневый файл нельзя.
</p>
<p>Для всех уровней, описанных в многоуровневом файле, могут (и должны) отличаться только значения &lsquo;<samp>title</samp>&rsquo; и &lsquo;<samp>id</samp>&rsquo;. В игре предусмотрены специальные средства работы с этими атрибутами для многоуровневых файлов.
</p>
<p>Рассмотрим все атрибуты и свойства многоуровневых файлов, отличающиеся от стандартных.
</p>
<p>Во-первых, в <a href="#Info-metadata">информации о метаданных</a> необходимо объявить тип уровня как <code>&quot;multilevel&quot;</code> и указать количество генерируемых уровней. Нумерация подуровней осуществляется с 1 и до указанного количества.
</p>
<p>В элементе <a href="#g_t_003cidentity_003e">&lt;identity&gt;</a> необходимо указать один уникальный идентификатор уровня. Enigma автоматически добавить строку <code>&quot;[1]&quot;</code> для первого подуровня, <code>&quot;[2]&quot;</code> &mdash; для второго и т.&nbsp;д. Таким образом, каждый подуровень будет иметь уникальный идентификатор.
</p>
<p>Кроме того, в элементе <a href="#g_t_003cidentity_003e">&lt;identity&gt;</a> необходимо предусмотреть общий заголовок для уровней. Если заголовок заканчивается знаком &lsquo;<samp>#</samp>&rsquo;, Enigma будет автоматически генерировать заголовки для подуровней, добавляя к общей строке заголовка номер подуровня.
</p>
<p>Для отдельных подуровней заголовки необходимо предусмотреть в <a href="#LUA-code">коде LUA</a>. Заголовок, указываемый в элементе <a href="#g_t_003cidentity_003e">&lt;identity&gt;</a>, не может оканчиваться знаком &lsquo;<samp>#</samp>&rsquo; и будет использоваться только в качестве заголовка по умолчанию, если в <a href="#LUA-code">коде LUA</a> заголовок подуровня будет отсутствовать. Перед выполнением кода Lua осуществляется инициализация глобального атрибута <a href="#SublevelNumber">SublevelNumber</a>. Загрузка подходящего подуровня в коде Lua может осуществляться на основе данного номера любым из способов. Кроме того, код Lua в таком случае также должен задать значение ещё одного глобального атрибута многоуровневых файлов &mdash; <a href="#SublevelTitle">SublevelTitle</a>.
</p>

<p><a href="#g_t_003ccompatibility_003e">&lt;compatibility&gt;</a> externaldata
</p>


<hr size="6">
<a name="Enigma-Paradigm"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Multilevel-Files" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#The-World_0027s-Structure" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Level-Basics" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Enigma-Paradigm-1"></a>
<h1 class="chapter">4. Ключевые понятия Enigma</h1>

<p>Теперь, когда вам уже известна структура формальной описательной XML-части уровня, вам, наверное, будет интересно узнать основные принципы структуры мира уровня Enigma. В этой главе мы объясним все основные понятия и термины, присутствующие в дальнейших главах, которые описывают видение уровня его автором.
</p>
<p>Обратите внимание, что мы описываем характеристики нового API версии Enigma 1.10. В API предыдущих версий отсутствуют некоторые его характеристики, и в ряде аспектов он может отличаться от нового API.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#The-World_0027s-Structure">4.1 Структура мира</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Object-Description">4.2 Описание объектов</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Methods-of-Interaction">4.3 Способы взаимодействия</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#The-Lifecycle-of-a-Level">4.4 Жизненный цикл уровня</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="The-World_0027s-Structure"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#World_0027s-Shape-and-Coordinates" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="The-World_0027s-Structure-1"></a>
<h2 class="section">4.1 Структура мира</h2>

<p>В данном разделе мы рассмотрим уровень как отдельное произведение и как единое целое и опишем первоначальное размещение компонентов игрового мира и его динамическое поведение во время игры. Давайте подробно рассмотрим задействованные в нём объекты:
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#World_0027s-Shape-and-Coordinates">4.1.1 Очертания и координаты мира</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">    Участки решётки и секции
</td></tr>
<tr><td align="left" valign="top"><a href="#Object-Layers">4.1.2 Слои объектов</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                    Покрытия, предметы, камни, актёры и др.
</td></tr>
<tr><td align="left" valign="top"><a href="#World-as-an-Object">4.1.3 Мир как объект</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">               Общие атрибуты и контроль
</td></tr>
<tr><td align="left" valign="top"><a href="#Unpositioned-Objects">4.1.4 Неразмещаемые объекты</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">             Другие объекты, такие как резиновые ленты и гаджеты
</td></tr>
<tr><td align="left" valign="top"><a href="#Player-and-Inventory">4.1.5 Игрок и инвентарь</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">             Инь и Ян
</td></tr>
<tr><td align="left" valign="top"><a href="#Owned-Objects">4.1.6 Подконтрольные объекты</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                    Объекты, временно находящиеся в подчинении
</td></tr>
</table>

<hr size="6">
<a name="World_0027s-Shape-and-Coordinates"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#The-World_0027s-Structure" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Object-Layers" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#The-World_0027s-Structure" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="World_0027s-Shape-and-Coordinates-1"></a>
<h3 class="subsection">4.1.1 Очертания и координаты мира</h3>

<p>Сыграв в несколько уровней, вы наверняка заметили, что каждый экран в игре разделён на квадратные секции &mdash; 20 по горизонтали и 13 по вертикали. Хотя игроку и бывает трудно определить очертания некоторых больших уровней, мир каждого уровня имеет форму прямоугольника. Тем не менее, некоторые части уровня игрок может никогда и не увидеть, потому что путь к ним ему преграждают каменные стены или водные барьеры.
</p>
<a name="index-onescreener"></a>
<p>При создании мира автор должен задать его размер в секциях. Заданные ширина и высота мира являются фиксированными и не могут быть изменены впоследствии. Типичный размер &mdash; 20x13 для <em>одноэкранного уровня</em>. Но здесь нет никаких ограничений. Можно создавать уровни даже меньшие, чем размер экрана. Обратите внимание, что при создании больших уровней необходимо учитывать тот факт, что один ряд или колонка клеток при прокрутке обычно делится между двумя экранами. Таким образом, уровень размером 2x2 экрана имеет размер 39x25 секций, 3x4 экрана &mdash; 58x49 секций и т. д.
</p>
<a name="index-position"></a>
<p>Края секций образуют решётку, охватывающую мир уровня. <em>Координаты </em>левого верхнего угла мира уровня мы определяем как {0, 0}. Первая координата показывает смещение по горизонтальной оси вправо от начала координат, вторая &mdash; смещение по вертикальной оси вниз. В одноэкранном уровне координаты секции в нижнем правом углу &mdash; {19, 12}, в то время как координаты самого угла &mdash; {20, 13} (обратите внимание, что данная точка уже не относится к уровню).
</p>
<p>Позицию актёра, например чёрного шарика, следует задавать двумя числами с плавающей запятой, например {1.5, 2.5} для актёра, расположенного в центре секции, находящейся на пересечении третьего ряда и второй колонки, считая от левого верхнего угла.
</p>
<a name="index-grid-position"></a>
<p>Но большинство объектов, таких как камни, можно разместить только в соответствии с фиксированными координатами, выраженными целыми числами. Даже если попытаться поместить камень в точку {1.5, 2.5}, он окажется в точке {1, 2}. Таким образом, если при задании координат учитываются только целые числа, мы говорим об <em>участке решётки</em>. Легко заметить, что позиция секции определяется по её верхнему левому углу. Верхняя и левая стороны и являются принадлежащими непосредственно данной секции, правая же и нижняя сторона принадлежат соседним секциям.
</p>
<a name="index-tile"></a>
<p>Наконец, рассмотрим более детально саму секцию. На одном участке решётки можно разместить покрытие, предмет, камень и даже несколько актёров. Комбинация всех объектов на одном участке решётки называется секцией. Эти комбинации объектов нередко объявляются один раз в так называемых определениях секции. Поскольку на многих участках решётки размещаются одинаковые комбинации объектов, эти секции можно использовать многократно.
</p>
<hr size="6">
<a name="Object-Layers"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#World_0027s-Shape-and-Coordinates" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#World-as-an-Object" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#The-World_0027s-Structure" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Object-Layers-1"></a>
<h3 class="subsection">4.1.2 Слои объектов</h3>

<a name="index-layer"></a>
<p>На каждом участке решётки можно поместить покрытие, предмет и камень. Но только по одному. Если поместить второй камень, он заменит первый. Покрытие, предмет и камень расположены определённым образом по отношению друг к другу: покрытие всегда располагается под предметом, а камень над ними. Таким образом, можно говорить о трёх слоях объектов: слой покрытий, слой предметов и слой камней.
</p>
<a name="index-default-floor"></a>
<p>К слою покрытий предъявляется уникальное требование. Каждый участок решётки должен иметь покрытие. Существует возможность задать секцию по умолчанию с <em>покрытием по умолчанию</em>, которое автоматически размещается на каждом участке решётки, на котором нет другого покрытия. Даже если разрушить покрытие, то есть убрать его, не указав ему замену, оно будет заменено покрытием по умолчанию.
</p>
<p>У покрытий есть две элементарные характеристики: трение и сцепление. Трение замедляет движения актёров, а сцепление даёт возможность ускорять актеров с помощью мыши. Покрытие может также вызывать направленную силу, которая даёт игроку ощущение наклона. Следует также упомянуть, что покрытия могут гореть. Имеется целый набор атрибутов, с помощью которых можно управлять поведением огня.
</p>
<p>На слое предметов находятся предметы, которые актёр может подобрать, и статичные предметы. К первой группе относятся такие предметы, как ключи, бананы и т. д. К статичным предметам относятся бомбы, фугасы, триггеры, отверстия, а также предметы, которые могут быть размещены только самой системой, такие как лазеры, огонь, пепел и т. д. Поскольку на каждом участке решетки может находиться только один предмет, шарик не может поместить другой предмет на статичном предмете. По этой причине нельзя преградить путь включенному лазеру, поместив на его пути предмет. Но при написании уровня можно добавить любой предмет по своему усмотрению на первоначальную секцию решётки.
</p>
<p>Слой камней не требует долгих объяснений. На каждом участке решётки автор может разместить по одному камню из имеющегося набора камней. Естественно, большинство участков следует оставить незанятыми, чтобы по ним могли передвигаться актёры. И хотя границы большинства уровней окружены каменной стеной, делать это не обязательно. При отсутствии стены шарики будут отскакивать от физической границы мира.
</p>
<p>Актёры располагаются в другом слое, который не привязан к решётке. Они могут быть размещены в любом месте. Актёры, проходящие сквозь камень, будут отображаться под камнем.
</p>
<hr size="6">
<a name="World-as-an-Object"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Object-Layers" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Unpositioned-Objects" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#The-World_0027s-Structure" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="World-as-an-Object-1"></a>
<h3 class="subsection">4.1.3 Мир как объект</h3>

<p>Трение, ломкость, режимы и прочее, режимы прокрутки.
</p>
<hr size="6">
<a name="Unpositioned-Objects"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#World-as-an-Object" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Player-and-Inventory" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#The-World_0027s-Structure" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Unpositioned-Objects-1"></a>
<h3 class="subsection">4.1.4 Неразмещаемые объекты</h3>

<p>Похоже, упущен по крайней мере один объект, который нельзя связать ни с конкретным местом на уровне, ни с одним из лежащих сверху слоев &mdash; резиновые ленты! На самом деле, кроме покрытий, предметов, камней и актеров в большом количестве существуют <a href="#Other-Objects">Остальные объекты</a>, которые не требуется размещать на карте уровня. Кроме видимых резиновых лент и проволоки в мир можно добавить полезные гаджеты (gadgets), которые помогают составлять уровни простым добавлением новых элементов.
</p>
<p>Все эти другие объекты полноценны, что следует из следующих глав. Но вам необходимо использовать метод мира <a href="#add">add</a>, чтобы добавить их, а также возможности, описанные в главах <a href="#Object-Reference">Ссылка на объект</a> или <a href="#Object-Naming">Именование объектов</a>, чтобы впоследствии обратиться к ним, потому что не существует способа обратиться к ним по их размещению.
</p>
<hr size="6">
<a name="Player-and-Inventory"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Unpositioned-Objects" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Owned-Objects" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#The-World_0027s-Structure" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Player-and-Inventory-1"></a>
<h3 class="subsection">4.1.5 Игрок и инвентарь</h3>

<p>По своей концепции, Enigma &mdash; это игра для двух игроков. Тем не менее, в неё можно играть одному на единственном компьютере, переключая управление между двумя виртуальными игроками. Мы называем этих игроков <code>Инь</code> и <code>Ян</code>, поскольку первый игрок, как правило, управляет чёрным шариком, в то время как второй обычно управляет белым.
</p>
<p>У каждого виртуального игрока есть собственный инвентарь, в котором можно хранить до 13 предметов. Самый левый предмет в инвентаре называется &lsquo;<samp>активным</samp>&rsquo;, поскольку щелчок мышью активирует этот предмет, а касание актёром чего-либо этим предметом может вызвать специальные действия.
</p>
<p>Инвентари игроков существуют вне прямоугольного мира. Поэтому у любого предмета из инвентаря игрока позиция относительно мира недействительна, что выражается в возвращаемом на запрос &lsquo;<samp>exists()</samp>&rsquo; значения &lsquo;<samp>false</samp>&rsquo;. С помощью дополнительного метода мира <a href="#add">add</a> можно добавлять предметы непосредственно в инвентари.
</p>
<p>Хотя актёры закреплены за игроками, они достаточно самостоятельны и живут в одном из слоёв объектов (см. раздел <a href="#Object-Layers">Слои объектов</a>). С игроками они связаны следующим образом:
</p>
<p>каждый виртуальный игрок может управлять одним или несколькими принадлежащими ему актёрами любого типа. Это значит, что игрок <code>Инь</code> не обязан всегда управлять чёрным шариком <a href="#ac_005fmarble">ac_marble</a>, а с тем же успехом может управлять и белым шариком <a href="#ac_005fpearl">ac_pearl</a>, лошадью <a href="#ac_005fhorse">ac_horse</a> или любым другим произвольным набором объектов.
</p>
<p>Владение и управление актёрами &mdash; это две большие разницы. Владение актёром означает, что каждый предмет, подобранный актёром, оказывается в инвентаре игрока, а предметы игрока могут использоваться всеми актёрами, находящимися в подчинении игрока. Управление актёром просто приводит к передвижению актёра под воздействием сил, которые регулирует игрок. Игрок может управлять актёром при этом не владея им. Другой актёр может находиться во владении игрока, но не управляться им, являясь, таким образом, пассивным актёром, которого могут передвигать толчки других актёров. Актёр может даже управляться обоими игроками, но владеть им может максимум один игрок.
</p>
<p>Назначение игрокам актёров однозначно регулируется атрибутами актёров (см. раздел <a href="#Actor-Attributes">Атрибуты актёров</a>).
</p>
<p>Если в Enigma играет один пользователь, то он начинает игру, управляя игроком <code>Инь</code>. Используя объекты Инь-Ян, он может переключиться на управление игроком <code>Ян</code> и обратно. При игре одним игроком на сетевых уровнях автоматически добавляются предметы <a href="#it_005fyinyang">it_yinyang</a>. Они позволяют произвольно переключаться между игроками. Камни <a href="#st_005fyinyang">st_yinyang</a> ограничивают способность пользователей переключаться между управлением различными игроками.
</p>

<hr size="6">
<a name="Owned-Objects"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Player-and-Inventory" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Object-Description" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#The-World_0027s-Structure" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Owned-Objects-1"></a>
<h3 class="subsection">4.1.6 Подконтрольные объекты</h3>

<p>Помимо объектов, принадлежащих игроку и входящих в его инвентарь, объекты могут временно входить в состав другого объекта. Наиболее очевидный пример &mdash; предмет, хранящийся в сумке <a href="#it_005fbag">it_bag</a>. В качестве других примеров можно привести два камня сёгун <a href="#st_005fshogun">st_shogun</a>, расположенные на одном участке решётки, или, в течении короткого промежутка времени, камень, меняющийся местами с <a href="#st_005fswap">st_swap</a> или <a href="#st_005fpull">st_pull</a>.
</p>
<p>В любом случае подконтрольный объект возвращает ту же позицию, что и его владелец. Даже если несколько объектов хранятся в сумке, которая в свою очередь хранится в другой сумке, все предметы вернут ту же позицию, что и самая внешняя сумка. Если эта сумка находится в инвентаре игрока, то все предметы вернут недействительную позицию.
</p>
<p>Нельзя напрямую заставить объект входить в состав другого, разместив объекты в одном и том же месте, поскольку эта стандартная операция уничтожит старый объект и заменит его новым. По возможности, как в случае с сумкой, добавлять объекты в контейнер можно используя дополнительный метод мира <a href="#add">add</a>.
</p>

<hr size="6">
<a name="Object-Description"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Owned-Objects" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Object-Kind" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Object-Description-1"></a>
<h2 class="section">4.2 Описание объектов</h2>

<p>Теперь, после ознакомления с размещением объектов, пришло время разобраться, как выбрать тип объекта, указать его атрибуты и впоследствии ссылаться на него.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Object-Kind">4.2.1 Тип объекта</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Object-Reference">4.2.2 Ссылка на объект</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Object-Naming">4.2.3 Именование объектов</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Object-Attributes">4.2.4 Атрибуты объектов</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Object-Kind"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Object-Description" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Object-Reference" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Object-Description" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Object-Kind-1"></a>
<h3 class="subsection">4.2.1 Тип объекта</h3>

<a name="index-abstract-kind"></a>
<p>До настоящего времени мы говорили о таких типах объектов как покрытие &lsquo;<samp>fl</samp>&rsquo;, предмет &lsquo;<samp>it</samp>&rsquo;, камень &lsquo;<samp>st</samp>&rsquo; и актёр &lsquo;<samp>ac</samp>&rsquo;. Все эти типы являются <em>абстрактными</em>. Можно проверить, принадлежит ли данный объект к какому-либо типу, но нельзя создать экземпляр абстрактного типа.
</p>
<p>Чтобы создать объект, для него необходимо задать определённое имя типа, например &lsquo;<samp>st_switch</samp>&rsquo;. Описания всех типов объектов приведены в соответствующих главах, начиная с главы <a href="#Floor-Objects">Покрытия</a>. Для всех имён типов с по крайней мере одним подчеркиванием можно создать экземпляры.
</p>
<p>Большинство типов подразделяются на подтипы, такие как &lsquo;<samp>st_switch_black</samp>&rsquo; и &lsquo;<samp>st_switch_white</samp>&rsquo;. В случае с переключателями, если не добавить суффикс, то будет получен переключатель, независимый от цвета шарика. В других случаях, например в случае со &lsquo;<samp>st_chess</samp>&rsquo;, при указании одного только общего типа будет получен заданный по умолчанию &lsquo;<samp>st_chess_black</samp>&rsquo;, так как не существует бесцветных шахматных камней.
</p>
<p>Если запросить объект по его типу, то возвращаемое значение всегда будет самого подходящего типа. Таким образом, &lsquo;<samp>st_chess</samp>&rsquo; вернет тип &lsquo;<samp>st_chess_black&rsquo;</samp>, в то время как &lsquo;<samp>st_switch</samp>&rsquo; не изменяет своё имя.
</p>
<p>Объекты могут менять свой тип в результате обработки выражений в коде уровня или действий игрока. Так, можно задать цвет переключателя или шарик может изменить цвет шахматного камня, дотронувшись до него волшебной палочкой. Объект сообщит новый тип при последующих обращениях к нему.
</p>
<p>Существует несколько специальных объектов, предназначенных исключительно для создания новых объектов. Обычно в их названиях присутствует суффикс &lsquo;<samp>_new</samp>&rsquo;. Такие объекты никогда не возвращают имя своего первоначального типа, а немедленно преобразуются к стандартному типу.
</p>
<p>Если конкретный подтип не важен, то можно проверить объект на соответствие любому общему типу. Например, если проверить переключатель любого цвета на соответствие &lsquo;<samp>st_switch</samp>&rsquo;, он вернёт значение &quot;true&quot;.
</p>
<hr size="6">
<a name="Object-Reference"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Object-Kind" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Object-Naming" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Object-Description" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Object-Reference-1"></a>
<h3 class="subsection">4.2.2 Ссылка на объект</h3>

<p>После того, как автор распределит объекты по слоям, у него может появиться необходимость впоследствии к ним обратиться. При обратном вызове функций движок предоставляет ссылки на объекты-отправители. Но автор может обратиться к любому объекту решётки когда угодно, указав его позицию.
</p>
<p>С помощью ссылки на объект особого типа Lua &lsquo;<samp>object</samp>&rsquo; можно узнать текущее состояние и атрибуты объекта, модифицировать объект, посылать сообщения либо пользоваться любыми поддерживаемыми методами объекта.
</p>
<p>Объекты можно группировать для эффективного осуществления типичных операций со всеми задействованными объектами. Например, если попробовать послать сообщение группе объектов, все объекты получат сообщение по очереди. Последовательность ряда объектов в группе является постоянной и гарантированно соблюдается при выполнении типичных операций.
</p>
<p>Поскольку объекты могут прекратить своё существование, то следует иметь в виду, что ссылки также не являются постоянными. Есть возможность проверить существование ссылки на любой объект. Но во многих случаях действительность ссылки не имеет значения, поскольку Enigma 1.10 очень терпима по отношению к доступу к недействительным объектным ссылкам. Операции просто будут проигнорированы, а в ответ на запросы будут выданы величины по умолчанию.
</p>
<p>На практике целесообразно запрашивать и хранить ссылки на объекты только на время локального вызова функции. Пока ваш код уровня обрабатывается по очереди без симуляции мира, которая даёт игроку возможность разрушить объекты действиями шарика, объекты будут прекращать своё существование только в соответствии с вашими прямыми указаниями.
</p>
<p>Чтобы получить доступ к объекту при последующем вызове, к нему можно обратиться двумя способами. Во-первых, к объекту можно обратиться по его размещению. Но, поскольку многие объекты подвижны, их размещение не является постоянным. Следовательно, можно обратиться к объекту по имени (см. раздел <a href="#Object-Naming">Именование объектов</a>).
</p>
<hr size="6">
<a name="Object-Naming"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Object-Reference" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Object-Attributes" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Object-Description" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Object-Naming-1"></a>
<h3 class="subsection">4.2.3 Именование объектов</h3>

<p>Чтобы длительное время иметь возможность для обращений к объекту, каждому отдельному объекту можно назначить имя. Для этого необходимо только установить для объекта атрибут &lsquo;<samp>name</samp>&rsquo; с уникальной строкой. Естественно, имя объекта можно запросить посредством чтения атрибута &lsquo;<samp>name</samp>&rsquo;.
</p>
<p>Имя &mdash; это строка, которая должна состоять из символов &lsquo;<samp>a..z</samp>&rsquo;, &lsquo;<samp>A..Z</samp>&rsquo;, цифр &lsquo;<samp>0..9</samp>&rsquo; и символа подчёркивания &lsquo;<samp>_</samp>&rsquo;. Прочие символы разрешены только в случаях, рассмотренных ниже.
</p>
<a name="index-auto-naming"></a>
<p>Необходимо следить за тем, чтобы каждому объекту было дано уникальное имя. Если повторно использовать имя, уже ассоциированное с каким-либо объектом, то этот объект лишится имени, а само имя будет ассоциировано с новым объектом. Чтобы упростить именование больших групп однотипных объектов, можно добавить знак &lsquo;<samp>#</samp>&rsquo; в качестве последнего символа имени, например &lsquo;<samp>mydoor#</samp>&rsquo;. Это даёт программе команду добавить к строке уникальный случайный номер. Поэтому автоматически именованные объекты никогда не будут разыменованы другим объектом, именованным позднее. Но если удалить автоматически именованный объект, такой как, например &lsquo;<samp>mydoor#103284</samp>&rsquo;, то такое же имя может быть присвоено другому объекту, созданному впоследствии.
</p>
<p>Все именованные объекты регистрируются в хранилище <em>именованных объектов</em>. API предлагает переменную &lsquo;<samp>no</samp>&rsquo; , которая позволяет получить ссылку на любой именованный объект, например &lsquo;<samp>no[&quot;mylaser_a&quot;]</samp>&rsquo;. В таких случаях выдаётся <a href="#Object-Reference">Ссылка на объект</a> или &lsquo;<samp>nil</samp>&rsquo;, если объект с данным именем отсутствует.
</p>
<p>Поскольку существует возможность автоматически именовать группы объектов, допускается использование символов &lsquo;<samp>?</samp>&rsquo; и &lsquo;<samp>*</samp>&rsquo;, заменяющих прочие символы. Вопросительный знак заменяет один произвольный символ, звёздочка &mdash; любое количество символов. Например, &lsquo;<samp>no[&quot;mydoor#*&quot;]</samp>&rsquo; выдаёт все автоматически именованные объекты &lsquo;<samp>mydoor</samp>&rsquo; в отдельной группе объектов.
</p>
<p>Многие атрибуты объектов, такие как &lsquo;<samp>target</samp>&rsquo;, &lsquo;<samp>destination</samp>&rsquo;, предполагают, требуют ссылок на другие объекты. Помимо временных ссылок на объекты (см. раздел <a href="#Object-Reference">Ссылка на объект</a>), всегда можно создать строку имени как долгосрочную ссылку на объект. Если значением атрибута могут быть несколько объектов, можно ввести группу ссылок на объекты, список имён объектов или шаблон имени объекта с символами &lsquo;?&rsquo; и &lsquo;*&rsquo;. Таким образом, строка &lsquo;<samp>&quot;mydoor#*&quot;</samp>&rsquo; является допустимой целью.
</p>
<a name="index-nearest-object"></a>
<p>Переключатели часто располагаются рядом с подконтрольными им объектами. Чтобы значительно упростить себе жизнь, на ближайший объект группы можно сослаться, добавив в начало его имени символ &lsquo;<samp>@</samp>&rsquo;.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">ti[&quot;F&quot;] = {&quot;st_floppy&quot;, target=&quot;@door#*&quot;}
ti[&quot;D&quot;] = {&quot;st_blocker&quot;, name=&quot;door#&quot;}
</pre></td></tr></table>

<p>Таким объявлением секции можно с помощью двух символов секции описать на карте мира произвольное число камней-дисководов и блокирующих камней. Каждый из камней-дисководов связан с ближайшей запираемой дверью. Если два подконтрольных объекта находятся на одинаковом от него расстоянии предпочтение отдаётся расположенному с южной стороны. Если подконтрольные объекты выровнены ещё и по горизонтали, то предпочтение отдаётся восточному. В тех редких случаях, когда объекты расположены на одном и том же месте, камни предшествуют предметам, покрытиям и актерам. Выбор подконтрольного объекта зависит только от размещения этих объектов и их типа и больше ни от чего. Поэтому вполне можно положиться на стабильный механизм выбора. В случае, если выбор равноудалённых подконтрольных объектов непредсказуем, вам может помочь <a href="#Nearest-Object-Clustering">Группировка ближайших объектов</a>.
</p>
<p>Возможности автоматического именования и группировки ближайших объектов помогают уменьшить количество необходимых определений секций. Преобрахования, такие как <a href="#res_002eautotile">res.autotile</a> и <a href="#res_002ecomposer">res.composer</a> &mdash; это ещё одна возможность снизить потребность в объявлении секций.
</p>
<p>Другая уникальная особенность имён объектов &mdash; это их предварительное объявление. Это даёт возможность ссылаться на ещё не существующий объект. Так, если требуется поместить на уровне два телепорта, каждый из которых будет точкой назначения для другого, использование имён объектов будет идеальным решением:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">wo[{3,4}]  = {&quot;it_vortex&quot;, name=&quot;vortex1&quot;, destination=&quot;vortex2&quot;}
wo[{15,9}] = {&quot;it_vortex&quot;, name=&quot;vortex2&quot;, destination=&quot;vortex1&quot;}
</pre></td></tr></table>

<p>В таких случаях придётся использовать ссылки на имена объектов в объявлениях секций, поскольку ни один из упомянутых объектов на момент объявления ещё не существует.
</p>
<p>Со временем объекты могут изменяться. Двери открываются, шахматы меняют цвет, блокирующий камень может сжаться до блокирующего предмета. Это означает, что меняется и тип объекта. Но во многих случаях это также означает, что временные ссылки на объект также станут недействительными. Для удобства авторов сущность объекта будет перенесена на новый объект, даже если ссылка станет недействительной. И подобно пользовательским атрибутам, имя &mdash; это часть сущности объекта. Таким образом, если присвоить имя камню <a href="#st_005fblocker">st_blocker</a>, а затем он сожмётся в <a href="#it_005fblocker">it_blocker</a>, то этот предмет можно запросить в хранилище именованных объектов, использовав имя объекта.
</p>
<p>Когда объект полностью уничтожается, например, дверь разрушается с помощью <a href="#it_005fseed">it_seed</a>, он больше не может быть подконтролен активным объектам наподобие переключателей. Всё ещё существующая ссылка на уже не существующий объект не вызовет проблем для пересылки <a href="#Messages">Сообщения</a>. А как насчёт ссылок на ближайший объект? Во избежание проблем, вызванных уничтожением объектов, стандартная ссылка на ближайший объект, предваряемая приставкой &lsquo;<samp>@</samp>&rsquo;, окончательно формируется на этапе инициализации уровня (см. раздел <a href="#Level-Initialization">Инициализация уровня</a>). Это означает, что она заменяется уникальным именем ближайшего объекта, который существовал после создания всех объектов и до того момента, когда пользователь получает возможность действовать и может разрушить объект.
</p>
<p>Но иногда предпочтительнее работать с подконтрольными объектами динамически. При этом объекты обрабатываются во время доступа к ним. Если добавить к имени приставку &lsquo;<samp>@@</samp>&rsquo;, то ссылка при инициализации будет сформирована не до конца, а останется динамической.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">ti[&quot;c&quot;] = {&quot;it_coin_s&quot;, &quot;magic#&quot;}
ti[&quot;v&quot;] = {&quot;it_vortex&quot;, destination=&quot;@@magic#*&quot;}
</pre></td></tr></table>

<p>Если разместить на карте три волшебные монеты и один телепорт, то шарик будет телепортирован к ячейке, на которой размещается ближайшая (на момент телепортации) к телепорту монета.
</p>
<p>Во избежание непредвиденных проблем с недействительными ссылками на объект, некоторые наиболее важные объекты автоматически именуются системой, если автор уровня не предлагает свой вариант имени. Но эти уникальные имена не создают помех пользовательскому именованию объектов.
</p>
<hr size="6">
<a name="Object-Attributes"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Object-Naming" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Methods-of-Interaction" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Object-Description" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Object-Attributes-1"></a>
<h3 class="subsection">4.2.4 Атрибуты объектов</h3>

<p>Один из ключевых факторов в обеспечении гибкости и разнообразия игры &mdash; это возможность тонкой настройки поведения объектов при помощи атрибутов. Автор уровня не ограничен фиксированным набором объектов определённого вида с предварительно заданными характеристиками.
</p>
<p>Атрибут &mdash; это имя, строка с приписанным ей значением. Например, &lsquo;<samp>obj[&quot;inverse&quot;]=true</samp>&rsquo; задаёт булево значение отдельному атрибуту объекта, а &lsquo;<samp>{&quot;it_magnet&quot;, range=6.5}</samp>&rsquo; описывает магнит с первоначально заданным атрибутом с плавающей запятой.
</p>
<p>Набор этих значений многообразен. Могут быть присвоены большинство типов Lua и ряд типов, характерных только для Enigma :
</p><ul>
<li> bool
</li><li> int
</li><li> double
</li><li> string
</li><li> nil, DEFAULT
</li><li> position
</li><li> object
</li><li> group
</li><li> tokens
</li></ul>

<p>Понятие &quot;булево значение&quot; мы употребляем в том смысле, в котором оно употребляется в Lua 5, то есть оно может иметь значения &lsquo;<samp>true</samp>&rsquo; и &lsquo;<samp>false</samp>&rsquo;.
</p>
<p>Многие значения перечисляемого типа, такие как направления или цвета, выражаются целыми числами.
</p>
<p>Особый интерес представляет значение &lsquo;<samp>nil</samp>&rsquo;. Лишь немногие атрибуты непосредственно используют значение &lsquo;<samp>nil</samp>&rsquo;, например &quot;color&quot; (цвет) для некоторых объектов. Задание атрибуту значения &lsquo;<samp>nil&rsquo;</samp> изменит его значение на значение по умолчанию. Например, если установить для атрибута &quot;orientation&quot; (направление) объекта <a href="#st_005fboulder">st_boulder</a> значение &lsquo;<samp>nil</samp>&rsquo;, оно будет изменено на значение по умолчанию, каковым является &lsquo;<samp>NORTH</samp>&rsquo; (север), значение направления перечисляемого типа. Последующее чтение атрибута вернёт это значение. Только атрибуты, которые допускают нулевое значение, выдадут &lsquo;<samp>nil</samp>&rsquo; при доступе. Отсюда напрямую следует, что значения этих атрибутов по умолчанию всегда равны &lsquo;<samp>nil</samp>&rsquo;.
</p>
<p>Разработчики Lua решили прекратить использование &lsquo;<samp>nil</samp>&rsquo; в качестве значений в списках Lua. Так как в качестве определений объектов мы часто пользуемся анонимными списками, таким атрибутам нельзя будет присвоить значение &lsquo;<samp>nil</samp>&rsquo;. Такие атрибуты придётся устанавливать явно. Может пригодиться и добавленное нами значение &lsquo;<samp>DEFAULT</samp>&rsquo;, которое можно использовать для установки атрибутов где угодно, даже в списках Lua.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">mySwitch[&quot;color&quot;] = nil
mySwitch[&quot;color&quot;] = DEFAULT
wo[{3,6}] = {&quot;ac_marble_black&quot;, player=DEFAULT}
</pre></td></tr></table>

<p>Заметим, что &lsquo;<samp>DEFAULT</samp>&rsquo; &mdash; это не &lsquo;<samp>nil</samp>&rsquo;. В контексте Lua это разные значения. Просто оба они вызывают сброс атрибутов к значениям по умолчанию. Если запросить атрибут с нулевым значением, то всегда будет получено значение Lua &lsquo;<samp>nil</samp>&rsquo;. Движок никогда не вернёт &lsquo;<samp>DEFAULT</samp>&rsquo;.
</p>
<p>Группа &mdash; это упорядоченный набор ссылок на объект (см. раздел <a href="#Object-Reference">Ссылка на объект</a>). Так как к моменту их использования все содержащиеся в ней объекты уже должны существовать, то это значение редко используется для атрибутов при объявлении объектов. Но она очень полезна для постобработки объектов и использования в функциях обратного вызова (см. раздел <a href="#Callback-Function">Функция обратного вызова</a>).
</p>
<p>Самый сложный тип значений атрибута &mdash; это метки. Их назначение &mdash; определение одного или нескольких объектов. Так как в Enigma предусмотрено несколько способов это сделать, в этом типе значений объединены и перемешаны все возможности. Метка может быть строкой с именем объекта, ссылкой на объект, а также группой либо списком, в которых перечислены любые их этих типов в любом количестве и порядке. Так, справа в приведённой ниже колонке находятся допустимые метки атрибута &lsquo;<samp>target</samp>&rsquo;:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">obj1[&quot;target&quot;] = &quot;mydoor&quot;
obj2[&quot;target&quot;] = myobject
obj3[&quot;target&quot;] = grp(ojb1, obj2, obj3)
obj4[&quot;target&quot;] = {&quot;mydoor&quot;, myobject}
obj5[&quot;target&quot;] = {grp(ojb1, obj2, obj3), &quot;mydoor&quot;, myobject, &quot;anotherdoor&quot;}
</pre></td></tr></table>

<p>Подобная гибкость может быть полезной при задании меточных атрибутов, независимых от типов ссылок на заданный объект.
</p>
<p>В главе <a href="#Common-Attributes-and-Messages">Общие атрибуты и сообщения</a> и последующих главах приведены подробные описания существующих атрибутов объектов.
</p>
<p>Помимо этих предварительно заданных атрибутов, автор уровня может хранить свою собственную информацию об объектах для дальнейшего использования. Любое имя, начинающееся со знака подчеркивания &lsquo;<samp>_</samp>&rsquo;, может быть использовано для целей, специфичных для данного уровня. Данная приставка была выбрана в силу того, что получающиеся в результате её добавления имена все ещё являются действительными именами Lua. Типичная сфера их использования &mdash; это переключатели и триггеры с функциями обратного вызова. Эти функции ожидают в качестве аргумента отправителя (переключатель или триггер). Если планируется ассоциировать одни и те же функции с несколькими отправителями, то можно хранить необходимую контекстную информацию в отправителе.
</p>
<p>Внутренний движок также использует атрибуты объектов. Имена таких недоступных атрибутов начинаются со знака &lsquo;<samp>$</samp>&rsquo;. Они могут указываться в документации для сведения разработчиков, использующих язык C++. Авторам уровней следует игнорировать эти атрибуты.
</p>
<p>В некоторых случаях можно наблюдать различное поведение при установке атрибутов во время определения объекта и установке того же атрибута, когда объект уже находится на решётке. Например, дверь &lsquo;<samp>{&quot;st_door_h&quot;, state = OPEN}</samp>&rsquo; открыта с самого начала, в то время как &lsquo;<samp>mydoor[&quot;state&quot;] = OPEN</samp>&rsquo; по отношению к закрытой двери открывает эту дверь. Открытие двери в таком случае занимает некоторое время. Подробности смотрите в разделе <a href="#The-Lifecycle-of-a-Level">Жизненный цикл уровня</a>.
</p>
<p>После просмотра кода на C++ могут возникнуть вопросы по поводу задействования атрибутов. Не все атрибуты находятся непосредственно на карте. Некоторые из них хранятся в переменных экземпляров объектов, другие вообще не существуют. Атрибуты объектов &mdash; это абстрактное понятие, которое объединяет несколько внутренних характеристик в рамках простого общего API кода уровня. В движке C++ малозаметные причины, такие как оптимизация работы программы, требуют значительно более сложного манипулирования.
</p>

<hr size="6">
<a name="Methods-of-Interaction"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Object-Attributes" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Messages" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Methods-of-Interaction-1"></a>
<h2 class="section">4.3 Способы взаимодействия</h2>

<p>Описав первоначальное размещение объектов в мире уровня, мы теперь должны понять, как управлять динамическим поведением уровня.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Messages">4.3.1 Сообщения</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">             Как попросить объект что-то сделать
</td></tr>
<tr><td align="left" valign="top"><a href="#Target-_002d-Action">4.3.2 Цель-действие</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">      Автоматическая реакция на событие
</td></tr>
<tr><td align="left" valign="top"><a href="#Callback-Function">4.3.3 Функция обратного вызова</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">    Предусмотренные в Lua способы реакции на событие
</td></tr>
<tr><td align="left" valign="top"><a href="#Object-State">4.3.4 Состояние объекта</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Messages"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Methods-of-Interaction" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Target-_002d-Action" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Methods-of-Interaction" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Messages-1"></a>
<h3 class="subsection">4.3.1 Сообщения</h3>

<p>Открытую дверь можно сгенерировать, установив её атрибуты. Но как же сделать так, чтобы переключатель открывал дверь, когда до него дотронешься шариком? Он просто посылает двери сообщение &lsquo;<samp>open</samp>&rsquo;. Другие переключатели могут посылать сообщение &lsquo;<samp>on</samp>&rsquo; (&quot;включиться&quot;) лазеру, или &lsquo;<samp>ignite</samp>&rsquo; (&quot;загореться&quot;) объекту <a href="#it_005fdynamite">it_dynamite</a>. При взрыве динамит в свою очередь пошлёт сообщение &lsquo;<samp>ignite</samp>&rsquo; соседним участкам решётки.
</p>
<p>Сообщение &mdash; это простая универсальная функция или, с точки зрения объекта-получателя и автора уровня, &quot;метод&quot;. Он может принимать два аргумента &mdash; имя сообщения, строка и необязательное значение, Например:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">mydoor:message(&quot;open&quot;)
myboulder:message(&quot;orientate&quot;, NORTH)

mydoor:open()
myboulder:orientate(NORTH)
</pre></td></tr></table>

<p>Последние два примера &mdash; это стандартное сокращение первых двух.
</p>
<p>Сообщения могут возвращать значения. Но большинство сообщений возвращают просто &lsquo;<samp>nil</samp>&rsquo;.
</p>
<p>Сообщение можно послать любому объекту. Неподдерживаемые сообщения игнорируются без видимых результатов. В силу этого взрывающийся динамит может посылать сообщение &lsquo;<samp>ignite</samp>&rsquo; соседним секциям, не имея сведений о том, могут ли объекты вообще загораться. Так что динамиту совершенно не важны получатели сообщения. В силу специфики сообщений их отправители и получатели полностью разъединены в том, что касается кода. Таким образом, автору уровня необходим только один метод, позволяющий посылать произвольные сообщения произвольным объектам.
</p>
<p>Не посылайте сообщений при инициализации уровня. Переключатель можно запрограммировать на отправление двери сообщения &lsquo;<samp>open</samp>&rsquo; при помощи цели-действия (см. раздел <a href="#Target-_002d-Action">Цель-действие</a>). С помощью функции обратного вызова Lua (см. раздел <a href="#Callback-Function">Функция обратного вызова</a>) можно послать сообщение любому объекту во время его функционирования.
</p>
<p>В главе <a href="#Common-Messages">Общие сообщения</a> и последующих главах перечислены и описаны все сообщения.
</p>
<hr size="6">
<a name="Target-_002d-Action"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Messages" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Callback-Function" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Methods-of-Interaction" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Target-_002d-Action-1"></a>
<h3 class="subsection">4.3.2 Цель-действие</h3>

<a name="index-target-action-paradigm"></a>
<p>&quot;Механизм цели-действия&quot; &mdash; это классический объектно-ориентированный метод, позволяющий легко связывать объекты. Один объект активируется вызовом функции или событием (например, актёр, дотрагивающийся до камня, проходящий над предметом либо задействующий его). Вам необходимо просто связать этот объект с другим целевым объектом и приказать ему отправить сообщение о действии. Каждый раз, когда первый объект активируется, он будет посылать сообщение своей цели.
</p>
<p>Задать &quot;цель-действие&quot; можно с помощью атрибутов &lsquo;<samp>target</samp>&rsquo; и &lsquo;<samp>action</samp>&rsquo;, применённых к первому объекту. Например, чтобы переключатель открыл дверь, которой присвоено имя &lsquo;<samp>mydoor</samp>&rsquo;, можно написать:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">{st_switch, target=&quot;mydoor&quot;, action=&quot;open&quot;}
</pre></td></tr></table>

<p>Объекты, такие как переключатели, можно включать и выключать. Каждый раз они будут совершать какое-либо действие. Если требуется, чтобы дверь открывалась и закрывалась по команде переключателя, понадобится не &lsquo;<samp>open</samp>&rsquo;, а другое действие. Универсальным сообщением, чередующим состояния целевых объектов, является &lsquo;<samp>toggle</samp>&rsquo;.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">{st_switch, target=&quot;mydoor&quot;, action=&quot;toggle&quot;}
{st_switch, target=&quot;mydoor&quot;}
</pre></td></tr></table>

<p>Теперь дверь будет поочередно открываться и закрываться при активации переключателя. Сообщение <a href="#toggle">toggle</a> может быть использовано независимо от целевого объекта. Фактически оно является сообщением о действии, которое используется по умолчанию. Таким образом, его можно и не указывать, что было продемонстрировано во втором примере.
</p>
<p>Но помните, что это сообщение только чередует состояния целевого объекта. Если вначале переключатель у вас будет выключен, а дверь открыта, то при его включении дверь закроется. Они не будут синхронизированы. Если создать два переключателя, целью которых является одна и та же дверь, то между положением переключателя и состоянием двери не будет прямой зависимости.
</p>
<p>Как вы помните, сообщения могут принимать значения. Сообщения о действиях не исключение. Каждый объект отправляет свое действие с некоторым значением, обычно булевым. Переключатель посылает значение &lsquo;<samp>true</samp>&rsquo;, если его включить, и &lsquo;<samp>false</samp>&rsquo;, если его выключить. Подходящим сообщением для двери будет универсальное сообщение &lsquo;<samp>signal</samp>&rsquo;:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">{st_switch, target=&quot;mydoor&quot;, action=&quot;signal&quot;}
</pre></td></tr></table>

<p>Теперь дверь будет открываться при включении переключателя и закрываться при его выключении.
</p>
<p>Сообщение <a href="#signal">signal</a> принимает целочисленное значение &lsquo;<samp>0</samp>&rsquo; или &lsquo;<samp>1</samp>&rsquo;. Действительно, значение действия не совпадает. Но, как и во многих других случаях, сообщения и значения сконструированы таким образом, что они автоматически преобразуются к необходимому типу. Эта совместимость является основой для лёгкого объединения объектов.
</p>
<p>Во многих случаях перед авторами встаёт необходимость активировать одним объектом несколько других объектов. Как &lsquo;<samp>target</samp>&rsquo;, так и &lsquo;<samp>action</samp>&rsquo; могут принимать несколько значений.  &lsquo;<samp>target</samp>&rsquo; относится к значению типа &quot;метка&quot; (см. раздел <a href="#Object-Attributes">Атрибуты объектов</a>), в то время как &lsquo;<samp>action</samp>&rsquo; может быть строкой или списком строк.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">{st_switch, target={grp(ojb1, obj2, obj3), &quot;mydoor&quot;, myobject, &quot;anotherdoor&quot;},
            action={&quot;toggle&quot;,              &quot;open&quot;,   &quot;turn&quot;,   &quot;close&quot;}}
</pre></td></tr></table>

<p>Все объекты, описанные при помощи метки, получают сообщение в списке действий. Если перечислено недостаточно сообщений, то будет послано действие по умолчанию &lsquo;<samp>toggle</samp>&rsquo;.
</p>
<p>Обычно действия совершаются сразу же. Это очень важно, поскольку порядок действий часто играет большую роль. К примеру, ящик <a href="#st_005fbox">st_box</a> сдвигается с одного триггера <a href="#it_005ftrigger">it_trigger</a> на соседний или просто шарик <a href="#ac_005fmarble">ac_marble</a> перемещается с первого триггера на соседний. В обоих случаях важно, чтобы первый триггер был отпущен до того, как будет нажат второй. Если эта последовательность изменяется так, что оба триггера одновременно могут быть нажаты одним объектом, то это может стать огромной дырой в балансе уровня. Поэтому все действия производятся в логичной и стабильно повторяющейся последовательности без намёка на случайность.
</p>
<p>Действия представляют собой простые, а иногда и очень сложные изменения в мире. Но в любом случае <b>даже не думайте</b> &lsquo;<samp>уничтожать</samp>&rsquo; (&lsquo;<samp>kill</samp>&rsquo;) объект-отправитель. Уничтожение отправителя может обрушить приложение! Следите за тем, чтобы даже объединённые в цепочку действия не могли уничтожить своего объекта-отправителя. Поэтому триггер (<a href="#it_005ftrigger">it_trigger)</a>, который переключает выключатель <a href="#st_005fswitch">st_switch</a>, который в свою очередь уничтожает первый триггер, так же опасен, как и триггер уничтожающий сам себя. Мы не советуем уничтожать какой-либо объект, используя его собственное действие, поскольку его уничтожение не будет анимироваться, а кроме того, будет нарушен принцип WYSIWYG (&quot;Что Ты Видишь, То Ты И Получишь&quot; &mdash; прим. перев.). Но если это просто необходимо для соблюдения игровой логики, такое действие можно осуществить в безопасном, отсроченном режиме. Просто добавьте к уничтожаемому объекту атрибут <a href="#safeaction">safeaction</a> со значением &lsquo;<samp>true</samp>&rsquo;. С этого момента действия будут производиться не мгновенно, а с минимальной задержкой, таким образом, чтобы никогда не обрушить приложение. Но помните, что даже минимальная задержка, не выходящая за пределы соответствующего отрезка времени, может нарушить последовательность действий, приведя к неожиданным результатам.
</p>
<hr size="6">
<a name="Callback-Function"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Target-_002d-Action" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Object-State" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Methods-of-Interaction" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Callback-Function-1"></a>
<h3 class="subsection">4.3.3 Функция обратного вызова</h3>

<a name="index-Callback-Function"></a> <a name="index-callback-function"></a>
<p>Функции обратного вызова &mdash; самое мощное расширение парадигмы <a href="#Target-_002d-Action">Цель-действие</a>, которое только можно себе представить. Вместо целевого объекта в качестве получателя сообщения о действии можно использовать встроенную в <a href="http://www.lua.org">Lua</a> функцию, которая вызывается всякий раз, когда запрашивается действие.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">{&quot;st_switch&quot;, target=&quot;my_magic&quot;, action=&quot;callback&quot;}
{&quot;st_switch&quot;, target=&quot;my_magic&quot;}
</pre></td></tr></table>

<p>&lsquo;<samp>target</samp>&rsquo; &mdash; это строка, состоящая из имени функции. Для уточнения можно присвоить параметру &lsquo;<samp>action</samp>&rsquo; строку &lsquo;<samp>&quot;callback&quot;</samp>&rsquo;, но, как видно из второго примера, это необязательно. Движок определяет, что типом цели является  функция Lua, а значит действие должно быть возвращаемым. Однако вы должны следить, чтобы имена всех объектов и функций обратного вызова были уникальны.
</p>
<p>Давайте посмотрим на синтаксис типичной функции обратного вызова:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">function my_magic(value, sender)
    if value == true then
        wo[sender + {1,0}] = {&quot;it_coin_s&quot;}
    end
end
</pre></td></tr></table>

<p>Функция вызывается с двумя аргументами. Первый &mdash; значение. Его тип и содержимое зависит от конечного объекта, но в большинстве случаев это булево значение. Описание значения можно найти в описании объектов. Второй аргумент &mdash; ссылка на вызывающий объект.
</p>
<p>В приведённом примере мы проверяем, был ли <a href="#st_005fswitch">st_switch</a> только что переведён в состояние &quot;включен&quot; (ON). Если так оно и есть, берём за точку отсчёта переключатель, который представляет собой отправителя, и размещаем к востоку от него монету <a href="#it_005fcoin">it_coin</a> &mdash; небольшой банкомат для снятия денег со счёта.
</p>
<p>В разделе <a href="#Advanced-Lua-Examples">Примеры сложных уровней на языке Lua</a> будут приведены примеры по-настоящему мощных функций обратного вызова с комментариями к каждой строке.
</p>
<p>Описание дальнейшего использования и других аспектов обратных вызовов приведены в разделе <a href="#Callbacks-and-Load-Balancing">Обратные вызовы и таймеры</a>.
</p>
<hr size="6">
<a name="Object-State"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Callback-Function" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#The-Lifecycle-of-a-Level" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Methods-of-Interaction" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Object-State-1"></a>
<h3 class="subsection">4.3.4 Состояние объекта</h3>

<p>Ключевым понятием в объединении объектов, таких как переключатели и двери, являются простейшие механизмы состояния этих объектов. Большинство объектов описываются при помощи простых механизмов состояния, включающих только два состояния, такие как &lsquo;<samp>ON</samp>&rsquo;,&lsquo;<samp>OFF</samp>&rsquo; или &lsquo;<samp>OPEN</samp>&rsquo;, &lsquo;<samp>CLOSED</samp>&rsquo;. Эти объекты можно связать несколькими общими сообщениями. Кроме того, эти простейшие механизмы состояния подстраиваются под игроков, которые хотят не читать руководства, а исследовать объекты в самой игре.
</p>
<p>Хотя состояниям обычно присваиваются имена, состоящие из прописных букв (см. примеры выше), состояния &mdash; это целые числа, начиная с &lsquo;<samp>0</samp>&rsquo;, который обычно соответствует состоянию по умолчанию. Но некоторые объекты в силу исторических причин используют другие привязки. Так, для состояний, связанных с направлением, состоянием по умолчанию обычно является &lsquo;<samp>3</samp>&rsquo;, соответствующее направлению &lsquo;<samp>NORTH</samp>&rsquo; (&quot;север&quot;), а прочие состояния нумеруются по часовой стрелке вплоть до &lsquo;<samp>0</samp>&rsquo;, соответствующего направлению &lsquo;<samp>WEST</samp>&rsquo; (&quot;запад&quot;).
</p>
<p>В большинстве случаев достаточно выполнить независимое от состояния общее действие, такое как <a href="#toggle">toggle</a>. Даже два уже заданных объекта можно легко синхронизировать стандартным действием <a href="#signal">signal</a>. Но иногда может понадобиться осуществить действие, находящееся в очень сильной зависимости от состояния. Рассмотрим, как это можно сделать.
</p>
<p>Возьмём, к примеру, <a href="#st_005ffourswitch">st_fourswitch</a>, у которого есть четыре состояния, и два объекта <a href="#st_005flaser">st_laser</a>, каждый из которых может быть как включен, так и выключен. Каждый из лазеров светится в трёх из четырёх состояний четырёхпозиционного переключателя. Но один из них выключается, когда переключатель находится в положении &lsquo;<samp>EAST</samp>&rsquo; (&quot;восток&quot;), а другой &mdash; в положении &lsquo;<samp>WEST</samp>&rsquo; (&quot;запад&quot;). Это можно сделать при помощи следующих зависимых от состояния целей и действий:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">{st_fourswitch, target_3=&quot;laser#2&quot;, action_3=&quot;on&quot;,
                target_2=&quot;laser#1&quot;, action_2=&quot;off&quot;,
                target_1=&quot;laser#1&quot;, action_1=&quot;on&quot;,
                target_0=&quot;laser#2&quot;, action_0=&quot;off&quot;}
</pre></td></tr></table>

<p>Добавив число в качестве суффикса к &lsquo;<samp>target_</samp>&rsquo; и &lsquo;<samp>action_</samp>&rsquo;, можно получить специальные атрибуты цели и действия, которые будут обладать приоритетом перед общими атрибутами &lsquo;<samp>target</samp>&rsquo; и &lsquo;<samp>action</samp>&rsquo;, если значение состояния равно указанному в суффиксе номеру. Альтернативным объявлением будет следующее:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">{st_fourswitch, target={&quot;laser#1&quot;, &quot;laser#2&quot;},
              action_3={&quot;nop&quot;,     &quot;on&quot;},
              action_2={&quot;off&quot;,     &quot;nop&quot;},
              action_1={&quot;on&quot;,      &quot;nop&quot;},
              action_0={&quot;nop&quot;,     &quot;off&quot;}}
</pre></td></tr></table>

<p>Здесь мы обращаемся к обоим лазерам во всех состояниях. Но один из них получает сообщение <a href="#nop">nop</a>, которое означает &quot;операция отсутствует&quot;. Фактически данное сообщение никогда не посылается. Это просто формальное сообщение, которое в приведённом выше случае нам необходимо использовать из-за требований синтаксиса.
</p>
<p>Рассмотрим другой пример: два объекта <a href="#it_005ftrigger">it_trigger</a>, включающие лазер. При нажатии на первый триггер лазер должен включиться, а при нажатии на второй &mdash; выключиться. Но у триггера есть два состояния, и он выполняет одно действие, если на него нажать, и другое, если его отпустить. Таким образом, нам необходимо заблокировать действия, осуществляемые, если отпустить триггер:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">{it_trigger, name=&quot;on_trigger&quot;,  target=&quot;laser#1&quot;, action_1=&quot;on&quot;, action_0=&quot;nop&quot;}
{it_trigger, name=&quot;off_trigger&quot;, target=&quot;laser#1&quot;, action_1=&quot;off&quot;, action_0=&quot;nop&quot;}
</pre></td></tr></table>

<p>Блокировка &lsquo;<samp>action_0</samp>&rsquo; очень важна, и её нельзя пропускать, так как в этом случае будет осуществлено действие по умолчанию. Это будет сообщение &lsquo;<samp>toggle</samp>&rsquo;, которое включит лазер.
</p>
<p>Так как этот полезный механизм, действующий по умолчанию, может и помешать, сообщение по умолчанию можно отключить, установив для атрибута <a href="#nopaction">nopaction</a> значение &lsquo;true&rsquo;.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">{it_trigger, name=&quot;on_trigger&quot;,  target=&quot;laser#1&quot;, action_1=&quot;on&quot;, nopaction=true}
{it_trigger, name=&quot;off_trigger&quot;, target=&quot;laser#1&quot;, action_1=&quot;off&quot;, nopaction=true}
</pre></td></tr></table>

<p>Когда объект удаляется с триггера, будет выполнено действие, соответствующее состоянию &lsquo;<samp>0</samp>&rsquo;. Так как ни &lsquo;<samp>action_0</samp>&rsquo;, ни &lsquo;<samp>action</samp>&rsquo; не определены, будет выполнено действие по умолчанию, в данном случае &lsquo;<samp>nop</samp>&rsquo;.
</p>
<p>Заглянув в код C++, можно заметить, что у многих объектов значительно более сложные механизмы состояния, чем могут предполагать авторы уровней и игроки. Это происходит из-за использования анимации, таймеров и т. д. На набор внутренних состояний объектов C++ накладывается куда более простой набор внешних состояний. Это главная причина того, почему некоторые характеристики, предлагаемые авторами уровней, не могут быть осуществлены в Lua API.
</p>

<hr size="6">
<a name="The-Lifecycle-of-a-Level"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Object-State" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Library-Preloading" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="The-Lifecycle-of-a-Level-1"></a>
<h2 class="section">4.4 Жизненный цикл уровня</h2>


<p>Загрузка уровня по принципу снимка, инициализация, обратные вызовы во время выполнения, условия завершения &mdash; загадка оксидов и медитации
</p><table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Library-Preloading">4.4.1 Предварительная загрузка библиотек</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Snapshot-Principle">4.4.2 Принцип снимка</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Level-Initialization">4.4.3 Инициализация уровня</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Object-Transformation">4.4.4 Преобразование объекта</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         Передача сущности при трансформациях
</td></tr>
<tr><td align="left" valign="top"><a href="#Named-Positions">4.4.5 Именованные позиции</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">               Позиции как потомки уничтоженных покрытий
</td></tr>
<tr><td align="left" valign="top"><a href="#Callbacks-and-Load-Balancing">4.4.6 Обратные вызовы и таймеры</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Level-Restart">4.4.7 Перезапуск уровня</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Ending-Conditions">4.4.8 Условия завершения</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">             Медитация и пары оксидов
</td></tr>
</table>

<hr size="6">
<a name="Library-Preloading"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#The-Lifecycle-of-a-Level" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Snapshot-Principle" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#The-Lifecycle-of-a-Level" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Library-Preloading-1"></a>
<h3 class="subsection">4.4.1 Предварительная загрузка библиотек</h3>

<hr size="6">
<a name="Snapshot-Principle"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Library-Preloading" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Level-Initialization" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#The-Lifecycle-of-a-Level" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Snapshot-Principle-1"></a>
<h3 class="subsection">4.4.2 Принцип снимка</h3>

<p>Большинство уровней содержит объекты, влияющие друг на друга. Переключатель может открывать и закрывать дверь при помощи &quot;цели-действия&quot; (см. раздел <a href="#Target-_002d-Action">Цель-действие</a>), шарик может нажать на триггер, а лазер может активировать лазерный переключатель или превратить молоток в меч. Естественно, вам необходимо знать, как можно получить желаемую конфигурацию объектов, чтобы они не претерпевали непредусмотренные изменения при инициализации уровня.
</p>
<p>Принцип снимка &mdash; это простое практическое правило, на которое можно положиться, описывая уровень как снимок объектов в данный момент времени. Каждый объект необходимо настраивать так, как он должен быть настроен в данный момент времени. Все взаимодействия, имеющие место во время игры, не осуществляются при размещении объектов во время инициализации.
</p>
<p>Например, если переключатель должен открывать и закрывать дверь и переключатель в начале уровня должен быть включен, а дверь открыта, объект необходимо описывать именно с такими атрибутами:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">{&quot;st_switch&quot;, target=&quot;mydoor&quot;, state=ON}
{&quot;st_door&quot;, name=&quot;mydoor&quot;, state=OPEN}
</pre></td></tr></table>

<p>Если включённый лазер направлен на лазерный переключатель, то переключатель должен быть изначально активирован. Но, конечно, атрибута, позволяющего предварительно активировать лазерный переключатель, не существует. Принцип снимка включает в себя правило, что все внутренние состояния обновляются без внешних действий. Это означает, что переключатель будет находиться в активированном состоянии в начале уровня, не давая команду своей цели осуществить действие.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">{&quot;st_laser&quot;, state=ON}
{&quot;st_laserswitch&quot;, target=&quot;mydoor&quot;}
</pre></td></tr></table>

<p>Теперь рассмотрим объекты, трансформирующиеся под воздействием лазера. Принцип снимка не даёт объектам трансформироваться во время инициализации. Молоток, который находится на пути у лазерного луча, не превратится в меч при инициализации уровня. Он останется молотком и сможет превратиться в меч при повторном воздействии лазера во время игры.
</p>
<p>Описания невозможных начальных состояний уровня, конечно, не допускаются. Такие объекты, как динамитные шашки, немедленно взрываются под воздействием лазерного луча. Таким образом, динамит на пути у лазерного луча в начале уровня &mdash; это ошибка, вызывающая исключение. Принцип снимка заставляет в этом случае поместить на уровне объект, отвечающий за реализацию взрыва (it_explosion), вместо динамита.
</p>
<p>Некоторые объекты всё же осуществляют трансформации внутреннего состояния, которые невозможно задать атрибутами. Но некоторые из этих состояний могут представлять интерес при описании снимка уровня. Везде, где возможно, существуют особые подтипы объектов с суффиксом &lsquo;<samp>_new</samp>&rsquo;. Эти объекты могут быть использованы при первоначальном описании уровня, чтобы разместить объекты с особыми начальными состояниями. Такой подтип существует, например, для <a href="#it_005fblocker">it_blocker</a>. Обратите внимание, что такие объекты никогда не возвратят свой первоначальный подтип при запросе типа, поскольку они начинают своё существование как стандартные объекты.
</p>

<hr size="6">
<a name="Level-Initialization"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Snapshot-Principle" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Object-Transformation" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#The-Lifecycle-of-a-Level" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Level-Initialization-1"></a>
<h3 class="subsection">4.4.3 Инициализация уровня</h3>

<p>Определившись с тем, что должно быть предварительно загружено и в каком состоянии должны появиться определённые объекты, наступило время взглянуть на то, как обрабатывается код уровня. Основная проблема состоит в том, чтобы гарантировать, что все связанные части заранее будут правильно настроены.
</p>
<p>Перед выполнением первой строки кода мир существует просто как абстрактное вместилище, а не как массив-решётка, способный принимать объекты. Поэтому первые строки кода должны настроить все <a href="#Global-Attributes">Глобальные атрибуты</a>, необходимые значения которых отличаются от значений по умолчанию. Не смотря на то, что многие атрибуты впоследствии можно настроить и изменить даже во время выполнения, существуют такие атрибуты как <a href="#ProvideExtralifes">ProvideExtralifes</a>, который имеет смысл устанавливать, только перед созданием мира, или <a href="#MaxOxydColor">MaxOxydColor</a>, который следует устанавливать перед его первым использованием. Мы рекомендуем выносить настройку всех глобальных атрибутов в самое начало уровня.
</p>
<p>Вторым участком в коде уровня должно стать описание секций. Поскольку эти строки кода просто описание, они не размещают объекты в мире,  зависят только от глобальных атрибутов и могут ссылаться друга на друга. Их перечисление в одном участке кода упрощает обзор кода и помогает избежать конфликтов зависимостей.
</p>
<p>При использовании преобразований (см. разд. <a href="#Resolvers">Преобразования</a>) их описания следует поместить в следующий участок кода, поскольку они могут обращаться к секциям и глобальным атрибутам, а значит должны быть созданы перед созданием мира.
</p>
<p>Главное выражение в любом уровне &mdash; это <a href="#World-Creation">Создание мира</a>. Оно задаёт размеры мира и располагает предметы в пределах решётки мира, согласно заданным описаниям секций. Хотя позже можно свободно добавить или изменить любой из объектов, размеры мира фиксированы и неизменны.
</p>
<p>Поэтому следующие строки кода должны добавлять (<a href="#add">add</a>) другие объекты, рисовать дополнительные карты объектов или дополнять некоторые объекты. Общеупотребительным выражением подобного дополнения является метод <a href="#shuffleOxyd">shuffleOxyd</a>. Для того, чтобы перекрасить и перемешать оксиды (<a href="#st_005foxyd">st_oxyd</a>), ему необходимо знать о всех оксидах на уровне. Ещё одним примером дополнения можно считать генерирование требуемого лабиринта, которое придаёт карте уровня форму лабиринта (см. раздел <a href="#res_002emaze">res.maze</a>).
</p>
<p>Код, следующий после создания мира, также может включать циклы или даже несколько локальных функций, которые должны быть объявлены перед включением в код. Пожалуйста, помещайте такие функции недалеко от места их использования и внутри того же участка кода.
</p>
<p>Другой набор функций, которые могут быть добавлены &mdash; <a href="#Callbacks-and-Load-Balancing">Функции обратного вызова</a>. Мы советуем добавлять эти функции в последней секции кода, потому что они не вызываются непосредственно во время инициализации уровня.
</p>
<p>Однако существует одно особое исключение. Функция обратного вызова <code>postinit()</code> вызывается после того, как выполнился код инициализации уровня и завершились все последующие инициализации внутри движка. Если эта функция присутствует в уровне, то она выполняется непосредственно перед обработкой первого события перемещения мыши. А значит, при использовании этой функции можно быть уверенным, что все объекты находятся в своём окончательном состоянии. Перед использованием функции обратного вызова <code>postinit()</code> её следует поместить после всего кода инициализации уровня, но перед остальными функциями обратного вызова, которые будут исполняться при последующих событиях.
</p>
<hr size="6">
<a name="Object-Transformation"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Level-Initialization" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Named-Positions" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#The-Lifecycle-of-a-Level" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Object-Transformation-1"></a>
<h3 class="subsection">4.4.4 Преобразование объекта</h3>

<p>Во время игры некоторые объекты Enigma преобразуются в другие объекты-потомки, такие как <a href="#st_005fblocker">st_blocker</a>/<a href="#it_005fblocker">it_blocker</a>, <a href="#st_005fbrake">st_brake</a>/<a href="#it_005fbrake">it_brake</a>, <a href="#it_005frubberband">it_rubberband</a>/<a href="#ot_005frubberband">ot_rubberband</a>, <a href="#it_005fhammer">it_hammer</a>/<a href="#it_005fsword">it_sword</a> и т. д.
</p>
<p>Не смотря на то, что у объекта-потомка могут быть другие атрибуты, некоторые атрибуты, и в частности пользовательские атрибуты, необходимо сохранить. Имена объектов, их атрибуты цели и действия и все атрибуты, начинающиеся со знака подчеркивания (&lsquo;<samp>_</samp>&rsquo;) &mdash; пользовательские атрибуты &mdash; наследуются объектом-потомком. Поэтому потомок объекта может точно так же получать сообщения в качестве цели, как и ранее существовавший на его месте объект, и к нему можно обратиться, используя его старое имя.
</p>
<hr size="6">
<a name="Named-Positions"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Object-Transformation" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Callbacks-and-Load-Balancing" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#The-Lifecycle-of-a-Level" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Named-Positions-1"></a>
<h3 class="subsection">4.4.5 Именованные позиции</h3>

<p>Многие камни можно перемещать и, даже если пользователь не может оттолкнуть их, большинство может поменяться местами с рядом стоящим обменным камнем. Актёры могут поднимать предметы, которые могут быть уничтожены во всепоглощающем пламени. Поэтому в большинстве случаев, предпочтительно помечать на полу якоря или формы. В каждой ячейке решётки существует объект покрытия, который намного стабильнее всех остальных объектов. Тем не менее, пользователь может сбросить в воду (<a href="#fl_005fwater">fl_water</a>) или бездну (<a href="#fl_005fabyss">fl_abyss</a>) ящик (<a href="#st_005fbox">st_box</a>), камень-головоломку (<a href="#st_005fpuzzle">st_puzzle</a>) или другой строительный камень. Более того, пользователь может оставить зажжённую бомбу (<a href="#it_005fbomb">it_bomb</a>), которая разрушит покрытие и оставит на его месте бездну (<a href="#fl_005fabyss">fl_abyss</a>). В любом из этих случаев можно лишиться именованного якоря или важной части именованной области решётки, доступной в виде группы объектов.
</p>
<p>Поэтому позиция каждого уничтоженного именованного покрытия остаётся в хранилище под своим именем. Чтобы получить позицию любого возможного покрытия, вместо именованных объектов следует запрашивать именованные позиции.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">ti[&quot;~&quot;] = {&quot;fl_water&quot;, &quot;water#&quot;}
...
function sweet()
    wo[po[&quot;water#*&quot;]] = {&quot;it_cherry&quot;}
end
</pre></td></tr></table>

<p>Следует отметить, что наряду со всеми позициями именованных объектов, удовлетворяющих шаблону на запрос именованной позиции будут выданы именованные позиции уничтоженных покрытий.
</p>
<hr size="6">
<a name="Callbacks-and-Load-Balancing"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Named-Positions" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Level-Restart" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#The-Lifecycle-of-a-Level" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Callbacks-and-Load-Balancing-1"></a>
<h3 class="subsection">4.4.6 Обратные вызовы и таймеры</h3>

<p>Наиболее гибким свойством, позволяющим автору обеспечить уникальное поведение уровня, являются <a href="#Callback-Function">функции обратного вызова</a>.
</p>
<p><a href="#Target-_002d-Action">Цели-действия</a> убивают предупреждающий <a href="#ot_005ftimer">ot_timer</a>.
</p>
<p>Глобальные функции и функция res.*.
</p>
<hr size="6">
<a name="Level-Restart"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Callbacks-and-Load-Balancing" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Ending-Conditions" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#The-Lifecycle-of-a-Level" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Level-Restart-1"></a>
<h3 class="subsection">4.4.7 Перезапуск уровня</h3>

<hr size="6">
<a name="Ending-Conditions"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Level-Restart" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Lua-API" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#The-Lifecycle-of-a-Level" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Ending-Conditions-1"></a>
<h3 class="subsection">4.4.8 Условия завершения</h3>

<p>Теперь нам необходимо ответить на два важных вопроса: когда и при каких условиях уровень будет являться успешно завершённым? Как можно объявить медитативный уровень в противоположность стандартному уровню, основанному на открытии пар оксидов.
</p>
<p>Флаг &quot;медитации&quot; по сути отсутствует как в <a href="#Info-metadata">информации о метаданных </a>, так и среди <a href="#Global-Attributes">глобальных атрибутов</a>. Это означает, что формальное разграничение между двумя видами уровней отсутствует. Но есть два вида условий завершения. Оба проверяются постоянно и первое выполненное условие приводит к завершению уровня. Таким образом, Enigma даёт возможность писать действительно гибридные уровни, в которых присутствуют как объекты <a href="#st_005foxyd">st_oxyd</a>, так и <a href="#it_005fmeditation">it_meditation</a>, позволяя пользователю решить уровень двумя абсолютно различными способами.
</p>
<p>Главный способ закончить игру &mdash; это выполнить условие открытия пар оксидов:
</p>
<p>игра считается завершённой после того, как пользователь попарно откроет все стандартные окрашенные пары камней <a href="#st_005foxyd">st_oxyd</a>.
</p>
<p>Соответственно, подразумевается, что на уровне имеется по крайней мере одна пара стандартных окрашенных оксидов и что для всех оксидов одного цвета имеется чётное количество экземпляров. В то время как в стандартном уровне всегда будет хотя бы одна пара оксидов, за количеством экземпляров бывает трудно уследить. Поэтому движок постоянно проверяет во время выполнения, является ли количество экземпляров оксидов каждого цвета чётным. Нарушение данного условия приведёт к ошибке. Если вы добавляете или удаляете оксиды на уровне, эту проверку необходимо отключить, установив для атрибута <a href="#AllowSingleOxyds">AllowSingleOxyds</a> значение <code>true</code>. Теперь ответственность за возможность решения уровня несёте вы и добавлять или удалять оксиды вы должны только попарно.
</p>
<p>Вторым способом завершения игры является выполнение условия медитации:
</p>
<p>все объекты <a href="#ac_005fpearl">ac_pearl</a> должны находиться в течение не менее чем одной секунды в неровностях <a href="#it_005fmeditation">it_meditation</a>, все <a href="#it_005fmeditation">it_meditation</a>, помеченные как <code>essential</code>, должны быть заняты, и количество <a href="#ac_005fpearl">ac_pearl</a> должно быть равно количеству занятых <a href="#it_005fmeditation">it_meditation</a>.
</p>
<p>Опять же, это подразумевает, что на уровне существует по крайней мере один объект <a href="#ac_005fpearl">ac_pearl</a> и что в одном и том же объекте <a href="#it_005fmeditation">it_meditation</a> не могут одновременно находиться две жемчужины. На уровне должно находиться не меньше объектов <a href="#it_005fmeditation">it_meditation</a>, чем на нём есть <a href="#ac_005fpearl">ac_pearl</a>; объектов <a href="#it_005fmeditation">it_meditation</a> может быть и больше, если они не отмечены как <code>essential</code>. Избыток объектов <a href="#it_005fmeditation">it_meditation</a> может легко получиться в результате взрывов <a href="#it_005fdynamite">it_dynamite</a>.
</p>
<p>На уровне, который необходимо решить, выполнив условие медитации, могут находиться объекты <a href="#st_005foxyd">st_oxyd</a>; установив для атрибута <a href="#AllowSingleOxyds">AllowSingleOxyds</a> значение <code>true</code>, можно добавить на уровень нечётное количество оксидов одного цвета. С другой стороны, на уровень, который должен быть решён путём выполнения условия открытых пар оксидов, можно добавить <a href="#ac_005fpearl">ac_pearl</a>. Но необходимо внимательно следить, чтобы пользователь не мог поместить жемчужины в имеющиеся объекты <a href="#it_005fmeditation">it_meditation</a> и чтобы он не мог создать новые объекты <a href="#it_005fmeditation">it_meditation</a> при помощи <a href="#it_005fdynamite">it_dynamite</a>. Непредусмотренных решений можно избежать, отметив в качестве <code>essential</code> большее количество объектов <a href="#it_005fmeditation">it_meditation</a>, чем на уровне имеется <a href="#ac_005fpearl">ac_pearl</a>.
</p>
<p>Уровень, который изначально позволяет пользователю выполнить оба условия завершения, называется гибридным.  Конечно же, предусмотреть равноценные решения для обоих подходов &mdash; нелёгкая задача.
</p>
<p>Вне зависимости от типа условий завершения все актёры, отмеченные как <code>essential</code>, должны оставаться в живых в момент выполнения этих условий. Автор также может позволить пользователю пожертвовать актёром, чтобы выполнить условия завершения, установив для атрибута <a href="#SurviveFinish">SurviveFinish</a> значение <code>false</code> (подобная опция в основном необходима для поддержания совместимости с уровнями, написанными для предыдущих версий, но её также можно использовать и для новых уровней при условии их тщательного планирования).  В этом случае шарик может разбиться, но условие всё равно будет выполнено. Конечно же, актёры, указанные как <code>essential</code>, не могут разбиться заранее, поскольку после того, как такой актёр будет уничтожен, в случае, если его нельзя воскресить, уровень будет перезапущен.
</p>
<hr size="6">
<a name="Lua-API"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Ending-Conditions" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Basic-Lua-Examples" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Enigma-Paradigm" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Lua-API-1"></a>
<h1 class="chapter">5. Lua API</h1>

<p>Теперь, после изучения основных принципов мира уровней Enigma, осталось лишь разобраться языком программирования, чтобы приступить к написанию своего первого уровня. Уровни Enigma написаны на языке <a href="http://www.lua.org">Lua</a> 5.1.4. Этот мощный язык позволяет вам писать самые сложные, динамические уровни и в то же время он достаточно понятен для того, чтобы написать простые стандартные уровни. Действительно, зачем в самом начале копаться в тонкостях языка?
</p>
<p>Для второй версии Lua API (интерфейс программирования приложений Lua), используемой в Enigma 1.10, мы разработали более оптимальный подход к описанию уровней, который позволяет сделать его кратким и легко читаемым. Поэтому мы познакомим вас с этим API, разобрав несколько примеров, начиная с простого уровня и заканчивая самыми настоящими захватывающими динамическими уровнями Enigma. Свои первые эксперименты можно начать уже после ознакомления с первым примером и пояснениями к нему.
</p>
<p>Чтобы вам было удобно, код Lua мы будем выделять цветом. Предопределённые (или встроенные) переменные и функции Lua мы будем выделять зелёным цветом. Встроенные строковые константы Enigma, такие как типы объектов или названия атрибутов и сообщений, выделяются синим. Названия переменных и их значения, относящиеся только к какому-то конкретному уровню, окрашены в пурпурный цвет.
</p>
<p>После разбора примеров и краткого обзора мы подробно рассмотрим особенности API языка, ведь это как раз то, что каждый ожидает увидеть в справочном руководстве. Пожалуйста, обратите внимание на то, что <a href="#Advanced-Features">Дополнительные возможности</a> описаны в отдельной главе.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Basic-Lua-Examples">5.1 Примеры простых уровней на языке Lua</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#API-2-Overview">5.2 Обзор API 2</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Advanced-Lua-Examples">5.3 Примеры сложных уровней на языке Lua</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Introduction-to-Datatypes">5.4 Введение в типы данных</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Position">5.5 Позиция</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Object">5.6 Объект</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Group">5.7 Группа</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#NamedObjects">5.8 NamedObjects</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#PositionList">5.9 PositionList</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Positions-Repository">5.10 Хранилище позиций</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Tile-and-Object-Declaration">5.11 Описание секций и объектов</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Tiles-Repository">5.12 Хранилище секций</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#World">5.13 Мир</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Functions">5.14 Функции</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
</pre></th></tr></table>


<hr size="6">
<a name="Basic-Lua-Examples"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Lua-API" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Basic-Example" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Basic-Lua-Examples-1"></a>
<h2 class="section">5.1 Примеры простых уровней на языке Lua</h2>

<p>Давайте рассмотрим два простых одноэкранных уровня, в которых используются все основополагающие принципы. В то время как первый уровень, созданный только для примера, немного искусственный, второй &mdash; довольно динамичный уровень, который можно найти в пакетах уровней Enigma.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Basic-Example">5.1.1 Простой пример</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Colored-Turnstiles">5.1.2 Colored Turnstiles</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         Пакет уровней Enigma VIII, уровень #?
</td></tr>
</table>

<hr size="6">
<a name="Basic-Example"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Basic-Lua-Examples" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Colored-Turnstiles" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Basic-Lua-Examples" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Basic-Example-1"></a>
<h3 class="subsection">5.1.1 Простой пример</h3>

<p>Давайте взглянем на исходный код. В первые две колонки мы добавили номера строк, чтобы на них можно было ссылаться в этом разделе. Эти номера строк не являются частью самого исходного кода!
</p>
<table><tr><td>&nbsp;</td><td><pre class="example"> 1    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot; ?&gt;
 2    &lt;el:level xsi:schemaLocation=&quot;http://enigma-game.org/schema/level/1 level.xsd&quot; xmlns:el=&quot;http://enigma-game.org/schema/level/1&quot;&gt;
 3     &lt;el:protected&gt;
 4       &lt;el:info el:type=&quot;level&quot;&gt;
 5         &lt;el:identity el:title=&quot;Basic Level&quot; el:subtitle=&quot;&quot; el:id=&quot;20080721ral513&quot;/&gt;
 6         &lt;el:version el:score=&quot;1&quot; el:release=&quot;1&quot; el:revision=&quot;$Revision: 1170 $&quot; el:status=&quot;experimental&quot;/&gt;
 7         &lt;el:author el:name=&quot;Ronald Lamprecht&quot; el:email=&quot;ral@users.berlios.de&quot;/&gt;
 8         &lt;el:copyright&gt;Copyright &copy; 2008 Ronald Lamprecht&lt;/el:copyright&gt;
 9         &lt;el:license el:type=&quot;GPL v2.0 or above&quot; el:open=&quot;true&quot;/&gt;
10         &lt;el:compatibility el:enigma=&quot;<var>1.10</var>&quot;/&gt;
11         &lt;el:modes el:easy=&quot;true&quot; el:single=&quot;true&quot; el:network=&quot;false&quot;/&gt;
12         &lt;el:score el:easy=&quot;-&quot; el:difficult=&quot;-&quot;/&gt;
13       &lt;/el:info&gt;
14       &lt;el:luamain&gt;&lt;![CDATA[
15
16    <i>wo</i>[&quot;<b>ConserveLevel</b>&quot;] = <var>true</var>
17
18    <i>ti</i>[&quot;<var> </var>&quot;] = {&quot;<b>fl_samba</b>&quot;}
19    <i>ti</i>[&quot;<var>.</var>&quot;] = {&quot;<b>fl_abyss</b>&quot;}
20    <i>ti</i>[&quot;<var>~</var>&quot;] = {&quot;<b>fl_water</b>&quot;}
21    <i>ti</i>[&quot;<var>#</var>&quot;] = {&quot;<b>st_granite</b>&quot;}
22    <i>ti</i>[&quot;<var>X</var>&quot;] = {&quot;<b>st_oxyd</b>&quot;}
23
24    <i>ti</i>[&quot;<var>L</var>&quot;] = {&quot;<b>st_laser</b>&quot;, <b>orientation</b>=<var>EAST</var>, <b>state</b>=<var>ON</var>}
25    <i>ti</i>[&quot;<var>M</var>&quot;] = {&quot;<b>st_lightpassenger</b>&quot;, <b>interval</b>=<var>0.04</var>}
26
27    <i>ti</i>[&quot;<var>P</var>&quot;] = {&quot;<b>st_polarswitch</b>&quot;, <b>name</b>=&quot;<var>polar</var>&quot;}
28    <i>ti</i>[&quot;<var>T</var>&quot;] = {&quot;<b>it_trigger</b>&quot;, <b>target</b>=&quot;<var>polar</var>&quot;}
29
30    <i>ti</i>[&quot;<var>^</var>&quot;] = {&quot;<b>st_boulder</b>&quot;, &quot;<var>boulder</var>&quot;, <b>orientation</b>=<var>NORTH</var>}
31    <i>ti</i>[&quot;<var>F</var>&quot;] = {&quot;<b>st_fourswitch</b>&quot;, <b>target</b>=&quot;<var>boulder</var>&quot;, <b>action</b>=&quot;<var>orientate</var>&quot;}
32
33    <i>ti</i>[&quot;<var>D</var>&quot;] = {&quot;<b>st_door_d</b>&quot;, &quot;<var>door</var>&quot;, <b>faces</b>=&quot;<var>ew</var>&quot;}
34    <i>ti</i>[&quot;<var>B</var>&quot;] = {&quot;<b>it_blocker</b>&quot;, &quot;<var>wall#</var>&quot;}
35    <i>ti</i>[&quot;<var>S</var>&quot;] = {&quot;<b>st_switch</b>&quot;, <b>target</b>={&quot;<var>door</var>&quot;, &quot;<var>wall#*</var>&quot;}}
36
37    <i>ti</i>[&quot;<var>v</var>&quot;] = {&quot;<b>it_vortex</b>&quot;, &quot;<var>left</var>&quot;, <b>destination</b>=&quot;<var>right</var>&quot;}
38    <i>ti</i>[&quot;<var>V</var>&quot;] = {&quot;<b>it_vortex</b>&quot;, &quot;<var>right</var>&quot;, <b>destination</b>=&quot;<var>left</var>&quot;}
39
40    <i>ti</i>[&quot;<var>O</var>&quot;] = {&quot;<b>st_turnstile</b>&quot;, <b>flavor</b>=&quot;<var>red</var>&quot;}
41    <i>ti</i>[&quot;<var>E</var>&quot;] = {&quot;<b>st_turnstilearm</b>&quot;, <b>orientation</b>=<var>EAST</var>}
42    <i>ti</i>[&quot;<var>N</var>&quot;] = <i>ti</i>[&quot;<var>.</var>&quot;] .. {&quot;<b>st_turnstilearm_n</b>&quot;}
43
44    <i>ti</i>[&quot;<var>+</var>&quot;] = {&quot;<b>fl_samba</b>&quot;, <b>checkerboard</b>=<var>0</var>} .. ti({&quot;<b>fl_wood</b>&quot;, <b>checkerboard</b>=<var>1</var>})
45
46    <i>ti</i>[&quot;<var>1</var>&quot;] = {&quot;#<b>ac_marble</b>&quot;}
47
48    if <i>wo</i>[&quot;<b>IsDifficult</b>&quot;] then
49        <i>ti</i>[&quot;<var>=</var>&quot;] = <i>ti</i>[&quot;<var>~</var>&quot;]
50    else
51        <i>ti</i>[&quot;<var>=</var>&quot;] = <i>ti</i>[&quot;<var>~</var>&quot;] .. {&quot;<b>it_strip_ew</b>&quot;}
52    end
53
54    w, h = <i>wo</i>(<i>ti</i>, &quot;<var> </var>&quot;, {
55        &quot;<var>####################</var>&quot;,
56        &quot;<var>#      ....++++++~ #</var>&quot;,
57        &quot;<var>L   PM ..N.++~~~~OE#</var>&quot;,
58        &quot;<var>#######  T~++++++. #</var>&quot;,
59        &quot;<var>#     ^   ~++++++# #</var>&quot;,
60        &quot;<var>#         =++++++X X</var>&quot;,
61        &quot;<var>#         ~++++++# #</var>&quot;,
62        &quot;<var>#~~~~~~~~~~~~~+++X X</var>&quot;,
63        &quot;<var>#    ~   B   ~+++###</var>&quot;,
64        &quot;<var>F    ~   B   ~+++++#</var>&quot;,
65        &quot;<var># 1  ~   B   #+++++#</var>&quot;,
66        &quot;<var>S   v~V  B   D+++++#</var>&quot;,
67        &quot;<var>####################</var>&quot;
68    })
69
70    <i>wo</i>:<b>shuffleOxyd</b>()
71
72     ]]&gt;&lt;/el:luamain&gt;
73        &lt;el:i18n&gt;
74          &lt;el:string el:key=&quot;title&quot;&gt;
75            &lt;el:english el:translate=&quot;false&quot;/&gt;
76          &lt;/el:string&gt;
77        &lt;/el:i18n&gt;
78      &lt;/el:protected&gt;
79    &lt;/el:level&gt;
</pre></td></tr></table>

<p>Получившийся уровень выглядит в игре следующим образом:
</p>
<img src="images/ralD006_1.png" alt="images/ralD006_1">

<p>Теперь давайте рассмотрим код строка за строкой.
</p>
<p>В строках с 1 по 14 содержатся метаданные уровня в формате XML, описанные в главе <a href="#Level-Basics">Основы работы с уровнями</a>. Единственная строка, на которую стоит обратить внимание, это:
</p><table><tr><td>&nbsp;</td><td><pre class="example">10         &lt;el:compatibility el:enigma=&quot;<var>1.10</var>&quot;/&gt;
</pre></td></tr></table>

<p>Чтобы использовать API 2, так как это описано в данном руководстве, следует объявить, что уровень совместим с Enigma версии 1.10 или выше. Значение меньшее 1.10 означает совместимость с предыдущим выпуском Enigma, который использует старый API 1 и который не следует смешивать с новым API 2.
</p>
<p>Код Lua начинается со строки 15:
</p><table><tr><td>&nbsp;</td><td><pre class="example">16    <i>wo</i>[&quot;<b>ConserveLevel</b>&quot;] = <var>true</var>
</pre></td></tr></table>

<p>Как и большинство уровней, этот уровень начинается установкой глобальных атрибутов (см. раздел <a href="#Global-Attributes">Глобальные атрибуты</a>). Представление нашего мира &mdash; это &lsquo;<samp>wo</samp>&rsquo;. Это предварительно заданная объектная ссылка (см. раздел <a href="#World-as-an-Object">Мир как объект</a>). С точки зрения Lua, это &lsquo;<samp>пользовательские данные</samp>&rsquo;, но большая часть синтаксиса их использования, идентична синтаксису списков Lua. Так, например, мы можем получить доступ к атрибуту, заключив имя нужного атрибута в квадратные скобки. Чтобы задать символьное имя атрибута, мы должны заключить его в двойные кавычки &lsquo;<samp>&quot;</samp>&rsquo;. Смысл строки в указании миру воскрешать убитого актёра, пока хватает дополнительных жизней, чтобы текущий уровень всё ещё можно было пройти (см. раздел <a href="#ConserveLevel">ConserveLevel</a>). В сущности &lsquo;<samp>true</samp>&rsquo; &mdash; это значение по умолчанию, поэтому мы могли бы опустить эту строку. Мы оставляем ее в целях полноты изложения.
</p>
<p>Вторая часть уровня &mdash; это определение секций способом, описанным в разделе <a href="#World_0027s-Shape-and-Coordinates">Очертания и координаты мира</a>. Давайте начнём с самого простого:
</p><table><tr><td>&nbsp;</td><td><pre class="example">18    <i>ti</i>[&quot;<var> </var>&quot;] = {&quot;<b>fl_samba</b>&quot;}
19    <i>ti</i>[&quot;<var>.</var>&quot;] = {&quot;<b>fl_abyss</b>&quot;}
20    <i>ti</i>[&quot;<var>~</var>&quot;] = {&quot;<b>fl_water</b>&quot;}
21    <i>ti</i>[&quot;<var>#</var>&quot;] = {&quot;<b>st_granite</b>&quot;}
22    <i>ti</i>[&quot;<var>X</var>&quot;] = {&quot;<b>st_oxyd</b>&quot;}
</pre></td></tr></table>

<p>Мы снова используем указатель, &lsquo;<samp>ti</samp>&rsquo;, который представляет собой объектную ссылку на хранилище определений секций. Подобно миру, это &lsquo;<samp>пользовательские данные</samp>&rsquo; Lua, и мы можем обратиться к нему, задавая нужный индекс в квадратных скобках. Эти индексы можно выбрать на свой вкус. Если они используются далее в карте мира, то их длина должна быть одинаковой. Для маленьких уровней подойдут односимвольные коды. Разрешается использовать любые понятные Lua символы ASCII. То есть, символы &lsquo;<samp>A-Z,a-z</samp>&rsquo; в верхнем и нижнем регистрах, цифры и специальные символы, исключая обратный слэш &lsquo;<samp>\</samp>&rsquo; и двойные кавычки &lsquo;<samp>&quot;</samp>&rsquo;.
</p>
<p>Определение, присваиваемое объекту, представляет собой анонимные таблицы Lua &mdash; фигурные скобки, в простейшем случае содержащие лишь желаемый <a href="#Object-Kind">Тип объекта</a>. Так как это опять строка символов, то её следует заключать в двойные кавычки. Если не указано иное, объекты берутся в их конфигурации по умолчанию, которая описана в разделе <a href="#Floor-Objects">Покрытия</a> и следующих разделах.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">24    <i>ti</i>[&quot;<var>L</var>&quot;] = {&quot;<b>st_laser</b>&quot;, <b>orientation</b>=<var>EAST</var>, <b>state</b>=<var>ON</var>}
25    <i>ti</i>[&quot;<var>M</var>&quot;] = {&quot;<b>st_lightpassenger</b>&quot;, <b>interval</b>=<var>0.04</var>}
</pre></td></tr></table>

<p>Эти две строки описывают объекты с конфигурацией, отличающейся от конфигурации по умолчанию. <a href="#st_005flaser">st_laser</a> должен послать свой луч в восточном направлении и изначально должен быть включен. <a href="#st_005flightpassenger">st_lightpassenger</a> должен перемещаться немного быстрее, чем обычно. В обоих случаях мы должны просто добавить дополнительные атрибуты, разделённые запятой. Названия атрибутов не заключаются в кавычки, потому что за ними следует знак равенства &lsquo;<samp>=</samp>&rsquo;.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">27    <i>ti</i>[&quot;<var>P</var>&quot;] = {&quot;<b>st_polarswitch</b>&quot;, <b>name</b>=&quot;<var>polar</var>&quot;}
28    <i>ti</i>[&quot;<var>T</var>&quot;] = {&quot;<b>it_trigger</b>&quot;, <b>target</b>=&quot;<var>polar</var>&quot;}
</pre></td></tr></table>

<p><a href="#st_005fpolarswitch">st_polarswitch</a> переименован, чтобы на него было удобнее ссылаться (см. раздел <a href="#Object-Naming">Именование объектов</a>). Для <a href="#it_005ftrigger">it_trigger</a> настраивается <a href="#Target-_002d-Action">Цель-действие</a>, целью становится наша переключаемая преграда для лазера. Атрибут действия опущен. По умолчанию им становится сообщение &lsquo;<samp>toggle</samp>&rsquo;. Таким образом, любой актёр или камень, ставший на триггере, делает прозрачной переключаемую преграду для лазера, но, покидая триггер, снова делает её непрозрачной.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">30    <i>ti</i>[&quot;<var>^</var>&quot;] = {&quot;<b>st_boulder</b>&quot;, &quot;<var>boulder</var>&quot;, <b>orientation</b>=<var>NORTH</var>}
31    <i>ti</i>[&quot;<var>F</var>&quot;] = {&quot;<b>st_fourswitch</b>&quot;, <b>target</b>=&quot;<var>boulder</var>&quot;, <b>action</b>=&quot;<var>orientate</var>&quot;}
</pre></td></tr></table>

<p>Другая пара объектов объединена понятием <a href="#Target-_002d-Action">Цель-действие</a>. <a href="#st_005fboulder">st_boulder</a> изначально пытается двигаться на север. На этот раз мы даём объекту имя, просто передавая его в качестве второго из строковых параметров, разделяемых запятыми. Мы опустили идентификатор атрибута &lsquo;<samp>name =</samp>&rsquo;. Это упрощение для наиболее часто используемого атрибута, которое требует, чтобы сразу после типа объекта вторым параметром было указано имя.
</p>
<p><a href="#st_005ffourswitch">st_fourswitch</a> в качестве цели использует болдер. Так как мы хотим воспользоваться специальным действием, которое непосредственно управляет болдером в зависимости от направления четырёхстороннего переключателя, то нам также нужно указать действие.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">33    <i>ti</i>[&quot;<var>D</var>&quot;] = {&quot;<b>st_door_d</b>&quot;, &quot;<var>door</var>&quot;, <b>faces</b>=&quot;<var>ew</var>&quot;}
34    <i>ti</i>[&quot;<var>B</var>&quot;] = {&quot;<b>it_blocker</b>&quot;, &quot;<var>wall#</var>&quot;}
35    <i>ti</i>[&quot;<var>S</var>&quot;] = {&quot;<b>st_switch</b>&quot;, <b>target</b>={&quot;<var>door</var>&quot;, &quot;<var>wall#*</var>&quot;}}
</pre></td></tr></table>

<p>И ещё одна <a href="#Target-_002d-Action">Цель-действие</a>, немного посложнее. Мы хотим с помощью единственного переключателя (<a href="#st_005fswitch">st_switch</a>) открывать/закрывать дверь (<a href="#st_005fdoor">st_door</a>) и, в то же время, изменять состояние <a href="#it_005fblocker">it_blocker</a>. Игровой момент здесь состоит в том, что ни при включенном, ни при выключенном переключателе шарик не может преодолеть оба препятствия. Чтобы преодолеть их, игроку нужно провести болдер сквозь блокирующую стену.
</p>
<p>Настройка двери проста. Для того, чтобы в будущем к ней обращаться, нам нужно просто дать ей имя. Мы хотим использовать несколько блокирующих объектов и дать имя каждому, чтобы ссылаться на них. Мы делаем это, добавляя к его имени знак решётки &lsquo;<samp>#</samp>&rsquo; так, как это описано в разделе <a href="#Object-Naming">Именование объектов</a>. Каждому блокирующему объекту присваивается уникальное имя. Каждый из этих объектов должен быть перечислен в списке целей переключателя. Это сделано с использованием встроенного анонимного списка, формируемого фигурными скобками, в которых через запятую указываются значения. Первое &mdash; имя двери, второе &mdash; шаблон строки, описывающей все наши блокирующие объекты. Звёздочка представляет собой любой суффикс, который в процессе автоматического именования наших блокирующих объектов может быть добавлен после решётки.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">37    <i>ti</i>[&quot;<var>v</var>&quot;] = {&quot;<b>it_vortex</b>&quot;, &quot;<var>left</var>&quot;, <b>destination</b>=&quot;<var>right</var>&quot;}
38    <i>ti</i>[&quot;<var>V</var>&quot;] = {&quot;<b>it_vortex</b>&quot;, &quot;<var>right</var>&quot;, <b>destination</b>=&quot;<var>left</var>&quot;}
</pre></td></tr></table>

<p>Мы хотим использовать две воронки (<a href="#it_005fvortex">it_vortex</a>), которые связаны друг с другом, давая таким образом шарику возможность переноситься в обоих направлениях. Каждой воронке мы присваиваем уникальное имя и добавляем атрибут &lsquo;<samp>destination</samp>&rsquo;, который принимает значение имени другой воронки.
</p>
<p>Заметим, что мы можем без проблем обратиться к правой воронке в строке 37, в то время как описана она будет только в строке 38. Мы пока только описываем секции, но ещё не создаём вообще никаких объектов.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">40    <i>ti</i>[&quot;<var>O</var>&quot;] = {&quot;<b>st_turnstile</b>&quot;, <b>flavor</b>=&quot;<var>red</var>&quot;}
41    <i>ti</i>[&quot;<var>E</var>&quot;] = {&quot;<b>st_turnstilearm</b>&quot;, <b>orientation</b>=<var>EAST</var>}
42    <i>ti</i>[&quot;<var>N</var>&quot;] = <i>ti</i>[&quot;<var>.</var>&quot;] .. {&quot;<b>st_turnstilearm_n</b>&quot;}
</pre></td></tr></table>

<p>Другая группа объектов &mdash; это блок из <a href="#st_005fturnstile">st_turnstile</a> с одной отсоединённой рукояткой. Первые два определения предельно понятны. Но в строке 42 мы предваряем определение рукоятки ссылкой на другой объект. Это секция бездны, определённая в строке 19. Объединяя двумя точками (..) описание секции и объекта, мы можем определить новый объект, состоящий из обоих объектов. В данном случае мы определяем рукоятку турникета на покрытии бездны.
</p>
<p>Возможно вам интересно, почему мы не определили покрытия для остальных секций камней и предметов. Мы используем определение покрытий в строке 18, которое мы позже объявим покрытием по умолчанию для нашего уровня. Таким образом, для любого определения секции, у которой нет своего покрытия, по умолчанию будет установлено это покрытие.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">44    <i>ti</i>[&quot;<var>+</var>&quot;] = {&quot;<b>fl_samba</b>&quot;, <b>checkerboard</b>=<var>0</var>} .. ti({&quot;<b>fl_wood</b>&quot;, <b>checkerboard</b>=<var>1</var>})
</pre></td></tr></table>

<p>Просто для красоты мы хотим, чтобы на полу в правой части нашего уровня был шахматный узор. Это можно сделать, используя атрибут <a href="#checkerboard">checkerboard</a>. Мы снова объединяем определения двух объектов в одной секции. Оба они &mdash; покрытия. Это значит, что для каждой ячейки сетки мы пытаемся установить оба типа покрытия, но только одно удовлетворит условиям &quot;шахматного узора&quot; и будет использовано.
</p>
<p>Пожалуйста, обратите внимание, что мы преобразовали одно из определений объекта покрытия в определение секции, вызвав функцию &lsquo;<samp>ti()</samp>&rsquo;. Это необходимо, потому что Lua не знает, как объединить два анонимных списка. Один из объединяемых параметров должен быть секцией.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">46    <i>ti</i>[&quot;<var>1</var>&quot;] = {&quot;#<b>ac_marble</b>&quot;}
</pre></td></tr></table>

<p>Наконец, нам понадобится наш шарик. В отличие от остальных объектов он может располагаться в любом месте решётки. Самое распространённое место &mdash; это центр решётки. Для этого нам просто нужно предварить тип актёра знаком решётки &lsquo;<samp>#</samp>&rsquo;.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">48    if <i>wo</i>[&quot;<b>IsDifficult</b>&quot;] then
49        <i>ti</i>[&quot;<var>=</var>&quot;] = <i>ti</i>[&quot;<var>~</var>&quot;]
50    else
51        <i>ti</i>[&quot;<var>=</var>&quot;] = <i>ti</i>[&quot;<var>~</var>&quot;] .. {&quot;<b>it_strip_ew</b>&quot;}
52    end
</pre></td></tr></table>

<p>Мы рекомендуем нашим создателям уровней предоставить для уровней упрощённый режим. В данном примере приводятся определения разных секций для разных режимов. Как и в строке 16, мы обращаемся к атрибуту мира. Но в этот раз это чтение атрибута <a href="#IsDifficult">IsDifficult</a>. В упрощённом режиме мы хотим, чтобы на поверхности воды была полоска суши (<a href="#it_005fstrip">it_strip</a>), которая позволит шарику пересечь её и нажать на триггер. В сложном режиме прохода быть не должно. Таким образом, специальная секция идентична секции воды, определённой в строке 20.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">54    w, h = <i>wo</i>(<i>ti</i>, &quot;<var> </var>&quot;, {
55        &quot;<var>####################</var>&quot;,
56        &quot;<var>#      ....++++++~ #</var>&quot;,
57        &quot;<var>L   PM ..N.++~~~~OE#</var>&quot;,
58        &quot;<var>#######  T~++++++. #</var>&quot;,
59        &quot;<var>#     ^   ~++++++# #</var>&quot;,
60        &quot;<var>#         =++++++X X</var>&quot;,
61        &quot;<var>#         ~++++++# #</var>&quot;,
62        &quot;<var>#~~~~~~~~~~~~~+++X X</var>&quot;,
63        &quot;<var>#    ~   B   ~+++###</var>&quot;,
64        &quot;<var>F    ~   B   ~+++++#</var>&quot;,
65        &quot;<var># 1  ~   B   #+++++#</var>&quot;,
66        &quot;<var>S   v~V  B   D+++++#</var>&quot;,
67        &quot;<var>####################</var>&quot;
68    })
</pre></td></tr></table>

<p>После того, как все секции будут заданы, мы можем создать наш мир, просто нанеся его на карту, используя наши коды секций. Первый аргумент &mdash; это наше представление &lsquo;<samp>ti</samp>&rsquo;, которое определяет, как следует преобразовывать коды. Второй аргумент &mdash; код нашего покрытия по умолчанию. Третий аргумент &mdash; карта в виде списка строк, по одной строке списка в каждой строке карты.
</p>
<p>Создание мира возвращает ширину и высоту нашего мира, которые рассчитаны по размеру карты.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">70    <i>wo</i>:<b>shuffleOxyd</b>()
</pre></td></tr></table>

<p>После того, как мир создан и все объекты размещены, мы можем провести какую-нибудь постобработку перед началом уровня. Самой частой задачей является перемешивание оксидов, представляющее собой простой вызов метода <a href="#shuffleOxyd">shuffleOxyd</a> для нашего громадного объекта мира.
</p>
<hr size="6">
<a name="Colored-Turnstiles"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Basic-Example" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#API-2-Overview" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Basic-Lua-Examples" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Colored-Turnstiles-1"></a>
<h3 class="subsection">5.1.2 Colored Turnstiles</h3>

<p>Так как этот уровень входит в состав пакетов уровней Enigma, мы советуем сначала поиграть на нём, чтобы познакомиться с используемыми объектами и их поведением.
</p>
<p>Теперь давайте взглянем на важную часть Lua исходного кода уровня, чтобы понять, как подобная идея может быть реализована с использованием нового API:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example"><i>ti</i>[&quot;<var> </var>&quot;] = {&quot;<b>fl_sahara</b>&quot;}
<i>ti</i>[&quot;<var>#</var>&quot;] = {&quot;<b>st_purplegray</b>&quot;}
<i>ti</i>[&quot;<var>@</var>&quot;] = {&quot;#<b>ac_marble_black</b>&quot;, &quot;<var>marble_black</var>&quot;}

<i>ti</i>[&quot;<var>N</var>&quot;] = {&quot;<b>st_turnstilearm_n</b>&quot;}
<i>ti</i>[&quot;<var>S</var>&quot;] = {&quot;<b>st_turnstilearm_s</b>&quot;}
<i>ti</i>[&quot;<var>E</var>&quot;] = {&quot;<b>st_turnstilearm_e</b>&quot;}
<i>ti</i>[&quot;<var>W</var>&quot;] = {&quot;<b>st_turnstilearm_w</b>&quot;}
<i>ti</i>[&quot;<var>R</var>&quot;] = {&quot;<b>st_turnstile</b>&quot;, <b>action</b> = {&quot;<var>open</var>&quot;, &quot;<var>close</var>&quot;}, <b>target</b> = {&quot;<var>red</var>#*&quot;, &quot;<var>green</var>#*&quot;}}
<i>ti</i>[&quot;<var>G</var>&quot;] = {&quot;<b>st_turnstile</b>&quot;, <b>action</b> = {&quot;<var>close</var>&quot;, &quot;<var>open</var>&quot;}, <b>target</b> = {&quot;<var>red</var>#*&quot;, &quot;<var>green</var>#*&quot;},
                           <b>flavor</b> = &quot;<var>green</var>&quot;}
<i>ti</i>[&quot;<var>r</var>&quot;] = {&quot;<b>it_blocker</b>&quot;, &quot;<var>red</var>#&quot;} .. <i>ti</i>({&quot;<b>fl_red</b>&quot;})
<i>ti</i>[&quot;<var>g</var>&quot;] = {&quot;<b>it_blocker</b>&quot;, &quot;<var>green</var>#&quot;} .. <i>ti</i>({&quot;<b>fl_lawn</b>&quot;})

<i>ti</i>[&quot;<var>O</var>&quot;] = {&quot;<b>st_oxyd</b>&quot;, <b>flavor</b> = &quot;<var>d</var>&quot;, <b>oxydcolor</b> = <var>OXYD_GREEN</var>}
<i>ti</i>[&quot;<var>o</var>&quot;] = {&quot;<b>st_oxyd</b>&quot;, <b>flavor</b> = &quot;<var>d</var>&quot;, <b>oxydcolor</b> = <var>OXYD_RED</var>}

<var>w</var>, <var>h</var> = <i>wo</i>(<i>ti</i>, &quot;<var> </var>&quot;, {
 -- 01234567890123456789
   &quot;<var>#O#####O############</var>&quot;,
   &quot;<var>#   r N g N rO##O#O#</var>&quot;,
   &quot;<var>#WRE#WGE# R ####g#r#</var>&quot;,
   &quot;<var>#   r N r S  r N   #</var>&quot;,
   &quot;<var>#g#g#WG #g##r# REr##</var>&quot;,
   &quot;<var># # N S r    g S  gO</var>&quot;,
   &quot;<var>#@g RE#g#gWGE###g###</var>&quot;,
   &quot;<var># # S   g    r N  ro</var>&quot;,
   &quot;<var>#r#r#WGE#r##g#WGEg##</var>&quot;,
   &quot;<var># N r S g N  r     #</var>&quot;,
   &quot;<var>#WGE# RE# RE####r#g#</var>&quot;,
   &quot;<var>#   g S r S go##o#o#</var>&quot;,
   &quot;<var>#o#####o############</var>&quot;
})

<i>wo</i>:<b>shuffleOxyd</b>()
</pre></td></tr></table>

<p>Здесь всего четыре определения секций, которые отвечают за все динамические действия. Давайте сначала посмотрим на определения блокирующего предмета:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example"><i>ti</i>[&quot;<var>r</var>&quot;] = {&quot;<b>it_blocker</b>&quot;, &quot;<var>red</var>#&quot;} .. <i>ti</i>({&quot;<b>fl-red</b>&quot;})
<i>ti</i>[&quot;<var>g</var>&quot;] = {&quot;<b>it_blocker</b>&quot;, &quot;<var>green</var>#&quot;} .. <i>ti</i>({&quot;<b>fl-leaves</b>&quot;})
</pre></td></tr></table>
<p>Все блокирующие предметы на красных покрытиях получают имена автоматически, объединением приставки &lsquo;<samp>red#</samp>&rsquo; и уникального случайного номера, добавляемого движком так, как описано в разделе <a href="#Object-Naming">Именование объектов</a>. Это даёт нам возможность позже обращаться ко всем этим блокирующим предметам.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example"><i>ti</i>[&quot;<var>R</var>&quot;] = {&quot;<b>st_turnstile</b>&quot;, <b>action</b> = {&quot;<var>open</var>&quot;, &quot;<var>close</var>&quot;}, <b>target</b> = {&quot;<var>red</var>#*&quot;, &quot;<var>green</var>#*&quot;}}
<i>ti</i>[&quot;<var>G</var>&quot;] = {&quot;<b>st_turnstile</b>&quot;, <b>action</b> = {&quot;<var>close</var>&quot;, &quot;<var>open</var>&quot;}, <b>target</b> = {&quot;<var>red</var>#*&quot;, &quot;<var>green</var>#*&quot;},
                           <b>flavor</b> = &quot;<var>green</var>&quot;}
</pre></td></tr></table>
<p>Всякий раз, когда шарик проходит через турникет (<a href="#st_005fturnstile">st_turnstile</a>), он (турникет) осуществляет действия над своими целями. В данном случае автор мудро использовал несколько целей и действий так, как описано в разделе <a href="#Target-_002d-Action">Цель-действие</a>. При каждом повороте красного турникета все объекты с именем вида &lsquo;<samp>red#</samp>*&rsquo;, то есть всем нашим блокирующим предметам на красном покрытии, будет отправлено сообщение &lsquo;<samp>open</samp>&rsquo;, тогда как все блокирующие камни на зелёном покрытии, вторая группа целей, получат второе сообщение действия &lsquo;<samp>close</samp>&rsquo;. Важно выбрать сообщения &lsquo;<samp>open</samp>&rsquo; и &lsquo;<samp>close</samp>&rsquo; вместо &lsquo;<samp>toggle</samp>&rsquo;, так как последовательно могут повернуться несколько красных турникетов, однако только первый поворот красного турникета должен &quot;переключить&quot; все блокирующие камни. Соответственно, следующее переключение должно произойти при первом повороте зелёного турникета.
</p>
<p>Надеемся, основная идея нового API понятна. Теперь можно начать свои первые эксперименты с уровнями. Но чтобы создавать более интересные уровни, следует вернуться и прочесть следующие разделы с обзором и более сложными примерами.
</p>

<hr size="6">
<a name="API-2-Overview"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Colored-Turnstiles" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Types-Overview" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="API-2-Overview-1"></a>
<h2 class="section">5.2 Обзор API 2</h2>

<p>После того, как мы проанализировали первый уровень, настало время рассмотреть возможности API 2. Сделаем это, перечислив различные возможности и их использование на примерах.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Types-Overview">5.2.1 Обзор типов</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Position-Tasks">5.2.2 Работа с позициями</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Attribute-Tasks">5.2.3 Работа с атрибутами</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Object-Tasks">5.2.4 Работа с объектами</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Group-Tasks">5.2.5 Работа с группами</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Tiles-and-World-Tasks">5.2.6 Работа с секциями и миром</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Named-Positions-Tasks">5.2.7 Работа с именованными позициями</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>


<hr size="6">
<a name="Types-Overview"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#API-2-Overview" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Position-Tasks" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#API-2-Overview" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Types-Overview-1"></a>
<h3 class="subsection">5.2.1 Обзор типов</h3>

<p>Для начала мы должны рассказать о специальных типах значений Enigma, отличных от стандартных типов Lua &lsquo;<samp>nil</samp>&rsquo;, &lsquo;<samp>boolean</samp>&rsquo;, &lsquo;<samp>string</samp>&rsquo;, &lsquo;<samp>function</samp>&rsquo; и &lsquo;<samp>table</samp>&rsquo;:
</p>
<dl compact="compact">
<dt> <b>Типы:</b></dt>
<dd><dl compact="compact">
<dt> <b>position:</b>&nbsp;&nbsp;см. раздел <a href="#Position">Позиция</a></dt>
<dd><p>Позиция в мире, которую можно задать координатами x и y.
</p></dd>
<dt> <b>positions:</b> <i>стандартная переменная:</i> <code>po</code>;   см. раздел <a href="#Positions-Repository">Хранилище позиций</a></dt>
<dd><p>Единый тип хранилища всех именованных позиций.
</p></dd>
<dt> <b>object:</b>&nbsp;&nbsp;см. раздел <a href="#Object">Объект</a></dt>
<dd><p>Объект Enigma, такой как камень, предмет, покрытие и т.п. Каждому объекту также соответствует позиция.
</p></dd>
<dt> <b>group:</b>&nbsp;&nbsp;см. раздел <a href="#Group">Группа</a></dt>
<dd><p>Список объектов.
</p></dd>
<dt> <b>namedobjects:</b> <i>стандартная переменная:</i> <code><b>no</b></code>; &nbsp;&nbsp;см. раздел <a href="#NamedObjects">NamedObjects</a></dt>
<dd><p>Единый тип хранилища всех именованных объектов.
</p></dd>
<dt> <b>default:</b> <i>стандартная переменная:</i> <code><b>DEFAULT</b></code>; &nbsp;&nbsp;см. раздел <a href="#Object-Attributes">Атрибуты объектов</a></dt>
<dd><p>Единый тип значений по умолчанию, который может использоваться вместо типа Lua &lsquo;<samp>nil</samp>&rsquo; в определениях анонимных списков секций.
</p></dd>
<dt> <b>tile:</b>&nbsp;&nbsp;см. раздел <a href="#Tile-and-Object-Declaration">Описание секций и объектов</a></dt>
<dd><p>Описание для одной секции одного или нескольких объектов (покрытие, предмет, камень, актёр).
</p></dd>
<dt> <b>tiles:</b> <i>стандартная переменная:</i> <code><b>ti</b></code>; &nbsp;&nbsp;см. раздел <a href="#Tiles-Repository">Хранилище секций</a></dt>
<dd><p>Единый тип хранилища всех экземпляров секций.
</p></dd>
<dt> <b>world:</b> <i>стандартная переменная:</i> <code><b>wo</b></code>; &nbsp;&nbsp;см. раздел <a href="#World">Мир</a></dt>
<dd><p>Единый тип мира, содержащий все объекты.
</p></dd>
<dt> <b>position list:</b>&nbsp;&nbsp;см. раздел <a href="#Named-Positions">Именованные позиции</a></dt>
<dd><p>Список позиций.
</p></dd>
</dl>
</dd>
</dl>

<p>Пожалуйста, обратите внимание на четыре представления: &lsquo;<samp>po</samp>&rsquo;, &lsquo;<samp>no</samp>&rsquo;, &lsquo;<samp>ti</samp>&rsquo; и &lsquo;<samp>wo</samp>&rsquo;. Два из них уже можно было заметить в предыдущем разделе <a href="#Basic-Lua-Examples">Примеры простых уровней на языке Lua</a>. Это четыре переменные, которые должны быть настроены перед тем, как будет выполнен код уровня.
</p>
<p>Обычно, для часто используемых переменных и функций API 2 использует двухсимволные имена, чтобы сократить код уровня и сделать его более читаемым. Авторам рекомендуется использовать либо одиночные символы, либо имена из трёх и более символов для имён локальных переменных.
</p>
<p>В оставшейся части этого раздела мы предполагаем, что &lsquo;<samp>obj</samp>&rsquo; &mdash; это объектная ссылка на камень, предмет или покрытие; это значит, что его тип &mdash; &lsquo;<samp>object</samp>&rsquo;. И предположим, что &lsquo;<samp>pos</samp>&rsquo; &mdash; допустимая переменная типа &lsquo;<samp>position</samp>&rsquo;.
</p>
<hr size="6">
<a name="Position-Tasks"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Types-Overview" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Attribute-Tasks" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#API-2-Overview" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Position-Tasks-1"></a>
<h3 class="subsection">5.2.2 Работа с позициями</h3>

<p>Подробности можно узнать в разделе <a href="#Position">Позиция</a>.
</p>
<dl compact="compact">
<dt> <b>Создание позиций:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>pos</var> = <i>po</i>(<var>7</var>, <var>3</var>)         &mdash; использование функции &quot;po()&quot; для создания объекта позиции
<var>pos</var> = <i>po</i>({<var>7</var>, <var>3</var>})        &mdash; использование в качестве аргумента списка констант позиции
<var>pos</var> = <var>obj</var>              &mdash; каждый объект представляет собой допустимую позицию
<var>pos</var> = <i>po</i>(<var>12.3</var>, <var>3.7</var>)    &mdash; позиция в сетке (для актёра)
</pre></td></tr></table>
<p>Абсолютные позиции создаются функцией &lsquo;<samp>po()</samp>&rsquo;. Но самым распространённым способом должно быть представление объекта в качестве позиции. Это позволяет размещать новые объекты относительно заданных объектов.
</p>
</dd>
<dt> <b>Константы позиции:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">{<var>7</var>,<var>3</var>}     &mdash; позиция, допустимая для всех параметров и операций (см. <a href="#Caveats">Предупреждение</a>)
</pre></td></tr></table>
<p>Анонимные списки всего с двумя числовыми значениями во многих случаях могут использоваться непосредственно как константы позиции. В случае ошибок, например, когда операторы заданы не самым лучшим образом, вроде сложения двух констант, что приводит к попытке объединения двух списков Lua, для преобразования констант используют функцию &lsquo;<samp>po()</samp>&rsquo;.
</p>
</dd>
<dt> <b>Доступ к координатам:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>x</var>, <var>y</var> = <var>pos</var>.<b>x</b>, <var>pos</var>.<b>y</b>
<var>x</var>, <var>y</var> = <var>pos</var>[&quot;<b>x</b>&quot;], pos[&quot;<b>y</b>&quot;]
<var>x</var>, <var>y</var> = <var>pos</var>:<b>xy</b>()
<var>x</var>, <var>y</var> = <var>obj</var>.<b>x</b>, <var>obj</var>.<b>y</b>
<var>x</var>, <var>y</var> = <var>obj</var>:<b>xy</b>()
</pre></td></tr></table>
<p>Координаты позиции или объекта (x и y), как и любой атрибут объекта, можно прочитать. Вызов метода позиции или объекта под названием &lsquo;<samp>xy()</samp>&rsquo; возвращает значения сразу обеих координат. Изменить значение позиции, используя доступ на запись, нельзя. Объекты должны быть помещены на новую позицию в мире. Для задания новой позиции можно использовать арифметические операции.
</p>
</dd>
<dt> <b>Расчёт позиции:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>pos</var> = <var>obj</var> + {<var>2</var>,<var>7</var>}
<var>dpos</var> = <var>obj1</var> - <var>obj2</var>
<var>dpos2</var> = <var>2</var> * <var>dpos</var>
<var>dpos3</var> = <var>dpos</var> / <var>2</var>
</pre></td></tr></table>
<p>Чтобы получить вектор расстояния, позиции можно складывать и вычитать. Их можно умножать и делить на любое число.
</p>
</dd>
<dt> <b>Центрирование позиции для размещения актёров</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>pos_centered1</var> = <var>pos</var> + {<var>0.5</var>, <var>0.5</var>}
<var>pos_centered2</var> = #<var>pos</var>
<var>pos_centered3</var> = #<var>obj</var>
</pre></td></tr></table>
<p>По большей части для размещения актёров, иногда необходимо знать позицию центра ячейки решётки. Конечно, её можно получить добавлением константы позиции. Однако то же самое можно сделать и проще, применив к позиции или актёру оператор &lsquo;<samp>#</samp>&rsquo;.
</p>
</dd>
<dt> <b>Округление позиции до границ ячейки</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>grid_pos</var> = <var>pos</var>:<b>grid</b>()
<var>grid_pos</var> = ((<var>pos1</var> - <var>pos2</var>)/<var>2</var>):<b>grid</b>()
</pre></td></tr></table>
<p>Иногда результат расчёта позиции необходимо округлить до целых координат решётки. Это делается методом &lsquo;<samp>grid()</samp>&rsquo;.
</p>
</dd>
<dt> <b>Сравнение позиций</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>pos_centered1</var> == <var>pos_centered2</var>
<var>pos_centered1</var> ~= <var>pos_centered2</var>    &mdash; Оператор неравенства Lua
</pre></td></tr></table>
<p>Позицию можно легко проверить на соответствие.
</p>
</dd>
<dt> <b>Существование позиций</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>pos</var>:exists()
</pre></td></tr></table>
<p>Возвращает &lsquo;<samp>true</samp>&rsquo;, если позиция находится в пределах мира. Все позиции за пределами мира возвращают &lsquo;<samp>false</samp>&rsquo;.
</p></dd>
</dl>

<hr size="6">
<a name="Attribute-Tasks"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Position-Tasks" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Object-Tasks" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#API-2-Overview" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Attribute-Tasks-1"></a>
<h3 class="subsection">5.2.3 Работа с атрибутами</h3>

<p>Подробности можно узнать в разделе <a href="#Object">Объект</a>.
</p>
<dl compact="compact">
<dt> <b>Установка одного атрибута:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>obj</var>[&quot;<b>destination</b>&quot;] = <i>po</i>(<var>7</var>,<var>3</var>)
<i>wo</i>[&quot;<b>Brittleness</b>&quot;] = <var>7</var>
</pre></td></tr></table>
<p>Как и атрибуты мира, атрибуты объекта могут устанавливаться как список значений Lua. Они могут получать значения специальных типов Enigma, таких как позиция, объект или группа.
</p>
</dd>
<dt> <b>Установка нескольких атрибутов:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>obj</var>:<b>set</b>({<b>target</b>=<var>mydoor</var>, <b>action</b>=&quot;<b>open</b>&quot;})
</pre></td></tr></table>
<p>С помощью объектного метода &lsquo;<samp>set()</samp>&rsquo; для любого объекта можно установить несколько атрибутов. Аргумент представляет собой анонимный список Lua с именами атрибутов в качестве ключевых полей и соответствующими выбранными вами значениями.
</p>
</dd>
<dt> <b>Запрос атрибутов:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>value</var> = <var>obj</var>[&quot;<b>attr_name</b>&quot;]
<var>value</var> = <i>wo</i>[&quot;<b>Brittleness</b>&quot;]
if <i>wo</i>[&quot;<b>IsDifficult</b>&quot;] then ... end
</pre></td></tr></table>
<p>Атрибуты объектов и мира можно прочесть в виде списка ключевых полей и значений Lua.
</p>
</dd>
<dt> <b>Сброс атрибутов:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>obj</var>[&quot;<b>length</b>&quot;] = nil       &mdash; длина по умолчанию, например &lsquo;<samp>1</samp>&rsquo;
<var>obj</var>[&quot;<b>color</b>&quot;]  = nil       &mdash; удаляет атрибут цвета &mdash; убирает цвет
<var>obj</var>[&quot;<b>length</b>&quot;] = <i>DEFAULT</i>   &mdash; длина по умолчанию, например &lsquo;<samp>1</samp>&rsquo;
</pre></td></tr></table>
<p>Любой атрибут объекта может быть сброшен к своему значению по умолчанию, что представляет собой операцию &quot;удаления&quot; атрибутов, присвоением ему значения &lsquo;<samp>nil</samp>&rsquo; из Lua или значения &lsquo;<samp>DEFAULT</samp>&rsquo; из Enigma.
</p>
</dd>
</dl>

<hr size="6">
<a name="Object-Tasks"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Attribute-Tasks" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Group-Tasks" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#API-2-Overview" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Object-Tasks-1"></a>
<h3 class="subsection">5.2.4 Работа с объектами</h3>

<p>Подробности можно узнать в разделе <a href="#Object">Объект</a>.
</p>
<dl compact="compact">
<dt> <b>Создание объектов:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><i>wo</i>[<var>pos</var>]  = {&quot;<b>st_chess</b>&quot;, <b>color</b>=<var>WHITE</var>, <b>name</b>=&quot;<var>Atrax</var>&quot;}   &mdash; на секции решётки
<i>wo</i>[#<var>pos</var>] = {&quot;<b>ac_bug</b>&quot;}              &mdash; актёр, помещённый в центре секции решётки
<i>wo</i>[<var>pos</var>]  = {&quot;#<b>ac_bug</b>&quot;}             &mdash; актёр, помещённый в центре секции решётки
<i>wo</i>[<var>pos</var>]  = {&quot;<b>ac_bug</b>&quot;, <var>0.3</var>, <var>0.7</var>}    &mdash; актёр, смещённый от границ секции решётки
<i>wo</i>[<var>my_floor</var>] = {&quot;<b>it_magicwand</b>&quot;}    &mdash; размещение на заданном объекте покрытия волшебной палочки
<i>wo</i>[<var>pos</var>]  = <i>ti</i>[&quot;<var>x</var>&quot;]                 &mdash; определение объекта на основе секции
</pre></td></tr></table>
<p>Кроме создания объектов, основанного на карте, продемонстрированного в предыдущих простых примерах, существует возможность создавать новые объекты непосредственно в любом месте мира. В качестве ключевого аргумента мир получает позицию, которая с тем же успехом может быть и объектом. Новый объект описывается либо анонимным списком Lua, содержащим в первом значении строку с типом объекта и дополнительные пары ключевых полей и соответствующих им значений, либо объектом покрытия.
</p>
</dd>
<dt> <b>Именование объектов:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><i>no</i>[&quot;<var>Atrax</var>&quot;] = <var>obj</var>
<i>wo</i>[<var>pos</var>] = {&quot;<b>st_chess</b>&quot;, <b>name</b>=&quot;<var>Atrax</var>&quot;}
<i>wo</i>[<var>pos</var>] = {&quot;<b>st_chess</b>&quot;, &quot;<var>Atrax</var>&quot;, <b>color</b>=<var>WHITE</var>}
</pre></td></tr></table>
<p>Как сказано в разделе <a href="#Object-Naming">Именование объектов</a>, имена &mdash; это единственные ссылки на объект, которые существуют длительное время. Чтобы назвать объект, как ключевое поле, можно явно дать объекту имя присвоив его в хранилище именованных объектов &lsquo;<samp>no</samp>&rsquo;. Но, в основном, просто давайте объектам имена через атрибут объекта. При передаче атрибута с именем через <b>второе </b>значение в анонимном списке атрибутов, чтобы немного сократить код, можно опустить ключевое поле &lsquo;<samp>name =</samp>&rsquo;.
</p>
</dd>
<dt> <b>Автоматическое именование объектов:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><i>wo</i>[<var>pos</var>] = {&quot;<b>st_chess</b>&quot;, <b>name</b>=&quot;<var>Atrax</var>#&quot;}
</pre></td></tr></table>
<p>Как описано в разделе <a href="#Object-Naming">Именование объектов</a>, к имени можно добавить знак решётки &lsquo;<samp>#</samp>&rsquo; и использовать полученную строку для произвольного количества подобных объектов. Это особенно полезно при создании групп.
</p>
</dd>
<dt> <b>Обращение к объектам:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>obj</var> = <i>no</i>[&quot;<var>Atrax</var>&quot;]       &mdash; получение именованного объекта из хранилища
<var>obj</var> = <i>it</i>(<var>pos</var>)
<var>obj</var> = <i>it</i>(<var>x</var>,<var>y</var>)
<var>obj</var> = <i>st</i>(<var>pos</var>)
<var>obj</var> = <i>wo</i>:<b>it</b>(<var>pos</var>)
<var>my_item</var> = <i>it</i>(<var>my_floor</var>)  &mdash; получить предмет, который находится на заданном покрытии
</pre></td></tr></table>
<p>Как правило, сначала объектам присваиваются имена, после чего к ним можно обратиться посредством ссылки на этот объект в хранилище &lsquo;<samp>no</samp>&rsquo;. Если известна позиция нужного объекта, то можно воспользоваться одной из функций или методов мира &lsquo;<samp>fl</samp>&rsquo;, &lsquo;<samp>it</samp>&rsquo;, &lsquo;<samp>st</samp>&rsquo;, которые принимают в качестве параметра позицию, объект, позицию которого можно использовать, или просто две координаты. Особенно полезным может быть запрос объектов одного типа, которые размещены в той же ячейке, что и другой объект (камень на поверхности и т.п.).
</p>
</dd>
<dt> <b>Уничтожение объектов:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><i>wo</i>[<var>pos</var>] = {&quot;<b>it_nil</b>&quot;}
<var>obj</var>:<b>kill</b>()
</pre></td></tr></table>
<p>Объект удаляется, размещением заменяющего его объекта на том же месте и в том же слое. Если нет нужды размещать новый объект, то можно использовать объекты &quot;пустышки&quot; &lsquo;<samp>fl_nil</samp>&rsquo;, &lsquo;<samp>it_nil</samp>&rsquo;, &lsquo;<samp>st_nil</samp>&rsquo;. Другой способ состоит в вызове метода объекта &lsquo;<samp>kill()</samp>&rsquo; или отправке сообщения &lsquo;<samp>kill</samp>&rsquo;. Удалять можно только объекты, которые размещены на решётке. Ни актёры, ни связанные с ними объекты, как например предметы в инвентаре игрока, не могут быть уничтожены &mdash; они просто будут игнорировать подобную попытку.
</p>
</dd>
<dt> <b>Сравнение объектов</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>obj1</var> == <var>obj2</var>
<var>obj1</var> ~= <var>obj2</var>
</pre></td></tr></table>
<p>Объекты можно непосредственно проверять на эквивалентность. Это сравнение сущностей, которое может подтвердить, что две ваши ссылки ссылаются на один и тот же объект.
</p>
</dd>
<dt> <b>Существование объекта</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>obj</var>:<b>exists</b>()
-<var>obj</var>                &mdash; унарный оператор отрицания перед объектом
if -<var>obj</var> then ...
</pre></td></tr></table>
<p>Ссылки на объекты могут стать недействительными после уничтожения объектов. Так как обращения к недоступным объектам просто будут игнорироваться, то в большинстве случаев это не проблема. Но если логика уровня зависит от существования объекта, можно вызвать метод &lsquo;<samp>exists()</samp>&rsquo; или просто предварить ссылку унарным оператором отрицания &lsquo;<samp>-</samp>&rsquo;. Оба способа возвращают простое значение булевого типа, сообщающее, действительна ли ещё ссылка на объект.
</p>
</dd>
<dt> <b>Сообщения:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>my_boulder</var>:<b>message</b>(&quot;<b>orientate</b>&quot;, <var>WEST</var>)
<var>my_boulder</var>:<b>orientate</b>(<var>EAST</var>)
<var>my_door</var>:<b>open</b>()
</pre></td></tr></table>
<p><a href="#Messages">Сообщения</a> &mdash; основная возможность Enigma. Их можно отправить напрямую каждому объекту методом &lsquo;<samp>message()</samp>&rsquo; или используя любое сообщение как сам вызов метода.
</p>
</dd>
<dt> <b>Классификация объектов:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>obj</var>:<b>is</b>(&quot;<b>st_chess</b>&quot;)
<var>obj</var>:<b>is</b>(&quot;<b>st</b>&quot;)
<var>obj</var>:<b>is</b>(&quot;<b>st_chess_black</b>&quot;)
</pre></td></tr></table>
<p>Новые объекты создаются с помощью задания типа объекта (см. раздел <a href="#Object-Kind">Тип объекта</a>). Позже заданный объект можно проверить на соответствие указанному классу или типу. Не смотря на то, что нельзя создавать объекты абстрактного типа, например &lsquo;<samp>st</samp>&rsquo;, таким образом можно проверить, является ли объект камнем. Проверка особых подтипов может даже определить текущее состояние или другие атрибуты объекта, чтобы сообщить о его текущей классификации.
</p>
</dd>
</dl>

<hr size="6">
<a name="Group-Tasks"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Object-Tasks" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Tiles-and-World-Tasks" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#API-2-Overview" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Group-Tasks-1"></a>
<h3 class="subsection">5.2.5 Работа с группами</h3>

<p>Подробности можно узнать в разделе <a href="#Group">Группа</a>.
</p>
<dl compact="compact">
<dt> <b>Создание групп:</b></dt>
<dd>
<table><tr><td>&nbsp;</td><td><pre class="example"><var>group</var> = <i>no</i>[&quot;<b>Atrax</b>#*&quot;]           &mdash; группа всех объектов с похожим названием
			        &mdash;   можно использовать маски &quot;*&quot;,&quot;?&quot;
<var>group</var> = <i>grp</i>(<var>obj1</var>, <var>obj2</var>, <var>obj3</var>)
<var>group</var> = <i>grp</i>({<var>obj1</var>, <var>obj2</var>, <var>obj3</var>})  &mdash; группа объектов собрана в список
</pre></td></tr></table>

<p>При правильном использовании масок, запрос объектов из хранилища именованных объектов вернёт группу объектов. Добавление звёздочки &lsquo;<samp>*</samp>&rsquo; к символу автоименования, решётке, вызовет все объекты, у которых в имени есть такой суффикс. Кроме того, группу можно создать и с помощью функции &lsquo;<samp>grp</samp>&rsquo;. Просто добавьте в качестве аргументов требуемые объектные ссылки, или по одной, или в виде списка.
</p>
</dd>
<dt> <b>Использование групп:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>floor_group</var>[&quot;<b>friction</b>&quot;] = <var>3.2</var>      &mdash; установить атрибут для всех покрытий в группе
<var>door_group</var>:<b>message</b>(&quot;<b>open</b>&quot;)
<var>door_group</var>:<b>open</b>()
<var>stone_group</var>:<b>kill</b>()
<i>wo</i>[<var>floor_group</var>] = {&quot;<b>it_coin_m</b>&quot;}   &mdash; положить немного денег на все участки покрытия

<i>wo</i>[<var>pos</var>] = {&quot;<b>st_switch</b>&quot;, <b>target</b>=<var>door_group</var>, <b>action</b>=&quot;<b>open</b>&quot;}
<i>wo</i>[<var>pos</var>] = {&quot;<b>st_switch</b>&quot;, <b>target</b>=&quot;<var>door</var>#*&quot;, <b>action</b>=&quot;<b>close</b>&quot;}
</pre></td></tr></table>
<p>Таким способом к группе можно применять многие операции над объектами. Операции будут применяться к каждому члену группы. Можно устанавливать атрибуты, посылать сообщения или вызывать любой метод.
</p>
<p>Объект мира тоже получает группу в качестве ключевого поля. Объекты указанного вида можно разместить в нескольких местах одновременно.
</p>
<p>Другое использование групп &mdash; их применение в качестве значений атрибутов. Например, используя группу, можно задать несколько целей.
</p>
</dd>
<dt> <b>Операции над группами:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>doors_lasers</var> = <var>doorgrp</var> + <var>lasergrp</var>       &mdash; объединение двух групп
<var>lasergrp</var>     = <var>doors_lasers</var> - <var>doorgrp</var>   &mdash; разность двух групп
<var>common_doors</var> = <var>doorgrp1</var> * <var>doorgrp2</var>      &mdash; пересечение двух групп
</pre></td></tr></table>
<p>Группы предлагают несколько стандартных операций, знакомых по работе с наборами.
</p>
</dd>
<dt> <b>Члены группы:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>count</var> = #<var>mygroup</var>        &mdash; количество объектов в группе
<var>obj</var>   = <var>mygroup</var>[<var>5</var>]     &mdash; 5-й объект группы
<var>obj</var>   = <var>mygroup</var>[<var>-1</var>]    &mdash; последний объект группы
for <var>i</var> = <var>1</var>, #<var>mygroup</var> do <var>obj</var> = <var>mygroup</var>[<var>i</var>] ... end
for <var>obj</var> in <var>mygroup</var> do ... end
</pre></td></tr></table>
<p>К членам группы можно обратиться по порядковым индексам. Размер группы сообщается стандартным оператором Lua, решёткой &lsquo;<samp>#</samp>&rsquo;. Если требуется последовательно перебирать все объекты группы, то можно просто написать циклы на Lua. Можно как использовать счётчик, так и напрямую перебирать содержимое объектов.
</p>
</dd>
<dt> <b>Перемешанная группа:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>shuffled_group</var> = <var>sorted_group</var>:<b>shuffle</b>()
<var>shuffled_group</var> = <i>no</i>[&quot;<b>Atrax</b>#*&quot;]:<b>shuffle</b>()
</pre></td></tr></table>
<p>После получения сообщения &quot;<code>shuffle</code>&quot;, любая группа вернёт перемешанную группу, состоящую из её элементов.
</p>
</dd>
<dt> <b>Отсортированная группа:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>sorted_group</var> = <var>group</var>:<b>sort</b>(&quot;<b>linear</b>&quot;, po(<var>2</var>, <var>1</var>))
<var>sorted_group</var> = <var>group</var>:<b>sort</b>(&quot;<b>linear</b>&quot;)
<var>sorted_group</var> = <var>group</var>:<b>sort</b>(&quot;<b>circular</b>&quot;)
<var>sorted_group</var> = <var>group</var>:<b>sort</b>()
</pre></td></tr></table>
<p>Линейно сортирует группу в порядке, заданном вектором направления или первыми двумя объектами, или же связывает каждый объект с центральным. Если аргумент не задан, то объекты сортируются лексически.
</p>
</dd>
<dt> <b>Отделение подгруппы:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>sub_group</var> = <var>group</var>:<b>sub</b>(<var>2</var>)   &mdash; первые два объекта
<var>sub_group</var> = <var>group</var>:<b>sub</b>(<var>-2</var>)  &mdash; последние два объекта
<var>sub_group</var> = <var>group</var>:<b>sub</b>(<var>2</var>, <var>4</var>) &mdash; объекты со 2 по 4
<var>sub_group</var> = <var>group</var>:<b>sub</b>(<var>2</var>, <var>-2</var>) &mdash; два объекта, начиная со 2
</pre></td></tr></table>
<p>По заданным индексам и числам формирует подгруппу.
</p>
</dd>
<dt> <b>Ближайший объект:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>object</var> = <var>group</var>:<b>nearest</b>(<var>reference</var>)
</pre></td></tr></table>
<p>Ищет в группе объект, ближайший к указанному.
</p></dd>
</dl>

<hr size="6">
<a name="Tiles-and-World-Tasks"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Group-Tasks" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Named-Positions-Tasks" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#API-2-Overview" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Tiles-and-World-Tasks-1"></a>
<h3 class="subsection">5.2.6 Работа с секциями и миром</h3>

<p>Подробности можно узнать в разделах <a href="#Tile-and-Object-Declaration">Описание секций и объектов</a>, <a href="#Tiles-Repository">Хранилище секций</a> и <a href="#World">Мир</a>.
</p>
<dl compact="compact">
<dt> <b>Секции:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><i>ti</i>[&quot;<var>_</var>&quot;] = {&quot;<b>fl_sahara</b>&quot;}
<i>ti</i>[&quot;<var>__</var>&quot;] = {&quot;<b>fl_sahara</b>&quot;}
<i>ti</i>[&quot;<var>..</var>&quot;] = {&quot;<b>fl_sand</b>&quot;}
<i>ti</i>[&quot;<var>##</var>&quot;] = {&quot;<b>st_blocker</b>&quot;}
<i>ti</i>[&quot;<var>switch_template</var>&quot;] = {&quot;<b>st_switch</b>&quot;}
<i>ti</i>[&quot;<var>..</var>&quot;] = {&quot;<b>fl_abyss</b>&quot;}   &mdash; переопределение приводит к ошибке, чтобы исключить работу с неверными данными
<i>ti</i>[&quot;<var>.w</var>&quot;] = <i>ti</i>[&quot;<var>..</var>&quot;] .. {&quot;<b>it_magicwand</b>&quot;}
<i>ti</i>[&quot;<var> w</var>&quot;] = {&quot;<b>fl_abyss</b>&quot;} .. <i>ti</i>({&quot;<b>it_magicwand</b>&quot;})
</pre></td></tr></table>
<p>Хранилище секций &lsquo;<samp>ti</samp>&rsquo; напоминает список, но ориентированный на хранение определений секций. В качестве ключевого поля разрешается использовать любую строку. Одно и то же определение можно хранить в двух разных ключевых полях. Но уже заполненное ключевое поле переопределить нельзя. Это сделано исключительно с целью защиты от часто возникающих ошибочных ситуаций. Находящееся в хранилище определение может использоваться в последующих определениях. Обращение к записи в хранилище секций по заданному ключевому полю в виде &lsquo;<samp>ti[&quot;..&quot;]</samp>&rsquo; возвращает значение секции. Такие значения секций могут быть объединены оператором &lsquo;<samp>..</samp>&rsquo; с другими значениями секций и анонимными списками, содержащими определения объектов. Последний пример &mdash; это объединение двух ранее не объявленных определений объектов. Нельзя объединить два анонимных списка. В Lua это запрещено. Объединение становится возможным после преобразования любого из двух списков в значение секции с помощью оператора &lsquo;<samp>ti()</samp>&rsquo;.
</p>
</dd>
<dt> <b>Заполнение мира:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">  <var>width</var>, <var>height</var> = <i>wo</i>(<i>ti</i>, &quot;<var>__</var>&quot;, { &mdash; второй аргумент: ключевое поле секции (по умолчанию), которое 
  &quot;<var>##__......</var>&quot;,                  &mdash;   также задаёт основу &mdash; в этом примере
  &quot;<var>##..__.w__</var>&quot;,                  &mdash;   для каждой секции/ячейки отводится 2 символа
  &quot;<var>##.. w__..</var>&quot;
  })
</pre></td></tr></table>
<p>Мир заполняется вызовом &lsquo;<samp>wo()</samp>&rsquo;, который подробно рассматривается в разделе <a href="#World-Creation">Создание мира</a>. В простой форме в качестве первого аргумента передаётся &lsquo;<samp>ti</samp>&rsquo;. Второй аргумент &mdash; код определения секции по умолчанию, который задаёт покрытие по умолчанию, которое будет установлено, если в секции нет другого объекта покрытия. Кроме того, своим размером этот код задаёт стандартную длину кода, используемого в последующей карте. Третий аргумент &mdash; карта, задаваемая анонимными списками строк. Размер мира задаётся максимальной длиной передаваемых строк и их количеством. Эти значения возвращаются вызовом.
</p>
</dd>
</dl>

<hr size="6">
<a name="Named-Positions-Tasks"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Tiles-and-World-Tasks" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Advanced-Lua-Examples" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#API-2-Overview" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Named-Positions-Tasks-1"></a>
<h3 class="subsection">5.2.7 Работа с именованными позициями</h3>

<p>Подробности можно узнать в разделе <a href="#PositionList">PositionList</a>.
</p>
<dl compact="compact">
<dt> <b>Использование именованных позиций:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>obj</var>[&quot;<b>name</b>&quot;] = &quot;<var>anchor1</var>&quot;
<var>obj</var>:<b>kill</b>()
<var>pos</var> = <i>po</i>[&quot;<var>anchor1</var>&quot;]
<i>po</i>[&quot;<var>anchor2</var>&quot;] = <var>pos</var>
</pre></td></tr></table>
<p>Позиция любого именованного объекта может быть получено напрямую. После того, как объект уничтожен, его позиция всё ещё доступна по имени. Кроме того, можно самому давать позициям имена. Следует заметить, что у позиции существующего объекта больший приоритет, чем у простой позиции с тем же именем.
</p>
</dd>
<dt> <b>Создание списков позиций:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>polist</var> = <i>po</i>[&quot;<var>deepwater</var>#*&quot;]
<var>polist</var> = <i>po</i>(<var>grp</var>)
</pre></td></tr></table>
<p>При правильном использовании шаблонов, на запрос позиций будет выдан список позиций. В список позиций можно преобразовать и указанную группу объектов.
</p>
</dd>
<dt> <b>Использование списка позиций:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><i>wo</i>[<var>polist</var>] = <i>ti</i>[&quot;<var>x</var>&quot;]
<var>grp</var> = <i>fl</i>(<var>polist</var>)
</pre></td></tr></table>
<p>Список позиций можно использовать для установки секций или получения групп покрытий, предметов, камней.
</p>
</dd>
<dt> <b>Операции со списком позиций:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><i>wo</i>[<var>polist</var> .. <i>po</i>[&quot;<var>beach</var>#*&quot;]] = {&quot;<b>it_banana</b>&quot;}
</pre></td></tr></table>
<p>Два списка позиций можно объединить. Также к списку позиций можно добавлять отдельные позиции.
</p>
</dd>
<dt> <b>Элементы списка позиций:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">for <var>i</var> = 1, #<var>polist</var> do
    <i>wo</i>[<var>polist</var>[<var>i</var>]] = {&quot;<b>it_cherry</b>&quot;}
end
</pre></td></tr></table>
<p>К отдельным элемента списка позиций можно обратиться по индексу. Обработать весь список можно с помощью простого цикла (for). Оператор &quot;решётка&quot; (&lsquo;#&rsquo;) возвращает количество позиций в списке.
</p>
</dd>
</dl>


<hr size="6">
<a name="Advanced-Lua-Examples"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Named-Positions-Tasks" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Color-Maze" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Advanced-Lua-Examples-1"></a>
<h2 class="section">5.3 Примеры сложных уровней на языке Lua</h2>

<p>Пришло время показать настоящую мощь нового API. Давайте опять посмотрим на два существующих уровня. Сначала поиграйте на уровнях, чтобы исследовать их, а потом приступим к комментированию каждой строки исходного кода, чтобы понять, как реализовать собственные идеи уровней.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Color-Maze">5.3.1 Color Maze</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">    Пакет уровней Enigma VIII, уровень #19
</td></tr>
<tr><td align="left" valign="top"><a href="#Weirdly-Wired">5.3.2 Weirdly Wired</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"> Пакет уровней Enigma VIII, уровень #22
</td></tr>
</table>


<hr size="6">
<a name="Color-Maze"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Advanced-Lua-Examples" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Weirdly-Wired" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Lua-Examples" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Color-Maze-1"></a>
<h3 class="subsection">5.3.1 Color Maze</h3>

<p>Давайте посмотрим на часть исходного кода уровня, написанную на Lua. В первые две колонки мы добавили номера строк, чтобы на них можно было ссылаться в этом разделе. Эти номера строк не являются частью самого исходного кода!
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">01    <i>wo</i>[&quot;<b>ConserveLevel</b>&quot;] = <var>false</var>
02    <i>wo</i>[&quot;<b>FollowGrid</b>&quot;] = <var>false</var>
03    <i>wo</i>[&quot;<b>FollowMethod</b>&quot;] = <var>FOLLOW_SCROLL</var>
04
05    <i>ti</i>[&quot;<var> </var>&quot;] = {&quot;<b>fl_fake_abyss</b>&quot;} .. <i>ti</i>({&quot;<b>st_lightglass</b>&quot;})
06
07    <i>ti</i>[&quot;<var>!</var>&quot;] = {&quot;<b>fl_blueslab</b>&quot;, &quot;<var>blue#</var>&quot;, <var>_color</var>=&quot;<var>blue</var>&quot;}
08    <i>ti</i>[&quot;<var>@</var>&quot;] = {&quot;<b>fl_pinkbumps</b>&quot;, &quot;<var>orange#</var>&quot;, <var>_color</var>=&quot;<var>orange</var>&quot;}
09    <i>ti</i>[&quot;<var>#</var>&quot;] = {&quot;<b>fl_redslab</b>&quot;, &quot;<var>red#</var>&quot;, <var>_color</var>=&quot;<var>red</var>&quot;}
10    <i>ti</i>[&quot;<var>$</var>&quot;] = {&quot;<b>fl_lawn_b</b>&quot;, &quot;<var>green#</var>&quot;, <var>_color</var>=&quot;<var>green</var>&quot;}
11
12    <i>ti</i>[&quot;<var>b</var>&quot;] = <i>ti</i>[&quot;<var>!</var>&quot;] .. {&quot;<b>st_door</b>&quot;, <b>flavor</b>=&quot;<var>d</var>&quot;, <b>faces</b>=&quot;<var>ns</var>&quot;, <b>state</b>=<var>OPEN</var>}
13    <i>ti</i>[&quot;<var>B</var>&quot;] = <i>ti</i>[&quot;<var>!</var>&quot;] .. {&quot;<b>st_door</b>&quot;, <b>flavor</b>=&quot;<var>d</var>&quot;, <b>faces</b>=&quot;<var>ew</var>&quot;, <b>state</b>=<var>OPEN</var>}
14    <i>ti</i>[&quot;<var>o</var>&quot;] = <i>ti</i>[&quot;<var>@</var>&quot;] .. {&quot;<b>st_door</b>&quot;, <b>flavor</b>=&quot;<var>d</var>&quot;, <b>faces</b>=&quot;<var>ns</var>&quot;, <b>state</b>=<var>OPEN</var>}
15    <i>ti</i>[&quot;<var>O</var>&quot;] = <i>ti</i>[&quot;<var>@</var>&quot;] .. {&quot;<b>st_door</b>&quot;, <b>flavor</b>=&quot;<var>d</var>&quot;, <b>faces</b>=&quot;<var>ew</var>&quot;, <b>state</b>=<var>OPEN</var>}
16    <i>ti</i>[&quot;<var>r</var>&quot;] = <i>ti</i>[&quot;<var>#</var>&quot;] .. {&quot;<b>st_door</b>&quot;, <b>flavor</b>=&quot;<var>d</var>&quot;, <b>faces</b>=&quot;<var>ns</var>&quot;, <b>state</b>=<var>OPEN</var>}
17    <i>ti</i>[&quot;<var>R</var>&quot;] = <i>ti</i>[&quot;<var>#</var>&quot;] .. {&quot;<b>st_door</b>&quot;, <b>flavor</b>=&quot;<var>d</var>&quot;, <b>faces</b>=&quot;<var>ew</var>&quot;, <b>state</b>=<var>OPEN</var>}
18    <i>ti</i>[&quot;<var>g</var>&quot;] = <i>ti</i>[&quot;<var>$</var>&quot;] .. {&quot;<b>st_door</b>&quot;, <b>flavor</b>=&quot;<var>d</var>&quot;, <b>faces</b>=&quot;<var>ns</var>&quot;, <b>state</b>=<var>OPEN</var>}
19    <i>ti</i>[&quot;<var>G</var>&quot;] = <i>ti</i>[&quot;<var>$</var>&quot;] .. {&quot;<b>st_door</b>&quot;, <b>flavor</b>=&quot;<var>d</var>&quot;, <b>faces</b>=&quot;<var>ew</var>&quot;, <b>state</b>=<var>OPEN</var>}
20
21    <i>ti</i>[&quot;<var>d</var>&quot;] = {&quot;<b>it_document</b>&quot;, <b>text</b>=&quot;<var>text1</var>&quot;}
22    <i>ti</i>[&quot;<var>5</var>&quot;] = <i>ti</i>[&quot;<var>b</var>&quot;] .. <i>ti</i>[&quot;<var>d</var>&quot;]
23    <i>ti</i>[&quot;<var>6</var>&quot;] = <i>ti</i>[&quot;<var>O</var>&quot;] .. <i>ti</i>[&quot;<var>d</var>&quot;]
24    <i>ti</i>[&quot;<var>7</var>&quot;] = <i>ti</i>[&quot;<var>r</var>&quot;] .. <i>ti</i>[&quot;<var>d</var>&quot;]
25    <i>ti</i>[&quot;<var>8</var>&quot;] = <i>ti</i>[&quot;<var>G</var>&quot;] .. <i>ti</i>[&quot;<var>d</var>&quot;]
26
27    <i>ti</i>[&quot;<var>x</var>&quot;] = {&quot;<b>it_sensor</b>&quot;, <b>invisible</b>=<var>true</var>, <b>target</b>=&quot;<var>gates</var>&quot;}
28    <i>ti</i>[&quot;<var>*</var>&quot;] = <i>ti</i>[&quot;<var>x</var>&quot;] .. {&quot;#<b>ac_marble_black</b>&quot;, &quot;<var>me</var>&quot;}
29
30    <i>ti</i>[&quot;<var>?</var>&quot;] = {&quot;<b>st_oxyd_a</b>&quot;}
31
32    <i>wo</i>(<i>ti</i>, &quot;<var> </var>&quot;, {
33    --      |         1    1   |2    2
34    --      |1   5    0    5   |0    5
35           &quot;<var>                           </var>&quot;,
36           &quot;<var> xO@OxR#RxO@OxB!BxR#RxB!Bx </var>&quot;, --01
37           &quot;<var> b   r   g   g   b   g   r </var>&quot;,
38           &quot;<var> !   #   $   $   !   $   # </var>&quot;,
39           &quot;<var> b   r   g   g   b   g   r </var>&quot;,
40           &quot;<var> xR#RxB!BxO@OxG$GxO@OxO@Ox </var>&quot;, --05
41           &quot;<var> g   g   r   g   g   b   b </var>&quot;,
42           &quot;<var> $   $   #   $   $   !   ! </var>&quot;,
43           &quot;<var> g   g   r   g   g   b   b </var>&quot;,
44           &quot;<var> xR#RxO@OxG$GxR#RxG$GxR#Rx </var>&quot;,
45           &quot;<var> g   b   b   o       b   r </var>&quot;, --10
46           &quot;<var> $   !   !   @       !   # </var>&quot;,
47           &quot;<var> g   b   5   o   ?   b   r </var>&quot;, --
48           &quot;<var> xO@OxO@6*8$Gx   xG$GxR#Rx </var>&quot;,
49           &quot;<var> r   b   7   b   ?   o   o </var>&quot;,
50           &quot;<var> #   !   #   !       @   @ </var>&quot;, --15
51           &quot;<var> r   b   r   b       o   o </var>&quot;,
52           &quot;<var> xG$GxB!BxR#RxO@OxR#RxG$Gx </var>&quot;,
53           &quot;<var> g   o   o   g   g   o   b </var>&quot;,
54           &quot;<var> $   @   @   $   $   @   ! </var>&quot;,
55           &quot;<var> g   o   o   g   g   o   b </var>&quot;, --20
56           &quot;<var> xB!BxO@OxR#RxR#RxO@OxB!Bx </var>&quot;,
57           &quot;<var> o   r   g   g   b   b   g </var>&quot;,
58           &quot;<var> @   #   $   $   !   !   $ </var>&quot;,
59           &quot;<var> o   r   g   g   b   b   g </var>&quot;, --
60           &quot;<var> xR#RxB!BxB!BxR#RxO@OxR#Rx </var>&quot;, --25
61           &quot;<var>                           </var>&quot;} --
62    --      |         1    1   |2    2
63    --      |1   5    0    5   |0    5
64    )
65
66    <var>last</var> = <b>it</b>(<i>no</i>[&quot;<var>me</var>&quot;])   -- the last visited sensor
67    <var>move</var> = <var>0</var>              -- the count of link moves
68    <var>sequence</var> = {}         -- the sequence of the 4 colors that the user did choose
69
70    function <var>gates</var>(<var>value</var>, <var>sender</var>)
71        if <var>last</var> ~= <var>sender</var> then
72            local <var>middle</var> = <var>last</var> + (<var>sender</var> - <var>last</var>)/<var>2</var>
73            local <var>color</var> = <b>fl</b>(<var>middle</var>)[&quot;<var>_color</var>&quot;]
74            if <var>color</var> == <var>nil</var> then return end  -- someone cheated, avoid throwing an exception
75            <b>st</b>(<i>no</i>[<var>color</var>..&quot;<var>#*</var>&quot;]):<b>close</b>()
76            <var>sequence</var>[<var>move</var>%<var>4</var>] = <var>color</var>
77            if <var>move</var> &gt;= <var>3</var> then
78                <b>st</b>(<i>no</i>[<var>sequence</var>[(<var>move</var>+<var>1</var>)%<var>4</var>]..&quot;<var>#*</var>&quot;]):<b>open</b>()
79            end
80            <var>move</var> = <var>move</var> + <var>1</var>
81            <var>last</var> = <var>sender</var>
82        end
83    end
</pre></td></tr></table>

<p>Давайте сосредоточимся на новых аспектах, не обсуждавшихся ранее в разделе <a href="#Basic-Lua-Examples">Примеры простых уровней на языке Lua</a>.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">01    <i>wo</i>[&quot;<b>ConserveLevel</b>&quot;] = <var>false</var>
02    <i>wo</i>[&quot;<b>FollowGrid</b>&quot;] = <var>false</var>
03    <i>wo</i>[&quot;<b>FollowMethod</b>&quot;] = <var>FOLLOW_SCROLL</var>
</pre></td></tr></table>
<p>Этот уровень должен запрещать пользователю воскрешать шарик в начальной позиции. В то же время пользователь должен видеть окружающую его местность как можно полнее. Поэтому нужно установить и режим прокрутки. Всё это делается установкой специальных глобальных атрибутов (см. раздел <a href="#Global-Attributes">Глобальные атрибуты</a>).
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">05    <i>ti</i>[&quot;<var> </var>&quot;] = {&quot;<b>fl_fake_abyss</b>&quot;} .. <i>ti</i>({&quot;<b>st_lightglass</b>&quot;})
32    <i>wo</i>(<i>ti</i>, &quot;<var> </var>&quot;, {
</pre></td></tr></table>
<p>Недоступные места были заполнены прозрачным стеклом на чёрном покрытии, как указано в строке 5. Заполнение мира использует это определение секции в качестве секции по умолчанию. Если оно содержит определение покрытия, то всё в порядке. Дополнительные объекты, такие как стеклянные камни, при использовании по умолчанию никогда не будут размещены.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">07    <i>ti</i>[&quot;<var>!</var>&quot;] = {&quot;<b>fl_blueslab</b>&quot;, &quot;<var>blue#</var>&quot;, <var>_color</var>=&quot;<var>blue</var>&quot;}
08    <i>ti</i>[&quot;<var>@</var>&quot;] = {&quot;<b>fl_pinkbumps</b>&quot;, &quot;<var>orange#</var>&quot;, <var>_color</var>=&quot;<var>orange</var>&quot;}
09    <i>ti</i>[&quot;<var>#</var>&quot;] = {&quot;<b>fl_redslab</b>&quot;, &quot;<var>red#</var>&quot;, <var>_color</var>=&quot;<var>red</var>&quot;}
10    <i>ti</i>[&quot;<var>$</var>&quot;] = {&quot;<b>fl_lawn_b</b>&quot;, &quot;<var>green#</var>&quot;, <var>_color</var>=&quot;<var>green</var>&quot;}
</pre></td></tr></table>
<p>Каждому объекту покрытия присваивается автоматически сгенерированное имя, чтобы позже можно было обратиться к группе. К тому же каждый объект покрытия устанавливает пользовательский атрибут, добавляемый после его имени и предваряемый символом подчёркивания &lsquo;<samp>_</samp>&rsquo;. Этот атрибут хранит строку, которая позже понадобится нам в функции обратного вызова.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">12    <i>ti</i>[&quot;<var>b</var>&quot;] = <i>ti</i>[&quot;<var>!</var>&quot;] .. {&quot;<b>st_door</b>&quot;, <b>flavor</b>=&quot;<var>d</var>&quot;, <b>faces</b>=&quot;<var>ns</var>&quot;, <b>state</b>=<var>OPEN</var>}
13    <i>ti</i>[&quot;<var>B</var>&quot;] = <i>ti</i>[&quot;<var>!</var>&quot;] .. {&quot;<b>st_door</b>&quot;, <b>flavor</b>=&quot;<var>d</var>&quot;, <b>faces</b>=&quot;<var>ew</var>&quot;, <b>state</b>=<var>OPEN</var>}
</pre></td></tr></table>
<p>Двери размещаются без присвоения им имён, потому что мы будем использовать их как цели, определяемые их позицией.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">27    <i>ti</i>[&quot;<var>x</var>&quot;] = {&quot;<b>it_sensor</b>&quot;, <b>invisible</b>=<var>true</var>, <b>target</b>=&quot;<var>gates</var>&quot;}
</pre></td></tr></table>
<p>Шаги актёров обнаруживаются невидимыми <a href="#it_005fsensor">it_sensor</a>ами, которые размещаются на каждом пересечении. Их целью является <a href="#Callback-Function">Функция обратного вызова</a> &lsquo;<samp>gates</samp>&rsquo;. Можно опустить действие, так как имя функции представляет собой уникальную цель.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">66    <var>last</var> = <b>it</b>(<i>no</i>[&quot;<var>me</var>&quot;])   &mdash; последний пройденный датчик
</pre></td></tr></table>
<p>Переменная Lua, в которой хранится последний пройденный шариком датчик. Изначально он указывает начальную позицию шарика. Мы обращаемся к шарику по имени, а под ним сохраняем предмет датчика, который представляет собой безымянный объект.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">67    <var>move</var> = <var>0</var>              &mdash; количество переходов через сенсоры
68    <var>sequence</var> = {}         &mdash; последовательность из 4 цветов, которую выбрал пользователь
</pre></td></tr></table>
<p>Это важные переменные для нашего алгоритма. Пользователь волен выбирать любую последовательность разноцветных поверхностей. Изначально мы задаём для последовательности анонимный список, который будет заполнен названиями цветов. Дополнительный счётчик перемещений предоставляет нам текущий индекс в этом списке.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">70    function <var>gates</var>(<var>value</var>, <var>sender</var>)
71        if <var>last</var> ~= <var>sender</var> then
</pre></td></tr></table>
<p>Функция обратного вызова даёт нам возможность работать с отправителем, <a href="#it_005fsensor">it_sensor</a>, который вызывает действие. Это текущий датчик. Так как шарик может вернуться к последнему датчику, то перед тем как предпринимать какие-либо действия, мы должны убедиться, что это новый датчик. Достаточно простого сравнения объектов.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">72            local <var>middle</var> = <var>last</var> + (<var>sender</var> - <var>last</var>)/<var>2</var>
73            local <var>color</var> = <b>fl</b>(<var>middle</var>)[&quot;<var>_color</var>&quot;]
</pre></td></tr></table>
<p>Нам нужно знать цвет полоски покрытия, по котороой прошёл шарик. Мы вычисляем позицию центра этой полоски покрытия, применяя расчёт позиции. Мы просто получаем среднюю позицию между предыдущим и текущим пересечением. Как только у нас появится средняя позиция, мы можем узнать объект покрытия и получить частный пользовательский атрибут с описанием цвета.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">74            if <var>color</var> == <var>nil</var> then return end  &mdash; если кто-то жульничает, то не производим никаких действий
</pre></td></tr></table>
<p>При обычной игре мы гарантировано получим значение цвета. Но, если игрок жульничает, он может передвигаться неожиданным способом, избегая прохода соседних датчиков. Нужно просто избежать ошибок. Игрок в любом из предусмотренных случаев не получит очков.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">75            <b>st</b>(<i>no</i>[<var>color</var>..&quot;<var>#*</var>&quot;]):<b>close</b>()
</pre></td></tr></table>
<p>Зная цвет, мы хотим закрыть все двери, расположенные на полосках покрытия того же цвета. Мы автоматически дали имена покрытиям, добавив соответствующие приставки к их именам. Таким образом мы можем получить все покрытия заданного цвета, объединив строку с названием цвета и суффикс &lsquo;<samp>#*</samp>&rsquo; и обратившись к хранилищу именованных объектов. Так как нас интересуют двери, мы обращаемся к камням на каждом покрытии. Мы передаём группу покрытий и получаем группу камней. Не на каждом покрытии есть дверь. Это не имеет значения, потому что в результирующую группу камней добавляются только существующие объекты. Определив камни, мы просто посылаем всем им сообщение &lsquo;<samp>close</samp>&rsquo;.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">76            <var>sequence</var>[<var>move</var>%<var>4</var>] = <var>color</var>
</pre></td></tr></table>
<p>Нам нужно помнить последовательность цветов. Мы просто храним название цвета в списке под индексом, полученным по количеству шагов по модулю 4 (остаток от деления кол-ва шагов на 4 &mdash; прим. перев.). Мы, конечно, могли бы ограничить это выражение первыми четырьмя шагами. Но зачем? Операция взятия остатка проще, чем условные выражения.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">77            if <var>move</var> &gt;= <var>3</var> then
78                <b>st</b>(<i>no</i>[<var>sequence</var>[(<var>move</var>+<var>1</var>)%<var>4</var>]..&quot;<var>#*</var>&quot;]):<b>open</b>()
79            end
</pre></td></tr></table>
<p>На первых 3 шагах мы просто закрываем двери и запоминаем последовательность цветов. Но, начиная с 4-го шага, нам нужно открыть следующий цвет в последовательности. Мы получаем строку со следующим цветом из списка последовательностей с помощью простого взятия остатка. Получив название цвета, мы делаем тот же трюк, что и в строке 75. Но на этот раз мы посылаем всем связанным дверям сообщения &lsquo;<samp>open</samp>&rsquo;.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">80            <var>move</var> = <var>move</var> + <var>1</var>
81            <var>last</var> = <var>sender</var>
</pre></td></tr></table>
<p>Наконец, нам нужно просто увеличить количество шагов и запомнить текущего отправителя, как последний посещённый датчик.
</p>
<p>Вот и всё, что нужно запрограммировать для реализации такой сложной идеи уровня, как &quot;Color Maze&quot;.
</p>
<hr size="6">
<a name="Weirdly-Wired"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Color-Maze" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Introduction-to-Datatypes" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Lua-Examples" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Weirdly-Wired-1"></a>
<h3 class="subsection">5.3.2 Weirdly Wired</h3>
<p>Чтобы заметить изменения в оформлении узора на покрытии и граничных камней панели, не говоря уже о различных способах динамической связи камней с помошью ot_wire, следует несколько раз перезапустить уровень.
</p>
<p>Давайте посмотрим на часть исходного кода уровня, написанную на Lua. В первые две колонки мы добавили номера строк, чтобы на них можно было ссылаться в этом разделе. Эти номера строк не являются частью самого исходного кода!
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">01      &lt;el:compatibility el:enigma=&quot;1.10&quot;&gt;
02         &lt;el:dependency el:path=&quot;lib/libmath&quot; el:id=&quot;lib/libmath&quot; el:release=&quot;1&quot; el:preload=&quot;true&quot;/&gt;
03      &lt;/el:compatibility&gt;
...
04    <i>ti</i>[&quot;<var> </var>&quot;] = {&quot;<b>fl_sahara</b>&quot;, <b>friction</b> = <var>3.5</var>, <b>adhesion</b> = <var>4.0</var>}
05    <i>ti</i>[&quot;<var>a</var>&quot;] = {&quot;<b>fl_ivory</b>&quot;, <b>friction</b> = <var>3.5</var>, <b>adhesion</b> = <var>4.0</var>}
06    <i>ti</i>[&quot;<var>b</var>&quot;] = {&quot;<b>fl_bright</b>&quot;, <b>friction</b> = <var>3.5</var>, <b>adhesion</b> = <var>4.0</var>}
07    <i>ti</i>[&quot;<var>c</var>&quot;] = {&quot;<b>fl_platinum</b>&quot;, <b>friction</b> = <var>3.5</var>, <b>adhesion</b> = <var>4.0</var>}
08    <i>ti</i>[&quot;<var>_</var>&quot;] = {&quot;<b>fl_water</b>&quot;}
09    <i>ti</i>[&quot;<var>@</var>&quot;] = {&quot;#<b>ac_marble_black</b>&quot;}
10    <i>ti</i>[&quot;<var>w</var>&quot;] = {&quot;<b>st_flat_movable</b>&quot;, &quot;<var>wood</var>#&quot;}
11    <i>ti</i>[&quot;<var>t</var>&quot;] = {&quot;<b>it_trigger</b>&quot;, &quot;<var>trigger</var>#&quot;}
12    <i>ti</i>[&quot;<var>d</var>&quot;] = {&quot;<b>st_blocker</b>&quot;, &quot;<var>door</var>#&quot;}
13    <i>ti</i>[&quot;<var>o</var>&quot;] = {&quot;<b>st_oxyd</b>&quot;, <b>oxydcolor</b> = <var>OXYD_YELLOW</var>, <b>flavor</b> = &quot;<var>a</var>&quot;}
14    <i>ti</i>[&quot;<var>O</var>&quot;] = {&quot;<b>st_oxyd</b>&quot;, <b>oxydcolor</b> = <var>OXYD_WHITE</var>, <b>flavor</b> = &quot;<var>a</var>&quot;}
15    <i>ti</i>[&quot;<var>1</var>&quot;] = {&quot;<b>st_panel</b>&quot;, <b>cluster</b> = <var>1</var>}
16    <i>ti</i>[&quot;<var>2</var>&quot;] = {&quot;<b>st_panel</b>&quot;, <b>cluster</b> = <var>2</var>}
17    <i>ti</i>[&quot;<var>S</var>&quot;] = {&quot;<b>st_switch</b>&quot;, <b>target</b> = &quot;<var>easy_mode_call</var>&quot;}
18
19    <var>floors</var>  = {<i>ti</i>[&quot;<var> </var>&quot;], <i>ti</i>[&quot;<var>a</var>&quot;], <i>ti</i>[&quot;<var>b</var>&quot;], <i>ti</i>[&quot;<var>c</var>&quot;]}
20    <var>polynom</var> = <i>lib</i>.<i>math</i>.<i>random_vector</i>(<var>10</var>, <var>4</var>)
21
22    function <var>myresolver</var>(<var>key</var>, <var>x</var>, <var>y</var>)
23      if <var>key</var> == &quot;<var> </var>&quot; then
24        return <var>floors</var>[<i>lib</i>.<i>math</i>.<i>cubic_polynomial</i>(<var>polynom</var>, <var>x</var>, <var>y</var>) % (#<var>floors</var>) + <var>1</var>]
25      elseif    (<var>key</var> == &quot;<var>#</var>&quot;)
26            or ((<var>key</var> == &quot;<var>_</var>&quot;) and (<i>random</i>(<var>4</var>) == <var>1</var>))
27            or ((<var>key</var> == &quot;<var>S</var>&quot;) and <i>wo</i>[&quot;<b>IsDifficult</b>&quot;]) then
28        return <i>ti</i>[&quot;&quot;..<i>random</i>(<var>2</var>)]
29      else
30        return <i>ti</i>[<var>key</var>]
31      end
32    end
33
34    <var>w</var>, <var>h</var> = <i>wo</i>(<var>myresolver</var>, &quot;<var> </var>&quot;, {
35     -- 01234567890123456789
36       &quot;<var>####################___________________</var>&quot;,
37       &quot;<var>#                  #_____###o###_______</var>&quot;,
38       &quot;<var>#   w   w t   t    #_____#d   d#_______</var>&quot;,
39       &quot;<var>#     w   w t   t  #___### ### ###_____</var>&quot;,
40       &quot;<var>#  w     t         #___#d d#_#d d#_____</var>&quot;,
41       &quot;<var>#                  ##### ###_### ###___</var>&quot;,
42       &quot;<var>S    w   w t @ t        d#___#_#d d#___</var>&quot;,
43       &quot;<var>#                  #######_####### #___</var>&quot;,
44       &quot;<var>#  w     t         #_______O  d# # o___</var>&quot;,
45       &quot;<var>#     w   w t   t  #_______### ### #___</var>&quot;,
46       &quot;<var>#   w   w t   t    #_________#d   d#___</var>&quot;,
47       &quot;<var>#                  #_________###O###___</var>&quot;,
48       &quot;<var>####################___________________</var>&quot;
49    })
50
51    <var>door_p</var> = <i>lib</i>.<i>math</i>.<i>permutation</i>(<var>12</var>)
52    <var>wire_p</var> = <i>lib</i>.<i>math</i>.<i>permutation</i>(<var>12</var>)
53    <var>woods</var> = <i>no</i>[&quot;<var>wood</var>#*&quot;]
54    <var>triggers</var> = <i>no</i>[&quot;<var>trigger</var>#*&quot;]
55    <var>doors</var> = <i>no</i>[&quot;<var>door</var>#*&quot;]
56
57    for <var>j</var> = <var>1</var>, <var>12</var> do
58      <var>triggers</var>[<var>j</var>].<b>target</b> = <var>doors</var>[<var>door_p</var>[<var>j</var>]]
59    end
60
61    for <var>j</var> = <var>1</var>, <var>9</var> do
62      <i>wo</i>:<b>add</b>({&quot;<b>ot_wire</b>&quot;,
63              <b>anchor1</b> = <var>woods</var>[<var>wire_p</var>[<var>j</var> + <var>3</var>]],
64              <b>anchor2</b> = <var>woods</var>[<var>wire_p</var>[<var>j</var>%<var>3</var> + <var>1</var>]]})
65      <i>wo</i>:<b>add</b>({&quot;<b>ot_wire</b>&quot;, <b>name</b> = &quot;<var>obsolete_wire</var>#&quot;,
66              <b>anchor1</b> = <var>woods</var>[<var>wire_p</var>[<var>j</var> + <var>3</var>]],
67              <b>anchor2</b> = <var>woods</var>[<var>wire_p</var>[<var>j</var>%<var>9</var> + <var>4</var>]]})
68    end
69
70    function <var>easy_mode_call</var>(<var>is_on</var>, <var>sender</var>)
71      if <var>is_on</var> then
72        <i>no</i>[&quot;<var>obsolete_wire</var>#*&quot;]:<b>kill</b>()
73      else
74        for <var>j</var> = <var>1</var>, <var>9</var> do
75          <i>wo</i>:<b>add</b>({&quot;<b>ot_wire</b>&quot;, <b>name</b> = &quot;<var>obsolete_wire</var>#&quot;,
76             	  <b>anchor1</b> = <var>woods</var>[<var>wire_p</var>[<var>j</var> + <var>3</var>]],
77                <b>anchor2</b> = <var>woods</var>[<var>wire_p</var>[<var>j</var>%<var>9</var> + <var>4</var>]]})
78        end
79      end
80    end
</pre></td></tr></table>
<p>За счёт чего достигается такая изменчивость в оформлении и действиях, ведь последние строки с 69 по 79 явно предназначены только для реализации различий между обычным и упрощённым режимом? Давайте проанализируем строки, которые выполняют основной объём работы.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">01       &lt;el:compatibility el:enigma=&quot;1.10&quot;&gt;
02         &lt;el:dependency el:path=&quot;lib/libmath&quot; el:id=&quot;lib/libmath&quot; el:release=&quot;1&quot; el:preload=&quot;true&quot;/&gt;
03       &lt;/el:compatibility&gt;
</pre></td></tr></table>
<p>Мы пользуемся некоторыми функциями из библиотеки <a href="#libmath">libmath</a>. Значит, кроме объявления совместимости с Enigma 1.10, нам нужно предварительно загрузить их.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">04    <i>ti</i>[&quot;<var> </var>&quot;] = {&quot;<b>fl_sahara</b>&quot;, <b>friction</b> = <var>3.5</var>, <b>adhesion</b> = <var>4.0</var>}
05    <i>ti</i>[&quot;<var>a</var>&quot;] = {&quot;<b>fl_ivory</b>&quot;, <b>friction</b> = <var>3.5</var>, <b>adhesion</b> = <var>4.0</var>}
06    <i>ti</i>[&quot;<var>b</var>&quot;] = {&quot;<b>fl_bright</b>&quot;, <b>friction</b> = <var>3.5</var>, <b>adhesion</b> = <var>4.0</var>}
07    <i>ti</i>[&quot;<var>c</var>&quot;] = {&quot;<b>fl_platinum</b>&quot;, <b>friction</b> = <var>3.5</var>, <b>adhesion</b> = <var>4.0</var>}
</pre></td></tr></table>
<p>Четыре типа покрытий, из которых составлено динамически изменяемое покрытие. Чтобы обеспечить одинаковые ощущения от перемещения по различным типам покрытий, для них устанавливаются одинаковые значения &lsquo;<samp>friction</samp>&rsquo; и &lsquo;<samp>adhesion</samp>&rsquo;.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">10    <i>ti</i>[&quot;<var>w</var>&quot;] = {&quot;<b>st_flat_movable</b>&quot;, &quot;<var>wood</var>#&quot;}
11    <i>ti</i>[&quot;<var>t</var>&quot;] = {&quot;<b>it_trigger</b>&quot;, &quot;<var>trigger</var>#&quot;}
12    <i>ti</i>[&quot;<var>d</var>&quot;] = {&quot;<b>st_blocker</b>&quot;, &quot;<var>door</var>#&quot;}
</pre></td></tr></table>
<p>Перемещаемый камень, который будет связан, целевые триггеры и двери, которые будут открываться. Всем автоматически присваиваются имена для обращения ко всей группе из хранилища именованных объектов.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">13    <i>ti</i>[&quot;<var>o</var>&quot;] = {&quot;<b>st_oxyd</b>&quot;, <b>oxydcolor</b> = <var>OXYD_YELLOW</var>, <b>flavor</b> = &quot;<var>a</var>&quot;}
14    <i>ti</i>[&quot;<var>O</var>&quot;] = {&quot;<b>st_oxyd</b>&quot;, <b>oxydcolor</b> = <var>OXYD_WHITE</var>, <b>flavor</b> = &quot;<var>a</var>&quot;}
</pre></td></tr></table>
<p>Небольшая деталь оформления: выбор двух уникальных цветов для <a href="#st_005foxyd">st_oxyd</a>ов.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">15    <i>ti</i>[&quot;<var>1</var>&quot;] = {&quot;<b>st_panel</b>&quot;, <b>cluster</b> = <var>1</var>}
16    <i>ti</i>[&quot;<var>2</var>&quot;] = {&quot;<b>st_panel</b>&quot;, <b>cluster</b> = <var>2</var>}
</pre></td></tr></table>
<p>Основа постоянно меняющего свой вид оформления границ игрового поля <a href="#st_005fpanel">st_panel</a>. Две секции с камнями границ принадлежат двум различным группам. Движок автоматически объединит все соседние камни той же группы в большие единые блоки. Теперь нам нужно просто разместить эти секции на различных позициях решётки.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">17    <i>ti</i>[&quot;<var>S</var>&quot;] = {&quot;<b>st_switch</b>&quot;, <b>target</b> = &quot;<var>easy_mode_call</var>&quot;}
</pre></td></tr></table>
<p>Переключатель в левой части игрового поля, который можно использовать только в упрощённом режиме. В строке 27 он блокируется, чтобы не появляться в обычном режиме. Цель &mdash; функция обратного вызова в строках с 71 по 81.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">19    <var>floors</var>  = {<i>ti</i>[&quot;<var> </var>&quot;], <i>ti</i>[&quot;<var>a</var>&quot;], <i>ti</i>[&quot;<var>b</var>&quot;], <i>ti</i>[&quot;<var>c</var>&quot;]}
20    <var>polynom</var> = <i>lib</i>.<i>math</i>.<i>random_vector</i>(<var>10</var>, <var>4</var>)
</pre></td></tr></table>
<p>Приготовления к оформлению покрытия. Четыре секции покрытия хранятся в списке, чтобы к ним можно было обратиться по индексу. Десять различных номеров в диапазоне от 1 до 4, хранящиеся в списке, мы позже будем использовать в качестве коэффициентов многочлена.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">22    function <var>myresolver</var>(<var>key</var>, <var>x</var>, <var>y</var>)
34    <var>w</var>, <var>h</var> = <i>wo</i>(<var>myresolver</var>, &quot;<var> </var>&quot;, {
</pre></td></tr></table>
<p>До этого момента мы искали коды, используемые в карте, в нашем хранилище секций &lsquo;<samp>ti</samp>&rsquo;, которое было первым аргументом в вызове заполнения мира. Но теперь мы используем <a href="#Custom-Resolver">Настраиваемое преобразование</a>. Функция, начинающаяся со строки 22, вызывается при каждом выборе секции. Её задача &mdash; предоставить соответствующую секцию.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">23      if <var>key</var> == &quot;<var> </var>&quot; then
24        return <var>floors</var>[<i>lib</i>.<i>math</i>.<i>cubic_polynomial</i>(<var>polynom</var>, <var>x</var>, <var>y</var>) % (#<var>floors</var>) + <var>1</var>]
</pre></td></tr></table>
<p>Эти две строки формируют постоянно меняющееся оформление покрытия. Для каждого кода карты &lsquo;<samp> </samp>&rsquo; мы рассчитываем кубический многочлен, который благодаря коэффициентам непредсказуем. Полученное число ограничивается числом наших четырёх покрытий. Это число берётся по индексу в нашем списке покрытий &lsquo;<samp>floors</samp>&rsquo; и возвращает определение секции.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">25      elseif    (<var>key</var> == &quot;<var>#</var>&quot;)
26            or ((<var>key</var> == &quot;<var>_</var>&quot;) and (<i>random</i>(<var>4</var>) == <var>1</var>))
27            or ((<var>key</var> == &quot;<var>S</var>&quot;) and <i>wo</i>[&quot;<b>IsDifficult</b>&quot;]) then
28        return <i>ti</i>[&quot;&quot;..<i>random</i>(<var>2</var>)]
</pre></td></tr></table>
<p>А теперь мы объединяем границы уровня. Сначала нам нужно решить, где вообще их разместить. Безусловно, это будут позиции, отмеченные на карте решёткой &lsquo;<samp>#</samp>&rsquo;. Вдобавок мы случайным образом выбираем каждую 4-ую позицию &lsquo;<samp>_</samp>&rsquo;, которая вместо покрытия воды будет границей. Наконец, в сложном режиме мы заменяем переключатель, помеченный как &lsquo;<samp>S</samp>&rsquo;, на камень границы. Теперь мы должны привязать к этой позиции одну из двух секций групп границы игрового поля. Мы просто случайным образом выбираем число 1 или 2. Но в качестве кода секций нам нужна строка. Мы заставляем Lua преобразовать число в строку, объединив пустую строку &lsquo;<samp>&quot;&quot;</samp>&rsquo; со случайным числом. Выбор правильных вариантов границ для формирования замкнутых групп завершается движком.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">29      else
30        return <i>ti</i>[<var>key</var>]
</pre></td></tr></table>
<p>Наконец, для всех остальных кодов, для которых не требуется особая обработка, мы просто получаем определение секции из хранилища секций.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">34    <var>w</var>, <var>h</var> = <i>wo</i>(<var>myresolver</var>, &quot;<var> </var>&quot;, {
35     -- 01234567890123456789
36       &quot;<var>####################___________________</var>&quot;,
37       &quot;<var>#                  #_____###o###_______</var>&quot;,
38       &quot;<var>#   w   w t   t    #_____#d   d#_______</var>&quot;,
39       &quot;<var>#     w   w t   t  #___### ### ###_____</var>&quot;,
...
</pre></td></tr></table>
<p>Карта использует коды в том виде, в каком они были представлены настраиваемым преобразованием. Таким образом, все обязательные камни границы обозначены решёткой &lsquo;<samp>#</samp>&rsquo;, а все, которые могут быть преобразованы из воды, обозначены &lsquo;<samp>_</samp>&rsquo;. Все пробелы &lsquo;<samp> </samp>&rsquo; не заменяются определением песчаного покрытия из хранилища секций, а представляют собой позиции для нашей настройки оформления покрытия в настраиваемом преобразовании. Заметим также, что даже для секций, обозначенных &lsquo;<samp>w</samp>&rsquo;, будет установлено оформление покрытия, потому что покрытием по умолчанию является &lsquo;<samp> </samp>&rsquo;.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">51    <var>door_p</var> = <i>lib</i>.<i>math</i>.<i>permutation</i>(<var>12</var>)
52    <var>wire_p</var> = <i>lib</i>.<i>math</i>.<i>permutation</i>(<var>12</var>)
</pre></td></tr></table>
<p>Теперь давайте перемешаем привязки триггеров/дверей и распределение проволоки. Сделаем это перестановкой 12 номеров индексов, используемых для доступа к дверям и проволоке.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">53    <var>woods</var> = <i>no</i>[&quot;<var>wood</var>#*&quot;]
54    <var>triggers</var> = <i>no</i>[&quot;<var>trigger</var>#*&quot;]
55    <var>doors</var> = <i>no</i>[&quot;<var>door</var>#*&quot;]
</pre></td></tr></table>
<p>Получаем группы перемещаемых камней, триггеров и дверей. Это необходимо сделать один раз и хранить полученные группы, потому что мы хотим пронумеровать членов группы. Повторный доступ к хранилищу именованных объектов не гарантирует стабильную сортировку полученных групп. Поэтому мы работаем со стабильными, один раз полученными и хранящимися группами.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">57    for <var>j</var> = <var>1</var>, <var>12</var> do
58      <var>triggers</var>[<var>j</var>].<b>target</b> = <var>doors</var>[<var>door_p</var>[<var>j</var>]]
59    end
</pre></td></tr></table>
<p>Произвольная привязка триггеров к дверям. Каждый триггер получает в качестве цели случайный пронумерованный член группы дверей. Отметим альтернативный доступ к члену атрибута триггера. Вместо обрамления имени атрибутов квадратными скобками и заключения в кавычки константной строки в виде &lsquo;<samp>[&quot;target&quot;]</samp>&rsquo;, автор предпочёл записать &lsquo;<samp>.target</samp>&rsquo;. Это допустимое альтернативное выражение Lua, при условии, что имя атрибута &mdash; допустимое имя Lua (см. <a href="#Caveats">Предупреждение</a>).
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">61    for <var>j</var> = <var>1</var>, <var>9</var> do
62      <i>wo</i>:<b>add</b>({&quot;<b>ot_wire</b>&quot;,
63              <b>anchor1</b> = <var>woods</var>[<var>wire_p</var>[<var>j</var> + <var>3</var>]],
64              <b>anchor2</b> = <var>woods</var>[<var>wire_p</var>[<var>j</var>%<var>3</var> + <var>1</var>]]})
</pre></td></tr></table>
<p>Наконец, нам нужно добавить <a href="#ot_005fwire">ot_wire</a> между нашими перемещаемыми камнями. Это нельзя сделать средствами самой карты. Нам нужно использовать дполнительный метод <a href="#World">мира</a> &lsquo;<samp>wo:add()</samp>&rsquo;, который принимает в качестве двух атрибутов-якорей два соединяемых камня. Из нашей группы деревянных ящиков мы выбрали первые 3 камня, чтобы соединить их с 3-мя другими камнями с номерами с 4 по 12. Поэтому в каждом цикле в качестве первого &quot;якоря&quot; один из камней с 4 по 12 соединяем с одним из первых 3-х камней, воспользовавшись простой операцией взятия остатка. Теперь у первых трёх камней есть три проволоки и с ними покончено. У оставшихся 9 камней всего по одному проводу.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">65      <i>wo</i>:<b>add</b>({&quot;<b>ot_wire</b>&quot;, <b>name</b> = &quot;<var>obsolete_wire</var>#&quot;,
66              <b>anchor1</b> = <var>woods</var>[<var>wire_p</var>[<var>j</var> + <var>3</var>]],
67              <b>anchor2</b> = <var>woods</var>[<var>wire_p</var>[<var>j</var>%<var>9</var> + <var>4</var>]]})
68    end
</pre></td></tr></table>
<p>Теперь мы последовательно связываем эти оставшиеся 9 камней в замкнутый круг. Это даёт каждому камню 2 дополнительные проволоки. Мы делаем это, соединяя каждый из камней с 4 по 11 со следующим и, наконец, соединяя камень 12 с камнем 4, что делается операцией взятия остатка от деления. Это завершает составление уровня для обычного режима. Готовясь к упрощённому режиму, мы автоматически именуем эти дополнительные проволоки.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">71    function <var>easy_mode_call</var>(<var>is_on</var>, <var>sender</var>)
72      if <var>is_on</var> then
73        <i>no</i>[&quot;<var>obsolete_wire</var>#*&quot;]:<b>kill</b>()
</pre></td></tr></table>
<p>Специально для упрощённого режима мы добавляем переключатель, чтобы убрать и создать заново дополнительные проволоки. Так как мы присвоили этим более не нужным проволокам имена, то мы можем просто удалить их все одним вызовом, применяя метод &lsquo;<samp>kill()</samp>&rsquo; к группе этих проволок.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">73      else
74        for <var>j</var> = <var>1</var>, <var>9</var> do
75          <i>wo</i>:<b>add</b>({&quot;<b>ot_wire</b>&quot;, <b>name</b> = &quot;<var>obsolete_wire</var>#&quot;,
76             	  <b>anchor1</b> = <var>woods</var>[<var>wire_p</var>[<var>j</var> + <var>3</var>]],
77                <b>anchor2</b> = <var>woods</var>[<var>wire_p</var>[<var>j</var>%<var>9</var> + <var>4</var>]]})
78        end
79      end
</pre></td></tr></table>
<p>Когда пользователь снова щёлкает переключателем, проволоки должны быть созданы заново. Это делается всё тем же кодом со строки 65 по 68. Заметим, что важно, чтобы мы сохраняли используемые перестановки проволок в переменной &lsquo;<samp>wire_p</samp>&rsquo;.
</p>

<hr size="6">
<a name="Introduction-to-Datatypes"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Weirdly-Wired" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Syntax-and-Conventions" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Introduction-to-Datatypes-1"></a>
<h2 class="section">5.4 Введение в типы данных</h2>

<p>Перед подробным описанием типов данных, давайте познакомимся с основными принципами и соглашениями.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Syntax-and-Conventions">5.4.1 Синтаксис и соглашения</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         Сокращения в описаниях синтаксиса
</td></tr>
<tr><td align="left" valign="top"><a href="#Value-and-Reference">5.4.2 Значение и ссылка</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Основные отличия между типами данных
</td></tr>
<tr><td align="left" valign="top"><a href="#Polymorphism-and-Overloading">5.4.3 Полиморфизм и перегрузка</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">   Способы размещения объектов
</td></tr>
<tr><td align="left" valign="top"><a href="#Pseudo-Datatypes">5.4.4 Мнимые типы данных</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">               Переосмысление типов данных
</td></tr>
</table>


<hr size="6">
<a name="Syntax-and-Conventions"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Introduction-to-Datatypes" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Value-and-Reference" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Introduction-to-Datatypes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Syntax-and-Conventions-1"></a>
<h3 class="subsection">5.4.1 Синтаксис и соглашения</h3>

<p>В следующих подразделах будут подробно описаны типы данных, операторы и методы для работы с ними, а также глобальные функции. Для эффективного описания будут использоваться определённый синтаксис и соглашения.
</p>
<p>Следующие сокращения и полученные из них добавлением числа всегда представляют собой значение определённого типа:
</p><ul>
<li> pos &mdash; <a href="#Position">Позиция </a>
</li><li> obj &mdash; <a href="#Object">Объект</a>
</li><li> polist &mdash; <a href="#PositionList">PositionList</a>
</li><li> group &mdash; <a href="#Group">Группа</a>
</li><li> cpos &mdash; постоянная позиция &mdash; список, состоящий из двух чисел, например {2, 3}
</li></ul>

<p>Для описания синтаксиса операторов и методов для типов данных необходимо перечислить допустимые типы данных аргументов. Зачастую можно использовать любой из списка нескольких допустимых типов. В таких случаях эти типы будут заключены в угловые скобки (&lsquo;<samp>&lt;</samp>&rsquo;, &lsquo;<samp>&gt;</samp>&rsquo;) и отделены друг от друга чертой (&lsquo;<samp>|</samp>&rsquo;). Эти символы не входят в состав самих операторов или методов и их не следует помещать в код уровня. В то же время квадратные (&lsquo;<samp>[</samp>&rsquo;, &lsquo;<samp>]</samp>&rsquo;) и фигурные (&lsquo;<samp>{</samp>&rsquo;, &lsquo;<samp>}</samp>&rsquo;) скобки сохраняют своё символьное значение в Lua. Когда эти скобки появляются в синтаксисе, их следует включать в код. Например, следующая синтаксическая конструкция:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">result = <var>pos</var> + &lt;<var>pos</var> | <var>obj</var> | <var>cpos</var> | <var>polist</var>&gt;
</pre></td></tr></table>

<p>позволяет записать в уровне любую из следующих строк:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example"><var>result</var> = <var>pos</var> + <var>pos</var>
<var>result</var> = <var>pos</var> + <var>obj</var>
<var>result</var> = <var>pos</var> + <var>cpos</var>
<var>result</var> = <var>pos</var> + <var>polist</var>
</pre></td></tr></table>

<p>Однако такая синтаксическая конструкция как:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">x = pos[&quot;x&quot;]
</pre></td></tr></table>

<p>требует, чтобы в код включались квадратные скобки Lua. Конечно, имя переменной позиции и её значение могут быть какими угодно.
</p>

<hr size="6">
<a name="Value-and-Reference"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Syntax-and-Conventions" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Polymorphism-and-Overloading" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Introduction-to-Datatypes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Value-and-Reference-1"></a>
<h3 class="subsection">5.4.2 Значение и ссылка</h3>

<p>Одной из важнейших сторон типов данных Lua является различия между фактическим значением и ссылкой на него. Значения &mdash; это числа, булевы значения &lsquo;<samp>true</samp>&rsquo; и &lsquo;<samp>false</samp>&rsquo;, строки и &lsquo;<samp>nil</samp>&rsquo;. Единственный ссылочный тип данных &mdash; список Lua.
</p>
<p>Значения всегда постоянны. Их нельзя изменять. Значения назначаются переменным. Во время вычислений можно назначить переменной другое значение. Но первоначальное значение никогда не изменяется. Это должно быть понятно, если представить себе значение &lsquo;<samp>true</samp>&rsquo; или, например, число &lsquo;<samp>7</samp>&rsquo;. Это справедливо и для строк, например <code>&quot;hello&quot;</code>. Результатом объединения двух строк становится новая строка. Однако сами компоненты не меняются. Все методы, &quot;изменяющие строку&quot;, в качестве возвращаемого значения выдают новую строку. Поэтому переменная, содержащая значение изначальной строки, всё ещё будет хранить неизменённое значение.
</p>
<p>Природа списков совершенно другая. Они представляют собой вместилища данных. В Lua пользователю доступны только ссылки на эти вместилища. При добавлении или изменении значения внутри вместилища меняется не ссылка на список, а содержимое списка. Поэтому в двух переменных, содержащих ссылки на один и тот же список, после его изменения будут храниться ссылки на тот же изменённый список.
</p>
<p>Для каждого нового типа данных мы будем указывать, является ли он значением или ссылкой. О влиянии такой особенности языка на работу уровня см. в <a href="#Caveats">Предупреждении</a>.
</p>

<hr size="6">
<a name="Polymorphism-and-Overloading"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Value-and-Reference" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Pseudo-Datatypes" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Introduction-to-Datatypes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Polymorphism-and-Overloading-1"></a>
<h3 class="subsection">5.4.3 Полиморфизм и перегрузка</h3>

<a name="index-polymorphism"></a>
<p>Как вы, наверное, заметили, в качестве позиции (<a href="#Position">Позиция</a>) во многих действиях можно использовать <a href="#Object">Объект</a>. Это возможно благодаря тому, что объекты поддерживают большинство возможностей позиций. Объекты &mdash; это не позиции, но с ними можно обращаться подобным образом. Эта возможность называется &lsquo;<samp>полиморфизм</samp>&rsquo; и помогает значительно упростить код. Чтобы понять, какие типы аргументов подходят в конкретном случае, в следующих подразделах нужно обратить особое внимание на синтаксис.
</p>
<a name="index-overloading"></a>
<p>Lua ограничивает набор используемых операторов. Поэтому оператор сложения двух типов данных &lsquo;<samp>+</samp>&rsquo; в зависимости от используемых данных предпримет различные действия. Результатом сложения двух позиций станет векторная сумма,  а результатом сложения двух групп будет объединение групп. Такое различное использование одного и того же оператора называется &lsquo;<samp>перегрузка</samp>&rsquo;.
</p>
<p>Перегрузка в сочетании с полиморфизмом может привести к неоднозначным ситуациям. Например, мы решили разрешить складывать позицию с объектом, результатом чего станет векторное добавление позиции объекта к указанной позиции. В то же время мы хотим, используя оператор &lsquo;<samp>+</samp>&rsquo;, объединить объект с существующей группой. Но, что получится в результате сложения двух объектов? Векторная сумма их позиций или объединение объектов в новую группу? Оба варианта имеют смысл и могли бы пригодиться. В таком случае мы отдали предпочтение первой возможности, поскольку операция вычитания, возвращающая векторное расстояние между объектами &mdash; очень полезная возможность. В любом случае, всегда можно принудительно использовать нужную операцию, преобразовав объект в позицию или группу. Чтобы чётко понять, что получится, внимательно прочтите приведённые правила синтаксиса.
</p>

<hr size="6">
<a name="Pseudo-Datatypes"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Polymorphism-and-Overloading" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Position" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Introduction-to-Datatypes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Pseudo-Datatypes-1"></a>
<h3 class="subsection">5.4.4 Мнимые типы данных</h3>

<p>Хотя мы добавили всего десять основных типов данных, которые описаны в последующих подразделах, API по разному обращается с одними и теми же типами данных в зависимости от их использования. Например, стандартное число Lua используется для описания состояния (<a href="#state">state</a>) объекта. В очень редких случаях состояние может отражать реальное число, как например состояние <a href="#ot_005fcounter">ot_counter</a>. Для большинства объектов состояние &mdash; это одно значение из допустимого диапазона, которое в API представлено числом. Поэтому, говоря о значениях состояния (<a href="#state">state</a>), мы будем подразумевать мнимые типы данных.
</p>
<p>Для мнимых типов данных API предоставляет <a href="#Common-Constants">Общие константы</a>, которые записываются в верхнем регистре. Всегда используйте только эти константы, а не их эквиваленты в виде чисел или значений других типов. Использование констант делает код уровня более удобочитаемым и совместимым с последующими версиями игры, если вдруг нам понадобится изменить заданные значения или преобразовать мнимый тип данных к другому типу.
</p>
<p>Стоит упомянуть один абстрактный тип данных, поскольку он может одновременно использовать два различных мнимых типа данных. Этот особый тип данных используется для описания направления (&lsquo;<samp>direction</samp>&rsquo;) или ориентации (&lsquo;<samp>orientation</samp>&rsquo;). Они мало отличаются друг от друга, но мы будем говорить об <samp>ориентации</samp>, если нас интересует просто список основных направлений в виде числовых значений, чтобы определиться с их выбором. Эти постоянные значения выдаются на запрос ориентаций (<a href="#orientations">orientations</a>).
</p>
<p>Иногда значения нужны для вычисления смещений позиции. В этом случае мы подразумеваем направление (&lsquo;<samp>direction</samp>&rsquo;) и используем значения позиции (<a href="#Position">Позиция</a>) в качестве векторов смещения. Самые общеупотребительные значения в виде констант можно получить так, как это описано в подразделе <a href="#direction-offsets">Смещения направлений</a>. Заметьте, что нет нужды приводить значения наших направлений к 1.
</p>
<p>Заданная ориентация может быть приведена к значению направления с помощью списка преобразования <a href="#ORI2DIR">ORI2DIR</a>.
</p>

<hr size="6">
<a name="Position"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Pseudo-Datatypes" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Position-Addition-and-Subtraction" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Position-1"></a>
<h2 class="section">5.5 Позиция</h2>

<p>Позиция &mdash; это пользовательский тип данных Lua, добавленный в Enigma, чтобы работать с позициями мира, как описано в разделе <a href="#World_0027s-Shape-and-Coordinates">Форма и координаты мира</a>. Позиция представляет собой значение, а значит это константа. После того, как позиция была создана, её нельзя изменить, но с позициями можно работать, используя операторы. Если сложить значения двух позиций, то в результате будет получена позиция с новым значением.
</p>
<p>В отличие от <a href="#Object">Объект</a>ов, позиции бессмертны и никогда не исчезают. Поэтому значения позиций можно хранить в глобальных переменных сколько понадобится. Значения постоянны и не изменяются, даже когда объекты, из которых они были получены, успели переместиться на другой участок решётки или были уничтожены.
</p>
<p>Значения позиций не ограничиваются размерами мира. Каждая координата может принимать положительное, отрицательное и нулевое значение. Поэтому позиции можно использовать в вычислениях, чтобы, например, определить смещение между двумя другими позициями. 
</p>
<p>Позиции создаются посредством единого дескриптора хранилища позиций (см. раздел <a href="#Positions-Repository">Хранилище позиций</a>), который позволяет преобразовывать в позиции координаты, объекты, постоянные значения позиций. Этот дескриптор позволяет также получать существующие именованные позиции. Более того, позиции создаются косвенно, в виде возвращаемых значений многих операторов.
</p>
<p>Примеры работы с позициями можно посмотреть в разделе <a href="#Position-Tasks">Работа с позициями</a>.
</p>
<p>Ниже мы рассмотрим поддерживаемые операторы:
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Position-Addition-and-Subtraction">5.5.1 Сложение и вычитание позиций</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">     Операторы &lsquo;<samp>+</samp>&rsquo; и &lsquo;<samp>-</samp>&rsquo;
</td></tr>
<tr><td align="left" valign="top"><a href="#Position-Multiplication-and-Division">5.5.2 Умножение и деление позиций</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">  Операторы &lsquo;<samp>*</samp>&rsquo; и &lsquo;<samp>/</samp>&rsquo;
</td></tr>
<tr><td align="left" valign="top"><a href="#Position-Sign">5.5.3 Смена знака позиции</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                         Унарный оператор &lsquo;<samp>-</samp>&rsquo;
</td></tr>
<tr><td align="left" valign="top"><a href="#Position-Center">5.5.4 Округление позиции до центра решётки</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                       Оператор &lsquo;<samp>#</samp>&rsquo;
</td></tr>
<tr><td align="left" valign="top"><a href="#Position-Comparison">5.5.5 Сравнение позиций</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                   Равенство &lsquo;<samp>==</samp>&rsquo; и неравенство &lsquo;<samp>~=</samp>&rsquo;
</td></tr>
<tr><td align="left" valign="top"><a href="#Position-Concatenation">5.5.6 Объединение позиций</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                Оператор &lsquo;<samp>..</samp>&rsquo;
</td></tr>
<tr><td align="left" valign="top"><a href="#Position-Coordinate-Access">5.5.7 Доступ к координатам позиций</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Операторы индексирования
</td></tr>
<tr><td align="left" valign="top"><a href="#Position-Grid-Rounding">5.5.8 Округление позиции до границ решётки</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                Метод &lsquo;<samp>grid()</samp>&rsquo;
</td></tr>
<tr><td align="left" valign="top"><a href="#Position-Existence">5.5.9 Существование позиции</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                    Метод &lsquo;<samp>exists()</samp>&rsquo;
</td></tr>
</table>


<hr size="6">
<a name="Position-Addition-and-Subtraction"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Position" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Position-Multiplication-and-Division" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Position" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Position-Addition-and-Subtraction-1"></a>
<h3 class="subsection">5.5.1 Сложение и вычитание позиций</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = <i>pos</i> &lt;<b>+</b>|<b>-</b>&gt; &lt;<i>pos</i> | <i>obj</i> | <i>cpos</i> | <i>polist</i>&gt;
</p>
<p>result = &lt;<i>pos</i> | <i>obj</i> | <i>cpos</i> | <i>polist</i>&gt; &lt;<b>+</b>|<b>-</b>&gt; <i>pos</i>
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Когда позиция добавляется к или вычитается из другой позиции или данных, которые могут быть приведены к позиции, то в результате будет получено значение позиции, представляющее собой векторную сумму или разность аргументов.
</p>
<p>Когда позиция добавляется к или вычитается из списка позиций, то создаётся новый список с позициями, представляющими собой сумму или разность заданной позиции с каждым элементом указанного списка позиций.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>newpos</var> = <i>po</i>(<var>3</var>, <var>4</var>) + {<var>1</var>, <var>2</var>}              -- = po(4, 6)
<var>newpos</var> = <var>myobject</var> - <i>po</i>(<var>1</var>, <var>5</var>)
<var>newpolist</var> = <i>po</i>(<var>2</var>, <var>3</var>) + <var>NEIGHBORS_4</var>      -- po(1, 3) .. po(2, 4) .. po(3, 3) .. po(2, 2)
<var>newpolist</var> = <i>po</i>[&quot;<var>myfloor</var>#*&quot;] - <i>po</i>(<var>3</var>, <var>0</var>)
</pre></td></tr></table>
</dd>
</dl>


<hr size="6">
<a name="Position-Multiplication-and-Division"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Position-Addition-and-Subtraction" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Position-Sign" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Position" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Position-Multiplication-and-Division-1"></a>
<h3 class="subsection">5.5.2 Умножение и деление позиций</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = <i>pos</i> &lt;<b>*</b>|<b>/</b>&gt; <i>number</i>
</p>
<p>result = <i>number</i> <b>*</b> <i>pos</i>
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Скалярное произведение или частное вектора позиций. Возвращается значение позиции с обоими координатами, умноженными или поделенными на указанное число.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>newpos</var> = <var>3</var> * <i>po</i>(<var>3</var>, <var>4</var>)   -- = po(9, 12)
<var>newpos</var> = <i>po</i>(<var>2</var>, <var>3</var>) / <var>2</var>   -- = po(1, 1.5)
</pre></td></tr></table>
</dd>
</dl>


<hr size="6">
<a name="Position-Sign"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Position-Multiplication-and-Division" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Position-Center" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Position" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Position-Sign-1"></a>
<h3 class="subsection">5.5.3 Смена знака позиции</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = -<i>pos</i>
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Унарное скалярное умножение вектора позиции на &lsquo;<samp>-1</samp>&rsquo;. Возвращается новое значение позиции, обе координаты которого умножены на <samp>&lsquo;-1</samp>&rsquo;.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>newpos</var> = -<i>po</i>(<var>3</var>, <var>4</var>)   -- = po(-3, -4)
</pre></td></tr></table>
</dd>
</dl>


<hr size="6">
<a name="Position-Center"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Position-Sign" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Position-Comparison" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Position" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Position-Center-1"></a>
<h3 class="subsection">5.5.4 Округление позиции до центра решётки</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = #<i>pos</i>
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Округление вектора позиции до координат центра участка решётки. Возвращается новое значение позиции с координатами центра участка решётки с данной позицией.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>newpos</var> = #<i>po</i>(<var>3</var>, <var>4</var>)   -- = po(3.5, 4.5)
</pre></td></tr></table>
</dd>
</dl>


<hr size="6">
<a name="Position-Comparison"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Position-Center" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Position-Concatenation" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Position" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Position-Comparison-1"></a>
<h3 class="subsection">5.5.5 Сравнение позиций</h3>

<p>Равенство и неравенство.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = <i>pos1</i> &lt;==|~=&gt; <i>pos2</i>
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Сравнение значений двух позиций. Два значения позиции равны, если обе их координаты равны. В противном случае они не эквивалентны. Если необходимо узнать, указывают ли обе позиции на один и тот же участок решётки, то можно предварительно округлить обе позиции. Округлить можно либо к центру, либо к участку решётки, воспользовавшись, соответственно, оператором для позиций &lsquo;<samp>#</samp>&rsquo; или методом &lsquo;<samp>grid()</samp>&rsquo;.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>bool</var> = <i>po</i>(<var>3</var>, <var>4</var>) == <i>po</i>({<var>3</var>, <var>4</var>})  -- = true
<var>bool</var> = <i>po</i>(<var>3</var>, <var>4</var>) == <i>po</i>(<var>4</var>, <var>3</var>)    -- = false
<var>bool</var> = <i>po</i>(<var>3</var>, <var>4</var>) ~= <i>po</i>(<var>4</var>, <var>3</var>)    -- = true
</pre></td></tr></table>
</dd>
</dl>


<hr size="6">
<a name="Position-Concatenation"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Position-Comparison" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Position-Coordinate-Access" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Position" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Position-Concatenation-1"></a>
<h3 class="subsection">5.5.6 Объединение позиций</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = <i>pos1</i> .. &lt;<i>pos2</i> | <i>polist</i>&gt;
</p>
<p>result = &lt;<i>pos1</i> | <i>polist</i>&gt; .. <i>pos2</i>
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Объединяет две позиции или позицию с существующим списком позиций (<a href="#PositionList">PositionList</a>) в новый список позиций, содержащий все позиции в указанном порядке.  Следует отметить, что эта операция ассоциативна, то есть не имеет значения, используются ли при множественном объединении скобки.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>newpolist</var> = <i>po</i>(<var>3</var>, <var>4</var>) .. <i>po</i>(<var>4</var>, <var>4</var>)
</pre></td></tr></table>
</dd>
</dl>


<hr size="6">
<a name="Position-Coordinate-Access"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Position-Concatenation" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Position-Grid-Rounding" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Position" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Position-Coordinate-Access-1"></a>
<h3 class="subsection">5.5.7 Доступ к координатам позиций</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = <i>pos</i>[&quot;x&quot;]
</p>
<p>result = <i>pos</i>[&quot;y&quot;]
</p>
<p>result1, result2 = <i>pos</i>:xy()
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Отдельные координаты позиции можно получить в любой момент, воспользовавшись доступом Lua по индексу, заключённому в квадратные скобки. Конечно, можно использовать и альтернативный синтаксис Lua, предоставляющий доступ к индексу через точку (см. примеры). Чтобы узнать обе координаты, можно воспользоваться методом &lsquo;<samp>xy()</samp>&rsquo;, который вернёт одновременно два числа в виде перечисления Lua.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>number</var> = <i>po</i>(<var>3</var>, <var>4</var>)[&quot;<b>x</b>&quot;]            -- = 3
<var>number</var> = <i>po</i>(<var>3</var>, <var>4</var>).<b>x</b>               -- = 3
<var>number</var> = <i>po</i>(<var>3</var>, <var>4</var>)[&quot;<b>y</b>&quot;]            -- = 4
<var>number</var> = <i>po</i>(<var>3</var>, <var>4</var>).<b>y</b>               -- = 4
<var>number1</var>, <var>number2</var> = <i>po</i>(<var>3</var>, <var>4</var>):<b>xy</b>()  -- = 3, 4
</pre></td></tr></table>
</dd>
</dl>


<hr size="6">
<a name="Position-Grid-Rounding"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Position-Coordinate-Access" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Position-Existence" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Position" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Position-Grid-Rounding-1"></a>
<h3 class="subsection">5.5.8 Округление позиции до границ решётки</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = <i>pos</i>:grid()
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Возвращает новое значение позиции, которое указывает на координаты верхнего левого угла участка решётки, включающего позицию.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>newpos</var> = <i>po</i>(<var>3.2</var>, <var>4.7</var>):<b>grid</b>()    -- = 3, 4
<var>newpos</var> = <i>po</i>(<var>-2.4</var>, <var>-5.0</var>):<b>grid</b>()  -- = -3, -5
</pre></td></tr></table>
</dd>
</dl>


<hr size="6">
<a name="Position-Existence"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Position-Grid-Rounding" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Object" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Position" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Position-Existence-1"></a>
<h3 class="subsection">5.5.9 Существование позиции</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = <i>pos</i>:exists()
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Проверяет, входит ли позиция в состав мира, и возвращает &lsquo;<samp>true</samp>&rsquo;, если это так. В противном случае возвращается &lsquo;<samp>false</samp>&rsquo;.
</p>
<p>Следует отметить, что метод &lsquo;exists&rsquo; для <a href="#Object">Объект</a>а сообщает о существовании объекта. Результат выполнения &lsquo;<samp>po(obj):exists()</samp>&rsquo; для существующих объектов может быть и &lsquo;<samp>false</samp>&rsquo;. Например, это может произойти с предметами (см. раздел <a href="#Item-Objects">Предметы</a>), в данный момент находящимися в инвентаре игрока. Предмет существует, но он не входит в состав мира. В то же время предметы, хранящиеся в сумке, которая лежит в пределах мира, вернут в качестве своих позиций позицию сумки.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>boolean</var> = <i>po</i>(<var>3.2</var>, <var>4.7</var>):<b>exists</b>()
</pre></td></tr></table>
</dd>
</dl>



<hr size="6">
<a name="Object"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Position-Existence" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Object-Attribute-Access" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Object-1"></a>
<h2 class="section">5.6 Объект</h2>

<p>Как описано в разделе <a href="#Object-Layers">Слои объектов</a>, этот тип данных позволяет работать со всеми объектами мира. При обращении к объекту вы получаете не сам объект, а ссылку на него. Объект может изменять не только создатель уровня, но и игрок. Присваивание другого значения переменной удаляет ссылку, но не сам объект.
</p>
<p>С другой стороны, из-за действий игрока объект может быть уничтожен, хотя ссылка на него всё ещё будет доступна через переменную Lua. Конечно, эта ссылка становится недействительной как только объект, на который она ссылается, будет удалён. Но в новом API такая недействительная ссылка, которая называется &lsquo;нулевой&rsquo; (&lsquo;<samp>NULL</samp>&rsquo; reference), больше не становится фатальной. Любые попытки что-то записать по этой ссылке просто игнорируются. Поэтому ссылкам на объекты можно посылать сообщения, независимо от их действительности. Только перед записью, возможно, придётся предварительно проверить, существует ли объект, потому что при обращении к нулевым ссылкам будет получено значение &lsquo;<samp>nil</samp>&rsquo;.
</p>
<p>У объектов есть атрибуты, к которым можно обратиться с помощью индексных методов Lua. В дополнение к отличительным атрибутам объекта можно добавлять свои собственные. Собственные атрибуты начинаются с приставки &lsquo;<samp>_</samp>&rsquo; перед их именем.
</p>
<p>Объекты мира создаются назначением позиции мира (см. раздел <a href="#World">Мир</a>) описания секции. Получить ссылку на соответствующий объект можно либо с помощью хранилища именованных объектов (см. раздел <a href="#NamedObjects">NamedObjects</a>), функций (см. раздел <a href="#Functions">Функции</a>) либо другими методами, которые возвращают ссылку на отдельный объект.
</p>
<p>Объекты поддерживают большую часть методов позиции (см. раздел <a href="#Position">Позиция</a>) и в большинстве случаев могут напрямую использоваться в качестве позиций без явного преобразования. Для обоих типов отличаются только специализированные методы, такие как проверка на существование. Конечно расположение всех объектов мира ограничено пределами мира. Но помните, что переносные <a href="#Item-Objects">Предметы</a> могут находиться в инвентаре игрока и возвращать позицию за пределами мира. Актёры всегда возвращают позиции, округлённые до координат содержащей их ячейки решётки. Это унаследованная возможность. Поскольку код Lua в любом случае не очень подходит для работы с перемещениями актёров, мы сохранили эту возможность округления.
</p>
<p>Объекты поддерживают и стандартный набор операторов групп (см. раздел <a href="#Group">Группа</a>), если одним из аргументов является группа, а другим объект.
</p>
<p>Примеры работы можно посмотреть в разделах <a href="#Object-Tasks">Работа с объектами</a> и <a href="#Attribute-Tasks">Работа с атрибутами</a>.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Object-Attribute-Access">5.6.1 Доступ к атрибутам объекта</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Операторы индексирования &lsquo;<samp>[]</samp>&rsquo;
</td></tr>
<tr><td align="left" valign="top"><a href="#Object-Messaging">5.6.2 Отправка сообщений объектам</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                  Метод &lsquo;<samp>:</samp>&rsquo;
</td></tr>
<tr><td align="left" valign="top"><a href="#Object-Comparison">5.6.3 Сравнение объектов</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                 Равенство &lsquo;<samp>==</samp>&rsquo; и неравенство &lsquo;<samp>~=</samp>&rsquo;
</td></tr>
<tr><td align="left" valign="top"><a href="#Object-Existence">5.6.4 Существование объекта</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                  Метод &lsquo;<samp>exists()</samp>&rsquo;
</td></tr>
<tr><td align="left" valign="top"><a href="#Object-Kill">5.6.5 Уничтожение объекта</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                       Метод &lsquo;<samp>kill()</samp>&rsquo;
</td></tr>
<tr><td align="left" valign="top"><a href="#Object-Kind-Check">5.6.6 Определение типа объекта</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                 Методы &lsquo;<samp>kind()</samp>&rsquo; и &lsquo;<samp>is()</samp>&rsquo;
</td></tr>
<tr><td align="left" valign="top"><a href="#Object-Coordinate-Access">5.6.7 Доступ к координатам объекта</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Операторы &lsquo;<samp>[&quot;x&quot;]</samp>&rsquo;, &lsquo;<samp>[&quot;y&quot;]</samp>&rsquo;
</td></tr>
<tr><td align="left" valign="top"><a href="#Object-Addition-and-Subtraction">5.6.8 Сложение и вычитание объектов</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">   Операторы &lsquo;<samp>+</samp>&rsquo;, &lsquo;<samp>-</samp>&rsquo;
</td></tr>
<tr><td align="left" valign="top"><a href="#Object-Center">5.6.9 Округление объекта до центра решётки</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                     Оператор &lsquo;<samp>#</samp>&rsquo;
</td></tr>
<tr><td align="left" valign="top"><a href="#Object-Join">5.6.10 Объединение объектов</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                       Оператор &lsquo;<samp>+</samp>&rsquo;
</td></tr>
<tr><td align="left" valign="top"><a href="#Object-Intersection">5.6.11 Пересечение объектов</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">               Оператор &lsquo;<samp>*</samp>&rsquo;
</td></tr>
<tr><td align="left" valign="top"><a href="#Object-Difference">5.6.12 Разность объектов</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                 Оператор &lsquo;<samp>-</samp>&rsquo;
</td></tr>
<tr><td align="left" valign="top"><a href="#Object-Sound">5.6.13 Звук объекта</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                      Метод &lsquo;<samp>sound()</samp>&rsquo;
</td></tr>
</table>

<hr size="6">
<a name="Object-Attribute-Access"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Object" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Object-Messaging" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Object" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Object-Attribute-Access-1"></a>
<h3 class="subsection">5.6.1 Доступ к атрибутам объекта</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = <i>obj</i>[&quot;attributename&quot;]
</p>
<p><i>obj</i>[&quot;attributename&quot;] = value
</p>
<p><i>obj</i>:set({attributename1=value1, attributename2=value2,...})
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Читает или записывает атрибуты объекта, как описано в следующих главах, или пользовательские атрибуты. Метод &lsquo;<samp>set</samp>&rsquo; позволяет изменить одновременно несколько атрибутов. Если ссылка на объект недействительна, то попытка записи игнорируется. Чтобы прочитать значение атрибута необходима действительная ссылка на объект. В противном случае возвращается &lsquo;<samp>nil</samp>&rsquo;.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>value</var> = <var>obj</var>[&quot;<b>color</b>&quot;]
<var>value</var> = <var>obj</var>.<b>color</b>
<var>obj</var>[&quot;<b>color</b>&quot;] = <var>BLACK</var>
<var>obj</var>.<b>color</b> = <var>BLACK</var>
<var>obj</var>:<b>set</b>({<b>target</b>=<var>mydoor</var>, <b>action</b>=&quot;<b>open</b>&quot;})
</pre></td></tr></table>
</dd>
</dl>

<hr size="6">
<a name="Object-Messaging"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Object-Attribute-Access" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Object-Comparison" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Object" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Object-Messaging-1"></a>
<h3 class="subsection">5.6.2 Отправка сообщений объектам</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = <i>obj</i>:message(&quot;msg&quot;, value)
</p>
<p>result = <i>obj</i>:msg(value)
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Посылает объекту сообщение с указанным значением или значением равным &lsquo;<samp>nil</samp>&rsquo;. Любое сообщение может быть послано напрямую, через вызов метода с указанием имени сообщения. Если ссылка на объект недействительна, то сообщение просто игнорируется.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>value</var> = <var>obj</var>:<b>message</b>(&quot;<b>open</b>&quot;)
<var>value</var> = <var>obj</var>:<b>open</b>()
<var>value</var> = <var>obj</var>:<b>message</b>(&quot;<b>signal</b>&quot;, <var>1</var>)
<var>value</var> = <var>obj</var>:<b>signal</b>(<var>1</var>)
</pre></td></tr></table>
</dd>
</dl>

<hr size="6">
<a name="Object-Comparison"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Object-Messaging" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Object-Existence" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Object" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Object-Comparison-1"></a>
<h3 class="subsection">5.6.3 Сравнение объектов</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = <i>obj1</i> &lt;==|~=&gt; <i>obj2</i>
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Сравнение двух значений объектов. Два значения объектов равны, если оба ссылаются на один и тот же существующий объект мира В противном случае они не эквивалентны.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>bool</var> = <var>obj1</var> == <var>obj1</var>  -- = true
<var>bool</var> = <var>obj1</var> == <var>obj2</var>  -- = false, if two different objects
<var>bool</var> = <var>obj1</var> ~= <var>obj2</var>  -- = true, if two different objects
</pre></td></tr></table>
</dd>
</dl>

<hr size="6">
<a name="Object-Existence"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Object-Comparison" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Object-Kill" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Object" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Object-Existence-1"></a>
<h3 class="subsection">5.6.4 Существование объекта</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = -<i>obj</i>
</p>
<p>result = <i>obj</i>:exists()
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Проверяет действительность ссылки на объект. Возвращает истину, если объект всё ещё существует, в противном случае, для нулевых ссылок на объект (&lsquo;<samp>NULL</samp>&rsquo;), возвращает ложь.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>bool</var> = -<var>obj</var>
<var>bool</var> = <var>obj</var>:<b>exists</b>()
</pre></td></tr></table>
</dd>
</dl>

<hr size="6">
<a name="Object-Kill"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Object-Existence" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Object-Kind-Check" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Object" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Object-Kill-1"></a>
<h3 class="subsection">5.6.5 Уничтожение объекта</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><i>obj</i>:kill()
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Сразу же уничтожает объект. Стоит заметить, что ни в коем случае нельзя уничтожать объект-отправитель для действия обратного вызова. Если уничтожить отправителя всё же необходимо, то, согласно описанию в разделе <a href="#Target-_002d-Action">Цель-действие</a>, добавьте атрибут <a href="#safeaction">safeaction</a>.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>obj</var>:<b>kill</b>()
</pre></td></tr></table>
</dd>
</dl>

<hr size="6">
<a name="Object-Kind-Check"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Object-Kill" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Object-Coordinate-Access" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Object" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Object-Kind-Check-1"></a>
<h3 class="subsection">5.6.6 Определение типа объекта</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = <i>obj</i>:is(&quot;kind&quot;)
</p>
<p>result = <i>obj</i>:kind()
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Эти методы позволяют определить и получить <a href="#Object-Kind">Тип объекта</a>.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>bool</var> = <var>obj</var>:<b>is</b>(&quot;<b>st_chess</b>&quot;)
<var>string</var> = <var>obj</var>:<b>kind</b>()
</pre></td></tr></table>
</dd>
</dl>

<hr size="6">
<a name="Object-Coordinate-Access"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Object-Kind-Check" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Object-Addition-and-Subtraction" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Object" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Object-Coordinate-Access-1"></a>
<h3 class="subsection">5.6.7 Доступ к координатам объекта</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = <i>obj</i>[&quot;x&quot;]
</p>
<p>result = <i>obj</i>[&quot;y&quot;]
</p>
<p>result1, result2 = <i>obj</i>:xy()
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Отдельные координаты позиции объекта можно прочитать в любой момент, воспользовавшись доступом Lua по индексу, заключённому в квадратные скобки. Конечно, можно использовать и альтернативный синтаксис Lua, предоставляющий доступ к индексу через точку (см. примеры). Чтобы узнать обе координаты, можно воспользоваться методом &lsquo;<samp>xy()</samp>&rsquo;, который вернёт одновременно два числа в виде перечисления Lua. В любом случае координаты объекта доступны только для чтения. Нельзя переместить объект, изменив его координаты.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>number</var> = <var>obj</var>[&quot;<b>x</b>&quot;]
<var>number</var> = <var>obj</var>.<b>x</b>
<var>number</var> = <var>obj</var>[&quot;<b>y</b>&quot;]
<var>number</var> = <var>obj</var>.<b>y</b>
<var>number1</var>, <var>number2</var> = <var>obj</var>:<b>xy</b>()
</pre></td></tr></table>
</dd>
</dl>

<hr size="6">
<a name="Object-Addition-and-Subtraction"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Object-Coordinate-Access" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Object-Center" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Object" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Object-Addition-and-Subtraction-1"></a>
<h3 class="subsection">5.6.8 Сложение и вычитание объектов</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = <i>obj</i> &lt;<b>+</b>|<b>-</b>&gt; &lt;<i>pos</i> | <i>obj</i> | <i>cpos</i> | <i>polist</i>&gt;
</p>
<p>result = &lt;<i>pos</i> | <i>obj</i> | <i>cpos</i> | <i>polist</i>&gt; &lt;<b>+</b>|<b>-</b>&gt; <i>obj</i>
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Когда объект добавляется к или вычитается из другой позиции или данных, которые могут быть приведены к позиции, то в результате будет получено значение позиции, представляющее собой векторную сумму или разность аргументов.
</p>
<p>Когда объект добавляется к или вычитается из списка позиций, то создаётся новый список с позициями, представляющими собой сумму или разность заданной позиции с каждым элементом указанного списка позиций.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>newpos</var> = <var>obj</var> + {<var>1</var>, <var>2</var>}
<var>newpos</var> = <var>myobject</var> - <var>obj</var>
<var>newpolist</var> = <var>obj</var> + <var>NEIGHBORS_4</var>
<var>newpolist</var> = <i>po</i>[&quot;<var>myfloor</var>#*&quot;] - <var>obj</var>
</pre></td></tr></table>
</dd>
</dl>

<hr size="6">
<a name="Object-Center"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Object-Addition-and-Subtraction" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Object-Join" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Object" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Object-Center-1"></a>
<h3 class="subsection">5.6.9 Округление объекта до центра решётки</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = #<i>obj</i>
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Округление вектора позиции объектов до координат центра участка решётки. Возвращается новое значение позиции, с координатами центра участка решётки с данной позицией.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>newpos</var> = #<var>obj</var>   -- e.g. po(3.5, 4.5)
</pre></td></tr></table>
</dd>
</dl>

<hr size="6">
<a name="Object-Join"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Object-Center" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Object-Intersection" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Object" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Object-Join-1"></a>
<h3 class="subsection">5.6.10 Объединение объектов</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = <i>obj</i> + <i>group</i>
</p>
<p>result = <i>group</i> + <i>obj</i>
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Возвращается новый набор, содержащий объекты группы и отдельный объект. Порядок элементов сохраняется. Если объект уже есть в группе, то новый объект в группе создан не будет, сохранится только его первое вхождение в группу.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>newgroup</var> = <var>obj1</var> + <i>grp</i>(<var>obj2</var>, <var>obj3</var>, <var>obj1</var>)   -- = grp(obj1, obj2, obj3)
<var>newgroup</var> = <i>grp</i>(<var>obj2</var>, <var>obj3</var>) + <var>obj1</var>         -- = grp(obj2, obj3, obj1)
</pre></td></tr></table>
</dd>
</dl>

<hr size="6">
<a name="Object-Intersection"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Object-Join" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Object-Difference" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Object" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Object-Intersection-1"></a>
<h3 class="subsection">5.6.11 Пересечение объектов</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = <i>obj</i> * <i>group</i>
</p>
<p>result = <i>group</i> * <i>obj</i>
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Если объект входит в группу, то будет возвращён набор, состоящий только из него, в противном случае будет возвращена пустая группа.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>newgroup</var> = <var>obj1</var> * <i>grp</i>(<var>obj1</var>, <var>obj2</var>)  -- = grp(obj1)
<var>newgroup</var> = <i>grp</i>(<var>obj2</var>) * <var>obj1</var>         -- = grp()
</pre></td></tr></table>
</dd>
</dl>

<hr size="6">
<a name="Object-Difference"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Object-Intersection" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Object-Sound" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Object" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Object-Difference-1"></a>
<h3 class="subsection">5.6.12 Разность объектов</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = <i>obj</i> - <i>group</i>
</p>
<p>result = <i>group</i> - <i>obj</i>
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>В первом случае, если объект не входит в группу, то будет возвращён набор, содержащий только сам объект, или же будет возвращена пустая группа. Во втором случае новая группа содержит все элементы старой без самого объекта. Порядок элементов не меняется.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>newgroup</var> = <var>obj1</var> - <i>grp</i>(<var>obj2</var>, <var>obj1</var>)  -- = grp()
<var>newgroup</var> = <i>grp</i>(<var>obj1</var>, <var>obj2</var>) - <var>obj1</var>  -- = grp(obj2)
</pre></td></tr></table>
</dd>
</dl>

<hr size="6">
<a name="Object-Sound"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Object-Difference" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Group" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Object" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Object-Sound-1"></a>
<h3 class="subsection">5.6.13 Звук объекта</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = <i>obj</i>:sound(&quot;name&quot;, volume)
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>С позиции объекта проигрывается звук с указанным именем. По умолчанию громкость устанавливается в значение &lsquo;<samp>1</samp>&rsquo;.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>obj</var>:<b>sound</b>(&quot;<b>quake</b>&quot;)
<var>obj</var>:<b>sound</b>(&quot;<b>quake</b>&quot;, <var>2</var>)
</pre></td></tr></table>
</dd>
</dl>



<hr size="6">
<a name="Group"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Object-Sound" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Group-Messaging" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Group-1"></a>
<h2 class="section">5.7 Группа</h2>

<p>Группа &mdash; это сортированные набор <a href="#Object">Объект</a>ов. Каждый объект может содержаться в группе только в одном экземпляре. В отличие от списка Lua, группа &mdash; тип данных с постоянным значением. Группу нельзя изменить, после того как она была получена. Но группы могут участвовать в вычислениях и к ним могут применяться такие операторы, как объединение, пересечение и разность, в результате которых будут получены другие значения групп.
</p>
<p>Хотя группы, как значения, могут храниться длительное время, при хранении группы дольше, чем для использования в выражении обратного вызова, следует быть внимательным. Группы, содержат ссылки на объекты, а объекты могут быть уничтожены. Поэтому у ранее полученной группы, при последующем её использовании в выражении обратного вызова могут быть недействительные ссылки на объекты. Если группе просто отсылается сообщение, то это не так критично, но в других случаях из группы следует удалять недействительные элементы (см ниже).
</p>
<p>Группа создаётся перечислением входящих в неё объектов в качестве аргументов <a href="#Functions">Функции</a> &lsquo;<samp>grp()</samp>&rsquo;, получением объектов из хранилища <a href="#NamedObjects">NamedObjects</a> или в результате других методов и вычислений.
</p>
<p>Поскольку группы постоянны, то порядок входящих в них объектов тоже постоянен. Все операции, которые генерируют новые группы, по мере возможностей стараются сохранять этот порядок. Например, объединение двух групп берёт в заданной последовательности объекты первой группы и добавляет к ним объекты из второй группы, отсутствующие в первой, в порядке их следования.
</p>
<p>Все операции с группами, которые возвращают новые группы, убирают из своих результатов недействительные на момент выполнения операции нулевые ссылки на объект. Эту возможность можно использовать, чтобы очистить группу при помощи функции &lsquo;<samp>grp()</samp>&rsquo;.
</p>
<p>Любое сообщение, посланное группе, перенаправится всем её элементам в порядке их следования. Запись атрибутов группы представляет собой последовательность циклов записи атрибутов для каждого элемента группы.
</p>
<p>Но можно пройти по элементам группы и обратиться к каждому из них при помощи операции доступа по индексу. Поддерживаются и несколько особых методов для управление группой на низком уровне, такие как перемешивание, выделение подгруппы, сортировка и т.п.
</p>
<p>Примеры работы можно посмотреть в разделе <a href="#Group-Tasks">Работа с группами</a>.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Group-Messaging">5.7.1 Отправка сообщений группам</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                  Метод &lsquo;<samp>:</samp>&rsquo;
</td></tr>
<tr><td align="left" valign="top"><a href="#Group-Attribute-Write">5.7.2 Запись атрибутов в группу</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Операторы индексирования &lsquo;<samp>[]</samp>&rsquo;
</td></tr>
<tr><td align="left" valign="top"><a href="#Group-Comparison">5.7.3 Сравнение групп</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                 Равенство &lsquo;<samp>==</samp>&rsquo; и неравенство &lsquo;<samp>~=</samp>&rsquo;
</td></tr>
<tr><td align="left" valign="top"><a href="#Group-Length">5.7.4 Размер группы</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                     Оператор &lsquo;<samp>#</samp>&rsquo;
</td></tr>
<tr><td align="left" valign="top"><a href="#Group-Member-Access">5.7.5 Доступ к элементам группы</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">              Операторы индексирования &lsquo;<samp>[]</samp>&rsquo;
</td></tr>
<tr><td align="left" valign="top"><a href="#Group-Loop">5.7.6 Обход элементов группы в цикле</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                       &lsquo;<samp>for obj in group do ... end</samp>&rsquo;
</td></tr>
<tr><td align="left" valign="top"><a href="#Group-Join">5.7.7 Объединение групп</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                       Оператор &lsquo;<samp>+</samp>&rsquo;
</td></tr>
<tr><td align="left" valign="top"><a href="#Group-Intersection">5.7.8 Пересечение групп</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">               Оператор &lsquo;<samp>*</samp>&rsquo;
</td></tr>
<tr><td align="left" valign="top"><a href="#Group-Difference">5.7.9 Разность групп</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                 Оператор &lsquo;<samp>-</samp>&rsquo;
</td></tr>
<tr><td align="left" valign="top"><a href="#Group-Shuffle">5.7.10 Перемешивание группы</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                    Метод &lsquo;<samp>shuffle()</samp>&rsquo;
</td></tr>
<tr><td align="left" valign="top"><a href="#Group-Sorting">5.7.11 Сортировка группы</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                    Метод &lsquo;<samp>sort()</samp>&rsquo;
</td></tr>
<tr><td align="left" valign="top"><a href="#Group-Subset">5.7.12 Выделение подгруппы</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                     Метод &lsquo;<samp>sub()</samp>&rsquo;
</td></tr>
<tr><td align="left" valign="top"><a href="#Group-Nearest-Object">5.7.13 Ближайший объект из группы</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">             Метод &lsquo;<samp>nearest()</samp>&rsquo;
</td></tr>
</table>

<hr size="6">
<a name="Group-Messaging"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Group" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Group-Attribute-Write" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Group" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Group-Messaging-1"></a>
<h3 class="subsection">5.7.1 Отправка сообщений группам</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = <i>group</i>:message(&quot;msg&quot;, value)
</p>
<p>result = <i>group</i>:msg(value)
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Отправляет сообщение с заданным значением или с &lsquo;<samp>nil</samp>&rsquo; вместо сообщения всем объектам группы. Любое сообщение может быть послано напрямую, через вызов метода с указанием имени сообщения. Если ссылка на объект недействительна, то сообщение просто игнорируется. В качестве возвращаемого значения выступает значение, возвращённое сообщением последнему объекту группы, или, для пустой группы, &lsquo;<samp>nil</samp>&rsquo;.
</p>
<p>Можно даже послать всем объектам группы сообщение &lsquo;<samp>kill()</samp>&rsquo;. Все объекты группы будут уничтожены, но группа сама останется и будет содержать недействительные нулевые ссылки на объекты.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>value</var> = <var>group</var>:<b>message</b>(&quot;<b>open</b>&quot;)
<var>value</var> = <var>group</var>:<b>open</b>()
<var>value</var> = <var>group</var>:<b>message</b>(&quot;<b>signal</b>&quot;, <var>1</var>)
<var>value</var> = <var>group</var>:<b>signal</b>(<var>1</var>)
<var>value</var> = <var>group</var>:<b>kill</b>()
</pre></td></tr></table>
</dd>
</dl>

<hr size="6">
<a name="Group-Attribute-Write"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Group-Messaging" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Group-Comparison" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Group" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Group-Attribute-Write-1"></a>
<h3 class="subsection">5.7.2 Запись атрибутов в группу</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><i>group</i>[&quot;attributename&quot;] = value
</p>
<p><i>group</i>:set({attributename1=value1, attributename2=value2,...})
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Задаёт значения атрибутов, описанных в следующих разделах, или пользовательских атрибутов для всех объектов группы. Метод &lsquo;<samp>set</samp>&rsquo; позволяет изменить одновременно несколько атрибутов. Если ссылка на объект недействительна, то запись атрибутов не производится. Групповое чтение атрибута невозможно &mdash; доступ на чтение к элементу с указанным индексом &mdash; это перегруженная операция, доступная только для элементов группы.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>group</var>[&quot;<b>color</b>&quot;] = <var>BLACK</var>
<var>group</var>.<b>color</b> = <var>BLACK</var>
<var>group</var>:<b>set</b>({<b>target</b>=<var>mydoor</var>, <b>action</b>=&quot;<b>open</b>&quot;})
</pre></td></tr></table>
</dd>
</dl>

<hr size="6">
<a name="Group-Comparison"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Group-Attribute-Write" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Group-Length" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Group" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Group-Comparison-1"></a>
<h3 class="subsection">5.7.3 Сравнение групп</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = <i>group1</i> &lt;==|~=&gt; <i>group2</i>
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Сравнение двух групп. Две группы равны, если состоят из одного и того же набора элементов, независимо от порядка их следования в каждой из групп. В противном случае они не эквивалентны.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>bool</var> = <i>grp</i>(<var>obj1</var>, <var>obj2</var>) == <i>grp</i>(<var>obj2</var>, <var>obj1</var>)  -- = true
<var>bool</var> = <i>grp</i>(<var>obj1</var>, <var>obj2</var>) == <i>grp</i>(<var>obj1</var>, <var>obj3</var>)  -- = false, если содержимое объектов отличается
<var>bool</var> = <i>grp</i>(<var>obj1</var>) ~= <i>grp</i>(<var>obj2</var>, <var>obj1</var>)        -- = true, если содержимое объектов отличается
</pre></td></tr></table>
</dd>
</dl>

<hr size="6">
<a name="Group-Length"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Group-Comparison" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Group-Member-Access" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Group" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Group-Length-1"></a>
<h3 class="subsection">5.7.4 Размер группы</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = #<i>group</i>
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Количество элементов в группе. Недействительные нулевые ссылки на объект тоже учитываются.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>number</var> = #<i>grp</i>(<var>obj1</var>, <var>obj2</var>)         -- = 2
for <var>i</var> = <var>1</var>, #<var>group</var> do <var>obj</var> = <var>group</var>[<var>i</var>] ... end
</pre></td></tr></table>
</dd>
</dl>

<hr size="6">
<a name="Group-Member-Access"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Group-Length" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Group-Loop" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Group" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Group-Member-Access-1"></a>
<h3 class="subsection">5.7.5 Доступ к элементам группы</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = <i>group</i>[<i>index</i>]
</p>
<p>result = <i>group</i>[<i>obj</i>]
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Для индексов в диапазоне от 1 до <i>#group</i> этот основанный на индексе доступ на чтение возвращает объект, находящийся в группе на соответствующем месте. Отрицательные индексы из диапазона от <i>-#group</i>до -1 возвращают те же объекты. Следовательно, к последнему объекту всегда можно обратиться по индексу -1. Обращение ко всем остальным индексам возвращает недействительную нулевую ссылку на объект (&lsquo;<samp>NULL</samp>&rsquo;), а не &lsquo;<samp>nil</samp>&rsquo;, как делают списки! Поэтому всегда можно послать сообщения по полученным ссылкам на объект.
</p>
<p>Основанный на индексе доступ на чтение возвращает порядковый номер указанного объекта в группе, его индекс, если объект присутствует в группе, или &lsquo;<samp>nil</samp>&rsquo;, если отсутствует.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>object</var> = <i>grp</i>(<var>obj1</var>, <var>obj2</var>)[2]     -- = obj2
<var>object</var> = <i>grp</i>(<var>obj1</var>, <var>obj2</var>)[-1]    -- = obj2
<var>object</var> = <i>grp</i>(<var>obj1</var>, <var>obj2</var>)[0]     -- = NULL object
for <var>i</var> = <var>1</var>, #<var>group</var> do <var>obj</var> = <var>group</var>[<var>i</var>] ... end
<var>number</var> = <i>grp</i>(<var>obj1</var>, <var>obj2</var>)[<var>obj2</var>]  -- = 2
<var>number</var> = <i>grp</i>(<var>obj1</var>, <var>obj2</var>)[<var>obj3</var>]  -- = nil
</pre></td></tr></table>
</dd>
</dl>

<hr size="6">
<a name="Group-Loop"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Group-Member-Access" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Group-Join" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Group" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Group-Loop-1"></a>
<h3 class="subsection">5.7.6 Обход элементов группы в цикле</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>for <i>obj</i> in <i>group</i> do ... end
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Обход всех объектов группы в цикле. Тело цикла выполняется по порядку для всех объектов, включая недействительные нулевые ссылки на объект.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">for <var>obj</var> in <var>group</var> do <var>obj</var>:<b>toggle</b>() end
</pre></td></tr></table>
</dd>
</dl>


<hr size="6">
<a name="Group-Join"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Group-Loop" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Group-Intersection" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Group" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Group-Join-1"></a>
<h3 class="subsection">5.7.7 Объединение групп</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = <i>group</i> + &lt;<i>obj</i>|<i>group</i>&gt;
</p>
<p>result = &lt;<i>obj</i>|<i>group</i>&gt; + <i>group</i>
</p>

</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Возврашает новый набор, содержащий по одному вхождению каждого объекта, входящего хотя бы в одну из указанных групп. Порядок элементов сохраняется. Если объект входит в обе группы, то в новой группе будет только одна ссылка на этот объект, а точнее, первая добавленная.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>newgroup</var> = <var>obj1</var> + <i>grp</i>(<var>obj2</var>, <var>obj3</var>, <var>obj1</var>)   -- = grp(obj1, obj2, obj3)
<var>newgroup</var> = <i>grp</i>(<var>obj2</var>, <var>obj3</var>) + <i>grp</i>(<var>obj1</var>, <var>obj3</var>)   -- = grp(obj2, obj3, obj1)
</pre></td></tr></table>
</dd>
</dl>

<hr size="6">
<a name="Group-Intersection"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Group-Join" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Group-Difference" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Group" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Group-Intersection-1"></a>
<h3 class="subsection">5.7.8 Пересечение групп</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = &lt;<i>obj</i>|<i>group</i>&gt; * <i>group</i>
</p>
<p>result = <i>group</i> * &lt;<i>obj</i>|<i>group</i>&gt;
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Новый набор, содержащий только объекты, присутствующие в обеих группах. Объекты возвращаются в том порядке, в котором они расположены в первой группе.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>newgroup</var> = <var>obj1</var> * <i>grp</i>(<var>obj2</var>, <var>obj1</var>)  -- = grp(obj1)
<var>newgroup</var> = <i>grp</i>(<var>obj1</var>, <var>obj2</var>) * <i>grp</i>(<var>obj2</var>, <var>obj1</var>, <var>obj3</var>)  -- = grp(obj1, obj2)
</pre></td></tr></table>
</dd>
</dl>

<hr size="6">
<a name="Group-Difference"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Group-Intersection" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Group-Shuffle" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Group" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Group-Difference-1"></a>
<h3 class="subsection">5.7.9 Разность групп</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = &lt;<i>obj</i>|<i>group</i>&gt; - <i>group</i>
</p>
<p>result = <i>group</i> - &lt;<i>obj</i>|<i>group</i>&gt;
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Новый набор, содержащий только объекты, первой группы, которых нет во второй. Объекты возвращаются в том порядке, в котором они расположены в первой группе.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>newgroup</var> = <var>obj1</var> - <i>grp</i>(<var>obj2</var>, <var>obj1</var>)  -- = grp()
<var>newgroup</var> = <i>grp</i>(<var>obj1</var>, <var>obj2</var>, <var>obj3</var>) - <i>grp</i>(<var>obj2</var>, <var>obj4</var>)  -- = grp(obj1, obj3)
</pre></td></tr></table>
</dd>
</dl>

<hr size="6">
<a name="Group-Shuffle"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Group-Difference" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Group-Sorting" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Group" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Group-Shuffle-1"></a>
<h3 class="subsection">5.7.10 Перемешивание группы</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = <i>group</i>:shuffle()
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Возвращает новую группу с теми же элементами, но в другой последовательности, выбранной случайным образом. Стоит отметить, что после вызова этого метода из полученной группы удаляются все недействительные нулевые ссылки на объект.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>newgroup</var> = <i>grp</i>(<var>obj1</var>, <var>obj2</var>)
</pre></td></tr></table>
</dd>
</dl>

<hr size="6">
<a name="Group-Sorting"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Group-Shuffle" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Group-Subset" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Group" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Group-Sorting-1"></a>
<h3 class="subsection">5.7.11 Сортировка группы</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = <i>group</i>:sort(&quot;circular&quot;)
</p>
<p>result = <i>group</i>:sort(&quot;linear&quot; &lt;, <i>direction</i>&gt;)
</p>
<p>result = <i>group</i>:sort()
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Возвращает новую группу, состоящую из тех же объектов, но отсортированных в другом порядке. Стоит отметить, что после вызова этого метода из полученной группы удаляются все недействительные нулевые ссылки на объект.
</p>
<p>Если в качестве параметра выступает строка <code>&quot;circular&quot;</code>, то объекты располагаются вокруг их центра на определённом угловом расстоянии друг от друга. Расстояние до центра не имеет значения.
</p>
<p>Если в качестве параметра выступает строка <code>&quot;linear&quot;</code>, то объекты располагаются линейно. В качестве вектора направления сортировки можно задать позицию (см. раздел <a href="#Position">Позиция</a>) или, по умолчанию, первые два объекта группы.
</p>
<p>Если не задан аргумент, по которому следует проводить сортировку, то объекты будут отсортированы лексически по их имени.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>newgroup</var> = <i>grp</i>(<var>obj1</var>, <var>obj2</var>, <var>obj3</var>):sort(&quot;linear&quot;, po(2,1))
<var>newgroup</var> = <i>grp</i>(<var>obj1</var>, <var>obj2</var>, <var>obj3</var>):sort(&quot;circular&quot;)
<var>newgroup</var> = <i>grp</i>(<var>obj1</var>, <var>obj2</var>, <var>obj3</var>):sort()
</pre></td></tr></table>
</dd>
</dl>

<hr size="6">
<a name="Group-Subset"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Group-Sorting" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Group-Nearest-Object" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Group" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Group-Subset-1"></a>
<h3 class="subsection">5.7.12 Выделение подгруппы</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = <i>group</i>:sub(<i>number</i>)
</p>
<p>result = <i>group</i>:sub(<i>start</i>, <i>end</i>)
</p>
<p>result = <i>group</i>:sub(<i>start</i>, -<i>number</i>)
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Возвращает новую группу, состоящую из набора указанных объектов. Последовательность объектов в новой группе идентична их последовательности в исходной группе. Стоит отметить, что после вызова этого метода и определения объектов-кандидатов на включение в полученную группу из неё удаляются все недействительные нулевые ссылки на объект.
</p>
<p>Одно число-параметр задаёт количество запрашиваемых объектов. Положительное число возвращает указанное количество объектов, начиная с первого в группе. Отрицательное, наоборот, возвращает объекты, начиная с последнего. В этом случае модуль числа определяет количество выделенных объектов, отсчитываемых в обратном порядке от последнего в последовательности.
</p>
<p>Два положительных числа-параметра задают первый и последний индексы последовательности запрашиваемых объектов.
</p>
<p>Если второе из двух чисел-параметров отрицательно, то первый параметр задаёт индекс первого объекта, а модуль второго параметра задаёт количество объектов, которые будут включены в подгруппу.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>newgroup</var> = <i>grp</i>(<var>obj1</var>, <var>obj2</var>, <var>obj3</var>, <var>obj4</var>):sub(2)     -- = grp(obj1, obj2)
<var>newgroup</var> = <i>grp</i>(<var>obj1</var>, <var>obj2</var>, <var>obj3</var>, <var>obj4</var>):sub(-2)    -- = grp(obj3, obj4)
<var>newgroup</var> = <i>grp</i>(<var>obj1</var>, <var>obj2</var>, <var>obj3</var>, <var>obj4</var>):sub(2, 4)  -- = grp(obj2, obj3, obj4)
<var>newgroup</var> = <i>grp</i>(<var>obj1</var>, <var>obj2</var>, <var>obj3</var>, <var>obj4</var>):sub(2, -2) -- = grp(obj2, obj3)
</pre></td></tr></table>
</dd>
</dl>

<hr size="6">
<a name="Group-Nearest-Object"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Group-Subset" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#NamedObjects" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Group" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Group-Nearest-Object-1"></a>
<h3 class="subsection">5.7.13 Ближайший объект из группы</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = <i>group</i>:nearest(<i>obj</i>)
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Возвращает объект группы, который находится ближе всех к позиции объекта, переданного по ссылке. При расчёте расстояний координаты позиции актёра не округляются. Если два объекта находятся на одном и том же расстоянии от объекта, переданного по ссылке из них случайным образом выбирается один.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>newobject</var> = <i>grp</i>(<var>obj1</var>, <var>obj2</var>, <var>obj3</var>):nearest(<var>obj4</var>)
</pre></td></tr></table>
</dd>
</dl>



<hr size="6">
<a name="NamedObjects"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Group-Nearest-Object" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#NamedObjects-Repository-Request" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="NamedObjects-1"></a>
<h2 class="section">5.8 NamedObjects</h2>

<p>Тип данных NamedObjects используется только одним объектом, единым хранилищем именованных объектов. При именовании объектов (см. раздел <a href="#Object-Naming">Именование объектов</a>), это хранилище записывает его имя и позволяет позже обратиться к нему по имени.
</p>
<p>Поскольку NamedObjects един, то нельзя создавать другие его экземпляры. При загрузке уровня экземпляр данного объекта хранится в глобальной переменной &lsquo;<samp>no</samp>&rsquo;.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#NamedObjects-Repository-Request">5.8.1 Запрос к хранилищу NamedObjects</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">  Оператор индексирования &lsquo;<samp>[]</samp>&rsquo; для чтения
</td></tr>
<tr><td align="left" valign="top"><a href="#NamedObjects-Object-Naming">5.8.2 Именование объектов NamedObjects</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       Оператор индексирования &lsquo;<samp>[]</samp>&rsquo; для записи
</td></tr>
</table>

<hr size="6">
<a name="NamedObjects-Repository-Request"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#NamedObjects" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#NamedObjects-Object-Naming" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#NamedObjects" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="NamedObjects-Repository-Request-1"></a>
<h3 class="subsection">5.8.1 Запрос к хранилищу NamedObjects</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = no[&quot;<i>name</i>&quot;]
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Запрос одного или нескольких объектов из хранилища. Если в имени не задан шаблон, то возвращается значение типа <a href="#Object">Объект</a>. Это либо уникальный объект с указанным именем, либо, если объекта с заданным именем нет, &mdash; недействительный нулевой (&lsquo;<samp>NULL</samp>&rsquo;<STRONG>) </STRONG>объект.
</p>
<p>Если в запрашиваемом имени есть символы шаблона, такие как звёздочка &lsquo;<samp>*</samp>&rsquo; или знак вопроса &lsquo;<samp>?</samp>&rsquo;, то возвращается <a href="#Group">Группа</a>, содержащая все объекты с подходящими именами. Звёздочке соответствует ни одного, один или несколько произвольных символов. Знаку вопроса соответствует один произвольный символ. Оба символа шаблона могут использоваться в любом месте строки и в любом количестве. В любом случае возвращаемым значением всегда будет <a href="#Group">Группа</a>. В группе может содержаться несколько объектов, один объект или вообще не быть ни одного объекта, если не существует объектов, удовлетворяющих шаблону.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>obj</var> = <i>no</i>[&quot;<var>mydoor</var>&quot;]       &mdash; точное совпадение имени
<var>group</var> = <i>no</i>[&quot;<var>mydoors#*</var>&quot;]  &mdash; любой суффикс
<var>group</var> = <i>no</i>[&quot;<var>mydoor?</var>&quot;]    &mdash; суффикс из одного символа
<var>group</var> = <i>no</i>[&quot;<var>mydoors?#*</var>&quot;] &mdash; соответствует, например, &quot;mydoorsA#123435&quot;, &quot;mydoorsB#1213&quot;
</pre></td></tr></table>
</dd>
</dl>

<hr size="6">
<a name="NamedObjects-Object-Naming"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#NamedObjects-Repository-Request" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#PositionList" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#NamedObjects" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="NamedObjects-Object-Naming-1"></a>
<h3 class="subsection">5.8.2 Именование объектов NamedObjects</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>no[&quot;<i>name</i>&quot;] = <i>obj</i>
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Доступ по индексу для записи в хранилище позволяет назначить объекту имя или переименовать его. Заметьте, что назначить объекту имя или переименовать его также можно с помощью записи атрибута <a href="#Object">Объекта</a>. Имя объекта хранится в атрибуте <code>&quot;name&quot;</code>. Оба способа именования объекта абсолютно эквивалентны.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><i>no</i>[&quot;<var>myobject</var>&quot;] = <var>obj</var>
</pre></td></tr></table>
</dd>
</dl>



<hr size="6">
<a name="PositionList"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#NamedObjects-Object-Naming" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#PositionList-Comparison" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="PositionList-1"></a>
<h2 class="section">5.9 PositionList</h2>

<p>PositionList &mdash; это упорядоченный набор, или список, позиций (см. раздел <a href="#Position">Позиция</a>). Как и <a href="#Group">Группа</a>, это вместилище &mdash; постоянный тип данных, который нельзя изменить. Но, объединяя существующие списки и отдельные позиции, можно легко создавать новые списки позиций.
</p>
<p>Важное отличие от группы состоит в способности списка позиций хранить позицию одновременно в нескольких местах. Благодаря этому список позиций подходит для описания путей, даже замкнутых или с пересекающимися сегментами.
</p>
<p>Поскольку позиции (см. раздел <a href="#Position">Позиция</a>) это значения, которые никогда не становятся недействительными, однажды созданный список позиций никогда не меняется и не становится недействительным. По своей сути их значения всегда существуют. Поэтому они лучший выбор для вместилища долгосрочного хранения.
</p>
<p>Группу можно легко преобразовать в <a href="#PositionList-Conversion">список позиций</a>, воспользовавшись единым <a href="#Positions-Repository">хранилищем позиций</a>, с помощью простого выражения &lsquo;<samp>po(group)</samp>&rsquo;. А все объекты (см. раздел <a href="#Object">Объект</a>) общего типа, расположенные по контуру, описываемому списком позиций, можно получить с помощью таких функций (см. раздел <a href="#Functions">Функции</a>), как &lsquo;<samp>st(polist)</samp>&rsquo;, &lsquo;<samp>it(polist)</samp>&rsquo; и &lsquo;<samp>fl(polist)</samp>&rsquo;.
</p>
<p>Поскольку в каждой ячейке решётки должен быть один объект покрытия, то заданный список позиций можно преобразовать в группу покрытий без потери информации. Теперь к покрытиям можно применять любые методы группы, например перемешивание, сортировка, выделение подгруппы и т.п. Наконец, полученную группу можно преобразовать обратно к постоянному списку позиций. Естественно, при преобразовании сохраняется порядок элементов.
</p>
<p>Для упрощения преобразования и дополнения списка позиций поддерживается несколько дополнительных операторов, работающих с позициями.
</p>
<p>Следует отметить, что в отличии от группы (см. раздел <a href="#Group">Группа</a>), этот тип данных не может храниться прямо в атрибуте объекта (см. раздел <a href="#Object">Объект</a>). Однако всегда можно хранить в атрибутах <a href="#Group">группу</a> покрытий. Если есть вероятность, что покрытия будут уничтожены, то, возможно, им следует присвоить имена, как описано в разделе <a href="#Named-Positions">Именованные позиции</a>.
</p>
<p>Примеры работы можно посмотреть в разделе <a href="#Named-Positions-Tasks">Работа с именованными позициями</a>.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#PositionList-Comparison">5.9.1 Сравнение PositionList</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Равенство &lsquo;<samp>==</samp>&rsquo; и неравенство &lsquo;<samp>~=</samp>&rsquo;
</td></tr>
<tr><td align="left" valign="top"><a href="#PositionList-Length">5.9.2 Размер PositionList</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">              Оператор &lsquo;<samp>#</samp>&rsquo;
</td></tr>
<tr><td align="left" valign="top"><a href="#PositionList-Member-Access">5.9.3 Доступ к элементам PositionList</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       Операторы индексирования &lsquo;<samp>[]</samp>&rsquo;
</td></tr>
<tr><td align="left" valign="top"><a href="#PositionList-Concatenation">5.9.4 Объединение PositionList</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       Оператор &lsquo;<samp>..</samp>&rsquo;
</td></tr>
<tr><td align="left" valign="top"><a href="#PositionList-Translation">5.9.5 Смещение PositionList</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         Операторы &lsquo;<samp>+</samp>&rsquo; и &lsquo;<samp>-</samp>&rsquo;
</td></tr>
<tr><td align="left" valign="top"><a href="#PositionList-Stretching">5.9.6 Масштабирование PositionList</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Операторы &lsquo;<samp>*</samp>&rsquo; и &lsquo;<samp>/</samp>&rsquo;
</td></tr>
</table>

<hr size="6">
<a name="PositionList-Comparison"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#PositionList" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#PositionList-Length" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#PositionList" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="PositionList-Comparison-1"></a>
<h3 class="subsection">5.9.1 Сравнение PositionList</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = <i>polist1</i> &lt;==|~=&gt; <i>polist2</i>
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Сравнение двух списков позиций. Два списка позиций эквиваленты, если в обоих присутствуют одинаковые элементы в одном и том же порядке. В противном случае они не эквивалентны.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>bool</var> = (<i>po</i>(<var>2</var>,<var>3</var>).. <i>po</i>(<var>5</var>,<var>7</var>)) == (<i>po</i>(<var>2</var>,<var>3</var>) .. <i>po</i>(<var>5</var>,<var>7</var>))  -- = true
<var>bool</var> = (<i>po</i>(<var>2</var>,<var>3</var>).. <i>po</i>(<var>5</var>,<var>7</var>)) == (<i>po</i>(<var>4</var>,<var>0</var>) .. <i>po</i>(<var>5</var>,<var>7</var>))  -- = false, различные позиции
<var>bool</var> = (<i>po</i>(<var>2</var>,<var>3</var>).. <i>po</i>(<var>5</var>,<var>7</var>)) == (<i>po</i>(<var>5</var>,<var>7</var>) .. <i>po</i>(<var>2</var>,<var>3</var>))  -- = false, различный порядок
</pre></td></tr></table>
</dd>
</dl>

<hr size="6">
<a name="PositionList-Length"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#PositionList-Comparison" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#PositionList-Member-Access" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#PositionList" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="PositionList-Length-1"></a>
<h3 class="subsection">5.9.2 Размер PositionList</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = #<i>polist</i>
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Количество позиций в списке.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>number</var> = #(<i>po</i>(<var>2</var>,<var>3</var>) .. <i>po</i>(<var>5</var>,<var>7</var>)) -- = 2
for <var>i</var> = <var>1</var>, #<var>polist</var> do <var>pos</var> = <var>polist</var>[<var>i</var>] ... end
</pre></td></tr></table>
</dd>
</dl>

<hr size="6">
<a name="PositionList-Member-Access"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#PositionList-Length" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#PositionList-Concatenation" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#PositionList" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="PositionList-Member-Access-1"></a>
<h3 class="subsection">5.9.3 Доступ к элементам PositionList</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = <i>group</i>[<i>index</i>]
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Для индексов в диапазоне от 1 до #<i>polist</i> этот основанный на индексе доступ на чтение возвращает позицию, находящуюся в группе на соответствующем месте. Отрицательные индексы из диапазона от -#<i>polist</i> до -1 возвращают те же позиции. Следовательно, к последней позиции всегда можно обратиться по индексу -1. Обращение ко всем остальным индексам, как и ко всем спискам Lua, возвращает &lsquo;<samp>nil</samp>&rsquo;.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>pos</var> = (<i>po</i>(<var>2</var>,<var>3</var>) .. <i>po</i>(<var>5</var>,<var>7</var>))[2]     -- = po(5,7)
<var>pos</var> = (<i>po</i>(<var>2</var>,<var>3</var>) .. <i>po</i>(<var>5</var>,<var>7</var>))[-1]    -- = po(5,7)
<var>pos</var> = (<i>po</i>(<var>2</var>,<var>3</var>) .. <i>po</i>(<var>5</var>,<var>7</var>))[0]     -- = nil
for <var>i</var> = <var>1</var>, #<var>polist</var> do <var>pos</var> = <var>polist</var>[<var>i</var>] ... end
</pre></td></tr></table>
</dd>
</dl>

<hr size="6">
<a name="PositionList-Concatenation"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#PositionList-Member-Access" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#PositionList-Translation" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#PositionList" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="PositionList-Concatenation-1"></a>
<h3 class="subsection">5.9.4 Объединение PositionList</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = <i>polist1</i> .. &lt;<i>pos</i> | <i>polist2</i>&gt;
</p>
<p>result = &lt;<i>pos</i> | <i>polist1</i>&gt; .. <i>polist2</i>
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Объединяет два списка позиций или позицию со списком позиций в новый PositionList, содержащий все позиции в указанном порядке. Следует отметить, что эта операция ассоциативна, то есть не имеет значения, используются ли при множественном объединении скобки.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>newpolist</var> = <i>po</i>(<i>po</i>(<var>2</var>,<var>3</var>), <i>po</i>(<var>5</var>,<var>7</var>)) .. <i>po</i>(<var>4</var>, <var>4</var>) -- = (2,3),(5,7),(4,4)
</pre></td></tr></table>

</dd>
<dt> <b>Предупреждение:</b></dt>
<dd><p>Обратите внимание, что в силу числовой природы списков позиций их объединение создаёт новое значение. Эта операция требует значительного объема ресурсов компьютера. При сборе потенциально большого количества позиций в цикле не следует объединять каждого нового кандидата с существующим списком позиций. Не создавайте большого количества значений списка позиций и объединяйте позиции в стандартном списке Lua. Преобразуем данную таблицу в список позиций (см. раздел <a href="#PositionList-Conversion">Преобразование PositionList</a>):
</p>
<table><tr><td>&nbsp;</td><td><pre class="example"><var>result</var> = {}
for <var>x</var> = 1, 200 do
    table.insert(<var>result</var>, <i>po</i>(<var>x</var>, 17))
end
return <i>po</i>(<var>result</var>)
</pre></td></tr></table>

</dd>
</dl>

<hr size="6">
<a name="PositionList-Translation"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#PositionList-Concatenation" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#PositionList-Stretching" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#PositionList" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="PositionList-Translation-1"></a>
<h3 class="subsection">5.9.5 Смещение PositionList</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = <i>polist</i> &lt;<b>+</b>|<b>-</b>&gt; &lt;<i>pos</i> | <i>obj</i> | <i>cpos</i>&gt;
</p>
<p>result = &lt;<i>pos</i> | <i>obj</i> | <i>cpos</i>&gt; &lt;<b>+</b>|<b>-</b>&gt; <i>polist</i>
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Если позицию или данные, преобразуемые к позиции, прибавить к/вычесть из списка позиций, то будет создан новый список с позициями, представляющими сумму или разность позиции с каждым элементом списка позиций. В итоге список позиций смещается на величину координат позиции, как вектор.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>newpolist</var> = <i>po</i>(<var>2</var>, <var>3</var>) + <var>NEIGHBORS_4</var>      -- po(1, 3) .. po(2, 4) .. po(3, 3) .. po(2, 2)
<var>newpolist</var> = <i>po</i>[&quot;<var>myfloor</var>#*&quot;] - <i>po</i>(<var>3</var>, <var>0</var>)
</pre></td></tr></table>
</dd>
</dl>

<hr size="6">
<a name="PositionList-Stretching"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#PositionList-Translation" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Positions-Repository" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#PositionList" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="PositionList-Stretching-1"></a>
<h3 class="subsection">5.9.6 Масштабирование PositionList</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = <i>polist</i> <b>*</b> <i>number</i>
</p>
<p>result = <i>number</i> <b>*</b> <i>polist</i>
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Скалярное произведение или частное всех позиций из списка позиций. Обе координаты всех значений позиций умножаются или делятся на указанное число. В итоге список позиций масштабируется согласно величине множителя.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>newpolist</var> = <var>2</var> * <var>NEIGHBORS_4</var>              -- = po(9, 12)
<var>newpolist</var> = (<i>po</i>(<var>2</var>,<var>4</var>) .. <i>po</i>(<var>6</var>,<var>7</var>)) * <var>1/2</var>   -- = (1, 2), (3, 3.5)
</pre></td></tr></table>
</dd>
</dl>



<hr size="6">
<a name="Positions-Repository"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#PositionList-Stretching" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Positions-Repository-Request" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Positions-Repository-1"></a>
<h2 class="section">5.10 Хранилище позиций</h2>

<p>Тип данных &lsquo;позиция&rsquo; используется только в одном случае &mdash; единым хранилищем именованных позиций. Кроме работы с именованными позициями он предоставляет полезные преобразования других типов данных к типам, основанным на позиции.
</p>
<p>Поскольку хранилище позиций едино, то нельзя создать его новый экземпляр. Хранилище становится доступным при загрузке уровня, а его элементы хранятся в глобальной переменной &lsquo;<samp>po</samp>&rsquo;.
</p>
<p>Хранилище позиций &mdash; это расширение хранилища именованных объектов (см. раздел <a href="#NamedObjects">NamedObjects</a>). При любом присвоении объекту имени (см. раздел <a href="#Object-Naming">Именование объектов</a>) в этом хранилище сохраняется имя объекта и позже к текущей позиции объекта можно обратиться по имени. Но даже если объект покрытия будет уничтожен, его позиция будет храниться как именованная позиция (см. раздел <a href="#Named-Positions">Именованные позиции</a>). Конечно, можно самостоятельно присваивать позициям имена, но у позиций существующих именованных объектов при определении конфликтов имён всегда будет преимущество.
</p>
<p>Примеры работы можно посмотреть в разделе <a href="#Named-Positions-Tasks">Работа с именованными позициями</a>.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Positions-Repository-Request">5.10.1 Запрос к хранилищу позиций</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">  Оператор индексирования &lsquo;<samp>[]</samp>&rsquo; для чтения
</td></tr>
<tr><td align="left" valign="top"><a href="#Positions-Repository-Storage">5.10.2 Доступ к элементам хранилища позиций</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">  Оператор индексирования &lsquo;<samp>[]</samp>&rsquo; для записи
</td></tr>
<tr><td align="left" valign="top"><a href="#Position-Conversion">5.10.3 Преобразование позиций</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Функция &lsquo;<samp>po()</samp>&rsquo;
</td></tr>
<tr><td align="left" valign="top"><a href="#PositionList-Conversion">5.10.4 Преобразование PositionList</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       Функция &lsquo;<samp>po()</samp>&rsquo;
</td></tr>
</table>

<hr size="6">
<a name="Positions-Repository-Request"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Positions-Repository" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Positions-Repository-Storage" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Positions-Repository" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Positions-Repository-Request-1"></a>
<h3 class="subsection">5.10.1 Запрос к хранилищу позиций</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = po[&quot;<i>name</i>&quot;]
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Запрос из хранилища одной или нескольких позиций. Если в имени не используются символы шаблона, будет возвращено значение позиции (см. раздел <a href="#Position">Позиция</a>) конкретного объекта с заданным именем, если тот существует. Если объект с таким именем не существует, то будет возвращена последняя позиция, хранившаяся под этим именем. Если позиция не существует, то будет возвращено значение &lsquo;<samp>nil</samp>&rsquo;.
</p>
<p>Если в запрашиваемом имени есть символы шаблона, такие как звёздочка &lsquo;<samp>*</samp>&rsquo; или знак вопроса &lsquo;<samp>?</samp>&rsquo;, то возвращается <a href="#PositionList">PositionList</a>, содержащий все позиции с подходящими именами. Звёздочке соответствует ни одного, один или несколько произвольных символов. Знаку вопроса соответствует один произвольный символ. Оба символа шаблона могут использоваться в любом месте строки и в любом количестве. В любом случае возвращаемым значением всегда будет <a href="#PositionList">PositionList</a>. В списке может содержаться несколько позиций, одна позиция или вообще не быть ни одной позиции, если не существует позиций, удовлетворяющих шаблону.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>pos</var> = <i>po</i>[&quot;<var>mydoor</var>&quot;]        &mdash; точное совпадение имени
<var>polist</var> = <i>po</i>[&quot;<var>mydoors#*</var>&quot;]  &mdash; любой суффикс
<var>polist</var> = <i>po</i>[&quot;<var>mydoor?</var>&quot;]    &mdash; суффикс из одного символа
<var>polist</var> = <i>po</i>[&quot;<var>mydoors?#*</var>&quot;] &mdash; соответствует, например, &quot;mydoorsA#123435&quot;, &quot;mydoorsB#1213&quot;
</pre></td></tr></table>
</dd>
</dl>

<hr size="6">
<a name="Positions-Repository-Storage"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Positions-Repository-Request" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Position-Conversion" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Positions-Repository" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Positions-Repository-Storage-1"></a>
<h3 class="subsection">5.10.2 Доступ к элементам хранилища позиций</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>po[&quot;<i>name</i>&quot;] = <i>obj</i>
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Доступ к хранилищу по индексу для записи позволяет присвоить имя или переименовать позиции. Следует отметить, что имени, уже ссылающемуся на существующий <a href="#Object">Объект</a>, нельзя присвоить новую позицию. Попытка такого доступа на запись будет просто проигнорирована.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><i>po</i>[&quot;<var>mypos</var>&quot;] = <var>pos</var>
</pre></td></tr></table>
</dd>
</dl>

<hr size="6">
<a name="Position-Conversion"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Positions-Repository-Storage" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#PositionList-Conversion" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Positions-Repository" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Position-Conversion-1"></a>
<h3 class="subsection">5.10.3 Преобразование позиций</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = po(&lt;<i>obj</i> | <i>pos</i> | {<var>x</var>, <var>y</var>} | <var>x</var>, <var>y</var> &gt;)
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Преобразовывает свой параметр в новое значение позиции.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>pos</var> = <i>po</i>(<var>pos2</var>)
<var>pos</var> = <i>po</i>(<var>obj</var>)
<var>pos</var> = <i>po</i>({<var>2</var>, <var>4</var>})
<var>pos</var> = <i>po</i>(<var>3</var>, <var>7</var>)
</pre></td></tr></table>
</dd>
</dl>

<hr size="6">
<a name="PositionList-Conversion"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Position-Conversion" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Tile-and-Object-Declaration" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Positions-Repository" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="PositionList-Conversion-1"></a>
<h3 class="subsection">5.10.4 Преобразование PositionList</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = po(<i>group</i> | {<i>pos1</i>, <i>pos2</i>, <i>pos3</i>})
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Преобразовывает указанную группу или список в новый <a href="#PositionList">PositionList</a>, который содержит позиции всех действительных <a href="#Object">Объект</a>ов группы или списка в той же последовательности.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>polist</var> = <i>po</i>(<var>group</var>)
<var>polist</var> = <i>po</i>({<i>po</i>(<var>3</var>, <var>7</var>), <i>po</i>(<var>2</var>, <var>6</var>)})
<var>polist</var> = <i>po</i>({})  &mdash; пустой список позиций
</pre></td></tr></table>
</dd>
</dl>


<hr size="6">
<a name="Tile-and-Object-Declaration"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#PositionList-Conversion" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Tile-concat" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Tile-and-Object-Declaration-1"></a>
<h2 class="section">5.11 Описание секций и объектов</h2>

<p>Секция &mdash; это описание одного или нескольких объектов, которые должны располагаться в одной и той же ячейке решётки. Отдельный объект можно описать простым описанием объекта, анонимным списком Lua с полями, описывающими тип объекта и все его атрибуты. Объект можно описать тремя незначительно отличающимися способами:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">{&quot;<b>st_chess</b>&quot;, <b>name</b>=&quot;<var>jumper</var>&quot;, <b>color</b>=<var>WHITE</var>}
{&quot;<b>st_chess_white</b>&quot;, &quot;<var>jumper</var>&quot;, <var>_myattr</var>=<var>5</var>}
{&quot;<b>ac_marble</b>&quot;, 0.2, 0.6, <b>name</b>=&quot;<var>blacky</var>&quot;}
</pre></td></tr></table>

<p>Первое поле, хранящееся в списке на первом месте, всегда должно быть названием поддерживаемого Enigma типа объекта. В первом примере все остальные поля списка представляют собой пары &lsquo;ключ=значение&rsquo;, где ключом выступает название атрибута. Во втором примере используется сокращение, позволяющее указывать вторым параметром просто имя, которое будет храниться в списке во втором поле. Это должна быть строка. Третья разновидность, полезная для описания актёров, во втором и третьем полях списка хранит координаты смещения по сетке. Конечно, в этом описании нельзя использовать ещё и сокращение, позволяющее указать вторым параметром просто имя.
</p>
<p>Такие табличные описания объектов всегда полезны для быстрого описания отдельного объекта. Но в секциях довольно часто помимо покрытия используются предмет или камень. Поэтому требуется тип данных Enigma, который может работать с несколькими описаниями. Таким типом данных является &lsquo;<samp>секция</samp>&rsquo; (&lsquo;<a href="#Tiles-Repository">tile</a>&rsquo;). Она может принимать как описание одного объекта, так и произвольный список описаний. Табличное описание объекта можно преобразовать в секцию посредством хранилища секций (см. раздел <a href="#Tiles-Repository">Хранилище секций</a>). После того, как будет получена секция, её можно объединять с другими секциями или табличными описаниями объектов, чтобы получить новые секции.
</p>
<p>Enigma гарантирует, что объекты появятся в мире в порядке описаний в секции.
</p>
<a name="index-fl_005fnil"></a> <a name="index-it_005fnil"></a> <a name="index-st_005fnil"></a> <a name="index-nil"></a>
<p>Хотя в большинстве случаев для создания объектов используются объявления объектов и секции, в некоторых сложных случаях может потребоваться использование такого типа данных, когда не требуется ничего добавлять на уровень или даже требуется уничтожить объект, который может существовать на секции. В таких случаях можно использовать наименования псевдотипов объектов &mdash; <code>&quot;fl_nil&quot;</code>, <code>&quot;it_nil&quot;</code>, <code>&quot;st_nil&quot;</code> или <code>&quot;nil&quot;</code>. В то время как первые три псевдотипа уничтожат имеющиеся в соответствующем слое объекты, последний псевдотип ничего не будет делать. Использование данного типа аналогично использованию в качестве объявления объекта пустой таблицы Lua, но более выразительно:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example"><i>ti</i>[&quot;<var>D</var>&quot;] = <i>cond</i>(<i>wo</i>[&quot;<b>IsDifficult&quot;</b>], {&quot;<b>st_death</b>&quot;}, {&quot;<b>nil</b>&quot;})
<i>ti</i>[&quot;<var>S</var>&quot;] = {&quot;<b>st_surprise</b>&quot;, <b>selection</b>={&quot;<b>st_box</b>&quot;, &quot;<b>st_nil</b>&quot;}}
function <var>customresolver</var>(<var>key</var>, <var>x</var>, <var>y</var>)
    if <var>key</var> == &quot;<var>a</var>&quot; then
        return {&quot;<b>nil</b>&quot;}
    elseif <var>key</var> == &quot;<var>b</var>&quot; then
        return {}
    else
        return <i>ti</i>[<var>key</var>]
    end
end
</pre></td></tr></table>

<p>В первом примере псевдотип используется в качестве допустимого третьего аргумента функции <a href="#cond">cond</a>, что позволяет избежать ошибок синтаксиса при передаче миру в лёгком режиме.
</p>
<p>Во втором примере псевдотип используется, чтобы уничтожить объект <a href="#st_005fsurprise">st_surprise</a> без создания камня-замены.
</p>
<p>Последний пример представляет собой <a href="#Custom-Resolver">настраиваемое преобразование</a>, в котором предложен способ избежать изменения данного кода карты мира. Обычно задаётся как минимум объект покрытия. Но если карта рисуется во время выполнения, то необходимость в установке начальных покрытий отсутствует. В случаях, когда этого нельзя добиться допустимым использованием кодов по умолчанию, идеальным вариантом является псевдотип <code>&quot;nil&quot;</code>.
</p>
<p>Примеры работы можно увидеть в разделе <a href="#Tiles-and-World-Tasks">Работа с секциями и миром</a>.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Tile-concat">5.11.1 Объединение секций</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">     Получение новой секции с помощью объединения двух других
</td></tr>
</table>


<hr size="6">
<a name="Tile-concat"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Tile-and-Object-Declaration" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Tiles-Repository" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Tile-and-Object-Declaration" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Tile-concat-1"></a>
<h3 class="subsection">5.11.1 Объединение секций</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = <i>tile</i> .. &lt;<i>tile</i> | <i>odecl</i>&gt;
</p>
<p>result = &lt;<i>tile</i> | <i>odecl</i>&gt; .. <i>tile</i>
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Из двух секций или секции и списка описания объекта путём их объединения собирает новую. В цепочке объединений описаний секций и объектов один из первых двух параметров должен быть секцией, поскольку два списка Lua не в состоянии объединиться.
</p>
<p>Следует отметить, что оператор &lsquo;<samp>..</samp>&rsquo; выполняется в Lua справа налево! Поэтому нужно правильно располагать скобки или быть уверенным, что хотя бы одна из двух крайних справа меток &mdash; секция.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>newtile</var> = <i>ti</i>{&quot;<b>st_chess</b>&quot;} .. {&quot;<b>fl_sahara</b>&quot;}
<var>newtile</var> = <i>ti</i>{&quot;<b>st_chess</b>&quot;} .. {&quot;<b>fl_sahara</b>&quot;} .. {&quot;<b>it_cherry</b>&quot;}   &mdash; ошибка Lua из-за выполнения справа налево
<var>newtile</var> = (<i>ti</i>{&quot;<b>st_chess</b>&quot;} .. {&quot;<b>fl_sahara</b>&quot;}) .. {&quot;<b>it_cherry</b>&quot;} &mdash; явное указание порядка выполнения
<var>newtile</var> = <i>ti</i>{&quot;<b>st_chess</b>&quot;} .. {&quot;<b>fl_sahara</b>&quot;} .. <i>ti</i>{&quot;<b>it_cherry</b>&quot;} &mdash; одно из двух значимых описаний преобразовано к типу секции
</pre></td></tr></table>

</dd>
</dl>



<hr size="6">
<a name="Tiles-Repository"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Tile-concat" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Tiles-Storage" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Tiles-Repository-1"></a>
<h2 class="section">5.12 Хранилище секций</h2>

<p>Тип данных &lsquo;секция&rsquo; используется только в одном случае &mdash; единым хранилищем описаний секций и объектов (см. раздел <a href="#Tile-and-Object-Declaration">Описание секций и объектов</a>). Кроме работы с секциями он предоставляет полезные преобразования основанных на списках описаний объектов к секциям.
</p>
<p>Поскольку хранилище секций едино, то нельзя создать его новый экземпляр. Хранилище становится доступным при загрузке уровня, а его элементы хранятся в глобальной переменной &lsquo;<samp>ti</samp>&rsquo;.
</p>
<p>В хранилище секции хранятся по заданной кодовой строке. Кодовые строки могут быть любого размера. Из-за ограничений Lua они должны состоять только из печатных 7-битных символов кодовой таблицы ASCII.
</p>
<p>Каждому коду можно назначить секцию только один раз. Повторное назначение приведёт к ошибке. С одной стороны это позволяет оптимизировать внутреннюю реализацию, а с другой стороны попытка переназначить уже назначенный код &mdash; самая распространённая ошибка при написании уровня, о которой необходимо сообщить автору.
</p>
<p>Примеры работы можно увидеть в разделе <a href="#Tiles-and-World-Tasks">Работа с секциями и миром</a>.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Tiles-Storage">5.12.1 Запись секций</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">     Присвоение секции связанному с ней коду
</td></tr>
<tr><td align="left" valign="top"><a href="#Tiles-Request">5.12.2 Запрос секции</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">     Получение секции по ключу
</td></tr>
<tr><td align="left" valign="top"><a href="#Tile-Conversion">5.12.3 Преобразование секции</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">   Преобразование описания объекта к секции
</td></tr>
</table>


<hr size="6">
<a name="Tiles-Storage"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Tiles-Repository" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Tiles-Request" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Tiles-Repository" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Tiles-Storage-1"></a>
<h3 class="subsection">5.12.1 Запись секций</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>ti[&quot;<i>key</i>&quot;] = &lt;<i>tile</i>|<i>odecl</i>&gt;
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Основанный на индексе доступ к хранилищу на запись, который позволяет назначить указанному ключу секцию или основанное на списке описание объекта, которое автоматически преобразуется к секции. Ключ должен представлять собой уникальную строку. Уникальную в том смысле, что ключу, которому уже была назначена другая секция, больше нельзя будет назначить новую секцию.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><i>ti</i>[&quot;<var>#</var>&quot;] = <var>tile</var>
<i>ti</i>[&quot;<var>$</var>&quot;] = {&quot;<b>st_chess</b>&quot;}
<i>ti</i>[&quot;<var>$</var>&quot;] = {&quot;<b>st_switch</b>&quot;}   &mdash; ошибка переназначения ключа
<i>ti</i>[&quot;<var>anykey</var>&quot;] = {&quot;<b>st_chess</b>&quot;}
</pre></td></tr></table>
</dd>
</dl>



<hr size="6">
<a name="Tiles-Request"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Tiles-Storage" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Tile-Conversion" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Tiles-Repository" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Tiles-Request-1"></a>
<h3 class="subsection">5.12.2 Запрос секции</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = ti[&quot;<i>key</i>&quot;]
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Запрос секции, которая была назначена указанному ключу. Если в ключе ещё не хранится секция, то будет возвращено значение Lua &lsquo;<samp>nil</samp>&rsquo;. Следует отметить, что хранилище секций, в отличие от хранилищ именованных объектов и позиций, не работает с шаблонами. Звёздочка &lsquo;<samp>*</samp>&rsquo; и знак вопроса &lsquo;<samp>?</samp>&rsquo; &mdash; такие же ключи, как и остальные символы.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>tile</var> = <i>ti</i>[&quot;<var>#</var>&quot;]
</pre></td></tr></table>
</dd>
</dl>


<hr size="6">
<a name="Tile-Conversion"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Tiles-Request" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#World" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Tiles-Repository" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Tile-Conversion-1"></a>
<h3 class="subsection">5.12.3 Преобразование секции</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = ti(<i>odecl</i>)
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Преобразовывает основанное на списке описание объекта к новому значению секции.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>tile</var> = <i>ti</i>({&quot;<b>st_chess</b>&quot;})
<var>tile</var> = <i>ti</i>{&quot;<b>st_chess</b>&quot;}   &mdash; эквивалент в синтаксисе Lua
</pre></td></tr></table>
</dd>
</dl>



<hr size="6">
<a name="World"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Tile-Conversion" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#World-Creation" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="World-1"></a>
<h2 class="section">5.13 Мир</h2>

<p>Тип данных &lsquo;мир&rsquo; существует только в одном экземпляре, это ещё один единый объект. После загрузки уровня ссылка на этот единый объект хранится в глобальной переменной Lua &lsquo;<samp>wo</samp>&rsquo;. Поскольку данный объект един, то нельзя создать его новый экземпляр.
</p>
<p>Однако хотя единый объект &lsquo;<samp>wo</samp>&rsquo; уже существует после загрузки уровня, мир всё ещё окончательно не определён. Уже в первой строке кода Lua можно использовать <a href="#Global-Attributes">Глобальные атрибуты</a>. Но мир фактически становится завершённым после создания мира (см. раздел <a href="#World-Creation">Создание мира</a>). После этого вызова у мира появляются вполне определённые размеры и он заполняется начальным набором объектов, с которыми, начиная с этого момента, уже можно работать.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#World-Creation">5.13.1 Создание мира</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        Наполнение мира объектами
</td></tr>
<tr><td align="left" valign="top"><a href="#World-Tile-Set">5.13.2 Установка секций мира</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        Оператор индексирования &lsquo;<samp>[]</samp>&rsquo; для записи
</td></tr>
<tr><td align="left" valign="top"><a href="#Global-Attribute-Set">5.13.3 Установка глобальных атрибутов</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">  Оператор индексирования &lsquo;<samp>[]</samp>&rsquo; для записи
</td></tr>
<tr><td align="left" valign="top"><a href="#Global-Attribute-Get">5.13.4 Чтение глобальных атрибутов</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">  Оператор индексирования &lsquo;<samp>[]</samp>&rsquo; для чтения
</td></tr>
<tr><td align="left" valign="top"><a href="#add">5.13.5 add</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                   Добавляет к миру или в инвентарь отдельные объекты
</td></tr>
<tr><td align="left" valign="top"><a href="#drawBorder">5.13.6 drawBorder</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Рисует прямоугольную границу мира, используя указанную секцию
</td></tr>
<tr><td align="left" valign="top"><a href="#drawMap">5.13.7 drawMap</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">               Располагает в мире объекты, заданные списком кодов секций
</td></tr>
<tr><td align="left" valign="top"><a href="#drawRect">5.13.8 drawRect</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">              Заполняет прямоугольную область указанной секцией
</td></tr>
<tr><td align="left" valign="top"><a href="#world-floor">5.13.9 world floor</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Получение поверхностей
</td></tr>
<tr><td align="left" valign="top"><a href="#world-item">5.13.10 world item</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Получение предметов
</td></tr>
<tr><td align="left" valign="top"><a href="#shuffleOxyd">5.13.11 shuffleOxyd</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Правила перемешивания оксидов
</td></tr>
<tr><td align="left" valign="top"><a href="#world-stone">5.13.12 world stone</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Получение камней
</td></tr>
</table>


<hr size="6">
<a name="World-Creation"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#World" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#World-Tile-Set" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#World" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="World-Creation-1"></a>
<h3 class="subsection">5.13.1 Создание мира</h3>

<p>Как только будут установлены все параметры и объявлены все секции, наступает время создать мир уровня со всеми его объектами. Это делается с помощью следующего конструктора, у которого есть две разновидности.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>width, height = <b>wo</b>(<i>topresolver</i>, <i>defaultkey</i>, <i>map</i>)
</p>
<p>width, height = <b>wo</b>(<i>topresolver</i>, <i>libmap</i>)
</p>
<p>width, height = <b>wo</b>(<i>topresolver</i>, <i>defaultkey</i>, <i>width</i>, <i>height</i>)
</p>
<dl compact="compact">
<dt> <i>topresolver</i> = <code>ti</code> | <i>resolver</i> | <i>localresolver</i></dt>
<dd><p>У любой секции есть код, который необходимо преобразовать к её описанию. Это можно сделать либо с помощью <a href="#Tiles-Repository">хранилища секций</a> &lsquo;<samp>ti</samp>&rsquo;, либо с помощью библиотеки <a href="#Resolvers">Преобразования</a> или используя функцию локального настраиваемого преобразования (см. раздел <a href="#Custom-Resolver">Настраиваемое преобразование</a>). Этот аргумент задаёт преобразование наивысшего уровня, которое будет вызываться раньше остальных.
</p></dd>
<dt> <i>defaultkey</i></dt>
<dd><p>Строка, которая определяет код, присваиваемый по умолчанию. Он используется, если не задан ни один код, и присваивается секции при отсутствии покрытия. Количество символов этого кода определяет размер кода на карте.
</p></dd>
<dt> <i>map</i></dt>
<dd><p>Список строк. Каждая строка описывает ряд секций, используя их коды. Если задана карта, размеры мира определяются по самой длинной строке и количеству этих строк.
</p></dd>
<dt> <i>libmap</i></dt>
<dd><p>Карта, полученная с помощью библиотеки <a href="#libmap">libmap</a>.
</p></dd>
<dt> <i>width</i></dt>
<dd><p>Полученный вместо карты, этот аргумент задаёт желаемую ширину мира.
</p></dd>
<dt> <i>height</i></dt>
<dd><p>Полученный вместо карты, этот аргумент задаёт желаемую высоту мира.
</p></dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">w, h = wo(ti, &quot;  &quot;, 20, 13)
w, h = wo(resolver, &quot; &quot;, {
       &quot;                    &quot;,
       ...
       &quot;                    &quot;})
w, h = wo(ti, mylibmap)
</pre></td></tr></table>

</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Этот конструктор мира может быть вызван лишь единожды. Каждый последующий вызов приводит к ошибке. Этот вызов устанавливает размеры мира согласно заданным значениям, которые можно узнать с помощью его двух возвращаемых значений. Также размер мира позже может быть получен через атрибуты мира <a href="#Width">Width</a> и <a href="#Height">Height</a>.
</p>
<p>Мир без карты заполняется секциями по умолчанию. Секциями по умолчанию также заполняются строки полученной карты, которые короче остальных. Каждой секции, для которой не задан объект покрытия, будет предоставлена секция покрытия по умолчанию.
</p>
<p>Каждый код преобразуется к описанию его секции после прохождения цепи преобразований. В качестве параметра этого вызова выступает преобразование высшего уровня. Если это &lsquo;<samp>ti</samp>&rsquo;, то цепь состоит только из одного элемента и берётся описание секции, хранящееся в хранилище секций в указанном ключе. В противном случае будут применяться преобразования, которые описаны в разделе <a href="#Resolver-Chaining">Цепь преобразования</a>.
</p>
</dd>
</dl>

<hr size="6">
<a name="World-Tile-Set"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#World-Creation" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Global-Attribute-Set" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#World" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="World-Tile-Set-1"></a>
<h3 class="subsection">5.13.2 Установка секций мира</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><b>wo</b>[&lt;<i>object</i> | <i>position</i> | <i>table</i> | <i>group</i> | <i>polist</i>&gt;] = <i>tile_declarations</i>
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Доступ для записи в индекс, который может быть интерпретирован как координата решётки или список координат решётки, позволяющий создать один или несколько новых объектов на заданных позициях в соответствии с сопутствующими объявлениями секций.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><i>wo</i>[<i>no</i>[&quot;<var>myobjectname</var>&quot;]] = {&quot;<b>st_chess</b>&quot;}
<i>wo</i>[<i>po</i>(<var>3</var>, <var>4</var>)] = <i>ti</i>[&quot;<var>x</var>&quot;]
<i>wo</i>[{<var>2</var>, <var>5</var>}] = <i>ti</i>[&quot;<var>x</var>&quot;] .. <i>ti</i>[&quot;<var>y</var>&quot;]
<i>wo</i>[<i>no</i>[&quot;<var>floorgroup#*</var>&quot;]] = {&quot;<b>it_burnable_oil</b>&quot;}
<i>wo</i>[<i>no</i>[&quot;<var>myobjectname</var>&quot;] + <b>NEIGHBORS_4</b>] = <i>ti</i>[&quot;<var>x</var>&quot;]
</pre></td></tr></table>
</dd>
</dl>


<hr size="6">
<a name="Global-Attribute-Set"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#World-Tile-Set" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Global-Attribute-Get" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#World" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Global-Attribute-Set-1"></a>
<h3 class="subsection">5.13.3 Установка глобальных атрибутов</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><b>wo</b>[&quot;attritbutename&quot;] = value
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Доступ для записи к строковым индексам, позволяющий изменить <a href="#Global-Attributes">глобальные атрибуты</a>. Изменить можно только существующие атрибуты, для которых предусмотрена возможность записи. Обратите внимание, что для получения необходимого эффекта некоторые атрибуты необходимо установить перед <a href="#World-Creation">созданием мира</a>.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><i>wo</i>[&quot;<b>ConserveLevel</b>&quot;] = true
</pre></td></tr></table>
</dd>
</dl>


<hr size="6">
<a name="Global-Attribute-Get"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Global-Attribute-Set" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#add" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#World" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Global-Attribute-Get-1"></a>
<h3 class="subsection">5.13.4 Чтение глобальных атрибутов</h3>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><var>var</var> = <b>wo</b>[&quot;attritbutename&quot;]
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Доступ для чтения к строковым индексам, позволяющий получить значения <a href="#Global-Attributes">глобальных атрибутов.</a> Прочесть можно только существующие атрибуты, для которых предусмотрена возможность чтения. Обратите внимания, что некоторые атрибуты возвращают правильные значения лишь сразу после <a href="#World-Creation">создания мира</a>.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>var</var> = <i>wo</i>[&quot;<b>IsDifficult</b>&quot;]
</pre></td></tr></table>
</dd>
</dl>


<hr size="6">
<a name="add"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Global-Attribute-Get" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#drawBorder" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#World" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="add-1"></a>
<h3 class="subsection">5.13.5 add</h3>

<p>Добавляет к миру <a href="#Other-Objects">Остальные объекты</a>, либо добавляет переносные объекты в инвентарь или другой объект-контейнер.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><b>wo:add</b>(<i>tile_declarations</i>)
</p>
<p><b>wo:add</b>(<i>target</i>, <i>tile_declarations</i>)
</p>
<dl compact="compact">
<dt> <i>tile_declarations</i></dt>
<dd><p>Одно или несколько описаний объектов, представленных в виде секций или анонимных списков.
</p></dd>
<dt> <i>target</i></dt>
<dd><p>&lsquo;<samp>YIN</samp>&rsquo;, &lsquo;<samp>YANG</samp>&rsquo; или допустимая <a href="#Object-Reference">Ссылка на объект</a>
</p></dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">wo:add({&quot;ot_rubberband&quot;, anchor1=&quot;a1&quot;, anchor2=&quot;w&quot;, length=2, strength=80, threshold=0})
wo:add(ti[&quot;r&quot;] .. {&quot;ot_wire&quot;, anchor1=&quot;w1&quot;, anchor2=&quot;w2&quot;})
wo:add(YIN, {&quot;it_magicwand&quot;})
wo:add(no[&quot;mybag&quot;], {&quot;it_magicwand&quot;} .. ti[&quot;h&quot;] .. ti[&quot;c&quot;])
</pre></td></tr></table>

</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Напрямую к миру могут быть добавлены только <a href="#Other-Objects">Остальные объекты</a>. В инвентарь игроков &lsquo;<samp>YIN</samp>&rsquo; и &lsquo;<samp>YANG</samp>&rsquo; и в сумки (<a href="#it_005fbag">it_bag</a>) могут быть добавлены только портативные <a href="#Item-Objects">Предметы</a>. Никакая другая цель, кроме перечисленных выше, на данный момент не добавляет объекты этим методом.
</p>
</dd>
</dl>

<hr size="6">
<a name="drawBorder"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#add" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#drawMap" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#World" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="drawBorder-1"></a>
<h3 class="subsection">5.13.6 drawBorder</h3>

<p>Рисует границу из заданных секций вокруг заданного прямоугольника.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><b>wo:drawBorder</b>(<i>upperleft_edge</i>, <i>lowerright_edge</i>, &lt;<i>tile</i> | <i>key</i>, <i>resolver</i>&gt;)
</p>
<p><b>wo:drawBorder</b>(<i>upperleft_edge</i>, <i>width</i>, <i>height</i>, &lt;<i>tile</i> | <i>key</i>, <i>resolver</i>&gt;)
</p>
<dl compact="compact">
<dt> <i>upperleft_edge</i></dt>
<dd><p>Координаты верхнего левого угла прямоугольника.
</p></dd>
<dt> <i>lowerright_edge</i></dt>
<dd><p>Координаты нижнего правого угла прямоугольника.
</p></dd>
<dt> <i>width</i></dt>
<dd><p>Ширина прямоугольника.
</p></dd>
<dt> <i>height</i></dt>
<dd><p>Высота прямоугольника.
</p></dd>
<dt> <i>tile</i></dt>
<dd><p>Секция или описание объекта.
</p></dd>
<dt> <i>key</i></dt>
<dd><p>Кодовая строка, которая должна быть преобразована указанным преобразованием.
</p></dd>
<dt> <i>resolver</i></dt>
<dd><p>Преобразование, которое должно использоваться для преобразования кода в подходящую секцию.
</p></dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">wo:drawBorder(po(0, 0), wo[&quot;Width&quot;], wo[&quot;Height&quot;], ti[&quot;#&quot;])
wo:drawBorder(no[&quot;myRectUL&quot;], no[&quot;myRectLR&quot;], {&quot;st_grate1&quot;})
wo:drawBorder(no[&quot;myRectUL&quot;], no[&quot;myRectLR&quot;], {&quot;fl_water&quot;} .. ti[&quot;X&quot;])
wo:drawBorder(no[&quot;myRectUL&quot;], no[&quot;myRectLR&quot;], &quot;x&quot;, myresolver)
</pre></td></tr></table>

</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Рисует четыре линии толщиной в одну секцию с использованием заданной секции. Это значит, что в каждой ячейке прямоугольника создаётся по одному экземпляру каждого объекта из описания секции. В вырожденном случае прямоугольник может превратиться в линию.
</p>
</dd>
</dl>

<hr size="6">
<a name="drawMap"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#drawBorder" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#drawRect" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#World" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="drawMap-1"></a>
<h3 class="subsection">5.13.7 drawMap</h3>

<p>Даже если мир инициализирован картой при создании мира (см. раздел <a href="#World-Creation">Создание мира</a>), иногда удобно иметь возможность рисовать карты внутри существующей либо во время инициализации, либо внося динамические изменения уровня с помощью функции обратного вызова (см. раздел <a href="#Callback-Function">Функция обратного вызова</a>). Безусловно, основное назначение &lsquo;<samp>drawMap</samp>&rsquo; &mdash; рисование повторяющихся шаблонов.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd>
<p><b>wo:drawMap</b>(<i>resolver</i>, <i>anchor</i>, <i>ignore</i>, <i>map</i>, [<i>readdir</i>])
</p>
<p><b>wo:drawMap</b>(<i>resolver</i>, <i>anchor</i>, <i>libmap-map</i>, [<i>readdir</i>])
</p>
<dl compact="compact">
<dt> <i>subresolver</i></dt>
<dd><p>Преобразование, которому должны быть перенаправлены необработанные запросы. В качестве последнего преобразования цепи преобразований может выступать &lsquo;<samp>ti</samp>&rsquo;.
</p></dd>
<dt> <i>anchor</i></dt>
<dd><p>Позиция точки привязки, где должна располагаться верхняя левая секция карты.
</p></dd>
<dt> <i>ignore</i></dt>
<dd><p>Кодовая строка секции, которая должна быть проигнорирована. Эта кодовая строка обязательна, даже если она не используется на карте.
</p></dd>
<dt> <i>map</i></dt>
<dd><p>Список строк. Каждая строка описывает ряд секций, используя их коды.
</p></dd>
<dt> <i>libmap-map</i></dt>
<dd><p>Если используемая карта была создана с помощью <a href="#libmap">libmap</a>, строку &lsquo;<samp>ignore</samp>&rsquo; можно опустить. Тогда вместо неё будет игнорироваться код по умолчанию.
</p></dd>
<dt> <i>readdir</i></dt>
<dd><p>Необязательный аргумент, который изменяет направление карты по отношению к миру. Значением этого аргумента может быть любая из констант, описанных в разделе <a href="#Rotating-and-Mirroring-Maps">Вращение и отражение карт</a>.
</p></dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">wo:drawMap(ti, po(5, 7), &quot;-&quot;, {&quot;abcabc&quot;})
wo:drawMap(ti, anchor_object, &quot;--&quot;, {&quot;--##--##&quot;,&quot;##--##&quot;})
wo:drawMap(ti, {12, 5}, &quot; &quot;, {&quot;122  221&quot;}, MAP_ROT_CW)
</pre></td></tr></table>

</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Синтаксис похож на вызов создания мира. Но есть два важных отличия, о которых следует знать. Во-первых, карта рисуется в уже существующем мире. Поэтому нам нужно задать позицию. Это делается с помощью позиции точки привязки, которая может соответствовать и уже существующему объекту.
</p>
<p>Во-вторых &mdash; задание кодовых строк игнорируемых секций карты. Вспомните, инициализация мира запрашивала кодовую строку секции по умолчанию. Она всё ещё действует. Но, благодаря полученной кодовой строке игнорируемых секций, мы можем рисовать шаблоны произвольной формы, заполняя этой кодовой строкой неиспользуемые участки карты.
</p>
<p>Длина игнорируемого кода задаёт длину кода карты. Настоятельно рекомендуется использовать ту же длину кода, что и на карте мира.
</p>
<p>Ряды поддерживаемой карты рисуются, начиная с точки привязки. У рядов может быть различная длина и они могут начинаться с кодов игнорируемых секций. Точкой привязки должна быть точка с наименьшими координатами x и y в шаблоне.
</p>
<p>После создания мира drawMap можно использовать где угодно. Допускается даже её использование в преобразовании при создании мира.
</p>
</dd>
<dt> <b>Готовый пример:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">01    <i>ti</i>[&quot;<var> </var>&quot;] = {&quot;<b>fl_plank</b>&quot;}
02    <i>ti</i>[&quot;<var>X</var>&quot;] = {&quot;<b>st_oxyd</b>&quot;}
03    <i>ti</i>[&quot;<var>B</var>&quot;] = {&quot;<b>st_passage_black</b>&quot;, <b>flavor</b>=&quot;<var>frame</var>&quot;}
04    <i>ti</i>[&quot;<var>W</var>&quot;] = {&quot;<b>st_passage_white</b>&quot;, <b>flavor</b>=&quot;<var>frame</var>&quot;}
05    <i>ti</i>[&quot;<var>y</var>&quot;] = {&quot;<b>it_yinyang</b>&quot;}
06    <i>ti</i>[&quot;<var>1</var>&quot;] = {&quot;<b>#ac_marble_black</b>&quot;}
07    <i>ti</i>[&quot;<var>2</var>&quot;] = {&quot;<b>#ac_marble_white</b>&quot;}
08
09    function <var>myresolver</var>(<var>key</var>, <var>x</var>, <var>y</var>)
10        if <var>key</var> == &quot;<b>w</b>&quot; then
11            <i>wo</i>:<b>drawMap</b>(ti, po(x-1, y-1), &quot;-&quot;, {&quot;-W-&quot;,
12                                               &quot;WXW&quot;,
13                                               &quot;-W-&quot;})
14            return <i>ti</i>({})
15        elseif <var>key</var> == &quot;<b>b</b>&quot; then
16            <i>wo</i>:<b>drawMap</b>(ti, po(x-1, y-1), &quot;-&quot;, {&quot;-B&quot;,
17                                               &quot;BXB&quot;,
18                                               &quot;-B&quot;})
19            return <i>ti</i>({})
20        else
21            return <i>ti</i>[<var>key</var>]
22        end
23    end
24
25    w, h = <i>wo</i>(<i>myresolver</i>, &quot;<var> </var>&quot;, {
26      &quot;                    &quot;,
27      &quot;  b         b       &quot;,
28      &quot;       w       w    &quot;,
29      &quot;                    &quot;,
30      &quot;                    &quot;,
31      &quot;   w                &quot;,
32      &quot;         12      b  &quot;,
33      &quot;              w     &quot;,
34      &quot;         w          &quot;,
35      &quot;      b             &quot;,
36      &quot;   w           b    &quot;,
37      &quot;         b          &quot;,
38      &quot;                    &quot;
39    })
40    <i>wo</i>:<b>shuffleOxyd</b>()
</pre></td></tr></table>
</dd>
</dl>

<hr size="6">
<a name="drawRect"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#drawMap" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#world-floor" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#World" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="drawRect-1"></a>
<h3 class="subsection">5.13.8 drawRect</h3>

<p>Заполняет прямоугольник указанной секцией.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><b>wo:drawRect</b>(<i>upperleft_edge</i>, <i>lowerright_edge</i>, &lt;<i>tile</i> | <i>key</i>, <i>resolver</i>&gt;)
</p>
<p><b>wo:drawRect</b>(<i>upperleft_edge</i>, <i>width</i>, <i>height</i>, &lt;<i>tile</i> | <i>key</i>, <i>resolver</i>&gt;)
</p>
<dl compact="compact">
<dt> <i>upperleft_edge</i></dt>
<dd><p>Координаты верхнего левого угла прямоугольника.
</p></dd>
<dt> <i>lowerright_edge</i></dt>
<dd><p>Координаты нижнего правого угла прямоугольника.
</p></dd>
<dt> <i>width</i></dt>
<dd><p>Ширина прямоугольника.
</p></dd>
<dt> <i>height</i></dt>
<dd><p>Высота прямоугольника.
</p></dd>
<dt> <i>tile</i></dt>
<dd><p>Секция или описание объекта.
</p></dd>
<dt> <i>key</i></dt>
<dd><p>Кодовая строка, которая должна быть преобразована указанным преобразованием.
</p></dd>
<dt> <i>resolver</i></dt>
<dd><p>Преобразование, которое должно использоваться для преобразования кода в подходящую секцию.
</p></dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">wo:drawRect(po(0, 0), wo[&quot;Width&quot;], wo[&quot;Height&quot;], ti[&quot; &quot;])
wo:drawRect(no[&quot;myRectUL&quot;], no[&quot;myRectLR&quot;], {&quot;fl_water&quot;})
wo:drawRect(no[&quot;myRectUL&quot;], no[&quot;myRectLR&quot;], {&quot;fl_water&quot;} .. ti[&quot;#&quot;])
wo:drawRect(no[&quot;myRectUL&quot;], no[&quot;myRectLR&quot;], &quot;x&quot;, myresolver)
</pre></td></tr></table>

</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Замкнутый прямоугольник заполняется указанной секцией. Это значит, что в каждой точке прямоугольника, в том числе и внутри контура, помещается каждый объект указанной секции. В вырожденном случае прямоугольник может превратиться в линию.
</p>
</dd>
</dl>

<hr size="6">
<a name="world-floor"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#drawRect" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#world-item" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#World" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="world-floor-1"></a>
<h3 class="subsection">5.13.9 world floor</h3>

<p>Возвращает покрытия в указанной позиции или позициях.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = <b>wo</b>:<b>fl</b>(&lt;<i>pos</i>| {<i>x</i>, <i>y</i>}|<i>x</i>, <i>y</i>| <i>obj</i> | <i>group</i>| <i>polist</i>&gt;)
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Этот метод мира идентичен глобальной функции <a href="#fl">fl</a>.
</p>
</dd>
</dl>

<hr size="6">
<a name="world-item"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#world-floor" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#shuffleOxyd" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#World" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="world-item-1"></a>
<h3 class="subsection">5.13.10 world item</h3>

<p>Возвращает предметы в указанной позиции или позициях.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = <b>wo</b>:<b>it</b>(&lt;<i>pos</i>| {<i>x</i>, <i>y</i>}|<i>x</i>, <i>y</i>| <i>obj</i> | <i>group</i>| <i>polist</i>&gt;)
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Этот метод мира идентичен глобальной функции <a href="#it">it</a>.
</p>
</dd>
</dl>

<hr size="6">
<a name="shuffleOxyd"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#world-item" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#world-stone" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#World" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="shuffleOxyd-1"></a>
<h3 class="subsection">5.13.11 shuffleOxyd</h3>

<p>Изменение распределения цветов оксидов (<a href="#st_005foxyd">st_oxyd</a>) делает каждый уровень, кроме, естественно, уровней для медитации, немного более непредсказуемым. При каждом начале уровня он выглядит немного по-разному и пользователю приходится решать изменившийся уровень. Это продлевает время, в течение которого уровень доставляет развлечение игроку. Поэтому вызов этого метода можно найти в большинстве уровней.
</p>
<p>Многие уровни просто вызывают этот метод, не передавая ему аргументов. Это приводит к перераспределению цветов всех оксидов (<a href="#st_005foxyd">st_oxyd</a>), которые не исключены атрибутом &lsquo;<samp>noshuffle</samp>&rsquo;.
</p>
<p>Но иногда уровням нужно контролировать перераспределение, то ли для того, чтобы гарантировать решаемость уровня, то ли чтобы просто убедиться в справедливом распределении оксидов. Представьте уровень, в котором в каждом углу находятся по два камня <a href="#st_005foxyd">st_oxyd</a>. Если игроку повезёт и он добьётся распределения, при котором в каждом углу будет по два оксида одинакового цвета, решение уровня становится банальным. В другом уровне может быть проход, через который шарик может пройти лишь несколько раз. При 5 и более оксидах с каждой стороны прохода вам нужно быть уверенным в том, что шарику не потребуется пересекать проход больше раз, чем возможно. Обе ситуации можно проконтролировать, используя в качестве аргументов к этому методу подходящие правила.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd>
<p><b>wo:shuffleOxyd</b>(<i>rules</i>)
</p>
<dl compact="compact">
<dt> <i>rules</i> = <i>rule</i>, <i>rule</i>,...</dt>
<dd><p>Либо ни одного правила, либо столько, сколько пожелаете, разделённых запятыми.
</p></dd>
<dt> <i>rule</i> = {<i>group1</i>, <i>group2</i>, <i>maxrule</i>, <i>minrule</i>, <i>circularrule</i>, <i>linearrule</i>, <i>log</i>}</dt>
<dd><p>Каждое правило &mdash; список с подмножеством перечисленных элементов. Элемент <i>group1 </i>обязателен. Все остальные необязательны и могут добавляться в любых сочетаниях.
</p></dd>
<dt> <i>group1</i> = <i>group</i> | <i>objectreference</i> | <i>objectspecifier</i></dt>
<dd><p>Описание объектов-оксидов, которые входят в первую группу. Допустимыми дескрипторами считаются: либо группа, либо отдельная ссылка на объект, либо строковый спецификатор, преобразующий к одному или, с помощью маски, к нескольким объектам-оксидам.
</p></dd>
<dt> <i>group2</i> = <i>group</i> | <i>objectreference</i> | <i>objectspecifier</i></dt>
<dd><p>Описание объектов-оксидов, которые входят во вторую группу. Допустимыми дескрипторами считаются: либо группа, либо отдельная ссылка на объект, либо строковый спецификатор, преобразующий к одному или, с помощью маски, к нескольким объектам-оксидам.
</p></dd>
<dt> <i>maxrule</i> = <code>max = </code><i>number</i></dt>
<dd><p>Максимальное количество пар оксидов.
</p></dd>
<dt> <i>minrule</i> = <code>min = </code><i>number</i></dt>
<dd><p>Минимальное количество пар оксидов.
</p></dd>
<dt> <i>circularrule</i> = <code>circular = true</code></dt>
<dd><p>Избегать появление любых пар смежных оксидов из &lsquo;group1&rsquo;. Также избегать появления пары, состоящей из первого и последнего оксидов из &lsquo;group1&rsquo;.
</p></dd>
<dt> <i>linearrule</i> = <code>linear = true</code></dt>
<dd><p>Избегать появление любых пар смежных оксидов из &lsquo;group1&rsquo;.
</p></dd>
<dt> <i>log</i> = <code>log = </code> &nbsp;&nbsp; <code>&quot;solution&quot;</code> |<code>&quot;count&quot;</code> |<code>&quot;all&quot;</code></dt>
<dd><p>В целях отладки и проверки безопасности автором уровня записывать в поток журналирования дополнительную информацию.
</p></dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">wo:shuffleOxyd()
wo:shuffleOxyd({no[&quot;borderoxyds#*&quot;]:sort(&quot;circular&quot;), circular=true})
wo:shuffleOxyd({&quot;leftoxyds#*&quot;,&quot;rightoxyds#*&quot;, min=3}, {&quot;islandoxyds#*&quot;, max=0})
</pre></td></tr></table>

</dd>
<dt> <b>Подробности:</b></dt>
<dd>
<p>Любой вызов &lsquo;<samp>wo:shuffleOxyd()</samp>&rsquo; должен происходить после того, как все оксиды (<a href="#st_005foxyd">st_oxyd</a>) будут расположены на карте. Это значит, что он должен следовать за стандартной процедурой инициализации мира (см. раздел <a href="#World-Creation">Создание мира</a>). Побочным эффектом &lsquo;shuffleOxyd&rsquo; является присвоение цветов всем <a href="#st_005foxyd">st_oxyd</a>, цвет которых определяется атрибутом &lsquo;<samp>OXYD_AUTO</samp>&rsquo;.
</p>
<p>После первого вызова заданных правил перераспределения ими можно будет воспользоваться в любой момент. Любое последующее перераспределение нужно вызывать сообщениями &lsquo;<samp>closeall</samp>&rsquo; и &lsquo;<samp>shuffle</samp>&rsquo; для одного из экземпляров <a href="#st_005foxyd">st_oxyd</a>. Без уничтожения и удаления заданных правил не возможен никакой дополнительный вызов <a href="#st_005foxyd">st_oxyd</a> или последующего &lsquo;<samp>wo:shuffleOxyd()</samp>&rsquo;.
</p>
<p>Перераспределение по правилам ограничено максимум одной парой каждого оксида стандартного цвета и любой комбинацией вспомогательных специальных оксидов-обманок, выхлопных и наглых оксидов, что в сумме дает максимум 32 оксида. Если задано больше 32 оксидов или 2 и более пары оксидов одного стандартного цвета, все оксиды будут перераспределены случайным образом, игнорируя любые установленные правила.
</p>
<p>Существует два основных типа правил. Те, которые работают с одной группой, и те, которые работают с двумя группами оксидов (заметим, что группа &mdash; это определение из общего API для набора оксидов, а не математическая группа). При одной группе правила применяются к экземплярам оксидов в этой группе. При двух группах правила применяются к парам оксидов, которые состоят из камней, принадлежащих к разным группам.
</p>
<p>Например, &lsquo;<samp>{&quot;islandoxyds#*&quot;, max=0}</samp>&rsquo; значит, что в этой группе оксидов нет ни одной пары. Тогда как &lsquo;<samp>{&quot;leftoxyds#*&quot;,&quot;rightoxyds#*&quot;, min=3}</samp>&rsquo; значит, что существует 3 различных пары оксидов, каждая с одним оксидом в группе &lsquo;leftoxyds&rsquo; и вторым в группе &lsquo;rightoxyds&rsquo;.
</p>
<p>Линейные и круговые правила можно применять только к одной группе. Они представляют собой ссылки на более общие правила, которые применяются к оксидам, расположенным в линии или по кругу. В обоих случаях они не допускают появления рядом пары одинаковых оксидов. Они эквивалентны &lsquo;<samp>n-1</samp>&rsquo; перезапускам, &lsquo;<samp>n</samp>&rsquo; правилам со всевозможными соседними парами оксидов двух групп и правилу о &lsquo;<samp>max=0</samp>&rsquo;.
</p>
<p>Заметьте, что к заданным группам можно применить сразу несколько правил. Например, применить одним правилом и &lsquo;minrule&rsquo;, и &lsquo;maxrule&rsquo;!
</p>
<p>Процесс перераспределения всегда состоит из двух этапов. Самый важный &mdash; первый &mdash; этап генерирует правильное распределение пар оксидов. Это значит, что мы определяем, какие пары должны быть одинакового цвета. Но сами цвета присваиваются на отдельном &mdash; втором &mdash; этапе. Что касается проверки заданных правил, то важным является только распределение пар, мы просто ведём учёт этих различных распределений, игнорируя сами цвета.
</p>
<p>При 16 оксидах 8 различных цветов и без ограничивающих правил выходит 2027025 (15 * 13 * 11 * 9 * 7 * 5 * 3) различных допустимых распределений. Имейте в виду, что у этих полезных правил для каждого уровня всегда должны быть сотни или тысячи различных допустимых распределений.
</p>
<p>Для удобства отладки существует возможность добавить к одному из правил параметр ведения журнала (не имеет значения к какому). По запросу в поток журналирования будет выведен журнал &lsquo;<samp>solution</samp>&rsquo; (определения) распределения пар.
</p>
<p>Во время &lsquo;<samp>count</samp>&rsquo; (подсчёта) будет подсчитано и занесено в журнал число различных распределений оксидов. При использовании сложных правил рекомендуется проверять количество распределений, чтобы убедиться, что осталось достаточно распределений для сохранения вариативности игры. Но будьте осторожны с попытками подсчитать количество распределений по простым правилам. При 16 оксидах может существовать 2027025 распределений, на определение которых у обычного ПК уйдет до 30 секунд &mdash; для того, чтобы узнать количество распределений для 20 оксидов, домножьте это число ещё на 17*19!
</p>
<p>Будьте осторожны при журналировании &lsquo;<samp>all</samp>&rsquo; (всех событий). Этот вызов пытается вывести все решения. При достаточно большом числе распределений их подсчёт может длиться веками. Перед тем, как заносить в журнал события, подсчитайте их.
</p>
</dd>
<dt> <b>Готовый пример:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">01    <i>wo</i>[&quot;<b>ConserveLevel</b>&quot;] = <var>false</var>
02
03    <i>ti</i>[&quot;<var>~</var>&quot;] = {&quot;<b>fl_water</b>&quot;}
04    <i>ti</i>[&quot;<var> </var>&quot;] = {&quot;<b>fl_plank</b>&quot;}
05    <i>ti</i>[&quot;<var>c</var>&quot;] = {&quot;<b>it_crack_l</b>&quot;, <b>brittleness</b>=<var>0</var>}
06    <i>ti</i>[&quot;<var>^</var>&quot;] = {&quot;<b>st_oneway_n</b>&quot;}
07    <i>ti</i>[&quot;<var>1</var>&quot;] = {&quot;<b>ac_marble_black</b>&quot;, 0, 0.5}
08
09    <i>ti</i>[&quot;<var>x</var>&quot;] = {&quot;<b>st_oxyd</b>&quot;, &quot;island#&quot;}
10    <i>ti</i>[&quot;<var>y</var>&quot;] = {&quot;<b>st_oxyd</b>&quot;, &quot;left#&quot;}
11    <i>ti</i>[&quot;<var>z</var>&quot;] = {&quot;<b>st_oxyd</b>&quot;, &quot;right#&quot;}
12
13    w, h = <i>wo</i>(<i>ti</i>, &quot;<var> </var>&quot;, {
14      &quot;<var>~~x  x  x  x  x  x~~</var>&quot;,
15      &quot;<var>~~                ~~</var>&quot;,
16      &quot;<var>~~~~^~~~~~~~~~~^~~~~</var>&quot;,
17      &quot;<var>y       ~~~~       z</var>&quot;,
18      &quot;<var>~       cccc       ~</var>&quot;,
19      &quot;<var>y       ~~~~       z</var>&quot;,
20      &quot;<var>~       cccc       ~</var>&quot;,
21      &quot;<var>y       ~~~~       z</var>&quot;,
22      &quot;<var>~       cccc       ~</var>&quot;,
23      &quot;<var>y       ~~~~       z</var>&quot;,
24      &quot;<var>~~~~c~~~~~~~~~~c~~~~</var>&quot;,
25      &quot;<var>~~                ~~</var>&quot;,
26      &quot;<var>~~        1       ~~</var>&quot;
27    })
28
29    <i>wo</i>:<b>shuffleOxyd</b>({&quot;<b>island#*</b>&quot;, <b>min</b>=<var>3</var>, <b>linear</b>=<var>true</var>}, {&quot;<b>left#*</b>&quot;,&quot;<b>right#*</b>&quot;, <b>max</b>=<var>2</var>, <b>min</b>=<var>2</var>})
</pre></td></tr></table>

<p>В этом уровне 14 оксидов. 6 оксидов в верхнем ряду находятся на острове, который уже нельзя покинуть после того, как шарик ступит на него из одного из односторонних проходов. Поэтому, на этом острове нам нужны 3 пары оксидов. Их можно получить, применив правило минимума. Также, чтобы избежать появления на острове соседних пар оксидов, мы добавляем линейное правило. Между левым и правым островами шарик может пройти только трижды. Это позволяет при первом проходе сначала узнать цвета оксидов, а за два следующих прохода открыть по паре оксидов. Поэтому правилом максимума мы ограничиваем число пар до 2. Во избежание ситуации, когда с левой и правой стороны появится по две пары оксидов, мы добавляем правило минимума, которое заставляет появляться две разнесённые в пространстве пары оксидов.
</p></dd>
</dl>

<hr size="6">
<a name="world-stone"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#shuffleOxyd" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Functions" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#World" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="world-stone-1"></a>
<h3 class="subsection">5.13.12 world stone</h3>

<p>Возвращает камни с указанной позиции или позиций.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = <b>wo</b>:<b>st</b>(&lt;<i>pos</i>| {<i>x</i>, <i>y</i>}|<i>x</i>, <i>y</i>| <i>obj</i> | <i>group</i>| <i>polist</i>&gt;)
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Этот метод мира идентичен глобальной функции <a href="#st">st</a>.
</p>
</dd>
</dl>



<hr size="6">
<a name="Functions"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#world-stone" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#assert_005fbool" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Functions-1"></a>
<h2 class="section">5.14 Функции</h2>

<p>Помимо всех возможностей, зависящих непосредственно от контекста, представляющего собой значения, и реализованных в виде операторов и методов определённых типов данных, существует и немало других. Они не зависят от контекста или хотя бы в одной разновидности принимают в качестве входных параметров только стандартные контекстнонезависимые типы данных Lua. Поэтому такие задачи реализуются в виде простых функций.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#assert_005fbool">5.14.1 assert_bool</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">     Если условие не выполняется, то выдаётся ошибка.
</td></tr>
<tr><td align="left" valign="top"><a href="#assert_005ftype">5.14.2 assert_type</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">     Если переменная не принадлежит указанному типу, то выдаётся ошибка.
</td></tr>
<tr><td align="left" valign="top"><a href="#cond">5.14.3 cond</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Тернарный оператор, обёртка для if-then-else.
</td></tr>
<tr><td align="left" valign="top"><a href="#etype">5.14.4 etype</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Расширенная функция, возвращающая обычные и пользовательские типы данных.
</td></tr>
<tr><td align="left" valign="top"><a href="#fl">5.14.5 fl</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">              Получение поверхности
</td></tr>
<tr><td align="left" valign="top"><a href="#grp">5.14.6 grp</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">             Создание группы из объектов-параметров
</td></tr>
<tr><td align="left" valign="top"><a href="#it">5.14.7 it</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">              Получение предмета
</td></tr>
<tr><td align="left" valign="top"><a href="#ORI2DIR">5.14.8 ORI2DIR</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         Преобразование положения к направлению
</td></tr>
<tr><td align="left" valign="top"><a href="#random">5.14.9 random</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Генератор случайных чисел
</td></tr>
<tr><td align="left" valign="top"><a href="#st">5.14.10 st</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">              Получение камня
</td></tr>
<tr><td align="left" valign="top"><a href="#usertype">5.14.11 usertype</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        Информация о пользовательских типах данных Enigma
</td></tr>
</table>


<hr size="6">
<a name="assert_005fbool"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Functions" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#assert_005ftype" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Functions" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="assert_005fbool-1"></a>
<h3 class="subsection">5.14.1 assert_bool</h3>
<a name="index-assert_005fbool"></a>

<p>Если условие не выполняется, то функция &lsquo;<samp>assert_bool</samp>&rsquo; выдаёт ошибку.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><b>assert_bool</b>(<i>condition</i>, <i>message</i>, <i>level</i>)
</p>
<dl compact="compact">
<dt> <i>condition</i></dt>
<dd><p>Булево (или приводимое к нему) выражение. Если его значение <code>false</code> или <code>nil</code>, то выдаётся ошибка.
</p>
</dd>
<dt> <i>message</i></dt>
<dd><p>Строка с сообщением об ошибке. Если <code>message</code> пусто или представляет собой nil, то выдаётся &quot;анонимное утверждение&quot;, но зачастую лучше предоставлять осмысленное сообщение об ошибке.
</p>
</dd>
<dt> <i>level</i></dt>
<dd><p><code>level</code> указывает место обнаружения ошибки, так же как и функция Lua &lsquo;<samp>error</samp>&rsquo;. По умолчанию: 1.
</p></dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><i>assert_bool</i>(<i>no</i>[&quot;<var>mystone</var>&quot;]:<b>exists</b>(), &quot;<var>Stone 'mystone' has disappeared.</var>&quot;)
</pre></td></tr></table>

</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Утверждения помогают определить ошибки кодирования. Наиболее часто они используются для проверки параметров библиотечных функций и реализаций преобразований. Чтобы утверждения не приводили к падению производительности во время игры, они обычно проверяются для уровней, у которых для параметра &lsquo;<samp>status</samp>&rsquo; в элементе <a href="#g_t_003cversion_003e">&lt;version&gt;</a> XML-заголовка выставлены значения <code>&quot;test&quot;</code> или <code>&quot;experimental&quot;</code>.
</p>
<p>Обычные утверждения, как и комментарии Lua, пропускаются на этапе компиляции для уровней со статусами <code>&quot;stable&quot;</code> и <code>&quot;released&quot;</code>. Но, с помощью следующего шаблона присваивания и дополнительных скобок, утверждения можно выполнить принудительно:
</p><table><tr><td>&nbsp;</td><td><pre class="example"><var>dummy</var> = (<i>assert_bool</i>)(<i>no</i>[&quot;<var>mystone</var>&quot;]:<b>exists</b>(), &quot;<var>Stone 'mystone' has disappeared.</var>&quot;)
</pre></td></tr></table>

<p>Как и для <a href="#cond">cond</a>, для &lsquo;<samp>message</samp>&rsquo; и &lsquo;<samp>level</samp>&rsquo; справедливо появление побочных эффектов.
</p>
<p>Более подробную информацию о функции &lsquo;<samp>error</samp>&rsquo; можно найти в руководстве Lua.
</p>
</dd>
</dl>


<hr size="6">
<a name="assert_005ftype"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#assert_005fbool" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#cond" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Functions" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="assert_005ftype-1"></a>
<h3 class="subsection">5.14.2 assert_type</h3>
<a name="index-assert_005ftype"></a>

<p>Если тип первого параметра не совпадает ни с одним из указанных, то функция &lsquo;<samp>assert_type</samp>&rsquo; выдаёт ошибку.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><b>assert_type</b>(<i>var</i>, <i>vardescription</i>, <i>level</i>, <i>type1</i>, <i>type2</i>, ...)
</p>
<dl compact="compact">
<dt> <i>var</i></dt>
<dd><p>Переменная любого типа.
</p>
</dd>
<dt> <i>vardescription</i></dt>
<dd><p>Если тип &lsquo;<samp>var</samp>&rsquo; не совпадает с типами &lsquo;<samp>type1</samp>&rsquo;, &lsquo;<samp>type2</samp>&rsquo; ..., то выдаётся сообщение об ошибке, которое включает фактический тип переменной &lsquo;<samp>var</samp>&rsquo; и желаемые типы. &lsquo;<samp>vardescription</samp>&rsquo; &mdash; это строка с информацией, дополняющей сообщение об ошибке. Это должно быть довольно подробное описание переменной &lsquo;<samp>var</samp>&rsquo; (фактически полное название), состоящее из символов в нижнем регистре, дополнительная информация приводится в скобках.
</p>
</dd>
<dt> <i>level</i></dt>
<dd><p><code>level</code> указывает место обнаружения ошибки, так же как и функция Lua &lsquo;<samp>error</samp>&rsquo;. Указывается в обязательном порядке, если сомневаетесь, то выбирайте &lsquo;<samp>1</samp>&rsquo;.
</p>
</dd>
<dt> <i>type1</i>, <i>type2</i>, ...</dt>
<dd><p>Последовательность строк. Если тип &lsquo;<samp>var</samp>&rsquo; не совпадает с этими типами, то выдаётся сообщение об ошибке. Описание дескрипторов типа приведено в Подробностях ниже.
</p></dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><i>assert_type</i>(<var>arg1</var>, &quot;<var>mygreatfunction first argument (level width)</var>&quot;, <var>1</var>, &quot;<b>nil</b>&quot;, &quot;<b>positive integer</b>&quot;, &quot;<b>position</b>&quot;)
</pre></td></tr></table>

</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Утверждения помогают определить ошибки кодирования. Наиболее часто они используются для проверки параметров библиотечных функций и реализаций преобразований. Чтобы утверждения не приводили к падению производительности во время игры, они обычно проверяются для уровней, у которых для параметра &lsquo;<samp>status</samp>&rsquo; в элементе <a href="#g_t_003cversion_003e">&lt;version&gt;</a> XML-заголовка выставлены значения <code>&quot;test&quot;</code> или <code>&quot;experimental&quot;</code>.
</p>
<p>Обычные утверждения, как и комментарии Lua, пропускаются на этапе компиляции для уровней со статусами <code>&quot;stable&quot;</code> и <code>&quot;released&quot;</code>. Но с помощью следующего шаблона присваивания и дополнительных скобок, утверждения можно выполнить принудительно:
</p><table><tr><td>&nbsp;</td><td><pre class="example"><var>dummy</var> = (<i>assert_type</i>)(<var>arg1</var>, &quot;<var>myfunction first argument</var>&quot;, <var>1</var>, &quot;<b>integer</b>&quot;)
</pre></td></tr></table>

<p>Допустимы все типы данных Lua (например  <code>&quot;nil&quot;</code>, <code>&quot;number&quot;</code>, <code>&quot;boolean&quot;</code>, <code>&quot;string&quot;</code>, <code>&quot;table&quot;</code>, <code>&quot;function&quot;</code>) кроме <code>&quot;userdata&quot;</code>, пользовательские типы данных Enigma  (<code>&quot;object&quot;</code>, <code>&quot;position&quot;</code>, <code>&quot;tile&quot;</code>, <code>&quot;tiles&quot;</code>, <code>&quot;group&quot;</code>, <code>&quot;world&quot;</code>, <code>&quot;polist&quot;</code>, <code>&quot;unknown&quot;</code>) и типы данных, указанные в метасписках (<code>&quot;map&quot;</code> из <a href="#libmap">libmap</a>), см. раздел <a href="#etype">etype</a>. Кроме того, признаются следующие дескрипторы типов:
</p><dl compact="compact">
<dt> <code>&quot;integer&quot;</code></dt>
<dd><p>Любое целое число (..., -2, -1, 0, 1, 2, ...)
</p></dd>
<dt> <code>&quot;positive&quot;</code></dt>
<dd><p>Любое положительное число, но не ноль.
</p></dd>
<dt> <code>&quot;non-negative&quot;</code></dt>
<dd><p>Любое неотрицательное число, включая ноль.
</p></dd>
<dt> <code>&quot;natural&quot;</code></dt>
<dd><p>Любое неотрицательное целое число (0, 1, 2, ...).
</p></dd>
<dt> <code>&quot;positive integer&quot;</code></dt>
<dd><p>Любое положительное целое число (1, 2, 3, ...).
</p></dd>
<dt> <code>&quot;non-empty string&quot;</code></dt>
<dd><p>Любая строка кроме пустой <code>&quot;&quot;</code>.
</p></dd>
<dt> <code>&quot;any table&quot;</code></dt>
<dd><p>Если &lsquo;<samp>var</samp>&rsquo; &mdash; список, то атрибут &lsquo;<samp>_type</samp>&rsquo; соответствующего метасписка будет использован в качестве его <a href="#etype">etype</a>. В частности, если атрибут &lsquo;<samp>_type</samp>&rsquo; существует, то список уже не может рассматриваться как экземпляр типа данных <code>&quot;table&quot;</code>. Например,
</p><table><tr><td>&nbsp;</td><td><pre class="example">assert_type(mytable, &quot;large table&quot;, 1, &quot;table&quot;)
</pre></td></tr></table>
<p>если &lsquo;<samp>mytable</samp>&rsquo; это <code>&quot;map&quot;</code>, то приведённый код выдаст утверждение, хотя, в принципе, <code>&quot;map&quot;</code> всегда является <code>&quot;table&quot;</code>. Чтобы распознавались любые типы списков, вне зависимости от их внутреннего представления, можно использовать в качестве типа <code>&quot;any table&quot;</code>.
</p></dd>
<dt> <code>&quot;valid object&quot;</code></dt>
<dd><p>Любой допустимый объект.
</p></dd>
</dl>

<p>Как и для <a href="#cond">cond</a>, для &lsquo;<samp>vardescription</samp>&rsquo;, &lsquo;<samp>level</samp>&rsquo; и любых дескрипторов типов справедливо появление побочных эффектов.
</p>
<p>Более подробную информацию о функции &lsquo;<samp>error</samp>&rsquo; можно найти в руководстве Lua.
</p>
</dd>
<dt> <b>Готовый пример:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">function paint_lawn(pos)
    assert_type(pos, &quot;paint_lawn first argument&quot;, 2, &quot;position&quot;, &quot;object&quot;, &quot;polist&quot;, &quot;group&quot;, &quot;table&quot;)
    if etype(pos) == &quot;object&quot; then
        assert_bool(-pos, &quot;paint_lawn: Object not existing.&quot;, 2)
    end
    wo[pos] = ti[&quot;lawn&quot;]
end
paint_lawn(no[&quot;mystone&quot;])
paint_lawn(&quot;myotherstone&quot;)
</pre></td></tr></table>
<p>Если &lsquo;<samp>mystone</samp>&rsquo; не существует, <code>no[&quot;mystone&quot;]</code> всё ещё будет объектом типа etype, недопустимым объектом. Поэтому <code>assert_type</code> больше срабатывать не будет, а <code>assert_bool</code> будет.
</p>
<p>Если &lsquo;<samp>mystone</samp>&rsquo; существует, то второй &lsquo;<samp>paint_lawn</samp>&rsquo; выдаст ошибку через утверждение &lsquo;<samp>assert_type</samp>&rsquo;, поскольку <code>pos </code> теперь имеет тип <code>&quot;string&quot;</code>. Сообщение об ошибке:
</p><table><tr><td>&nbsp;</td><td><pre class="example">Wrong type for paint_lawn first argument, is string, must be one of position,
object, polist, group, table.
</pre></td></tr></table>
</dd>
</dl>


<hr size="6">
<a name="cond"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#assert_005ftype" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#etype" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Functions" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="cond-1"></a>
<h3 class="subsection">5.14.3 cond</h3>

<p>&lsquo;<samp>cond</samp>&rsquo; &mdash; это условное выражение, замена тернарного оператора &lsquo;<samp>?:</samp>&rsquo; из C-подобных языков. Однако стоит заметить, что это не точная замена, а просто обходной манёвр с некоторыми побочными эффектами замены.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><b>cond</b>(<i>condition</i>, <i>iftrue</i>, <i>iffalse</i>)
</p>
<dl compact="compact">
<dt> <i>condition</i></dt>
<dd><p>Булево выражение.
</p>
</dd>
<dt> <i>iftrue</i></dt>
<dd><p>Выражение, которое выдаётся, если &lsquo;<samp>condition</samp>&rsquo; истинно.
</p>
</dd>
<dt> <i>iffalse</i></dt>
<dd><p>Выражение, которое выдаётся, если &lsquo;<samp>condition</samp>&rsquo; ложно.
</p></dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><i>ti</i>[&quot;<var>x</var>&quot;] = <i>cond</i>(<i>wo</i>[&quot;<b>IsDifficult</b>&quot;], {&quot;<b>st_death</b>&quot;}, <i>ti</i>[&quot;<var>#</var>&quot;])
<i>ti</i>[&quot;<var>D</var>&quot;] = <i>cond</i>(<i>wo</i>[&quot;<b>IsDifficult&quot;</b>], {&quot;<b>st_death</b>&quot;}, {&quot;<b>nil</b>&quot;})
</pre></td></tr></table>

</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>&lsquo;<samp>cond</samp>&rsquo; всегда выполняет оба выражения &mdash; &lsquo;<samp>iftrue</samp>&rsquo; и &lsquo;<samp>iffalse</samp>&rsquo;, независимо от &lsquo;<samp>condition</samp>&rsquo;. Поэтому,
</p><table><tr><td>&nbsp;</td><td><pre class="example"><var>mytable</var> = {<var>1</var>,<var>2</var>,<var>3</var>,<var>4</var>,<var>5</var>,<var>6</var>,<var>7</var>,<var>8</var>,<var>9</var>,<var>0</var>}
<var>removed_element</var> = <i>cond</i>(<var>i</var> &lt; <var>5</var>, <i>table</i>.<i>remove</i>(<var>mytable</var>, <var>i</var>), <i>table</i>.<i>remove</i>(<var>mytable</var>, <var>5</var>))
</pre></td></tr></table>
<p>всегда будет удалять два элемента. При &lsquo;<samp>i=2</samp>&rsquo; будет возвращаться &lsquo;<samp>2</samp>&rsquo;, а &lsquo;<samp>mytable</samp>&rsquo; превратится в &lsquo;<samp>{1,3,4,5,7,8,9,0}</samp>&rsquo;, а при &lsquo;<samp>i=6</samp>&rsquo; будет получена &lsquo;<samp>5</samp>&rsquo;, но &lsquo;<samp>mytable</samp>&rsquo; будет &lsquo;<samp>{1,2,3,4,7,8,9,0}</samp>&rsquo;.
</p>
<p>Другой пример Enigma, который может вызвать ошибки:
</p><table><tr><td>&nbsp;</td><td><pre class="example"><var>w</var>,<var>h</var> = <i>cond</i>(<i>wo</i>[&quot;<b>IsDifficult</b>&quot;], <i>wo</i>(<i>ti</i>, &quot; &quot;, <var>map1</var>), <i>wo</i>(<i>ti</i>, &quot; &quot;, <var>map2</var>))
</pre></td></tr></table>
<p>Выполнятся и второй, и третий параметры. Поэтому две взаимоисключающие попытки создать новый мир выльются в то, что вторая провалится. Вместо приведённого выше примера используйте следующий:
</p><table><tr><td>&nbsp;</td><td><pre class="example"><var>w</var>,<var>h</var> = <i>wo</i>(<i>ti</i>, &quot; &quot;, <i>cond</i>(<i>wo</i>[&quot;<b>IsDifficult</b>&quot;], <var>map1</var>, <var>map2</var>))
</pre></td></tr></table>
<p>Однако в большинстве случаев &lsquo;<samp>cond</samp>&rsquo; всё равно используется с постоянными выражениями в качестве параметров &lsquo;<samp>iftrue</samp>&rsquo; и &lsquo;<samp>iffalse</samp>&rsquo; (например строками или переменными) и никаких побочных эффектов не возникнет.
</p>
</dd>
</dl>

<hr size="6">
<a name="etype"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#cond" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fl" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Functions" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="etype-1"></a>
<h3 class="subsection">5.14.4 etype</h3>
<a name="index-etype"></a>

<p>Функция &lsquo;<samp>etype()</samp>&rsquo; возвращает дополнительный тип своего параметра.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><b>etype</b>(<i>var</i>)
</p>
<dl compact="compact">
<dt> <i>var</i></dt>
<dd><p>Переменная любого типа.
</p></dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>argtype</var> = <i>etype</i>(<var>value</var>)
</pre></td></tr></table>

</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Типами Lua являются <code>&quot;nil&quot;</code>, <code>&quot;number&quot;</code>, <code>&quot;boolean&quot;</code>, <code>&quot;string&quot;</code>, <code>&quot;table&quot;</code>, <code>&quot;function&quot;</code>, <code>&quot;userdata&quot;</code> и <code>&quot;thread&quot;</code>. Чтобы запросить тип любой переменной, можно воспользоваться функцией Lua &lsquo;<samp>type</samp>&rsquo;. Однако Enigma различными способами определяет целый ряд дополнительных типов и такие типы можно запросить с помощью &lsquo;<samp>etype</samp>&rsquo;. &lsquo;<samp>etype</samp>&rsquo;, как правило, возвращает тип Lua своего параметра, кроме двух случаев, рассмотренных ниже:
</p><dl compact="compact">
<dt> <i>&quot;userdata&quot;</i></dt>
<dd><p>Вместо <code>&quot;userdata&quot;</code> будут возвращены спеыиальные типы Enigma. Такими особыми типами являются <code>&quot;object&quot;</code>, <code>&quot;position&quot;</code>, <code>&quot;tile&quot;</code>, <code>&quot;tiles&quot;</code>, <code>&quot;group&quot;</code>, <code>&quot;world&quot;</code>, <code>&quot;polist&quot;</code> и <code>&quot;default&quot;</code>. Если встретится неизвестный пользовательский тип данных, то будет возвращено значение <code>&quot;unknown&quot;</code>.
</p>
</dd>
<dt> <i>&quot;table&quot;</i></dt>
<dd><p>Если <code>var</code> &mdash; это список, то будет возвращён его метасписок. Если присутствует элемент &lsquo;<samp>_type</samp>&rsquo;, то он будет использован в качестве <code>etype</code>. Самыми характерными примерами являются карты <a href="#libmap">libmap</a>, <a href="#Resolvers">Преобразования</a> и <a href="#res_002emaze">res.maze</a> с лабиринтами и клетками. Поэтому &lsquo;<samp>etype</samp>&rsquo; будет возвращать ещё и типы <code>&quot;map&quot;</code>, <code>&quot;resolver&quot;</code>, <code>&quot;maze&quot;</code> и <code>&quot;cell&quot;</code>. К системе <code>etype</code> можно обратиться через &lsquo;<samp>_type</samp>&rsquo; из любого места, где используются метасписки.
</p></dd>
</dl>

</dd>
</dl>

<hr size="6">
<a name="fl"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#etype" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#grp" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Functions" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fl-1"></a>
<h3 class="subsection">5.14.5 fl</h3>
<a name="index-fl"></a>

<p>Функция &lsquo;<samp>fl()</samp>&rsquo; получает объекты покрытия с указанной позиции или позиций.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = <b>fl</b>(&lt;<i>pos</i>| {<i>x</i>, <i>y</i>}|<i>x</i>, <i>y</i>| <i>obj</i> | <i>group</i>| <i>polist</i>&gt;)
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Если параметром выступает единственная позиция, то возвращается объект покрытия с этой позиции. Если единственная позиция находится за пределами мира, то возвращается недействительная нулевая ссылка на <a href="#Object">Объект</a>.
</p>
<p>Если параметром выступает <a href="#Group">Группа</a> или <a href="#PositionList">PositionList</a>, то будут получены все объекты покрытий с соответствующих позиций, и затем эти объекты будут добавлены в новую результирующую группу в той же последовательности. Недействительные позиции не будут добавлены в группу и будут пропущены.
</p>
<p>В любом случае полученному значению можно посылать сообщения.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>floor</var> = <i>fl</i>(<i>po</i>(<var>3</var>, <var>5</var>))
<var>floor</var> = <i>fl</i>({<var>3</var>, <var>5</var>})
<var>floor</var> = <i>fl</i>(<var>3</var>, <var>5</var>)
<var>floor</var> = <i>fl</i>{<var>3</var>, <var>5</var>}     &mdash; эквивалентная запись Lua
<var>floor</var> = <i>fl</i>(<var>mystone</var>)
<var>group</var> = <i>fl</i>(<i>no</i>[&quot;door#*&quot;])
<var>group</var> = <i>fl</i>(<i>po</i>(<var>3</var>, <var>5</var>)..<i>po</i>(<var>4</var>, <var>2</var>))
</pre></td></tr></table>

</dd>
</dl>

<hr size="6">
<a name="grp"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fl" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Functions" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="grp-1"></a>
<h3 class="subsection">5.14.6 grp</h3>
<a name="index-grp"></a>

<p>Функция &lsquo;<samp>grp()</samp>&rsquo; составляет из своих <a href="#Object">Объект</a>ов-параметров <a href="#Group">группу</a>.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><b>grp</b>(&lt;{<i>obj1</i>,<i>obj2</i>,...}| <i>obj1</i>,<i>obj2</i>,... |<i>group</i>&gt;)
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Возвращает новую группу (см. раздел <a href="#Group">Группа</a>), составленную из объектов, перечисленными в качестве параметров функции. Объекты должны быть перечислены в списке Lua, представленном в виде нескольких отдельных объектов-параметров или существующей группы. В любом случае последовательность объектов в новой полученной группе не меняется, а недействительные нулевые ссылки на объект отбрасываются. Если один объект перечислен несколько раз, то в группу будет включён только его первый экземпляр, а все последующие будут отброшены.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>newgroup</var> = <i>grp</i>(<var>obj1</var>, <var>obj2</var>, <var>obj3</var>)
<var>newgroup</var> = <i>grp</i>({<var>obj1</var>,<var>obj2</var>})
<var>newgroup</var> = <i>grp</i>{<var>obj1</var>,<var>obj2</var>}   -- Lua syntax equivalence
<var>newgroup</var> = <i>grp</i>{}            -- empty group
<var>newgroup</var> = <i>grp</i>(<var>group</var>)       -- a copy of group cleaned of invalid &lsquo;<samp>NULL</samp>&rsquo; objects
</pre></td></tr></table>

</dd>
</dl>

<hr size="6">
<a name="it"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#grp" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#ORI2DIR" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Functions" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it-1"></a>
<h3 class="subsection">5.14.7 it</h3>
<a name="index-it"></a>

<p>Функция &lsquo;<samp>it()</samp>&rsquo; получает предметы с указанной позиции или позиций.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = <b>it</b>(&lt;<i>pos</i>| {<i>x</i>, <i>y</i>}|<i>x</i>, <i>y</i>| <i>obj</i> | <i>group</i>| <i>polist</i>&gt;)
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Если параметром выступает единственная позиция, то возвращается предмет с этой позиции. Если в указанной единственной позиции нет предметов или она находится за пределами мира, то возвращается недействительная нулевая ссылка на <a href="#Object">Объект</a>.
</p>
<p>Если параметром выступает <a href="#Group">Группа</a> или <a href="#PositionList">PositionList</a>, то будут получены все предметы с соответствующих позиций и затем эти предметы будут добавлены в новую результирующую группу в той же последовательности. Недействительные позиции либо позиции, которым не соответствуют предметы, не будут добавлены в группу и будут пропущены.
</p>
<p>В любом случае полученному значению можно посылать сообщения.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>item</var> = <i>it</i>(<i>po</i>(<var>3</var>, <var>5</var>))
<var>item</var> = <i>it</i>({<var>3</var>, <var>5</var>})
<var>item</var> = <i>it</i>(<var>3</var>, <var>5</var>)
<var>item</var> = <i>it</i>{<var>3</var>, <var>5</var>}     &mdash; эквивалентная запись Lua
<var>item</var> = <i>it</i>(<var>mystone</var>)
<var>group</var> = <i>it</i>(<i>no</i>[&quot;door#*&quot;])
<var>group</var> = <i>it</i>(<i>po</i>(<var>3</var>, <var>5</var>)..<i>po</i>(<var>4</var>, <var>2</var>))
</pre></td></tr></table>

</dd>
</dl>

<hr size="6">
<a name="ORI2DIR"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#random" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Functions" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="ORI2DIR-1"></a>
<h3 class="subsection">5.14.8 ORI2DIR</h3>

<p>Список &lsquo;<samp>ORI2DIR[]</samp>&rsquo; преобразует значения положения в значения направления.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = <b>ORI2DIR</b>[<var>orientation</var>]
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>В элементах с соответствующим индексом списка хранятся значения направлений соответствующих положений.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>direction</var> = <i>ORI2DIR</i>[NORTH]      -- N  = po(0, -1)
<var>direction</var> = <i>ORI2DIR</i>[SOUTHEAST]  -- SE = po(1,  1)
<var>direction</var> = <i>ORI2DIR</i>[NODIR]      --      po(0,  0)
</pre></td></tr></table>

</dd>
</dl>
<hr size="6">
<a name="random"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#ORI2DIR" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Functions" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="random-1"></a>
<h3 class="subsection">5.14.9 random</h3>
<a name="index-random"></a>

<p>Функция &lsquo;<samp>random()</samp>&rsquo; &mdash; замена стандартной фцнкции Lua &lsquo;<samp>math.random()</samp>&rsquo;, синтаксически совместимая с ней. Оба имени соответствуют одной и той же реализации получения случайного значения в Enigma.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = <b>random</b>(&lt;|<var>n</var>|<var>l</var>,<var>u</var>&gt;)
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>При вызове без параметров math.random возвращает псевдослучайное действительное число из диапазона [0,1). Если параметром выступает число n, то math.random возвращает псевдослучайное целое число из диапазона [1,n]. При вызове с двумя заданными параметрами, l и u, math.random возвращает псевдослучайное целое число из диапазона [l,u].
</p>
<p>Единственное отличие от реализации Lua заключается в самом генераторе случайных чисел. Enigma использует собственную реализацию, которая гарантирует, что в любой операционной системе и на любом процессоре при одинаковых начальных условиях будет выдана одинаковая псевдослучайная последовательность чисел. Эта возможность очень пригодится в будущих версиях Enigma, поэтому сам уровень не может влиять на начальные значения случайной последовательности.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>float</var> = <i>random</i>()          -- e.g. 0.402834
<var>integer</var> = <i>random</i>(20)      -- e.g. 13
<var>integer</var> = <i>random</i>(5, 10)   -- e.g. 5
</pre></td></tr></table>

</dd>
</dl>
<hr size="6">
<a name="st"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#random" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#usertype" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Functions" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st-1"></a>
<h3 class="subsection">5.14.10 st</h3>
<a name="index-st"></a>

<p>Функция &lsquo;<samp>st()</samp>&rsquo; получает объекты камней с указанной позиции или позиций.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>result = <b>st</b>(&lt;<i>pos</i>| {<i>x</i>, <i>y</i>}|<i>x</i>, <i>y</i>| <i>obj</i> | <i>group</i>| <i>polist</i>&gt;)
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Если параметром выступает единственная позиция, то возвращается камень с этой позиции. Если в указанной единственной позиции нет камней или она находится за пределами мира, то возвращается недействительная нулевая ссылка на <a href="#Object">Объект</a>.
</p>
<p>Если параметром выступает <a href="#Group">Группа</a> или <a href="#PositionList">PositionList</a>, то будут получены все камни с соответствующих позиций, а затем эти камни будут добавлены в новую результирующую группу в той же последовательности. Недействительные позиции и позиции, которым не соответствуют камни, не будут добавлены в группу и будут пропущены.
</p>
<p>В любом случае полученному значению можно посылать сообщения.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>stone</var> = <i>st</i>(<i>po</i>(<var>3</var>, <var>5</var>))
<var>stone</var> = <i>st</i>({<var>3</var>, <var>5</var>})
<var>stone</var> = <i>st</i>(<var>3</var>, <var>5</var>)
<var>stone</var> = <i>st</i>{<var>3</var>, <var>5</var>}     &mdash; эквивалентная запись Lua
<var>stone</var> = <i>st</i>(<var>myfloor</var>)
<var>group</var> = <i>st</i>(<i>no</i>[&quot;cherry#*&quot;])
<var>group</var> = <i>st</i>(<i>po</i>(<var>3</var>, <var>5</var>)..<i>po</i>(<var>4</var>, <var>2</var>))
</pre></td></tr></table>

</dd>
</dl>

<hr size="6">
<a name="usertype"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Common-Attributes-and-Messages" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Functions" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="usertype-1"></a>
<h3 class="subsection">5.14.11 usertype</h3>
<a name="index-usertype"></a>

<p>Функия &lsquo;<samp>usertype()</samp>&rsquo; возвращает для типов данных Enigma информацию о типе.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><b>usertype</b>(<i>var</i>)
</p>
<dl compact="compact">
<dt> <i>var</i></dt>
<dd><p>Переменная любого типа.
</p></dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>argtype</var> = <i>usertype</i>(<var>value</var>)
</pre></td></tr></table>

</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Особая информация о типе возвращается только для используемого в Enigma типа данных Lua <code>&quot;userdata&quot;</code>. Такими особыми типами являются <code>&quot;object&quot;</code>, <code>&quot;position&quot;</code>, <code>&quot;tile&quot;</code>, <code>&quot;tiles&quot;</code>, <code>&quot;group&quot;</code>, <code>&quot;world&quot;</code>, <code>&quot;polist&quot;</code> и <code>&quot;default&quot;</code>. Для других типов данных будет возвращено значение <code>&quot;unknown&quot;</code>.
</p>
<p>Функция <a href="#etype">etype</a> предоставляет основные возможности по определению типов данных и частично основана на этой функции.
</p>
</dd>
</dl>


<hr size="6">
<a name="Common-Attributes-and-Messages"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#usertype" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Common-Attributes" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Lua-API" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Common-Attributes-and-Messages-1"></a>
<h1 class="chapter">6. Общие атрибуты и сообщения</h1>

<p>Некоторые атрибуты и сообщения &mdash; общие для многих объектов или даже поддерживаются всеми объектами. Здесь мы подробно их рассмотрим. Дальнейшие главы просто ссылаются на них или даже пропускают их, когда они полностью поддерживаются и используются как обычно.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Common-Attributes">6.1 Общие атрибуты</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Common-Messages">6.2 Общие сообщения</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Common-Constants">6.3 Общие константы</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Global-Attributes">6.4 Глобальные атрибуты</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Common-Attributes"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#name" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Common-Attributes-1"></a>
<h2 class="section">6.1 Общие атрибуты</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#name">6.1.1 name</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#state">6.1.2 state</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#target">6.1.3 target</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#action">6.1.4 action</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#nopaction">6.1.5 nopaction</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#safeaction">6.1.6 safeaction</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#inverse">6.1.7 inverse</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#destination">6.1.8 destination</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#friction">6.1.9 friction</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#adhesion">6.1.10 adhesion</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#checkerboard">6.1.11 checkerboard</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#rubbers">6.1.12 rubbers</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#wires">6.1.13 wires</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#fellows">6.1.14 fellows</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="name"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Common-Attributes" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#state" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="name-1"></a>
<h3 class="subsection">6.1.1 name</h3>

<p>Атрибут именования объектов (см. раздел <a href="#Object-Naming">Именование объектов</a>), который позволяет присвоить имя любому объекту. Чтобы ссылаться на него, следует проверять уникальность имён. Но движок помогает вам, автоматически добавляя уникальный номер к именам, оканчивающимся на знак &lsquo;<samp>#</samp>&rsquo; (см. раздел <a href="#Object-Naming">Именование объектов</a>). Если вы повторно используете уже использовавшееся имя, первый объект будет разименован и все ссылки на имя будут указывать на новый именованный объект. Если вам нужно присвоить объекту имя, вы должны сделать это при создании объекта, так как некоторым объектам имена необходимы и в случае их отсутствия уникальные имена им присвоит движок.
</p>
<p>Следует заметить, что этот атрибут не перечислен в описаниях отдельных объектов.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;string</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;{a-zA-Z0-9_}+</dt>
<dd><p>Последовательность символов, состоящая из букв и специальных символов, указанных выше.
</p></dd>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>nil</code></dt>
<dd><p>Если имя не задано, то некоторым объектам имена будут присвоены автоматически.
</p></dd>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;всеми объектами</dt>
</dl>

<hr size="6">
<a name="state"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#name" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#target" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="state-1"></a>
<h3 class="subsection">6.1.2 state</h3>

<p>Ключевой атрибут любого объекта, описывающий текущее состояние объекта в его стандартном жизненном цикле. Это <a href="#Object-State">Состояние объекта</a> описывается простым числом. Большинство динамических объектов могут находиться только в двух состояниях. Для других объектов характерно большее количество состояний. Возможные состояния перечисляются в описании каждого объекта. Этот универсальный атрибут допускает общие сообщения, такие как  <a href="#toggle">toggle</a>, <a href="#signal">signal</a>, <a href="#on">on</a>, <a href="#off">off</a>, <a href="#open">open</a>, <a href="#close">close</a>.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;number</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;зависят от конкретного объекта</dt>
<dd><p>Пожалуйста, используйте указанные в описаниях объектов константы, набранные в верхнем регистре.
</p></dd>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>0</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/иногда write</dt>
<dd><p>Хотя в большинстве случаев значение атрибута задаётся при создании объекта, предпочтительно впоследствии менять его посредством сообщений.
</p></dd>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;всеми объектами</dt>
</dl>

<hr size="6">
<a name="target"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#state" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#action" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="target-1"></a>
<h3 class="subsection">6.1.3 target</h3>

<p>Все активные объекты при срабатывании выполняют некое действие по отношению к своей цели. Данный атрибут является частью парадигмы <a href="#Target-_002d-Action">Цель-действие</a>, которая гарантирует возможность связывать объекты. Вы можете задать общий атрибут &lsquo;<samp>target</samp>&rsquo; для объекта либо зависимые от состояния (атрибут <a href="#state">state</a>) атрибуты &lsquo;<samp>target_0</samp>&rsquo;, &lsquo;<samp>target_1</samp>&rsquo; и т. д. (см. раздел <a href="#Object-State">Состояние объекта</a>). Для всех них характерен одинаковый синтаксис:
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;строка, объект, группа, метки&nbsp;&nbsp;См. раздел <a href="#Object-Description">Описание объектов</a></dt>
<dd><p>Отдельные цели могут быть объявлены через имя объекта либо ссылку на него. Несколько целей можно объявить с помощью групп и меток.
</p></dd>
<dt> <b>Значения:</b> &nbsp;&nbsp;см. раздел <a href="#Object-Attributes">Атрибуты объектов</a></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">target = &quot;myDoor&quot;
target = myObject
target = {&quot;myDoor&quot;, myObject}
target = {grp(obj1, obj2), &quot;myDoor&quot;, myObject}
</pre></td></tr></table>

</dd>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>nil</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;всеми объектами</dt>
</dl>

<hr size="6">
<a name="action"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#target" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#nopaction" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="action-1"></a>
<h3 class="subsection">6.1.4 action</h3>

<p>Все активные объекты при срабатывании выполняют некое действие по отношению к своей цели. Данный атрибут является частью парадигмы <a href="#Target-_002d-Action">Цель-действие</a>, которая гарантирует возможность связывать объекты. Вы можете задать общий атрибут &lsquo;<samp>action</samp>&rsquo; для объекта либо зависимые от состояния (атрибут <a href="#state">state</a>) атрибуты &lsquo;<samp>action_0</samp>&rsquo;, &lsquo;<samp>action_1&rsquo;</samp> и т. д. (см. раздел <a href="#Object-State">Состояние объекта</a>). Для всех них характерен одинаковый синтаксис:
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;строки, метки строк &nbsp;&nbsp;См. раздел <a href="#Target-_002d-Action">Цель-действие</a></dt>
<dd><p>Отдельное действие можно объявить, используя строку сообщения. Несколько действий, относящихся к различным целям, можно объявить, используя метки строк.
</p></dd>
<dt> <b>Значения:</b> &nbsp;&nbsp;см. раздел <a href="#Object-Attributes">Атрибуты объектов</a></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">action = &quot;open&quot;
action = {&quot;open&quot;, &quot;turn&quot;, &quot;toggle&quot;}
</pre></td></tr></table>

</dd>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>nil</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;всеми объектами</dt>
</dl>

<hr size="6">
<a name="nopaction"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#action" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#safeaction" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="nopaction-1"></a>
<h3 class="subsection">6.1.5 nopaction</h3>

<p>Очень специфическое дополнение к парадигме <a href="#Target-_002d-Action">Цель-действие</a>, позволяющее в случае действий, зависимых от состояния, отказать в отправке сообщений по умолчанию (см. раздел <a href="#Object-State">Состояние объекта</a>).
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;bool</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;<code>true</code>, <code>false</code></dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>false</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;всеми объектами</dt>
</dl>

<hr size="6">
<a name="safeaction"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#nopaction" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#inverse" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="safeaction-1"></a>
<h3 class="subsection">6.1.6 safeaction</h3>

<p>Довольно специфическое дополнение к парадигме <a href="#Target-_002d-Action">Цель-действие</a>, которое позволяет уничтожить отправителя при выполнении кода действия.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;bool</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;<code>true</code>, <code>false</code></dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>false</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;всеми объектами</dt>
</dl>

<hr size="6">
<a name="inverse"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#safeaction" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#destination" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="inverse-1"></a>
<h3 class="subsection">6.1.7 inverse</h3>

<p>Атрибут, который пытается изменить значение действия на противоположное. Он поддерживается всеми объектами с булевым значением действия.
</p>
<p>Следует отметить, что этот атрибут не перечислен в описаниях отдельных объектов, если у объекта есть булевы значения действия.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;bool</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;<code>true</code>, <code>false</code></dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>false</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;большинством объектов</dt>
<dd><p>Этот атрибут поддерживают все объекты с булевыми значениями действий. К тому же, некоторые объекты с другими обратимыми типами значений действий, такими как направления, поддерживают обратимость своих атрибутов, как указано в описаниях этих объектов.
</p></dd>
</dl>

<hr size="6">
<a name="destination"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#inverse" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#friction" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="destination-1"></a>
<h3 class="subsection">6.1.8 destination</h3>

<p>Атрибут, который описывает один или несколько пунктов назначения. Он используется такими объектами, как <a href="#it_005fvortex">it_vortex</a> и <a href="#it_005fwormhole">it_wormhole</a>, для описания точек, в которые они должны телепортировать объекты, а также <a href="#ac_005fhorse">ac_horse</a> для описания пути перемещения объекта.
</p>
<p>Следует отметить, что этот атрибут поддерживается, только если он присутствует в описании конкретного объекта.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;метки или отдельная позиция</dt>
<dd><p>Для первого пункта назначения допускается только отдельная позиция. Используйте метки, чтобы определить множественные пункты назначения.
</p></dd>
<dt> <b>Значения:</b> &nbsp;&nbsp;см. раздел <a href="#Object-Attributes">Атрибуты объектов</a></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">destination = po(3.0, 4.7)
destination = &quot;myFloor&quot;
destination = myObject
destination = {&quot;vortex2&quot;,&quot;vortex3&quot;,&quot;vortex4&quot;}
po[&quot;dest1&quot;] = po(3,4)
po[&quot;dest2&quot;] = po(7,8)
destination = {&quot;dest1&quot;,&quot;dest2&quot;,&quot;myFloor&quot;}
</pre></td></tr></table>
<p>Обратите внимание, что объекты, имеющие только один пункт назначения, такие как &lsquo;<samp>it_wormhole</samp>&rsquo;, принимают первый объект-метку. Также обратите внимание на то, что в отличие от ссылок на цель (<a href="#target">target</a>), ссылки на пункт назначения могут принимать в качестве аргументов и именованные позиции. Также можно без опаски ссылаться на покрытия, которые могут быть разрушены бомбами, трещинами, камнями, изменяющими покрытие, и т.п.
</p></dd>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>nil</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;объектами-телепортами</dt>
</dl>

<hr size="6">
<a name="friction"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#destination" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#adhesion" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="friction-1"></a>
<h3 class="subsection">6.1.9 friction</h3>

<p>Атрибут, который описывает тормозящую силу трения, которая воздействует на актёров, находящихся на покрытии. Сила трения возрастает вместе с возрастанием скорости актёра и при положительных значениях атрибута является тормозящей. Но значение атрибута также может быть и отрицательным, что порождает силу ускорения, которую игроку чрезвычайно сложно контролировать.
</p>
<p>Помимо всех видов покрытий, для некоторых предметов, по функции схожих с покрытиями, таких как <a href="#it_005fstrip">it_strip</a>, <a href="#it_005fmeditation">it_meditation</a>, могут существовать значения силы трения, отличающиеся от силы трения покрытия.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;number</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;любое число с плавающей запятой</dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>nil</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;всеми покрытиями, а также предметами, по функции схожими с покрытиями</dt>
</dl>

<hr size="6">
<a name="adhesion"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#friction" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#checkerboard" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="adhesion-1"></a>
<h3 class="subsection">6.1.10 adhesion</h3>

<p>Атрибут, который описывает сцепление, позволяющее актёру ускоряться на покрытии. Большая сила сцепления означает большую силу ускорения при одинаковой скорости мыши. Значение силы сцепления может быть и отрицательным, что порождает силу ускорения, направленную в сторону, противоположную движению мыши; такую силу ускорения игроку довольно сложно контролировать.
</p>
<p>Кроме всех видов покрытий, для некоторых предметов, по функции схожих с покрытиями, таких как <a href="#it_005fstrip">it_strip</a>, <a href="#it_005fmeditation">it_meditation</a>, могут существовать значения силы сцепления, отличающиеся от силы сцепления покрытия.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;number</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;любое число с плавающей запятой</dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>nil</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;всеми покрытиями, а также предметами, по функции схожими с покрытиями</dt>
</dl>

<hr size="6">
<a name="checkerboard"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#adhesion" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#rubbers" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="checkerboard-1"></a>
<h3 class="subsection">6.1.11 checkerboard</h3>

<p>Атрибут, который определяет, должно ли данное объявление объекта применяться на чётных или нечётных участках решётки. Если значение атрибута равно &lsquo;<samp>0</samp>&rsquo;, объект будет размещаться только на участках решётки с чётной суммой координат x и y, если же значение равно &lsquo;<samp>1</samp>&rsquo;, то он будет размещаться на участках решётки с нечётной суммой координат. Таким образом можно сделать два различных объявления объекта для одного участка решётки, чтобы создать карту произвольной формы, состоящую из покрытий, предметов или камней, расположенных в шахматном порядке.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;number</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;<code>0</code>, <code>1</code></dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>nil</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;всеми покрытиями, камнями и предметами</dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">ti[&quot;c&quot;] = ti({&quot;fl_sahara&quot;, checkerboard=0}) .. {&quot;fl_tigris&quot;, checkerboard=1}
</pre></td></tr></table>
</dd>
</dl>

<hr size="6">
<a name="rubbers"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#checkerboard" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#wires" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="rubbers-1"></a>
<h3 class="subsection">6.1.12 rubbers</h3>

<p>Атрибут, который даёт доступ к лентам (объект <a href="#ot_005frubberband">ot_rubberband</a>), присоединённым к объекту в данный момент.
</p>
<p>Обратите внимание, что данный атрибут доступен только для чтения. Вы можете использовать ссылки на ленты, чтобы уничтожить отдельные ленты или изменить их связи. Но чтобы добавить новые ленты, вам необходимо использовать метод мира &lsquo;<samp>add</samp>&rsquo;.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;группа объектов <a href="#ot_005frubberband">ot_rubberband</a></dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>nil</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read only</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;камнями и актёрами</dt>
</dl>

<hr size="6">
<a name="wires"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#rubbers" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fellows" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="wires-1"></a>
<h3 class="subsection">6.1.13 wires</h3>

<p>Атрибут, который даёт доступ к проволокам (объект <a href="#ot_005fwire">ot_wire</a>), присоединённым к объекту в данный момент.
</p>
<p>Обратите внимание, что данный атрибут доступен только для чтения. Вы можете использовать ссылки на проволоки, чтобы уничтожить отдельные проволоки или изменить их связи. Но чтобы добавить новые проволоки, вам необходимо использовать метод мира &lsquo;<samp>add</samp>&rsquo;.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;группа объектов <a href="#ot_005fwire">ot_wire</a></dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>nil</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read only</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;всеми камнями</dt>
</dl>

<hr size="6">
<a name="fellows"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#wires" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Common-Messages" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fellows-1"></a>
<h3 class="subsection">6.1.14 fellows</h3>

<p>Атрибут, который даёт доступ ко всем объектам, в данный момент соединённым с помощью объектов <a href="#ot_005frubberband">ot_rubberband</a> или <a href="#ot_005fwire">ot_wire</a>.
</p>
<p>Обратите внимание, что данный атрибут доступен только для чтения. С его помощью можно только оценивать текущее состояние уровня. Но чтобы добавить новые ленты или проволоки, вам необходимо использовать метод мира &lsquo;<samp>add</samp>&rsquo;.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;группа объектов</dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>nil</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read only</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;камнями и актёрами</dt>
</dl>

<hr size="6">
<a name="Common-Messages"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fellows" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#toggle" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Common-Messages-1"></a>
<h2 class="section">6.2 Общие сообщения</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#toggle">6.2.1 toggle</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#nop">6.2.2 nop</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#signal">6.2.3 signal</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#on">6.2.4 on</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#off">6.2.5 off</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#open">6.2.6 open</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#close">6.2.7 close</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#ignite">6.2.8 ignite</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#heat">6.2.9 heat</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#setfire">6.2.10 setfire</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#kill">6.2.11 kill</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#sound">6.2.12 sound</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#disconnect">6.2.13 disconnect</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="toggle"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Common-Messages" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#nop" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Messages" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="toggle-1"></a>
<h3 class="subsection">6.2.1 toggle</h3>

<p>Это сообщение по умолчанию, которое используется всегда, когда не указано других сообщений. Оно чередует <a href="#Object-State">Состояние объекта</a>, независимо от природы самого состояния. Объекты, имеющие два состояния, например переключатели, будут изменять своё состояние с &lsquo;<samp>ON</samp>&rsquo; на &lsquo;<samp>OFF</samp>&rsquo; или наоборот. Объекты, функционирующие по принципу двери, будут изменять своё состояние с &lsquo;<samp>OPEN</samp>&rsquo; на &lsquo;<samp>CLOSED</samp>&rsquo; или с &lsquo;<samp>CLOSED</samp>&rsquo; на &lsquo;<samp>OPEN</samp>&rsquo;. Другие объекты, такие как <a href="#st_005ffourswitch">st_fourswitch</a>, изменят направление. Как правило, объекты изменяют состояние на следующее по очереди.
</p>
<dl compact="compact">
<dt> <b>Значение:</b> &nbsp;&nbsp;-</dt>
<dt> <b>Возвращает:</b> &nbsp;&nbsp;-</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;почти всеми объектами, использующими атрибут &lsquo;state&rsquo;</dt>
</dl>

<hr size="6">
<a name="nop"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#toggle" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#signal" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Messages" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="nop-1"></a>
<h3 class="subsection">6.2.2 nop</h3>

<p>Формальное сообщение, не имеющее никакой видимой функции: операция отсутствует. Вам оно может понадобиться, когда вы имеете дело с действиями, зависимыми от состояния, чтобы заблокировать отправляемое по умолчанию сообщение &lsquo;<samp>toggle</samp>&rsquo; (см. раздел <a href="#Object-State">Состояние объекта</a>).
</p>
<dl compact="compact">
<dt> <b>Значение:</b> &nbsp;&nbsp;-</dt>
<dt> <b>Возвращает:</b> &nbsp;&nbsp;-</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;всеми объектами</dt>
</dl>

<hr size="6">
<a name="signal"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#nop" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#on" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Messages" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="signal-1"></a>
<h3 class="subsection">6.2.3 signal</h3>

<p>Данное сообщение пытается привести объект в состояние 0 (&lsquo;<samp>OFF</samp>&rsquo;, &lsquo;<samp>CLOSED</samp>&rsquo;) либо 1 (&lsquo;<samp>ON</samp>&rsquo;, &lsquo;<samp>OPEN</samp>&rsquo;), в зависимости от его значения. Оно позволяет синхронизировать состояния источника действия и объекта-получателя. Следует отметить, что такие значения, как &lsquo;<samp>true</samp>&rsquo;, &lsquo;<samp>false</samp>&rsquo;, и значения направления, такие как &lsquo;<samp>WEST</samp>&rsquo; и &lsquo;<samp>NORTH</samp>&rsquo;, конвертируются в 0 и 1. Это позволяет использовать сообщение &lsquo;<samp>signal</samp>&rsquo; в качестве сообщения о действии для большинства объектов.
</p>
<dl compact="compact">
<dt> <b>Значение:</b> &nbsp;&nbsp;<code>0</code>, <code>1</code></dt>
<dt> <b>Возвращает:</b> &nbsp;&nbsp;-</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;почти всеми объектами, использующими атрибут &lsquo;state&rsquo;</dt>
</dl>

<hr size="6">
<a name="on"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#signal" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#off" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Messages" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="on-1"></a>
<h3 class="subsection">6.2.4 on</h3>

<p>Данное сообщение поддерживается только теми объектами, которые можно включить и выключить. Включены будут только объекты, находящиеся в состоянии &lsquo;<samp>OFF</samp>&rsquo;. Если объект уже находится в состоянии &lsquo;<samp>ON</samp>&rsquo;, то его состояние не изменится.
</p>
<dl compact="compact">
<dt> <b>Значение:</b> &nbsp;&nbsp;-</dt>
<dt> <b>Возвращает:</b> &nbsp;&nbsp;-</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;объектами, которые могут быть включены и выключены</dt>
</dl>

<hr size="6">
<a name="off"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#on" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#open" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Messages" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="off-1"></a>
<h3 class="subsection">6.2.5 off</h3>

<p>Данное сообщение поддерживается только теми объектами, которые можно включить и выключить. Выключены будут только объекты, находящиеся в состоянии &lsquo;<samp>ON</samp>&rsquo;. Если объект уже находится в состоянии &lsquo;<samp>OFF</samp>&rsquo;, то его состояние не изменится.
</p>
<dl compact="compact">
<dt> <b>Значение:</b> &nbsp;&nbsp;-</dt>
<dt> <b>Возвращает:</b> &nbsp;&nbsp;-</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;объектами, которые могут быть включены и выключены</dt>
</dl>

<hr size="6">
<a name="open"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#off" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#close" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Messages" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="open-1"></a>
<h3 class="subsection">6.2.6 open</h3>

<p>Данное сообщение поддерживается только объектами, функционирующими по принципу двери, которые можно открыть и закрыть. Открыты будут только объекты, находящиеся в состоянии &lsquo;<samp>CLOSED</samp>&rsquo;. Если объект уже находится в состоянии &lsquo;<samp>OPEN</samp>&rsquo;, то его состояние не изменится.
</p>
<dl compact="compact">
<dt> <b>Значение:</b> &nbsp;&nbsp;-</dt>
<dt> <b>Возвращает:</b> &nbsp;&nbsp;-</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;объектами, функционирующими по принципу двери, которые могут быть открыты и закрыты</dt>
</dl>

<hr size="6">
<a name="close"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#open" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#ignite" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Messages" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="close-1"></a>
<h3 class="subsection">6.2.7 close</h3>

<p>Данное сообщение поддерживается только объектами, функционирующими по принципу двери, которые можно открыть и закрыть. Закрыты будут только объекты, находящиеся в состоянии &lsquo;<samp>OPEN</samp>&rsquo;. Если объект уже находится в состоянии &lsquo;<samp>CLOSED</samp>&rsquo;, то его состояние не изменится.
</p>
<dl compact="compact">
<dt> <b>Значение:</b> &nbsp;&nbsp;-</dt>
<dt> <b>Возвращает:</b> &nbsp;&nbsp;-</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;объектами, функционирующими по принципу двери, которые могут быть открыты и закрыты</dt>
</dl>

<hr size="6">
<a name="ignite"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#close" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#heat" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Messages" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="ignite-1"></a>
<h3 class="subsection">6.2.8 ignite</h3>

<p>Если покрытие горючее, то поджигает его (см. раздел <a href="#Fire-Spreading">Распространение огня</a>) или же приводит к взрыву таких предметов как <a href="#it_005fdynamite">it_dynamite</a>, <a href="#it_005fbomb">it_bomb</a> или камней <a href="#st_005fice">st_ice</a>, <a href="#st_005fdispenser">st_dispenser</a> и многих других.
</p>
<dl compact="compact">
<dt> <b>Значение:</b> &nbsp;&nbsp;-</dt>
<dt> <b>Возвращает:</b> &nbsp;&nbsp;-</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;всеми покрытиями (см. раздел <a href="#Floor-Objects">Покрытия</a>) и взрывчатыми или ломкими предметами и камнями</dt>
</dl>

<hr size="6">
<a name="heat"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#ignite" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#setfire" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Messages" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="heat-1"></a>
<h3 class="subsection">6.2.9 heat</h3>

<p>Если покрытие горючее, то поджигает его (см. раздел <a href="#Fire-Spreading">Распространение огня</a>), или же приводит к тепловой трансформации (см. раздел <a href="#Heat_002dTransformation">Тепловая трансформация</a>) покрытий и других объектов, например <a href="#st_005fice">st_ice</a>, который начинает таять. Некоторые объекты реагируют на сообщение &lsquo;heat&rsquo;, так же как и на сообщение <a href="#ignite">ignite</a>, взрываясь или разрушаясь.
</p>
<dl compact="compact">
<dt> <b>Значение:</b> &nbsp;&nbsp;-</dt>
<dt> <b>Возвращает:</b> &nbsp;&nbsp;-</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;всеми покрытиями (см. раздел <a href="#Floor-Objects">Покрытия</a>) и некоторыми другими объектами</dt>
</dl>

<hr size="6">
<a name="setfire"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#heat" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#kill" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Messages" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="setfire-1"></a>
<h3 class="subsection">6.2.10 setfire</h3>

<p>Если покрытие горючее, то поджигает его (см. раздел <a href="#Fire-Spreading">Распространение огня</a>).
</p>
<dl compact="compact">
<dt> <b>Значение:</b> &nbsp;&nbsp;-</dt>
<dt> <b>Возвращает:</b> &nbsp;&nbsp;-</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;всеми покрытиями (см. раздел <a href="#Floor-Objects">Покрытия</a>)</dt>
</dl>

<hr size="6">
<a name="kill"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#setfire" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#sound" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Messages" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="kill-1"></a>
<h3 class="subsection">6.2.11 kill</h3>

<p>Данное сообщение заставляет его получателя прекратить своё существование. Вы можете уничтожать только те объекты, которые непосредственно являются частью мира. Объекты, принадлежащие игрокам, находящиеся в сумке либо каким-либо иным образом принадлежащие другим объектам, от лица своего владельца ответят на это сообщение отказом.
</p>
<dl compact="compact">
<dt> <b>Значение:</b> &nbsp;&nbsp;-</dt>
<dt> <b>Возвращает:</b> &nbsp;&nbsp;-</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;всеми объектами, непосредственно являющимися частью мира</dt>
</dl>

<hr size="6">
<a name="sound"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#kill" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#disconnect" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Messages" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="sound-1"></a>
<h3 class="subsection">6.2.12 sound</h3>

<p>Это сообщение заставляет получателя проиграть звук, указанный в первом строковом параметре. Он проигрывается с позиции объекта. Вторым числовым параметром можно задать громкость (по умолчанию <code>1.0</code>).
</p>
<dl compact="compact">
<dt> <b>Значение:</b> &nbsp;&nbsp;строка [, число]</dt>
<dt> <b>Возвращает:</b> &nbsp;&nbsp;-</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;всеми объектами</dt>
</dl>

<hr size="6">
<a name="disconnect"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#sound" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Common-Constants" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Messages" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="disconnect-1"></a>
<h3 class="subsection">6.2.13 disconnect</h3>

<p>Это сообщение заставляет получателя разорвать связи со всеми &quot;соратниками&quot; (<a href="#fellows">fellows</a>), обрезав все проволоки (<a href="#wires">wires</a>) и ленты (<a href="#rubbers">rubbers</a>), присоединённые к нему.
</p>
<dl compact="compact">
<dt> <b>Значение:</b> &nbsp;&nbsp;-</dt>
<dt> <b>Возвращает:</b> &nbsp;&nbsp;-</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;всеми объектами</dt>
</dl>


<hr size="6">
<a name="Common-Constants"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#disconnect" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#state-values" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Common-Constants-1"></a>
<h2 class="section">6.3 Общие константы</h2>

<p>Константы для мнимых типов данных (см. раздел <a href="#Pseudo-Datatypes">Мнимые типы данных</a>).
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#state-values">6.3.1 Значения состояний</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#color-values">6.3.2 Значения цветов</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#actor-controllers">6.3.3 Управление актёром (controllers)</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#oxyd-colors">6.3.4 Цвета оксидов</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#orientations">6.3.5 Положения (orientation)</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#direction-offsets">6.3.6 Смещения направления</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#position-lists">6.3.7 Списки положений</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#essentialness">6.3.8 Важность</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#meditation-types">6.3.9 Типы медитации</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#glasses-abilities">6.3.10 Возможности очков</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#coinslot-acceptance">6.3.11 Приём монет</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#rubberband-length">6.3.12 Длина резиновой ленты</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#subsoil-kind">6.3.13 Тип подпочвы</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#screen-scrolling">6.3.14 Прокрутка изображения</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#map-read-directions">6.3.15 Направления чтения карты</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="state-values"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Common-Constants" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#color-values" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Constants" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="state-values-1"></a>
<h3 class="subsection">6.3.1 Значения состояний</h3>

<p>Числовые константы для атрибута <a href="#state">state</a> объекта. Пожалуйста, пользуйтесь константой, подходящей для объекта, а не числами.
</p>
<ul>
<li> &lsquo;<samp>OFF</samp>&rsquo; = <code>0</code>, все объекты типа переключателей
</li><li> &lsquo;<samp>ON</samp>&rsquo; = <code>1</code>, все объекты типа переключателей
</li><li> &lsquo;<samp>CLOSED</samp>&rsquo; = <code>0</code>, все объекты типа дверей
</li><li> &lsquo;<samp>OPEN</samp>&rsquo; = <code>1</code>, все объекты типа дверей
</li><li> &lsquo;<samp>IDLE</samp>&rsquo; = <code>0</code>, другие объекты в пассивном состоянии (по умолчанию)
</li><li> &lsquo;<samp>ACTIVE</samp>&rsquo; = <code>1</code>, другие объекты в активном состоянии
</li><li> &lsquo;<samp>INACTIVE</samp>&rsquo; = <code>2</code>, другие объекты в неактивном состоянии
</li><li> &lsquo;<samp>OXYDPAIR</samp>&rsquo; = <code>2</code>, только <a href="#st_005foxyd">st_oxyd</a>
</li><li> &lsquo;<samp>LIGHT</samp>&rsquo; = <code>0</code>, <a href="#st_005fdisco">st_disco</a>
</li><li> &lsquo;<samp>MEDIUM</samp>&rsquo; = <code>1</code>, <a href="#st_005fdisco">st_disco</a>, <a href="#it_005fcrack">it_crack</a>, <a href="#it_005fextinguisher">it_extinguisher</a>
</li><li> &lsquo;<samp>DARK</samp>&rsquo; = <code>2</code>, <a href="#st_005fdisco">st_disco</a>
</li><li> &lsquo;<samp>FLOODING</samp>&rsquo; = <code>1</code>, <a href="#fl_005fwater">fl_water</a>, <a href="#fl_005fwood">fl_wood</a>, <a href="#fl_005fhay">fl_hay</a>, <a href="#fl_005frock">fl_rock</a>
</li><li> &lsquo;<samp>INVISIBLE</samp>&rsquo; = <code>-1</code>, <a href="#it_005fcrack">it_crack</a>
</li><li> &lsquo;<samp>SMALL</samp>&rsquo; = <code>0</code>, <a href="#it_005fcrack">it_crack</a>
</li><li> &lsquo;<samp>LARGE</samp>&rsquo; = <code>2</code>, <a href="#it_005fcrack">it_crack</a>
</li><li> &lsquo;<samp>YIN</samp>&rsquo; = <code>0</code>, <a href="#fl_005fyinyang">fl_yinyang</a> и всеми актёрами в качестве значения <a href="#owner">owner</a>
</li><li> &lsquo;<samp>YANG</samp>&rsquo; = <code>1</code>, <a href="#fl_005fyinyang">fl_yinyang</a> и всеми актёрами в качестве значения <a href="#owner">owner</a>
</li><li> &lsquo;<samp>EMPTY</samp>&rsquo; = <code>0</code>, <a href="#it_005fextinguisher">it_extinguisher</a>
</li><li> &lsquo;<samp>FULL</samp>&rsquo; = <code>2</code>, <a href="#it_005fextinguisher">it_extinguisher</a>
</li><li> &lsquo;<samp>BROKEN</samp>&rsquo; = <code>1</code>, <a href="#it_005fbottle">it_bottle</a>
</li><li> &lsquo;<samp>BREAKING</samp>&rsquo; = <code>2</code>, <a href="#st_005fquake">st_quake</a>
</li><li> &lsquo;<samp>CW</samp>&rsquo; = <code>0</code>, по часовой стрелке, <a href="#st_005frotator">st_rotator</a>
</li><li> &lsquo;<samp>CCW</samp>&rsquo; = <code>1</code>, против часовой стрелки, <a href="#st_005frotator">st_rotator</a>
</li></ul>


<hr size="6">
<a name="color-values"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#state-values" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#actor-controllers" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Constants" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="color-values-1"></a>
<h3 class="subsection">6.3.2 Значения цветов</h3>

<p>Числовые константы для атрибута <a href="#color">color</a>. Пожалуйста, пользуйтесь константой, подходящей для объекта, а не числами. Следует отметить, что объекты поддерживают атрибут color, только если он имеет отношение к их функционированию. Для цветов <a href="#st_005foxyd">st_oxyd</a> в целях совместимости с предыдущими версиями игры используется другая схема перечисления (см. раздел <a href="#oxyd-colors">Цвета оксидов</a>).
</p>
<ul>
<li> &lsquo;<samp>BLACK</samp>&rsquo; = <code>0</code>, все объекты, которые могут быть чёрными/белыми
</li><li> &lsquo;<samp>WHITE</samp>&rsquo; = <code>1</code>, все объекты, которые могут быть чёрными/белыми
</li><li> &lsquo;<samp>BLUE</samp>&rsquo; = <code>2</code>, <a href="#st_005fpuzzle">st_puzzle</a>
</li><li> &lsquo;<samp>YELLOW</samp>&rsquo; = <code>3</code>, <a href="#st_005fpuzzle">st_puzzle</a>
</li><li> &lsquo;<samp>NOCOLOR</samp>&rsquo; = <code>nil</code>, некоторые объекты, которые могут быть и чёрными, и белыми, например <a href="#st_005fswitch">st_switch</a>
</li></ul>

<hr size="6">
<a name="actor-controllers"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#color-values" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#oxyd-colors" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Constants" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="actor-controllers-1"></a>
<h3 class="subsection">6.3.3 Управление актёром (controllers)</h3>

<p>Числовые константы для атрибута актёров <a href="#controllers">controllers</a>. Пожалуйста, пользуйтесь константой, подходящей для объекта, а не числами.
</p>
<ul>
<li> &lsquo;<samp>CTRL_NONE</samp>&rsquo; = <code>0</code>, все актёры
</li><li> &lsquo;<samp>CTRL_YIN</samp>&rsquo; = <code>1</code>, все актёры
</li><li> &lsquo;<samp>CTRL_YANG</samp>&rsquo; = <code>2</code>,все актёры
</li><li> &lsquo;<samp>CTRL_YINYANG</samp>&rsquo; = <code>3</code>, все актёры
</li></ul>

<hr size="6">
<a name="oxyd-colors"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#actor-controllers" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#orientations" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Constants" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="oxyd-colors-1"></a>
<h3 class="subsection">6.3.4 Цвета оксидов</h3>

<p>Числовые константы для атрибута оксидов (<a href="#st_005foxyd">st_oxyd</a>) &lsquo;<samp>oxydcolor</samp>&rsquo;. Пожалуйста, пользуйтесь константой, подходящей для объекта, а не числами.
</p>
<ul>
<li> &lsquo;<samp>OXYD_BLUE</samp>&rsquo; = <code>0</code>, <a href="#st_005foxyd">st_oxyd</a>
</li><li> &lsquo;<samp>OXYD_RED</samp>&rsquo; = <code>1</code>, <a href="#st_005foxyd">st_oxyd</a>
</li><li> &lsquo;<samp>OXYD_GREEN</samp>&rsquo; = <code>2</code>, <a href="#st_005foxyd">st_oxyd</a>
</li><li> &lsquo;<samp>OXYD_YELLOW</samp>&rsquo; = <code>3</code>, <a href="#st_005foxyd">st_oxyd</a>
</li><li> &lsquo;<samp>OXYD_CYAN</samp>&rsquo; = <code>4</code>, <a href="#st_005foxyd">st_oxyd</a>
</li><li> &lsquo;<samp>OXYD_PURPLE</samp>&rsquo; = <code>5</code>, <a href="#st_005foxyd">st_oxyd</a>
</li><li> &lsquo;<samp>OXYD_WHITE</samp>&rsquo; = <code>6</code>, <a href="#st_005foxyd">st_oxyd</a>
</li><li> &lsquo;<samp>OXYD_BLACK</samp>&rsquo; = <code>7</code>, <a href="#st_005foxyd">st_oxyd</a>
</li><li> &lsquo;<samp>OXYD_GRAY</samp>&rsquo; = <code>8</code>, <a href="#st_005foxyd">st_oxyd</a>
</li><li> &lsquo;<samp>OXYD_ORANGE</samp>&rsquo; = <code>9</code>, <a href="#st_005foxyd">st_oxyd</a>
</li><li> &lsquo;<samp>OXYD_PINE</samp>&rsquo; = <code>10</code>, <a href="#st_005foxyd">st_oxyd</a>
</li><li> &lsquo;<samp>OXYD_BROWN</samp>&rsquo; = <code>11</code>, <a href="#st_005foxyd">st_oxyd</a>
</li><li> &lsquo;<samp>OXYD_AUTO</samp>&rsquo; = <code>-1</code>, <a href="#st_005foxyd">st_oxyd</a>
</li><li> &lsquo;<samp>OXYD_FAKE</samp>&rsquo; = <code>-2</code>, <a href="#st_005foxyd">st_oxyd</a>
</li><li> &lsquo;<samp>OXYD_QUAKE</samp>&rsquo; = <code>-3</code>, <a href="#st_005foxyd">st_oxyd</a>
</li><li> &lsquo;<samp>OXYD_BOLD</samp>&rsquo; = <code>-4</code>, <a href="#st_005foxyd">st_oxyd</a>
</li></ul>


<hr size="6">
<a name="orientations"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#oxyd-colors" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#direction-offsets" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Constants" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="orientations-1"></a>
<h3 class="subsection">6.3.5 Положения (orientation)</h3>

<p>Числовые константы для атрибутов &lsquo;<samp>orientation</samp>&rsquo; или &lsquo;<samp>slope</samp>&rsquo;. Пожалуйста, пользуйтесь константой, подходящей для объекта, а не числами.
</p>
<ul>
<li> &lsquo;<samp>RANDOMDIR</samp>&rsquo; = <code>-2</code>, <a href="#st_005fmirror">st_mirror</a>
</li><li> &lsquo;<samp>NODIR</samp>&rsquo; = <code>-1</code>, <a href="#fl_005fslope">fl_slope</a>
</li><li> &lsquo;<samp>WEST</samp>&rsquo; = <code>0</code>, все объекты с 4 положениями
</li><li> &lsquo;<samp>SOUTH</samp>&rsquo; = <code>1</code>, все объекты с 4 положениями
</li><li> &lsquo;<samp>EAST</samp>&rsquo; = <code>2</code>, все объекты с 4 положениями
</li><li> &lsquo;<samp>NORTH</samp>&rsquo; = <code>3</code>, все объекты с 4 положениями
</li><li> &lsquo;<samp>NORTHWEST</samp>&rsquo; = <code>4</code>, все объекты с 8 положениями
</li><li> &lsquo;<samp>SOUTHWEST</samp>&rsquo; = <code>5</code>, все объекты с 8 положениями
</li><li> &lsquo;<samp>SOUTHEAST</samp>&rsquo; = <code>6</code>, все объекты с 8 положениями
</li><li> &lsquo;<samp>NORTHEAST</samp>&rsquo; = <code>7</code>, все объекты с 8 положениями
</li></ul>

<p>Исключительно для <a href="#st_005fmirror">st_mirror</a> существует альтернативная запись положения:
</p>
<ul>
<li> &lsquo;<samp>BACKSLASH</samp>&rsquo; = <code>0</code>, <a href="#st_005fmirror">st_mirror</a>
</li><li> &lsquo;<samp>HORIZONTAL</samp>&rsquo; = <code>1</code>, <a href="#st_005fmirror">st_mirror</a>
</li><li> &lsquo;<samp>SLASH</samp>&rsquo; = <code>2</code>, <a href="#st_005fmirror">st_mirror</a>
</li><li> &lsquo;<samp>VERTICAL</samp>&rsquo; = <code>3</code>, <a href="#st_005fmirror">st_mirror</a>
</li></ul>

<hr size="6">
<a name="direction-offsets"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#orientations" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#position-lists" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Constants" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="direction-offsets-1"></a>
<h3 class="subsection">6.3.6 Смещения направления</h3>

<p>Константы положения как векторное смещение направления. Пожалуйста, пользуйтесь константой, подходящей для вычислений, а не обычными значениями положения.
</p>
<ul>
<li> &lsquo;<samp>N</samp>&rsquo; = <code>po(0, -1)</code>
</li><li> &lsquo;<samp>E</samp>&rsquo; = <code>po(1, 0)</code>
</li><li> &lsquo;<samp>S</samp>&rsquo; = <code>po(0, 1)</code>
</li><li> &lsquo;<samp>W</samp>&rsquo; = <code>po(-1, 0)</code>
</li><li> &lsquo;<samp>NE</samp>&rsquo; = <code>N + E</code>
</li><li> &lsquo;<samp>NW</samp>&rsquo; = <code>N + W</code>
</li><li> &lsquo;<samp>SE</samp>&rsquo; = <code>S + E</code>
</li><li> &lsquo;<samp>SW</samp>&rsquo; = <code>S + W</code>
</li><li> &lsquo;<samp>NNE</samp>&rsquo; = <code>N + NE</code>, <a href="#st_005fchess">st_chess</a>
</li><li> &lsquo;<samp>ENE</samp>&rsquo; = <code>E + NE</code>, <a href="#st_005fchess">st_chess</a>
</li><li> &lsquo;<samp>ESE</samp>&rsquo; = <code>E + SE</code>, <a href="#st_005fchess">st_chess</a>
</li><li> &lsquo;<samp>SSE</samp>&rsquo; = <code>S + SE</code>, <a href="#st_005fchess">st_chess</a>
</li><li> &lsquo;<samp>SSW</samp>&rsquo; = <code>S + SW</code>, <a href="#st_005fchess">st_chess</a>
</li><li> &lsquo;<samp>SSW</samp>&rsquo; = <code>S + SW</code>, <a href="#st_005fchess">st_chess</a>
</li><li> &lsquo;<samp>WNW</samp>&rsquo; = <code>W + NW</code>, <a href="#st_005fchess">st_chess</a>
</li><li> &lsquo;<samp>NNW</samp>&rsquo; = <code>N + NW</code>, <a href="#st_005fchess">st_chess</a>
</li></ul>

<hr size="6">
<a name="position-lists"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#direction-offsets" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#essentialness" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Constants" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="position-lists-1"></a>
<h3 class="subsection">6.3.7 Списки положений</h3>

<p>Константы списка положений. Пожалуйста, пользуйтесь константой подходящей для вычислений, а не обычными значениями списков положений.
</p>
<ul>
<li> &lsquo;<samp>NEIGHBORS_4</samp>&rsquo; = <code>W .. S .. E .. N</code>
</li><li> &lsquo;<samp>NEIGHBORS_8</samp>&rsquo; = <code>NEIGHBORS_4 .. NW .. SW ..SE .. NE</code>
</li><li> &lsquo;<samp>NEIGHBORS_CHESS</samp>&rsquo; = <code>NNE .. ENE .. ESE .. SSE .. SSW .. WSW .. WNW .. NNW</code>
</li></ul>

<hr size="6">
<a name="essentialness"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#position-lists" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#meditation-types" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Constants" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="essentialness-1"></a>
<h3 class="subsection">6.3.8 Важность</h3>

<p>Числовые константы для атрибута <a href="#essential">essential</a>. Пожалуйста, пользуйтесь константой подходящей для объекта, а не числами.
</p>
<ul>
<li> &lsquo;<samp>DISPENSABLE</samp>&rsquo; = <code>0</code>, все актёры и <a href="#it_005fmeditation">it_meditation</a>
</li><li> &lsquo;<samp>INDISPENSABLE</samp>&rsquo; = <code>1</code>, все актёры и <a href="#it_005fmeditation">it_meditation</a>
</li><li> &lsquo;<samp>PERKIND</samp>&rsquo; = <code>2</code>, все актёры
</li></ul>

<hr size="6">
<a name="meditation-types"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#essentialness" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#glasses-abilities" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Constants" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="meditation-types-1"></a>
<h3 class="subsection">6.3.9 Типы медитации</h3>

<p>Числовые константы для атрибута <a href="#state">state</a> объекта <a href="#it_005fmeditation">it_meditation</a>. Пожалуйста, пользуйтесь константой, подходящей для объекта, а не числами.
</p>
<ul>
<li> &lsquo;<samp>MEDITATION_CALDERA</samp>&rsquo; = <code>-3</code>, <a href="#it_005fmeditation">it_meditation</a>
</li><li> &lsquo;<samp>MEDITATION_HOLLOW</samp>&rsquo; = <code>-2</code>, <a href="#it_005fmeditation">it_meditation</a>
</li><li> &lsquo;<samp>MEDITATION_DENT</samp>&rsquo; = <code>-1</code>, <a href="#it_005fmeditation">it_meditation</a>
</li><li> &lsquo;<samp>MEDITATION_BUMP</samp>&rsquo; = <code>1</code>, <a href="#it_005fmeditation">it_meditation</a>
</li><li> &lsquo;<samp>MEDITATION_HILL</samp>&rsquo; = <code>2</code>, <a href="#it_005fmeditation">it_meditation</a>
</li><li> &lsquo;<samp>MEDITATION_VOLCANO</samp>&rsquo; = <code>3</code>, <a href="#it_005fmeditation">it_meditation</a>
</li></ul>

<hr size="6">
<a name="glasses-abilities"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#meditation-types" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#coinslot-acceptance" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Constants" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="glasses-abilities-1"></a>
<h3 class="subsection">6.3.10 Возможности очков</h3>

<p>Числовые константы для атрибута <a href="#state">state</a> объекта <a href="#it_005fglasses">it_glasses</a> и глобальной переменной <a href="#ExtralifeGlasses">ExtralifeGlasses</a>. Пожалуйста, пользуйтесь суммами констант, которые подходят к очкам, а не их числовыми значениями.
</p>
<ul>
<li> &lsquo;<samp>SPOT_NOTHING</samp>&rsquo; = <code>0</code>, <a href="#it_005fglasses">it_glasses</a>
</li><li> &lsquo;<samp>SPOT_DEATH</samp>&rsquo; = <code>1</code>, <a href="#it_005fglasses">it_glasses</a>
</li><li> &lsquo;<samp>SPOT_HOLLOW</samp>&rsquo; = <code>2</code>, <a href="#it_005fglasses">it_glasses</a>
</li><li> &lsquo;<samp>SPOT_ACTORIMPULSE</samp>&rsquo; = <code>4</code>, <a href="#it_005fglasses">it_glasses</a>
</li><li> &lsquo;<samp>SPOT_SENSOR</samp>&rsquo; = <code>8</code>, <a href="#it_005fglasses">it_glasses</a>
</li><li> &lsquo;<samp>SPOT_LIGHTPASSENGER</samp>&rsquo; = <code>16</code>, <a href="#it_005fglasses">it_glasses</a>
</li><li> &lsquo;<samp>SPOT_TRAP</samp>&rsquo; = <code>32</code>, <a href="#it_005fglasses">it_glasses</a>
</li></ul>

<hr size="6">
<a name="coinslot-acceptance"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#glasses-abilities" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#rubberband-length" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Constants" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="coinslot-acceptance-1"></a>
<h3 class="subsection">6.3.11 Приём монет</h3>

<p>Числовые константы для атрибутов <a href="#st_005fcoinslot">st_coinslot</a>, которые начинаются с &lsquo;<samp>interval_*</samp>&rsquo;. Пожалуйста, пользуйтесь константой, которая подходит к банкомату, а не её числовым значением.
</p>
<ul>
<li> &lsquo;<samp>COIN_IGNORE</samp>&rsquo; = <code>-1</code>, <a href="#st_005fcoinslot">st_coinslot</a>
</li><li> &lsquo;<samp>COIN_REJECT</samp>&rsquo; = <code>-2</code>, <a href="#st_005fcoinslot">st_coinslot</a>
</li></ul>

<hr size="6">
<a name="rubberband-length"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#coinslot-acceptance" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#subsoil-kind" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Constants" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="rubberband-length-1"></a>
<h3 class="subsection">6.3.12 Длина резиновой ленты</h3>

<p>Числовая константа для атрибута &lsquo;<samp>length</samp>&rsquo; объектов <a href="#it_005frubberband">it_rubberband</a>, <a href="#st_005frubberband">st_rubberband</a> и <a href="#ot_005frubberband">ot_rubberband</a>. Пожалуйста, пользуйтесь константой, соответствующей длине ленты, а не её числовым значением.
</p>
<ul>
<li> &lsquo;<samp>AUTOLENGTH</samp>&rsquo; = <code>-1</code>, поддерживается <a href="#it_005frubberband">it_rubberband</a>, <a href="#st_005frubberband">st_rubberband</a> и <a href="#ot_005frubberband">ot_rubberband</a>
</li></ul>

<hr size="6">
<a name="subsoil-kind"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#rubberband-length" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#screen-scrolling" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Constants" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="subsoil-kind-1"></a>
<h3 class="subsection">6.3.13 Тип подпочвы</h3>

<p>Числовые константы глобального атрибута <a href="#SubSoil">SubSoil</a>. Пожалуйста, пользуйтесь константой, соответствующей необходимому типу подпочвы, а не её числовым значением.
</p>
<ul>
<li> &lsquo;<samp>SUBSOIL_ABYSS</samp>&rsquo; = <code>0</code>, <a href="#it_005fexplosion">it_explosion</a>
</li><li> &lsquo;<samp>SUBSOIL_WATER</samp>&rsquo; = <code>1</code>, <a href="#it_005fexplosion">it_explosion</a>
</li><li> &lsquo;<samp>SUBSOIL_AUTO</samp>&rsquo; = <code>2</code>, <a href="#it_005fexplosion">it_explosion</a>
</li></ul>

<hr size="6">
<a name="screen-scrolling"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#subsoil-kind" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#map-read-directions" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Constants" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="screen-scrolling-1"></a>
<h3 class="subsection">6.3.14 Прокрутка изображения</h3>

<p>Константы для глобальных атрибутов прокрутки изображения <a href="#FollowMethod">FollowMethod</a> и <a href="#FollowAction">FollowAction</a>. Пожалуйста, пользуйтесь константами, подходящими для метода прокрутки изображения, а не числовыми или позиционными значениями.
</p>
<ul>
<li> &lsquo;<samp>FOLLOW_NO</samp>&rsquo; = <code>0</code>, глобальный атрибут <a href="#FollowMethod">FollowMethod</a>
</li><li> &lsquo;<samp>FOLLOW_SCROLL</samp>&rsquo; = <code>1</code>, глобальный атрибут  <a href="#FollowMethod">FollowMethod</a>
</li><li> &lsquo;<samp>FOLLOW_FLIP</samp>&rsquo; = <code>2</code>, глобальный атрибут  <a href="#FollowMethod">FollowMethod</a>
</li></ul>

<ul>
<li> &lsquo;<samp>FOLLOW_FULLSCREEN</samp>&rsquo; = <code>po(19, 12)</code>, глобальный атрибут <a href="#FollowAction">FollowAction</a>
</li><li> &lsquo;<samp>FOLLOW_HALFSCREEN</samp>&rsquo; = <code>po(9.5, 6)</code>, глобальный атрибут  <a href="#FollowAction">FollowAction</a>
</li></ul>

<hr size="6">
<a name="map-read-directions"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#screen-scrolling" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Global-Attributes" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Constants" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="map-read-directions-1"></a>
<h3 class="subsection">6.3.15 Направления чтения карты</h3>

<p>Константы для направлений чтения карты (см. раздел <a href="#drawMap">drawMap</a>) и преобразований карты (см. разделы <a href="#Rotating-and-Mirroring-Maps">Вращение и отражение карт</a> и <a href="#Map-Transformation">Преобразование карты</a>). Это не числа, что позволяет использовать дополнительные операции над ними, предоставляемые после загрузки libmap (см. раздел <a href="#Map-Transformation-Composition-and-Powers">Произведение и возведение в степень преобразований карт</a>).
</p>
<ul>
<li> &lsquo;<samp>MAP_IDENT</samp>&rsquo; = без преобразования
</li><li> &lsquo;<samp>MAP_ROT_CW</samp>&rsquo; = поворот карты на 90 градусов по часовой стрелке
</li><li> &lsquo;<samp>MAP_ROT_180</samp>&rsquo; = поворот карты на 180 градусов
</li><li> &lsquo;<samp>MAP_ROT_CCW</samp>&rsquo; = поворот карты на 90 градусов против часовой стрелки
</li><li> &lsquo;<samp>MAP_FLIP_BACKSLASH</samp>&rsquo; = поменять местами верхний левый и нижний правый углы
</li><li> &lsquo;<samp>MAP_FLIP_HORIZONTAL</samp>&rsquo; = поменять местами правый и левый края
</li><li> &lsquo;<samp>MAP_FLIP_SLASH</samp>&rsquo; = поменять местами верхний правый и нижний левый углы
</li><li> &lsquo;<samp>MAP_FLIP_VERTICAL</samp>&rsquo; = поменять местами верх и низ
</li></ul>

<p>Поскольку преобразования карты не являются числами, их нельзя сохранять как атрибуты объектов. Вместо этого используйте &lsquo;<samp>index</samp>&rsquo; и &lsquo;<samp>MAP_ALL</samp>&rsquo; (см. раздел <a href="#Map-Transformation-Index-and-MAP_005fALL">Индекс преобразования карты и MAP_ALL</a>).
</p>
<hr size="6">
<a name="Global-Attributes"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#map-read-directions" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#ActorimpulseStrength" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Global-Attributes-1"></a>
<h2 class="section">6.4 Глобальные атрибуты</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#ActorimpulseStrength">6.4.1 ActorimpulseStrength</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#AllowSingleOxyds">6.4.2 AllowSingleOxyds</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#AllowSuicide">6.4.3 AllowSuicide</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#AutoRespawn">6.4.4 AutoRespawn</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#ConserveLevel">6.4.5 ConserveLevel</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#CrackSpreading">6.4.6 CrackSpreading</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#CreatingPreview">6.4.7 CreatingPreview</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#ElectricStrength">6.4.8 ElectricStrength</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#ExtralifeGlasses">6.4.9 ExtralifeGlasses</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#FallenPuzzle">6.4.10 FallenPuzzle</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#FollowAction">6.4.11 FollowAction</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#FollowGrid">6.4.12 FollowGrid</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#FollowMethod">6.4.13 FollowMethod</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#FollowThreshold">6.4.14 FollowThreshold</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Fragility">6.4.15 Fragility</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#FrictionStrength">6.4.16 FrictionStrength</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#GlobalForce">6.4.17 GlobalForce</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Height">6.4.18 Height</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#InfiniteReincarnation">6.4.19 InfiniteReincarnation</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#IsDifficult">6.4.20 IsDifficult</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#MagnetRange">6.4.21 MagnetRange</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#MagnetStrength">6.4.22 MagnetStrength</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#MaxOxydColor">6.4.23 MaxOxydColor</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#MeditationStrength">6.4.24 MeditationStrength</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#ProvideExtralifes">6.4.25 ProvideExtralifes</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#RubberViolationStrength">6.4.26 RubberViolationStrength</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#ShowMoves">6.4.27 ShowMoves</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SlopeStrength">6.4.28 SlopeStrength</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SublevelNumber">6.4.29 SublevelNumber</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SublevelTitle">6.4.30 SublevelTitle</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SubSoil">6.4.31 SubSoil</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SurviveFinish">6.4.32 SurviveFinish</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#SwampSinkTime">6.4.33 SwampSinkTime</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#WaterSinkTime">6.4.34 WaterSinkTime</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Width">6.4.35 Width</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#WormholeRange">6.4.36 WormholeRange</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#WormholeStrength">6.4.37 WormholeStrength</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="ActorimpulseStrength"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Global-Attributes" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#AllowSingleOxyds" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Global-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="ActorimpulseStrength-1"></a>
<h3 class="subsection">6.4.1 ActorimpulseStrength</h3>

<p>Глобальный скалярный множитель по умолчанию, определяющий силу удара для камня-амортизатора. Эта глобальная величина используется, только если не была указана величина для конкретного объекта.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;number</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;число с плавающей запятой</dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>+200.0</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;<a href="#st_005factorimpulse">st_actorimpulse</a></dt>
</dl>

<hr size="6">
<a name="AllowSingleOxyds"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#ActorimpulseStrength" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#AllowSuicide" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Global-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="AllowSingleOxyds-1"></a>
<h3 class="subsection">6.4.2 AllowSingleOxyds</h3>

<p>Глобальная переменная, которая делает возможным существование на уровне одиночных непарных камней <a href="#st_005foxyd">st_oxyd</a>. Значение <code>true</code> позволяет создавать нечётное количество оксидов одного цвета. Если в процессе игры на уровне происходит удаление либо добавление оксидов, значение <code>true</code> позволяет избежать возможных проблем, вызванных временным нечётным количеством оксидов. Если по умолчанию для атрибута установлено значение <code>false</code>, то при обнаружении на уровне нечётного количества оксидов выдаётся сообщение об ошибке.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;bool</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;<code>true</code>, <code>false</code></dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>false</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;<a href="#st_005foxyd">st_oxyd</a></dt>
</dl>

<hr size="6">
<a name="AllowSuicide"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#AllowSingleOxyds" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#AutoRespawn" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Global-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="AllowSuicide-1"></a>
<h3 class="subsection">6.4.3 AllowSuicide</h3>

<p>Глобальная переменная, которая позволяет пользователю уничтожить всех принадлежащих ему актёров нажатием клавиши &lsquo;<samp>F3</samp>&rsquo;. Поскольку эта унаследованная возможность может привести к использованию более простых методов решения уровня, её можно запретить. Самоубийство отдельного актёра, вызванное использованием ложки (<a href="#it_005fspoon">it_spoon</a>), не зависит от значения этой глобальной переменной.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;bool</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;<code>true</code>, <code>false</code></dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>true</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;не поддерживается объектами</dt>
</dl>

<hr size="6">
<a name="AutoRespawn"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#AllowSuicide" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#ConserveLevel" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Global-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="AutoRespawn-1"></a>
<h3 class="subsection">6.4.4 AutoRespawn</h3>

<p>Глобальная переменная, определяющая, необходимо ли в случае смерти актёра и его последующего воскрешения в отсутствии объекта <a href="#it_005fflag">it_flag</a> использовать последнюю зафиксированную безопасную позицию вместо стартовой позиции. 
</p>
<p>Использовать зафиксированную позицию восстановления целесообразно для типичных сценариев смерти актёра (утопление в <a href="#fl_005fwater">fl_water</a>, падение в <a href="#fl_005fabyss">fl_abyss</a>, соприкосновение с <a href="#st_005fdeath">st_death</a>, падение с  <a href="#it_005fstrip">it_strip</a>, поражение <a href="#it_005flaserbeam">it_laserbeam</a>). Даже если актёр прыгнет на один из этих участков, он будет восстановлен в том месте, откуда он начал свой прыжок. Актёр не рискует быть воскрешённым на участке покрытия, не имеющем атрибута <a href="#adhesion-_0028floor_0029">adhesion (покрытие)</a>.
</p>
<p>Использование объекта <a href="#it_005fflag">it_flag</a> в сочетании с переменной AutoRespawn полностью поддерживается. Если флаг положить на покрытие, то местоположение флага будет являться действительной точкой восстановления, пока флаг не подберут. Если флаг подобрать, определяемая им позиция будет удалена, а позиция AutoRespawn активируется до тех пор, пока флаг снова не окажется на покрытии.
</p>
<p>Смерти, вызванные столкновениями актёров, объектом <a href="#it_005fcrack">it_crack</a> и повреждениями покрытия в результате взрывов, могут привести к летальным позициям AutoRespawn. В таких случаях следует избегать установки для переменной AutoRespawn значения <code>true</code> или предусматривать объект <a href="#it_005fflag">it_flag</a>.
</p>
<p>Возникновение непредусмотренных решений уровня в результате использования переменной AutoRespawn маловероятно, но теоретически возможно.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;bool</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;<code>true</code>, <code>false</code></dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>false</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;<a href="#ac_005fmarble">ac_marble</a>, <a href="#ac_005fpearl">ac_pearl</a></dt>
</dl>

<hr size="6">
<a name="ConserveLevel"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#AutoRespawn" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#CrackSpreading" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Global-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="ConserveLevel-1"></a>
<h3 class="subsection">6.4.5 ConserveLevel</h3>

<p>Глобальная переменная, которая определяет, будет ли погибший актёр воскрешён, если у игрока в инвентаре есть объект <a href="#it_005fextralife">it_extralife</a>.
</p>
<p>Если атрибуту задано значение <code>true</code>, погибшие актёры, которыми управляет игрок, будут воскрешаться, пока у игрока имеются дополнительные жизни. Если у игрока не осталось актёров, которыми он мог бы управлять, или нарушаются базовые ограничения (см. раздел <a href="#essential">essential</a>), накладываемые на актёров &mdash; он проиграл. Уровень всё ещё может продолжаться, если жив второй актёр. Если у игрока в однопользовательском режиме в инвентаре имеется объект <a href="#it_005fyinyang">it_yinyang</a>, управление передаётся другому игроку. Если погибли все актёры, игра начинается заново.
</p>
<p>Если для режима сохранения игры установлено значение <code>false</code>, актёры не воскрешаются. Как только игрок погибает и управление не может перейти к другому игроку, все погибшие актёры воскрешаются с помощью находящихся в инвентаре дополнительных жизней и уровень, не завершившись, начинается заново.
</p>
<p>Используйте значение <code>false</code>, если при воскрешении актёров уровень становится нерешаемым либо если воскрешение актёров может предоставить игроку &quot;короткий путь&quot; для решения уровня. Во всех остальных случаях предпочтителен режим <code>true</code> в сочетании с базовыми ограничениями (см. раздел <a href="#essential">essential</a>), накладываемыми на актёров.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;bool</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;<code>true</code>, <code>false</code></dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>true</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;не поддерживается объектами</dt>
</dl>

<hr size="6">
<a name="CrackSpreading"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#ConserveLevel" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#CreatingPreview" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Global-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="CrackSpreading-1"></a>
<h3 class="subsection">6.4.6 CrackSpreading</h3>

<p>Глобальная величина по умолчанию, которая выражает степень вероятности того, что наличие трещины (<a href="#it_005fcrack">it_crack</a>) на участке покрытия приведёт к тому, что на соседних участках решётки появятся невидимые трещины либо имеющиеся невидимые трещины станут видимыми. При значении <code>1.0</code> вероятность этого является стопроцентной, значение <code>0.0</code> не даёт трещинам распространяться на соседние участки. Обратите внимание, что даже в случае запрета на распространение трещин соседние участки с уже имеющимися трещинами могут продолжать разрушаться из-за атрибута <a href="#Fragility">Fragility</a> (подробнее см. раздел <a href="#it_005fcrack">it_crack</a>).
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;number</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;число с плавающей запятой от <code>0.0</code> до <code>1.0</code></dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>0.5</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;<a href="#it_005fcrack">it_crack</a></dt>
</dl>

<hr size="6">
<a name="CreatingPreview"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#CrackSpreading" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#ElectricStrength" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Global-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="CreatingPreview-1"></a>
<h3 class="subsection">6.4.7 CreatingPreview</h3>

<p>Глобальная переменная, доступная только для чтения, которая указывает, предназначена ли текущая загрузка уровня только для создания его эскиза либо собственно для игры. Если значение атрибута &lsquo;<samp>true</samp>&rsquo;, то можно, к примеру, изменить начальную позицию главного актёра, чтобы на эскизе отображалась другая часть уровня, либо спрятать объекты. Если вы изменяете первоначальную позицию, то может быть целесообразно также изменить способ прокрутки изображения на постоянную плавную прокрутку (см. раздел <a href="#Display-Follow-Strategy">Способы прокрутки изображения</a>):
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">if wo[&quot;CreatingPreview&quot;] then
    wo[&quot;FollowGrid&quot;] = false
    wo[&quot;FollowMethod&quot;] = FOLLOW_SCROLL
end
</pre></td></tr></table>

<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;bool</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;<code>true</code>, <code>false</code></dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>false</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read only</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;независимо от объектов</dt>
</dl>

<hr size="6">
<a name="ElectricStrength"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#CreatingPreview" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#ExtralifeGlasses" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Global-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="ElectricStrength-1"></a>
<h3 class="subsection">6.4.8 ElectricStrength</h3>

<p>Глобальный скалярный множитель по умолчанию для электромагнитных сил. Положительные числа соответствуют силам притяжения для противоположных зарядов и силам отталкивания для одинаковых зарядов, отрицательные &mdash; силам отталкивания для противоположных зарядов и силам притяжения для одинаковых зарядов. Эта глобальная величина всегда умножается на заряд соответствующих актёров. Заряд актёра &mdash; это обычно результат столкновения этого актёра с камнем <a href="#st_005fcharge">st_charge</a>.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;number</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;число с плавающей запятой</dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>15.0</code></dt>
<dd><p>Положительные числа выражают силы притяжения, отрицательные &mdash; силы отталкивания.
</p></dd>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;<a href="#Actor-Objects">Актёры</a></dt>
</dl>

<hr size="6">
<a name="ExtralifeGlasses"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#ElectricStrength" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#FallenPuzzle" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Global-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="ExtralifeGlasses-1"></a>
<h3 class="subsection">6.4.9 ExtralifeGlasses</h3>

<p>Глобальная переменная, определяющая тип объекта <a href="#it_005fglasses">it_glasses</a>, который получается при трансформации объекта <a href="#it_005fextralife">it_extralife</a> лучом лазера.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;number</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;положительное целое число</dt>
<dd><p>Сумма констант &lsquo;<samp>SPOT_DEATH</samp>&rsquo;, &lsquo;<samp>SPOT_HOLLOW</samp>&rsquo;, &lsquo;<samp>SPOT_ACTORIMPULSE</samp>&rsquo;, &lsquo;<samp>SPOT_SENSOR</samp>&rsquo;, &lsquo;<samp>SPOT_LIGHTPASSENGER</samp>&rsquo;, &lsquo;<samp>SPOT_TRAP</samp>&rsquo;
</p></dd>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>SPOT_DEATH + SPOT_HOLLOW + SPOT_LIGHTPASSENGER</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;<a href="#it_005fextralife">it_extralife</a></dt>
</dl>

<hr size="6">
<a name="FallenPuzzle"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#ExtralifeGlasses" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#FollowAction" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Global-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="FallenPuzzle-1"></a>
<h3 class="subsection">6.4.10 FallenPuzzle</h3>

<p>Глобальный тип замещающего объекта для  камней <a href="#st_005fpuzzle">st_puzzle</a>, упавших в <a href="#fl_005fwater">fl_water</a> или <a href="#fl_005fabyss">fl_abyss</a>. Помимо любых типов покрытий с данной целью можно использовать любой код объявления участка покрытия с предшествующим знаком <code>'='</code>. Второй способ позволяет использовать типы покрытия со специальными значениями трения и сцепления.
</p>
<p>Кроме того, для глобального атрибута &lsquo;<samp>FallenPuzzle</samp>&rsquo; можно установить значение <code>&quot;it_pipe&quot;</code> или <code>&quot;it_stip&quot;</code>. В обоих случаях упавшие головоломки будут замещены объектами данного класса с разъёмами, идентичными разъёмам упавших камней. В случае, если на одном из затронутых участков решётки уже имеется объект данного класса, он модифицируется особым образом: существующий объект <code>&quot;it_pipe&quot;</code> остаётся неизменным, но к собственным соединениям объекта <code>&quot;it_stip&quot;</code> будут добавлены соединения упавшего камня-головоломки.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;string</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;любой тип покрытия, <code>&quot;it_strip&quot;</code>, <code>&quot;it_pipe&quot;</code> или <code>&quot;=key&quot;</code>, где &quot;key&quot; &mdash; действительный код участка покрытия.</dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>&quot;fl_gray&quot;</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;<a href="#st_005fpuzzle">st_puzzle</a></dt>
</dl>

<hr size="6">
<a name="FollowAction"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#FallenPuzzle" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#FollowGrid" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Global-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="FollowAction-1"></a>
<h3 class="subsection">6.4.11 FollowAction</h3>

<p>Глобальная переменная, которая описывает поведение изображения при перемещении. Данный атрибут вводится с учётом будущих расширений и в настоящее время поддерживается лишь частично. Используются только значения, которые указаны ниже. Пожалуйста, используйте данный атрибут в соответствии с разделом <a href="#Display-Follow-Strategy">Способы прокрутки изображения</a>.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;число или позиция</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;<code>0</code>, <code>FOLLOW_FULLSCREEN</code>, <code>HALFSCREEN</code></dt>
<dd><p>Расстояние, на которое перемещается изображение в игре. Для сообщения различных значений координат x и y используются позиции. Значение &lsquo;<samp>{19, 12}</samp>&rsquo; соответствует стандартному полноэкранному перемещению. Значение &lsquo;<samp>{9.5, 6}</samp>&rsquo; соответствует прокрутке половины экрана. Значением &lsquo;<samp>0</samp>&rsquo; задаётся минимальная плавная прокрутка либо значение по умолчанию для прокрутки, основанной на участках решётки.
</p></dd>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>{19, 12}</code></dt>
<dd><p>Значение по умолчанию может меняться в зависимости от режима прокрутки (см. раздел <a href="#Display-Follow-Strategy">Способы прокрутки изображения</a>).
</p></dd>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;не поддерживается объектами</dt>
</dl>


<hr size="6">
<a name="FollowGrid"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#FollowAction" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#FollowMethod" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Global-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="FollowGrid-1"></a>
<h3 class="subsection">6.4.12 FollowGrid</h3>

<p>Глобальная переменная, которая определяет, являются ли границы изображения статично зафиксированными на границах участков решётки либо для изображения доступна плавная прокрутка (см. раздел <a href="#Display-Follow-Strategy">Способы прокрутки изображения</a>).
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;bool</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;<code>true</code>, <code>false</code></dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>true</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;не поддерживается объектами</dt>
</dl>

<hr size="6">
<a name="FollowMethod"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#FollowGrid" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#FollowThreshold" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Global-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="FollowMethod-1"></a>
<h3 class="subsection">6.4.13 FollowMethod</h3>

<p>Глобальная переменная, которая описывает способ перемещения изображения: отсутствие перемещения (FOLLOW_NO), плавная прокрутка (FOLLOW_SCROLL) либо скачкообразное перемещение на другой экран или участок (FOLLOW_FLIP) (см. раздел <a href="#Display-Follow-Strategy">Способы прокрутки изображения</a>).
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;number</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;<code>FOLLOW_NO</code>, <code>FOLLOW_SCROLL</code>, <code>FOLLOW_FLIP</code></dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>FOLLOW_FLIP</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;не поддерживается объектами</dt>
</dl>

<hr size="6">
<a name="FollowThreshold"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#FollowMethod" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Fragility" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Global-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="FollowThreshold-1"></a>
<h3 class="subsection">6.4.14 FollowThreshold</h3>

<p>Глобальная переменная, которая описывает порог, при пересечении которого шарик заставляет изображение перемещаться. Её значение обозначает расстояние до границы экрана (см. раздел <a href="#Display-Follow-Strategy">Способы прокрутки изображения</a>).
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;число или позиция</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;0 или положительное число, а также два положительных числа</dt>
<dd><p>Расстояние до границы экрана, при котором происходит прокрутка изображения. Для сообщения различных значений координат x и y используются позиции. Все значения должны быть меньше половины экрана.
</p></dd>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>0.5</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;не поддерживается объектами</dt>
</dl>

<hr size="6">
<a name="Fragility"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#FollowThreshold" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#FrictionStrength" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Global-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Fragility-1"></a>
<h3 class="subsection">6.4.15 Fragility</h3>

<p>Глобальное значение по умолчанию, задающее вероятность того, что ломкий участок покрытия, то есть покрытие с расположенной на нём трещиной (<a href="#it_005fcrack">it_crack</a>), продолжит разрушаться при переходе на него актёра, прохождении актёра по трещине (<a href="#it_005fcrack">it_crack</a>) на соседнем участке покрытия, взрывах или пожаре поблизости. Значение <code>1.0</code> означает, что трещина при возникновении таких событий продолжит увеличиваться, а значение <code>0.0</code> запрещает трещинам увеличиваться. Значение по умолчанию перекрывается заданными значениями <a href="#fragility-_0028floor_0029">fragility (floor)</a> и <a href="#it_005fcrack">it_crack</a>.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;number</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;число с плавающей запятой от <code>0.0</code> до <code>1.0</code></dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>1.0</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;<a href="#it_005fcrack">it_crack</a> и <a href="#Floor-Objects">Покрытия</a></dt>
</dl>

<hr size="6">
<a name="FrictionStrength"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Fragility" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#GlobalForce" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Global-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="FrictionStrength-1"></a>
<h3 class="subsection">6.4.16 FrictionStrength</h3>

<p>Глобальный скалярный множитель по умолчанию для силы трения покрытий. При определении силы трения, воздействующей на актёров, эта величина всегда умножается на значение силы трения для конкретного покрытия.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;number</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;число с плавающей запятой</dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>1.0</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;всеми типами покрытий</dt>
</dl>

<hr size="6">
<a name="GlobalForce"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#FrictionStrength" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Height" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Global-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="GlobalForce-1"></a>
<h3 class="subsection">6.4.17 GlobalForce</h3>

<p>Глобальная постоянная сила, которая действует на каждого актёра на каждом участке решётки. Сила задана векторной константой со значением типа <a href="#Position">Позиция</a>.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;<a href="#Position">Позиция</a></dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;пара чисел с плавающей запятой</dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>po(0.0, 0.0)</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;всеми типами покрытий</dt>
</dl>

<hr size="6">
<a name="Height"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#GlobalForce" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#InfiniteReincarnation" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Global-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Height-1"></a>
<h3 class="subsection">6.4.18 Height</h3>

<p>Глобальная переменная, доступная только для чтения, которая указывает высоту мира в участках решётки. Она задаётся первоначальным вызовом конструктора мира (см. раздел <a href="#World-Creation">Создание мира</a>).
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;number</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;положительное целое число</dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>?</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read only</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;независимо от объектов</dt>
</dl>

<hr size="6">
<a name="InfiniteReincarnation"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Height" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#IsDifficult" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Global-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="InfiniteReincarnation-1"></a>
<h3 class="subsection">6.4.19 InfiniteReincarnation</h3>

<p>Глобальная переменная, которая отключает расход <a href="#it_005fextralife">it_extralife</a> на воскрешение мёртвого актёра. Обычно игра ведёт учёт дополнительных жизней, их количество задано явно или в ключевых местах размещаются автоматы, торгующие жизнями (<a href="#st_005fdispenser">st_dispenser</a>). Основное назначение этого флага &mdash; использование в упрощённом режиме для очень опасных уровней, которое позволит игроку потренироваться в прохождении сложных мест. Этот флаг не следует использовать в обычном режиме сложности.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;bool</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;<code>true</code>, <code>false</code></dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>false</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;независимо от объектов</dt>
</dl>

<hr size="6">
<a name="IsDifficult"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#InfiniteReincarnation" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#MagnetRange" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Global-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="IsDifficult-1"></a>
<h3 class="subsection">6.4.20 IsDifficult</h3>

<p>Глобальная переменная, доступная только для чтения, которая определяет текущий режим сложности, выбранный игроком. Все различия между простым и сложным режимами в рамках одного уровня должны быть добавлены в уровень исключительно на основании значения этого флага. Если уровень поддерживает простой режим, автор должен объявить это в XML-заголовке уровня в элементе <a href="#g_t_003cmodes_003e">&lt;modes&gt;</a>.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;bool</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;<code>true</code>, <code>false</code></dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>true</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read only</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;независимо от объектов</dt>
</dl>

<hr size="6">
<a name="MagnetRange"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#IsDifficult" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#MagnetStrength" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Global-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="MagnetRange-1"></a>
<h3 class="subsection">6.4.21 MagnetRange</h3>

<p>Общее для всего уровня расстояние по умолчанию, на котором магниты воздействуют на актёров. Эта глобальная величина используется, только если не была указана величина для конкретного объекта.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;number</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;положительное число с плавающей запятой или ноль</dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>10.0</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;<a href="#it_005fmagnet">it_magnet</a></dt>
</dl>

<hr size="6">
<a name="MagnetStrength"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#MagnetRange" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#MaxOxydColor" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Global-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="MagnetStrength-1"></a>
<h3 class="subsection">6.4.22 MagnetStrength</h3>

<p>Глобальный скалярный множитель по умолчанию для магнитных сил. Положительные числа выражают силы притяжения, отрицательные &mdash; силы отталкивания. Эта глобальная величина используется, только если не была указана величина для конкретного объекта.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;number</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;число с плавающей запятой</dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>30.0</code></dt>
<dd><p>Положительные числа выражают силы притяжения, отрицательные &mdash; силы отталкивания.
</p></dd>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;<a href="#it_005fmagnet">it_magnet</a></dt>
</dl>

<hr size="6">
<a name="MaxOxydColor"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#MagnetStrength" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#MeditationStrength" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Global-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="MaxOxydColor-1"></a>
<h3 class="subsection">6.4.23 MaxOxydColor</h3>

<p>Глобальная переменная, ограничивающая количество цветов, в которые автоматически окрашиваются камни <a href="#st_005foxyd">st_oxyd</a>. Будьте внимательны, увеличивая значение данного атрибута.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;number</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;<code>OXYD_BLUE</code>, ... <code>OXYD_BROWN</code></dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>OXYD_BLACK</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;<a href="#st_005foxyd">st_oxyd</a></dt>
</dl>

<hr size="6">
<a name="MeditationStrength"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#MaxOxydColor" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#ProvideExtralifes" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Global-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="MeditationStrength-1"></a>
<h3 class="subsection">6.4.24 MeditationStrength</h3>

<p>Глобальная скалярная величина, задаваемая по умолчанию для сил, которые воздействуют на актёров, находящихся на объекте <a href="#it_005fmeditation">it_meditation</a>. Положительные числа выражают силы, направленные вниз по склону, которые позволяют актёрам скатываться в выбоины и отверстия либо с выступов и холмов.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;number</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;число с плавающей запятой</dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>1.0</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;<a href="#it_005fmeditation">it_meditation</a></dt>
</dl>

<hr size="6">
<a name="ProvideExtralifes"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#MeditationStrength" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#RubberViolationStrength" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Global-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="ProvideExtralifes-1"></a>
<h3 class="subsection">6.4.25 ProvideExtralifes</h3>

<p>Глобальная переменная, которая при запуске нового уровня добавляет два объекта <a href="#it_005fextralife">it_extralife</a> к инвентарям обоих игроков. Если игрок может злоупотребить этими объектами, установите в качестве её значения &lsquo;<samp>false</samp>&rsquo;. Значение данного атрибута необходимо задать перед созданием мира (см. раздел <a href="#World-Creation">Создание мира</a>).
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;bool</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;<code>true</code>, <code>false</code></dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>true</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;независимо от объектов</dt>
</dl>

<hr size="6">
<a name="RubberViolationStrength"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#ProvideExtralifes" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#ShowMoves" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Global-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="RubberViolationStrength-1"></a>
<h3 class="subsection">6.4.26 RubberViolationStrength</h3>

<p>Глобальный скалярный множитель по умолчанию, который определяет, с какой силой <a href="#ot_005frubberband">ot_rubberband</a> воздействует на актёров, если её длина становится больше либо меньше допустимой. Это может произойти в результате непредвиденных телепортаций актёров, воскрешения актёров, перемещения якорных камней либо создания новых лент недопустимой длины.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;number</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;положительное число с плавающей запятой</dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>50.0</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;<a href="#ot_005frubberband">ot_rubberband</a></dt>
</dl>

<hr size="6">
<a name="ShowMoves"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#RubberViolationStrength" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#SlopeStrength" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Global-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="ShowMoves-1"></a>
<h3 class="subsection">6.4.27 ShowMoves</h3>

<p>Глобальная переменная, которая включает и выключает счётчик толчков камней рядом со счётчиком времени. Она главным образом используется в уровнях типа &quot;Сокобан&quot;.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;bool</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;<code>true</code>, <code>false</code></dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>false</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;независимо от объектов</dt>
</dl>

<hr size="6">
<a name="SlopeStrength"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#ShowMoves" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#SublevelNumber" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Global-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="SlopeStrength-1"></a>
<h3 class="subsection">6.4.28 SlopeStrength</h3>

<p>Глобальный скалярный множитель по умолчанию для силы наклона покрытия <a href="#fl_005fslope">fl_slope</a>. Данное значение используется, если для конкретного участка покрытия не задана иная величина.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;number</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;число с плавающей запятой</dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>25.0</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;<a href="#fl_005fslope">fl_slope</a></dt>
</dl>

<hr size="6">
<a name="SublevelNumber"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SlopeStrength" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#SublevelTitle" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Global-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="SublevelNumber-1"></a>
<h3 class="subsection">6.4.29 SublevelNumber</h3>

<p>Глобальная переменная, используемая исключительно <a href="#Multilevel-Files">многоуровневыми файлами</a>. Она содержит количество подуровней для загрузки и игры. Переменная представляет собой число в диапазоне от <code>1</code> до значения &lsquo;<samp>quantity</samp>&rsquo;, заданного в <a href="#Info-metadata">информации о метаданных</a>.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;int</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;положительные целые числа</dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>1</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read only</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;не поддерживается объектами</dt>
</dl>

<hr size="6">
<a name="SublevelTitle"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SublevelNumber" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#SubSoil" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Global-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="SublevelTitle-1"></a>
<h3 class="subsection">6.4.30 SublevelTitle</h3>

<p>Глобальная переменная, используемая исключительно <a href="#Multilevel-Files">многоуровневыми файлами</a>. Если подуровень имеет собственное название, то при загрузке уровня для данной переменной в качестве значения должна быть установлена строка, содержащая это название. При пустом значении строки название генерируется автоматически на основе информации, содержащейся в элементе <a href="#g_t_003cidentity_003e">&lt;identity&gt;</a> и переменной <a href="#SublevelNumber">SublevelNumber</a>.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;string</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;любая строка</dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>&quot;&quot;</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;не поддерживается объектами</dt>
</dl>

<hr size="6">
<a name="SubSoil"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SublevelTitle" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#SurviveFinish" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Global-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="SubSoil-1"></a>
<h3 class="subsection">6.4.31 SubSoil</h3>

<p>Глобальная переменная, определяющая тип подпочвы, которая замещает покрытие при его разрушении. Объекты <a href="#it_005fbomb">it_bomb</a> и <a href="#ot_005fcannonball">ot_cannonball</a> генерируют объект <a href="#it_005fexplosion">it_explosion</a>_debris, который, в свою очередь, исчезает, оставляя после себя покрытие, соответствующее указанному типу подпочвы. При использовании значения <code>SUBSOIL_AUTO</code> тип покрытия определяется на основе типа окружающих покрытий. Если один из прилегающих участков покрытия имеет тип <a href="#fl_005fwater">fl_water</a>, то исчезнувшее покрытие также будет заменено водой. Во всех других случаях в качестве замены по умолчанию будет использовано покрытие <a href="#fl_005fabyss">fl_abyss</a>.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;int</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;<code>SUBSOIL_ABYSS</code>, <code>SUBSOIL_WATER</code>, <code>SUBSOIL_AUTO</code></dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>SUBSOIL_ABYSS</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;<a href="#it_005fexplosion">it_explosion</a></dt>
</dl>

<hr size="6">
<a name="SurviveFinish"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SubSoil" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#SwampSinkTime" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Global-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="SurviveFinish-1"></a>
<h3 class="subsection">6.4.32 SurviveFinish</h3>

<p>Глобальная переменная, которая определяет, необходимо ли ключевым актёрам дожить до завершения игры (см. раздел <a href="#Ending-Conditions">Условия завершения</a>). Если для атрибута установлено значение &lsquo;<samp>false</samp>&rsquo;, игрок может пожертвовать актёром, чтобы завершить уровень в некоторых особо сложных случаях.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;bool</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;<code>true</code>, <code>false</code></dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>true</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;независимо от объектов</dt>
</dl>

<hr size="6">
<a name="SwampSinkTime"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SurviveFinish" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#WaterSinkTime" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Global-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="SwampSinkTime-1"></a>
<h3 class="subsection">6.4.33 SwampSinkTime</h3>

<p>Глобальная величина по умолчанию, определяющая, какое время требуется неподвижному актёру, чтобы затонуть в болоте (<a href="#fl_005fswamp">fl_swamp</a>). Быстро передвигающимся актёрам требуется для этого несколько больше времени, чем неподвижным.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;number или <code>nil</code></dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;положительное число с плавающей запятой, 0 или <code>nil</code></dt>
<dd><p>Время в секундах или &lsquo;<samp>nil</samp>&rsquo; для обозначения бесконечного промежутка времени (актёры при этом вообще не тонут). Значения меньшие, чем примерно 0,7 мс, округляются до 0 мс.
</p></dd>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>1.75</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;<a href="#fl_005fswamp">fl_swamp</a></dt>
</dl>

<hr size="6">
<a name="WaterSinkTime"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SwampSinkTime" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Width" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Global-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="WaterSinkTime-1"></a>
<h3 class="subsection">6.4.34 WaterSinkTime</h3>

<p>Глобальная величина по умолчанию, определяющая, какое время требуется актёру, чтобы затонуть в воде (<a href="#fl_005fwater">fl_water</a>).
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;number или <code>nil</code></dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;положительное число с плавающей запятой, 0 или <code>nil</code></dt>
<dd><p>Время в секундах или &lsquo;<samp>nil</samp>&rsquo; для обозначения бесконечного промежутка времени (актёры при этом вообще не тонут). Значения меньшие, чем примерно 0,7 мс, округляются до 0 мс.
</p></dd>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>0.0</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;<a href="#fl_005fwater">fl_water</a></dt>
</dl>

<hr size="6">
<a name="Width"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#WaterSinkTime" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#WormholeRange" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Global-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Width-1"></a>
<h3 class="subsection">6.4.35 Width</h3>

<p>Глобальная переменная, доступная только для чтения, которая сообщает ширину мира в участках решётки. Она задаётся первоначальным вызовом конструктора мира (см. раздел <a href="#World-Creation">Создание мира</a>).
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;number</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;положительное целое число</dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>?</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read only</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;независимо от объектов</dt>
</dl>


<hr size="6">
<a name="WormholeRange"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Width" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#WormholeStrength" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Global-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="WormholeRange-1"></a>
<h3 class="subsection">6.4.36 WormholeRange</h3>

<p>Общее для всего уровня расстояние по умолчанию, на котором телепорты воздействуют на актёров. Эта заданная для всего уровня величина используется, только если не была указана величина для конкретного объекта.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;number</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;положительное число с плавающей запятой или ноль</dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>10.0</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;<a href="#it_005fwormhole">it_wormhole</a></dt>
</dl>

<hr size="6">
<a name="WormholeStrength"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#WormholeRange" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Floor-Objects" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Global-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="WormholeStrength-1"></a>
<h3 class="subsection">6.4.37 WormholeStrength</h3>

<p>Общий для всего уровня скалярный множитель по умолчанию для сил телепортации. Положительные числа выражают силы притяжения, отрицательные &mdash; силы отталкивания. Эта глобальная величина используется, только если не была указана величина для конкретного объекта.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;number</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;число с плавающей запятой</dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>30.0</code></dt>
<dd><p>Положительные числа выражают силы притяжения, отрицательные &mdash; силы отталкивания.
</p></dd>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;<a href="#it_005fwormhole">it_wormhole</a></dt>
</dl>


<hr size="6">
<a name="Floor-Objects"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#WormholeStrength" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Floor-Overview" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Common-Attributes-and-Messages" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Floor-Objects-1"></a>
<h1 class="chapter">7. Покрытия</h1>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Floor-Overview">7.1 Обзор покрытий</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Floor-Attributes">7.2 Атрибуты покрытий</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Standard-Floors">7.3 Стандартные покрытия</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Special-Floors">7.4 Особые покрытия</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Floor-Overview"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Floor-Attributes" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Floor-Overview-1"></a>
<h2 class="section">7.1 Обзор покрытий</h2>

<table>
<tr><td width="8%"><img src="images/fl_abyss.png" alt="images/fl_abyss"></td><td width="25%"><a href="#fl_005fabyss">fl_abyss</a></td><td width="8%"><img src="images/fl_adhesionless.png" alt="images/fl_adhesionless"></td><td width="25%"><a href="#fl_005fadhesionless">fl_adhesionless</a></td><td width="9%"><img src="images/fl_aquamarine.png" alt="images/fl_aquamarine"></td><td width="25%"><a href="#fl_005faquamarine">fl_aquamarine</a></td></tr>
<tr><td width="8%"><img src="images/fl_bast.png" alt="images/fl_bast"></td><td width="25%"><a href="#fl_005fbast">fl_bast</a></td><td width="8%"><img src="images/fl_bluegray.png" alt="images/fl_bluegray"></td><td width="25%"><a href="#fl_005fbluegray">fl_bluegray</a></td><td width="9%"><img src="images/fl_bluegreen.png" alt="images/fl_bluegreen"></td><td width="25%"><a href="#fl_005fbluegreen">fl_bluegreen</a></td></tr>
<tr><td width="8%"><img src="images/fl_blueslab.png" alt="images/fl_blueslab"></td><td width="25%"><a href="#fl_005fblueslab">fl_blueslab</a></td><td width="8%"><img src="images/fl_brick.png" alt="images/fl_brick"></td><td width="25%"><a href="#fl_005fbrick">fl_brick</a></td><td width="9%"><img src="images/fl_bridge_bw_closed.png" alt="images/fl_bridge_bw_closed"></td><td width="25%"><a href="#fl_005fbridge">fl_bridge</a>_bw</td></tr>
<tr><td width="8%"><img src="images/fl_bridge_gc_closed.png" alt="images/fl_bridge_gc_closed"></td><td width="25%"><a href="#fl_005fbridge">fl_bridge</a>_gc</td><td width="8%"><img src="images/fl_bright.png" alt="images/fl_bright"></td><td width="25%"><a href="#fl_005fbright">fl_bright</a></td><td width="9%"><img src="images/fl_concrete.png" alt="images/fl_concrete"></td><td width="25%"><a href="#fl_005fconcrete">fl_concrete</a></td></tr>
<tr><td width="8%"><img src="images/fl_darkgray.png" alt="images/fl_darkgray"></td><td width="25%"><a href="#fl_005fdarkgray">fl_darkgray</a></td><td width="8%"><img src="images/fl_dark.png" alt="images/fl_dark"></td><td width="25%"><a href="#fl_005fdark">fl_dark</a></td><td width="9%"><img src="images/fl_dunes.png" alt="images/fl_dunes"></td><td width="25%"><a href="#fl_005fdunes">fl_dunes</a></td></tr>
<tr><td width="8%"><img src="images/fl_fake_trigger.png" alt="images/fl_fake_trigger"></td><td width="25%"><a href="#fl_005ffake">fl_fake</a>_trigger</td><td width="8%"><img src="images/fl_gravel.png" alt="images/fl_gravel"></td><td width="25%"><a href="#fl_005fgravel">fl_gravel</a></td><td width="9%"><img src="images/fl_gray.png" alt="images/fl_gray"></td><td width="25%"><a href="#fl_005fgray">fl_gray</a></td></tr>
<tr><td width="8%"><img src="images/fl_hay.png" alt="images/fl_hay"></td><td width="25%"><a href="#fl_005fhay">fl_hay</a></td><td width="8%"><img src="images/fl_himalaya.png" alt="images/fl_himalaya"></td><td width="25%"><a href="#fl_005fhimalaya">fl_himalaya</a></td><td width="9%"><img src="images/fl_ice.png" alt="images/fl_ice"></td><td width="25%"><a href="#fl_005fice">fl_ice</a></td></tr>
<tr><td width="8%"><img src="images/fl_inverse_gray.png" alt="images/fl_inverse_gray"></td><td width="25%"><a href="#fl_005finverse">fl_inverse</a>_gray</td><td width="8%"><img src="images/fl_inverse_white.png" alt="images/fl_inverse_white"></td><td width="25%"><a href="#fl_005finverse">fl_inverse</a>_white</td><td width="9%"><img src="images/fl_ivory.png" alt="images/fl_ivory"></td><td width="25%"><a href="#fl_005fivory">fl_ivory</a></td></tr>
<tr><td width="8%"><img src="images/fl_lawn.png" alt="images/fl_lawn"></td><td width="25%"><a href="#fl_005flawn">fl_lawn</a></td><td width="8%"><img src="images/fl_marble.png" alt="images/fl_marble"></td><td width="25%"><a href="#fl_005fmarble">fl_marble</a></td><td width="9%"><img src="images/fl_metal.png" alt="images/fl_metal"></td><td width="25%"><a href="#fl_005fmetal">fl_metal</a></td></tr>
<tr><td width="8%"><img src="images/fl_mortar.png" alt="images/fl_mortar"></td><td width="25%"><a href="#fl_005fmortar">fl_mortar</a></td><td width="8%"><img src="images/fl_pinkbumps.png" alt="images/fl_pinkbumps"></td><td width="25%"><a href="#fl_005fpinkbumps">fl_pinkbumps</a></td><td width="9%"><img src="images/fl_plank.png" alt="images/fl_plank"></td><td width="25%"><a href="#fl_005fplank">fl_plank</a></td></tr>
<tr><td width="8%"><img src="images/fl_platinum.png" alt="images/fl_platinum"></td><td width="25%"><a href="#fl_005fplatinum">fl_platinum</a></td><td width="8%"><img src="images/fl_red.png" alt="images/fl_red"></td><td width="25%"><a href="#fl_005fred">fl_red</a></td><td width="9%"><img src="images/fl_redslab.png" alt="images/fl_redslab"></td><td width="25%"><a href="#fl_005fredslab">fl_redslab</a></td></tr>
<tr><td width="8%"><img src="images/fl_rock.png" alt="images/fl_rock"></td><td width="25%"><a href="#fl_005frock">fl_rock</a></td><td width="8%"><img src="images/fl_rough.png" alt="images/fl_rough"></td><td width="25%"><a href="#fl_005frough">fl_rough</a></td><td width="9%"><img src="images/fl_sahara.png" alt="images/fl_sahara"></td><td width="25%"><a href="#fl_005fsahara">fl_sahara</a></td></tr>
<tr><td width="8%"><img src="images/fl_samba.png" alt="images/fl_samba"></td><td width="25%"><a href="#fl_005fsamba">fl_samba</a></td><td width="8%"><img src="images/fl_sand.png" alt="images/fl_sand"></td><td width="25%"><a href="#fl_005fsand">fl_sand</a></td><td width="9%"><img src="images/fl_scales_brick.png" alt="images/fl_scales_brick"></td><td width="25%"><a href="#fl_005fscales">fl_scales</a>_brick</td></tr>
<tr><td width="8%"><img src="images/fl_scales_bridge_bw_closed.png" alt="images/fl_scales_bridge_bw_closed"></td><td width="25%"><a href="#fl_005fscales">fl_scales</a>_bridgewood</td><td width="8%"><img src="images/fl_scales_concrete.png" alt="images/fl_scales_concrete"></td><td width="25%"><a href="#fl_005fscales">fl_scales</a>_concrete</td><td width="9%"><img src="images/fl_scales_darkgray.png" alt="images/fl_scales_darkgray"></td><td width="25%"><a href="#fl_005fscales">fl_scales</a>_darkgray</td></tr>
<tr><td width="8%"><img src="images/fl_scales_gray.png" alt="images/fl_scales_gray"></td><td width="25%"><a href="#fl_005fscales">fl_scales</a>_gray</td><td width="8%"><img src="images/fl_scales_platinum.png" alt="images/fl_scales_platinum"></td><td width="25%"><a href="#fl_005fscales">fl_scales</a>_platinum</td><td width="9%"><img src="images/fl_slope_f.png" alt="images/fl_slope_f"></td><td width="25%"><a href="#fl_005fslope">fl_slope</a></td></tr>
<tr><td width="8%"><img src="images/fl_slope.png" alt="images/fl_slope"></td><td width="25%"><a href="#fl_005fslope">fl_slope</a>_ps</td><td width="8%"><img src="images/fl_slope_c.png" alt="images/fl_slope_c"></td><td width="25%"><a href="#fl_005fslope">fl_slope</a>_ise</td><td width="9%"><img src="images/fl_slope_b.png" alt="images/fl_slope_b"></td><td width="25%"><a href="#fl_005fslope">fl_slope</a>_ose</td></tr>
<tr><td width="8%"><img src="images/fl_space.png" alt="images/fl_space"></td><td width="25%"><a href="#fl_005fspace">fl_space</a></td><td width="8%"><img src="images/fl_stone.png" alt="images/fl_stone"></td><td width="25%"><a href="#fl_005fstone">fl_stone</a></td><td width="9%"><img src="images/fl_swamp.png" alt="images/fl_swamp"></td><td width="25%"><a href="#fl_005fswamp">fl_swamp</a></td></tr>
<tr><td width="8%"><img src="images/fl_thief.png" alt="images/fl_thief"></td><td width="25%"><a href="#fl_005fthief">fl_thief</a></td><td width="8%"><img src="images/fl_thief_capture.png" alt="images/fl_thief_capture"></td><td width="25%"><a href="#fl_005fthief">fl_thief</a></td><td width="9%"><img src="images/fl_thief_drunken.png" alt="images/fl_thief_drunken"></td><td width="25%"><a href="#fl_005fthief">fl_thief</a></td></tr>
<tr><td width="8%"><img src="images/fl_tigris.png" alt="images/fl_tigris"></td><td width="25%"><a href="#fl_005ftigris">fl_tigris</a></td><td width="8%"><img src="images/fl_water.png" alt="images/fl_water"></td><td width="25%"><a href="#fl_005fwater">fl_water</a></td><td width="9%"><img src="images/fl_white.png" alt="images/fl_white"></td><td width="25%"><a href="#fl_005fwhite">fl_white</a></td></tr>
<tr><td width="8%"><img src="images/fl_wood.png" alt="images/fl_wood"></td><td width="25%"><a href="#fl_005fwood">fl_wood</a></td><td width="8%"><img src="images/fl_woven.png" alt="images/fl_woven"></td><td width="25%"><a href="#fl_005fwoven">fl_woven</a></td><td width="9%"><img src="images/fl_yinyang_yang.png" alt="images/fl_yinyang_yang"></td><td width="25%"><a href="#fl_005fyinyang">fl_yinyang</a>_yang</td></tr>
<tr><td width="8%"><img src="images/fl_yinyang_yin.png" alt="images/fl_yinyang_yin"></td><td width="25%"><a href="#fl_005fyinyang">fl_yinyang</a>_yin</td></tr>
</table>

<hr size="6">
<a name="Floor-Attributes"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Floor-Overview" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#adhesion-_0028floor_0029" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Floor-Attributes-1"></a>
<h2 class="section">7.2 Атрибуты покрытий</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#adhesion-_0028floor_0029">7.2.1 adhesion (покрытие)</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        Эффективность движений мыши
</td></tr>
<tr><td align="left" valign="top"><a href="#burnable">7.2.2 burnable</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                -
</td></tr>
<tr><td align="left" valign="top"><a href="#eternal">7.2.3 eternal</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                 -
</td></tr>
<tr><td align="left" valign="top"><a href="#faces-_0028floor_0029">7.2.4 faces (покрытие)</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Настройка каймы покрытия
</td></tr>
<tr><td align="left" valign="top"><a href="#fastfire">7.2.5 fastfire</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                -
</td></tr>
<tr><td align="left" valign="top"><a href="#floodable">7.2.6 floodable</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">               Способность к затоплению
</td></tr>
<tr><td align="left" valign="top"><a href="#force_005fx">7.2.7 force_x</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                 Постоянная сила
</td></tr>
<tr><td align="left" valign="top"><a href="#force_005fy">7.2.8 force_y</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                 Постоянная сила
</td></tr>
<tr><td align="left" valign="top"><a href="#fragility-_0028floor_0029">7.2.9 fragility (покрытие)</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       Трещины
</td></tr>
<tr><td align="left" valign="top"><a href="#freeze_005fcheck-_0028floor_0029">7.2.10 freeze_check (покрытие)</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">    Проверка тупика
</td></tr>
<tr><td align="left" valign="top"><a href="#friction-_0028floor_0029">7.2.11 friction (покрытие)</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        Коэффициент замедления для силы трения
</td></tr>
<tr><td align="left" valign="top"><a href="#ignitable">7.2.12 ignitable</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">               -
</td></tr>
<tr><td align="left" valign="top"><a href="#indestructible">7.2.13 indestructible</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Системный флаг, сигнализирующий об устойчивости к разрушению
</td></tr>
<tr><td align="left" valign="top"><a href="#initfire">7.2.14 initfire</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                -
</td></tr>
<tr><td align="left" valign="top"><a href="#noash">7.2.15 noash</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                   -
</td></tr>
<tr><td align="left" valign="top"><a href="#push_005fdirections">7.2.16 push_directions</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         Подсказка для камней-головоломок
</td></tr>
<tr><td align="left" valign="top"><a href="#secure">7.2.17 secure</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                  -
</td></tr>
<tr><td align="left" valign="top"><a href="#texture">7.2.18 texture</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                 Текстура графических изображений
</td></tr>
</table>


<hr size="6">
<a name="adhesion-_0028floor_0029"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Floor-Attributes" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#burnable" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="adhesion-_0028floor_0029-1"></a>
<h3 class="subsection">7.2.1 adhesion (покрытие)</h3>

<p>Определяет чувствительность актёра к перемещениям мыши  и представляет собой скалярный множитель силы ускорения, прилагаемой к актёру. Обратите внимание, что актёры, в свою очередь, имеют собственный скалярный множитель <a href="#adhesion-_0028actor_0029">adhesion (актёры)</a>. Сила трения также может принимать отрицательные значения. Данные значения соответствуют обратным силам.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;number</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;число с плавающей запятой</dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>0.0</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
</dl>

<hr size="6">
<a name="burnable"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#adhesion-_0028floor_0029" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#eternal" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="burnable-1"></a>
<h3 class="subsection">7.2.2 burnable</h3>

<p>Определяет, загорается ли покрытие в случае, если рядом присутствует огонь и находящийся на покрытии предмет допускает горение  (подробнее см. в разделе <a href="#Fire-Spreading">Распространение огня</a>).
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;boolean</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;<code>false</code>, <code>true</code></dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>false</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
</dl>

<hr size="6">
<a name="eternal"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#burnable" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#faces-_0028floor_0029" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="eternal-1"></a>
<h3 class="subsection">7.2.3 eternal</h3>

<p>Определяет, продолжает ли огонь гореть неограниченное время, пока его не потушит внешнее воздействие  (подробнее см. в разделе <a href="#Fire-Spreading">Распространение огня</a>).
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;boolean</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;<code>false</code>, <code>true</code></dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>false</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
</dl>

<hr size="6">
<a name="faces-_0028floor_0029"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#eternal" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fastfire" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="faces-_0028floor_0029-1"></a>
<h3 class="subsection">7.2.4 faces (покрытие)</h3>

<p>Определяет, имеет ли участок покрытия кайму. 
</p>
<p>В настоящее время покрытия могут или не иметь каймы, или быть окаймлёнными со всех четырёх сторон. Для большинства типов покрытий доступ к данному атрибуту и его изменение осуществить нельзя.  Для создания разновидности покрытия, окаймлённой со всех четырёх сторон, добавьте к имени покрытия суффикс <code>&quot;_framed&quot;</code>.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;string или nil</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;<code>nil</code>, <code>&quot;nesw&quot;</code></dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>nil</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;отсутствует &mdash; за некоторыми исключениями.</dt>
</dl>

<hr size="6">
<a name="fastfire"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#faces-_0028floor_0029" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#floodable" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fastfire-1"></a>
<h3 class="subsection">7.2.5 fastfire</h3>

<p>При установлении для данного атрибута значения <code>true</code> огонь будет распространяться быстрее обычного, с той же скоростью, как если бы на покрытии находился объект <a href="#it_005fburnable">it_burnable</a>[_oil] (подробнее см. в разделе <a href="#Fire-Spreading">Распространение огня</a>).
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;boolean</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;<code>false</code>, <code>true</code></dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>false</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
</dl>

<hr size="6">
<a name="floodable"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fastfire" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#force_005fx" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="floodable-1"></a>
<h3 class="subsection">7.2.6 floodable</h3>

<p>Определяет, может ли покрытие быть затоплено <a href="#fl_005fwater">fl_water</a> с соседнего участка (подробнее см. в разделе <a href="#Flood-Spreading">Распространение воды</a>).
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;boolean</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;<code>false</code>, <code>true</code></dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>false</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
</dl>

<hr size="6">
<a name="force_005fx"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#floodable" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#force_005fy" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="force_005fx-1"></a>
<h3 class="subsection">7.2.7 force_x</h3>

<p>Постоянная, характерная только для покрытий, сила, направленная в восточном направлении и воздействующая в дополнение ко всем остальным силам на всех актёров, находящихся на покрытии.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;number</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;число с плавающей запятой</dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>0.0</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
</dl>

<hr size="6">
<a name="force_005fy"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#force_005fx" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fragility-_0028floor_0029" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="force_005fy-1"></a>
<h3 class="subsection">7.2.8 force_y</h3>

<p>Постоянная, характерная только для покрытий, сила, направленная в южном направлении и воздействующая в дополнение ко всем остальным силам на всех актёров, находящихся на покрытии.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;number</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;число с плавающей запятой</dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>0.0</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
</dl>

<hr size="6">
<a name="fragility-_0028floor_0029"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#force_005fy" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#freeze_005fcheck-_0028floor_0029" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fragility-_0028floor_0029-1"></a>
<h3 class="subsection">7.2.9 fragility (покрытие)</h3>

<p>Значение, задающее вероятность того, что ломкий участок покрытия, то есть покрытие с расположенной на нём трещиной (<a href="#it_005fcrack">it_crack</a>), продолжит разрушаться при переходе на него актёра, прохождении актёра через соседние трещины (<a href="#it_005fcrack">it_crack</a>), взрывах или пожаре поблизости. Значение <code>1.0</code> означает, что трещина при возникновении таких событий продолжит увеличиваться, а значение <code>0.0</code> запрещает трещинам увеличиваться. По умолчанию данное значение определяется атрибутом <a href="#Fragility">Fragility</a>, приоритетом над значением данного атрибута обладают значения, установленные для объектов <a href="#it_005fcrack">it_crack</a>.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;number</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;числа с плавающей запятой от <code>0.0</code> до <code>1.0</code></dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>1.0</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
</dl>

<hr size="6">
<a name="freeze_005fcheck-_0028floor_0029"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fragility-_0028floor_0029" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#friction-_0028floor_0029" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="freeze_005fcheck-_0028floor_0029-1"></a>
<h3 class="subsection">7.2.10 freeze_check (покрытие)</h3>

<p>Если для атрибута установлено значение <code>true</code>, то для данного участка покрытия осуществляется <a href="#Freeze-Checking">проверка тупика</a>. Обратите внимание, что проверка тупика работает только для подвижных камней, для которых дополнительно установлено значение <code>freeze_check = true</code> (см. раздел <a href="#freeze_005fcheck-_0028stone_0029">freeze_check (камень)</a>).
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;boolean</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;<code>false</code>, <code>true</code></dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>false</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
</dl>

<hr size="6">
<a name="friction-_0028floor_0029"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#freeze_005fcheck-_0028floor_0029" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#ignitable" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="friction-_0028floor_0029-1"></a>
<h3 class="subsection">7.2.11 friction (покрытие)</h3>

<p>См. раздел <a href="#friction">friction</a>.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;number</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;число с плавающей запятой</dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>0.0</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
</dl>

<hr size="6">
<a name="ignitable"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#friction-_0028floor_0029" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#indestructible" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="ignitable-1"></a>
<h3 class="subsection">7.2.12 ignitable</h3>

<p>Если для данного атрибута установлено значение <code>true</code> и предмет, находящийся на покрытии, допускает горение, то покрытие загорается при взрывах на близлежащих участках (подробнее см. в разделе <a href="#Fire-Spreading">Распространение огня</a>).
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;boolean</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;<code>false</code>, <code>true</code></dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>false</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
</dl>

<hr size="6">
<a name="indestructible"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#ignitable" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#initfire" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="indestructible-1"></a>
<h3 class="subsection">7.2.13 indestructible</h3>

<p>Большинство покрытий  под воздействием взрывов, огня, ударов <a href="#ot_005fcannonball">ot_cannonball</a>, влияния <a href="#it_005fcrack">it_crack</a>, <a href="#it_005ftrap">it_trap</a> и&nbsp;т.&nbsp;д. превращаются в <a href="#fl_005fabyss">fl_abyss</a> или <a href="#fl_005fwater">fl_water</a>. Но некоторые, например <a href="#fl_005fabyss">fl_abyss</a>, <a href="#fl_005fwater">fl_water</a> и <a href="#fl_005fswamp">fl_swamp</a>, не могут быть разрушены этими событиями.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;boolean</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;<code>false</code>, <code>true</code></dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>false</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;отсутствует</dt>
</dl>

<hr size="6">
<a name="initfire"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#indestructible" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#noash" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="initfire-1"></a>
<h3 class="subsection">7.2.14 initfire</h3>

<p>Если для данного атрибута установлено значение <code>true</code>, то после инициализации уровня покрытие начнёт гореть (подробнее см. в разделе <a href="#Fire-Spreading">Распространение огня</a>).
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;boolean</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;<code>false</code>, <code>true</code></dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>false</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
</dl>

<hr size="6">
<a name="noash"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#initfire" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#push_005fdirections" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="noash-1"></a>
<h3 class="subsection">7.2.15 noash</h3>

<p>Определяет, остаётся ли на покрытии <a href="#it_005fburnable">it_burnable</a>_ash после того, как огонь будет потушен. Зола предотвращает повторное возгорание покрытия, следовательно, значение <code>noash = true</code> позволит покрытию загореться ещё раз, кроме случаев, когда на нём присутствуют предметы, не способные гореть, либо ему не позволяет загореться значение атрибута <code>burnable</code> (подробнее см. в разделе <a href="#Fire-Spreading">Распространение огня</a>).
</p>
<p><a href="#fl_005fabyss">fl_abyss</a> является единственным покрытием, для которого по умолчанию установлено значение <code>noash = true</code> , поскольку зола проваливается в пропасть. Однако обратите внимание, что покрытие <a href="#fl_005fabyss">fl_abyss</a> по умолчанию негорючее.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;boolean</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;<code>false</code>, <code>true</code></dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>false</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
</dl>

<hr size="6">
<a name="push_005fdirections"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#noash" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#secure" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="push_005fdirections-1"></a>
<h3 class="subsection">7.2.16 push_directions</h3>

<p>Атрибут подсказывает преобразованию <a href="#res_002epuzzle">res.puzzle</a>, каким образом следует перемешивать камни-головоломки. Если для покрытия установлен данный атрибут, то прилегающий ряд или колонку камней-головоломок пользователь гарантированно сможет ротировать в заданных направлениях. 
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;string или nil</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;<code>nil</code>, <code>&quot;nesw&quot;</code></dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>nil</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
</dl>

<hr size="6">
<a name="secure"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#push_005fdirections" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#texture" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="secure-1"></a>
<h3 class="subsection">7.2.17 secure</h3>

<p>Гарантирует, что горящий рядом огонь рано или поздно зажжёт данный участок покрытия (подробнее см. в разделе <a href="#Fire-Spreading">Распространение огня</a>).
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;boolean</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;<code>false</code>, <code>true</code></dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>false</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
</dl>

<hr size="6">
<a name="texture"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#secure" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Standard-Floors" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="texture-1"></a>
<h3 class="subsection">7.2.18 texture</h3>

<p>Многие покрытие имеют несколько текстур &mdash; разновидностей графических представлений, не влияющих на физический движок. Большинство покрытий по умолчанию выбирают случайную текстуру. Это позволяет создавать области без непредусмотренных оптических эффектов. Но для некоторых типов покрытий можно выбирать текстуры, указав нужную разновидность, что позволяет создавать необходимую графическую планировку уровня. 
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;целое число или string</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;целое число или string</dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>1</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;в настоящий момент отсутствует &mdash; только путём явного указания разновидности для некоторых покрытий.</dt>
</dl>

<hr size="6">
<a name="Standard-Floors"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#texture" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fl_005fadhesionless" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Standard-Floors-1"></a>
<h2 class="section">7.3 Стандартные покрытия</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#fl_005fadhesionless">7.3.1 fl_adhesionless</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">   Покрытие, не имеющее сцепления, но обладающее трением
</td></tr>
<tr><td align="left" valign="top"><a href="#fl_005faquamarine">7.3.2 fl_aquamarine</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">     Аквамариновое покрытие с низкой силой трения
</td></tr>
<tr><td align="left" valign="top"><a href="#fl_005fbast">7.3.3 fl_bast</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Плетёное коричневое покрытие на чёрном фоне
</td></tr>
<tr><td align="left" valign="top"><a href="#fl_005fbluegray">7.3.4 fl_bluegray</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       Светлое серо-голубое покрытие
</td></tr>
<tr><td align="left" valign="top"><a href="#fl_005fbluegreen">7.3.5 fl_bluegreen</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">      Тёмное сине-зелёное покрытие
</td></tr>
<tr><td align="left" valign="top"><a href="#fl_005fblueslab">7.3.6 fl_blueslab</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       Тёмно-синяя мраморная плита
</td></tr>
<tr><td align="left" valign="top"><a href="#fl_005fbrick">7.3.7 fl_brick</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Покрытие, состоящее из маленьких красных кирпичей
</td></tr>
<tr><td align="left" valign="top"><a href="#fl_005fbright">7.3.8 fl_bright</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         Почти белое покрытие
</td></tr>
<tr><td align="left" valign="top"><a href="#fl_005fconcrete">7.3.9 fl_concrete</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       Гранулированное серое бетонное покрытие
</td></tr>
<tr><td align="left" valign="top"><a href="#fl_005fdark">7.3.10 fl_dark</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Почти чёрное покрытие
</td></tr>
<tr><td align="left" valign="top"><a href="#fl_005fdarkgray">7.3.11 fl_darkgray</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       Холодное серое покрытие
</td></tr>
<tr><td align="left" valign="top"><a href="#fl_005fdunes">7.3.12 fl_dunes</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Коричневые гранулированые дюны
</td></tr>
<tr><td align="left" valign="top"><a href="#fl_005fgravel">7.3.13 fl_gravel</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         Тёмно-серое гранулированное покрытие
</td></tr>
<tr><td align="left" valign="top"><a href="#fl_005fgray">7.3.14 fl_gray</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Серое покрытие с коричневыми пятнами
</td></tr>
<tr><td align="left" valign="top"><a href="#fl_005fhimalaya">7.3.15 fl_himalaya</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       Покрытие из сине-пурпурного мрамора
</td></tr>
<tr><td align="left" valign="top"><a href="#fl_005fivory">7.3.16 fl_ivory</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Тёмное перламутровое покрытие
</td></tr>
<tr><td align="left" valign="top"><a href="#fl_005flawn">7.3.17 fl_lawn</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Травяное покрытие, имеющее несколько текстур
</td></tr>
<tr><td align="left" valign="top"><a href="#fl_005fmarble">7.3.18 fl_marble</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         Светлый красно-коричневый мрамор
</td></tr>
<tr><td align="left" valign="top"><a href="#fl_005fmetal">7.3.19 fl_metal</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Металлическое покрытие, имеющее несколько текстур
</td></tr>
<tr><td align="left" valign="top"><a href="#fl_005fmortar">7.3.20 fl_mortar</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         Шероховатое белое покрытие с серыми прожилками
</td></tr>
<tr><td align="left" valign="top"><a href="#fl_005fpinkbumps">7.3.21 fl_pinkbumps</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">      Розовое покрытие с белыми выступами
</td></tr>
<tr><td align="left" valign="top"><a href="#fl_005fplank">7.3.22 fl_plank</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Небольшие диагональные планки
</td></tr>
<tr><td align="left" valign="top"><a href="#fl_005fplatinum">7.3.23 fl_platinum</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       Тёплое светло-серое покрытие
</td></tr>
<tr><td align="left" valign="top"><a href="#fl_005fred">7.3.24 fl_red</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Тёплое красное покрытие с низким трением
</td></tr>
<tr><td align="left" valign="top"><a href="#fl_005fredslab">7.3.25 fl_redslab</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        Тёмно-красная мраморная плита
</td></tr>
<tr><td align="left" valign="top"><a href="#fl_005frough">7.3.26 fl_rough</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Шероховатое тёплое белое покрытие
</td></tr>
<tr><td align="left" valign="top"><a href="#fl_005fsahara">7.3.27 fl_sahara</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         Покрытие из ярко-жёлтого песчаника
</td></tr>
<tr><td align="left" valign="top"><a href="#fl_005fsamba">7.3.28 fl_samba</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Обесцвеченное серое деревянное покрытие
</td></tr>
<tr><td align="left" valign="top"><a href="#fl_005fsand">7.3.29 fl_sand</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Гранулированное оранжево-серое песчаное покрытие
</td></tr>
<tr><td align="left" valign="top"><a href="#fl_005fspace">7.3.30 fl_space</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Чёрный космос с несколькими мерцающими звёздами
</td></tr>
<tr><td align="left" valign="top"><a href="#fl_005fstone">7.3.31 fl_stone</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Гранулированное коричнево-серое покрытие
</td></tr>
<tr><td align="left" valign="top"><a href="#fl_005ftigris">7.3.32 fl_tigris</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         Покрытие из красного песчаника
</td></tr>
<tr><td align="left" valign="top"><a href="#fl_005fwhite">7.3.33 fl_white</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Белоснежное покрытие
</td></tr>
<tr><td align="left" valign="top"><a href="#fl_005fwoven">7.3.34 fl_woven</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Плетёное чёрно-белое покрытие
</td></tr>
</table>
<hr size="6">
<a name="fl_005fadhesionless"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Standard-Floors" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fl_005faquamarine" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Floors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fl_005fadhesionless-1"></a>
<h3 class="subsection">7.3.1 fl_adhesionless</h3>
<a name="index-fl_005fadhesionless"></a>

<p>Бархатное оранжевое покрытие, не обладающее силой сцепления, но обладающее силой трения.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>adhesion</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 0.0 &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>friction</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 2.5 &nbsp;&nbsp;См. раздел <a href="#friction">friction</a></dt>
<dt> <b>burnable</b>, &nbsp;&nbsp;<i>значения</i>: boolean; &nbsp;&nbsp;<i>по умолчанию</i>: true &nbsp;&nbsp;См. раздел <a href="#burnable">burnable</a></dt>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/fl_adhesionless.png" alt="images/fl_adhesionless"><p> <b>fl_adhesionless</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="fl_005faquamarine"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fl_005fadhesionless" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fl_005fbast" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Floors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fl_005faquamarine-1"></a>
<h3 class="subsection">7.3.2 fl_aquamarine</h3>
<a name="index-fl_005faquamarine"></a>

<p>Аквамариновое покрытие с низкой силой трения
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>adhesion</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 1.0 &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>friction</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 0.4 &nbsp;&nbsp;См. раздел <a href="#friction">friction</a></dt>
<dt> <b>burnable</b>, &nbsp;&nbsp;<i>значения</i>: boolean; &nbsp;&nbsp;<i>по умолчанию</i>: true &nbsp;&nbsp;См. раздел <a href="#burnable">burnable</a></dt>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/fl_aquamarine.png" alt="images/fl_aquamarine"><p> <b>fl_aquamarine</b>
</p></dt>
<dt> <img src="images/fl_aquamarine_framed.png" alt="images/fl_aquamarine_framed"><p> <b>fl_aquamarine_framed</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="fl_005fbast"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fl_005faquamarine" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fl_005fbluegray" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Floors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fl_005fbast-1"></a>
<h3 class="subsection">7.3.3 fl_bast</h3>
<a name="index-fl_005fbast"></a>

<p>Плетёное коричневое покрытие на чёрном фоне
</p>
<p>При горении <code>fl_bast</code> превращается в <a href="#fl_005fabyss">fl_abyss</a>.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>adhesion</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 2.5 &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>friction</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 1.5 &nbsp;&nbsp;См. раздел <a href="#friction">friction</a></dt>
<dt> <b>burnable</b>, &nbsp;&nbsp;<i>значения</i>: boolean; &nbsp;&nbsp;<i>по умолчанию</i>: true &nbsp;&nbsp;См. раздел <a href="#burnable">burnable</a></dt>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/fl_bast.png" alt="images/fl_bast"><p> <b>fl_bast</b>
</p></dt>
<dt> <img src="images/fl_bast_framed.png" alt="images/fl_bast_framed"><p> <b>fl_bast_framed</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="fl_005fbluegray"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fl_005fbast" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fl_005fbluegreen" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Floors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fl_005fbluegray-1"></a>
<h3 class="subsection">7.3.4 fl_bluegray</h3>
<a name="index-fl_005fbluegray"></a>

<p>Светлое серо-голубое покрытие, на вид неотличимое от <a href="#fl_005fthief">fl_thief</a>.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>adhesion</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 1.5 &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>friction</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 4.5 &nbsp;&nbsp;См. раздел <a href="#friction">friction</a></dt>
<dt> <b>burnable</b>, &nbsp;&nbsp;<i>значения</i>: boolean; &nbsp;&nbsp;<i>по умолчанию</i>: true &nbsp;&nbsp;См. раздел <a href="#burnable">burnable</a></dt>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/fl_bluegray.png" alt="images/fl_bluegray"><p> <b>fl_bluegray</b>
</p></dt>
<dt> <img src="images/fl_bluegray_framed.png" alt="images/fl_bluegray_framed"><p> <b>fl_bluegray_framed</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="fl_005fbluegreen"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fl_005fbluegray" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fl_005fblueslab" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Floors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fl_005fbluegreen-1"></a>
<h3 class="subsection">7.3.5 fl_bluegreen</h3>
<a name="index-fl_005fbluegreen"></a>

<p>Тёмное сине-зелёное покрытие
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>adhesion</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 2.0 &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>friction</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 6.0 &nbsp;&nbsp;См. раздел <a href="#friction">friction</a></dt>
<dt> <b>burnable</b>, &nbsp;&nbsp;<i>значения</i>: boolean; &nbsp;&nbsp;<i>по умолчанию</i>: true &nbsp;&nbsp;См. раздел <a href="#burnable">burnable</a></dt>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/fl_bluegreen.png" alt="images/fl_bluegreen"><p> <b>fl_bluegreen</b>
</p></dt>
<dt> <img src="images/fl_bluegreen_framed.png" alt="images/fl_bluegreen_framed"><p> <b>fl_bluegreen_framed</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="fl_005fblueslab"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fl_005fbluegreen" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fl_005fbrick" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Floors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fl_005fblueslab-1"></a>
<h3 class="subsection">7.3.6 fl_blueslab</h3>
<a name="index-fl_005fblueslab"></a>

<p>Тёмно-синяя мраморная плита с чёрными прожилками. С данным покрытием гармонирует покрытие <a href="#fl_005fredslab">fl_redslab</a>.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>adhesion</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 2.0 &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>friction</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 7.0 &nbsp;&nbsp;См. раздел <a href="#friction">friction</a></dt>
<dt> <b>burnable</b>, &nbsp;&nbsp;<i>значения</i>: boolean; &nbsp;&nbsp;<i>по умолчанию</i>: true &nbsp;&nbsp;См. раздел <a href="#burnable">burnable</a></dt>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/fl_blueslab.png" alt="images/fl_blueslab"><p> <b>fl_blueslab</b>
</p></dt>
<dt> <img src="images/fl_blueslab_framed.png" alt="images/fl_blueslab_framed"><p> <b>fl_blueslab_framed</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="fl_005fbrick"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fl_005fblueslab" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fl_005fbright" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Floors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fl_005fbrick-1"></a>
<h3 class="subsection">7.3.7 fl_brick</h3>
<a name="index-fl_005fbrick"></a>

<p>Покрытие, состоящее из маленьких красных кирпичей.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>adhesion</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 2.0 &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>friction</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 3.5 &nbsp;&nbsp;См. раздел <a href="#friction">friction</a></dt>
<dt> <b>burnable</b>, &nbsp;&nbsp;<i>значения</i>: boolean; &nbsp;&nbsp;<i>по умолчанию</i>: false&nbsp;&nbsp;См. раздел <a href="#burnable">burnable</a></dt>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/fl_brick.png" alt="images/fl_brick"><p> <b>fl_brick</b>
</p></dt>
<dt> <img src="images/fl_brick_framed.png" alt="images/fl_brick_framed"><p>  <b>fl_brick_framed</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="fl_005fbright"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fl_005fbrick" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fl_005fconcrete" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Floors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fl_005fbright-1"></a>
<h3 class="subsection">7.3.8 fl_bright</h3>
<a name="index-fl_005fbright"></a>

<p>Почти белоснежное покрытие без каких-либо свойств объектов Инь-Ян. С данным покрытием гармонирует покрытие <a href="#fl_005fdark">fl_dark</a>.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>adhesion</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 1.5 &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>friction</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 3.0 &nbsp;&nbsp;См. раздел <a href="#friction">friction</a></dt>
<dt> <b>burnable</b>, &nbsp;&nbsp;<i>значения</i>: boolean; &nbsp;&nbsp;<i>по умолчанию</i>: false&nbsp;&nbsp;См. раздел <a href="#burnable">burnable</a></dt>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/fl_bright.png" alt="images/fl_bright"><p> <b>fl_bright</b>
</p></dt>
<dt> <img src="images/fl_bright_framed.png" alt="images/fl_bright_framed"><p> <b>fl_bright_framed</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="fl_005fconcrete"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fl_005fbright" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fl_005fdark" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Floors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fl_005fconcrete-1"></a>
<h3 class="subsection">7.3.9 fl_concrete</h3>
<a name="index-fl_005fconcrete"></a>

<p>Гранулированное серое бетонное покрытие.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>adhesion</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 1.3 &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>friction</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 4.5 &nbsp;&nbsp;См. раздел <a href="#friction">friction</a></dt>
<dt> <b>burnable</b>, &nbsp;&nbsp;<i>значения</i>: boolean; &nbsp;&nbsp;<i>по умолчанию</i>: false&nbsp;&nbsp;См. раздел <a href="#burnable">burnable</a></dt>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/fl_concrete.png" alt="images/fl_concrete"><p> <b>fl_concrete</b>
</p></dt>
<dt> <img src="images/fl_concrete_framed.png" alt="images/fl_concrete_framed"><p> <b>fl_concrete_framed</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="fl_005fdark"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fl_005fconcrete" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fl_005fdarkgray" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Floors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fl_005fdark-1"></a>
<h3 class="subsection">7.3.10 fl_dark</h3>
<a name="index-fl_005fdark"></a>

<p>Почти чёрное покрытие без каких-либо свойств объектов Инь-Ян. С данным покрытием гармонирует покрытие <a href="#fl_005fbright">fl_bright</a>.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>adhesion</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 1.5 &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>friction</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 3.0 &nbsp;&nbsp;См. раздел <a href="#friction">friction</a></dt>
<dt> <b>burnable</b>, &nbsp;&nbsp;<i>значения</i>: boolean; &nbsp;&nbsp;<i>по умолчанию</i>: false&nbsp;&nbsp;См. раздел <a href="#burnable">burnable</a></dt>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/fl_dark.png" alt="images/fl_dark"><p> <b>fl_dark</b>
</p></dt>
<dt> <img src="images/fl_dark_framed.png" alt="images/fl_dark_framed"><p> <b>fl_dark_framed</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="fl_005fdarkgray"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fl_005fdark" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fl_005fdunes" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Floors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fl_005fdarkgray-1"></a>
<h3 class="subsection">7.3.11 fl_darkgray</h3>
<a name="index-fl_005fdarkgray"></a>

<p>Покрытие с оттенками от серого до тёмно-серого.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>adhesion</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 1.6 &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>friction</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 3.0 &nbsp;&nbsp;См. раздел <a href="#friction">friction</a></dt>
<dt> <b>burnable</b>, &nbsp;&nbsp;<i>значения</i>: boolean; &nbsp;&nbsp;<i>по умолчанию</i>: false&nbsp;&nbsp;См. раздел <a href="#burnable">burnable</a></dt>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/fl_darkgray.png" alt="images/fl_darkgray"><p> <b>fl_darkgray</b>
</p></dt>
<dt> <img src="images/fl_darkgray_framed.png" alt="images/fl_darkgray_framed"><p> <b>fl_darkgray_framed</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="fl_005fdunes"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fl_005fdarkgray" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fl_005fgravel" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Floors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fl_005fdunes-1"></a>
<h3 class="subsection">7.3.12 fl_dunes</h3>
<a name="index-fl_005fdunes"></a>

<p>Коричневые гранулированные дюны.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>adhesion</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 1.0 &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>friction</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 1.3 &nbsp;&nbsp;См. раздел <a href="#friction">friction</a></dt>
<dt> <b>burnable</b>, &nbsp;&nbsp;<i>значения</i>: boolean; &nbsp;&nbsp;<i>по умолчанию</i>: false&nbsp;&nbsp;См. раздел <a href="#burnable">burnable</a></dt>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/fl_dunes.png" alt="images/fl_dunes"><p> <b>fl_dunes</b>
</p></dt>
<dt> <img src="images/fl_dunes_framed.png" alt="images/fl_dunes_framed"><p> <b>fl_dunes_framed</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="fl_005fgravel"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fl_005fdunes" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fl_005fgray" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Floors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fl_005fgravel-1"></a>
<h3 class="subsection">7.3.13 fl_gravel</h3>
<a name="index-fl_005fgravel"></a>

<p>Тёмно-серое гранулированное покрытие.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>adhesion</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 1.5 &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>friction</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 3.2 &nbsp;&nbsp;См. раздел <a href="#friction">friction</a></dt>
<dt> <b>burnable</b>, &nbsp;&nbsp;<i>значения</i>: boolean; &nbsp;&nbsp;<i>по умолчанию</i>: false&nbsp;&nbsp;См. раздел <a href="#burnable">burnable</a></dt>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/fl_gravel.png" alt="images/fl_gravel"><p> <b>fl_gravel</b>
</p></dt>
<dt> <img src="images/fl_gravel_framed.png" alt="images/fl_gravel_framed"><p> <b>fl_gravel_framed</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="fl_005fgray"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fl_005fgravel" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fl_005fhimalaya" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Floors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fl_005fgray-1"></a>
<h3 class="subsection">7.3.14 fl_gray</h3>
<a name="index-fl_005fgray"></a>

<p>Серое покрытие с коричневыми пятнами.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>adhesion</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 3.0 &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>friction</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 5.0 &nbsp;&nbsp;См. раздел <a href="#friction">friction</a></dt>
<dt> <b>burnable</b>, &nbsp;&nbsp;<i>значения</i>: boolean; &nbsp;&nbsp;<i>по умолчанию</i>: false&nbsp;&nbsp;См. раздел <a href="#burnable">burnable</a></dt>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/fl_gray.png" alt="images/fl_gray"><p> <b>fl_gray</b>
</p></dt>
<dt> <img src="images/fl_gray_framed.png" alt="images/fl_gray_framed"><p> <b>fl_gray_framed</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="fl_005fhimalaya"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fl_005fgray" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fl_005fivory" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Floors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fl_005fhimalaya-1"></a>
<h3 class="subsection">7.3.15 fl_himalaya</h3>
<a name="index-fl_005fhimalaya"></a>

<p>Покрытие из сине-пурпурного мрамора.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>adhesion</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 2.0 &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>friction</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 5.0 &nbsp;&nbsp;См. раздел <a href="#friction">friction</a></dt>
<dt> <b>burnable</b>, &nbsp;&nbsp;<i>значения</i>: boolean; &nbsp;&nbsp;<i>по умолчанию</i>: false&nbsp;&nbsp;См. раздел <a href="#burnable">burnable</a></dt>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/fl_himalaya.png" alt="images/fl_himalaya"><p> <b>fl_himalaya</b>
</p></dt>
<dt> <img src="images/fl_himalaya_framed.png" alt="images/fl_himalaya_framed"><p> <b>fl_himalaya_framed</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="fl_005fivory"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fl_005fhimalaya" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fl_005flawn" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Floors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fl_005fivory-1"></a>
<h3 class="subsection">7.3.16 fl_ivory</h3>
<a name="index-fl_005fivory"></a>

<p>Тёплое белое покрытие из перламутра или слоновой кости.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>adhesion</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 1.6 &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>friction</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 2.2 &nbsp;&nbsp;См. раздел <a href="#friction">friction</a></dt>
<dt> <b>burnable</b>, &nbsp;&nbsp;<i>значения</i>: boolean; &nbsp;&nbsp;<i>по умолчанию</i>: true &nbsp;&nbsp;См. раздел <a href="#burnable">burnable</a></dt>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/fl_ivory.png" alt="images/fl_ivory"><p> <b>fl_ivory</b>
</p></dt>
<dt> <img src="images/fl_ivory_framed.png" alt="images/fl_ivory_framed"><p> <b>fl_ivory_framed</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="fl_005flawn"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fl_005fivory" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fl_005fmarble" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Floors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fl_005flawn-1"></a>
<h3 class="subsection">7.3.17 fl_lawn</h3>
<a name="index-fl_005flawn"></a>

<p>Травяное покрытие. Имеются различные текстуры светло-зелёной и тёмно-зелёной травы.
</p>
<p>При горении <code>fl_lawn</code> превращается в <a href="#fl_005fdunes">fl_dunes</a>.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>adhesion</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 1.5 &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>friction</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 4.0 &nbsp;&nbsp;См. раздел <a href="#friction">friction</a></dt>
<dt> <b>texture</b>, &nbsp;&nbsp;<i>значения</i>: &quot;a&quot;,&quot;b&quot;,&quot;c1&quot;,&quot;c2&quot;,&quot;c3&quot;,&quot;c4&quot;,&quot;d1&quot;,&quot;d2&quot;,&quot;d3&quot;,&quot;d4&quot;,&quot;e1&quot;,&quot;e2&quot;,&quot;e3&quot;,&quot;e4&quot; ; &nbsp;&nbsp;<i>по умолчанию</i>: &quot;a&quot;; &nbsp;&nbsp;<i>доступ</i>: <code>отсутствует</code>  &nbsp;&nbsp;См. раздел <a href="#texture">texture</a></dt>
<dt> <b>burnable</b>, &nbsp;&nbsp;<i>значения</i>: boolean; &nbsp;&nbsp;<i>по умолчанию</i>: true &nbsp;&nbsp;См. раздел <a href="#burnable">burnable</a></dt>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><table>
<tr><td width="8%"><img src="images/fl_lawn.png" alt="images/fl_lawn"></td><td width="42%"><b>fl_lawn_a</b>: texture = &lsquo;<samp>&quot;a&quot;</samp>&rsquo;</td><td width="8%"><img src="images/fl_lawn_c.png" alt="images/fl_lawn_c"></td><td width="42%"><b>fl_lawn_b</b>: texture = &lsquo;<samp>&quot;b&quot;</samp>&rsquo;</td></tr>
<tr><td width="8%"><img src="images/fl_lawn_e.png" alt="images/fl_lawn_e"></td><td width="42%"><b>fl_lawn_c1</b>: texture = &lsquo;<samp>&quot;c1&quot;</samp>&rsquo;</td><td width="8%"><img src="images/fl_lawn_f.png" alt="images/fl_lawn_f"></td><td width="42%"><b>fl_lawn_c3</b>: texture = &lsquo;<samp>&quot;c3&quot;</samp>&rsquo;</td></tr>
<tr><td width="8%"><img src="images/fl_lawn_e2.png" alt="images/fl_lawn_e2"></td><td width="42%"><b>fl_lawn_c2</b>: texture = &lsquo;<samp>&quot;c2&quot;</samp>&rsquo;</td><td width="8%"><img src="images/fl_lawn_f2.png" alt="images/fl_lawn_f2"></td><td width="42%"><b>fl_lawn_c4</b>: texture = &lsquo;<samp>&quot;c4&quot;</samp>&rsquo;</td></tr>
<tr><td width="8%"><img src="images/fl_lawn_g.png" alt="images/fl_lawn_g"></td><td width="42%"><b>fl_lawn_d1</b>: texture = &lsquo;<samp>&quot;d1&quot;</samp>&rsquo;</td><td width="8%"><img src="images/fl_lawn_h.png" alt="images/fl_lawn_h"></td><td width="42%"><b>fl_lawn_d3</b>: texture = &lsquo;<samp>&quot;d3&quot;</samp>&rsquo;</td></tr>
<tr><td width="8%"><img src="images/fl_lawn_g2.png" alt="images/fl_lawn_g2"></td><td width="42%"><b>fl_lawn_d2</b>: texture = &lsquo;<samp>&quot;d2&quot;</samp>&rsquo;</td><td width="8%"><img src="images/fl_lawn_h2.png" alt="images/fl_lawn_h2"></td><td width="42%"><b>fl_lawn_d4</b>: texture = &lsquo;<samp>&quot;d4&quot;</samp>&rsquo;</td></tr>
<tr><td width="8%"><img src="images/fl_lawn_i.png" alt="images/fl_lawn_i"></td><td width="42%"><b>fl_lawn_e1</b>: texture = &lsquo;<samp>&quot;e1&quot;</samp>&rsquo;</td><td width="8%"><img src="images/fl_lawn_j.png" alt="images/fl_lawn_j"></td><td width="42%"><b>fl_lawn_e3</b>: texture = &lsquo;<samp>&quot;e3&quot;</samp>&rsquo;</td></tr>
<tr><td width="8%"><img src="images/fl_lawn_i2.png" alt="images/fl_lawn_i2"></td><td width="42%"><b>fl_lawn_e2</b>: texture = &lsquo;<samp>&quot;e2&quot;</samp>&rsquo;</td><td width="8%"><img src="images/fl_lawn_j2.png" alt="images/fl_lawn_j2"></td><td width="42%"><b>fl_lawn_e4</b>: texture = &lsquo;<samp>&quot;e4&quot;</samp>&rsquo;</td></tr>
<tr><td width="8%"><img src="images/fl_lawn.png" alt="images/fl_lawn"></td><td width="42%"><b>fl_lawn</b>: texture = &lsquo;<samp>&quot;a&quot;</samp>&rsquo;</td></tr>
</table>
</dd>
</dl>

<hr size="6">
<a name="fl_005fmarble"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fl_005flawn" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fl_005fmetal" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Floors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fl_005fmarble-1"></a>
<h3 class="subsection">7.3.18 fl_marble</h3>
<a name="index-fl_005fmarble"></a>

<p>Светлый красно-коричневый мрамор.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>adhesion</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 2.0 &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>friction</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 6.4 &nbsp;&nbsp;См. раздел <a href="#friction">friction</a></dt>
<dt> <b>burnable</b>, &nbsp;&nbsp;<i>значения</i>: boolean; &nbsp;&nbsp;<i>по умолчанию</i>: true &nbsp;&nbsp;См. раздел <a href="#burnable">burnable</a></dt>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/fl_marble.png" alt="images/fl_marble"><p> <b>fl_marble</b>
</p></dt>
<dt> <img src="images/fl_marble_framed.png" alt="images/fl_marble_framed"><p> <b>fl_marble_framed</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="fl_005fmetal"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fl_005fmarble" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fl_005fmortar" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Floors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fl_005fmetal-1"></a>
<h3 class="subsection">7.3.19 fl_metal</h3>
<a name="index-fl_005fmetal"></a>

<p>Серое металлическое покрытие с заклёпками. Имеются различные текстуры с горизонтальными и вертикальными поперечинами и различным количеством и расположением заклёпок.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>adhesion</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 2.0 &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>friction</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 3.0 &nbsp;&nbsp;См. раздел <a href="#friction">friction</a></dt>
<dt> <b>texture</b>, &nbsp;&nbsp;<i>значения</i>: целое число, 1 &lt;= n &lt;= 7  ; &nbsp;&nbsp;<i>по умолчанию</i>: random; &nbsp;&nbsp;<i>доступ</i>: <code>отсутствует</code>  &nbsp;&nbsp;См. раздел <a href="#texture">texture</a></dt>
<dt> <b>burnable</b>, &nbsp;&nbsp;<i>значения</i>: boolean; &nbsp;&nbsp;<i>по умолчанию</i>: false&nbsp;&nbsp;См. раздел <a href="#burnable">burnable</a></dt>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><table>
<tr><td width="8%"><img src="images/fl_metal.png" alt="images/fl_metal"></td><td width="42%"><b>fl_metal</b>: texture = &lsquo;<samp>random</samp>&rsquo;</td><td width="8%"><img src="images/fl_metal_framed.png" alt="images/fl_metal_framed"></td><td width="42%"><b>fl_metal_framed</b>: texture = &lsquo;<samp>random</samp>&rsquo;</td></tr>
<tr><td width="8%"><img src="images/fl_metal.png" alt="images/fl_metal"></td><td width="42%"><b>fl_metal_1</b>: texture = <code>1</code></td><td width="8%"><img src="images/fl_metal_framed.png" alt="images/fl_metal_framed"></td><td width="42%"><b>fl_metal_1_framed</b>: texture = <code>1</code></td></tr>
<tr><td width="8%"><img src="images/fl_metal_2.png" alt="images/fl_metal_2"></td><td width="42%"><b>fl_metal_2</b>: texture = <code>2</code></td><td width="8%"><img src="images/construction.png" alt="images/construction"></td><td width="42%"><b>fl_metal_2_framed</b>: texture = <code>2</code></td></tr>
<tr><td width="8%"><img src="images/fl_metal_3.png" alt="images/fl_metal_3"></td><td width="42%"><b>fl_metal_3</b>: texture = <code>3</code></td><td width="8%"><img src="images/construction.png" alt="images/construction"></td><td width="42%"><b>fl_metal_3_framed</b>: texture = <code>3</code></td></tr>
<tr><td width="8%"><img src="images/fl_metal_4.png" alt="images/fl_metal_4"></td><td width="42%"><b>fl_metal_4</b>: texture = <code>4</code></td><td width="8%"><img src="images/construction.png" alt="images/construction"></td><td width="42%"><b>fl_metal_4_framed</b>: texture = <code>4</code></td></tr>
<tr><td width="8%"><img src="images/fl_metal_5.png" alt="images/fl_metal_5"></td><td width="42%"><b>fl_metal_5</b>: texture = <code>5</code></td><td width="8%"><img src="images/construction.png" alt="images/construction"></td><td width="42%"><b>fl_metal_5_framed</b>: texture = <code>5</code></td></tr>
<tr><td width="8%"><img src="images/fl_metal_6.png" alt="images/fl_metal_6"></td><td width="42%"><b>fl_metal_6</b>: texture = <code>6</code></td><td width="8%"><img src="images/construction.png" alt="images/construction"></td><td width="42%"><b>fl_metal_6_framed</b>: texture = <code>6</code></td></tr>
<tr><td width="8%"><img src="images/fl_metal_7.png" alt="images/fl_metal_7"></td><td width="42%"><b>fl_metal_7</b>: texture = <code>7</code></td><td width="8%"><img src="images/construction.png" alt="images/construction"></td><td width="42%"><b>fl_metal_7_framed</b>: texture = <code>7</code></td></tr>
</table>
</dd>
</dl>

<hr size="6">
<a name="fl_005fmortar"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fl_005fmetal" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fl_005fpinkbumps" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Floors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fl_005fmortar-1"></a>
<h3 class="subsection">7.3.20 fl_mortar</h3>
<a name="index-fl_005fmortar"></a>

<p>Очень неровное ярко-белое покрытие.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>adhesion</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 1.8 &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>friction</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 7.2 &nbsp;&nbsp;См. раздел <a href="#friction">friction</a></dt>
<dt> <b>burnable</b>, &nbsp;&nbsp;<i>значения</i>: boolean; &nbsp;&nbsp;<i>по умолчанию</i>: false&nbsp;&nbsp;См. раздел <a href="#burnable">burnable</a></dt>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/fl_mortar.png" alt="images/fl_mortar"><p> <b>fl_mortar</b>
</p></dt>
<dt> <img src="images/fl_mortar_framed.png" alt="images/fl_mortar_framed"><p> <b>fl_mortar_framed</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="fl_005fpinkbumps"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fl_005fmortar" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fl_005fplank" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Floors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fl_005fpinkbumps-1"></a>
<h3 class="subsection">7.3.21 fl_pinkbumps</h3>
<a name="index-fl_005fpinkbumps"></a>

<p>Розовое покрытие с белыми выступами.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>adhesion</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 1.2 &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>friction</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 5.0 &nbsp;&nbsp;См. раздел <a href="#friction">friction</a></dt>
<dt> <b>burnable</b>, &nbsp;&nbsp;<i>значения</i>: boolean; &nbsp;&nbsp;<i>по умолчанию</i>: false&nbsp;&nbsp;См. раздел <a href="#burnable">burnable</a></dt>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/fl_pinkbumps.png" alt="images/fl_pinkbumps"><p> <b>fl_pinkbumps</b>
</p></dt>
<dt> <img src="images/fl_pinkbumps_framed.png" alt="images/fl_pinkbumps_framed"><p> <b>fl_pinkbumps_framed</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="fl_005fplank"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fl_005fpinkbumps" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fl_005fplatinum" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Floors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fl_005fplank-1"></a>
<h3 class="subsection">7.3.22 fl_plank</h3>
<a name="index-fl_005fplank"></a>

<p>Покрытие, составленное из маленьких диагональных оранжево-коричневых планок.
</p>
<p>При горении <code>fl_plank</code> превращается в <a href="#fl_005fabyss">fl_abyss</a>.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>adhesion</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 2.0 &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>friction</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 5.5 &nbsp;&nbsp;См. раздел <a href="#friction">friction</a></dt>
<dt> <b>burnable</b>, &nbsp;&nbsp;<i>значения</i>: boolean; &nbsp;&nbsp;<i>по умолчанию</i>: false&nbsp;&nbsp;См. раздел <a href="#burnable">burnable</a></dt>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/fl_plank.png" alt="images/fl_plank"><p> <b>fl_plank</b>
</p></dt>
<dt> <img src="images/fl_plank_framed.png" alt="images/fl_plank_framed"><p> <b>fl_plank_framed</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="fl_005fplatinum"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fl_005fplank" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fl_005fred" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Floors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fl_005fplatinum-1"></a>
<h3 class="subsection">7.3.23 fl_platinum</h3>
<a name="index-fl_005fplatinum"></a>

<p>Тёплое светло-серое покрытие.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>adhesion</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 1.6 &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>friction</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 3.0 &nbsp;&nbsp;См. раздел <a href="#friction">friction</a></dt>
<dt> <b>burnable</b>, &nbsp;&nbsp;<i>значения</i>: boolean; &nbsp;&nbsp;<i>по умолчанию</i>: true &nbsp;&nbsp;См. раздел <a href="#burnable">burnable</a></dt>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/fl_platinum.png" alt="images/fl_platinum"><p> <b>fl_platinum</b>
</p></dt>
<dt> <img src="images/fl_platinum_framed.png" alt="images/fl_platinum_framed"><p> <b>fl_platinum_framed</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="fl_005fred"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fl_005fplatinum" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fl_005fredslab" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Floors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fl_005fred-1"></a>
<h3 class="subsection">7.3.24 fl_red</h3>
<a name="index-fl_005fred"></a>

<p>Тёплое красное очень скользкое покрытие.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>adhesion</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 1.0 &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>friction</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 0.9 &nbsp;&nbsp;См. раздел <a href="#friction">friction</a></dt>
<dt> <b>burnable</b>, &nbsp;&nbsp;<i>значения</i>: boolean; &nbsp;&nbsp;<i>по умолчанию</i>: true &nbsp;&nbsp;См. раздел <a href="#burnable">burnable</a></dt>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/fl_red.png" alt="images/fl_red"><p> <b>fl_red</b>
</p></dt>
<dt> <img src="images/fl_red_framed.png" alt="images/fl_red_framed"><p> <b>fl_red_framed</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="fl_005fredslab"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fl_005fred" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fl_005frough" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Floors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fl_005fredslab-1"></a>
<h3 class="subsection">7.3.25 fl_redslab</h3>
<a name="index-fl_005fredslab"></a>

<p>Тёмно-красная мраморная плита с чёрными прожилками. С данным покрытием гармонирует покрытие <a href="#fl_005fblueslab">fl_blueslab</a>.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>adhesion</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 2.0 &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>friction</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 7.0 &nbsp;&nbsp;См. раздел <a href="#friction">friction</a></dt>
<dt> <b>burnable</b>, &nbsp;&nbsp;<i>значения</i>: boolean; &nbsp;&nbsp;<i>по умолчанию</i>: true &nbsp;&nbsp;См. раздел <a href="#burnable">burnable</a></dt>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/fl_redslab.png" alt="images/fl_redslab"><p> <b>fl_redslab</b>
</p></dt>
<dt> <img src="images/fl_redslab_framed.png" alt="images/fl_redslab_framed"><p> <b>fl_redslab_framed</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="fl_005frough"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fl_005fredslab" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fl_005fsahara" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Floors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fl_005frough-1"></a>
<h3 class="subsection">7.3.26 fl_rough</h3>
<a name="index-fl_005frough"></a>

<p>Шероховатое тёплое белое покрытие.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>adhesion</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 2.0 &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>friction</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 7.0 &nbsp;&nbsp;См. раздел <a href="#friction">friction</a></dt>
<dt> <b>burnable</b>, &nbsp;&nbsp;<i>значения</i>: boolean; &nbsp;&nbsp;<i>по умолчанию</i>: true &nbsp;&nbsp;См. раздел <a href="#burnable">burnable</a></dt>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/fl_rough.png" alt="images/fl_rough"><p> <b>fl_rough</b>
</p></dt>
<dt> <img src="images/fl_rough_framed.png" alt="images/fl_rough_framed"><p> <b>fl_rough_framed</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="fl_005fsahara"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fl_005frough" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fl_005fsamba" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Floors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fl_005fsahara-1"></a>
<h3 class="subsection">7.3.27 fl_sahara</h3>
<a name="index-fl_005fsahara"></a>

<p>Покрытие из ярко-жёлтого песчаника.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>adhesion</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 2.0 &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>friction</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 6.4 &nbsp;&nbsp;См. раздел <a href="#friction">friction</a></dt>
<dt> <b>burnable</b>, &nbsp;&nbsp;<i>значения</i>: boolean; &nbsp;&nbsp;<i>по умолчанию</i>: false&nbsp;&nbsp;См. раздел <a href="#burnable">burnable</a></dt>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/fl_sahara.png" alt="images/fl_sahara"><p> <b>fl_sahara</b>
</p></dt>
<dt> <img src="images/fl_sahara_framed.png" alt="images/fl_sahara_framed"><p> <b>fl_sahara_framed</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="fl_005fsamba"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fl_005fsahara" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fl_005fsand" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Floors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fl_005fsamba-1"></a>
<h3 class="subsection">7.3.28 fl_samba</h3>
<a name="index-fl_005fsamba"></a>

<p>Обесцвеченное серое деревянное покрытие. Имеются текстуры с планками, совмещёнными по горизонтали и вертикали.
</p>
<p>При горении <code>fl_samba</code> превращается в <a href="#fl_005fabyss">fl_abyss</a>.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>adhesion</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 2.0 &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>friction</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 6.0 &nbsp;&nbsp;См. раздел <a href="#friction">friction</a></dt>
<dt> <b>texture</b>, &nbsp;&nbsp;<i>значения</i>: &quot;h&quot;, &quot;v&quot;  ; &nbsp;&nbsp;<i>по умолчанию</i>: random; &nbsp;&nbsp;<i>доступ</i>: <code>отсутствует</code>  &nbsp;&nbsp;См. раздел <a href="#texture">texture</a></dt>
<dt> <b>burnable</b>, &nbsp;&nbsp;<i>значения</i>: boolean; &nbsp;&nbsp;<i>по умолчанию</i>: true &nbsp;&nbsp;См. раздел <a href="#burnable">burnable</a></dt>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/fl_samba.png" alt="images/fl_samba"><p> <b>fl_samba</b>: texture = &lsquo;<samp>random</samp>&rsquo;
</p></dt>
<dt> <img src="images/fl_samba.png" alt="images/fl_samba"><p> <b>fl_samba_h</b>: texture = <code>&quot;h&quot;</code>
</p></dt>
<dt> <img src="images/fl_samba_2.png" alt="images/fl_samba_2"><p> <b>fl_samba_v</b>: texture = <code>&quot;v&quot;</code>
</p></dt>
<dt> <img src="images/fl_samba_framed.png" alt="images/fl_samba_framed"><p> <b>fl_samba_framed</b>: texture = &lsquo;<samp>random</samp>&rsquo;
</p></dt>
<dt> <img src="images/fl_samba_framed.png" alt="images/fl_samba_framed"><p> <b>fl_samba_h_framed</b>: texture = <code>&quot;h&quot;</code>
</p></dt>
<dt> <img src="images/construction.png" alt="images/construction"><p> <b>fl_samba_v_framed</b>: texture = <code>&quot;v&quot;</code>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="fl_005fsand"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fl_005fsamba" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fl_005fspace" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Floors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fl_005fsand-1"></a>
<h3 class="subsection">7.3.29 fl_sand</h3>
<a name="index-fl_005fsand"></a>

<p>Гранулированное оранжево-серое песчаное покрытие.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>adhesion</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 2.0 &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>friction</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 6.0 &nbsp;&nbsp;См. раздел <a href="#friction">friction</a></dt>
<dt> <b>burnable</b>, &nbsp;&nbsp;<i>значения</i>: boolean; &nbsp;&nbsp;<i>по умолчанию</i>: false&nbsp;&nbsp;См. раздел <a href="#burnable">burnable</a></dt>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/fl_sand.png" alt="images/fl_sand"><p> <b>fl_sand</b>
</p></dt>
<dt> <img src="images/fl_sand_framed.png" alt="images/fl_sand_framed"><p> <b>fl_sand_framed</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="fl_005fspace"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fl_005fsand" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fl_005fstone" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Floors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fl_005fspace-1"></a>
<h3 class="subsection">7.3.30 fl_space</h3>
<a name="index-fl_005fspace"></a>

<p>Чёрный космос с несколькими мерцающими звёздами. Данное покрытие не имеет ни силы трения, ни силы сцепления. Попав на покрытие, актёр будет парить по нему сколько угодно, пока не попадёт на другое покрытие.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>adhesion</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 0.0 &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>friction</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 0.0 &nbsp;&nbsp;См. раздел <a href="#friction">friction</a></dt>
<dt> <b>burnable</b>, &nbsp;&nbsp;<i>значения</i>: boolean; &nbsp;&nbsp;<i>по умолчанию</i>: false&nbsp;&nbsp;См. раздел <a href="#burnable">burnable</a></dt>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/fl_space.png" alt="images/fl_space"><p> <b>fl_space</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="fl_005fstone"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fl_005fspace" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fl_005ftigris" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Floors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fl_005fstone-1"></a>
<h3 class="subsection">7.3.31 fl_stone</h3>
<a name="index-fl_005fstone"></a>

<p>Гранулированное коричнево-серое покрытие.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>adhesion</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 1.0 &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>friction</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 1.4 &nbsp;&nbsp;См. раздел <a href="#friction">friction</a></dt>
<dt> <b>burnable</b>, &nbsp;&nbsp;<i>значения</i>: boolean; &nbsp;&nbsp;<i>по умолчанию</i>: false&nbsp;&nbsp;См. раздел <a href="#burnable">burnable</a></dt>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/fl_stone.png" alt="images/fl_stone"><p> <b>fl_stone</b>
</p></dt>
<dt> <img src="images/fl_stone_framed.png" alt="images/fl_stone_framed"><p> <b>fl_stone_framed</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="fl_005ftigris"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fl_005fstone" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fl_005fwhite" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Floors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fl_005ftigris-1"></a>
<h3 class="subsection">7.3.32 fl_tigris</h3>
<a name="index-fl_005ftigris"></a>

<p>Покрытие из красного песчаника.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>adhesion</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 2.0 &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>friction</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 6.0 &nbsp;&nbsp;См. раздел <a href="#friction">friction</a></dt>
<dt> <b>burnable</b>, &nbsp;&nbsp;<i>значения</i>: boolean; &nbsp;&nbsp;<i>по умолчанию</i>: true &nbsp;&nbsp;См. раздел <a href="#burnable">burnable</a></dt>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/fl_tigris.png" alt="images/fl_tigris"><p> <b>fl_tigris</b>
</p></dt>
<dt> <img src="images/fl_tigris_framed.png" alt="images/fl_tigris_framed"><p> <b>fl_tigris_framed</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="fl_005fwhite"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fl_005ftigris" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fl_005fwoven" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Floors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fl_005fwhite-1"></a>
<h3 class="subsection">7.3.33 fl_white</h3>
<a name="index-fl_005fwhite"></a>

<p>Белоснежное покрытие без каких-либо свойств объектов Инь-Ян.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>adhesion</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 2.0 &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>friction</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 4.0 &nbsp;&nbsp;См. раздел <a href="#friction">friction</a></dt>
<dt> <b>burnable</b>, &nbsp;&nbsp;<i>значения</i>: boolean; &nbsp;&nbsp;<i>по умолчанию</i>: false&nbsp;&nbsp;См. раздел <a href="#burnable">burnable</a></dt>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/fl_white.png" alt="images/fl_white"><p> <b>fl_white</b>
</p></dt>
<dt> <img src="images/fl_white_framed.png" alt="images/fl_white_framed"><p> <b>fl_white_framed</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="fl_005fwoven"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fl_005fwhite" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Special-Floors" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Floors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fl_005fwoven-1"></a>
<h3 class="subsection">7.3.34 fl_woven</h3>
<a name="index-fl_005fwoven"></a>

<p>Белое покрытие, плетёное по диагонали, с чёрными тенями.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>adhesion</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 3.0 &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>friction</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 6.5 &nbsp;&nbsp;См. раздел <a href="#friction">friction</a></dt>
<dt> <b>burnable</b>, &nbsp;&nbsp;<i>значения</i>: boolean; &nbsp;&nbsp;<i>по умолчанию</i>: true &nbsp;&nbsp;См. раздел <a href="#burnable">burnable</a></dt>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/fl_woven.png" alt="images/fl_woven"><p> <b>fl_woven</b>
</p></dt>
<dt> <img src="images/fl_woven_framed.png" alt="images/fl_woven_framed"><p> <b>fl_woven_framed</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="Special-Floors"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fl_005fwoven" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fl_005fabyss" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Special-Floors-1"></a>
<h2 class="section">7.4 Особые покрытия</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#fl_005fabyss">7.4.1 fl_abyss</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Глубокая чёрная пропасть
</td></tr>
<tr><td align="left" valign="top"><a href="#fl_005fbridge">7.4.2 fl_bridge</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         Мост через бездну
</td></tr>
<tr><td align="left" valign="top"><a href="#fl_005ffake">7.4.3 fl_fake</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Покрытие, маскирующееся под другие покрытия
</td></tr>
<tr><td align="left" valign="top"><a href="#fl_005fhay">7.4.4 fl_hay</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Затапливаемое покрытие цвета сена
</td></tr>
<tr><td align="left" valign="top"><a href="#fl_005fice">7.4.5 fl_ice</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Скользкая замёрзшая вода
</td></tr>
<tr><td align="left" valign="top"><a href="#fl_005finverse">7.4.6 fl_inverse</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        Ускорение в противоположном направлении
</td></tr>
<tr><td align="left" valign="top"><a href="#fl_005frock">7.4.7 fl_rock</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Затапливаемая скалистая порода
</td></tr>
<tr><td align="left" valign="top"><a href="#fl_005fscales">7.4.8 fl_scales</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         Переключатель, срабатывающий под воздействием веса
</td></tr>
<tr><td align="left" valign="top"><a href="#fl_005fslope">7.4.9 fl_slope</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Различные формы склонов
</td></tr>
<tr><td align="left" valign="top"><a href="#fl_005fswamp">7.4.10 fl_swamp</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Липкое болото, в котором можно утонуть
</td></tr>
<tr><td align="left" valign="top"><a href="#fl_005fthief">7.4.11 fl_thief</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Спрятавшиеся воры
</td></tr>
<tr><td align="left" valign="top"><a href="#fl_005fwater">7.4.12 fl_water</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Вода, в которой можно утонуть
</td></tr>
<tr><td align="left" valign="top"><a href="#fl_005fwood">7.4.13 fl_wood</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Затапливаемое деревянное покрытие
</td></tr>
<tr><td align="left" valign="top"><a href="#fl_005fyinyang">7.4.14 fl_yinyang</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        Покрытие с трением, зависящим от актёра
</td></tr>
</table>

<hr size="6">
<a name="fl_005fabyss"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Special-Floors" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fl_005fbridge" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Floors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fl_005fabyss-1"></a>
<h3 class="subsection">7.4.1 fl_abyss</h3>
<a name="index-fl_005fabyss"></a>

<p>Абсолютно чёрная пропасть, куда падают все катящиеся шарики, неминуемо разбиваясь. Пропасть можно перепрыгнуть. <a href="#Actors">Актёры</a>, защищённые активированным зонтиком (<a href="#it_005fumbrella">it_umbrella</a>), могут перемещаться через пропасть и даже парить над ней, поскольку он обеспечивает их столь необходимыми значениями &lsquo;<samp>adhesion</samp>&rsquo; и &lsquo;<samp>friction</samp>&rsquo;. Другим труднопроходимым покрытием является <a href="#fl_005fwater">fl_water</a>.
</p>
<p>Многие покрытия разрушаются под воздествием огня или объекта <a href="#it_005fcrack">it_crack</a>, оставляя после себя пропасть. Саму пропасть разрушить нельзя. Она ни горит, ни трескается.
</p>
<p>Некоторые камни также проваливаются в пропасть. Камень <a href="#st_005fbox">st_box</a> образует мост, по которому все актёры могут перемещаться через участки покрытия, на которых раньше была пропасть.
</p>
<p>По умолчанию <code>fl_abyss</code> гореть не может. Если же её всё-таки поджечь (например, с помощью объекта <a href="#it_005fburnable">it_burnable</a>_oil), она по умолчанию не создаёт по окончании горения объект <a href="#it_005fburnable">it_burnable</a>_ash (то есть, для атрибута <a href="#noash">noash</a> по умолчанию установлено значение <code>true</code>). Как следствие, если для атрибута <code>burnable</code> установлено значение <code>true</code>, пропасть может многократно произвольно воспламеняться.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>adhesion</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 1.0 &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>friction</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 2.0 &nbsp;&nbsp;См. раздел <a href="#friction">friction</a></dt>
<dt> <b>indestructible</b>, &nbsp;&nbsp;<i>значения</i>: bool; &nbsp;&nbsp;<i>по умолчанию</i>: true; &nbsp;&nbsp;<i>доступ</i>: <code>отсутствует</code>  &nbsp;&nbsp;См. раздел <a href="#indestructible">indestructible</a></dt>
<dt> <b>burnable</b>, &nbsp;&nbsp;<i>значения</i>: boolean; &nbsp;&nbsp;<i>по умолчанию</i>: false&nbsp;&nbsp;См. раздел <a href="#burnable">burnable</a></dt>
<dt> <b>noash</b>, &nbsp;&nbsp;<i>значения</i>: boolean; &nbsp;&nbsp;<i>по умолчанию</i>: true &nbsp;&nbsp;См. раздел <a href="#noash">noash</a></dt>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/fl_abyss.png" alt="images/fl_abyss"><p> <b>fl_abyss</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="fl_005fbridge"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fl_005fabyss" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fl_005ffake" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Floors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fl_005fbridge-1"></a>
<h3 class="subsection">7.4.2 fl_bridge</h3>
<a name="index-fl_005fbridge"></a>

<p>Мост &mdash; это нестабильное покрытие, по которому можно пройти, если оно находится в состоянии <code>CLOSED</code> (закрыто), но которое становится непроходимым для шариков, подобно <a href="#fl_005fabyss">fl_abyss</a>, в открытом состоянии. Существует несколько разновидностей (<code>flavor</code>) мостов-покрытий. Они могут быть серыми либо цвета дерева, могут открываться по направлению от центра либо от одной из сторон. Строка <code>flavor</code> представляет собой комбинацию символов, обозначающих цвет моста и направление, в котором он закрывается. Обратите внимание, что допустимыми являются не все возможные комбинации.
</p>
<p>Подобно объекту <a href="#st_005fdoor">st_door</a>, мосты можно открывать и закрывать при помощи сообщений и операций установки состояния.
</p>
<p>Но уникальным свойством мостов является то, что они закрываются, если на них сдвинуть непроницаемый камень. Таким образом, камни не проваливаются в видимую пропасть, и их можно толкать над мостом. Но как только камень сдвигают с моста, мост открывается снова. Таким образом, игрок заметит, что мост открывается и закрывается, когда будет толкать по нему камни.
</p>
<p>Если выражаться более точно, после того, как камень сдвигают с моста, мост переходит в состояние, в котором он находился бы, если бы на нём не было камня. Это означает, что если камень передвинуть на открытый мост и этому мосту будет отправлено сообщение <code>&quot;close&quot;</code> или <code>&quot;toggle&quot;</code>, пока камень ещё находится на нём, мост остаётся закрытым, когда камень с него сдвигают.
</p>
<p>Установленный мост изменяет своё состояние в соответствии с принципом снимка (см. раздел <a href="#Snapshot-Principle">Принцип снимка</a>). Он проверяет, не находятся ли на нём непроницаемые камни, и в случае необходимости закрывается автоматически.
</p>
<p>По умолчанию гореть могут только коричневые (деревянные) мосты. Открытые мосты гореть не могут вне зависимости от значения атрибута <a href="#burnable">burnable</a>.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: <code>CLOSED</code>, <code>OPEN</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>OPEN</code> &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dd><p>Состояние моста, определяющее его внешний вид и то, может ли актёр пройти по мосту.
</p></dd>
<dt> <b>flavor</b>, &nbsp;&nbsp;<i>значения</i>: <code>&quot;gc&quot;</code>, <code>&quot;bw&quot;</code>, <code>&quot;bs&quot;</code>, <code>&quot;be&quot;</code>, <code>&quot;bn&quot;</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>&quot;gc&quot;</code></dt>
<dd><p>Тип моста.
</p></dd>
<dt> <b>adhesion</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 1.0 &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>friction</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 5.0 &nbsp;&nbsp;См. раздел <a href="#friction">friction</a></dt>
<dt> <b>burnable</b>, &nbsp;&nbsp;<i>значения</i>: boolean; &nbsp;&nbsp;<i>по умолчанию</i>: зависит от атрибута <code>flavor</code> См. раздел <a href="#burnable">burnable</a></dt>
<dd><p>True, если атрибут <code>flavor</code> равен <code>&quot;b*&quot;</code>, в противном случае false.
</p></dd>
</dl>

</dd>
<dt> <b>Сообщения:</b></dt>
<dd><dl compact="compact">
<dt> <b>open</b> &nbsp;&nbsp;См. раздел <a href="#open">open</a></dt>
<dd><p>Открывает закрытый мост, на котором нет непроницаемого камня. В противном случае сообщение будет зарегистрировано, и когда камень уберут, мост откроется.
</p></dd>
<dt> <b>close</b> &nbsp;&nbsp;См. раздел <a href="#close">close</a></dt>
<dd><p>Закрывает открытый мост. Если мост уже закрыт находящимся на нём непроницаемым камнем, сообщение будет зарегистрировано, и когда камень уберут, мост не откроется.
</p></dd>
<dt> <b>signal</b> &nbsp;&nbsp;См. раздел <a href="#signal">signal</a></dt>
<dd><p>Сигнал со значением 1 посылает сообщение об открытии, сигнал со значением 0 &mdash; о закрытии.
</p></dd>
<dt> <b>toggle</b> &nbsp;&nbsp;См. раздел <a href="#toggle">toggle</a></dt>
<dd><p>Сообщение вызывает изменение состояния, если на мосту нет камня, либо изменение зарегистрированного эксплицитного состояния, если на мосту находится камень.
</p></dd>
</dl>


</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/fl_bridge_gc_closed.png" alt="images/fl_bridge_gc_closed"><p> <b>fl_bridge</b> flavor = <code>&quot;gc&quot;</code>
</p></dt>
<dt> <img src="images/fl_bridge_gc_closed.png" alt="images/fl_bridge_gc_closed"><p> <b>fl_bridge_gc</b> flavor = <code>&quot;gc&quot;</code>
</p></dt>
<dt> <img src="images/fl_bridge_bw_closed.png" alt="images/fl_bridge_bw_closed"><p> <b>fl_bridge_bw</b> flavor = <code>&quot;bw&quot;</code>
</p></dt>
<dt> <img src="images/fl_bridge_bw_closed.png" alt="images/fl_bridge_bw_closed"><p> <b>fl_bridge_bs</b> flavor = <code>&quot;bs&quot;</code>
</p></dt>
<dt> <img src="images/fl_bridge_bw_closed.png" alt="images/fl_bridge_bw_closed"><p> <b>fl_bridge_be</b> flavor = <code>&quot;be&quot;</code>
</p></dt>
<dt> <img src="images/fl_bridge_bw_closed.png" alt="images/fl_bridge_bw_closed"><p> <b>fl_bridge_bn</b> flavor = <code>&quot;bn&quot;</code>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="fl_005ffake"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fl_005fbridge" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fl_005fhay" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Floors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fl_005ffake-1"></a>
<h3 class="subsection">7.4.3 fl_fake</h3>
<a name="index-fl_005ffake"></a>

<p>Это покрытие, которое имитирует внешний вид других покрытий, но не их свойства.
</p>
<p>В отличие от <a href="#fl_005fabyss">fl_abyss</a>, псевдопропасть &mdash; это стандартное покрытие, по которому любой актёр может пройти без вреда для себя.
</p>
<p>Псевдотриггер выглядит так же, как и обычный <a href="#it_005ftrigger">it_trigger</a>, но не имеет никаких особых свойств.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>adhesion</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 2.0 &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>friction</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 3.0 &nbsp;&nbsp;См. раздел <a href="#friction">friction</a></dt>
<dt> <b>flavor</b>, &nbsp;&nbsp;<i>значения</i>: <code>&quot;abyss&quot;</code>, <code>&quot;trigger&quot;</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>&quot;abyss&quot;</code>; &nbsp;&nbsp;<i>доступ</i>: <code>отсутствует</code></dt>
<dt> <b>burnable</b>, &nbsp;&nbsp;<i>значения</i>: boolean; &nbsp;&nbsp;<i>по умолчанию</i>: зависит от атрибута <code>flavor</code> См. раздел <a href="#burnable">burnable</a></dt>
<dd><p>True, если атрибут <code>flavor</code> имеет значение <code>&quot;trigger&quot;</code>, в противном случае false.
</p></dd>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/fl_abyss.png" alt="images/fl_abyss"><p> <b>fl_fake_abyss</b>: flavor = <code>&quot;abyss&quot;</code>
</p></dt>
<dt> <img src="images/fl_fake_trigger.png" alt="images/fl_fake_trigger"><p> <b>fl_fake_trigger</b>: flavor = <code>&quot;trigger&quot;</code>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="fl_005fhay"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fl_005ffake" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fl_005fice" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Floors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fl_005fhay-1"></a>
<h3 class="subsection">7.4.4 fl_hay</h3>
<a name="index-fl_005fhay"></a>

<p>Покрытие цвета сена, которое в большинстве случаев ведёт себя как обычное покрытие и имеет также окаймлённую разновидность.
</p>
<p>Окаймлённая разновидность является потомком упавшего в пропасть камня <a href="#st_005fbox">st_box</a>_hay. Данное покрытие может быть затоплено водой (<a href="#fl_005fwater">fl_water</a>), даже если для атрибута &lsquo;<samp>floodable</samp>&rsquo; не было установлено значение &lsquo;<samp>true</samp>&rsquo;, поскольку вода проникает под покрытие. Окаймлённое покрытие выступает в качестве моста над потоком воды, и вода продолжает разливаться на соседние участки решётки, в то время как по окаймлённому покрытию актёры могут свободно проходить. Окаймлённое покрытие может даже выступать в качестве источника затопления, но мы не рекомендуем использовать это свойство (см. раздел <a href="#Flood-Spreading">Распространение воды</a>).
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: <code>IDLE</code>, <code>FLOODING</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>IDLE</code> &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dt> <b>interval</b> &nbsp;&nbsp;<i>значения</i>: положительное число; &nbsp;&nbsp;<i>по умолчанию</i>: <code>0.2</code></dt>
<dd><p>Время (в секундах).
</p></dd>
<dt> <b>adhesion</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 1.5 &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>friction</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 5.0 &nbsp;&nbsp;См. раздел <a href="#friction">friction</a></dt>
<dt> <b>burnable</b>, &nbsp;&nbsp;<i>значения</i>: boolean; &nbsp;&nbsp;<i>по умолчанию</i>: true &nbsp;&nbsp;См. раздел <a href="#burnable">burnable</a></dt>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/fl_hay.png" alt="images/fl_hay"><p> <b>fl_hay</b>
</p></dt>
<dt> <img src="images/fl_hay_framed.png" alt="images/fl_hay_framed"><p> <b>fl_hay_framed</b>: faces = <code>&quot;nesw&quot;</code>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="fl_005fice"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fl_005fhay" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fl_005finverse" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Floors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fl_005fice-1"></a>
<h3 class="subsection">7.4.5 fl_ice</h3>
<a name="index-fl_005fice"></a>

<p>Ледяное покрытие &mdash; это очень скользкая замёрзшая вода. Игрок может увеличить эффективную силу трения, положив себе в инвентарь объект <a href="#it_005fpin">it_pin</a>.
</p>
<p>В большинстве своих аспектов лёд является стандартным покрытием. Но взорвавшийся <a href="#it_005fdynamite">it_dynamite</a> оставит в нём  <a href="#it_005fcrack">it_crack</a>_water вместо отверстия для медитации, а под воздействием расположенного поблизости источника тепла лёд растает, образовав <a href="#fl_005fwater">fl_water</a> (см. раздел <a href="#Heat_002dTransformation">Тепловая трансформация</a>).
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>adhesion</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 0.1 &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>friction</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 0.1 &nbsp;&nbsp;См. раздел <a href="#friction">friction</a></dt>
<dt> <b>burnable</b>, &nbsp;&nbsp;<i>значения</i>: boolean; &nbsp;&nbsp;<i>по умолчанию</i>: false&nbsp;&nbsp;См. раздел <a href="#burnable">burnable</a></dt>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/fl_ice.png" alt="images/fl_ice"><p> <b>fl_ice</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="fl_005finverse"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fl_005fice" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fl_005frock" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Floors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fl_005finverse-1"></a>
<h3 class="subsection">7.4.6 fl_inverse</h3>
<a name="index-fl_005finverse"></a>

<p>Находясь на обратном покрытии, все актёры ускоряются в направлении, противоположном силе, прилагаемой к мыши.  Во всех других аспектах эти покрытия являются стандартными.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>adhesion</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: -2.0 &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>friction</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 3.0 &nbsp;&nbsp;См. раздел <a href="#friction">friction</a></dt>
<dt> <b>flavor</b>, &nbsp;&nbsp;<i>значения</i>: <code>&quot;white&quot;</code>, <code>&quot;gray&quot;</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>&quot;white&quot;</code>; &nbsp;&nbsp;<i>доступ</i>: <code>отсутствует</code></dt>
<dt> <b>burnable</b>, &nbsp;&nbsp;<i>значения</i>: boolean; &nbsp;&nbsp;<i>по умолчанию</i>: false&nbsp;&nbsp;См. раздел <a href="#burnable">burnable</a></dt>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/fl_inverse_white.png" alt="images/fl_inverse_white"><p> <b>fl_inverse</b>: flavor = <code>&quot;white&quot;</code>
</p></dt>
<dt> <img src="images/fl_inverse_white.png" alt="images/fl_inverse_white"><p> <b>fl_inverse_white</b>: flavor = <code>&quot;white&quot;</code>
</p></dt>
<dt> <img src="images/fl_inverse_gray.png" alt="images/fl_inverse_gray"><p> <b>fl_inverse_gray</b>: flavor = <code>&quot;gray&quot;</code>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="fl_005frock"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fl_005finverse" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fl_005fscales" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Floors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fl_005frock-1"></a>
<h3 class="subsection">7.4.7 fl_rock</h3>
<a name="index-fl_005frock"></a>

<p>Скалистое покрытие в большинстве случаев ведёт себя как обычное покрытие и имеет также окаймлённую разновидность.
</p>
<p>Окаймлённая разновидность является потомком упавшего в пропасть камня <a href="#st_005fbox">st_box</a>_rock. Данное покрытие может быть затоплено водой (<a href="#fl_005fwater">fl_water</a>), даже если для атрибута &lsquo;<samp>floodable</samp>&rsquo; не было установлено значение &lsquo;<samp>true</samp>&rsquo;, поскольку вода проникает под покрытие. Окаймлённое покрытие выступает в качестве моста над потоком воды, и вода продолжает разливаться на соседние участки решётки, в то время как по окаймлённому покрытию актёры могут свободно проходить. Окаймлённое покрытие может даже выступать в качестве источника затопления, но мы не рекомендуем использовать это свойство (см. раздел <a href="#Flood-Spreading">Распространение воды</a>).
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: <code>IDLE</code>, <code>FLOODING</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>IDLE</code> &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dt> <b>interval</b> &nbsp;&nbsp;<i>значения</i>: положительное число; &nbsp;&nbsp;<i>по умолчанию</i>: <code>0.2</code></dt>
<dd><p>Время (в секундах).
</p></dd>
<dt> <b>adhesion</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 2.2 &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>friction</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 6.5 &nbsp;&nbsp;См. раздел <a href="#friction">friction</a></dt>
<dt> <b>burnable</b>, &nbsp;&nbsp;<i>значения</i>: boolean; &nbsp;&nbsp;<i>по умолчанию</i>: false&nbsp;&nbsp;См. раздел <a href="#burnable">burnable</a></dt>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/fl_rock.png" alt="images/fl_rock"><p> <b>fl_rock</b>
</p></dt>
<dt> <img src="images/fl_rock_framed.png" alt="images/fl_rock_framed"><p> <b>fl_rock_framed</b>: faces = <code>&quot;nesw&quot;</code>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="fl_005fscales"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fl_005frock" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fl_005fslope" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Floors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fl_005fscales-1"></a>
<h3 class="subsection">7.4.8 fl_scales</h3>
<a name="index-fl_005fscales"></a>

<p>Весы &mdash; это переключатель, реагирующий на весовую нагрузку, создаваемую находящимися на нём актёрами, предметами и камнями. Он выполняет действие, если на него нажать, и ещё одно действие, если его отпустить. Нажатый триггер находится в состоянии &lsquo;<samp>ON</samp>&rsquo; и посылает значение действия &lsquo;<samp>true</samp>&rsquo;, ненажатый триггер находится в состоянии &lsquo;<samp>OFF</samp>&rsquo; и посылает значение действия &lsquo;<samp>false</samp>&rsquo;.
</p>
<p>На переключатель могут нажимать только актёры, передвигающиеся по покрытию. Актёр, перепрыгивающий через переключатель, нажать на него не сможет. Актёр, прыгающий на переключателе, будет отпускать и снова нажимать его. Но в любом случае масса всех актёров и предметов, располагающихся на переключателе, будет измеряться и сравниваться с заданным значением атрибута <code>min</code>. По умолчанию масса, вызывающая срабатывание переключателя, равна 1,8. Это масса двух <a href="#ac_005fmarble">ac_marble</a> или трёх <a href="#ac_005fpearl">ac_pearl</a>. К базовой массе актёров прибавляются массы таких предметов, как <a href="#it_005fweight">it_weight</a>, которые находятся в сумке (<a href="#it_005fbag">it_bag</a>), положены на переключатель или переносятся актёром с собой в инвентаре.
</p>
<p>Надавить на весы могут только непроницаемые камни. Плавучие полые камни, как правило, не могут привести в действие весы, за исключением полого центрального камня-мозаики (см. раздел <a href="#st_005fpuzzle">st_puzzle</a>).
</p>
<p>Не существует способов установить состояние триггера вручную. Но, тем не менее, состояние доступно для чтения. При инициализации нажатый переключатель будет сгенерирован с состоянием &lsquo;<samp>ON</samp>&rsquo;, но в соответствии с принципом снимка (см. раздел <a href="#Snapshot-Principle">Принцип снимка</a>) не будет отправлять никаких действий.
</p>
<p>При срабатывании весы издают щелчок.
</p>
<p>Существует несколько разновидностей весов. По своим свойствам весы похожи на <a href="#it_005ftrigger">it_trigger</a>. Внешне они напоминают камни с каймой, но их легко различить. Не рекомендуется использовать невидимый <a href="#it_005ftrigger">it_trigger</a> на окаймлённом покрытии вместо весов.
</p>
<p>Объектами с похожим принципом действия, но реагирующими только на актёров, являются <a href="#it_005fsensor">it_sensor </a> и <a href="#it_005fcross">it_cross</a>.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: <code>ON</code>, <code>OFF</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>OFF</code> &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dd><p>Текущее состояние переключателя &mdash; &lsquo;<samp>ON</samp>&rsquo; для нажатого переключателя, &lsquo;<samp>OFF</samp>&rsquo; &mdash; для ненажатого переключателя.
</p></dd>
<dt> <b>flavor</b>, &nbsp;&nbsp;<i>значения</i>: <code>&quot;brick&quot;</code>, <code>&quot;bridgewood&quot;</code>, <code>&quot;concrete&quot;</code>, <code>&quot;darkgray&quot;</code>, <code>&quot;gray&quot;</code>, <code>&quot;platinum&quot;</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>&quot;darkgray&quot;</code></dt>
<dd><p>Базовый тип весов.
</p></dd>
<dt> <b>adhesion</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 2.0 &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>friction</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 4.0 &nbsp;&nbsp;См. раздел <a href="#friction">friction</a></dt>
<dt> <b>burnable</b>, &nbsp;&nbsp;<i>значения</i>: boolean; &nbsp;&nbsp;<i>по умолчанию</i>: зависит от атрибута <code>flavor</code> См. раздел <a href="#burnable">burnable</a></dt>
<dd><p>True, если атрибут <code>flavor</code> имеет значение <code>&quot;bridgewood&quot;</code>, в противном случае false.
</p></dd>
<dt> <b>min</b> &nbsp;&nbsp;<i>значения</i>: положительное число с плавающей запятой; &nbsp;&nbsp;<i>по умолчанию</i>: <code>1.8</code></dt>
<dd><p>Единицей измерения массы является масса <a href="#ac_005fmarble">ac_marble</a>.
</p></dd>
</dl>

</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Действие:</b> &nbsp;&nbsp;См. раздел <a href="#target">target</a>, &nbsp;&nbsp;см. раздел <a href="#action">action</a></dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/fl_scales_brick.png" alt="images/fl_scales_brick"><p> <b>fl_scales_brick</b>: flavor = <code>&quot;brick&quot;</code>
</p></dt>
<dt> <img src="images/fl_scales_bridge_bw_closed.png" alt="images/fl_scales_bridge_bw_closed"><p> <b>fl_scales_bridgewood</b>: flavor = <code>&quot;bridgewood&quot;</code>
</p></dt>
<dt> <img src="images/fl_scales_concrete.png" alt="images/fl_scales_concrete"><p> <b>fl_scales_concrete</b>: flavor = <code>&quot;concrete&quot;</code>
</p></dt>
<dt> <img src="images/fl_scales_darkgray.png" alt="images/fl_scales_darkgray"><p> <b>fl_scales_darkgray</b>: flavor = <code>&quot;darkgray&quot;</code>
</p></dt>
<dt> <img src="images/fl_scales_gray.png" alt="images/fl_scales_gray"><p> <b>fl_scales_gray</b>: flavor = <code>&quot;gray&quot;</code>
</p></dt>
<dt> <img src="images/fl_scales_platinum.png" alt="images/fl_scales_platinum"><p> <b>fl_scales_platinum</b>: flavor = <code>&quot;platinum&quot;</code>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="fl_005fslope"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fl_005fscales" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fl_005fswamp" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Floors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fl_005fslope-1"></a>
<h3 class="subsection">7.4.9 fl_slope</h3>
<a name="index-fl_005fslope"></a>

<p>Покрытие, с помощью которого можно создавать холмы, склоны, края стен, лестницы и трубы, по которым могут перекатываться актёры.
</p>
<p>Данный тип покрытия описывается при помощи атрибутов &lsquo;<samp>slope</samp>&rsquo; (склон) и &lsquo;<samp>shape</samp>&rsquo; (форма). Атрибут &lsquo;<samp>slope</samp>&rsquo; определяет направление силы, которая воздействует на актёров, находящихся на вершине склона. В настоящее время поддерживается восемь основных направлений, а также значение &lsquo;<samp>NODIR</samp>&rsquo;, при котором сила на актёра не действует.
</p>
<p>Атрибут &lsquo;shape&rsquo; используется для описания цели использования покрытия, которая в свою очередь определяет форму конкретных участков покрытия. Существуют плоские горизонтальные или вертикальные склоны (<code>&quot;pw&quot;</code>, <code>&quot;ps&quot;</code>, <code>&quot;pe&quot;</code>, <code>&quot;pn&quot;</code>), склоны с диагональной экспозицией внутренних и наружных краёв (<code>&quot;inw&quot;</code>, <code>&quot;isw&quot;</code>, <code>&quot;ise&quot;</code>, <code>&quot;ine&quot;</code>, <code>&quot;onw&quot;</code>, <code>&quot;osw&quot;</code>, <code>&quot;ose&quot;</code>, <code>&quot;one&quot;</code>), центральные части желобов с наклоном по горизонтали или вертикали (<code>&quot;tw&quot;</code>, <code>&quot;ts&quot;</code>, <code>&quot;te&quot;</code>, <code>&quot;tn&quot;</code>), а также правые и левые стенки желобов, которые придают актёрам ускорение как по направлению к продольной оси трубы, так и к её центру (<code>&quot;twl&quot;</code>, <code>&quot;tsl&quot;</code>, <code>&quot;tel&quot;</code>, <code>&quot;tnl&quot;</code>, <code>&quot;twr&quot;</code>, <code>&quot;tsr&quot;</code>, <code>&quot;ter&quot;</code>, <code>&quot;tnr&quot;</code>).
</p>
<p>Обратите внимание, что некоторые формы в настоящее время выглядят одинаково. Но они используются в разных ситуациях и у них разные силы наклона по умолчанию. Мы настоятельно рекомендуем в каждом отдельно взятом случае использовать специально предназначенные для данной цели формы склонов, поскольку в будущем их внешний вид, возможно, улучшится и очевидно подойдёт к вашему уровню.
</p>
<p>Сила, воздействующая на актёров, находящихся на склоне, по умолчанию задаётся глобальным атрибутом <a href="#SlopeStrength">SlopeStrength</a>. Вы можете задать своё значение этой силы с помощью атрибута &lsquo;<samp>strength</samp>&rsquo;. В особых случаях вы даже можете определить отдельные компоненты вектора силы &mdash; &lsquo;<samp>force_x</samp>&rsquo; и &lsquo;<samp>force_y</samp>&rsquo;, которые будут обладать приоритетом над всеми прочими атрибутами величины наклона.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>slope</b>, &nbsp;&nbsp;<i>значения</i>: <code>NODIR</code>, <code>WEST</code>, <code>SOUTH</code>, <code>EAST</code>, <code>NORTH</code>, <code>NORTHWEST</code>, <code>SOUTHWEST</code>, <code>SOUTHEAST</code>, <code>NORTHEAST</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>NODIR</code></dt>
<dd><p>Определяет направление силы. Обратите внимание, что изменение значения данного атрибута не приводит к автоматическому изменению значения атрибута &lsquo;<samp>shape</samp>&rsquo; на более подходящий. Значение данного атрибута не учитывается, если установлены значения для атрибутов &lsquo;<samp>force_x</samp>&rsquo; или &lsquo;<samp>force_y</samp>&rsquo;.
</p>
</dd>
<dt> <b>shape</b>, &nbsp;&nbsp;<i>значения</i>: <code>&quot;&quot;</code>, <code>&quot;pw&quot;</code>, <code>&quot;ps&quot;</code>, <code>&quot;pe&quot;</code>, <code>&quot;pn&quot;</code>, <code>&quot;inw&quot;</code>, <code>&quot;isw&quot;</code>, <code>&quot;ise&quot;</code>, <code>&quot;ine&quot;</code>, <code>&quot;onw&quot;</code>, <code>&quot;osw&quot;</code>, <code>&quot;ose&quot;</code>, <code>&quot;one&quot;</code>, <code>&quot;tw&quot;</code>, <code>&quot;ts&quot;</code>, <code>&quot;te&quot;</code>, <code>&quot;tn&quot;</code>, <code>&quot;twl&quot;</code>, <code>&quot;tsl&quot;</code>, <code>&quot;tel&quot;</code>, <code>&quot;tnl&quot;</code>, <code>&quot;twr&quot;</code>, <code>&quot;tsr&quot;</code>, <code>&quot;ter&quot;</code>, <code>&quot;tnr&quot;</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>&quot;&quot;</code></dt>
<dd><p>Определяет способ использования склона (см. выше). Обратите внимание, что изменение значения данного атрибута не приводит к автоматическому изменению значения атрибута &lsquo;<samp>slope</samp>&rsquo; на более подходящий.
</p>
</dd>
<dt> <b>strength</b> &nbsp;&nbsp;<i>значения</i>: число с плавающей запятой; &nbsp;&nbsp;<i>по умолчанию</i>: <code>25.0</code> &nbsp;&nbsp;См. раздел <a href="#SlopeStrength">SlopeStrength</a></dt>
<dt> <b><b>force_x</b></b> &nbsp;&nbsp;<i>значения</i>: число с плавающей запятой; &nbsp;&nbsp;<i>по умолчанию</i>: <code>0.0</code> &nbsp;&nbsp;См. раздел <a href="#force_005fx">force_x</a></dt>
<dt> <b>force_y</b> &nbsp;&nbsp;<i>значения</i>: число с плавающей запятой; &nbsp;&nbsp;<i>по умолчанию</i>: <code>0.0</code> &nbsp;&nbsp;См. раздел <a href="#force_005fy">force_y</a></dt>
<dt> <b>adhesion</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 2.0 &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>friction</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 4.0 &nbsp;&nbsp;См. раздел <a href="#friction">friction</a></dt>
<dt> <b>burnable</b>, &nbsp;&nbsp;<i>значения</i>: boolean; &nbsp;&nbsp;<i>по умолчанию</i>: false&nbsp;&nbsp;См. раздел <a href="#burnable">burnable</a></dt>
</dl>

</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Разновидности:</b></dt>
<dd><table>
<tr><td width="8%"><img src="images/fl_slope_f.png" alt="images/fl_slope_f"></td><td width="42%"><b>fl_slope</b> slope = &lsquo;<samp>NODIR</samp>&rsquo;, shape = <code>&quot;&quot;</code></td><td width="8%"></td><td width="42%"></td></tr>
<tr><td width="8%"><img src="images/fl_slope_4.png" alt="images/fl_slope_4"></td><td width="42%"><b>fl_slope_pw</b> slope = &lsquo;<samp>WEST</samp>&rsquo;, shape = <code>&quot;pw&quot;</code></td><td width="8%"><img src="images/fl_slope.png" alt="images/fl_slope"></td><td width="42%"><b>fl_slope_ps</b> slope = &lsquo;<samp>SOUTH</samp>&rsquo;, shape = <code>&quot;ps&quot;</code></td></tr>
<tr><td width="8%"><img src="images/fl_slope_3.png" alt="images/fl_slope_3"></td><td width="42%"><b>fl_slope_pe</b> slope = &lsquo;<samp>EAST</samp>&rsquo;, shape = <code>&quot;pe&quot;</code></td><td width="8%"><img src="images/fl_slope_2.png" alt="images/fl_slope_2"></td><td width="42%"><b>fl_slope_pn</b> slope = &lsquo;<samp>NORTH</samp>&rsquo;, shape = <code>&quot;pn&quot;</code></td></tr>
<tr><td width="8%"><img src="images/fl_slope_c4.png" alt="images/fl_slope_c4"></td><td width="42%"><b>fl_slope_inw</b> slope = &lsquo;<samp>NORTHWEST</samp>&rsquo;, shape = <code>&quot;inw&quot;</code></td><td width="8%"><img src="images/fl_slope_c3.png" alt="images/fl_slope_c3"></td><td width="42%"><b>fl_slope_isw</b> slope = &lsquo;<samp>SOUTHWEST</samp>&rsquo;, shape = <code>&quot;isw&quot;</code></td></tr>
<tr><td width="8%"><img src="images/fl_slope_c.png" alt="images/fl_slope_c"></td><td width="42%"><b>fl_slope_ise</b> slope = &lsquo;<samp>SOUTHEAST</samp>&rsquo;, shape = <code>&quot;ise&quot;</code></td><td width="8%"><img src="images/fl_slope_c2.png" alt="images/fl_slope_c2"></td><td width="42%"><b>fl_slope_ine</b> slope = &lsquo;<samp>NORTHEAST</samp>&rsquo;, shape = <code>&quot;ine&quot;</code></td></tr>
<tr><td width="8%"><img src="images/fl_slope_b4.png" alt="images/fl_slope_b4"></td><td width="42%"><b>fl_slope_onw</b> slope = &lsquo;<samp>NORTHWEST</samp>&rsquo;, shape = <code>&quot;onw&quot;</code></td><td width="8%"><img src="images/fl_slope_b2.png" alt="images/fl_slope_b2"></td><td width="42%"><b>fl_slope_osw</b> slope = &lsquo;<samp>SOUTHWEST</samp>&rsquo;, shape = <code>&quot;osw&quot;</code></td></tr>
<tr><td width="8%"><img src="images/fl_slope_b.png" alt="images/fl_slope_b"></td><td width="42%"><b>fl_slope_ose</b> slope = &lsquo;<samp>SOUTHEAST</samp>&rsquo;, shape = <code>&quot;ose&quot;</code></td><td width="8%"><img src="images/fl_slope_b3.png" alt="images/fl_slope_b3"></td><td width="42%"><b>fl_slope_one</b> slope = &lsquo;<samp>NORTHEAST</samp>&rsquo;, shape = <code>&quot;one&quot;</code></td></tr>
<tr><td width="8%"><img src="images/fl_slope_f.png" alt="images/fl_slope_f"></td><td width="42%"><b>fl_slope_tw</b> slope = &lsquo;<samp>WEST</samp>&rsquo;, shape = <code>&quot;tw&quot;</code></td><td width="8%"><img src="images/fl_slope_f.png" alt="images/fl_slope_f"></td><td width="42%"><b>fl_slope_ts</b> slope = &lsquo;<samp>SOUTH</samp>&rsquo;, shape = <code>&quot;ts&quot;</code></td></tr>
<tr><td width="8%"><img src="images/fl_slope_f.png" alt="images/fl_slope_f"></td><td width="42%"><b>fl_slope_te</b> slope = &lsquo;<samp>EAST</samp>&rsquo;, shape = <code>&quot;te&quot;</code></td><td width="8%"><img src="images/fl_slope_f.png" alt="images/fl_slope_f"></td><td width="42%"><b>fl_slope_tn</b> slope = &lsquo;<samp>NORTH</samp>&rsquo;, shape = <code>&quot;tn&quot;</code></td></tr>
<tr><td width="8%"><img src="images/fl_slope_2.png" alt="images/fl_slope_2"></td><td width="42%"><b>fl_slope_twl</b> slope = &lsquo;<samp>NORTHWEST</samp>&rsquo;, shape = <code>&quot;twl&quot;</code></td><td width="8%"><img src="images/fl_slope_4.png" alt="images/fl_slope_4"></td><td width="42%"><b>fl_slope_tsl</b> slope = &lsquo;<samp>SOUTHWEST</samp>&rsquo;, shape = <code>&quot;tsl&quot;</code></td></tr>
<tr><td width="8%"><img src="images/fl_slope.png" alt="images/fl_slope"></td><td width="42%"><b>fl_slope_tel</b> slope = &lsquo;<samp>SOUTHEAST</samp>&rsquo;, shape = <code>&quot;tel&quot;</code></td><td width="8%"><img src="images/fl_slope_3.png" alt="images/fl_slope_3"></td><td width="42%"><b>fl_slope_tnl</b> slope = &lsquo;<samp>NORTHEAST</samp>&rsquo;, shape = <code>&quot;tnl&quot;</code></td></tr>
<tr><td width="8%"><img src="images/fl_slope.png" alt="images/fl_slope"></td><td width="42%"><b>fl_slope_twr</b> slope = &lsquo;<samp>SOUTHWEST</samp>&rsquo;, shape = <code>&quot;twr&quot;</code></td><td width="8%"><img src="images/fl_slope_3.png" alt="images/fl_slope_3"></td><td width="42%"><b>fl_slope_tsr</b> slope = &lsquo;<samp>SOUTHEAST</samp>&rsquo;, shape = <code>&quot;tsr&quot;</code></td></tr>
<tr><td width="8%"><img src="images/fl_slope_2.png" alt="images/fl_slope_2"></td><td width="42%"><b>fl_slope_ter</b> slope = &lsquo;<samp>NORTHEAST</samp>&rsquo;, shape = <code>&quot;ter&quot;</code></td><td width="8%"><img src="images/fl_slope_4.png" alt="images/fl_slope_4"></td><td width="42%"><b>fl_slope_tnr</b> slope = &lsquo;<samp>NORTHWEST</samp>&rsquo;, shape = <code>&quot;tnr&quot;</code></td></tr>
</table>
</dd>
</dl>

<hr size="6">
<a name="fl_005fswamp"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fl_005fslope" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fl_005fthief" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Floors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fl_005fswamp-1"></a>
<h3 class="subsection">7.4.10 fl_swamp</h3>
<a name="index-fl_005fswamp"></a>

<p>Болото &mdash; это липкое покрытие, имеющее высокую силу трения. Кроме того, шарообразные актёры в болоте тонут. Скорость, с которой они тонут, ограничена, что даёт игроку время, определяемое глобальным атрибутом <a href="#SwampSinkTime">SwampSinkTime</a>. Если актёр перемещается со скоростью, превышающей 6&nbsp;участов покрытия в секунду, он начинает выплывать из болота. Прыгая в болоте, актёр также выплывает из него.
</p>
<p>Болото неуничтожимо в том смысле, что <a href="#it_005fcrack">it_crack</a> на него не распространяются. Но огонь, горящий поблизости, высушит болото, оставив после него <a href="#fl_005fdunes">fl_dunes</a> (см. Раздел <a href="#Heat_002dTransformation">Тепловая трансформация</a>). Само болото может быть потомком покрытия <a href="#fl_005fwater">fl_water</a> после его тепловой трансформации.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>adhesion</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 1.0 &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>friction</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 13.0 &nbsp;&nbsp;См. раздел <a href="#friction">friction</a></dt>
<dt> <b>indestructible</b>, &nbsp;&nbsp;<i>значения</i>: bool; &nbsp;&nbsp;<i>по умолчанию</i>: true; &nbsp;&nbsp;<i>доступ</i>: <code>отсутствует</code>  &nbsp;&nbsp;См. раздел <a href="#indestructible">indestructible</a></dt>
<dt> <b>burnable</b>, &nbsp;&nbsp;<i>значения</i>: boolean; &nbsp;&nbsp;<i>по умолчанию</i>: false&nbsp;&nbsp;См. раздел <a href="#burnable">burnable</a></dt>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/fl_swamp.png" alt="images/fl_swamp"><p> <b>fl_swamp</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="fl_005fthief"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fl_005fswamp" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fl_005fwater" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Floors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fl_005fthief-1"></a>
<h3 class="subsection">7.4.11 fl_thief</h3>
<a name="index-fl_005fthief"></a>

<p>Вор крадёт предмет, расположенный на том же участке решётки, а также предмет из инвентаря игрока, который заходит на этот участок покрытия. К сожалению, данный тип покрытия неотличим от <a href="#fl_005fbluegray">fl_bluegray</a>; у них даже одинаковые значения атрибутов &lsquo;<samp>friction</samp>&rsquo; и &lsquo;<samp>adhesion</samp>&rsquo;.
</p>
<p>Когда актёр заходит на участок решётки, предмет из его инвентаря похищается не сразу. Появление актёра просто заставляет вора выглянуть из укрытия. Сама кража происходит в тот момент, когда вор максимально высовывается из укрытия. Он забирает случайный предмет из инвентаря игрока. Но он сможет его украсть только в том случае, если актёр не защищён активированным объектом <a href="#it_005fumbrella">it_umbrella</a>.
</p>
<p>Воры неравнодушны к алкоголю. Если им удастся украсть у игрока бутылку спиртного, то они напиваются и деактивируются.
</p>
<p>У воров есть враг &mdash; <a href="#st_005fchess">st_chess</a>. Если конь прыгнет на вора, он его схватит, трезвого или пьяного. Вор исчезает, оставляя после себя стандартный деактивированный участок покрытия, и конь прыгает на этот участок. Все украденные им предметы вор оставит на этом участке решётки в своей сумке (<a href="#it_005fbag">it_bag</a>). Если вор ещё ничего не украл, то пустую сумку он после себя не оставляет.
</p>
<dl compact="compact">
<dt> <b>Атрибуты: </b>отсутствуют</dt>
<dd><dl compact="compact">
<dt> <b>adhesion</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 1.5 &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>friction</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 4.5 &nbsp;&nbsp;См. раздел <a href="#friction">friction</a></dt>
<dt> <b>burnable</b>, &nbsp;&nbsp;<i>значения</i>: boolean; &nbsp;&nbsp;<i>по умолчанию</i>: false&nbsp;&nbsp;См. раздел <a href="#burnable">burnable</a></dt>
</dl>

</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Действие:</b>  отсутствует</dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/fl_bluegray.png" alt="images/fl_bluegray"><p> <b>fl_thief</b>: hidden
</p></dt>
<dt> <img src="images/fl_thief.png" alt="images/fl_thief"><p> <b>fl_thief</b>: показывается во время кражи предметов
</p></dt>
<dt> <img src="images/fl_thief_capture.png" alt="images/fl_thief_capture"><p> <b>fl_thief</b>: показывается во время поимки
</p></dt>
<dt> <img src="images/fl_thief_drunken.png" alt="images/fl_thief_drunken"><p> <b>fl_thief</b>: пьяный вор
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="fl_005fwater"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fl_005fthief" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fl_005fwood" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Floors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fl_005fwater-1"></a>
<h3 class="subsection">7.4.12 fl_water</h3>
<a name="index-fl_005fwater"></a>

<p>Вода является среди покрытий второй после <a href="#fl_005fabyss">fl_abyss</a> естественной преградой для шарообразных актёров, поскольку они не могут легко через неё перебраться.
</p>
<p>Как <a href="#ac_005fmarble">ac_marble</a>, так и <a href="#ac_005fpearl">ac_pearl</a> тонут в воде &mdash; обычно это происходит сразу же, но время, которое им нужно, чтобы утонуть, может быть указано в глобальном атрибуте <a href="#WaterSinkTime">WaterSinkTime</a>. В отличие от болота (<a href="#fl_005fswamp">fl_swamp</a>), быстро передвигающиеся актёры из воды не выплывают. Но подпрыгнув, актёр может приподняться над водой. Конечно же, более обычный способ переправиться через водную преграду &mdash; это перепрыгнуть через неё. Актёры, защищённые активированным объектом <a href="#it_005fumbrella">it_umbrella</a>, могут преодолевать водные преграды и даже передвигаться по их поверхности без ограничений.
</p>
<p>Некоторые камни также проваливаются в воду. Камень <a href="#st_005fbox">st_box</a> образует мост, по которому все актёры могут перемещаться через участки покрытия, ранее заполненные водой.
</p>
<p>Вода неуничтожима в том смысле, что <a href="#it_005fcrack">it_crack</a> на неё не распространяются. Но огонь, горящий поблизости, высушит воду, оставив после неё <a href="#fl_005fswamp">fl_swamp</a> (см. Раздел <a href="#Heat_002dTransformation">Тепловая трансформация</a>).
</p>
<p>Стандартное водное покрытие статично, то есть, его атрибут &lsquo;<samp>state</samp>&rsquo; имеет значение &lsquo;<samp>IDLE</samp>&rsquo;. Оно не распространяется на близлежащие участки покрытия. Но можно создать потоки воды, которые заполнят области либо будут течь по заданному маршруту. Область можно определить, установив для атрибута &lsquo;<samp>floodable</samp>&rsquo; значение &lsquo;<samp>true</samp>&rsquo;. Для статичных участков воды не требуется атрибут &lsquo;<samp>floodable</samp>&rsquo;, поскольку они являются затапливаемыми по умолчанию.
</p>
<p>Как только вы добавите &lsquo;<samp>fl_water_source</samp>&rsquo; или установите для атрибута &lsquo;<samp>state</samp>&rsquo; значение &lsquo;<samp>FLOODING</samp>&rsquo;, вода начнёт растекаться по соседним затапливаемым участкам решётки со скоростью, указанной в атрибуте &lsquo;<samp>interval</samp>&rsquo;. Эта скорость будет унаследована участками покрытия, которые поток затопит.
</p>
<p>Поскольку на распространение потока воды могут повлиять различные преграды и вода сама может затопить некоторые камни, более подробно водный поток будет рассмотрен в разделе <a href="#Flood-Spreading">Распространение воды</a>.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: <code>IDLE</code>, <code>FLOODING</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>IDLE</code> &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dt> <b>interval</b> &nbsp;&nbsp;<i>значения</i>: положительное число; &nbsp;&nbsp;<i>по умолчанию</i>: <code>0.2</code></dt>
<dd><p>Время (в секундах).
</p></dd>
<dt> <b>indestructible</b>, &nbsp;&nbsp;<i>значения</i>: bool ; &nbsp;&nbsp;<i>по умолчанию</i>: true; &nbsp;&nbsp;<i>доступ</i>: <code>отсутствует</code>  &nbsp;&nbsp;См. раздел <a href="#indestructible">indestructible</a></dt>
<dt> <b>adhesion</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 1.0 &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>friction</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 5.0 &nbsp;&nbsp;См. раздел <a href="#friction">friction</a></dt>
<dt> <b>burnable</b>, &nbsp;&nbsp;<i>значения</i>: boolean; &nbsp;&nbsp;<i>по умолчанию</i>: false&nbsp;&nbsp;См. раздел <a href="#burnable">burnable</a></dt>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/fl_water.png" alt="images/fl_water"><p> <b>fl_water</b>: state = <code>IDLE</code>
</p></dt>
<dt> <img src="images/fl_water.png" alt="images/fl_water"><p> <b>fl_water_source</b>: state = <code>FLOODING</code>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="fl_005fwood"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fl_005fwater" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fl_005fyinyang" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Floors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fl_005fwood-1"></a>
<h3 class="subsection">7.4.13 fl_wood</h3>
<a name="index-fl_005fwood"></a>

<p>Деревянное покрытие в большинстве случаев ведёт себя как стандартное и существует в горизонтальной, вертикальной и случайной разновидностях. Для всех текстур также имеются окаймлённые разновидности.
</p>
<p>Окаймлённая разновидность является потомком упавшего в пропасть камня <a href="#st_005fbox">st_box</a>_wood. Данное покрытие может быть затоплено водой (<a href="#fl_005fwater">fl_water</a>), даже если для атрибута &lsquo;<samp>floodable</samp>&rsquo; не было установлено значение &lsquo;<samp>true</samp>&rsquo;, поскольку вода проникает под покрытие. Окаймлённое покрытие выступает в качестве моста над потоком воды, и вода продолжает разливаться на соседние участки решётки, в то время как по окаймлённому покрытию актёры могут свободно проходить. Окаймлённое покрытие может даже выступать в качестве источника затопления, но мы не рекомендуем использовать это свойство (см. раздел <a href="#Flood-Spreading">Распространение воды</a>).
</p>
<p>При горении <code>fl_wood</code> превращается в <a href="#fl_005fabyss">fl_abyss</a>.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: <code>IDLE</code>, <code>FLOODING</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>IDLE</code> &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dt> <b>interval</b> &nbsp;&nbsp;<i>значения</i>: положительное число; &nbsp;&nbsp;<i>по умолчанию</i>: <code>0.2</code></dt>
<dd><p>Время (в секундах).
</p></dd>
<dt> <b>adhesion</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 2.0 &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>friction</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 6.4 &nbsp;&nbsp;См. раздел <a href="#friction">friction</a></dt>
<dt> <b>burnable</b>, &nbsp;&nbsp;<i>значения</i>: boolean; &nbsp;&nbsp;<i>по умолчанию</i>: true &nbsp;&nbsp;См. раздел <a href="#burnable">burnable</a></dt>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/fl_wood.png" alt="images/fl_wood"><p> <b>fl_wood</b>: texture = random
</p></dt>
<dt> <img src="images/fl_wood_3.png" alt="images/fl_wood_3"><p> <b>fl_wood_h</b>: texture = <code>&quot;h&quot;</code>
</p></dt>
<dt> <img src="images/fl_wood.png" alt="images/fl_wood"><p> <b>fl_wood_v</b>: texture = <code>&quot;v&quot;</code>
</p></dt>
<dt> <img src="images/fl_wood_framed.png" alt="images/fl_wood_framed"><p> <b>fl_wood_framed</b>: texture = random, faces = <code>&quot;nesw&quot;</code>
</p></dt>
<dt> <img src="images/fl_wood_framed.png" alt="images/fl_wood_framed"><p> <b>fl_wood_framed_h</b>: texture = <code>&quot;h&quot;</code>, faces = <code>&quot;nesw&quot;</code>
</p></dt>
<dt> <img src="images/fl_wood_framed_2.png" alt="images/fl_wood_framed_2"><p> <b>fl_wood_framed_v</b>: texture = <code>&quot;v&quot;</code>, faces = <code>&quot;nesw&quot;</code>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="fl_005fyinyang"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fl_005fwood" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Item-Objects" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Floors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fl_005fyinyang-1"></a>
<h3 class="subsection">7.4.14 fl_yinyang</h3>
<a name="index-fl_005fyinyang"></a>

<p>Покрытие, которое позволяет перемещаться только актёрам, управляемым определённым игроком. Базовый тёмно-серый цвет соответствует состоянию &lsquo;<samp>YIN</samp>&rsquo; и на данном покрытии могут ускоряться только актёры, управляемые первым игроком. Белые покрытия Инь-Ян соответствуют состоянию &lsquo;<samp>YANG</samp>&rsquo; и на данном покрытии могут ускоряться только актёры, управляемые вторым игроком.
</p>
<p>На изображении покрытия с четырьмя заклёпками имеется дополнительный символ Инь-Ян, сигнализирующий о том, что важен не цвет актёра, а то, кто этим актёром управляет. Большие области, заполненные участками покрытия с данным символом, вызывают у наблюдателя неприятные эмоции, поэтому отображение символа можно отключить с помощью атрибута &lsquo;<samp>invisible</samp>&rsquo;.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: <code>YIN</code>, <code>YANG</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>YIN</code> &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dt> <b>invisible</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code></dt>
<dt> <b>adhesion</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 2.0 &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>friction</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 5.2 &nbsp;&nbsp;См. раздел <a href="#friction">friction</a></dt>
<dt> <b>burnable</b>, &nbsp;&nbsp;<i>значения</i>: boolean; &nbsp;&nbsp;<i>по умолчанию</i>: false&nbsp;&nbsp;См. раздел <a href="#burnable">burnable</a></dt>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/fl_yinyang_yin.png" alt="images/fl_yinyang_yin"><p> <b>fl_yinyang</b>: state = <code>YIN</code>
</p></dt>
<dt> <img src="images/fl_yinyang_yin.png" alt="images/fl_yinyang_yin"><p> <b>fl_yinyang_yin</b>: state = <code>YIN</code>
</p></dt>
<dt> <img src="images/fl_yinyang_yang.png" alt="images/fl_yinyang_yang"><p> <b>fl_yinyang_yang</b>: state = <code>YANG</code>
</p></dt>
</dl>
</dd>
</dl>


<hr size="6">
<a name="Item-Objects"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fl_005fyinyang" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Item-Overview" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Floor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Item-Objects-1"></a>
<h1 class="chapter">8. Предметы</h1>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Item-Overview">8.1 Обзор предметов</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Item-Attributes">8.2 Атрибуты предметов</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Liftable-Items">8.3 Переносные предметы</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Static-Items">8.4 Статичные предметы</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Item-Overview"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Item-Attributes" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Item-Overview-1"></a>
<h2 class="section">8.1 Обзор предметов</h2>

<table>
<tr><td width="8%"><img src="images/it_bag.png" alt="images/it_bag"></td><td width="25%"><a href="#it_005fbag">it_bag</a></td><td width="8%"><img src="images/it_banana.png" alt="images/it_banana"></td><td width="25%"><a href="#it_005fbanana">it_banana</a></td><td width="9%"><img src="images/st_blocker_4.png" alt="images/st_blocker_4"></td><td width="25%"><a href="#it_005fblocker">it_blocker</a></td></tr>
<tr><td width="8%"><img src="images/it_bomb.png" alt="images/it_bomb"></td><td width="25%"><a href="#it_005fbomb">it_bomb</a>_black</td><td width="8%"><img src="images/it_bomb_b.png" alt="images/it_bomb_b"></td><td width="25%"><a href="#it_005fbomb">it_bomb</a>_white</td><td width="9%"><img src="images/it_bottle_idle.png" alt="images/it_bottle_idle"></td><td width="25%"><a href="#it_005fbottle">it_bottle</a></td></tr>
<tr><td width="8%"><img src="images/it_bottle_broken.png" alt="images/it_bottle_broken"></td><td width="25%"><a href="#it_005fbottle">it_bottle</a>_broken</td><td width="8%"><img src="images/st_brake.png" alt="images/st_brake"></td><td width="25%"><a href="#it_005fbrake">it_brake</a></td><td width="9%"><img src="images/it_brush.png" alt="images/it_brush"></td><td width="25%"><a href="#it_005fbrush">it_brush</a></td></tr>
<tr><td width="8%"><img src="images/it_burnable_ash.png" alt="images/it_burnable_ash"></td><td width="25%"><a href="#it_005fburnable">it_burnable</a>_ash</td><td width="8%"><img src="images/it_burnable_burning.png" alt="images/it_burnable_burning"></td><td width="25%"><a href="#it_005fburnable">it_burnable</a>_burning</td><td width="9%"><img src="images/it_burnable_fireproof.png" alt="images/it_burnable_fireproof"></td><td width="25%"><a href="#it_005fburnable">it_burnable</a>_fireproof</td></tr>
<tr><td width="8%"><img src="images/it_burnable_oil.png" alt="images/it_burnable_oil"></td><td width="25%"><a href="#it_005fburnable">it_burnable</a>_oil</td><td width="8%"><img src="images/it_cherry.png" alt="images/it_cherry"></td><td width="25%"><a href="#it_005fcherry">it_cherry</a></td><td width="9%"><img src="images/it_coffee.png" alt="images/it_coffee"></td><td width="25%"><a href="#it_005fcoffee">it_coffee</a></td></tr>
<tr><td width="8%"><img src="images/it_coin_s.png" alt="images/it_coin_s"></td><td width="25%"><a href="#it_005fcoin">it_coin</a>_s</td><td width="8%"><img src="images/it_coin_m.png" alt="images/it_coin_m"></td><td width="25%"><a href="#it_005fcoin">it_coin</a>_m</td><td width="9%"><img src="images/it_coin_l.png" alt="images/it_coin_l"></td><td width="25%"><a href="#it_005fcoin">it_coin</a>_l</td></tr>
<tr><td width="8%"><img src="images/it_crack_abyss.png" alt="images/it_crack_abyss"></td><td width="25%"><a href="#it_005fcrack">it_crack</a>_abyss</td><td width="8%"><img src="images/it_crack_water.png" alt="images/it_crack_water"></td><td width="25%"><a href="#it_005fcrack">it_crack</a>_water</td><td width="9%"><img src="images/it_cross.png" alt="images/it_cross"></td><td width="25%"><a href="#it_005fcross">it_cross</a></td></tr>
<tr><td width="8%"><img src="images/it_death.png" alt="images/it_death"></td><td width="25%"><a href="#it_005fdeath">it_death</a></td><td width="8%"><img src="images/it_document.png" alt="images/it_document"></td><td width="25%"><a href="#it_005fdocument">it_document</a></td><td width="9%"><img src="images/it_drop.png" alt="images/it_drop"></td><td width="25%"><a href="#it_005fdrop">it_drop</a></td></tr>
<tr><td width="8%"><img src="images/it_dynamite.png" alt="images/it_dynamite"></td><td width="25%"><a href="#it_005fdynamite">it_dynamite</a></td><td width="8%"><img src="images/it_explosion.png" alt="images/it_explosion"></td><td width="25%"><a href="#it_005fexplosion">it_explosion</a></td><td width="9%"><img src="images/it_extinguisher.png" alt="images/it_extinguisher"></td><td width="25%"><a href="#it_005fextinguisher">it_extinguisher</a></td></tr>
<tr><td width="8%"><img src="images/it_extralife.png" alt="images/it_extralife"></td><td width="25%"><a href="#it_005fextralife">it_extralife</a></td><td width="8%"><img src="images/it_flag_black.png" alt="images/it_flag_black"></td><td width="25%"><a href="#it_005fflag">it_flag</a>_black</td><td width="9%"><img src="images/it_flag_white.png" alt="images/it_flag_white"></td><td width="25%"><a href="#it_005fflag">it_flag</a>_white</td></tr>
<tr><td width="8%"><img src="images/it_floppy.png" alt="images/it_floppy"></td><td width="25%"><a href="#it_005ffloppy">it_floppy</a></td><td width="8%"><img src="images/it_glasses.png" alt="images/it_glasses"></td><td width="25%"><a href="#it_005fglasses">it_glasses</a></td><td width="9%"><img src="images/it_glasses_broken.png" alt="images/it_glasses_broken"></td><td width="25%"><a href="#it_005fglasses">it_glasses</a>_broken</td></tr>
<tr><td width="8%"><img src="images/it_hammer.png" alt="images/it_hammer"></td><td width="25%"><a href="#it_005fhammer">it_hammer</a></td><td width="8%"><img src="images/it_key.png" alt="images/it_key"></td><td width="25%"><a href="#it_005fkey">it_key</a></td><td width="9%"><img src="images/it_landmine.png" alt="images/it_landmine"></td><td width="25%"><a href="#it_005flandmine">it_landmine</a></td></tr>
<tr><td width="8%"><img src="images/it_laser.png" alt="images/it_laser"></td><td width="25%"><a href="#it_005flaserbeam">it_laserbeam</a></td><td width="8%"><img src="images/it_magicwand.png" alt="images/it_magicwand"></td><td width="25%"><a href="#it_005fmagicwand">it_magicwand</a></td><td width="9%"><img src="images/it_magnet_off.png" alt="images/it_magnet_off"></td><td width="25%"><a href="#it_005fmagnet">it_magnet</a></td></tr>
<tr><td width="8%"><img src="images/it_meditation_bump.png" alt="images/it_meditation_bump"></td><td width="25%"><a href="#it_005fmeditation">it_meditation</a>_bump</td><td width="8%"><img src="images/it_meditation_caldera.png" alt="images/it_meditation_caldera"></td><td width="25%"><a href="#it_005fmeditation">it_meditation</a>_caldera</td><td width="9%"><img src="images/it_meditation_dent.png" alt="images/it_meditation_dent"></td><td width="25%"><a href="#it_005fmeditation">it_meditation</a>_dent</td></tr>
<tr><td width="8%"><img src="images/it_meditation_hill.png" alt="images/it_meditation_hill"></td><td width="25%"><a href="#it_005fmeditation">it_meditation</a>_hill</td><td width="8%"><img src="images/it_meditation_hollow.png" alt="images/it_meditation_hollow"></td><td width="25%"><a href="#it_005fmeditation">it_meditation</a>_hollow</td><td width="9%"><img src="images/it_meditation_volcano.png" alt="images/it_meditation_volcano"></td><td width="25%"><a href="#it_005fmeditation">it_meditation</a>_volcano</td></tr>
<tr><td width="8%"><img src="images/it_pencil.png" alt="images/it_pencil"></td><td width="25%"><a href="#it_005fpencil">it_pencil</a></td><td width="8%"><img src="images/it_pin.png" alt="images/it_pin"></td><td width="25%"><a href="#it_005fpin">it_pin</a></td><td width="9%"><img src="images/it_pipe_e.png" alt="images/it_pipe_e"></td><td width="25%"><a href="#it_005fpipe">it_pipe</a></td></tr>
<tr><td width="8%"><img src="images/it_puller.png" alt="images/it_puller"></td><td width="25%"><a href="#it_005fpuller">it_puller</a></td><td width="8%"><img src="images/it_ring.png" alt="images/it_ring"></td><td width="25%"><a href="#it_005fring">it_ring</a></td><td width="9%"><img src="images/it_rubberband.png" alt="images/it_rubberband"></td><td width="25%"><a href="#it_005frubberband">it_rubberband</a></td></tr>
<tr><td width="8%"><img src="images/it_seed.png" alt="images/it_seed"></td><td width="25%"><a href="#it_005fseed">it_seed</a></td><td width="8%"><img src="images/it_sensor.png" alt="images/it_sensor"></td><td width="25%"><a href="#it_005fsensor">it_sensor</a></td><td width="9%"><img src="images/it_sensor_exit.png" alt="images/it_sensor_exit"></td><td width="25%"><a href="#it_005fsensor">it_sensor</a>_exit</td></tr>
<tr><td width="8%"><img src="images/it_shogun_m.png" alt="images/it_shogun_m"></td><td width="25%"><a href="#it_005fshogun">it_shogun</a></td><td width="8%"><img src="images/it_spade.png" alt="images/it_spade"></td><td width="25%"><a href="#it_005fspade">it_spade</a></td><td width="9%"><img src="images/it_spoon.png" alt="images/it_spoon"></td><td width="25%"><a href="#it_005fspoon">it_spoon</a></td></tr>
<tr><td width="8%"><img src="images/it_springboard.png" alt="images/it_springboard"></td><td width="25%"><a href="#it_005fspringboard">it_springboard</a></td><td width="8%"><img src="images/it_spring_2.png" alt="images/it_spring_2"></td><td width="25%"><a href="#it_005fspring">it_spring</a>_drop</td><td width="9%"><img src="images/it_spring.png" alt="images/it_spring"></td><td width="25%"><a href="#it_005fspring">it_spring</a>_keep</td></tr>
<tr><td width="8%"><img src="images/it_squashed.png" alt="images/it_squashed"></td><td width="25%"><a href="#it_005fsquashed">it_squashed</a></td><td width="8%"><img src="images/it_strip_b2.png" alt="images/it_strip_b2"></td><td width="25%"><a href="#it_005fstrip">it_strip</a>_ew</td><td width="9%"><img src="images/it_surprise.png" alt="images/it_surprise"></td><td width="25%"><a href="#it_005fsurprise">it_surprise</a></td></tr>
<tr><td width="8%"><img src="images/it_sword.png" alt="images/it_sword"></td><td width="25%"><a href="#it_005fsword">it_sword</a></td><td width="8%"><img src="images/it_trap.png" alt="images/it_trap"></td><td width="25%"><a href="#it_005ftrap">it_trap</a></td><td width="9%"><img src="images/it_trigger.png" alt="images/it_trigger"></td><td width="25%"><a href="#it_005ftrigger">it_trigger</a></td></tr>
<tr><td width="8%"><img src="images/it_umbrella.png" alt="images/it_umbrella"></td><td width="25%"><a href="#it_005fumbrella">it_umbrella</a></td><td width="8%"><img src="images/it_vortex.png" alt="images/it_vortex"></td><td width="25%"><a href="#it_005fvortex">it_vortex</a></td><td width="9%"><img src="images/it_weight.png" alt="images/it_weight"></td><td width="25%"><a href="#it_005fweight">it_weight</a></td></tr>
<tr><td width="8%"><img src="images/it_wormhole.png" alt="images/it_wormhole"></td><td width="25%"><a href="#it_005fwormhole">it_wormhole</a></td><td width="8%"><img src="images/it_wrench.png" alt="images/it_wrench"></td><td width="25%"><a href="#it_005fwrench">it_wrench</a></td><td width="9%"><img src="images/it_yinyang.png" alt="images/it_yinyang"></td><td width="25%"><a href="#it_005fyinyang">it_yinyang</a></td></tr>
</table>

<hr size="6">
<a name="Item-Attributes"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Item-Overview" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#fireproof" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Item-Attributes-1"></a>
<h2 class="section">8.2 Атрибуты предметов</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#fireproof">8.2.1 fireproof (огнеупорность)</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         -
</td></tr>
<tr><td align="left" valign="top"><a href="#freezable">8.2.2 freezable</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         Способность быть замороженным во льду
</td></tr>
<tr><td align="left" valign="top"><a href="#liftable">8.2.3 liftable</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Возможность быть подобранным актёрами
</td></tr>
<tr><td align="left" valign="top"><a href="#portable">8.2.4 portable</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Возможность добавить предмет в инвентарь
</td></tr>
</table>


<hr size="6">
<a name="fireproof"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Item-Attributes" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#freezable" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="fireproof-1"></a>
<h3 class="subsection">8.2.1 fireproof (огнеупорность)</h3>


<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;boolean</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;<code>false</code>, <code>true</code></dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>false</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
</dl>


<hr size="6">
<a name="freezable"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#fireproof" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#liftable" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="freezable-1"></a>
<h3 class="subsection">8.2.2 freezable</h3>

<p>Описывает способность предмета быть замороженным в куске льда (<a href="#st_005fice">st_ice</a>). Все <a href="#portable">портативные предметы</a> являются также замораживаемыми. Но некоторые статичные предметы также можно заморозить.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;boolean</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;<code>false</code>, <code>true</code></dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>false</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read only</dt>
</dl>


<hr size="6">
<a name="liftable"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#freezable" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#portable" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="liftable-1"></a>
<h3 class="subsection">8.2.3 liftable</h3>

<p>Данный атрибут указывает, может ли предмет быть подобран <a href="#Actors">актёрами</a> с покрытия. Обратите внимание, что некоторые предметы, после того как они были помещены в инвентарь и после этого положены на покрытие, нельзя снова подобрать.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;boolean</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;<code>false</code>, <code>true</code></dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>false</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read only</dt>
</dl>


<hr size="6">
<a name="portable"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#liftable" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Liftable-Items" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="portable-1"></a>
<h3 class="subsection">8.2.4 portable</h3>

<p>Данный атрибут указывает, может ли предмет быть добавлен в инвентарь игрока. Все <a href="#liftable">переносные</a> предметы являются портативными. Портативные предметы, не являющиеся переносными, можно добавить в инвентарь при помощи метода мира <a href="#add">add</a> либо посредством соприкосновения актёра с раздаточным устройством (<a href="#st_005fdispenser">st_dispenser</a>).
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;boolean</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;<code>false</code>, <code>true</code></dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>false</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read only</dt>
</dl>


<hr size="6">
<a name="Liftable-Items"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#portable" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005fbag" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Liftable-Items-1"></a>
<h2 class="section">8.3 Переносные предметы</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#it_005fbag">8.3.1 it_bag</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">             Портативная сумка для предметов
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005fbanana">8.3.2 it_banana</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Трансформируемый банан
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005fbottle">8.3.3 it_bottle</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Бутылка спиртного
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005fbrake">8.3.4 it_brake</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Передвижной камень-тормоз
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005fbrush">8.3.5 it_brush</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Щётка для рисования и уборки
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005fcherry">8.3.6 it_cherry</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Источник невидимости
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005fcoffee">8.3.7 it_coffee</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Чашка кофе
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005fcoin">8.3.8 it_coin</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Валюта Enigma
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005fdocument">8.3.9 it_document</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        Читаемый текстовый документ
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005fdrop">8.3.10 it_drop</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Волшебный эликсир превращения
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005fdynamite">8.3.11 it_dynamite</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        Взрыватель
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005fextinguisher">8.3.12 it_extinguisher</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">    Огнетушитель
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005fextralife">8.3.13 it_extralife</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       Ещё одна жизнь или очки
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005fflag">8.3.14 it_flag</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Маркер точки восстановления
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005ffloppy">8.3.15 it_floppy</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Некодированная дискета, открывающая замки
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005fglasses">8.3.16 it_glasses</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         Очки, чтобы разглядеть определённые объекты
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005fhammer">8.3.17 it_hammer</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Молоток, разбивающий камни
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005fkey">8.3.18 it_key</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">             Кодированный ключ, открывающий замки
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005fmagicwand">8.3.19 it_magicwand</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       Волшебные инструменты
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005fpencil">8.3.20 it_pencil</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Карандаш для маркировки объектов
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005fpin">8.3.21 it_pin</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">             Шип, увеличивающий трение
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005fpipe">8.3.22 it_pipe</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Труба для передачи объектов
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005fpuller">8.3.23 it_puller</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Предмет для перемещения камней
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005fring">8.3.24 it_ring</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Предмет для обмена местоположениями
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005frubberband">8.3.25 it_rubberband</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">      Неприсоединённая резиновая лента
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005fseed">8.3.26 it_seed</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Семена ящиков и вулканических камней
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005fspade">8.3.27 it_spade</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Лопата, закапывающая отверстия для медитации
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005fspoon">8.3.28 it_spoon</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Управляемое средство самоубийства
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005fspring">8.3.29 it_spring</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Портативная пружина
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005fsurprise">8.3.30 it_surprise</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        Предмет, превращающийся в другой случайный предмет
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005fsword">8.3.31 it_sword</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Мечь, которым можно победить рыцаря
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005fumbrella">8.3.32 it_umbrella</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        Защитит ваш шарик от смерти
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005fweight">8.3.33 it_weight</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Портативная гиря
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005fwrench">8.3.34 it_wrench</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Гаечный ключ для механических камней
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005fyinyang">8.3.35 it_yinyang</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         Переключатель игроков
</td></tr>
</table>

<hr size="6">
<a name="it_005fbag"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Liftable-Items" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005fbanana" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Liftable-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005fbag-1"></a>
<h3 class="subsection">8.3.1 it_bag</h3>
<a name="index-it_005fbag"></a>

<p>Сумка &mdash; это переносной контейнер, в который можно класть другие предметы. В неё можно поместить до 13 предметов, в том числе и другие сумки (полные либо пустые).
</p>
<p>Сумка даёт игроку возможность положить в инвентарь более 13 предметов. Тем не менее, большинство предметов игрок не может использовать, пока они находятся в сумке. Только <a href="#it_005fweight">it_weight</a> воздействует на игрока, даже когда она находится в сумке. С другой стороны, сумка даёт игроку возможность переносить с места на место даже те предметы, которые в других случаях были бы активированы. Например, объект <a href="#it_005fcherry">it_cherry</a> нельзя удалить из инвентаря не активировав, но если она находится в сумке, то сумку можно положить на пол и потом вынуть вишню оттуда. С помощью сумки также удобно пересылать сразу несколько предметов по <a href="#st_005fmail">st_mail</a>.
</p>
<p>Если <code>it_bag</code> находится слева в инвентаре, то предметы, которые подбирает игрок, кладутся туда, пока она не заполнится (всего в сумку можно положить 13 предметов). Игрок может в любое время выбросить сумку из инвентаря.  Если её снова подобрать, то содержимое сумки перемещается в инвентарь, пока он не заполнится.
</p>
<p>Довольно сложные правила, которым подчиняется транспортировка предметов игроком, более детально объяснены ниже:
</p>
<ol>
<li>
Как в инвентаре, так и в сумке, может одновременно находиться не более 13 предметов.

</li><li>
Последний подобранный игроком предмет обычно находится &quot;ближе&quot; и вынимается первым как из инвентаря, так и из сумки, но содержимое инвентаря, в отличие от сумки, можно прокручивать.

</li><li>
Если вы подберёте любой предмет, кроме сумки, а слева в инвентаре также находится любой предмет, кроме сумки, то подобранный вами предмет добавляется в инвентарь.

</li><li>
Если вы подберёте любой предмет, кроме непустой сумки, а слева в инвентаре находится сумка, предмет помещается в сумку. Непустые сумки также кладутся в сумку, находящуюся слева в инвентаре.

</li><li>
Опорожнить сумку можно, удалив её из инвентаря и снова подобрав (слева в инвентаре при этом не должна находиться другая сумка). При этом в инвентарь из сумки перемещается максимально возможное количество предметов.

</li><li>
Пустую сумку нельзя положить в другую сумку (это вызвало бы неустранимые проблемы рекурсивности). Её можно поместить только в инвентарь на тех же основаниях, что и другие предметы.

</li><li>
Если содержимое сумки, которую хочет взять игрок, не может переместиться в инвентарь или слева в инвентаре уже находится наполненная до краёв сумка, то сумка остаётся на полу вместе с предметами, которые не поместились в инвентарь.

</li></ol>

<p>С помощью метода <a href="#add">add</a> можно добавлять предметы прямо в сумку.
</p>
<p>Сумки также используются ворами (<a href="#st_005fthief">st_thief</a> и <a href="#fl_005fthief">fl_thief</a>), чтобы переносить украденные ими предметы. Если вора поймает <a href="#st_005fchess">st_chess</a>, то на участке решётки останется сумка с украденными вором предметами.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
<dt> <b>mass</b> &nbsp;&nbsp;<i>значения</i>: положительное число с плавающей запятой; &nbsp;&nbsp;<i>по умолчанию</i>: <code>0.0</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code></dt>
<dd><p>Сумма масс всех предметов в сумке. На данный момент массой обладает только <a href="#it_005fweight">it_weight</a>.
</p></dd>
</dl>

</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/it_bag.png" alt="images/it_bag"><p> <b>it_bag</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="it_005fbanana"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005fbag" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005fbottle" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Liftable-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005fbanana-1"></a>
<h3 class="subsection">8.3.2 it_banana</h3>
<a name="index-it_005fbanana"></a>

<p>Переносной предмет, не имеющий какого-либо конкретного применения. Но если на него направить лазерный луч, то он превращается в <a href="#it_005fcherry">it_cherry</a>.
</p>
<p>Если на банан сдвинуть камень, то от банана останется только <a href="#it_005fsquashed">it_squashed</a>.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
</dl>
</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/it_banana.png" alt="images/it_banana"><p> <b>it_banana</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="it_005fbottle"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005fbanana" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005fbrake" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Liftable-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005fbottle-1"></a>
<h3 class="subsection">8.3.3 it_bottle</h3>
<a name="index-it_005fbottle"></a>

<p>Бутылка, в которой может находиться спиртное или сообщение. Когда бутылка разбивается, после неё остаются смертоносные осколки.
</p>
<p>Если любой шарообразный актёр активирует бутылку, наполненную спиртным, он становится пьяным. Управлять им становится сложно, так как он, скорее всего, не будет перемещаться по прямой в указанном направлении. К счастью, состояние опьянения по умолчанию длится всего 5&nbsp;секунд. Но это время можно изменить, установив для атрибута &lsquo;<samp>interval</samp>&rsquo; другое значение. При активации бутылка будет уронена.  Активация нескольких бутылок подряд приводит к увеличению продолжительности опьянения, поскольку их временные интервалы суммируются.
</p>
<p>С помощью атрибута &lsquo;<samp>text</samp>&rsquo; в бутылку вместо спиртного можно поместить сообщение. Как и в случае с объектом <a href="#it_005fdocument">it_document</a>, сообщение отображается при активации. Конечно же, актёр при этом не напивается.
</p>
<p>Если на бутылку сдвинуть камень, от неё	 останутся одни осколки. Эти осколки являются смертельными для актёров <a href="#ac_005fmarble">ac_marble</a> и <a href="#ac_005fpearl">ac_pearl</a>, зашедших на участок решётки, на котором они лежат.  Но, конечно же, через осколки можно перепрыгнуть или пройти по ним, активировав <a href="#it_005fumbrella">it_umbrella</a>. В отличие от объекта <a href="#it_005fdeath">it_death</a>, актёр может убрать осколки разбитой бутылки с помощью объекта <a href="#it_005fbrush">it_brush</a>, перепрыгнув через них или пройдя по ним с активированным зонтиком. Но разбитую бутылку нельзя подобрать и она не является портируемой.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: <code>IDLE</code>, <code>BROKEN</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>BROKEN</code> &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dt> <b>interval</b> &nbsp;&nbsp;<i>значения</i>: положительное число; &nbsp;&nbsp;<i>по умолчанию</i>: <code>5.0</code></dt>
<dd><p>Время в секундах, которое длится состояние опьянения актёра.
</p></dd>
<dt> <b>text</b>, &nbsp;&nbsp;<i>значения</i>: string;</dt>
<dd><p>Текст, который необходимо отобразить, или просто ключевое слово для идентификации при <a href="#Internationalization-_0028i18n_0029">интернационализации (i18n)</a>.
</p></dd>
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dd><p>Только бутылка со значением &lsquo;<samp>IDLE</samp>&rsquo; является переносной, со значением &lsquo;<samp>BROKEN</samp>&rsquo; &mdash; нет.
</p></dd>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
<dd><p>Только бутылка со значением &lsquo;<samp>IDLE</samp>&rsquo; является портируемой, со значением &lsquo;<samp>BROKEN</samp>&rsquo; &mdash; нет.
</p></dd>
</dl>

</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/it_bottle_idle.png" alt="images/it_bottle_idle"><p> <b>it_bottle</b>: state = <code>IDLE</code>
</p></dt>
<dt> <img src="images/it_bottle_idle.png" alt="images/it_bottle_idle"><p> <b>it_bottle_idle</b>: state = <code>IDLE</code>
</p></dt>
<dt> <img src="images/it_bottle_broken.png" alt="images/it_bottle_broken"><p> <b>it_bottle_broken</b>: state = <code>BROKEN</code>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="it_005fbrake"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005fbottle" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005fbrush" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Liftable-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005fbrake-1"></a>
<h3 class="subsection">8.3.4 it_brake</h3>
<a name="index-it_005fbrake"></a>

<p>Тормоз &mdash; это камень, который актёры могут подобрать в виде предмета. Его можно использовать, чтобы остановить движущийся <a href="#st_005fboulder">st_boulder</a> или <a href="#st_005flightpassenger">st_lightpassenger</a>, отсюда, очевидно, и его название.
</p>
<p>Когда актёр проходит под камнем-тормозом, он подбирает его точно так же, как и любой другой предмет. Тормоз будет добавлен в его инвентарь в виде предмета. В отличие от других предметов, тормоз можно поместить даже на участок решётки, уже занятый предметом. Но в отличие от <a href="#it_005fseed">it_seed</a>, его нельзя положить под другой камень.
</p>
<p>Если тормоз положить на участок покрытия, он немедленно превращается в <a href="#st_005fbrake">st_brake</a>, не уничтожая другой предмет, находящийся на участке решётки. Камень-тормоз может нажимать на находящийся под ним <a href="#it_005ftrigger">it_trigger</a>, что делает его своего рода переносным ключом для триггеров.
</p>
<p>Сам предмет не может существовать на решётке игрового мира. Он существует только как часть инвентаря игрока либо вместилищ для предметов, таких как <a href="#it_005fbag">it_bag</a>.
</p>
<p>В соответствии с принципом снимка (см. раздел <a href="#Snapshot-Principle">Принцип снимка</a>) вы никогда не должны создавать экземпляры этого объекта сами. Вместо этого поместите на участок решётки <a href="#st_005fbrake">st_brake</a>. Этот предмет упоминается в данном разделе для того, чтобы вы понимали, что происходит с тормозом, когда игрок помещает его в инвентарь, и могли идентифицировать <a href="#Object-Kind">Тип объекта</a> &lsquo;<samp>it_brake</samp>&rsquo; в инвентаре или вместилище предметов.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dd><p>Хотя тормоз и является замораживаемым, в виде предмета он замёрзнуть не может, поскольку, если его поместить на покрытие, он всегда трансформируется в <a href="#st_005fbrake">st_brake</a>.
</p></dd>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
</dl>
</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_brake.png" alt="images/st_brake"><p> <b>it_brake</b>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="it_005fbrush"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005fbrake" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005fcherry" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Liftable-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005fbrush-1"></a>
<h3 class="subsection">8.3.5 it_brush</h3>
<a name="index-it_005fbrush"></a>

<p>Щётка, с помощью которой можно покрасить некоторые камни или же смести некоторые статичные предметы.
</p>
<p>Камней следует касаться, когда щётка расположена в левой части инвентаря. Чтобы смести ненужные предметы, актёр должен использовать щётку стоя, прыгая или пролетая над нужным участком решётки:
</p>
<ul>
<li> <a href="#st_005factorimpulse">st_actorimpulse</a>, невидимый &mdash; делает видимой невидимую разновидность камня
</li><li> <a href="#st_005fblur">st_blur</a>, магический &mdash; преобразует в <a href="#st_005fpassage">st_passage</a>
</li><li> <a href="#st_005fflat">st_flat</a>, горючий &mdash; преобразует в <a href="#st_005fflat">st_flat</a>
</li><li> <a href="#st_005fflat">st_flat</a>, подвижный и горючий &mdash; преобразует в <a href="#st_005fflat">st_flat</a>_movable
</li><li> <a href="#st_005fghost">st_ghost</a>, пурпурно-мраморный &mdash; преобразует в <a href="#st_005fpurplemarble">st_purplemarble</a>
</li><li> <a href="#st_005fghost">st_ghost</a>, тормоз &mdash; преобразует в <a href="#st_005fbreak">st_break</a>_oxydc
</li><li> <a href="#st_005flightpassenger">st_lightpassenger</a>, выключен &mdash; меняет состояние на &lsquo;<samp>ON</samp>&rsquo;
</li><li> <a href="#it_005fbottle">it_bottle</a>, разбитая бутылка &mdash; убирает с покрытия
</li><li> <a href="#it_005fburnable">it_burnable</a>, пепел &mdash; убирает с покрытия
</li><li> <a href="#it_005fburnable">it_burnable</a>, огнеупорный &mdash; убирает с покрытия
</li><li> <a href="#it_005fcross">it_cross</a> &mdash; убирает с покрытия
</li><li> <a href="#it_005fsquashed">it_squashed</a> &mdash; убирает с покрытия
</li></ul>

<p>Щётка чувствительна к лазерным лучам и при попадании на неё лазера разрушается, трансформируясь в объект <a href="#it_005fexplosion">it_explosion</a>_nil и исчезая без остатка.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
</dl>
</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/it_brush.png" alt="images/it_brush"><p> <b>it_brush</b>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="it_005fcherry"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005fbrush" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005fcoffee" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Liftable-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005fcherry-1"></a>
<h3 class="subsection">8.3.6 it_cherry</h3>
<a name="index-it_005fcherry"></a>

<p>Волшебная ягода, которая на восемь секунд делает активировавшего её актёра невидимым. Но невидимыми могут стать не все актёры. Исчезают только шарообразные актёры, такие как <a href="#ac_005fmarble">ac_marble</a> и <a href="#ac_005fpearl">ac_pearl</a>.
</p>
<p>Невидимые актёры могут проходить сквозь большинство разновидностей стеклянных камней (см. раздел <a href="#Transparent-Stones">Прозрачные камни</a>) и, будучи невидимыми, они не привлекают внимания враждебных им актёров <a href="#ac_005frotor">ac_rotor</a> и <a href="#ac_005ftop">ac_top</a>.
</p>
<p>Если игрок активирует несколько вишен подряд, то каждая продлевает время невидимости актёра на восемь секунд.
</p>
<p>Прочие актёры при активвации вишни роняют её в виде <a href="#it_005fsquashed">it_squashed</a>. При пересылке посредством камня <a href="#st_005fmail">st_mail</a> вишня также превращается в <a href="#it_005fsquashed">it_squashed</a>. Это позволяет гарантировать, что вишня, добавленная в инвентарь одного игрока, не может быть легко передана актёрам, управляемым другим игроком. Украсть вишню, не раздавив её при этом, могут только объекты <a href="#st_005fthief">st_thief</a> и <a href="#fl_005fthief">fl_thief</a>.
</p>
<p>Если на вишню сдвинуть камень, то от неё останется только <a href="#it_005fsquashed">it_squashed</a>.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
</dl>
</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/it_cherry.png" alt="images/it_cherry"><p> <b>it_cherry</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="it_005fcoffee"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005fcherry" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005fcoin" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Liftable-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005fcoffee-1"></a>
<h3 class="subsection">8.3.7 it_coffee</h3>
<a name="index-it_005fcoffee"></a>

<p>Абсолютно пассивная чашка кофе. Её можно поднимать и класть на пол сколько угодно раз. Она блокирует лазерные лучи, не даёт распространяться трещинам (<a href="#it_005fcrack">it_crack</a>), но горит в огне и разрушается при взрывах <a href="#it_005fbomb">it_bomb</a>. 
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
</dl>
</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/it_coffee.png" alt="images/it_coffee"><p> <b>it_coffee</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="it_005fcoin"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005fcoffee" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005fdocument" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Liftable-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005fcoin-1"></a>
<h3 class="subsection">8.3.8 it_coin</h3>
<a name="index-it_005fcoin"></a>

<p>Монета активирует объект <a href="#st_005fcoinslot">st_coinslot</a>, если её опустить туда, дотронувшись до камня, когда она находится слева в инвентаре. Длительность наблюдаемого эффекта зависит от типа монеты, выраженного атрибутом &lsquo;<samp>state</samp>&rsquo;. Существуют три типа монет: наименьшего, среднего и наивысшего достоинства.
</p>
<p>Если на монету поместить камень, её достоинство увеличивается с наименьшего до среднего и со среднего до наивысшего.
</p>
<p>Под воздействием лазера монета наименьшего достоинства трансформируется в <a href="#it_005fumbrella">it_umbrella</a>, монета среднего достоинства &mdash; в <a href="#it_005fhammer">it_hammer</a>, а наивысшего &mdash; в <a href="#it_005fextralife">it_extralife</a>.
</p>
<p>Монета, созданная на пути включенного лазера, не будет подвергаться трансформации. Но она сможет трансформироваться при выключении и повторном включении этого же лазера или при включении дополнительного лазера.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: <code>SMALL</code>, <code>MEDIUM</code>, <code>LARGE</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>SMALL</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dd><p>Представляет собой тип монеты: &lsquo;<samp>SMALL</samp>&rsquo; &mdash; монета достоинством 2&nbsp;цента, &lsquo;<samp>MEDIUM</samp>&rsquo; &mdash; монета достоинством 5&nbsp;центов и &lsquo;<samp>LARGE</samp>&rsquo; &mdash; монета достоинством 10&nbsp;центов.
</p></dd>
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
</dl>

</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/it_coin_s.png" alt="images/it_coin_s"><p> <b>it_coin</b>: state = <code>SMALL</code>
</p></dt>
<dt> <img src="images/it_coin_s.png" alt="images/it_coin_s"><p> <b>it_coin_s</b>: state = <code>SMALL</code>
</p></dt>
<dt> <img src="images/it_coin_m.png" alt="images/it_coin_m"><p> <b>it_coin_m</b>: state = <code>MEDIUM</code>
</p></dt>
<dt> <img src="images/it_coin_l.png" alt="images/it_coin_l"><p> <b>it_coin_l</b>: state = <code>LARGE</code>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="it_005fdocument"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005fcoin" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005fdrop" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Liftable-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005fdocument-1"></a>
<h3 class="subsection">8.3.9 it_document</h3>
<a name="index-it_005fdocument"></a>

<p>Данный предмет похож на кусок бумаги и содержит текстовое сообщение, которое можно отобразить, активировав объект. Он разрушается при взрывах объектов  <a href="#it_005fbomb">it_bomb</a>, <a href="#st_005fdispenser">st_dispenser</a>, <a href="#it_005fdynamite">it_dynamite</a>, а также под воздействием огня. Документ чувствителен к лазерным лучам и при попадании на него лазера разрушается, трансформируясь в объект <a href="#it_005fexplosion">it_explosion</a>_nil и исчезая без остатка.
</p>
<p>Другим предметом, который может содержать в себе текстовые сообщения, является <a href="#it_005fbottle">it_bottle</a>.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>text</b>, &nbsp;&nbsp;<i>значения</i>: string;</dt>
<dd><p>Текст, который необходимо отобразить, или просто ключевое слово для идентификации при <a href="#Internationalization-_0028i18n_0029">интернационализации (i18n)</a>.
</p></dd>
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
</dl>

</dd>
<dt> <b>Сообщения:</b></dt>
<dd><dl compact="compact">
<dt> <b>ignite</b></dt>
<dd><p>Поджигает и уничтожает документ.
</p></dd>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/it_document.png" alt="images/it_document"><p> <b>it_document</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="it_005fdrop"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005fdocument" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005fdynamite" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Liftable-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005fdrop-1"></a>
<h3 class="subsection">8.3.10 it_drop</h3>
<a name="index-it_005fdrop"></a>

<p>Капля представляет собой волшебный эликсир, при помощи которого актёр может совершать временные превращения. При активации предмета актёр превращается в другого актёра, получая все свойства данного вида, находится в таком состоянии на протяжении 5&nbsp;секунд и снова превращается в самого себя. Капля используется при активации. Как правило, продлить действие эликсира, проглотив несколько капель, невозможно.
</p>
<p>Обратите внимание, что в настоящее время данный объект определён для следующих актёров:
</p>
<ul>
<li> <a href="#ac_005fmarble">ac_marble</a> превращается в <a href="#ac_005frotor">ac_rotor</a>,
</li></ul>

<p>Использование эликсира в уровнях, на которых задействованы <a href="#ac_005fpearl">ac_pearl</a>, вполне вероятно приведёт к несовместимости уровня с будущими версиями Enigma.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
</dl>
</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/it_drop.png" alt="images/it_drop"><p> <b>it_drop</b>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="it_005fdynamite"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005fdrop" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005fextinguisher" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Liftable-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005fdynamite-1"></a>
<h3 class="subsection">8.3.11 it_dynamite</h3>
<a name="index-it_005fdynamite"></a>

<p>Динамит представляет собой взрывчатое вещество, которое можно подобрать и которое можно легко поджечь на любом свободном участке решётки. Он загорается, если его положить на покрытие; в состоянии &lsquo;<samp>IDLE</samp>&rsquo; он загорается под воздействием лазерных лучей, горящего рядом огня либо взрывов находящихся поблизости предметов <a href="#it_005fbomb">it_bomb</a>, <a href="#st_005fdispenser">st_dispenser</a> или других динамитных шашек. При падении на него объекта <a href="#ot_005fcannonball">ot_cannonball</a> предмет тотчас взрывается без предварительного поджига.
</p>
<p>При запаливании фитиль предмета начинает гореть.  При этом он находится в состоянии &lsquo;<samp>ACTIVE</samp>&rsquo; и его нельзя подобрать. Через непродолжительное время динамит взрывается, поджигая предметы на 8&nbsp;соседних участках решётки и также разрушая некоторые камни, например <a href="#st_005fbreak">st_break</a>. Взрывы оставляют после себя предмет <a href="#it_005fmeditation">it_meditation</a>_hollow на всех типах покрытий, за исключением <a href="#fl_005fice">fl_ice</a>, где остаётся <a href="#it_005fcrack">it_crack</a>_water.
</p>
<p>После запаливания динамитной шашки возможности предотвратить взрыв, как правило, нет. Нельзя даже сменить значение атрибута динамитной шашки &lsquo;<samp>state</samp>&rsquo; на &lsquo;<samp>IDLE</samp>&rsquo;. Но если игрок сдвинет <a href="#st_005fice">st_ice</a> на динамитную шашку, находящуюся в состоянии &lsquo;<samp>ACTIVE</samp>&rsquo;, она замёрзнет и прекратит гореть, вернувшись в состояние &lsquo;<samp>IDLE</samp>&rsquo;.
</p>
<p>Динамитные шашки можно добавить в инвентарь, ударив актёром по камню <a href="#st_005fdispenser">st_dispenser</a>_dynamite.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: <code>IDLE</code>, <code>ACTIVE</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>IDLE</code> &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
<dd><p>В инвентарь можно добавить динамитную шашку только в состоянии &lsquo;<samp>IDLE</samp>&rsquo;, горящие (&lsquo;<samp>ACTIVE</samp>&rsquo;) динамитные шашки не портируемы.
</p></dd>
</dl>

</dd>
<dt> <b>Сообщения:</b></dt>
<dd><dl compact="compact">
<dt> <b>explode</b></dt>
<dd><p>Мгновенный взрыв без запаливания фитиля.
</p></dd>
<dt> <b>ignite</b></dt>
<dd><p>Запаливание фитиля.
</p></dd>
<dt> <b>heat</b></dt>
<dd><p>Запаливание фитиля.
</p></dd>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/it_dynamite.png" alt="images/it_dynamite"><p> <b>it_dynamite</b>: state = <code>IDLE</code>
</p></dt>
<dt> <img src="images/it_dynamite_burning.png" alt="images/it_dynamite_burning"><p> <b>it_dynamite_burning</b>: state = <code>ACTIVE</code>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="it_005fextinguisher"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005fdynamite" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005fextralife" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Liftable-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005fextinguisher-1"></a>
<h3 class="subsection">8.3.12 it_extinguisher</h3>
<a name="index-it_005fextinguisher"></a>

<p>Огнетушитель позволяет тушить горящий огонь; пена для пожаротушения также защищает покрываемый ею участок от новых пожаров (см. раздел <a href="#Fire-Spreading">Распространение огня</a>).
</p>
<p>Полностью заряженный огнетушитель может функционировать двумя способами.  В первом случае пена огнетушителя покрывает 13&nbsp;ближайших участков решётки, во втором случае пена покрывает только 5&nbsp;участков &mdash; участок, на котором находится актёр, и 4&nbsp;соседних участка. Пена представляет собой объект <a href="#it_005fburnable">it_burnable</a> вида &lsquo;<samp>fireproof</samp>&rsquo;, который можно удалить посредством объекта <a href="#it_005fbrush">it_brush</a> или с помощью <a href="#Flood-Spreading">распространения воды</a>.
</p>
<p>Объём загрузки огнетушителя задаётся атрибутом &lsquo;<samp>state</samp>&rsquo;, игрок же может его определить с помощью цветного пятна: зелёный означает полный огнетушитель (&lsquo;<samp>FULL</samp>&rsquo;), жёлтый &mdash; заполненный наполовину (&lsquo;<samp>MEDIUM</samp>&rsquo;), красный &mdash; пустой (&lsquo;<samp>EMPTY</samp>&rsquo;).
</p>
<p>Сами же огнетушители (кроме пустых) являются огнеупорными.
</p>
<p>Сообщения &lsquo;<samp>toggle</samp>&rsquo; заполняют огнетушители на один уровень, пока не будет достигнуто состояние &lsquo;<samp>FULL</samp>&rsquo;.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: <code>EMPTY</code>, <code>MEDIUM</code>, <code>FULL</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>FULL</code> &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
</dl>

</dd>
<dt> <b>Сообщения:</b></dt>
<dd><dl compact="compact">
<dt> <b>toggle</b> &nbsp;&nbsp;См. раздел <a href="#toggle">toggle</a></dt>
<dd><p>Заполняет огнетушитель на один уровень.
</p></dd>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/it_extinguisher.png" alt="images/it_extinguisher"><p> <b>it_extinguisher</b>: state = <code>FULL</code>
</p></dt>
<dt> <img src="images/it_extinguisher.png" alt="images/it_extinguisher"><p> <b>it_extinguisher_full</b>: state = <code>FULL</code>
</p></dt>
<dt> <img src="images/it_extinguisher_2.png" alt="images/it_extinguisher_2"><p> <b>it_extinguisher_medium</b>: state = <code>MEDIUM</code>
</p></dt>
<dt> <img src="images/it_extinguisher_3.png" alt="images/it_extinguisher_3"><p> <b>it_extinguisher_empty</b>: state = <code>EMPTY</code>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="it_005fextralife"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005fextinguisher" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005fflag" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Liftable-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005fextralife-1"></a>
<h3 class="subsection">8.3.13 it_extralife</h3>
<a name="index-it_005fextralife"></a>

<p>Дополнительная жизнь под воздействием лазера трансформируется в <a href="#it_005fglasses">it_glasses</a> и в свою очередь является результатом трансформации &lsquo;<samp>it_coin_l</samp>&rsquo; (см. раздел <a href="#it_005fcoin">it_coin</a>). Глобальная переменная <a href="#ExtralifeGlasses">ExtralifeGlasses</a> описывает, что можно заметить с помощью новых очков.
</p>
<p>Дополнительная жизнь, созданная на пути включенного лазера, не будет подвергаться трансформации. Но она будет уничтожена при выключении и повторном включении этого же лазера или при включении дополнительного лазера.
</p>
<p>Если &lsquo;it_extralife&rsquo; получена в результате трансформации другого объекта, то во избежание многоступенчатых трансформаций она в течение короткого периода времени будет неуязвима для лазера.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/it_extralife.png" alt="images/it_extralife"><p> <b>it_extralife</b>
</p></dt>
<dt> <img src="images/it_extralife.png" alt="images/it_extralife"><p> <b>it_extralife_new</b>: Объект, неуязвимый для лазера в течение короткого периода времени.
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="it_005fflag"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005fextralife" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005ffloppy" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Liftable-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005fflag-1"></a>
<h3 class="subsection">8.3.14 it_flag</h3>
<a name="index-it_005fflag"></a>

<p>Флаги отмечают места, где будут воскрешены погибшие актёры. Флаги бывают двух разновидностей: чёрные (<samp>BLACK</samp>&rsquo;) и белые (&lsquo;<samp>WHITE</samp>&rsquo;). Они используются для создания точки восстановления для актёров <a href="#ac_005fmarble">ac_marble</a> и <a href="#ac_005fpearl">ac_pearl</a> соответствующего цвета.
</p>
<p>Поскольку на уровне может находиться несколько флагов с одинаковым значением атрибута &lsquo;<samp>color</samp>&rsquo;, место воскрешения актёра не определяется непосредственно местоположением флага. Местом воскрешения актёра является участок, на котором был помещён последний флаг соответствующего цвета.  Кроме того, координаты точки восстановления будут удалены, если после того, как флаг был помещён на покрытие, игрок подберёт любой флаг того же цвета. При отсутствии определяемой флагами точки восстановления актёры будут воскрешены в начальной позиции или в последней безопасной позиции, если для глобального атрибута <a href="#AutoRespawn">AutoRespawn</a> установлено значение <code>true</code>.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>color</b> &nbsp;&nbsp;<i>значения</i>: <code>BLACK</code>, <code>WHITE</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>BLACK</code></dt>
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/it_flag_black.png" alt="images/it_flag_black"><p> <b>it_flag</b>: color = <code>BLACK</code>
</p></dt>
<dt> <img src="images/it_flag_black.png" alt="images/it_flag_black"><p> <b>it_flag_black</b>: color = <code>BLACK</code>
</p></dt>
<dt> <img src="images/it_flag_white.png" alt="images/it_flag_white"><p> <b>it_flag_white</b>: color = <code>WHITE</code>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="it_005ffloppy"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005fflag" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005fglasses" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Liftable-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005ffloppy-1"></a>
<h3 class="subsection">8.3.15 it_floppy</h3>
<a name="index-it_005ffloppy"></a>

<p>Дискета активирует <a href="#st_005ffloppy">st_floppy</a>, если её вставить в камень-дисковод, дотронувшись до него, когда она находится слева в инвентаре.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
</dl>
</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/it_floppy.png" alt="images/it_floppy"><p> <b>it_floppy</b>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="it_005fglasses"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005ffloppy" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005fhammer" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Liftable-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005fglasses-1"></a>
<h3 class="subsection">8.3.16 it_glasses</h3>
<a name="index-it_005fglasses"></a>

<p>Очки помогают шарику разглядеть некоторые объекты, которые в противном случае были бы для него невидимы либо неотличимы от других.
</p>
<p>Чтобы очки подействовали, они должны находиться на верхнем уровне инвентаря. Это означает, что очки должны располагаться в инвентаре в качестве отдельного объекта, а не быть спрятанными в находящемся в инвентаре объекте <a href="#it_005fbag">it_bag</a>. Безусловно, очки помогают только актёрам, непосредственно управляемым игроком, которому они принадлежат.
</p>
<p>Очки могут сделать видимыми невидимые смертоносные камни  (<a href="#st_005fdeath">st_death</a>), обнаруживать скрытые проходы, делая полые камни прозрачными, помогать отличить неактивированного наездника <a href="#st_005flightpassenger">st_lightpassenger</a> от объекта <a href="#st_005fdarkglass">st_darkglass</a>, могут помочь увидеть невидимые объекты <a href="#it_005fsensor">it_sensor</a>, <a href="#it_005ftrap">it_trap</a> и <a href="#st_005factorimpulse">st_actorimpulse</a>.
</p>
<p>Все эти свойства можно настроить с помощью констант &lsquo;<samp>SPOT_DEATH</samp>&rsquo;, &lsquo;<samp>SPOT_HOLLOW</samp>&rsquo;, &lsquo;<samp>SPOT_LIGHTPASSENGER</samp>&rsquo;, &lsquo;<samp>SPOT_SENSOR</samp>&rsquo;, &lsquo;<samp>SPOT_TRAP</samp>&rsquo; и &lsquo;<samp>SPOT_ACTORIMPULSE</samp>&rsquo;. В качестве значения атрибута &lsquo;<samp>state</samp>&rsquo; можно установить сумму констант, которые должны быть применены к данным очкам. В целях обратной совместимости по умолчанию задано значение &lsquo;<samp>SPOT_DEATH + SPOT_HOLLOW + SPOT_LIGHTPASSENGER</samp>&rsquo;. Если игрок носит несколько пар очков, он может видеть всё, что может видеть хотя бы одна пара очков у него в инвентаре.
</p>
<p>Очки разбиваются, если на них столкнуть камень. Разбитые очки ничего различить не могут.
</p>
<p>Очки появляются в результате трансформации объекта <a href="#it_005fextralife">it_extralife</a> под действием лазера. Свойства таких сгенерированных в процессе игры очков определяются глобальной переменной <a href="#ExtralifeGlasses">ExtralifeGlasses</a>.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>state</b> &nbsp;&nbsp;<i>значения</i>: положительное число; &nbsp;&nbsp;<i>по умолчанию</i>: <code>SPOT_DEATH + SPOT_HOLLOW + SPOT_LIGHTPASSENGER</code> &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dd><p>Сумма констант &lsquo;<samp>SPOT_DEATH</samp>&rsquo;, &lsquo;<samp>SPOT_HOLLOW</samp>&rsquo;, &lsquo;<samp>SPOT_LIGHTPASSENGER</samp>&rsquo;, &lsquo;<samp>SPOT_SENSOR</samp>&rsquo;, &lsquo;<samp>SPOT_ACTORIMPULSE</samp>&rsquo;, &lsquo;<samp>SPOT_TRAP</samp>&rsquo;. &lsquo;<samp>SPOT_NOTHING</samp>&rsquo; &mdash; это состояние разбитых очков.
</p></dd>
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
</dl>

</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/it_glasses.png" alt="images/it_glasses"><p> <b>it_glasses</b> Исправные очки.
</p></dt>
<dt> <img src="images/it_glasses_broken.png" alt="images/it_glasses_broken"><p> <b>it_glasses_broken</b> Разбитые очки, которые ничего не могут различать.
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="it_005fhammer"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005fglasses" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005fkey" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Liftable-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005fhammer-1"></a>
<h3 class="subsection">8.3.17 it_hammer</h3>
<a name="index-it_005fhammer"></a>

<p>Молоток может разрушать некоторые камни (см. разделы <a href="#Breakable-Stones">Бьющиеся камни</a> и <a href="#st_005flightpassenger">st_lightpassenger</a>).
</p>
<p>Под воздействием лазера он превращается в <a href="#it_005fsword">it_sword</a> и в свою очередь является результатом трансформации <a href="#it_005fsword">it_sword</a> и &lsquo;<samp>it_coin_m</samp>&rsquo; (см. раздел <a href="#it_005fcoin">it_coin</a>).
</p>
<p>Молоток, созданный на пути включенного лазера, не будет трансформирован под его воздействием. Но предмет сможет трансформироваться при выключении и повторном включении этого же лазера или при включении дополнительного лазера.
</p>
<p>Если молоток получен в результате трансформации другого объекта, то во избежание нестабильных многоступенчатых трансформаций он в течение короткого периода времени будет неуязвим для лазера.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/it_hammer.png" alt="images/it_hammer"><p> <b>it_hammer</b> Стандартный объект.
</p></dt>
<dt> <img src="images/it_hammer.png" alt="images/it_hammer"><p> <b>it_hammer_new</b> Молоток, неуязвимый для лазера в течение короткого периода времени.
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="it_005fkey"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005fhammer" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005fmagicwand" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Liftable-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005fkey-1"></a>
<h3 class="subsection">8.3.18 it_key</h3>
<a name="index-it_005fkey"></a>

<p>Ключ активирует <a href="#st_005fkey">st_key</a>, если его вставить в замочную скважину, дотронувшись до камня-замка, и при этом ключ находится слева в инвентаре.
</p>
<p>Обычно значение атрибута &lsquo;<samp>code</samp>&rsquo; ключа визуально никак не отображается.  Но если для атрибута &lsquo;<samp>invisible</samp>&rsquo; установить значение &lsquo;<samp>false</samp>&rsquo;, то для значений от &lsquo;<samp>1</samp>&rsquo; до &lsquo;<samp>8</samp>&rsquo; код будет отображаться. Код бывает видимым, только когда ключ находится в инвентаре. Это помогает игроку отличать ключи, находящиеся у него в инвентаре, друг от друга и открывать ими соответствующие замки <a href="#st_005fkey">st_key</a>.
</p>
<p>Код ключа с установленным атрибутом &lsquo;<samp>invisible</samp>&rsquo; можно узнать, только если его вставить в подходящий замок <a href="#st_005fkey">st_key</a> с известным кодом. Код остаётся видимым, если игрок вынимает ключ из замка и кладёт его себе в инвентарь.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>code</b>, &nbsp;&nbsp;<i>values</i>: number или string; &nbsp;&nbsp;<i>по умолчанию</i>: <code>1</code></dt>
<dd><p>Чтобы ключ смог открыть <a href="#st_005fkey">st_key</a>, коды ключа и камня должны совпадать.
</p></dd>
<dt> <b>invisible</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code></dt>
<dd><p>При данном значении атрибута код (&lsquo;<samp>code</samp>&rsquo;) ключа отображается в виде цветного пятна, если ключ положить в инвентарь.
</p></dd>
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
</dl>

</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/it_key.png" alt="images/it_key"><p> <b>it_key</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="it_005fmagicwand"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005fkey" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005fpencil" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Liftable-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005fmagicwand-1"></a>
<h3 class="subsection">8.3.19 it_magicwand</h3>
<a name="index-it_005fmagicwand"></a>

<p>Волшебный инструмент, позволяющий творить самые разнообразные чудеса, если он находится слева в инвентаре игрока.
</p>
<ul>
<li> <a href="#st_005fblur">st_blur</a>, волшебный &mdash; превращает камень в <a href="#st_005fpassage">st_passage</a>,
</li><li> <a href="#st_005fboulder">st_boulder</a> &mdash; изменяет направление движения болдера,
</li><li> <a href="#st_005fchess">st_chess</a> &mdash; изменяет цвет шахматного коня,
</li><li> <a href="#st_005fghost">st_ghost</a>, зелёно-коричневый камень &mdash; превращает в зелёно-коричневый камень  <a href="#st_005fgreenbrown">st_greenbrown</a>,
</li><li> <a href="#st_005fmagic">st_magic</a>, кирпич &mdash; превращает в <a href="#st_005frawglass">st_rawglass</a>,
</li><li> <a href="#st_005foneway">st_oneway</a> &mdash; изменяет направление однонаправленного камня,
</li><li> <a href="#st_005fpuzzle">st_puzzle</a> &mdash; перемешивает голубые камни-мозаики вместо того, чтобы сдвигать их, взрывает завершённые скопления этих камней,
</li><li> <a href="#st_005frubberband">st_rubberband</a> &mdash; делает генераторы лент подвижными,
</li><li> <a href="#st_005fstoneimpulse">st_stoneimpulse</a>, подвижный &mdash; позволяет объекту не пульсировать при толчках.
</li></ul>

<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
</dl>

</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Действие:</b> отсутствует</dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/it_magicwand.png" alt="images/it_magicwand"><p> <b>it_magicwand</b>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="it_005fpencil"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005fmagicwand" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005fpin" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Liftable-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005fpencil-1"></a>
<h3 class="subsection">8.3.20 it_pencil</h3>
<a name="index-it_005fpencil"></a>

<p>Предмет, которым можно помечать покрытия и камни.
</p>
<p>Активированным карандашом можно начертить на большинстве покрытий <a href="#it_005fcross">it_cross</a>. Поскольку при этом карандаш истачивается и пропадает, его сущность в процессе трансформации объекта (см. раздел <a href="#Object-Transformation">Преобразование объекта</a>) переходит к кресту. Однако, из-за чрезмерной остроты карандаша, на льду (<a href="#fl_005fice">fl_ice</a>) он оставляет трещину (<a href="#it_005fcrack">it_crack</a>). На неразрушаемых покрытиях (например <a href="#fl_005fabyss">fl_abyss</a>, <a href="#fl_005fwater">fl_water</a> и <a href="#fl_005fswamp">fl_swamp</a>), а также на покрытии <a href="#fl_005fbridge">fl_bridge</a> карандаш вообще нельзя использовать. Карандаш не сможет ничего сделать и с покрытием, на котором лежат предметы. Актёр может рисовать карандашом на поверхности, только если он на ней стоит, а не пролетает над ней. В прыжке актёр просто выбросит карандаш, подобно другим объектам.
</p>
<p>Если актёр пометит камень <a href="#st_005fflat">st_flat</a> карандашом, то камень станет горючим. В результате подобного действия карандаш опять же пропадает. Могут быть помечены и обычные, и подвижные камни.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
</dl>
</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/it_pencil.png" alt="images/it_pencil"><p> <b>it_pencil</b>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="it_005fpin"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005fpencil" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005fpipe" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Liftable-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005fpin-1"></a>
<h3 class="subsection">8.3.21 it_pin</h3>
<a name="index-it_005fpin"></a>

<p>Булавка &mdash; это предмет, увеличивающий силу трения. Её можно использовать на льду (<a href="#fl_005fice">fl_ice</a>) в качестве шипа. Если булавку подобрать, то сила трения, воздействующая на актёров, которыми управляет владелец инвентаря, значительно увеличивается.
</p>
<p>Булавки увеличивают силу трения, только когда они находятся непосредственно в инвентаре. Если булавка находится в сумке (<a href="#it_005fbag">it_bag</a>), которая размещается в инвентаре, она не оказывает на силу трения никакого влияния. Если в инвентаре находится две или более булавок, то сила трения пропорционально не увеличивается. Как только игрок вынимает последнюю булавку из инвентаря, на актёра начинает действовать стандартная сила трения.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
</dl>
</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/it_pin.png" alt="images/it_pin"><p> <b>it_pin</b>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="it_005fpipe"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005fpin" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005fpuller" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Liftable-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005fpipe-1"></a>
<h3 class="subsection">8.3.22 it_pipe</h3>
<a name="index-it_005fpipe"></a>

<p>Трубы используются для постройки присоединённых к объектам <a href="#st_005fmail">st_mail</a> путей транспортировки предметов.
</p>
<p>Расположение фрагментов труб относительно соседних участков решётки описывается при помощи атрибута &lsquo;<samp>connections</samp>&rsquo;. Трубу можно построить из фрагментов, связи которых соответствуют друг другу.
</p>
<p>Хотя и существуют фрагменты, которые могут завершать трубу и имеют только одну связь, на данный момент неизвестно никаких способов их применения, за исключением использования в качестве элемента оформления уровня.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>connections</b>, &nbsp;&nbsp;<i>значения</i>: string; &nbsp;&nbsp;<i>по умолчанию</i>: <code>&quot;ew&quot;</code></dt>
<dd><p>Описывает связи фрагмента трубы с соседними участками решётки. Строка является подстрокой <code>&quot;nesw&quot;</code>, описывающей существующие связи. Последовательность сторон &mdash; север, восток, юг, запад &mdash; является обязательной при доступе для чтения, но произвольной при доступе для записи. На данный момент существуют только трубы с одной или двумя связями.
</p></dd>
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
</dl>

</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Действие:</b> отсутствует</dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/it_pipe_e.png" alt="images/it_pipe_e"><p> <b>it_pipe</b> connections = <code>&quot;ew&quot;</code> Горизонтальный фрагмент трубы.
</p></dt>
<dt> <img src="images/it_pipe_f.png" alt="images/it_pipe_f"><p> <b>it_pipe_w</b> connections = <code>&quot;w&quot;</code>
</p></dt>
<dt> <img src="images/it_pipe_b.png" alt="images/it_pipe_b"><p> <b>it_pipe_s</b> connections = <code>&quot;s&quot;</code>
</p></dt>
<dt> <img src="images/it_pipe_d.png" alt="images/it_pipe_d"><p> <b>it_pipe_sw</b> connections = <code>&quot;sw&quot;</code>
</p></dt>
<dt> <img src="images/it_pipe.png" alt="images/it_pipe"><p> <b>it_pipe_e</b> connections = <code>&quot;e&quot;</code>
</p></dt>
<dt> <img src="images/it_pipe_e.png" alt="images/it_pipe_e"><p> <b>it_pipe_ew</b> connections = <code>&quot;ew&quot;</code> Горизонтальный фрагмент трубы.
</p></dt>
<dt> <img src="images/it_pipe_c.png" alt="images/it_pipe_c"><p> <b>it_pipe_es</b> connections = <code>&quot;es&quot;</code>
</p></dt>
<dt> <img src="images/it_pipe_g.png" alt="images/it_pipe_g"><p> <b>it_pipe_n</b> connections = <code>&quot;n&quot;</code>
</p></dt>
<dt> <img src="images/it_pipe_i.png" alt="images/it_pipe_i"><p> <b>it_pipe_nw</b> connections = <code>&quot;nw&quot;</code>
</p></dt>
<dt> <img src="images/it_pipe_j.png" alt="images/it_pipe_j"><p> <b>it_pipe_ns</b> connections = <code>&quot;ns&quot;</code> Вертикальный фрагмент трубы.
</p></dt>
<dt> <img src="images/it_pipe_h.png" alt="images/it_pipe_h"><p><b>it_pipe_ne</b> connections = <code>&quot;ne&quot;</code>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="it_005fpuller"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005fpipe" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005fring" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Liftable-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005fpuller-1"></a>
<h3 class="subsection">8.3.23 it_puller</h3>
<a name="index-it_005fpuller"></a>

<p>Выталкиватель &mdash; это предмет, похожий на белую стрелку. Его можно подобрать. Но если его положить на покрытие, он активируется и начинает вращаться. Актёру необходимо сразу же покинуть участок решётки, поскольку выталкиватель рано или поздно взорвётся и этот взрыв будет смертельным для актёра.
</p>
<p>Но главная функция выталкивателя в игре &mdash; это перемещение камней. Направление стрелки, определяемое атрибутом &lsquo;<samp>orientation</samp>&rsquo;, указывает направление, в которое будет перемещён камень, если перед ним положить выталкиватель. Перемещение осущесталяется сразу же после кратковременного взрыва. Это полноценное перемещение, которое также затрагивает камни, присоединённые к перещаемому камню посредством объекта <a href="#ot_005fwire">ot_wire</a>. После взрыва выталкиватель уничтожается.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dd><a name="index-orientation"></a>
</dd>
<dt> <b>orientation</b>, &nbsp;&nbsp;<i>значения</i>: <code>NORTH</code>, <code>EAST</code>, <code>SOUTH</code>, <code>WEST</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>WEST</code></dt>
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
</dl>

</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Действие:</b> отсутствует</dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/it_puller_4.png" alt="images/it_puller_4"><p> <b>it_puller</b> orientation = <code>WEST</code>
</p></dt>
<dt> <img src="images/it_puller_4.png" alt="images/it_puller_4"><p> <b>it_puller_w</b> orientation = <code>WEST</code>
</p></dt>
<dt> <img src="images/it_puller_3.png" alt="images/it_puller_3"><p> <b>it_puller_s</b> orientation = <code>SOUTH</code>
</p></dt>
<dt> <img src="images/it_puller_2.png" alt="images/it_puller_2"><p> <b>it_puller_e</b> orientation = <code>EAST</code>
</p></dt>
<dt> <img src="images/it_puller.png" alt="images/it_puller"><p> <b>it_puller_n</b> orientation = <code>NORTH</code>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="it_005fring"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005fpuller" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005frubberband" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Liftable-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005fring-1"></a>
<h3 class="subsection">8.3.24 it_ring</h3>
<a name="index-it_005fring"></a>

<p>Кольцо &mdash; это волшебный предмет, предназначенный для обмена позициями. Если кольцо положить на покрытие, оно активируется и актёр переносится или в свою точку восстановления, или на позицию, занимаемую другим актёром, который в свою очередь переносится на позицию, где до этого находился первый актёр.
</p>
<p>Обратите внимание, что в настоящее время данный объект определён для следующих случаев:
</p>
<ul>
<li> при наличии одного произвольного актёра, управляемого игроком &lsquo;<samp>YIN</samp>&rsquo;, этот актёр перемещается в точку восстановления;
</li><li> при наличии актёра <a href="#ac_005fmarble">ac_marble</a>_black, управляемого игроком &lsquo;<samp>YIN</samp>&rsquo;, и актёра <a href="#ac_005fmarble">ac_marble</a>_white, управляемого игроком &lsquo;<samp>YANG</samp>, актёры обмениваются местоположениями.
</li></ul>

<p>Использование кольца в любых других случаях вполне вероятно приведёт к несовместимости уровня с будущими версиями Enigma.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
</dl>
</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/it_ring.png" alt="images/it_ring"><p> <b>it_ring</b>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="it_005frubberband"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005fring" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005fseed" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Liftable-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005frubberband-1"></a>
<h3 class="subsection">8.3.25 it_rubberband</h3>
<a name="index-it_005frubberband"></a>

<p>Переносная резиновая лента (объект <a href="#ot_005frubberband">ot_rubberband</a>), присоединяющаяся к своему обладателю при активации.
</p>
<p>Поскольку в качестве значения атрибута &lsquo;<samp>anchor1</samp>&rsquo; указывается актёр, активировавший объект, для данного объекта можно задать только атрибут &lsquo;<samp>anchor2</samp>&rsquo;. Это может быть ссылка на любой камень или актёра.
</p>
<p>Особый интерес представляет использование ссылок на ближайшие объекты (см. раздел <a href="#Object-Naming">Именование объектов</a>). Шарик получит возможность связать себя с ближайшим объектом из данной группы.
</p>
<p>Если &lsquo;<samp>anchor2</samp>&rsquo; не существует, объект &lsquo;<samp>it_rubberband</samp>&rsquo; при активации будет просто удалён из инвентаря.
</p>
<p>Прочие атрибуты описывают параметры силы упругости и длины объекта <a href="#ot_005frubberband">ot_rubberband</a>, который будет создан, если применить &lsquo;it_rubberband&rsquo;. Фактически сущность объекта будет перенесена на его потомка (см. раздел <a href="#Object-Transformation">Преобразование объекта</a>). После создания ленты соответствующей цели будет отправлено сообщение о действии. Следует отметить, что сообщение посылает именно <a href="#ot_005frubberband">ot_rubberband</a> как потомок &lsquo;it_rubberband&rsquo;.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>anchor2</b> &nbsp;&nbsp;<i>значения</i>: актёр или камень; &nbsp;&nbsp;по умолчанию: <code>nil</code></dt>
<dd><p>Объектная ссылка либо имя актёра/камня, к которому присоединится лента. Ссылка будет обработана при активации ленты.
</p></dd>
<dt> <b>strength</b> &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: <code>10.0</code></dt>
<dd><p>Величина, определяющая силу упругости.
</p></dd>
<dt> <b>length</b> &nbsp;&nbsp;<i>значения</i>: положительное число или  <code>AUTOLENGTH</code>; &nbsp;&nbsp;<i>по умолчанию:</i> <code>1.0</code></dt>
<dd><p>Нормальная длина ненатянутой резиновой ленты, при превышении которой начинают действовать силы.
</p></dd>
<dt> <b>threshold</b> &nbsp;&nbsp;<i>значения</i>: положительное число или ноль; &nbsp;&nbsp;<i>по умолчанию</i>: <code>0.0</code></dt>
<dd><p>Расстояние, меньшее, чем длина ненатянутой ленты, при уменьшении которого начинают действовать обратные силы.
</p></dd>
<dt> <b>min</b> &nbsp;&nbsp;<i>значения</i>: положительное число или ноль; &nbsp;&nbsp;<i>по умолчанию</i>: <code>0.0</code></dt>
<dd><p>Минимальная длина, при которой отскакивают актёры.
</p></dd>
<dt> <b>max</b> &nbsp;&nbsp;<i>значения</i>: положительное число или ноль; &nbsp;&nbsp;<i>по умолчанию</i>: <code>0.0</code></dt>
<dd><p>Максимальная длина, при которой отскакивают актёры.
</p></dd>
<dt> <b>scissor</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code></dt>
<dd><p>Определяет, что происходит с уже существующими резиновыми лентами, привязанными к актёру, в момент создания новой. Если значение атрибута равно <code>true</code>, то при создании новой резиновой ленты все прочие ленты, присоединённые в данный момент к актёру, будут отрезаны. 
</p></dd>
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
</dl>

</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Действие:</b> &nbsp;&nbsp;См. раздел <a href="#target">target</a>, &nbsp;&nbsp;см. раздел <a href="#action">action</a></dt>
<dd><p>При успешной активации объекта будет отправлено сообщение о действии со значением &lsquo;<samp>true</samp>&rsquo;. Следует отметить, что значением параметра &lsquo;<samp>sender</samp>&rsquo; будет только что созданный объект <a href="#ot_005frubberband">ot_rubberband</a>.
</p>
</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/it_rubberband.png" alt="images/it_rubberband"><p> <b>it_rubberband</b>
</p></dt>
</dl>
</dd>
</dl>


<hr size="6">
<a name="it_005fseed"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005frubberband" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005fspade" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Liftable-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005fseed-1"></a>
<h3 class="subsection">8.3.26 it_seed</h3>
<a name="index-it_005fseed"></a>

<p>Семена камней &mdash; это предметы, которые при активации начинают расти и, в конце концов, превращаются в камни. Существуют различные разновидности (&lsquo;<samp>flavor</samp>&rsquo;) семян, которые выглядят одинаково, но из которых вырастают разные камни. В то время как из разновидности <code>&quot;wood&quot;</code> вырастает объект <a href="#st_005fbox">st_box</a>_wood, из разновидности <code>&quot;hay&quot;</code> вырастает <a href="#st_005fbox">st_box</a>_hay, из разновидности <code>&quot;greenbrown&quot;</code> вырастает неподвижный зелёно-коричневый камень <a href="#st_005fgreenbrown">st_greenbrown</a>, а из разновидности <code>&quot;volcano&quot;</code> вырастает действующий <a href="#st_005fvolcano">st_volcano</a>.
</p>
<p>Семена можно ронять на любой участок решётки, не занятый другим предметом, даже под другой камень, который будет уничтожен камнем, выросшим из семени.
</p>
<p>Семена автоматически активируются, если их уронить, направить на них лазерный луч или сдвинуть на них камень. Их также можно активировать при помощи сообщений &lsquo;<samp>grow</samp>&rsquo; и &lsquo;<samp>signal</samp>&rsquo;.
</p>
<p>Все атрибуты сущности передаются выросшему из семени камню, включая атрибут &lsquo;<samp>secure</samp>&rsquo;.
</p>
<p>Единственный способ манипулировать семенами, не вызывая их активации &mdash; это поместить их в <a href="#it_005fbag">it_bag</a> либо отправить их на требуемый участок решётки при помощи объекта <a href="#st_005fmail">st_mail</a>.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>flavor</b>, &nbsp;&nbsp;<i>значения</i>: <code>&quot;wood&quot;</code>, <code>&quot;hay&quot;</code>, <code>&quot;greenbrown&quot;</code>, <code>&quot;volcano&quot;</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>&quot;wood&quot;</code></dt>
<dd><p>Тип получаемого камня.
</p></dd>
<dt> <b>secure</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code></dt>
<dd><p>Данный атрибут передаётся получаемому из семечка камню. Используется объектами <a href="#st_005fvolcano">st_volcano</a> и <a href="#st_005fbox">st_box</a>.
</p></dd>
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
</dl>

</dd>
<dt> <b>Сообщения:</b></dt>
<dd><dl compact="compact">
<dt> <b>grow</b></dt>
<dd><p>Вызывает рост семечка.
</p></dd>
<dt> <b>signal</b> &nbsp;&nbsp;См. раздел <a href="#signal">signal</a></dt>
<dd><p>Вызывает рост семечка.
</p></dd>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/it_seed.png" alt="images/it_seed"><p> <b>it_seed</b> flavor = <code>&quot;wood&quot;</code>
</p></dt>
<dt> <img src="images/it_seed.png" alt="images/it_seed"><p> <b>it_seed_wood</b> flavor = <code>&quot;wood&quot;</code>
</p></dt>
<dt> <img src="images/it_seed.png" alt="images/it_seed"><p> <b>it_seed_hay</b> flavor = <code>&quot;hay&quot;</code>
</p></dt>
<dt> <img src="images/it_seed.png" alt="images/it_seed"><p> <b>it_seed_greenbrown</b> flavor = <code>&quot;greenbrown&quot;</code>
</p></dt>
<dt> <img src="images/it_seed.png" alt="images/it_seed"><p> <b>it_seed_volcano</b> flavor = <code>&quot;volcano&quot;</code>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="it_005fspade"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005fseed" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005fspoon" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Liftable-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005fspade-1"></a>
<h3 class="subsection">8.3.27 it_spade</h3>
<a name="index-it_005fspade"></a>

<p>При каждой активации на участке решётки, на котором расположен объект <a href="#it_005fmeditation">it_meditation</a>, лопата будет выравнивать этот участок на один шаг и в конце концов полностью удалит объект. 
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
</dl>
</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/it_spade.png" alt="images/it_spade"><p> <b>it_spade</b>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="it_005fspoon"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005fspade" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005fspring" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Liftable-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005fspoon-1"></a>
<h3 class="subsection">8.3.28 it_spoon</h3>
<a name="index-it_005fspoon"></a>

<p>&quot;Уронить ложку&quot; в средние века было синонимом слова &quot;умереть&quot;. У бедняков в то время не было ничего, кроме деревянной ложки. Они никогда её не роняли. Сделать это они могли, лишь умерев. 
</p>
<p>Таким образом, если актёр в Enigma уронит ложку, она его разобьёт. Если игрок управляет несколькими актёрами, то погибает только активный.  В этом заключается существенное отличие падения ложки от нажатия клавиши F3, при котором погибают все актёры, управляемые всеми игроками. Если на уровне предусмотрены ложки, то в некоторых случаях может потребоваться не дать игроку возможности убить актёров нажатием клавиши F3. Это можно сделать, установив для глобальной переменной <a href="#AllowSuicide">AllowSuicide</a> значение &lsquo;<samp>false</samp>&rsquo;.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
</dl>
</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/it_spoon.png" alt="images/it_spoon"><p> <b>it_spoon</b>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="it_005fspring"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005fspoon" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005fsurprise" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Liftable-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005fspring-1"></a>
<h3 class="subsection">8.3.29 it_spring</h3>
<a name="index-it_005fspring"></a>

<p>Активация пружины позволяет <a href="#Flying-Actors">летающим актёрам</a> прыгать. 
</p>
<p>Существует две разновидности портативных пружин. Тонкая пружина после активации остаётся в инвентаре и, таким образом, может быть использована несколько раз подряд. Толстая, сжатая пружина после активации остаётся на покрытии.  Статичным устройством для прыжка, которое не могут подобрать актёры, является <a href="#it_005fspringboard">it_springboard</a>.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
</dl>
</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/it_spring.png" alt="images/it_spring"><p> <b>it_spring</b>
</p></dt>
<dt> <img src="images/it_spring.png" alt="images/it_spring"><p> <b>it_spring_keep</b>
</p></dt>
<dt> <img src="images/it_spring_2.png" alt="images/it_spring_2"><p> <b>it_spring_drop</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="it_005fsurprise"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005fspring" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005fsword" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Liftable-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005fsurprise-1"></a>
<h3 class="subsection">8.3.30 it_surprise</h3>
<a name="index-it_005fsurprise"></a>

<p>Предмет, который превращается в другой случайный предмет, когда игрок вынимает его из инвентаря.
</p>
<p>Предмет, в который превращается сюрприз, выбирается случайным образом из заданного ряда предметов (атрибут &lsquo;<samp>selection</samp>&rsquo;). В качестве значений атрибута &lsquo;<samp>selection</samp>&rsquo; можно установить метки строк. Каждая строка должна быть или типом объекта (см. раздел <a href="#Object-Kind">Тип объекта</a>), или кодом участка решётки, перед которым должен стоять знак &lsquo;<samp>=</samp>&rsquo;.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">ti[&quot;m&quot;] = {&quot;it_magicwand&quot;}
ti[&quot;e&quot;] = {&quot;it_extralife&quot;}
ti[&quot;s&quot;] = {&quot;it_surprise&quot;, selection={&quot;it_seed&quot;, &quot;=m&quot;, &quot;=e&quot;, &quot;=e&quot;}}
</pre></td></tr></table>

<p>Новый предмет выбирается случайным образом из заданного набора. Указав какой-либо предмет среди значений атрибута несколько раз, можно повлиять на вероятность его выбора.
</p>
<p>Объявления секции, на которые ссылаются по коду, могут, помимо предметов, содержать и другие объекты. Но эту возможность следует использовать осторожно и только в случае крайней необходимости.
</p>
<p>Предмет-сюрприз выполняет действие до своего превращения, но уже после того, как его вынули из инвентаря. Это действие может быть использовано для оказания влияния на случайный выбор объекта либо для создания новых объектов.
</p>
<p>Предмет-сюрприз уничтожается предметом-заменой, который создаётся на участке решётки. Если вы не хотите, чтобы предмет-сюрприз превращался в другой предмет, вам необходимо добавить &lsquo;<samp>&quot;it_nil&quot;</samp>&rsquo; к объявлению секции в значении атрибута &lsquo;selection&rsquo;.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>selection</b>, &nbsp;&nbsp;<i>значения</i>: метки типов предметов и коды участков покрытия; &nbsp;&nbsp;<i>по умолчанию</i>: <code>{&quot;it_umbrella&quot;, &quot;it_spring_keep&quot;, &quot;it_dynamite&quot;, &quot;it_coffee&quot;, &quot;it_hammer&quot;}</code></dt>
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
</dl>

</dd>
<dt> <b>Сообщения:</b></dt>
<dt> <b>Действие:</b> &nbsp;&nbsp;См. раздел <a href="#target">target</a>, &nbsp;&nbsp;см. раздел <a href="#action">action</a></dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/it_surprise.png" alt="images/it_surprise"><p> <b>it_surprise</b>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="it_005fsword"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005fsurprise" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005fumbrella" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Liftable-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005fsword-1"></a>
<h3 class="subsection">8.3.31 it_sword</h3>
<a name="index-it_005fsword"></a>

<p>Меч используется для нейтрализации объекта <a href="#st_005fknight">st_knight</a>.
</p>
<p>Под воздействием лазера он превращается в молоток (<a href="#it_005fhammer">it_hammer</a>) и в свою очередь сам является результатом трансформации <a href="#it_005fhammer">it_hammer</a>.
</p>
<p>Меч, созданный на пути включенного лазера, не будет подвергаться трансформации. Но предмет сможет трансформироваться при выключении и повторном включении этого же лазера или при включении дополнительного лазера.
</p>
<p>Если меч получен в результате трансформации другого объекта, то во избежание нестабильных многоступенчатых трансформаций он в течение короткого периода времени будет неуязвим для лазера.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/it_sword.png" alt="images/it_sword"><p> <b>it_sword</b> Стандартный объект.
</p></dt>
<dt> <img src="images/it_sword.png" alt="images/it_sword"><p> <b>it_sword_new</b> Меч, неуязвимый для лазера в течение короткого промежутка времени.
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="it_005fumbrella"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005fsword" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005fweight" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Liftable-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005fumbrella-1"></a>
<h3 class="subsection">8.3.32 it_umbrella</h3>
<a name="index-it_005fumbrella"></a>

<p>Активированный зонтик временно защищает шарик от объектов <a href="#st_005fdeath">st_death</a>, <a href="#st_005fknight">st_knight</a>, <a href="#st_005fthief">st_thief</a>, <a href="#fl_005fabyss">fl_abyss</a>, <a href="#fl_005fwater">fl_water</a>, <a href="#fl_005fswamp">fl_swamp</a>, <a href="#fl_005fthief">fl_thief</a>, <a href="#it_005fdeath">it_death</a>, <a href="#it_005ftrap">it_trap</a>, разбитых бутылок <a href="#it_005fbottle">it_bottle</a>, взрывов, перемещаемых камней и всех других внутренних событий &lsquo;<samp>shatter</samp>&rsquo; и &lsquo;<samp>fall</samp>&rsquo;; другими словами, от всех смертельных ситуаций, а также от воров. Продолжительность защиты составляет 10&nbsp;секунд. В случае последовательной активации нескольких зонтиков защита будет продлена.
</p>
<p>Зонтик разрушается, если на него направить лазерный луч, и сам является результатом лазерной трансформации &lsquo;<samp>it_coin_s</samp>&rsquo; (см. раздел <a href="#it_005fcoin">it_coin</a>).
</p>
<p>Зонтик, созданный на пути включённого лазера, не будет уничтожен. Но предмет будет уничтожен при выключении и повторном включении этого же лазера или при включении дополнительного лазера.
</p>
<p>Если зонтик получен в результате трансформации другого объекта, то во избежание нестабильных многоступенчатых трансформаций он в течение короткого периода времени будет неуязвим для лазера.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/it_umbrella.png" alt="images/it_umbrella"><p> <b>it_umbrella</b> Стандартный объект.
</p></dt>
<dt> <img src="images/it_umbrella.png" alt="images/it_umbrella"><p> <b>it_umbrella_new</b> Зонтик, неуязвимый для лазера в течение короткого промежутка времени.
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="it_005fweight"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005fumbrella" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005fwrench" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Liftable-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005fweight-1"></a>
<h3 class="subsection">8.3.33 it_weight</h3>
<a name="index-it_005fweight"></a>

<p>Гиря &mdash; это предмет, имеющий массу, по умолчанию равную массе десяти шариков (<a href="#ac_005fmarble">ac_marble</a>). Если её подобрать, она добавляется в инвентарь и увеличивает массу всех актёров, которыми управляет владелец инвентаря.
</p>
<p>Гирю можно легко подобрать, но её нельзя удалить из инвентаря. Сделать это можно только окольными путями, например, дотронувшись до <a href="#st_005fmail">st_mail</a>, <a href="#st_005fthief">st_thief</a> или прокатившись по <a href="#fl_005fthief">fl_thief</a>.
</p>
<p>Масса инвентаря всегда обновляется с учетом массы всех гирь, которые находятся непосредственно в инвентаре либо в сумках (<a href="#it_005fbag">it_bag</a>), помещённых в инвентарь.
</p>
<dl compact="compact">
<dt> <b>Атрибуты: </b>отсутствуют</dt>
<dd><dl compact="compact">
<dt> <b>mass</b> &nbsp;&nbsp;<i>значения</i>: положительное число с плавающей запятой; &nbsp;&nbsp;<i>по умолчанию</i>: <code>10.0</code></dt>
<dd><p>Единицей измерения массы является масса <a href="#ac_005fmarble">ac_marble</a>.
</p></dd>
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
</dl>

</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/it_weight.png" alt="images/it_weight"><p> <b>it_weight</b>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="it_005fwrench"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005fweight" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005fyinyang" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Liftable-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005fwrench-1"></a>
<h3 class="subsection">8.3.34 it_wrench</h3>
<a name="index-it_005fwrench"></a>

<p>Если гаечный ключ является первым объектом в инвентаре, некоторые объекты будут реагировать на прикосновения актёра. Так, <a href="#st_005frotator">st_rotator</a> изменяет направление вращения, зелёный турникет <a href="#st_005fturnstile">st_turnstile</a> при ударе поворачивается назад, окно <a href="#st_005fwindow">st_window</a> перемещается на противоположную сторону камня, если возможно.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
</dl>
</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/it_wrench.png" alt="images/it_wrench"><p> <b>it_wrench</b>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="it_005fyinyang"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005fwrench" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Static-Items" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Liftable-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005fyinyang-1"></a>
<h3 class="subsection">8.3.35 it_yinyang</h3>
<a name="index-it_005fyinyang"></a>

<p>Камень Инь-Ян &mdash; это особого рода переключатель, который позволяет игроку чередоваться между <code>YIN</code> и <code>YANG</code> (см. раздел <a href="#Player-and-Inventory">Игрок и инвентарь</a>).
</p>
<p>При активации этот предмет не удаляется из инвентаря, а остаётся там без всяких изменений.
</p>
<p>Если в <a href="#g_t_003cmodes_003e">&lt;modes&gt;</a> указано, что данный уровень является полноценным сетевым уровнем для двух игроков, но в данный момент в него играют на одном компьютере, в инвентарь обоих игроков автоматически добавляется переключатель Инь-Ян, что позволяет игрокам в любой момент времени контролировать всех актёров.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
</dl>
</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/it_yinyang.png" alt="images/it_yinyang"><p> <b>it_yinyang</b>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="Static-Items"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005fyinyang" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005fblocker" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Static-Items-1"></a>
<h2 class="section">8.4 Статичные предметы</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#it_005fblocker">8.4.1 it_blocker</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         Съёжившийся блокирующий камень
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005fbomb">8.4.2 it_bomb</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Большое количество взрывного заряда
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005fburnable">8.4.3 it_burnable</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        Состояние огня
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005fcrack">8.4.4 it_crack</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Трещина в полу
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005fcross">8.4.5 it_cross</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Напольный переключатель для терпеливых актёров
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005fdeath">8.4.6 it_death</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Непроходимая преграда
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005fexplosion">8.4.7 it_explosion</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       Кратковременная анимация взрыва
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005flandmine">8.4.8 it_landmine</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        Захоронённое взрывное устройство
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005flaserbeam">8.4.9 it_laserbeam</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Лазерный луч
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005fmagnet">8.4.10 it_magnet</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Магнит, притягивающий актёров
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005fmeditation">8.4.11 it_meditation</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">      Холмы и овраги
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005fsensor">8.4.12 it_sensor</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Напольный переключатель для проходящих мимо актёров
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005fshogun">8.4.13 it_shogun</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Точка для камней сёгун
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005fspringboard">8.4.14 it_springboard</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">     Статичная пружина
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005fsquashed">8.4.15 it_squashed</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        Остатки раздавленных фруктов
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005fstrip">8.4.16 it_strip</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Узкий мостик
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005ftrap">8.4.17 it_trap</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Невидимая замаскированная пропасть
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005ftrigger">8.4.18 it_trigger</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         Напольный переключатель для актёров и камней
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005fvortex">8.4.19 it_vortex</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Телепорт для шариков
</td></tr>
<tr><td align="left" valign="top"><a href="#it_005fwormhole">8.4.20 it_wormhole</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        Телепорт для актёров
</td></tr>
</table>


<hr size="6">
<a name="it_005fblocker"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Static-Items" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005fbomb" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Static-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005fblocker-1"></a>
<h3 class="subsection">8.4.1 it_blocker</h3>
<a name="index-it_005fblocker"></a>

<p>Объект, функционирующий по принципу двери, который превращается в <a href="#st_005fblocker">st_blocker</a>, когда сквозь него проходит <a href="#st_005fboulder">st_boulder</a>. Когда болдер проходит сквозь блокирующий камень, то &lsquo;st_blocker&rsquo; сжимается и остаётся в таком состоянии, пока сквозь него снова не пройдёт болдер, после чего предмет снова превращается в камень.
</p>
<p>&lsquo;it_blocker&rsquo; полностью поддерживает сообщения для дверей, и его можно открыть и закрыть любым объектом, функционирующим как переключатель. Обратите внимание, что в силу того, что объект при открытии и закрытии трансформируется из предмета в камень и обратно, вы должны дать объекту имя (см. раздел <a href="#name">name</a>) и обращаться к объекту, используя это имя. Сущность объекта со всеми атрибутами, включая пользовательские атрибуты, будет полностью перенесена с камня на предмет и обратно. Так, <code>{it_switch, target=&quot;myblocker&quot;, action=&quot;toggle&quot;}</code> будет открывать и закрывать блокирующий камень необходимое количество раз.
</p>
<p>Следует упомянуть, что &lsquo;st_blocker&rsquo; &mdash; это единственный объект, функционирующий как дверь, сквозь который можно передвинуть камень. Его трансформацию вызывают только болдеры. Под воздействием прочих камней он не закрывается.
</p>
<p>Ещё одна уникальная характеристика данного предмета &mdash; это его способность закрываться при прохождении сквозь него актёра, если для атрибута &lsquo;autoclose&rsquo; задано значение &lsquo;true&rsquo;.
</p>
<p>Следует отметить, что &lsquo;it_blocker&rsquo; может быть уничтожен, если на покрытие положить объект <a href="#it_005fbrake">it_brake</a>. 
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: <code>0</code>, <code>1</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>1</code> &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dd><p>В качестве значений используйте макросы CLOSED и OPEN. Предмет соответствует открытому состоянию и всегда возвращает состояние 1. Но вы также можете установить его состояние, что равнозначно отправлению сообщения об открытии при задании значения 1 и сообщения о закрытии при задании значения 0.
</p>
<a name="index-autoclose"></a>
</dd>
<dt> <b>autoclose</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code></dt>
<dd><p>Если задано значение &quot;true&quot;, предмет будет закрываться, трансформируясь в камень, при прохождении сквозь него любого актёра.
</p>
</dd>
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
</dl>

</dd>
<dt> <b>Сообщения:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>signal</b> &nbsp;&nbsp;См. раздел <a href="#signal">signal</a></dt>
<dd><p>Сигнал со значением 1 посылает сообщение об открытии, сигнал со значением 0 &mdash; о закрытии.
</p></dd>
<dt> <b>toggle</b> &nbsp;&nbsp;См. раздел <a href="#toggle">toggle</a></dt>
<dd><p>В данном случае соответствует сообщению о закрытии.
</p></dd>
<dt> <b>close</b> &nbsp;&nbsp;См. раздел <a href="#close">close</a></dt>
<dd><p>Сообщение о закрытии выполняется незамедлительно, если над предметом нет камня. Тогда предмет превращается в <a href="#st_005fblocker">st_blocker</a>. Если предмет находится под любым камнем, он будет помечен как незапертый. Предмет закроется после того, как его освободят из-под камня.
</p></dd>
<dt> <b>open</b> &nbsp;&nbsp;См. раздел <a href="#open">open</a></dt>
<dd><p>Поскольку предмету соответствует открытое состояние, это сообщение действует только в том случае, если предмет спрятан под камнем и помечен как незапертый. Это означает, что он начнёт расти, как только с него уберут камень, что происходит, когда <a href="#st_005fboulder">st_boulder</a> проходит сквозь неактивный блокирующий предмет. В этом случае сообщение &lsquo;open&rsquo; снова запирает блокирующий предмет, чтобы он не трансформировался, когда с него уберут камень.
</p></dd>
</dl>

</dd>
<dt> <b>Действие:</b> &nbsp;&nbsp;См. раздел <a href="#target">target</a>, &nbsp;&nbsp;см. раздел <a href="#action">action</a></dt>
<dd><p>Посылает действие в момент открытия блокирующего камня. Это означает, что <a href="#st_005fblocker">st_blocker</a> открылся и сгенерировал данный блокирующий предмет в качестве своего потомка. Значением, выражающим открытое состояние, будет <code>true</code>.
</p>
</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_blocker_4.png" alt="images/st_blocker_4"><p> <b>it_blocker</b>
</p></dt>
<dd><p>Стандартный предмет.
</p></dd>
<dt> <img src="images/st_blocker_4.png" alt="images/st_blocker_4"><p> <b>it_blocker_new</b>
</p></dt>
<dd><p>Блокирующий предмет, который только что закончил трансформацию. В основном используется системой как прямой потомок объекта <a href="#st_005fblocker">st_blocker</a>. Но иногда также бывает удобно сгенерировать первоначальный снимок болдера, проходящего сквозь блокирующий объект (см. примеры уровней).
</p></dd>
</dl>

</dd>
</dl>

<hr size="6">
<a name="it_005fbomb"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005fblocker" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005fburnable" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Static-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005fbomb-1"></a>
<h3 class="subsection">8.4.2 it_bomb</h3>
<a name="index-it_005fbomb"></a>

<p>Бомба &mdash; это взрывчатое устройство, которое нельзя подобрать. Она активируется лазерными лучами, горящим рядом огнём, взрывающимися поблизости другими объектами <a href="#it_005fbomb">it_bomb</a> и <a href="#it_005fdynamite">it_dynamite</a>, взрывающимся непосредственно над бомбой объектом <a href="#st_005fdispenser">st_dispenser</a> либо обычным непроницаемым камнем, передвинутым на бомбу (лишь несколько камней, такие как <a href="#st_005fshogun">st_shogun</a> и <a href="#st_005fbox">st_box</a>_hay, не приводят к взрыву бомбы). При падении на данный предмет объекта <a href="#ot_005fcannonball">ot_cannonball</a> предмет тотчас взрывается без предварительного поджига.
</p>
<p>При запаливании фитиль предмета начинает гореть. Через непродолжительное время бомба взрывается, поджигая предметы на 8&nbsp;соседних участках решётки и также разрушая некоторые камни, например <a href="#st_005fbreak">st_break</a>.
</p>
<p>Чёрные (&lsquo;<samp>BLACK</samp>&rsquo;) бомбы уничтожают разрушаемые предметы на 4&nbsp;соседних решётках, также разрушая покрытие под ними и оставляя после него <a href="#fl_005fabyss">fl_abyss</a>.
</p>
<p>Белые (&lsquo;<samp>WHITE</samp>&rsquo;) бомбы уничтожают разрушаемые предметы на 8&nbsp;соседних решётках, также разрушая покрытие под ними и оставляя после него <a href="#fl_005fabyss">fl_abyss</a>.
</p>
<p>Бомбы можно добавить в инвентарь, ударив актёром по камню <a href="#st_005fdispenser">st_dispenser</a>_bombblack или <a href="#st_005fdispenser">st_dispenser</a>_bombwhite.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: <code>IDLE</code>, <code>ACTIVE</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>IDLE</code> &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dt> <b>color</b> &nbsp;&nbsp;<i>значения</i>: <code>BLACK</code>, <code>WHITE</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>BLACK</code></dt>
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
<dd><p>Портативными являются только бомбы, у которых значение атрибута &lsquo;<samp>state</samp>&rsquo; равно &lsquo;<samp>IDLE</samp>&rsquo;, горящие (&lsquo;<samp>ACTIVE</samp>&rsquo;) бомбы нельзя добавить в инвентарь или сумку (<a href="#it_005fbag">it_bag</a>).
</p></dd>
</dl>

</dd>
<dt> <b>Сообщения:</b></dt>
<dd><dl compact="compact">
<dt> <b>explode</b></dt>
<dd><p>Мгновенный взрыв без запаливания фитиля.
</p></dd>
<dt> <b>ignite</b></dt>
<dd><p>Запаливание фитиля.
</p></dd>
<dt> <b>heat</b></dt>
<dd><p>Запаливание фитиля.
</p></dd>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/it_bomb.png" alt="images/it_bomb"><p> <b>it_bomb</b>: color = <code>BLACK</code>
</p></dt>
<dt> <img src="images/it_bomb.png" alt="images/it_bomb"><p> <b>it_bomb_black</b>: color = <code>BLACK</code>
</p></dt>
<dt> <img src="images/it_bomb_b.png" alt="images/it_bomb_b"><p> <b>it_bomb_white</b>: color = <code>WHITE</code>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="it_005fburnable"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005fbomb" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005fcrack" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Static-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005fburnable-1"></a>
<h3 class="subsection">8.4.3 it_burnable</h3>
<a name="index-it_005fburnable"></a>

<p>Предмет, унаследованный от предыдущих версий игры, который реализует состояние огня и отвечает за его видимую анимацию. Данный предмет в настоящее время является в основном внутренним системным предметом, поскольку <a href="#Fire-Spreading">распространение огня</a> с его атрибутами и сообщениями в основном реализуется <a href="#Floor-Objects">покрытиями</a>. Но для понимания механики игры важно иметь представление об этом объекте и всех его разновидностях. Данный объект во всех своих разновидностях также может вам потребоваться при инициализации уровня в силу <a href="#Snapshot-Principle">принципа снимка</a>.
</p>
<p>Существуют следующие разновидности данного объекта:
</p><ul>
<li> &lsquo;<samp>invisible</samp>&rsquo; &mdash; позволяет участку покрытия загореться под воздействием огня и взрывов; вместо него используйте атрибуты <a href="#burnable">burnable</a> и <a href="#ignitable">ignitable</a>.
</li><li> &lsquo;<samp>oil</samp>&rsquo; &mdash; видимая разновидность невидимого горючего предмета.
</li><li> &lsquo;<samp>ignited</samp>&rsquo; &mdash; отвечает за начальную анимацию огня; вместо его использования отправьте участку покрытия сообщение &lsquo;<samp>setfire</samp>&rsquo; либо используйте атрибут &lsquo;<samp>initfire</samp>&rsquo;. 
</li><li> &lsquo;<samp>burning</samp>&rsquo; &mdash; отвечает за анимацию горящего огня. Вместо него используйте сообщение &lsquo;<samp>setfire</samp>&rsquo;.
</li><li> &lsquo;<samp>ash</samp>&rsquo; &mdash; несгораемый пепел, остающийся после огня.
</li><li> &lsquo;<samp>fireproof</samp>&rsquo; &mdash; пена огнетушителя, защищающая покрытие от огня.
</li></ul>

<p>Обратите внимание, что установить или изменить атрибут &lsquo;<samp>state</samp>&rsquo; горючего предмета нельзя. Но разновидность предмета можно запросить.
</p>
<p>Помимо <a href="#Fire-Spreading">распространения огня</a>, игрок может взаимодействовать с горючими предметами при помощи следующих объектов:
</p><ul>
<li> <a href="#it_005fextinguisher">it_extinguisher</a> распространяет пену &lsquo;<samp>fireproof</samp>&rsquo;
</li><li> <a href="#it_005fbrush">it_brush</a> убирает &lsquo;<samp>ash</samp>&rsquo; и &lsquo;<samp>fireproof</samp>&rsquo;
</li><li> <a href="#st_005fice">st_ice</a> удаляет все разновидности горючего предмета, кроме &lsquo;<samp>oil</samp>&rsquo;, если его сдвинуть на них.
</li></ul>

<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: iцелые числа от 0 до 5; &nbsp;&nbsp;<i>по умолчанию</i>: <code>0</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code>  &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
</dl>

</dd>
<dt> <b>Сообщения:</b></dt>
<dd><dl compact="compact">
<dt> <b>ignite</b> &nbsp;&nbsp;См. раздел <a href="#ignite">ignite</a></dt>
<dd><p>Зажигает покрытие под предметом.
</p></dd>
<dt> <b>extinguish</b></dt>
<dd><p>Изменяет текущую разновидность предмета на огнетушащую пену.
</p></dd>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/fl_white.png" alt="images/fl_white"><p> <b>it_burnable</b>: state = <code>0</code>
</p></dt>
<dt> <img src="images/fl_white.png" alt="images/fl_white"><p> <b>it_burnable_invisible</b>: state = <code>0</code>
</p></dt>
<dt> <img src="images/it_burnable_oil.png" alt="images/it_burnable_oil"><p> <b>it_burnable_oil</b>: state = <code>1</code>
</p></dt>
<dt> <img src="images/fl_white.png" alt="images/fl_white"><p> <b>it_burnable_ignited</b>: state = <code>2</code>
</p></dt>
<dt> <img src="images/it_burnable_burning.png" alt="images/it_burnable_burning"><p> <b>it_burnable_burning</b>: state = <code>3</code>
</p></dt>
<dt> <img src="images/it_burnable_ash.png" alt="images/it_burnable_ash"><p> <b>it_burnable_ash</b>: state = <code>4</code>
</p></dt>
<dt> <img src="images/it_burnable_fireproof.png" alt="images/it_burnable_fireproof"><p> <b>it_burnable_fireproof</b>: state = <code>5</code>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="it_005fcrack"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005fburnable" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005fcross" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Static-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005fcrack-1"></a>
<h3 class="subsection">8.4.4 it_crack</h3>
<a name="index-it_005fcrack"></a>

<p>Предмет, доставшийся в наследство от предыдущих версий игры и представляющий собой трещину на покрытии. Трещина увеличивается с каждым заходом актёра на участок покрытия, которое в конечном итоге разрушается, оставляя после себя <a href="#fl_005fabyss">fl_abyss</a> или <a href="#fl_005fwater">fl_water</a>. Цвет трещин сигнализирует о типе нового покрытия, которое останется взамен разрушенного, и определяется атрибутом &lsquo;<samp>flavor</samp>&rsquo;.
</p>
<p>Степень разрушения покрытия описывается атрибутом &lsquo;<samp>state</samp>&rsquo;. При каждом событии, вызывающем дальнейшее разрушение покрытия, состояние трещины изменяется на единицу; в конечном итоге, трещина с состоянием &lsquo;<samp>LARGE</samp>&rsquo; исчезает, оставляя находящемуся на ней актёру совсем немного времени, чтобы уйти с покрытия. Конечно, актёр, перепрыгивающий через трещину, не вызывает изменения её состояния.
</p>
<p>Изменение состояния трещины можно контролировать при помощи двух атрибутов: &lsquo;<samp>spreading</samp>&rsquo; и &lsquo;<samp>fragility</samp>&rsquo;. В то время как первый атрибут описывает вероятнось распространения трещины на соседний целый участок покрытия, второй атрибут описывает вероятность изменения состояния имеющейся трещины.
</p>
<p>Актёр, заходящий на трещину, вызывает изменение её состояния с заданной вероятностью. По умолчанию трещина типа &lsquo;<samp>abyss</samp>&rsquo; также вызывает изменения состояния имеющихся трещин на любом из 4&nbsp;соседних участков покрытия. Но трещина типа &lsquo;<samp>water</samp>&rsquo; не изменяет состояние соседних трещин. Оба типа с заданной вероятностью вызывают распространение невидимой трещины на любой из 4&nbsp;соседних участков покрытия, если этих участках отсутствуют трещины или другие предметы.
</p>
<p>Рассмотрим распространение трещин подробнее. Актёр, зайдя на трещину, вызывает появление невидимой трещины на соседнем участке решётки. Если актёр перемещается на этот участок, то на нём с заданной вероятностью вместо невидимой появляется маленькая видимая трещина. Обратите внимание, что заданная вероятность распространения действует для первого  и только для первого изменения состояния трещины. Это означает, что даже если значение хрупкости равно 0, невидимая трещина становится видимой.
</p>
<p>Ещё одна характерная особенность данного предмета &mdash; это поведение большой трещины. Если на неё зайдёт актёр, то трещина будет уничтожена. Но при этом разрушение не распространяется на соседние участки решётки и не прогрессирует на них. То есть, если актёр зайдёт на участок решётки, на котором находится большая трещина, то соседний участок разрушен при этом не будет, что позволяет актёру проходить по территориям, состоящим сплошь из больших трещин.
</p>
<p>Помимо значений атрибутов по умолчанию, в игре также нередко встречаются следующие их комбинации:
</p><ul>
<li> &lsquo;<samp>spreading=0, fragility=0</samp>&rsquo; &mdash; ложная трещина, которая не разрушается и не распространяется на другие участки решётки;
</li><li> &lsquo;<samp>spreading=0, fragility=1</samp>&rsquo; &mdash; трещина, которая разрушается, вызывая при этом разрушение трещин на соседних участках решётки, но не распространяется на новые участки решётки.
</li></ul>

<p>Оба атрибута наследуются новыми трещинами в процессе распространения трещин. Если значения этих атрибутов не были установлены, они по умолчанию принимают значения глобальных атрибутов. Для получения максимального контроля над уровнем можно установить значения атрибутов для отдельных участков покрытия с помощью атрибута <a href="#fragility-_0028floor_0029">fragility (покрытие)</a>. Значения данного атрибута обладают приоритетом над значениями глобального атрибута <a href="#Fragility">Fragility</a>.
</p>
<p>На неразрушаемых покрытиях, таких как <a href="#fl_005fabyss">fl_abyss</a>, <a href="#fl_005fwater">fl_water</a>, <a href="#fl_005fswamp">fl_swamp</a>, трещины образоваться не могут. Подобно другим предметам, трещины блокируют лазерные лучи и не позволяют положить ещё один предмет на занимаемый ими участок решётки. Горящий поблизости огонь, взрывы, а также падение объекта <a href="#ot_005fcannonball">ot_cannonball</a> вызывают поступенчатое прогрессирование состояние трещины.
</p>
<p>С другой стороны, если на трещину передвинуть объект <a href="#st_005fice">st_ice</a>, то он будет действовать как замазка, заделывая трещину.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: <code>INVISIBLE</code>, <code>SMALL</code>, <code>MEDIUM</code>, <code>LARGE</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>SMALL</code> &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dt> <b>flavor</b>, &nbsp;&nbsp;<i>значения</i>: <code>&quot;abyss&quot;</code>, <code>&quot;water&quot;</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>&quot;abyss&quot;</code></dt>
<dt> <b>spreading</b> &nbsp;&nbsp;<i>значения</i>: положительные числа от 0.0 до 1.0; &nbsp;&nbsp;<i>по умолчанию</i>: <code>0.5</code>, &nbsp;&nbsp;См. раздел <a href="#CrackSpreading">CrackSpreading</a></dt>
<dt> <b>fragility</b> &nbsp;&nbsp;<i>значения</i>: положительные числа от 0.0 до 1.0; &nbsp;&nbsp;<i>по умолчанию</i>: <code>1.0</code>, &nbsp;&nbsp;См. раздел <a href="#Fragility">Fragility</a></dt>
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
</dl>

</dd>
<dt> <b>Сообщения:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>crack</b></dt>
<dt> <b>toggle</b> &nbsp;&nbsp;См. раздел <a href="#toggle">toggle</a></dt>
<dt> <b>ignite</b> &nbsp;&nbsp;См. раздел <a href="#ignite">ignite</a></dt>
<dt> <b>heat</b> &nbsp;&nbsp;См. раздел <a href="#heat">heat</a></dt>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><table>
<tr><td width="8%"><img src="images/it_crack_abyss.png" alt="images/it_crack_abyss"></td><td width="42%"><b>it_crack</b>: state = <code>SMALL</code>, flavor = <code>&quot;abyss&quot;</code></td><td width="8%"><img src="images/it_crack_water.png" alt="images/it_crack_water"></td><td width="42%"><b>it_crack</b>: state = <code>SMALL</code>, flavor = <code>&quot;water&quot;</code></td></tr>
<tr><td width="8%"><img src="images/fl_white.png" alt="images/fl_white"></td><td width="42%"><b>it_crack_i</b>: state = <code>INVISIBLE</code>, flavor = <code>&quot;abyss&quot;</code></td><td width="8%"><img src="images/fl_white.png" alt="images/fl_white"></td><td width="42%"><b>it_crack_i</b>: state = <code>INVISIBLE</code>, flavor = <code>&quot;water&quot;</code></td></tr>
<tr><td width="8%"><img src="images/it_crack_abyss.png" alt="images/it_crack_abyss"></td><td width="42%"><b>it_crack_s</b>: state = <code>SMALL</code>, flavor = <code>&quot;abyss&quot;</code></td><td width="8%"><img src="images/it_crack_water.png" alt="images/it_crack_water"></td><td width="42%"><b>it_crack_s</b>: state = <code>SMALL</code>, flavor = <code>&quot;water&quot;</code></td></tr>
<tr><td width="8%"><img src="images/it_crack_abyss_2.png" alt="images/it_crack_abyss_2"></td><td width="42%"><b>it_crack_m</b>: state = <code>MEDIUM</code>, flavor = <code>&quot;abyss&quot;</code></td><td width="8%"><img src="images/it_crack_water_2.png" alt="images/it_crack_water_2"></td><td width="42%"><b>it_crack_m</b>: state = <code>MEDIUM</code>, flavor = <code>&quot;water&quot;</code></td></tr>
<tr><td width="8%"><img src="images/it_crack_abyss_3.png" alt="images/it_crack_abyss_3"></td><td width="42%"><b>it_crack_l</b>: state = <code>LARGE</code>, flavor = <code>&quot;abyss&quot;</code></td><td width="8%"><img src="images/it_crack_water_3.png" alt="images/it_crack_water_3"></td><td width="42%"><b>it_crack_l</b>: state = <code>LARGE</code>, flavor = <code>&quot;water&quot;</code></td></tr>
</table>

</dd>
</dl>

<hr size="6">
<a name="it_005fcross"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005fcrack" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005fdeath" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Static-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005fcross-1"></a>
<h3 class="subsection">8.4.5 it_cross</h3>
<a name="index-it_005fcross"></a>

<p>Участок, помеченный бросающимся в глаза крестом и реагирующий на актёров, если они находятся на нём определённое время. Если актёр находится на объекте в течение промежутка времени, заданного атрибутом &lsquo;<samp>interval</samp>&rsquo;, и за это время другие актёры не заходят на данный участок и не сходят с него, объект выполняет определённое действие. Похожим образом работают другие датчики &mdash; <a href="#it_005fsensor">it_sensor</a> и <a href="#it_005ftrigger">it_trigger</a>, но действие осуществляется сразу после их активации.
</p>
<p>Крест можно нарисовать с помощью <a href="#it_005fpencil">it_pencil</a> и стереть с помощью <a href="#it_005fbrush">it_brush</a>.
</p>
<p>При перемещении на крест объект <a href="#st_005flightpassenger">st_lightpassenger</a> выключится.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: <code>0</code>, <code>1</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dd><p>Текущее состояние &lsquo;<samp>0</samp>&rsquo; &mdash; при последнем событии актёр покинул данный участок, &lsquo;<samp>1</samp>&rsquo; &mdash; при последнем событии актёр зашёл на данный участок.
</p>
</dd>
<dt> <b>interval</b> &nbsp;&nbsp;<i>значения</i>: положительное число; &nbsp;&nbsp;<i>по умолчанию</i>: <code>10.0</code></dt>
<dd><p>Количество секунд, которое актёр должен находиться на объекте для его срабатывания.
</p></dd>
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
</dl>

</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Действие:</b> &nbsp;&nbsp;См. раздел <a href="#target">target</a>, &nbsp;&nbsp;см. раздел <a href="#action">action</a></dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/it_cross.png" alt="images/it_cross"><p> <b>it_cross</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="it_005fdeath"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005fcross" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005fexplosion" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Static-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005fdeath-1"></a>
<h3 class="subsection">8.4.6 it_death</h3>
<a name="index-it_005fdeath"></a>

<p>Данный предмет убивает любой шарик, который пытается пройти по занимаемому им квадрату. Гибнут даже шарики, пытающиеся перепрыгнуть через него. Только шарики, находящиеся под защитой активированного объекта <a href="#it_005fumbrella">it_umbrella</a>, могут безбоязненно проходить по нему. Если не считать использования зонтика, избежать опасности игрок может, лишь обойдя занимаемый смертоносным предметом участок либо воспользовавшись такими средствами перемещения, как <a href="#it_005fvortex">it_vortex</a>, <a href="#it_005fwormhole">it_wormhole</a> или <a href="#it_005fring">it_ring</a>.
</p>
<p>Смертоносный предмет &mdash; это самый надёжный барьер на пути шарика. По данному параметру с ним можно сравнить  <a href="#it_005fbottle">it_bottle</a>_broken, <a href="#fl_005fabyss">fl_abyss</a>, <a href="#fl_005fwater">fl_water</a>, <a href="#it_005ftrap">it_trap</a> или стену из небьющихся камней. В большинстве случаев предпочтение следует отдавать данным альтернативам. Смертоносный предмет следует использовать, только когда все альтернативы кажутся слишком ненадежными.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
</dl>

</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/it_death.png" alt="images/it_death"><p> <b>it_death</b>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="it_005fexplosion"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005fdeath" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005flandmine" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Static-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005fexplosion-1"></a>
<h3 class="subsection">8.4.7 it_explosion</h3>
<a name="index-it_005fexplosion"></a>

<p>Промежуточный короткоживущий системный объект, являющийся представлением взрыва и отвечающий за его визуализацию. Помимо системной роли объекта в процессе реализации взрывов <a href="#it_005fbomb">it_bomb</a>, <a href="#it_005fdynamite">it_dynamite</a>, <a href="#it_005flandmine">it_landmine</a> и <a href="#ot_005fcannonball">ot_cannonball</a>, существует очень мало допустимых способов его использования.
</p>
<p>Все объекты-реализации взрыва уничтожают шарикообразных актёров.
</p>
<p>Существуют следующие разновидности данного объекта:
</p><ul>
<li> &lsquo;<samp>nil</samp>&rsquo; &mdash; не оставляет после себя ничего.
</li><li> &lsquo;<samp>hollow</samp>&rsquo; &mdash; оставляет после себя объект <a href="#it_005fmeditation">it_meditation</a>_hollow.
</li><li> &lsquo;<samp>crack</samp>&rsquo; &mdash; оставляет после себя объект <a href="#it_005fcrack">it_crack</a>_water.
</li><li> &lsquo;<samp>debris</samp>&rsquo; &mdash; трансформирует участок покрытия в <a href="#SubSoil">SubSoil</a>, по умолчанию &mdash; <a href="#fl_005fabyss">fl_abyss</a>.
</li></ul>

<p>Обратите внимание, что установить или изменить атрибут &lsquo;<samp>state</samp>&rsquo; предмета-реализации взрыва нельзя. Но разновидность предмета можно запросить.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: iцелые числа от 0 до 3; &nbsp;&nbsp;<i>по умолчанию</i>: <code>0</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code>  &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
</dl>

</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/it_explosion.png" alt="images/it_explosion"><p> <b>it_explosion</b>: state = <code>0</code>
</p></dt>
<dt> <img src="images/it_explosion.png" alt="images/it_explosion"><p> <b>it_explosion_nil</b>: state = <code>0</code>
</p></dt>
<dt> <img src="images/it_explosion.png" alt="images/it_explosion"><p> <b>it_explosion_hollow</b>: state = <code>1</code>
</p></dt>
<dt> <img src="images/it_explosion.png" alt="images/it_explosion"><p> <b>it_explosion_crack</b>: state = <code>2</code>
</p></dt>
<dt> <img src="images/it_explosion.png" alt="images/it_explosion"><p> <b>it_explosion_debris</b>: state = <code>3</code>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="it_005flandmine"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005fexplosion" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005flaserbeam" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Static-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005flandmine-1"></a>
<h3 class="subsection">8.4.8 it_landmine</h3>
<a name="index-it_005flandmine"></a>

<p>Статичный предмет, который взрывается, если актёры прикасаются к его центральной части, а также если на него передвинуть камень.
</p>
<p>Фугас взрывается, разбивая шарики, находящиеся на одном с ним квадрате, и оставляя после себя воронку <a href="#it_005fmeditation">it_meditation</a>.
</p>
<p>Актёры могут перепрыгивать через фугас, а также осторожно проходить между двумя соседними фугасами, не активируя их. Фугасы не реагируют на взрывы на соседних квадратах, огонь и лазерные лучи.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
</dl>

</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Действие:</b> отсутствует</dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/it_landmine.png" alt="images/it_landmine"><p> <b>it_landmine</b>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="it_005flaserbeam"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005flandmine" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005fmagnet" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Static-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005flaserbeam-1"></a>
<h3 class="subsection">8.4.9 it_laserbeam</h3>
<a name="index-it_005flaserbeam"></a>

<p>Данный предмет представляет собой луч лазера. Его испускает включённый объект <a href="#st_005flaser">st_laser</a>. Движок игры автоматически вычисляет свойства луча и создаёт предметы. Произвольно создать данные предметы нельзя. Но лазерный луч можно обнаружить в силу того, что он занимает слой предметов на участке решётки. Вы можете заменить лазерный луч любым другим предметом. При этом параметры лазерного луча автоматически перерасчитываются.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
</dl>
</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/it_laser.png" alt="images/it_laser"><p> <b>it_laserbeam</b> экземпляры данного объекта не могут быть созданы уровнем
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="it_005fmagnet"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005flaserbeam" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005fmeditation" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Static-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005fmagnet-1"></a>
<h3 class="subsection">8.4.10 it_magnet</h3>
<a name="index-it_005fmagnet"></a>

<p>Магнит притягивает либо отталкивает актёров на расстоянии, заданном при помощи атрибута &lsquo;<samp>range</samp>&rsquo;, с силой, прямо пропорциональной значению атрибута &lsquo;<samp>strength</samp>&rsquo; и обратно пропорциональной квадрату расстояния. Магнит может быть включён (&lsquo;<samp>ON</samp>&rsquo;) и выключен (&lsquo;<samp>OFF</samp>&rsquo;).
</p>
<p>Следует отметить, что на расстоянии менее 0.05 участка решётки магниты на актёров не воздействуют во избежание чрезмерно больших сил.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: <code>ON</code>, <code>OFF</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>OFF</code> &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dd><p>Текущее состояние &lsquo;<samp>ON</samp>&rsquo; &mdash; магнит включен, &lsquo;<samp>OFF</samp>&rsquo; &mdash; выключен.
</p>
</dd>
<dt> <b>range</b> &nbsp;&nbsp;<i>значения</i>: числа с плавающей запятой, большие либо равные 0; &nbsp;&nbsp;<i>по умолчанию</i>: <code>10.0</code> &nbsp;&nbsp;См. раздел <a href="#MagnetRange">MagnetRange</a></dt>
<dd><p>Расстояние, на котором магниты воздействуют на актёров.
</p>
</dd>
<dt> <b>strength</b> &nbsp;&nbsp;<i>значения</i>: число с плавающей запятой; &nbsp;&nbsp;<i>по умолчанию</i>: <code>+30.0</code> &nbsp;&nbsp;См. раздел <a href="#MagnetStrength">MagnetStrength</a></dt>
<dd><p>Скалярный множитель для магнитных сил. Положительные числа выражают силы притяжения, отрицательные &mdash; силы отталкивания.
</p></dd>
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
</dl>

</dd>
<dt> <b>Сообщения:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>signal</b> &nbsp;&nbsp;См. раздел <a href="#signal">signal</a></dt>
<dd><p>Сигнал со значением 1 включает магнит, со значением 0 &mdash; выключает.
</p></dd>
<dt> <b>toggle</b> &nbsp;&nbsp;См. раздел <a href="#toggle">toggle</a></dt>
<dd><p>Чередует включённое и выключенное состояние магнита.
</p></dd>
<dt> <b>on</b> &nbsp;&nbsp;См. раздел <a href="#on">on</a></dt>
<dd><p>Включает магнит.
</p></dd>
<dt> <b>off</b> &nbsp;&nbsp;См. раздел <a href="#off">off</a></dt>
<dd><p>Выключает магнит.
</p></dd>
</dl>

</dd>
<dt> <b>Действие:</b></dt>
<dd><p>отсутствует
</p>
</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/it_magnet_off.png" alt="images/it_magnet_off"><p> <b>it_magnet</b> state = &lsquo;<samp>OFF</samp>&rsquo;.
</p></dt>
<dt> <img src="images/it_magnet_on.png" alt="images/it_magnet_on"><p> <b>it_magnet_on</b> state = &lsquo;<samp>ON</samp>&rsquo;.
</p></dt>
<dt> <img src="images/it_magnet_off.png" alt="images/it_magnet_off"><p> <b>it_magnet_off</b> state = &lsquo;<samp>OFF</samp>&rsquo;.
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="it_005fmeditation"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005fmagnet" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005fsensor" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Static-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005fmeditation-1"></a>
<h3 class="subsection">8.4.11 it_meditation</h3>
<a name="index-it_005fmeditation"></a>

<p>Объекты для медитации &mdash; это маленькие круглые неровности покрытия. На актёров, находящихся на них, воздействуют силы наклона, которые можно установить при помощи глобального скалярного множителя <a href="#MeditationStrength">MeditationStrength</a>. Существует несколько разновидностей объектов для медитации, которые называются в зависимости от их формы: <code>MEDITATION_CALDERA</code>, <code>MEDITATION_HOLLOW</code>, <code>MEDITATION_DENT</code>, <code>MEDITATION_BUMP</code>, <code>MEDITATION_HILL</code>, <code>MEDITATION_VOLCANO</code>.
</p>
<p>Особый интерес представляют случаи, когда объекты <a href="#ac_005fpearl">ac_pearl</a> покоятся на объекте для медитации. Если они неподвижно находятся в границах окружности объекта в течение одной секунды, то считается, что они медитируют. Одним из двух условий окончания игры (см. раздел <a href="#Ending-Conditions">Условия окончания</a>) является требование, чтобы все шарики расположились на объектах для медитации.
</p>
<p>Так как объекты для медитации можно динамически создавать в процессе игры при помощи взрыва объектов <a href="#it_005flandmine">it_landmine</a> или <a href="#it_005fdynamite">it_dynamite</a>, автору может потребоваться пометить объекты для медитации, которые обязательно должны быть заполнены шариками. Это можно сделать, установив для атрибута &lsquo;<samp>essential</samp>&rsquo; значение <code>true</code>. Пожалуйста, используйте данный атрибут только в редких и очевидных случаях, так как игрок не может отличить необходимые объекты для медитации от излишних по их внешнему виду.
</p>
<p>Объекты для медитации могут изменять свою форму под влиянием различных внешних факторов.
</p>
<p>Во-первых, игрок может сдвинуть на объект для медитации непроницаемый камень или активировать на нём <a href="#it_005fspade">it_spade</a>. Оба действия разглаживают объект для медитации, при этом с каждым подобным воздействием объекты видоизменяются следующим образом: <code>MEDITATION_VOLCANO</code> -&gt; <code>MEDITATION_HILL</code> -&gt; <code>MEDITATION_BUMP</code> -&gt; <code>it_nil</code> или <code>MEDITATION_CALDERA</code> -&gt; <code>MEDITATION_HOLLOW</code> -&gt; <code>MEDITATION_DENT</code> -&gt; <code>it_nil</code>.
</p>
<p>Во-вторых, вы можете послать объекту для медитации сообщение <code>&quot;flip&quot;</code>, которое превращает вогнутые объекты для медитации в соответствующие им выпуклые и наоборот: <code>MEDITATION_VOLCANO</code> &lt;-&gt; <code>MEDITATION_CALDERA</code>, <code>MEDITATION_HILL</code> &lt;-&gt; <code>MEDITATION_HOLLOW</code>, <code>MEDITATION_BUMP</code> &lt;-&gt; <code>MEDITATION_DENT</code>.
</p>
<p>В-третьих, сообщения <code>&quot;signal&quot;</code> при значении <code>1</code> превращают все вогнутые объекты для медитации в соответствующие им выпуклые, оставляя выпуклые объекты без изменений, а при значении <code>0</code> &mdash; все выпуклые объекты в соответствующие им вогнутые, оставляя вогнутые объекты без изменений.
</p>
<p>Четвёртым подобным сообщением является <code>&quot;toggle&quot;</code>. Оно изменяет вид объектов для медитации следующим образом: <code>MEDITATION_HOLLOW</code> &lt;-&gt; <code>MEDITATION_VOLCANO</code>, <code>MEDITATION_CALDERA</code> &lt;-&gt; <code>MEDITATION_HILL</code>, <code>MEDITATION_BUMP</code> &lt;-&gt; <code>MEDITATION_DENT</code>.
</p>
<p>Конечно, вы можете изменить состояние, установив значение атрибута в любое время и в любой необходимой последовательности. Значение атрибута &lsquo;essential&rsquo; сохраняется при изменении формы объекта, а подсчёт медитирующих актёров продолжается с обновлением значения.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: <code>MEDITATION_CALDERA</code>, <code>MEDITATION_HOLLOW</code>, <code>MEDITATION_DENT</code>, <code>MEDITATION_BUMP</code>, <code>MEDITATION_HILL</code>, <code>MEDITATION_VOLCANO</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>MEDITATION_HOLLOW</code> &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dd><p>Форма объекта для медитации.
</p></dd>
<dt> <b>essential</b> &nbsp;&nbsp;<i>значения</i>: <code>DISPENSABLE</code>, <code>INDISPENSABLE</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>DISPENSABLE</code></dt>
<dd><p>Определяет, должен ли объект для медитации быть заполнен шариком для медитации для удовлетворения условиям окончания уровня (см. раздел <a href="#Ending-Conditions">Условия окончания</a>).
</p></dd>
<dt> <b>friction</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: <code>nil</code> &nbsp;&nbsp;См. раздел <a href="#friction">friction</a></dt>
<dd><p>Сила трения, по умолчанию равная силе трения покрытия.
</p></dd>
<dt> <b>adhesion</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: <code>nil</code> &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dd><p>Сила сцепления, по умолчанию равная силе сцепления покрытия.
</p></dd>
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
</dl>

</dd>
<dt> <b>Сообщения:</b></dt>
<dd><dl compact="compact">
<dt> <b>flip</b></dt>
<dd><p>Изменение формы объекта (см. описание выше).
</p></dd>
<dt> <b>shovel</b></dt>
<dd><p>Изменение формы, как в случае с активированным объектом <a href="#it_005fspade">it_spade</a> (см. описание выше).
</p></dd>
<dt> <b>signal</b> &nbsp;&nbsp;См. раздел <a href="#signal">signal</a></dt>
<dd><p>Изменение формы объекта (см. описание выше).
</p></dd>
<dt> <b>toggle</b></dt>
<dd><p>Изменение формы объекта (см. описание выше).
</p></dd>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/it_meditation_hollow.png" alt="images/it_meditation_hollow"><p> <b>it_meditation</b> state = <code>MEDITATION_HOLLOW</code>
</p></dt>
<dt> <img src="images/it_meditation_caldera.png" alt="images/it_meditation_caldera"><p> <b>it_meditation_caldera</b> state = <code>MEDITATION_CALDERA</code>
</p></dt>
<dt> <img src="images/it_meditation_hollow.png" alt="images/it_meditation_hollow"><p> <b>it_meditation_hollow</b> state = <code>MEDITATION_HOLLOW</code>
</p></dt>
<dt> <img src="images/it_meditation_dent.png" alt="images/it_meditation_dent"><p> <b>it_meditation_dent</b> state = <code>MEDITATION_DENT</code>
</p></dt>
<dt> <img src="images/it_meditation_bump.png" alt="images/it_meditation_bump"><p> <b>it_meditation_bump</b> state = <code>MEDITATION_BUMP</code>
</p></dt>
<dt> <img src="images/it_meditation_hill.png" alt="images/it_meditation_hill"><p> <b>it_meditation_hill</b> state = <code>MEDITATION_HILL</code>
</p></dt>
<dt> <img src="images/it_meditation_volcano.png" alt="images/it_meditation_volcano"><p> <b>it_meditation_volcano</b> state = <code>MEDITATION_VOLCANO</code>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="it_005fsensor"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005fmeditation" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005fshogun" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Static-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005fsensor-1"></a>
<h3 class="subsection">8.4.12 it_sensor</h3>
<a name="index-it_005fsensor"></a>

<p>Датчик &mdash; это расположенный на полу переключатель, реагирующий на проходящих по нему актёров. В зависимости от значения атрибута &lsquo;<samp>exit</samp>&rsquo;, он выполняет действие, когда актёр заходит или покидает участок решётки, на котором расположен датчик. В качестве значения действия он отправляет вызвавшего действие актёра,что языком Lua воспринимается как &lsquo;<samp>true</samp>&rsquo;, но, конечно, с помощью атрибута <a href="#inverse">inverse</a> можно заставить его отсылать значение &lsquo;<samp>false</samp>&rsquo;.
</p>
<p>Любой актёр, проходящий по участку решётки или перепрыгивающий через него, будет замечен датчиком.
</p>
<p>Датчики срабатывают беззвучно. Но видимые датчики будут мигать при прохождении по ним актёров. Триггер можно сделать невидимым, задав соответствующий атрибут. Но обратите внимание, что игрок может заметить, что актёры не могут помещать предметы на данном участке решётки.
</p>
<p>Автор уровня может настроить очки <a href="#it_005fglasses">it_glasses</a>, чтобы они замечали невидимые датчики, добавив &lsquo;<samp>SPOT_SENSOR</samp>&rsquo;. Актёр с подобными очками в инвентаре сможет заметить невидимые датчики. С помощью глобального атрибута <a href="#ExtralifeGlasses">ExtralifeGlasses</a> можно сделать так, что даже очки, полученные в результате воздействия лучом лазера на объект <a href="#it_005fextralife">it_extralife</a>, не смогут заметить невидимые датчики.
</p>
<p>Другими объектами, реагирующими на актёров, являются <a href="#it_005ftrigger">it_trigger</a> и <a href="#it_005fcross">it_cross</a>.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>invisible</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code></dt>
<dd><p>Невидимый датчик полностью прозрачен. Но игрок может обнаружить его, так как актёры не могут располагать предметы на участке решётки с триггером.
</p></dd>
<dt> <b>exit</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code></dt>
<dd><p>Определяет должен ли датчик реагировать на уход или вход актёра на участок решётки.
</p></dd>
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
</dl>

</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Действие:</b> &nbsp;&nbsp;См. раздел <a href="#target">target</a>, &nbsp;&nbsp;см. раздел <a href="#action">action</a></dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/it_sensor.png" alt="images/it_sensor"><p> <b>it_sensor</b>: exit = <code>false</code>
</p></dt>
<dt> <img src="images/it_sensor_exit.png" alt="images/it_sensor_exit"><p> <b>it_sensor_exit</b>: exit = <code>true</code>
</p></dt>
</dl>

</dd>
</dl>


<hr size="6">
<a name="it_005fshogun"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005fsensor" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005fspringboard" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Static-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005fshogun-1"></a>
<h3 class="subsection">8.4.13 it_shogun</h3>
<a name="index-it_005fshogun"></a>

<p>Круглый синий анимированный датчик, предназначенный для объектов <a href="#st_005fshogun">st_shogun</a>. Существует три его разновидности, соответствующие различным размерам отверстий в камнях сёгун.
</p>
<p>Датчики сёгун фиксируют находящиеся на них стопки объектов <a href="#st_005fshogun">st_shogun</a> с отверстиями, начиная с наименьшего и заканчивая равным датчику по размеру. Таким образом, маленький датчик требует одного маленького камня сёгун, средний датчик требует сочетания маленького камня внутри и среднего снаружи, в то время как самый крупный датчик требует сочетания всех трёх камней, один внутри другого.
</p>
<p>Не существует способа задать состояние датчика вручную. Но, тем не менее, состояние доступно для чтения. При инициализации датчик с подходящим набором камней на нём в соответствии с принципом снимка (см. раздел <a href="#Snapshot-Principle">Принцип снимка</a>) будет иметь состояние &lsquo;<samp>ON</samp>&rsquo;, не посылая никаких действий.
</p>
<p>Обратите внимание, что данный объект можно заморозить при помощи <a href="#st_005fice">st_ice</a> и после этого перенести в другое место.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: <code>OFF</code>, <code>ON</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>OFF</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code>  &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dd><p>Текущее состояние датчика &mdash; &lsquo;<samp>ON</samp>&rsquo;, если на нём находится соответствующий комплект объектов <a href="#st_005fshogun">st_shogun</a>, и &lsquo;<samp>OFF</samp>&rsquo; во всех других случаях.
</p></dd>
<dt> <b>flavor</b>, &nbsp;&nbsp;<i>значения</i>: <code>&quot;s&quot;</code>, <code>&quot;m&quot;</code>, <code>&quot;l&quot;</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>&quot;s&quot;</code></dt>
<dd><p>Строка, описывающая размер отверстия. <code>&quot;s&quot;</code> для маленького отверстия, <code>&quot;m&quot;</code> &mdash; для среднего, <code>&quot;l&quot;</code> &mdash; для большого.
</p>
</dd>
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
</dl>

</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Действие:</b>  &nbsp;&nbsp;См. раздел <a href="#target">target</a>, &nbsp;&nbsp;см. раздел <a href="#action">action</a></dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/it_shogun_s.png" alt="images/it_shogun_s"><p> <b>it_shogun</b>: flavor = <code>&quot;s&quot;</code>
</p></dt>
<dt> <img src="images/it_shogun_s.png" alt="images/it_shogun_s"><p> <b>it_shogun_s</b>: flavor = <code>&quot;s&quot;</code>
</p></dt>
<dt> <img src="images/it_shogun_m.png" alt="images/it_shogun_m"><p> <b>it_shogun_m</b>: flavor = <code>&quot;m&quot;</code>
</p></dt>
<dt> <img src="images/it_shogun_l.png" alt="images/it_shogun_l"><p> <b>it_shogun_l</b>: flavor = <code>&quot;l&quot;</code>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="it_005fspringboard"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005fshogun" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005fsquashed" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Static-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005fspringboard-1"></a>
<h3 class="subsection">8.4.14 it_springboard</h3>
<a name="index-it_005fspringboard"></a>

<p>Статичное устройство для прыжка, которое позволяет <a href="#Flying-Actors">летяющим актёрам</a> подпрыгивать, когда они проходят через его центральный квадрат. Трамплин позволяет катапультировать любое количество актёров в люблй момент, но после активации ему требуется некоторое время, чтобы снова начать действовать.
</p>
<p>Трамплин, расположенный на покрытии, подобрать нельзя. Но, поскольку трамплин является портативным предметом, его можно добавить в инвентарь или сумку (<a href="#it_005fbag">it_bag</a>) при создании уровня или подобрать при трансформации объекта <a href="#it_005fsurprise">it_surprise</a>.
</p>
<p>Похожим по функции, но переносным предметом является <a href="#it_005fspring">it_spring</a>.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
</dl>
</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/it_springboard.png" alt="images/it_springboard"><p> <b>it_springboard</b>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="it_005fsquashed"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005fspringboard" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005fstrip" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Static-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005fsquashed-1"></a>
<h3 class="subsection">8.4.15 it_squashed</h3>
<a name="index-it_005fsquashed"></a>

<p>Данный объект &mdash; это всё, что остаётся от фруктов, таких как <a href="#it_005fcherry">it_cherry</a> и <a href="#it_005fbanana">it_banana</a>, если их раздавить камнем.
</p>
<p>На некоторых типах покрытий остатки фруктов едва различимы. Игрок подобрать их не может. Но их можно смести щёткой (<a href="#it_005fbrush">it_brush</a>) либо убрать, взорвав рядом бомбу (<a href="#it_005fbomb">it_bomb</a>) или переместив на них лёд (<a href="#st_005fice">st_ice</a>).
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
</dl>
</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/it_squashed.png" alt="images/it_squashed"><p> <b>it_squashed</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="it_005fstrip"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005fsquashed" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005ftrap" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Static-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005fstrip-1"></a>
<h3 class="subsection">8.4.16 it_strip</h3>
<a name="index-it_005fstrip"></a>

<p>Эти предметы покрывают маленькую полоску земли под ними и представляют собой узкие мостики, по которым шарик может без опаски пересекать <a href="#fl_005fabyss">fl_abyss</a>, <a href="#fl_005fswamp">fl_swamp</a>, <a href="#fl_005fwater">fl_water</a> или любое другое покрытие.
</p>
<p>Мостик может соединять от нуля (маленький центральный квадрат) до четырёх соседних участков решётки. Шарик может переходить по мостику от одного участка решётки, к которому присоединён мостик, к другому.
</p>
<p>Большой шарик может коснуться любого камня на соседнем участке решётки, и таким образом данный камень предохраняет его от падения с этой стороны. Маленькие шарики не могут касаться соседних камней и, таким образом, не защищены от падения.
</p>
<p>По умолчанию на актёров, находящихся на мостике, действует трение и сцепление, характерные для покрытия, находящегося под мостиком. Но автор уровня может задать и другие значения данных множителей, отличающиеся от значений по умолчанию.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>connections</b>, &nbsp;&nbsp;<i>значения</i>: string; &nbsp;&nbsp;<i>по умолчанию</i>: <code>nil</code></dt>
<dd><p>Описывает связи мостика с соседними участками решётки. Строка является подстрокой <code>&quot;nesw&quot;</code>, описывающей существующие связи. Последовательность сторон &mdash; север, восток, юг, запад &mdash; является обязательной при доступе для чтения, но произвольной при доступе для записи.
</p></dd>
<dt> <b>friction</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: <code>nil</code> &nbsp;&nbsp;См. раздел <a href="#friction">friction</a></dt>
<dd><p>Сила трения, по умолчанию равная силе трения покрытия.
</p></dd>
<dt> <b>adhesion</b>, &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: <code>nil</code> &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dd><p>Сила сцепления, по умолчанию равная силе сцепления покрытия.
</p></dd>
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><table>
<tr><td width="8%"><img src="images/it_strip.png" alt="images/it_strip"></td><td width="42%"><b>it_strip</b>: connections = <code>&quot;&quot;</code></td><td width="8%"><img src="images/it_strip_2.png" alt="images/it_strip_2"></td><td width="42%"><b>it_strip_w</b>: connections = <code>&quot;w&quot;</code></td></tr>
<tr><td width="8%"><img src="images/it_strip_3.png" alt="images/it_strip_3"></td><td width="42%"><b>it_strip_s</b>: connections = <code>&quot;s&quot;</code></td><td width="8%"><img src="images/it_strip_4.png" alt="images/it_strip_4"></td><td width="42%"><b>it_strip_sw</b>: connections = <code>&quot;sw&quot;</code></td></tr>
<tr><td width="8%"><img src="images/it_strip_b.png" alt="images/it_strip_b"></td><td width="42%"><b>it_strip_e</b>: connections = <code>&quot;e&quot;</code></td><td width="8%"><img src="images/it_strip_b2.png" alt="images/it_strip_b2"></td><td width="42%"><b>it_strip_ew</b>: connections = <code>&quot;ew&quot;</code></td></tr>
<tr><td width="8%"><img src="images/it_strip_b3.png" alt="images/it_strip_b3"></td><td width="42%"><b>it_strip_es</b>: connections = <code>&quot;es&quot;</code></td><td width="8%"><img src="images/it_strip_b4.png" alt="images/it_strip_b4"></td><td width="42%"><b>it_strip_esw</b>: connections = <code>&quot;esw&quot;</code></td></tr>
<tr><td width="8%"><img src="images/it_strip_c.png" alt="images/it_strip_c"></td><td width="42%"><b>it_strip_n</b>: connections = <code>&quot;n&quot;</code></td><td width="8%"><img src="images/it_strip_c2.png" alt="images/it_strip_c2"></td><td width="42%"><b>it_strip_nw</b>: connections = <code>&quot;nw&quot;</code></td></tr>
<tr><td width="8%"><img src="images/it_strip_c3.png" alt="images/it_strip_c3"></td><td width="42%"><b>it_strip_ns</b>: connections = <code>&quot;ns&quot;</code></td><td width="8%"><img src="images/it_strip_c4.png" alt="images/it_strip_c4"></td><td width="42%"><b>it_strip_nsw</b>: connections = <code>&quot;nsw&quot;</code></td></tr>
<tr><td width="8%"><img src="images/it_strip_d.png" alt="images/it_strip_d"></td><td width="42%"><b>it_strip_ne</b>: connections = <code>&quot;ne&quot;</code></td><td width="8%"><img src="images/it_strip_d2.png" alt="images/it_strip_d2"></td><td width="42%"><b>it_strip_new</b>: connections = <code>&quot;new&quot;</code></td></tr>
<tr><td width="8%"><img src="images/it_strip_d3.png" alt="images/it_strip_d3"></td><td width="42%"><b>it_strip_nes</b>: connections = <code>&quot;nes&quot;</code></td><td width="8%"><img src="images/it_strip_d4.png" alt="images/it_strip_d4"></td><td width="42%"><b>it_strip_nesw</b>: connections = <code>&quot;nesw&quot;</code></td></tr>
</table>
</dd>
</dl>

<hr size="6">
<a name="it_005ftrap"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005fstrip" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005ftrigger" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Static-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005ftrap-1"></a>
<h3 class="subsection">8.4.17 it_trap</h3>
<a name="index-it_005ftrap"></a>

<p>Классическая ловушка, замаскированная под секцию покрытия. Любой шарик, который наступит на ловушку, заставит её сработать и провалится в находящуюся под ней яму. Но шарики могут без вреда для себя перепрыгивать через неё. Подвижные камни можно передвигать на ловушку без какого-либо эффекта.
</p>
<p>Если шарик проваливается в ловушку, её остатки становятся видимыми. Ловушку также можно открыть посредством сообщений.
</p>
<p>С помощью значения &lsquo;<samp>SPOT_TRAP</samp>&rsquo; автор уровня может настроить очки <a href="#it_005fglasses">it_glasses</a>, чтобы они показывали невидимые ловушки. Актёр, у которого в инвентаре есть такие очки, получит возможность видеть невидимые ловушки. С помощью глобального атрибута <a href="#ExtralifeGlasses">ExtralifeGlasses</a> подобным образом можно настроить даже очки, полученные в результате лазерной трансформации из объекта <a href="#it_005fextralife">it_extralife</a>.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: <code>CLOSED</code>, <code>OPEN</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>CLOSED</code> &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dd><p>Закрытая ловушка (&lsquo;<samp>CLOSED</samp>&rsquo;) является исправной и невидимой, открытая ловушка (&lsquo;<samp>OPEN</samp>&rsquo;) &mdash; разрушена и видима.
</p></dd>
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
</dl>
</dd>
<dt> <b>Сообщения:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>signal</b> &nbsp;&nbsp;См. раздел <a href="#signal">signal</a></dt>
<dd><p>Открывает ловушку, если задано значение &lsquo;<samp>1</samp>&rsquo;
</p></dd>
<dt> <b>toggle</b> &nbsp;&nbsp;См. раздел <a href="#toggle">toggle</a></dt>
<dd><p>Открывает ловушку.
</p></dd>
<dt> <b>open</b> &nbsp;&nbsp;См. раздел <a href="#open">open</a></dt>
<dd><p>Открывает ловушку.
</p></dd>
</dl>
</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/it_trap.png" alt="images/it_trap"><p> <b>it_trap</b>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="it_005ftrigger"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005ftrap" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005fvortex" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Static-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005ftrigger-1"></a>
<h3 class="subsection">8.4.18 it_trigger</h3>
<a name="index-it_005ftrigger"></a>

<p>Триггер &mdash; это расположенный на полу переключатель, реагирующий на актёров и камни, когда они нажимают его. Он выполняет действие, если на него нажать, и ещё одно действие, если его отпустить (т.е. когда с него удаляется последний объект). Нажатый триггер находится в состоянии &lsquo;<samp>ON</samp>&rsquo; и посылает значение действия &lsquo;<samp>true</samp>&rsquo;, ненажатый триггер находится в состоянии &lsquo;<samp>OFF</samp>&rsquo; и посылает значение действия &lsquo;<samp>false</samp>&rsquo;.
</p>
<p>Триггер приводят в действие только актёры, непосредственно находящиеся на нём. На актёров, перепрыгивающих через него, триггер не реагирует. Актёр, прыгающий на триггере вверх и вниз, будет нажимать и отпускать его.
</p>
<p>На триггер могут нажимать только непроницаемые камни. Плавучие полые камни, как правило, не могут привести в действие триггер, за исключением полого центрального камня-мозаики (см. раздел <a href="#st_005fpuzzle">st_puzzle</a>).
</p>
<p>Не существует способов установить состояние триггера вручную. Но, тем не менее, состояние доступно для чтения. При инициализации нажатый триггер будет сгенерирован с состоянием &lsquo;<samp>ON</samp>&rsquo;, но в соответствии с принципом снимка (см. раздел <a href="#Snapshot-Principle">Принцип снимка</a>) не будет отправлять никаких действий.
</p>
<p>Триггер можно сделать невидимым, задав соответствующий атрибут. Но имейте в виду, что его включение и выключение всё равно будут сопровождаться щелчком и пользователь может заметить, что актёры не могут помещать предметы на данный участок решётки.
</p>
<p>Объектами с похожим принципом действия, но реагирующими только на актёров, являются <a href="#it_005fsensor">it_sensor </a> и <a href="#it_005fcross">it_cross</a>. Еще одним переключателем, реагирующим на массу актёра и камней, являются весы <a href="#fl_005fscales">fl_scales</a>.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: <code>ON</code>, <code>OFF</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dd><p>Текущее состояние переключателя &mdash; &lsquo;<samp>ON</samp>&rsquo; для нажатого переключателя, &lsquo;<samp>OFF</samp>&rsquo; &mdash; для ненажатого переключателя.
</p>
</dd>
<dt> <b>invisible</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code></dt>
<dd><p>Невидимый триггер полностью прозрачен. Но игрок может обнаружить его, так как актёры не могут располагать предметы на участке решётки с триггером.
</p>
</dd>
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
</dl>

</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Действие:</b> &nbsp;&nbsp;См. раздел <a href="#target">target</a>, &nbsp;&nbsp;см. раздел <a href="#action">action</a></dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/it_trigger.png" alt="images/it_trigger"><p> <b>it_trigger</b>
</p></dt>
</dl>

</dd>
</dl>


<hr size="6">
<a name="it_005fvortex"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005ftrigger" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#it_005fwormhole" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Static-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005fvortex-1"></a>
<h3 class="subsection">8.4.19 it_vortex</h3>
<a name="index-it_005fvortex"></a>

<p>Телепортирует актёров <a href="#ac_005fmarble">ac_marble</a> и <a href="#ac_005fpearl">ac_pearl</a> в пункт назначения, заданный атрибутом &lsquo;<samp>destination</samp>&rsquo;. В отличие от объекта <a href="#it_005fwormhole">it_wormhole</a>, он не телепортирует других <a href="#Actors">актёров</a>.
</p>
<p>В самом простом случае телепорт связан с определённым пунктом назначения, выраженным объектом или позицией. Если пункт назначения не был заблокирован камнем, шарик будет телепортирован на данный участок решётки.
</p>
<p>Если задано несколько пунктов назначения, шарик будет телепортирован в каждый из них в определённом порядке. О том, что пункт назначения заблокирован, сигнализируют искры. В конце концов, шарик оказывается на первом незаблокированном пункте назначения. Если незаблокированные пункты назначения отсутствуют, шарик снова оказывается в пункте отправления. Авторы уровней могут создавать интересные головоломки, в которых от игрока требуется заблокировать пункты назначения, чтобы достигнуть последнего из них.
</p>
<p>Телепорты могут быть открыты (&lsquo;<samp>OPEN</samp>&rsquo;) или закрыты (&lsquo;<samp>CLOSED</samp>&rsquo;). Естественно, шарик может войти только в открытый телепорт. В пункте назначения закрытые телепорты открываются автоматически. По умолчанию такие телепорты остаются открытыми. С помощью атрибута &lsquo;<samp>autoclose</samp>&rsquo; можно запрограммировать телепорт, чтобы он закрывался после прибытия шарика в пункт назначения. Это помогает игроку выбраться из телепорта, не давая затянуть шарик обратно.. Конечно, если данный атрибут будет установлен, то вернуться обратно игрок не сможет. Если подобный эффект нежелателен, то для атрибута &lsquo;<samp>autoopen</samp>&rsquo; следует установить значение <code>true</code>. Предмет снова откроется после того, как шарик покинет закрытый телепорт. Если игрок выпрыгнул непосредственно из телепорта, то телепорт откроется, когда игрок снова зайдёт на данный участок решётки.
</p>
<p>Когда шарик прибывает в пункт назначения, он выпрыгивает из телепорта. Игрок может ненадолго ускорить шарик, и тогда шарик выпрыгнет из телепорта в желаемом направлении.
</p>
<p>Телепортация занимает некоторое время, и участвующие в ней телепорты в это время не принимают другие запросы на телепортацию. Таким образом, автор может без проблем создавать циклы пунктов назначения для телепортов.
</p>
<p>Резиновые ленты, привязанные к телепортируемым актёрам, по умолчанию обрезаются. Вы можете контролировать данный процесс с помощью атрибута &lsquo;<samp>scissor</samp>&rsquo;.
</p>
<p>Но способность данного предмета к телепортации не ограничивается актёрами. Поток воды также может перетекать через телепорт. В отличие от актёров, вода будет распространяться во все пункты назначения одновременно. Конечно, если на одной из конечных точек телепортации телепорт закрыт, вода через него распространяться не сможет. Но после открытия телепорта поток воды сразу же начинает протекать через него. Камни, находящиеся в точках телепортации, не преграждают воде путь из телепорта, но могут блокировать её распространение на другие участки решётки. Подробные сведения по данному вопросу приведены в разделе <a href="#Flood-Spreading">Распространение воды</a>.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: <code>OPEN</code>, <code>CLOSED</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>OPEN</code> &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dd><p>Видимое состояние телепорта. Телепорт в состоянии &lsquo;<samp>OPEN</samp>&rsquo; может, тем не менее, быть занят текущей телепортацией и не принимать другие шарики.
</p>
</dd>
<dt> <b>destination</b>, &nbsp;&nbsp;<i>значения</i>: метки или позиция; &nbsp;&nbsp;<i>по умолчанию</i>: <code>nil</code> &nbsp;&nbsp;См. раздел <a href="#destination">destination</a></dt>
<dd><p>Пункт назначения телепорта, выраженный объектом или позицией.
</p>
</dd>
<dt> <b>autoclose</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code></dt>
<dd><p>Флаг, показывающий, должен ли телепорт закрываться после телепортации.
</p>
</dd>
<dt> <b>autoopen</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code></dt>
<dd><p>Флаг, сигнализирующий о том, открывается ли телепорт, если актёр выходит из него или заходит на участок решётки.
</p>
</dd>
<dt> <b>scissor</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code></dt>
<dd><p>Специфика поведения резиновых лент при телепортации.
</p></dd>
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
</dl>

</dd>
<dt> <b>Сообщения:</b></dt>
<dd><dl compact="compact">
<dt> <b>signal</b> &nbsp;&nbsp;См. раздел <a href="#signal">signal</a></dt>
<dd><p>Открывает телепорт, если задано значение &lsquo;<samp>1</samp>&rsquo;, и закрывает, если задано значение &lsquo;<samp>0</samp>&rsquo;.
</p></dd>
<dt> <b>toggle</b> &nbsp;&nbsp;См. раздел <a href="#toggle">toggle</a></dt>
<dd><p>Открывает закрытый телепорт и закрывает открытый, если возможно.
</p></dd>
<dt> <b>open</b> &nbsp;&nbsp;См. раздел <a href="#open">open</a></dt>
<dd><p>Пытается открыть телепорт.
</p></dd>
<dt> <b>close</b> &nbsp;&nbsp;См. раздел <a href="#close">close</a></dt>
<dd><p>Пытается закрыть телепорт.
</p></dd>
</dl>

</dd>
<dt> <b>Действие:</b> отсутствует</dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/it_vortex.png" alt="images/it_vortex"><p> <b>it_vortex</b>:  state = <code>OPEN</code>.
</p></dt>
<dt> <img src="images/it_vortex.png" alt="images/it_vortex"><p> <b>it_vortex_open</b>: state = <code>OPEN</code>.
</p></dt>
<dt> <img src="images/it_vortex_4.png" alt="images/it_vortex_4"><p> <b>it_vortex_closed</b>: state &lsquo;<samp>CLOSED</samp>&rsquo;.
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="it_005fwormhole"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005fvortex" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Stone-Objects" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Static-Items" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="it_005fwormhole-1"></a>
<h3 class="subsection">8.4.20 it_wormhole</h3>
<a name="index-it_005fwormhole"></a>

<p>Телепортирует любых <a href="#Actors">актёров</a> в пункт назначения, заданный атрибутом &lsquo;<samp>destination</samp>&rsquo;. В отличие от <a href="#it_005fvortex">it_vortex</a>, каждый объект &lsquo;<samp>it_wormhole</samp>&rsquo; имеет уникальный пункт назначения. Но, конечно, пунктом назначения может быть другой телепорт, который сразу же переносит актёра в следующий пункт назначения. Замкнутые циклы телепортов, вызывающие бесконечные телепортации, не допускаются.
</p>
<p>Телепорты могут притягивать либо отталкивать актёров на расстоянии, заданном атрибутом &lsquo;<samp>range</samp>&rsquo;, с силой, прямо пропорциональной значению атрибута &lsquo;<samp>strength</samp>&rsquo; и обратно пропорциональной квадрату расстояния. Сила может быть включена (&lsquo;<samp>ON</samp>&rsquo;) и выключена (&lsquo;<samp>OFF</samp>&rsquo;), что выражается её внешним состоянием &lsquo;<samp>state</samp>&rsquo;. Следует отметить, что на расстоянии менее 0,05 участка решётки актёры не притягиваются во избежание чрезмерно больших сил.
</p>
<p>Резиновые ленты, привязанные к телепортируемым актёрам, по умолчанию обрезаются. Вы можете контролировать данный процесс с помощью атрибута &lsquo;<samp>scissor</samp>&rsquo;.
</p>
<p>После телепортирования объекта способность &lsquo;<samp>it_wormhole</samp>&rsquo; к телепортации может быть выключена на короткий промежуток времени, заданный атрибутом &lsquo;<samp>interval</samp>&rsquo;. Это позволяет разделить актёров, путешествующих через телепорт, и избежать телепортации актёра в точку, уже занятую только что телепортированным актёром.
</p>
<p>Но способность данного предмета к телепортации не ограничивается актёрами. Поток воды также может перетекать через телепорт. Конечно, все описанные выше атрибуты, касающиеся актёров, не имеют никакого влияния на поток воды. Имеет значение только атрибут &lsquo;<samp>destination</samp>&rsquo; (подробнее см. раздел <a href="#Flood-Spreading">Распространение воды</a>).
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: <code>ON</code>, <code>OFF</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>ON</code> &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dd><p>Текущее состояние силы &mdash; &lsquo;<samp>ON</samp>&rsquo; для телепортов, притягивающих/отталкивающих актёров, &lsquo;<samp>OFF</samp>&rsquo; &mdash; для телепортов, не воздействующих на актёров.
</p></dd>
<dt> <b>destination</b>, &nbsp;&nbsp;<i>значения</i>: метки или позиция; &nbsp;&nbsp;<i>по умолчанию</i>: <code>nil</code> &nbsp;&nbsp;См. раздел <a href="#destination">destination</a></dt>
<dd><p>Пункт назначения телепорта, выраженный объектом или позицией.
</p></dd>
<dt> <b>range</b> &nbsp;&nbsp;<i>значения</i>: числа с плавающей запятой, большие либо равные 0; &nbsp;&nbsp;<i>по умолчанию</i>: <code>10.0</code> &nbsp;&nbsp;См. раздел <a href="#WormholeRange">WormholeRange</a></dt>
<dd><p>Расстояние, на котором телепорт притягивает/отталкивает актёров.
</p></dd>
<dt> <b>strength</b> &nbsp;&nbsp;<i>значения</i>: число с плавающей запятой; &nbsp;&nbsp;<i>по умолчанию</i>: <code>+30.0</code> &nbsp;&nbsp;См. раздел <a href="#WormholeStrength">WormholeStrength</a></dt>
<dd><p>Скалярный множитель для сил телепорта. Положительные числа выражают силы притяжения, отрицательные &mdash; силы отталкивания.
</p></dd>
<dt> <b>scissor</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code></dt>
<dd><p>Специфика поведения резиновых лент при телепортации.
</p></dd>
<dt> <b>interval</b> &nbsp;&nbsp;<i>значения</i>: числа с плавающей запятой, большие либо равные 0; &nbsp;&nbsp;<i>по умолчанию</i>: <code>0.0</code></dt>
<dd><p>Время после телепортации, в течение которого новые телепортации не производятся.
</p></dd>
<dt> <b>freezable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#freezable">freezable</a></dt>
<dt> <b>liftable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#liftable">liftable</a></dt>
<dt> <b>portable</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#portable">portable</a></dt>
</dl>

</dd>
<dt> <b>Сообщения:</b></dt>
<dd><dl compact="compact">
<dt> <b>signal</b> &nbsp;&nbsp;См. раздел <a href="#signal">signal</a></dt>
<dd><p>Сигнал со значением 1 включает силу телепорта, со значением 0 &mdash; выключает.
</p></dd>
<dt> <b>toggle</b> &nbsp;&nbsp;См. раздел <a href="#toggle">toggle</a></dt>
<dd><p>Включает и выключает силу телепорта.
</p></dd>
<dt> <b>on</b> &nbsp;&nbsp;См. раздел <a href="#on">on</a></dt>
<dd><p>Включает телепорт.
</p></dd>
<dt> <b>off</b> &nbsp;&nbsp;См. раздел <a href="#off">off</a></dt>
<dd><p>Выключает телепорт.
</p></dd>
</dl>

</dd>
<dt> <b>Действие:</b> отсутствует</dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/it_wormhole.png" alt="images/it_wormhole"><p> <b>it_wormhole</b>: state = <code>ON</code>.
</p></dt>
<dt> <img src="images/it_wormhole.png" alt="images/it_wormhole"><p> <b>it_wormhole_on</b>: state = <code>ON</code>.
</p></dt>
<dt> <img src="images/fl_white.png" alt="images/fl_white"><p> <b>it_wormhole_off</b>: state <code>OFF</code>.
</p></dt>
</dl>
</dd>
</dl>


<hr size="6">
<a name="Stone-Objects"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#it_005fwormhole" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Stone-Overview" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Item-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Stone-Objects-1"></a>
<h1 class="chapter">9. Камни</h1>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Stone-Overview">9.1 Обзор камней</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Stone-Attributes">9.2 Атрибуты камней</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Standard-Stones">9.3 Простые камни</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Cluster-Stones">9.4 Строительные камни</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Special-Stones">9.5 Специальные камни</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Stone-Feature-Summaries">9.6 Обзор свойств камней</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">     Таблица свойств камней (прозрачность, хрупкость и т. д.)
</td></tr>
</table>

<hr size="6">
<a name="Stone-Overview"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Stone-Attributes" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Stone-Overview-1"></a>
<h2 class="section">9.1 Обзор камней</h2>

<table>
<tr><td width="8%"><img src="images/st_actorimpulse.png" alt="images/st_actorimpulse"></td><td width="25%"><a href="#st_005factorimpulse">st_actorimpulse</a></td><td width="8%"><img src="images/st_ancient.png" alt="images/st_ancient"></td><td width="25%"><a href="#st_005fancient">st_ancient</a></td><td width="9%"><img src="images/st_barrier.png" alt="images/st_barrier"></td><td width="25%"><a href="#st_005fbarrier">st_barrier</a></td></tr>
<tr><td width="8%"><img src="images/st_beads.png" alt="images/st_beads"></td><td width="25%"><a href="#st_005fbeads">st_beads</a></td><td width="8%"><img src="images/st_blocker.png" alt="images/st_blocker"></td><td width="25%"><a href="#st_005fblocker">st_blocker</a></td><td width="9%"><img src="images/st_boulder.png" alt="images/st_boulder"></td><td width="25%"><a href="#st_005fboulder">st_boulder</a></td></tr>
<tr><td width="8%"><img src="images/st_bluegray.png" alt="images/st_bluegray"></td><td width="25%"><a href="#st_005fbluegray">st_bluegray</a> или <a href="#st_005fthief">st_thief</a></td><td width="8%"><img src="images/st_bluesand.png" alt="images/st_bluesand"></td><td width="25%"><a href="#st_005fbluesand">st_bluesand</a></td><td width="9%"><img src="images/st_blur_cross.png" alt="images/st_blur_cross"></td><td width="25%"><a href="#st_005fblur">st_blur</a>_cross</td></tr>
<tr><td width="8%"><img src="images/st_blur_straight.png" alt="images/st_blur_straight"></td><td width="25%"><a href="#st_005fblur">st_blur</a>_straight</td><td width="8%"><img src="images/st_box_hay.png" alt="images/st_box_hay"></td><td width="25%"><a href="#st_005fbox">st_box</a>_hay</td><td width="9%"><img src="images/st_box_rock.png" alt="images/st_box_rock"></td><td width="25%"><a href="#st_005fbox">st_box</a>_rock</td></tr>
<tr><td width="8%"><img src="images/st_box_wood.png" alt="images/st_box_wood"></td><td width="25%"><a href="#st_005fbox">st_box</a>_wood</td><td width="8%"><img src="images/st_brake.png" alt="images/st_brake"></td><td width="25%"><a href="#st_005fbrake">st_brake</a></td><td width="9%"><img src="images/st_break_black.png" alt="images/st_break_black"></td><td width="25%"><a href="#st_005fbreak">st_break</a>_black</td></tr>
<tr><td width="8%"><img src="images/st_break_boulder.png" alt="images/st_break_boulder"></td><td width="25%"><a href="#st_005fbreak">st_break</a>_boulder</td><td width="8%"><img src="images/st_break_bug.png" alt="images/st_break_bug"></td><td width="25%"><a href="#st_005fbreak">st_break</a>_bug</td><td width="9%"><img src="images/st_break_oxydc.png" alt="images/st_break_oxydc"></td><td width="25%"><a href="#st_005fbreak">st_break</a>_oxydc</td></tr>
<tr><td width="8%"><img src="images/st_break_plain.png" alt="images/st_break_plain"></td><td width="25%"><a href="#st_005fbreak">st_break</a>_plain</td><td width="8%"><img src="images/st_break_white.png" alt="images/st_break_white"></td><td width="25%"><a href="#st_005fbreak">st_break</a>_white</td><td width="9%"><img src="images/st_brick.png" alt="images/st_brick"></td><td width="25%"><a href="#st_005fbrick">st_brick</a></td></tr>
<tr><td width="8%"><img src="images/st_brownie.png" alt="images/st_brownie"></td><td width="25%"><a href="#st_005fbrownie">st_brownie</a></td><td width="8%"><img src="images/st_brownmarble.png" alt="images/st_brownmarble"></td><td width="25%"><a href="#st_005fbrownmarble">st_brownmarble</a></td><td width="9%"><img src="images/st_brownpyramid.png" alt="images/st_brownpyramid"></td><td width="25%"><a href="#st_005fbrownpyramid">st_brownpyramid</a></td></tr>
<tr><td width="8%"><img src="images/st_camouflage.png" alt="images/st_camouflage"></td><td width="25%"><a href="#st_005fcamouflage">st_camouflage</a></td><td width="8%"><img src="images/st_charge_minus.png" alt="images/st_charge_minus"></td><td width="25%"><a href="#st_005fcharge">st_charge</a>_minus</td><td width="9%"><img src="images/st_charge_plus.png" alt="images/st_charge_plus"></td><td width="25%"><a href="#st_005fcharge">st_charge</a>_plus</td></tr>
<tr><td width="8%"><img src="images/st_charge_zero.png" alt="images/st_charge_zero"></td><td width="25%"><a href="#st_005fcharge">st_charge</a>_zero</td><td width="8%"><img src="images/st_chess_black.png" alt="images/st_chess_black"></td><td width="25%"><a href="#st_005fchess">st_chess</a>_black</td><td width="9%"><img src="images/st_chess_white.png" alt="images/st_chess_white"></td><td width="25%"><a href="#st_005fchess">st_chess</a>_white</td></tr>
<tr><td width="8%"><img src="images/st_coinslot.png" alt="images/st_coinslot"></td><td width="25%"><a href="#st_005fcoinslot">st_coinslot</a></td><td width="8%"><img src="images/st_concrete.png" alt="images/st_concrete"></td><td width="25%"><a href="#st_005fconcrete">st_concrete</a></td><td width="9%"><img src="images/st_darkglass.png" alt="images/st_darkglass"></td><td width="25%"><a href="#st_005fdarkglass">st_darkglass</a></td></tr>
<tr><td width="8%"><img src="images/st_darkgray.png" alt="images/st_darkgray"></td><td width="25%"><a href="#st_005fdarkgray">st_darkgray</a></td><td width="8%"><img src="images/st_death.png" alt="images/st_death"></td><td width="25%"><a href="#st_005fdeath">st_death</a></td><td width="9%"><img src="images/st_disco.png" alt="images/st_disco"></td><td width="25%"><a href="#st_005fdisco">st_disco</a>_light</td></tr>
<tr><td width="8%"><img src="images/st_disco_2.png" alt="images/st_disco_2"></td><td width="25%"><a href="#st_005fdisco">st_disco</a>_medium</td><td width="8%"><img src="images/st_disco_3.png" alt="images/st_disco_3"></td><td width="25%"><a href="#st_005fdisco">st_disco</a>_dark</td><td width="9%"><img src="images/st_door_d_ew_g.png" alt="images/st_door_d_ew_g"></td><td width="25%"><a href="#st_005fdoor">st_door</a>_d (ew)</td></tr>
<tr><td width="8%"><img src="images/st_door_d_ns_7.png" alt="images/st_door_d_ns_7"></td><td width="25%"><a href="#st_005fdoor">st_door</a>_d (ns)</td><td width="8%"><img src="images/st_dispenser_bombblack.png" alt="images/st_dispenser_bombblack"></td><td width="25%"><a href="#st_005fdispenser">st_dispenser</a>_bombblack</td><td width="9%"><img src="images/st_dispenser_bombwhite.png" alt="images/st_dispenser_bombwhite"></td><td width="25%"><a href="#st_005fdispenser">st_dispenser</a>_bombwhite</td></tr>
<tr><td width="8%"><img src="images/st_dispenser_dynamite.png" alt="images/st_dispenser_dynamite"></td><td width="25%"><a href="#st_005fdispenser">st_dispenser</a>_dynamite</td><td width="8%"><img src="images/st_dispenser_extralife.png" alt="images/st_dispenser_extralife"></td><td width="25%"><a href="#st_005fdispenser">st_dispenser</a>_extralife</td><td width="9%"><img src="images/st_oxydc_open.png" alt="images/st_oxydc_open"></td><td width="25%"><a href="#st_005ffake">st_fake</a>_oxydc (open)</td></tr>
<tr><td width="8%"><img src="images/st_flash.png" alt="images/st_flash"></td><td width="25%"><a href="#st_005fflash">st_flash</a></td><td width="8%"><img src="images/st_flat.png" alt="images/st_flat"></td><td width="25%"><a href="#st_005fflat">st_flat</a></td><td width="9%"><img src="images/st_floppy_off.png" alt="images/st_floppy_off"></td><td width="25%"><a href="#st_005ffloppy">st_floppy</a>_off</td></tr>
<tr><td width="8%"><img src="images/st_floppy_on.png" alt="images/st_floppy_on"></td><td width="25%"><a href="#st_005ffloppy">st_floppy</a>_on</td><td width="8%"><img src="images/st_fourswitch.png" alt="images/st_fourswitch"></td><td width="25%"><a href="#st_005ffourswitch">st_fourswitch</a></td><td width="9%"><img src="images/st_granite.png" alt="images/st_granite"></td><td width="25%"><a href="#st_005fgranite">st_granite</a></td></tr>
<tr><td width="8%"><img src="images/st_grate_cross.png" alt="images/st_grate_cross"></td><td width="25%"><a href="#st_005fgrate">st_grate</a>_cross</td><td width="8%"><img src="images/st_grate_framed.png" alt="images/st_grate_framed"></td><td width="25%"><a href="#st_005fgrate">st_grate</a>_framed</td><td width="9%"><img src="images/st_greenbrown.png" alt="images/st_greenbrown"></td><td width="25%"><a href="#st_005fgreenbrown">st_greenbrown</a></td></tr>
<tr><td width="8%"><img src="images/st_greengray.png" alt="images/st_greengray"></td><td width="25%"><a href="#st_005fgreengray">st_greengray</a></td><td width="8%"><img src="images/st_ice.png" alt="images/st_ice"></td><td width="25%"><a href="#st_005fice">st_ice</a></td><td width="9%"></td><td width="25%"><a href="#st_005finvisible">st_invisible</a> или <a href="#st_005fghost">st_ghost</a></td></tr>
<tr><td width="8%"><img src="images/st_jamb_black.png" alt="images/st_jamb_black"></td><td width="25%"><a href="#st_005fjamb">st_jamb</a>_black</td><td width="8%"><img src="images/st_jamb_white.png" alt="images/st_jamb_white"></td><td width="25%"><a href="#st_005fjamb">st_jamb</a>_white</td><td width="9%"><img src="images/st_key_off.png" alt="images/st_key_off"></td><td width="25%"><a href="#st_005fkey">st_key</a>_off</td></tr>
<tr><td width="8%"><img src="images/st_key_on.png" alt="images/st_key_on"></td><td width="25%"><a href="#st_005fkey">st_key</a>_on</td><td width="8%"><img src="images/st_knight.png" alt="images/st_knight"></td><td width="25%"><a href="#st_005fknight">st_knight</a></td><td width="9%"><img src="images/st_laser_d.png" alt="images/st_laser_d"></td><td width="25%"><a href="#st_005flaser">st_laser</a></td></tr>
<tr><td width="8%"><img src="images/st_lightglass.png" alt="images/st_lightglass"></td><td width="25%"><a href="#st_005flightglass">st_lightglass</a></td><td width="8%"><img src="images/st_lightpassenger.png" alt="images/st_lightpassenger"></td><td width="25%"><a href="#st_005flightpassenger">st_lightpassenger</a></td><td width="9%"><img src="images/st_mail.png" alt="images/st_mail"></td><td width="25%"><a href="#st_005fmail">st_mail</a></td></tr>
<tr><td width="8%"><img src="images/st_metal.png" alt="images/st_metal"></td><td width="25%"><a href="#st_005fmetal">st_metal</a></td><td width="8%"><img src="images/st_mirror_static_2.png" alt="images/st_mirror_static_2"></td><td width="25%"><a href="#st_005fmirror">st_mirror</a>_triangle</td><td width="9%"><img src="images/st_mirror_static_b2.png" alt="images/st_mirror_static_b2"></td><td width="25%"><a href="#st_005fmirror">st_mirror</a>_triangle</td></tr>
<tr><td width="8%"><img src="images/st_mirror_static_c2.png" alt="images/st_mirror_static_c2"></td><td width="25%"><a href="#st_005fmirror">st_mirror</a>_slab</td><td width="8%"><img src="images/st_mirror_static_d2.png" alt="images/st_mirror_static_d2"></td><td width="25%"><a href="#st_005fmirror">st_mirror</a>_slab</td><td width="9%"><img src="images/st_mirror_static_e2.png" alt="images/st_mirror_static_e2"></td><td width="25%"><a href="#st_005fmirror">st_mirror</a>_sheets</td></tr>
<tr><td width="8%"><img src="images/st_monoflop.png" alt="images/st_monoflop"></td><td width="25%"><a href="#st_005fmonoflop">st_monoflop</a></td><td width="8%"><img src="images/st_monoflop_2.png" alt="images/st_monoflop_2"></td><td width="25%"><a href="#st_005fmonoflop">st_monoflop</a></td><td width="9%"><img src="images/st_oneway.png" alt="images/st_oneway"></td><td width="25%"><a href="#st_005foneway">st_oneway</a></td></tr>
<tr><td width="8%"><img src="images/st_oneway_b.png" alt="images/st_oneway_b"></td><td width="25%"><a href="#st_005foneway">st_oneway</a>_black</td><td width="8%"><img src="images/st_oneway_c.png" alt="images/st_oneway_c"></td><td width="25%"><a href="#st_005foneway">st_oneway</a>_white</td><td width="9%"><img src="images/st_oxyda.png" alt="images/st_oxyda"></td><td width="25%"><a href="#st_005foxyd">st_oxyd</a>_a</td></tr>
<tr><td width="8%"><img src="images/st_oxydb.png" alt="images/st_oxydb"></td><td width="25%"><a href="#st_005foxyd">st_oxyd</a>_b или <a href="#st_005fquake">st_quake</a> <br> или <a href="#st_005flaserswitch">st_laserswitch</a></td><td width="8%"><img src="images/st_oxydc.png" alt="images/st_oxydc"></td><td width="25%"><a href="#st_005foxyd">st_oxyd</a>_c</td><td width="9%"><img src="images/st_oxydd.png" alt="images/st_oxydd"></td><td width="25%"><a href="#st_005foxyd">st_oxyd</a>_d</td></tr>
<tr><td width="8%"><img src="images/st_oxyde.png" alt="images/st_oxyde"></td><td width="25%"><a href="#st_005foxyd">st_oxyd</a>_e</td><td width="8%"><img src="images/st_panel.png" alt="images/st_panel"></td><td width="25%"><a href="#st_005fpanel">st_panel</a></td><td width="9%"><img src="images/st_passage_black_square.png" alt="images/st_passage_black_square"></td><td width="25%"><a href="#st_005fpassage">st_passage</a>_black</td></tr>
<tr><td width="8%"><img src="images/st_passage_black_slash.png" alt="images/st_passage_black_slash"></td><td width="25%"><a href="#st_005fpassage">st_passage</a>_black</td><td width="8%"><img src="images/st_passage_black_cross.png" alt="images/st_passage_black_cross"></td><td width="25%"><a href="#st_005fpassage">st_passage</a>_black</td><td width="9%"><img src="images/st_passage_black_frame.png" alt="images/st_passage_black_frame"></td><td width="25%"><a href="#st_005fpassage">st_passage</a>_black</td></tr>
<tr><td width="8%"><img src="images/st_passage_white_square.png" alt="images/st_passage_white_square"></td><td width="25%"><a href="#st_005fpassage">st_passage</a>_white</td><td width="8%"><img src="images/st_passage_white_slash.png" alt="images/st_passage_white_slash"></td><td width="25%"><a href="#st_005fpassage">st_passage</a>_white</td><td width="9%"><img src="images/st_passage_white_cross.png" alt="images/st_passage_white_cross"></td><td width="25%"><a href="#st_005fpassage">st_passage</a>_white</td></tr>
<tr><td width="8%"><img src="images/st_passage_white_frame.png" alt="images/st_passage_white_frame"></td><td width="25%"><a href="#st_005fpassage">st_passage</a>_white</td><td width="8%"><img src="images/st_pinkbumps.png" alt="images/st_pinkbumps"></td><td width="25%"><a href="#st_005fpinkbumps">st_pinkbumps</a></td><td width="9%"><img src="images/st_plaster.png" alt="images/st_plaster"></td><td width="25%"><a href="#st_005fplaster">st_plaster</a></td></tr>
<tr><td width="8%"><img src="images/st_plop_slate.png" alt="images/st_plop_slate"></td><td width="25%"><a href="#st_005fplop">st_plop</a>_slate</td><td width="8%"><img src="images/st_portal_horse.png" alt="images/st_portal_horse"></td><td width="25%"><a href="#st_005fportal">st_portal</a></td><td width="9%"><img src="images/st_pull.png" alt="images/st_pull"></td><td width="25%"><a href="#st_005fpull">st_pull</a></td></tr>
<tr><td width="8%"><img src="images/st_purplegray.png" alt="images/st_purplegray"></td><td width="25%"><a href="#st_005fpurplegray">st_purplegray</a></td><td width="8%"><img src="images/st_purplemarble.png" alt="images/st_purplemarble"></td><td width="25%"><a href="#st_005fpurplemarble">st_purplemarble</a></td><td width="9%"><img src="images/st_puzzle_blue_3.png" alt="images/st_puzzle_blue_3"></td><td width="25%"><a href="#st_005fpuzzle">st_puzzle</a>_blue или <a href="#st_005fturnstilearm">st_turnstilearm</a>_n</td></tr>
<tr><td width="8%"><img src="images/st_puzzle_blue_d3.png" alt="images/st_puzzle_blue_d3"></td><td width="25%"><a href="#st_005fpuzzle">st_puzzle</a>_blue</td><td width="8%"><img src="images/st_puzzle_blue_hollow_d3.png" alt="images/st_puzzle_blue_hollow_d3"></td><td width="25%"><a href="#st_005fpuzzle">st_puzzle</a>_blue</td><td width="9%"><img src="images/st_puzzle_yellow_d3.png" alt="images/st_puzzle_yellow_d3"></td><td width="25%"><a href="#st_005fpuzzle">st_puzzle</a>_yellow</td></tr>
<tr><td width="8%"><img src="images/st_puzzle_yellow_hollow_d3.png" alt="images/st_puzzle_yellow_hollow_d3"></td><td width="25%"><a href="#st_005fpuzzle">st_puzzle</a>_yellow</td><td width="8%"><img src="images/st_rawglass.png" alt="images/st_rawglass"></td><td width="25%"><a href="#st_005frawglass">st_rawglass</a></td><td width="9%"><img src="images/st_rawglass_quad.png" alt="images/st_rawglass_quad"></td><td width="25%"><a href="#st_005frawglass">st_rawglass</a>_quad</td></tr>
<tr><td width="8%"><img src="images/st_redbrown.png" alt="images/st_redbrown"></td><td width="25%"><a href="#st_005fredbrown">st_redbrown</a></td><td width="8%"><img src="images/st_redfiber.png" alt="images/st_redfiber"></td><td width="25%"><a href="#st_005fredfiber">st_redfiber</a></td><td width="9%"><img src="images/st_redmarble.png" alt="images/st_redmarble"></td><td width="25%"><a href="#st_005fredmarble">st_redmarble</a></td></tr>
<tr><td width="8%"><img src="images/st_redrock.png" alt="images/st_redrock"></td><td width="25%"><a href="#st_005fredrock">st_redrock</a></td><td width="8%"><img src="images/st_rotator_ccw.png" alt="images/st_rotator_ccw"></td><td width="25%"><a href="#st_005frotator">st_rotator</a>_ccw</td><td width="9%"><img src="images/st_rotator_cw.png" alt="images/st_rotator_cw"></td><td width="25%"><a href="#st_005frotator">st_rotator</a>_cw</td></tr>
<tr><td width="8%"><img src="images/st_rubberband.png" alt="images/st_rubberband"></td><td width="25%"><a href="#st_005frubberband">st_rubberband</a></td><td width="8%"><img src="images/st_scissors.png" alt="images/st_scissors"></td><td width="25%"><a href="#st_005fscissors">st_scissors</a></td><td width="9%"><img src="images/st_shogun.png" alt="images/st_shogun"></td><td width="25%"><a href="#st_005fshogun">st_shogun</a>_s</td></tr>
<tr><td width="8%"><img src="images/st_shogun_2.png" alt="images/st_shogun_2"></td><td width="25%"><a href="#st_005fshogun">st_shogun</a>_m</td><td width="8%"><img src="images/st_shogun_4.png" alt="images/st_shogun_4"></td><td width="25%"><a href="#st_005fshogun">st_shogun</a>_l</td><td width="9%"><img src="images/st_spitter_idle.png" alt="images/st_spitter_idle"></td><td width="25%"><a href="#st_005fspitter">st_spitter</a></td></tr>
<tr><td width="8%"><img src="images/st_stoneimpulse.png" alt="images/st_stoneimpulse"></td><td width="25%"><a href="#st_005fstoneimpulse">st_stoneimpulse</a></td><td width="8%"><img src="images/st_stoneimpulse_hollow.png" alt="images/st_stoneimpulse_hollow"></td><td width="25%"><a href="#st_005fstoneimpulse">st_stoneimpulse</a>_hollow</td><td width="9%"><img src="images/st_surprise.png" alt="images/st_surprise"></td><td width="25%"><a href="#st_005fsurprise">st_surprise</a></td></tr>
<tr><td width="8%"><img src="images/st_swap.png" alt="images/st_swap"></td><td width="25%"><a href="#st_005fswap">st_swap</a></td><td width="8%"><img src="images/st_switch.png" alt="images/st_switch"></td><td width="25%"><a href="#st_005fswitch">st_switch</a></td><td width="9%"><img src="images/st_switch_black.png" alt="images/st_switch_black"></td><td width="25%"><a href="#st_005fswitch">st_switch</a>_black</td></tr>
<tr><td width="8%"><img src="images/st_switch_white.png" alt="images/st_switch_white"></td><td width="25%"><a href="#st_005fswitch">st_switch</a>_white</td><td width="8%"><img src="images/st_thief.png" alt="images/st_thief"></td><td width="25%"><a href="#st_005fthief">st_thief</a></td><td width="9%"><img src="images/st_thief_capture.png" alt="images/st_thief_capture"></td><td width="25%"><a href="#st_005fthief">st_thief</a></td></tr>
<tr><td width="8%"><img src="images/st_thief_drunken.png" alt="images/st_thief_drunken"></td><td width="25%"><a href="#st_005fthief">st_thief</a></td><td width="8%"><img src="images/st_tigris.png" alt="images/st_tigris"></td><td width="25%"><a href="#st_005ftigris">st_tigris</a></td><td width="9%"><img src="images/st_timer_3.png" alt="images/st_timer_3"></td><td width="25%"><a href="#st_005ftimer">st_timer</a></td></tr>
<tr><td width="8%"><img src="images/st_timer.png" alt="images/st_timer"></td><td width="25%"><a href="#st_005ftimer">st_timer</a></td><td width="8%"><img src="images/st_turnstile.png" alt="images/st_turnstile"></td><td width="25%"><a href="#st_005fturnstile">st_turnstile</a></td><td width="9%"><img src="images/st_turnstile_green.png" alt="images/st_turnstile_green"></td><td width="25%"><a href="#st_005fturnstile">st_turnstile</a>_green</td></tr>
<tr><td width="8%"><img src="images/st_window_blue_3.png" alt="images/st_window_blue_3"></td><td width="25%"><a href="#st_005fwindow">st_window</a></td><td width="8%"><img src="images/st_window_green_3.png" alt="images/st_window_green_3"></td><td width="25%"><a href="#st_005fwindow">st_window</a></td><td width="9%"><img src="images/st_woven.png" alt="images/st_woven"></td><td width="25%"><a href="#st_005fwoven">st_woven</a></td></tr>
<tr><td width="8%"><img src="images/st_yellow.png" alt="images/st_yellow"></td><td width="25%"><a href="#st_005fyellow">st_yellow</a></td><td width="8%"><img src="images/st_yinyang.png" alt="images/st_yinyang"></td><td width="25%"><a href="#st_005fyinyang">st_yinyang</a></td><td width="9%"><img src="images/st_yinyang_inactive.png" alt="images/st_yinyang_inactive"></td><td width="25%"><a href="#st_005fyinyang">st_yinyang</a>_inactive</td></tr>
</table>


<hr size="6">
<a name="Stone-Attributes"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Stone-Overview" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#breakable" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Stone-Attributes-1"></a>
<h2 class="section">9.2 Атрибуты камней</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#breakable">9.2.1 breakable (бьющийся)</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">              -
</td></tr>
<tr><td align="left" valign="top"><a href="#freeze_005fcheck-_0028stone_0029">9.2.2 freeze_check (камень)</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">   Проверка тупика
</td></tr>
<tr><td align="left" valign="top"><a href="#hit_005f_002a">9.2.3 hit_*</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                  -
</td></tr>
<tr><td align="left" valign="top"><a href="#hollow">9.2.4 hollow (полый)</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                 -
</td></tr>
<tr><td align="left" valign="top"><a href="#hovering">9.2.5 hovering (парящий)</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">               -
</td></tr>
<tr><td align="left" valign="top"><a href="#movable">9.2.6 movable</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                -
</td></tr>
<tr><td align="left" valign="top"><a href="#transparent">9.2.7 transparent (прозрачный)</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            -
</td></tr>
</table>


<hr size="6">
<a name="breakable"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Stone-Attributes" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#freeze_005fcheck-_0028stone_0029" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="breakable-1"></a>
<h3 class="subsection">9.2.1 breakable (бьющийся)</h3>


<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;boolean</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;<code>false</code>, <code>true</code></dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>false</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
</dl>

<hr size="6">
<a name="freeze_005fcheck-_0028stone_0029"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#breakable" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#hit_005f_002a" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="freeze_005fcheck-_0028stone_0029-1"></a>
<h3 class="subsection">9.2.2 freeze_check (камень)</h3>

<p>Если задано значение <code>true</code>, то для данного камня допускается <a href="#Freeze-Checking">Проверка тупика</a>. Обратите внимание, что проверка тупика возможна только на тех участках покрытия, для которых значение атрибута <code>freeze_check</code> также равно &lsquo;true&rsquo; (см. раздел <a href="#freeze_005fcheck-_0028floor_0029">freeze_check (покрытие)</a>).
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;boolean</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;<code>false</code>, <code>true</code></dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>false</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
</dl>

<hr size="6">
<a name="hit_005f_002a"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#freeze_005fcheck-_0028stone_0029" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#hollow" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="hit_005f_002a-1"></a>
<h3 class="subsection">9.2.3 hit_*</h3>

<p>Набор атрибутов, которые позволяют искажать силу удара. Такие объекты, как <a href="#st_005fflash">st_flash</a>, <a href="#st_005fspitter">st_spitter</a> и <a href="#st_005factorimpulse">st_actorimpulse</a>, применяют силы, основанные на скорости удара либо на расположении.
</p>
<p>Использование простого множителя &lsquo;<samp>hit_strength</samp>&rsquo; позволяет увеличить или уменьшить множитель по умолчанию, а также изменить его знак. Обратите внимание, что значение данного атрибута нельзя устанавливать, если необходимо использовать множитель, заданный по умолчанию.
</p>
<p>Четыре атрибута &mdash; &lsquo;<samp>hit_distortion_xx</samp>&rsquo;, &lsquo;<samp>hit_distortion_xy</samp>&rsquo;, &lsquo;<samp>hit_distortion_yx</samp>&rsquo; и &lsquo;<samp>hit_distortion_yy</samp>&rsquo; образуют матрицу, задающую новое направление. По умолчанию значения этих атрибутов равны 1, 0, 0, 1. Поворот на 90 градусов по часовой стрелке описывается значениями 0, 1, -1, 0.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;number</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;?</dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;множитель &mdash; <code>nil</code>, xx, yy &mdash; <code>1</code>, xy, yx &mdash; <code>0</code></dt>
<dd><p>По умолчанию множитель не используется. Матрица силы удара является нейтральной.
</p></dd>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;некоторыми камнями</dt>
</dl>

<hr size="6">
<a name="hollow"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#hit_005f_002a" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#hovering" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="hollow-1"></a>
<h3 class="subsection">9.2.4 hollow (полый)</h3>


<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;boolean</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;<code>false</code>, <code>true</code></dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>false</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
</dl>

<hr size="6">
<a name="hovering"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#hollow" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#movable" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="hovering-1"></a>
<h3 class="subsection">9.2.5 hovering (парящий)</h3>


<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;boolean</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;<code>false</code>, <code>true</code></dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>false</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
</dl>

<hr size="6">
<a name="movable"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#hovering" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#transparent" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="movable-1"></a>
<h3 class="subsection">9.2.6 movable</h3>

<p>Атрибут, который определяет, может ли камень быть сдвинут актёром. Он поддерживается всеми камнями.
</p>
<p>Обратите внимание, что этот атрибут не упоминается в описании отдельных камней, если данный конкретный тип камня, как правило, является неподвижным.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;bool</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;<code>true</code>, <code>false</code></dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;обычно <code>false</code></dt>
<dd><p>Если для данного камня существует только подвижная разновидность, значение атрибута будет по умолчанию равно &lsquo;<samp>true</samp>&rsquo;.
</p></dd>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/иногда write</dt>
<dd><p>Запись допускается только для тех объектов, которые существуют в обеих (подвижной и неподвижной) разновидностях.
</p></dd>
<dt> <b>Поддерживается:</b> &nbsp;&nbsp;всеми камнями</dt>
</dl>

<hr size="6">
<a name="transparent"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#movable" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Standard-Stones" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="transparent-1"></a>
<h3 class="subsection">9.2.7 transparent (прозрачный)</h3>


<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;boolean</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;<code>false</code>, <code>true</code></dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>false</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
</dl>



<hr size="6">
<a name="Standard-Stones"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#transparent" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fancient" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Standard-Stones-1"></a>
<h2 class="section">9.3 Простые камни</h2>

<p>Простые камни &mdash; это обычные камни, которые используются для постройки стен. Для них могут существовать полые либо подвижные разновидности, но никаких других особенностей у них нет.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#st_005fancient">9.3.1 st_ancient</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         грубо отёсанный зелёный камень
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fbluegray">9.3.2 st_bluegray</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        светлый серо-голубой камень
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fbrownie">9.3.3 st_brownie</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         золотисто-коричневый камень, напоминающий стог сена
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fbrownmarble">9.3.4 st_brownmarble</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">     серо-коричневый мрамор
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fcamouflage">9.3.5 st_camouflage</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">      камень, по цвету напоминающий армейский камуфляж
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fconcrete">9.3.6 st_concrete</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        полированный светло-серый камень
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fdarkgray">9.3.7 st_darkgray</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        тёмно-серый камень
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fgranite">9.3.8 st_granite</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         светло-серый камень
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fgreengray">9.3.9 st_greengray</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       светлый серо-зелёный камень
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005finvisible">9.3.10 st_invisible</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       невидимый камень
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fmetal">9.3.11 st_metal</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           металлический блок
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fpinkbumps">9.3.12 st_pinkbumps</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       розовый камень с крупными выступами
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fpurplegray">9.3.13 st_purplegray</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">      тёмный фиолетово-серый камень
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fpurplemarble">9.3.14 st_purplemarble</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">    фиолетовый камень
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fredbrown">9.3.15 st_redbrown</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        коричневый камень со светло-красными крапинками
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fredmarble">9.3.16 st_redmarble</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       красно-белый мрамор
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fredrock">9.3.17 st_redrock</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         тёмно-красный камень
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005ftigris">9.3.18 st_tigris</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          красный песчаник
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fwoven">9.3.19 st_woven</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           жёлто-серый плетёный камень
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fyellow">9.3.20 st_yellow</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          жёлтый камень с красно-зелёными прожилками
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
</pre></th></tr></table>

<hr size="6">
<a name="st_005fancient"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Standard-Stones" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fbluegray" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fancient-1"></a>
<h3 class="subsection">9.3.1 st_ancient</h3>
<a name="index-st_005fancient"></a>

<p>Грубо отёсанный серо-зелёный камень, несущий на себе следы глубокой древности.
</p>
<dl compact="compact">
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_ancient.png" alt="images/st_ancient"><p> <b>st_ancient</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="st_005fbluegray"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fancient" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fbrownie" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fbluegray-1"></a>
<h3 class="subsection">9.3.2 st_bluegray</h3>
<a name="index-st_005fbluegray"></a>

<p>Серо-голубой камень, существующий в двух разновидностях. Внешне неотличим от <a href="#st_005fthief">st_thief</a>.
</p>
<dl compact="compact">
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_bluegray.png" alt="images/st_bluegray"><p> <b>st_bluegray</b>
</p></dt>
<dt> <img src="images/st_bluegray.png" alt="images/st_bluegray"><p> <b>st_bluegray_hollow</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="st_005fbrownie"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fbluegray" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fbrownmarble" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fbrownie-1"></a>
<h3 class="subsection">9.3.3 st_brownie</h3>
<a name="index-st_005fbrownie"></a>

<p>Золотисто коричневый камень, напоминающий стог сена. Может быть только подвижным.
</p>
<dl compact="compact">
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_brownie.png" alt="images/st_brownie"><p> <b>st_brownie</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="st_005fbrownmarble"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fbrownie" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fcamouflage" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fbrownmarble-1"></a>
<h3 class="subsection">9.3.4 st_brownmarble</h3>
<a name="index-st_005fbrownmarble"></a>

<p>Серо-коричневый мрамор.
</p>
<dl compact="compact">
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_brownmarble.png" alt="images/st_brownmarble"><p> <b>st_brownmarble</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="st_005fcamouflage"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fbrownmarble" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fconcrete" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fcamouflage-1"></a>
<h3 class="subsection">9.3.5 st_camouflage</h3>
<a name="index-st_005fcamouflage"></a>

<p>Камень, по цвету напоминающий армейский камуфляж и существующий во всех трёх разновидностях.
</p>
<dl compact="compact">
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_camouflage.png" alt="images/st_camouflage"><p> <b>st_camouflage</b>
</p></dt>
<dt> <b>st_camouflage_hollow</b></dt>
<dt> <b>st_camouflage_movable</b></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="st_005fconcrete"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fcamouflage" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fdarkgray" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fconcrete-1"></a>
<h3 class="subsection">9.3.6 st_concrete</h3>
<a name="index-st_005fconcrete"></a>

<p>Полированный светло-серый камень.
</p>
<dl compact="compact">
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_concrete.png" alt="images/st_concrete"><p> <b>st_concrete</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="st_005fdarkgray"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fconcrete" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fgranite" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fdarkgray-1"></a>
<h3 class="subsection">9.3.7 st_darkgray</h3>
<a name="index-st_005fdarkgray"></a>

<p>Тёмно-серый камень, существующий в двух разновидностях.
</p>
<dl compact="compact">
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_darkgray.png" alt="images/st_darkgray"><p> <b>st_darkgray</b>
</p></dt>
<dt> <b>st_darkgray_hollow</b></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="st_005fgranite"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fdarkgray" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fgreengray" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fgranite-1"></a>
<h3 class="subsection">9.3.8 st_granite</h3>
<a name="index-st_005fgranite"></a>

<p>Светло-серый камень, существующий во всех трёх разновидностях.
</p>
<dl compact="compact">
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_granite.png" alt="images/st_granite"><p> <b>st_granite</b>
</p></dt>
<dt> <b>st_granite_hollow</b></dt>
<dt> <b>st_granite_movable</b></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="st_005fgreengray"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fgranite" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005finvisible" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fgreengray-1"></a>
<h3 class="subsection">9.3.9 st_greengray</h3>
<a name="index-st_005fgreengray"></a>

<p>Светлый серо-зелёный камень.
</p>
<dl compact="compact">
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_greengray.png" alt="images/st_greengray"><p> <b>st_greengray</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="st_005finvisible"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fgreengray" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fmetal" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005finvisible-1"></a>
<h3 class="subsection">9.3.10 st_invisible</h3>
<a name="index-st_005finvisible"></a>

<p>Невидимый камень, существующий во всех трёх разновидностях. Не злоупотребляйте этим камнем, поскольку игроков часто раздражает, когда они натыкаются на невидимые преграды. Используйте этот камень для того, чтобы привести уровень в соответствии с принципом WYSIWYG (What you see is what you get &mdash; Что видишь, то и получаешь).
</p>
<p>Но невидимость не означает проницаемости для лазера. Наоборот, этот камень для лазера непроницаем. Невидимость также не означает, что сквозь камень могут проходить невидимые актёры (см. раздел <a href="#Transparent-Stones">Прозрачные камни</a>).
</p>
<dl compact="compact">
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <b>st_invisible</b></dt>
<dt> <b>st_invisible_hollow</b></dt>
<dt> <b>st_invisible_movable</b></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="st_005fmetal"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005finvisible" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fpinkbumps" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fmetal-1"></a>
<h3 class="subsection">9.3.11 st_metal</h3>
<a name="index-st_005fmetal"></a>

<p>Металлический блок, существующий в двух разновидностях.
</p>
<dl compact="compact">
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_metal.png" alt="images/st_metal"><p> <b>st_metal</b>
</p></dt>
<dt> <b>st_metal_hollow</b></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="st_005fpinkbumps"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fmetal" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fpurplegray" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fpinkbumps-1"></a>
<h3 class="subsection">9.3.12 st_pinkbumps</h3>
<a name="index-st_005fpinkbumps"></a>

<p>Розовый камень с крупными белыми выступами.
</p>
<dl compact="compact">
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_pinkbumps.png" alt="images/st_pinkbumps"><p> <b>st_pinkbumps</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="st_005fpurplegray"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fpinkbumps" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fpurplemarble" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fpurplegray-1"></a>
<h3 class="subsection">9.3.13 st_purplegray</h3>
<a name="index-st_005fpurplegray"></a>

<p>Тёмный фиолетово-серый камень.
</p>
<dl compact="compact">
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_purplegray.png" alt="images/st_purplegray"><p> <b>st_purplegray</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="st_005fpurplemarble"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fpurplegray" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fredbrown" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fpurplemarble-1"></a>
<h3 class="subsection">9.3.14 st_purplemarble</h3>
<a name="index-st_005fpurplemarble"></a>

<p>Фиолетовый мрамор.
</p>
<dl compact="compact">
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_purplemarble.png" alt="images/st_purplemarble"><p> <b>st_purplemarble</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="st_005fredbrown"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fpurplemarble" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fredmarble" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fredbrown-1"></a>
<h3 class="subsection">9.3.15 st_redbrown</h3>
<a name="index-st_005fredbrown"></a>

<p>Коричневый камень со светло-красными крапинками, существующий во всех трёх разновидностях.
</p>
<dl compact="compact">
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_redbrown.png" alt="images/st_redbrown"><p> <b>st_redbrown</b>
</p></dt>
<dt> <b>st_redbrown_hollow</b></dt>
<dt> <b>st_redbrown_movable</b></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="st_005fredmarble"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fredbrown" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fredrock" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fredmarble-1"></a>
<h3 class="subsection">9.3.16 st_redmarble</h3>
<a name="index-st_005fredmarble"></a>

<p>Красно-белый мрамор.
</p>
<dl compact="compact">
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_redmarble.png" alt="images/st_redmarble"><p> <b>st_redmarble</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="st_005fredrock"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fredmarble" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005ftigris" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fredrock-1"></a>
<h3 class="subsection">9.3.17 st_redrock</h3>
<a name="index-st_005fredrock"></a>

<p>Тёмно-красный камень.
</p>
<dl compact="compact">
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_redrock.png" alt="images/st_redrock"><p> <b>st_redrock</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="st_005ftigris"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fredrock" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fwoven" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005ftigris-1"></a>
<h3 class="subsection">9.3.18 st_tigris</h3>
<a name="index-st_005ftigris"></a>

<p>Красный песчаник, похожий на <a href="#fl_005ftigris">fl_tigris</a>.
</p>
<dl compact="compact">
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_tigris.png" alt="images/st_tigris"><p> <b>st_tigris</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="st_005fwoven"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005ftigris" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fyellow" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fwoven-1"></a>
<h3 class="subsection">9.3.19 st_woven</h3>
<a name="index-st_005fwoven"></a>

<p>Жёлто-серый плетёный камень.
</p>
<dl compact="compact">
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_woven.png" alt="images/st_woven"><p> <b>st_woven</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="st_005fyellow"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fwoven" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Cluster-Stones" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Standard-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fyellow-1"></a>
<h3 class="subsection">9.3.20 st_yellow</h3>
<a name="index-st_005fyellow"></a>

<p>Жёлтый камень с красно-зелёными полосками. Внешне этот камень гармонирует со <a href="#st_005fcoinslot">st_coinslot</a>.
</p>
<dl compact="compact">
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_yellow.png" alt="images/st_yellow"><p> <b>st_yellow</b>
</p></dt>
</dl>
</dd>
</dl>


<hr size="6">
<a name="Cluster-Stones"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fyellow" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Cluster-Features" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Cluster-Stones-1"></a>
<h2 class="section">9.4 Строительные камни</h2>

<p>Строительные камни &mdash; это неподвижные камни, похожие на простые, из которых можно строить стены. Но несколько строительных камней, прилегающих друг к другу, визуально образуют скопление, которое выглядит как один большой камень с единой наружной поверхностью.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Cluster-Features">9.4.1 Особенности строительных камней</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">   Общие атрибуты и характеристики
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fbluesand">9.4.2 st_bluesand</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        Песчаник
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fbrick">9.4.3 st_brick</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Кирпичная стена
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fpanel">9.4.4 st_panel</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Деревянная панель
</td></tr>
</table>

<hr size="6">
<a name="Cluster-Features"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Cluster-Stones" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fbluesand" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Cluster-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Cluster-Features-1"></a>
<h3 class="subsection">9.4.1 Особенности строительных камней</h3>

<p>Для каждого камня данного типа существует 16 разновидностей, которые представляют собой все комбинации внутренних и внешних поверхностей, необходимые для создания больших блоков произвольной формы.
</p>
<p>Существует два метода описания специальных комбинаций камней. Вы можете задать либо поверхности камней, находящихся внутри блока, т.е. тех краёв, которые будут граничить с другими камнями того же скопления (атрибут &lsquo;<samp>connections</samp>&rsquo;), либо поверхности камней, находящихся с краю, которые определяют общие очертания скопления (атрибут &lsquo;<samp>faces</samp>&rsquo;).
</p>
<p>Поскольку строить большие блоки из отдельных камней утомительно, можно использовать опцию автоматической группировки камней. Просто установите в качестве значения атрибута &lsquo;<samp>cluster</samp>&rsquo; всех камней, входящих в блок, одно и то же число, и поверхности камней, входящих в блок, будут заданы автоматически.
</p>
<p>Вы можете заполнить весь экран произвольными большими блоками, и, как было доказано, для этого понадобится не более четырёх различных значений атрибута (&quot;Теорема четырёх цветов&quot;). Но для удобства вы можете использовать дополнительные номера скоплений на ваше усмотрение. Следует отметить, что автоматическая группировка камней &mdash; это динамический процесс. При перемещении отдельного строительного камня с подходящим номером скопления к краю уже имеющегося блока с тем же самым номером скопления новый камень присоединится к нему и вольётся в него, как в фильме &quot;Терминатор 2&quot;.
</p>
<p>Мы советуем автоматически группировать камни с помощью атрибута &lsquo;<samp>cluster</samp>&rsquo; и, в случае необходимости, использовать атрибут &lsquo;<samp>faces</samp>&rsquo;. Использовать атрибут &lsquo;<samp>connections</samp>&rsquo; либо указывать разновидность каждого камня не рекомендуется, но эти возможности будут и дальше поддерживаться.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>connections</b>, &nbsp;&nbsp;<i>значения</i>: string; &nbsp;&nbsp;<i>по умолчанию</i>: <code>nil</code></dt>
<dd><p>Описывает внутренние поверхности камней скопления. Строка является подстрокой списка внутренних поверхностей <code>&quot;nesw&quot;</code>. Последовательность сторон &mdash; север, восток, юг, запад &mdash; является обязательной при доступе для чтения, но произвольной при доступе для записи.
</p>
</dd>
<dt> <b>faces</b> &nbsp;&nbsp;<i>значения</i>: string; &nbsp;&nbsp;<i>по умолчанию</i>: <code>nil</code></dt>
<dd><p>Описывает наружные поверхности камней скопления. Строка является подстрокой списка наружных поверхностей <code>&quot;nesw&quot;</code>. Последовательность сторон &mdash; север, восток, юг, запад &mdash; является обязательной при доступе для чтения, но произвольной при доступе для записи.
</p>
</dd>
<dt> <b>cluster</b> &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: <code>nil</code></dt>
<dd><p>Если числовое значение задано, то все прилегающие камни одного типа с идентичным номером скопления образуют один большой блок. Данный атрибут обладает приоритетом над всеми заданными явно описаниями наружных поверхностей скопления.
</p>
</dd>
</dl>
</dd>
</dl>

<hr size="6">
<a name="st_005fbluesand"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Cluster-Features" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fbrick" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Cluster-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fbluesand-1"></a>
<h3 class="subsection">9.4.2 st_bluesand</h3>
<a name="index-st_005fbluesand"></a>

<p>Стандартный строительный камень со всеми свойственными данному типу особенностями (см. раздел <a href="#Cluster-Features">Особенности строительных камней</a>). Рекомендуется использовать &lsquo;<samp>st_bluesand</samp>&rsquo; вместе с атрибутами &lsquo;<samp>cluster</samp>&rsquo; и &lsquo;<samp>faces</samp>&rsquo;.
</p>
<dl compact="compact">
<dt> <b>Разновидности:</b></dt>
<dd><table>
<tr><td width="8%"><img src="images/st_bluesand.png" alt="images/st_bluesand"></td><td width="42%"><b>st_bluesand</b>: connections = <code>&quot;&quot;</code></td><td width="8%"><img src="images/st_bluesand_2.png" alt="images/st_bluesand_2"></td><td width="42%"><b>st_bluesand_w</b>: connections = <code>&quot;w&quot;</code></td></tr>
<tr><td width="8%"><img src="images/st_bluesand_3.png" alt="images/st_bluesand_3"></td><td width="42%"><b>st_bluesand_s</b>: connections = <code>&quot;s&quot;</code></td><td width="8%"><img src="images/st_bluesand_4.png" alt="images/st_bluesand_4"></td><td width="42%"><b>st_bluesand_sw</b>: connections = <code>&quot;sw&quot;</code></td></tr>
<tr><td width="8%"><img src="images/st_bluesand_b.png" alt="images/st_bluesand_b"></td><td width="42%"><b>st_bluesand_e</b>: connections = <code>&quot;e&quot;</code></td><td width="8%"><img src="images/st_bluesand_b2.png" alt="images/st_bluesand_b2"></td><td width="42%"><b>st_bluesand_ew</b>: connections = <code>&quot;ew&quot;</code></td></tr>
<tr><td width="8%"><img src="images/st_bluesand_b3.png" alt="images/st_bluesand_b3"></td><td width="42%"><b>st_bluesand_es</b>: connections = <code>&quot;es&quot;</code></td><td width="8%"><img src="images/st_bluesand_b4.png" alt="images/st_bluesand_b4"></td><td width="42%"><b>st_bluesand_esw</b>: connections = <code>&quot;esw&quot;</code></td></tr>
<tr><td width="8%"><img src="images/st_bluesand_c.png" alt="images/st_bluesand_c"></td><td width="42%"><b>st_bluesand_n</b>: connections = <code>&quot;n&quot;</code></td><td width="8%"><img src="images/st_bluesand_c2.png" alt="images/st_bluesand_c2"></td><td width="42%"><b>st_bluesand_nw</b>: connections = <code>&quot;nw&quot;</code></td></tr>
<tr><td width="8%"><img src="images/st_bluesand_c3.png" alt="images/st_bluesand_c3"></td><td width="42%"><b>st_bluesand_ns</b>: connections = <code>&quot;ns&quot;</code></td><td width="8%"><img src="images/st_bluesand_c4.png" alt="images/st_bluesand_c4"></td><td width="42%"><b>st_bluesand_nsw</b>: connections = <code>&quot;nsw&quot;</code></td></tr>
<tr><td width="8%"><img src="images/st_bluesand_d.png" alt="images/st_bluesand_d"></td><td width="42%"><b>st_bluesand_ne</b>: connections = <code>&quot;ne&quot;</code></td><td width="8%"><img src="images/st_bluesand_d2.png" alt="images/st_bluesand_d2"></td><td width="42%"><b>st_bluesand_new</b>: connections = <code>&quot;new&quot;</code></td></tr>
<tr><td width="8%"><img src="images/st_bluesand_d3.png" alt="images/st_bluesand_d3"></td><td width="42%"><b>st_bluesand_nes</b>: connections = <code>&quot;nes&quot;</code></td><td width="8%"><img src="images/st_bluesand_d4.png" alt="images/st_bluesand_d4"></td><td width="42%"><b>st_bluesand_nesw</b>: connections = <code>&quot;nesw&quot;</code></td></tr>
</table>
</dd>
</dl>

<hr size="6">
<a name="st_005fbrick"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fbluesand" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fpanel" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Cluster-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fbrick-1"></a>
<h3 class="subsection">9.4.3 st_brick</h3>
<a name="index-st_005fbrick"></a>

<p>Стандартный строительный камень со всеми свойственными данному типу особенностями (см. раздел <a href="#Cluster-Features">Особенности строительных камней</a>). Рекомендуется использовать &lsquo;<samp>st_brick</samp>&rsquo; вместе с атрибутами &lsquo;<samp>cluster</samp>&rsquo; и &lsquo;<samp>faces</samp>&rsquo;.
</p>
<dl compact="compact">
<dt> <b>Разновидности:</b></dt>
<dd><table>
<tr><td width="8%"><img src="images/st_brick.png" alt="images/st_brick"></td><td width="42%"><b>st_brick</b>: connections = <code>&quot;&quot;</code></td><td width="8%"><img src="images/st_brick_2.png" alt="images/st_brick_2"></td><td width="42%"><b>st_brick_w</b>: connections = <code>&quot;w&quot;</code></td></tr>
<tr><td width="8%"><img src="images/st_brick_3.png" alt="images/st_brick_3"></td><td width="42%"><b>st_brick_s</b>: connections = <code>&quot;s&quot;</code></td><td width="8%"><img src="images/st_brick_4.png" alt="images/st_brick_4"></td><td width="42%"><b>st_brick_sw</b>: connections = <code>&quot;sw&quot;</code></td></tr>
<tr><td width="8%"><img src="images/st_brick_b.png" alt="images/st_brick_b"></td><td width="42%"><b>st_brick_e</b>: connections = <code>&quot;e&quot;</code></td><td width="8%"><img src="images/st_brick_b2.png" alt="images/st_brick_b2"></td><td width="42%"><b>st_brick_ew</b>: connections = <code>&quot;ew&quot;</code></td></tr>
<tr><td width="8%"><img src="images/st_brick_b3.png" alt="images/st_brick_b3"></td><td width="42%"><b>st_brick_es</b>: connections = <code>&quot;es&quot;</code></td><td width="8%"><img src="images/st_brick_b4.png" alt="images/st_brick_b4"></td><td width="42%"><b>st_brick_esw</b>: connections = <code>&quot;esw&quot;</code></td></tr>
<tr><td width="8%"><img src="images/st_brick_c.png" alt="images/st_brick_c"></td><td width="42%"><b>st_brick_n</b>: connections = <code>&quot;n&quot;</code></td><td width="8%"><img src="images/st_brick_c2.png" alt="images/st_brick_c2"></td><td width="42%"><b>st_brick_nw</b>: connections = <code>&quot;nw&quot;</code></td></tr>
<tr><td width="8%"><img src="images/st_brick_c3.png" alt="images/st_brick_c3"></td><td width="42%"><b>st_brick_ns</b>: connections = <code>&quot;ns&quot;</code></td><td width="8%"><img src="images/st_brick_c4.png" alt="images/st_brick_c4"></td><td width="42%"><b>st_brick_nsw</b>: connections = <code>&quot;nsw&quot;</code></td></tr>
<tr><td width="8%"><img src="images/st_brick_d.png" alt="images/st_brick_d"></td><td width="42%"><b>st_brick_ne</b>: connections = <code>&quot;ne&quot;</code></td><td width="8%"><img src="images/st_brick_d2.png" alt="images/st_brick_d2"></td><td width="42%"><b>st_brick_new</b>: connections = <code>&quot;new&quot;</code></td></tr>
<tr><td width="8%"><img src="images/st_brick_d3.png" alt="images/st_brick_d3"></td><td width="42%"><b>st_brick_nes</b>: connections = <code>&quot;nes&quot;</code></td><td width="8%"><img src="images/st_brick_d4.png" alt="images/st_brick_d4"></td><td width="42%"><b>st_brick_nesw</b>: connections = <code>&quot;nesw&quot;</code></td></tr>
</table>
</dd>
</dl>
<hr size="6">
<a name="st_005fpanel"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fbrick" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Special-Stones" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Cluster-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fpanel-1"></a>
<h3 class="subsection">9.4.4 st_panel</h3>
<a name="index-st_005fpanel"></a>

<p>Стандартный строительный камень со всеми свойственными данному типу особенностями (см. раздел <a href="#Cluster-Features">Особенности строительных камней</a>). Рекомендуется использовать &lsquo;<samp>st_panel</samp>&rsquo; вместе с атрибутами &lsquo;<samp>cluster</samp>&rsquo; и &lsquo;<samp>faces</samp>&rsquo;.
</p>
<dl compact="compact">
<dt> <b>Разновидности:</b></dt>
<dd><table>
<tr><td width="8%"><img src="images/st_panel.png" alt="images/st_panel"></td><td width="42%"><b>st_panel</b>: connections = <code>&quot;&quot;</code></td><td width="8%"><img src="images/st_panel_2.png" alt="images/st_panel_2"></td><td width="42%"><b>st_panel_w</b>: connections = <code>&quot;w&quot;</code></td></tr>
<tr><td width="8%"><img src="images/st_panel_3.png" alt="images/st_panel_3"></td><td width="42%"><b>st_panel_s</b>: connections = <code>&quot;s&quot;</code></td><td width="8%"><img src="images/st_panel_4.png" alt="images/st_panel_4"></td><td width="42%"><b>st_panel_sw</b>: connections = <code>&quot;sw&quot;</code></td></tr>
<tr><td width="8%"><img src="images/st_panel_b.png" alt="images/st_panel_b"></td><td width="42%"><b>st_panel_e</b>: connections = <code>&quot;e&quot;</code></td><td width="8%"><img src="images/st_panel_b2.png" alt="images/st_panel_b2"></td><td width="42%"><b>st_panel_ew</b>: connections = <code>&quot;ew&quot;</code></td></tr>
<tr><td width="8%"><img src="images/st_panel_b3.png" alt="images/st_panel_b3"></td><td width="42%"><b>st_panel_es</b>: connections = <code>&quot;es&quot;</code></td><td width="8%"><img src="images/st_panel_b4.png" alt="images/st_panel_b4"></td><td width="42%"><b>st_panel_esw</b>: connections = <code>&quot;esw&quot;</code></td></tr>
<tr><td width="8%"><img src="images/st_panel_c.png" alt="images/st_panel_c"></td><td width="42%"><b>st_panel_n</b>: connections = <code>&quot;n&quot;</code></td><td width="8%"><img src="images/st_panel_c2.png" alt="images/st_panel_c2"></td><td width="42%"><b>st_panel_nw</b>: connections = <code>&quot;nw&quot;</code></td></tr>
<tr><td width="8%"><img src="images/st_panel_c3.png" alt="images/st_panel_c3"></td><td width="42%"><b>st_panel_ns</b>: connections = <code>&quot;ns&quot;</code></td><td width="8%"><img src="images/st_panel_c4.png" alt="images/st_panel_c4"></td><td width="42%"><b>st_panel_nsw</b>: connections = <code>&quot;nsw&quot;</code></td></tr>
<tr><td width="8%"><img src="images/st_panel_d.png" alt="images/st_panel_d"></td><td width="42%"><b>st_panel_ne</b>: connections = <code>&quot;ne&quot;</code></td><td width="8%"><img src="images/st_panel_d2.png" alt="images/st_panel_d2"></td><td width="42%"><b>st_panel_new</b>: connections = <code>&quot;new&quot;</code></td></tr>
<tr><td width="8%"><img src="images/st_panel_d3.png" alt="images/st_panel_d3"></td><td width="42%"><b>st_panel_nes</b>: connections = <code>&quot;nes&quot;</code></td><td width="8%"><img src="images/st_panel_d4.png" alt="images/st_panel_d4"></td><td width="42%"><b>st_panel_nesw</b>: connections = <code>&quot;nesw&quot;</code></td></tr>
</table>
</dd>
</dl>


<hr size="6">
<a name="Special-Stones"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fpanel" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005factorimpulse" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Special-Stones-1"></a>
<h2 class="section">9.5 Специальные камни</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#st_005factorimpulse">9.5.1 st_actorimpulse</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">    Камень-бампер
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fbarrier">9.5.2 st_barrier</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         Преграда для актёров, переносящих предметы
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fbeads">9.5.3 st_beads</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Стеклянные бусы
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fblocker">9.5.4 st_blocker</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         Съёживающаяся преграда
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fblur">9.5.5 st_blur</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Проход ещё не определённого цвета
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fboulder">9.5.6 st_boulder</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         Ходячий камень со стрелкой
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fbox">9.5.7 st_box</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">             Перемещаемый ящик, который может стать покрытием
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fbrake">9.5.8 st_brake</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Тормоз для движущихся болдеров
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fbreak">9.5.9 st_break</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Различные разновидности бьющегося камня
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fbrownpyramid">9.5.10 st_brownpyramid</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">   Серо-коричневый камень в форме пирамиды
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fchameleon">9.5.11 st_chameleon</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       Поддельное покрытие
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fcharge">9.5.12 st_charge</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Электрическое зарядное устройство
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fchess">9.5.13 st_chess</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Перемещаемый шахматный конь
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fcoinslot">9.5.14 st_coinslot</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        Платный переключатель
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fdarkglass">9.5.15 st_darkglass</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       Полупрозрачное стекло в металлической оправе
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fdeath">9.5.16 st_death</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Камень с черепом
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fdisco">9.5.17 st_disco</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Камень, затеняющий свет
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fdispenser">9.5.18 st_dispenser</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       Раздаточное устройство
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fdoor">9.5.19 st_door</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Различные разновидности дверей
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005ffake">9.5.20 st_fake</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Камень, маскирующийся под другие
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fflash">9.5.21 st_flash</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Камень, толкающий шарик-спутник
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fflat">9.5.22 st_flat</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Гипсовый камень с целым рядом свойств
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005ffloppy">9.5.23 st_floppy</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Переключатель, работающий с помощью дискеты
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005ffourswitch">9.5.24 st_fourswitch</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">      Переключатель с четырьмя позициями
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fghost">9.5.25 st_ghost</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Невидимый превращающийся камень
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fgrate">9.5.26 st_grate</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Парящая металлическая решётка
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fgreenbrown">9.5.27 st_greenbrown</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">      Камень преимущество коричневого цвета, размножающийся с помощью семян
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fice">9.5.28 st_ice</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">             Ледяной куб, замораживающий предметы и покрытия
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fjamb">9.5.29 st_jamb</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Окрашенный дверной косяк
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fkey">9.5.30 st_key</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">             Переключатель, работающий от ключа
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fknight">9.5.31 st_knight</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Камень-рыцарь, имеющий при себе меч
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005flaser">9.5.32 st_laser</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Камень, испускающий лазерные лучи
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005flaserflop">9.5.33 st_laserflop</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       Монофлоп, срабатывающий от света
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005flaserswitch">9.5.34 st_laserswitch</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">     Переключатель, срабатывающий от света
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005flightglass">9.5.35 st_lightglass</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">      Прозрачное стекло в металлической оправе
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005flightpassenger">9.5.36 st_lightpassenger</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">  Камень, несомый светом
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fmagic">9.5.37 st_magic</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Волшебный превращающийся камень
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fmail">9.5.38 st_mail</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Почтовое отделения для пересылки предметов
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fmirror">9.5.39 st_mirror</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Всевозможные виды зеркал
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fmonoflop">9.5.40 st_monoflop</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        Ещё одна разновидность переключателя
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005foneway">9.5.41 st_oneway</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Однонаправленный проход
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005foxyd">9.5.42 st_oxyd</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Главная цель игры
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fpassage">9.5.43 st_passage</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         Проход, придирчивый к цвету
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fplaster">9.5.44 st_plaster</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         Камень, вылепленный из гипса
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fplop">9.5.45 st_plop</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Подвижный камень, исчезающий с булькающим звуком
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fpolarswitch">9.5.46 st_polarswitch</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">     Переключаемая преграда для лазера
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fportal">9.5.47 st_portal</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Ворота, сквозь которые могут пройти лишь некоторые виды актёров
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fpull">9.5.48 st_pull</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Обратный камень
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fpuzzle">9.5.49 st_puzzle</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Камни-головоломки, способные образовывать скопления
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fquake">9.5.50 st_quake</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Камень, закрывающий оксиды
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005frawglass">9.5.51 st_rawglass</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        Прозрачный стеклянный камень
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fredfiber">9.5.52 st_redfiber</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        Плетёное волокно в металлической оправе
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005frotator">9.5.53 st_rotator</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         Вращающийся импульсный камень
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005frubberband">9.5.54 st_rubberband</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">      Генератор резиновых лент
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fscissors">9.5.55 st_scissors</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        Ножницы, отрезающие резиновые ленты
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fshogun">9.5.56 st_shogun</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Штабелируемые полые камни
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fspitter">9.5.57 st_spitter</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         Пушки, стреляющие ядрами
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fstoneimpulse">9.5.58 st_stoneimpulse</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">    Пульсирующий камень, толкающий соседей
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fsurprise">9.5.59 st_surprise</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        Камень, превращающийся в случайный предмет
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fswap">9.5.60 st_swap</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Камень, меняющийся местами с соседями
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fswitch">9.5.61 st_switch</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Классический переключатель (вкл./выкл.)
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fthief">9.5.62 st_thief</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Камень, ворующий предметы
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005ftimer">9.5.63 st_timer</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Анимированный таймер
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fturnstile">9.5.64 st_turnstile</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       Турникет
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fturnstilearm">9.5.65 st_turnstilearm</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">    Рукоять турникета
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fvolcano">9.5.66 st_volcano</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         Вулкан, извергающий лаву
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fwindow">9.5.67 st_window</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Четырёхстороннее окно
</td></tr>
<tr><td align="left" valign="top"><a href="#st_005fyinyang">9.5.68 st_yinyang</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         Переключатель игроков
</td></tr>
</table>


<hr size="6">
<a name="st_005factorimpulse"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Special-Stones" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fbarrier" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005factorimpulse-1"></a>
<h3 class="subsection">9.5.1 st_actorimpulse</h3>
<a name="index-st_005factorimpulse"></a>

<p>Действующий амортизатор для актёров и некоторых камней, таких как <a href="#st_005fboulder">st_boulder</a>. Его можно сделать невидимым в состоянии покоя, чтобы устроить игроку небольшой сюрприз.
</p>
<p>Актёры, столкнувшиеся с камнем, не просто отскакивают от него. На них воздействует дополнительная сила, которая может даже быть искривлённой. По умолчанию актёры просто отталкиваются по направлению от центра камня. Глобальный атрибут <a href="#ActorimpulseStrength">ActorimpulseStrength</a> задаёт силу по умолчанию, которая может быть изменена с помощью атрибута &lsquo;<samp>strength</samp>&rsquo;.
</p>
<p>В более сложных случаях вы можете искривить эту силу с помощью атрибутов группы <a href="#hit_005f_002a">hit_*</a>. Обратите внимание, что атрибут &lsquo;<samp>hit_factor</samp>&rsquo; обладает приоритетом над атрибутом &lsquo;<samp>strength</samp>&rsquo;.
</p>
<p>С помощью атрибута &lsquo;<samp>invisible</samp>&rsquo; амортизатор можно сделать невидимым в состоянии покоя. Когда амортизатор срабатывает, он на некоторое время становится видимым. Невидимый амортизатор можно сделать постоянно видимым, дотронувшись до него объектом <a href="#it_005fbrush">it_brush</a>, находящимся в инвентаре игрока. С помощью значения &lsquo;<samp>SPOT_ACTORIMPULSE</samp>&rsquo; автор может запрограммировать объект <a href="#it_005fglasses">it_glasses</a>, чтобы он позволял видеть невидимые амортизаторы. С помощью глобального атрибута <a href="#ExtralifeGlasses">ExtralifeGlasses</a> даже очки, сгенерированные посредством лазера из объекта <a href="#it_005fextralife">it_extralife</a>, можно запрограммировать так, чтобы они позволяли игроку видеть невидимые амортизаторы.
</p>
<p>Если <a href="#st_005fboulder">st_boulder</a> столкнётся с амортизатором, он изменит направление своего движения на противоположное.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>invisible</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code></dt>
<dd><p>Невидимый амортизатор полностью прозрачен. Но игрок заметит его, поскольку актеры будут отскакивать от камня с дополнительными импульсами.
</p></dd>
<dt> <b>strength</b> &nbsp;&nbsp;<i>значения</i>: число с плавающей запятой; &nbsp;&nbsp;<i>по умолчанию</i>: <code>+200.0</code> &nbsp;&nbsp;См. раздел <a href="#ActorimpulseStrength">ActorimpulseStrength</a></dt>
<dd><p>Скалярный множитель для импульсной силы. Положительные числа выражают силы притяжения, отрицательные &mdash; силы отталкивания.
</p></dd>
<dt> <b><b>hit_strength</b></b> &nbsp;&nbsp;<i>значения</i>: число с плавающей запятой; &nbsp;&nbsp;<i>по умолчанию</i>: <code>nil</code> &nbsp;&nbsp;См. раздел  <a href="#hit_005f_002a">hit_*</a></dt>
<dd><p>Атрибут &lsquo;<samp>hit_strength</samp>&rsquo; обладает приоритетом над атрибутом &lsquo;<samp>strength</samp>&rsquo;.
</p></dd>
<dt> <b><b>hit_distortion_xx</b></b> &nbsp;&nbsp;<i>значения</i>: число с плавающей запятой; &nbsp;&nbsp;<i>по умолчанию</i>: <code>+1.0</code> &nbsp;&nbsp;См. раздел <a href="#hit_005f_002a">hit_*</a></dt>
<dt> <b>hit_distortion_xy</b> &nbsp;&nbsp;<I>значения:</I> число с плавающей запятой; &nbsp;&nbsp;<I>по умолчанию:</I> <code>0.0</code> &nbsp;&nbsp;См. раздел <a href="#hit_005f_002a">hit_*</a></dt>
<dt> <b>hit_distortion_yx</b> &nbsp;&nbsp;<i>значения:</i> число с плавающей запятой; &nbsp;&nbsp;<i>по умолчанию:</i> <code>0.0</code> &nbsp;&nbsp;См. раздел <a href="#hit_005f_002a">hit_*</a></dt>
<dt> <b>hit_distortion_yy</b> <i>значения:</i> число с плавающей запятой; &nbsp;&nbsp;<i>по умолчанию:</i> <code>+1.0</code> &nbsp;&nbsp;См. раздел <a href="#hit_005f_002a">hit_*</a></dt>
</dl>

</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Действие:</b> &nbsp;&nbsp;См. раздел <a href="#target">target</a>, &nbsp;&nbsp;см. раздел <a href="#action">action</a></dt>
<dt> <b>Разновидности:</b></dt>
<dd>
<dl compact="compact">
<dt> <img src="images/st_actorimpulse.png" alt="images/st_actorimpulse"><p> <b>st_actorimpulse</b>: invisible = <code>false</code>
</p></dt>
<dt> <img src="images/fl_white.png" alt="images/fl_white"><p> <b>st_actorimpulse_invisible</b>: invisible = <code>true</code>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="st_005fbarrier"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005factorimpulse" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fbeads" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fbarrier-1"></a>
<h3 class="subsection">9.5.2 st_barrier</h3>
<a name="index-st_005fbarrier"></a>

<p>Барьерный камень блокирует актёров, в инвентаре которых находится тот или иной предмет. Перекрыв все входы в какую-либо комнату барьерами с одинаковым значением атрибута &lsquo;<samp>flavor</samp>&rsquo;, вы можете гарантировать, что ни один актёр не сможет использовать определённый предмет внутри комнаты, даже если этот предмет присутствует на уровне вне её.  Барьер функционирует, подобно таможне. Он выполняет глубокую проверку, не ограничиваясь одним лишь верхним уровнем инвентаря игрока. Рекурсивная проверка выполняется также для каждой сумки (<a href="#it_005fbag">it_bag</a>), гарантируя, что ни один экземпляр запрещённого предмета не проникнет сквозь преграду.
</p>
<p>Атрибут &lsquo;<samp>flavor</samp>&rsquo; определяет тип блокируемого предмета. Строка <code>&quot;all&quot;</code> блокирует любые предметы. Строка, содержащая <a href="#Object-Kind">тип объекта</a>, будет блокировать все экземпляры данного типа. Конечно же, в ней можно указывать только <a href="#portable">портативные</a> типы предметов.  Например, при значении атрибута &lsquo;<samp>flavor</samp>&rsquo;, равном <code>&quot;it_flag_white&quot;</code>, будут блокироваться актёры, имеющий с собой белый <a href="#it_005fflag">it_flag</a>, в то время как значение <code>&quot;it_flag&quot;</code> будет блокировать актёров, переносящих флаги любого цвета. Тип блокируемого предмета указывается на барьерном камне.
</p>
<p>Помните, что ограничения, налагаемые барьерным камнем, можно обойти, обменявшись позициями с другим актёром при помощи объекта <a href="#it_005fyinyang">it_yinyang</a>. Поскольку актёр не может положить объект <a href="#it_005fyinyang">it_yinyang</a> на покрытие, нет необходимости создавать для этого объекта дополнительные барьерные камни. Другим возможным источником способов обхода барьерного камня является присвоение одному игроку нескольких актёров.
</p>
<p>Поскольку барьерные камни обычно должны находиться в своём изначальном положении для выполнения своей функции, то чтобы предотвратить их перемещение под воздействием внешних сил или с помощью обменных камней, атрибут &lsquo;<samp>static</samp>&rsquo; этих камней по умолчанию имеет значение <code>true</code>.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>flavor</b> &nbsp;&nbsp;<i>значения</i>: <code>&quot;all&quot;</code>, строки наименований любых портативных предметов; &nbsp;&nbsp;<i>по умолчанию</i>: <code>&quot;all&quot;</code></dt>
<dd><p>Тип предмета, который необходимо искать барьерному камню.
</p></dd>
<dt> <b>static</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code></dt>
<dd><p>Статичные барьеры нельзя ни столкнуть с занимаемого ими участка, ни переместить с помощью обменных камней.
</p></dd>
</dl>

</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Действие:</b> отсутствует</dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_barrier.png" alt="images/st_barrier"><p> <b>st_barrier</b>: flavor=<code>&quot;all&quot;</code>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="st_005fbeads"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fbarrier" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fblocker" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fbeads-1"></a>
<h3 class="subsection">9.5.3 st_beads</h3>
<a name="index-st_005fbeads"></a>

<p>Камень, украшенный стеклянными бусами. Как и в случае с другими прозрачными камнями (см. раздел <a href="#Transparent-Stones">Прозрачные камни</a>), сквозь него могут проходить невидимые актёры, но для лазерных лучей он непроницаем.
</p>
<p>Подобно объекту <a href="#st_005foneway">st_oneway</a>, он не удерживает видимых актёров на участке решётки; актёры могут сойти с участка в любом направлении.
</p>
<dl compact="compact">
<dt> <b>Атрибуты: </b>отсутствуют</dt>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_beads.png" alt="images/st_beads"><p> <b>st_beads</b>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="st_005fblocker"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fbeads" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fblur" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fblocker-1"></a>
<h3 class="subsection">9.5.4 st_blocker</h3>
<a name="index-st_005fblocker"></a>

<p>Объект, работающий по принципу двери, который трансформируется в <a href="#it_005fblocker">it_blocker</a>, когда сквозь него проходит <a href="#st_005fboulder">st_boulder</a>. Когда болдер удаляется с участка решётки, объект остается открытым (находится в состоянии предмета) до тех пор, пока сквозь него ещё раз не пройдет болдер, после чего он снова превращается в блокирующий камень.
</p>
<p>&lsquo;it_blocker&rsquo; полностью поддерживает сообщения для дверей, и его можно открыть и закрыть любым объектом, функционирующим как переключатель. Обратите внимание, что в силу того, что объект при открытии и закрытии трансформируется из предмета в камень и обратно, вы должны дать объекту имя (см. раздел <a href="#name">name</a>) и обращаться к объекту, используя это имя. Сущность объекта со всеми атрибутами, включая пользовательские атрибуты, будет полностью перенесена с камня на предмет и обратно. Например, объект &lsquo;<samp>{st_switch, target=&quot;myblocker&quot;, action=&quot;toggle&quot;}</samp>&rsquo; будет открывать и закрывать данный блокирующий камень любое количество раз.
</p>
<p>Следует упомянуть, что это единственный объект, функционирующий как дверь, сквозь который можно передвинуть камень. Его трансформацию вызывают только болдеры. Под воздействием прочих камней он не закрывается.
</p>
<p>Помните, что <a href="#it_005fbrake">it_brake</a> разрушает <a href="#it_005fblocker">it_blocker</a>.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: <code>OPEN</code>, <code>CLOSED</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>CLOSED</code> &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dd><p>Камень соответствует закрытому состоянию и всегда возвращает состояние &lsquo;<samp>CLOSED</samp>&rsquo; (&quot;закрыто&quot;). Но вы можете задать его состояние, что равнозначно отправке сообщения об открытии, если задано значение &lsquo;<samp>OPEN</samp>&rsquo;, и сообщения о закрытии, если задано значение &lsquo;<samp>CLOSED</samp>&rsquo;.
</p>
<a name="index-autoclose-1"></a>
</dd>
<dt> <b>autoclose</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code></dt>
<dd><p>Данный атрибут не применим по отношению к самому камню. Но он переносится на <a href="#it_005fblocker">it_blocker</a>, когда камень открывается.
</p>
</dd>
</dl>

</dd>
<dt> <b>Сообщения:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>signal</b> &nbsp;&nbsp;См. раздел <a href="#signal">signal</a></dt>
<dd><p>Сигнал со значением 1 посылает сообщение об открытии, сигнал со значением 0 &mdash; о закрытии.
</p></dd>
<dt> <b>toggle</b> &nbsp;&nbsp;См. раздел <a href="#toggle">toggle</a></dt>
<dd><p>Приказывает камню открыться, кроме тех случаев, когда он находится в процессе трансформации в it_blocker. В таких случаях данное сообщение соответствует сообщению о закрытии.
</p></dd>
<dt> <b>open</b> &nbsp;&nbsp;См. раздел <a href="#open">open</a></dt>
<dd><p>Начинает процесс открытия посредством трансформации объекта в it_blocker. Обратите внимание, что в процессе трансформации камень всё ещё возвращает закрытое состояние. Процесс трансформации можно обратить при помощи сообщения о закрытии.
</p></dd>
<dt> <b>close</b> &nbsp;&nbsp;См. раздел <a href="#close">close</a></dt>
<dd><p>Сообщение о закрытии производит эффект, только если объект находится в процессе трансформации в it_blocker. Трансформация немедленно останавливается, и камень снова вырастает до своего нормального размера.
</p></dd>
</dl>

</dd>
<dt> <b>Действие:</b> &nbsp;&nbsp;См. раздел <a href="#target">target</a>, &nbsp;&nbsp;см. раздел <a href="#action">action</a></dt>
<dd><p>Посылает действие в момент, когда объект достигает закрытого состояния. Это означает, что <a href="#it_005fblocker">it_blocker</a> закрылся и сгенерировал данный блокирующий камень в качестве своего потомка. Значением, выражающим закрытое состояние, будет <samp>false</samp>.
</p>
</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_blocker.png" alt="images/st_blocker"><p>  <b>st_blocker</b>
</p></dt>
<dd><p>Стандартный камень.
</p></dd>
<dt> <img src="images/st_blocker.png" alt="images/st_blocker"><p>  <b>st_blocker_new</b>
</p></dt>
<dd><p>Блокирующий камень, который только что начал расти. В основном используется системой как прямой потомок объекта <a href="#it_005fblocker">it_blocker</a>. Но иногда также бывает удобно сгенерировать первоначальный снимок болдера, проходящего сквозь блокирующий объект (см. примеры уровней).
</p></dd>
</dl>

</dd>
</dl>

<hr size="6">
<a name="st_005fblur"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fblocker" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fboulder" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fblur-1"></a>
<h3 class="subsection">9.5.5 st_blur</h3>
<a name="index-st_005fblur"></a>

<p>Камень серого цвета, который, когда к нему прикасается актёр, превращается в <a href="#st_005fpassage">st_passage</a>, цвет которого зависит от цвета актёра. Получившийся камень <a href="#st_005fpassage">st_passage</a> может быть того же цвета, что и актёр, или противоположного. Форма получившегося камня всегда квадратная (<code>&quot;square&quot;</code>).
</p>
<p>В первом случае камень полностью серый, а его атрибут &lsquo;<samp>flavor</samp>&rsquo; имеет значение <code>&quot;straight&quot;</code> (&quot;прямой&quot;), в силу того, что цвет образовавшегося камня соответствует цвету актёра. Актёр, дотронувшийся до камня, сможет сразу же пройти сквозь образовавшийся st_passage.
</p>
<p>Во втором случае на камне изображен символ Инь-Ян; это даёт игроку понять, что актёр, дотронувшийся до камня, не сможет сквозь него пройти. Есть две разновидности таких камней: <code>&quot;cross&quot;</code>, который превращается в <a href="#st_005fpassage">st_passage</a> противоположного цвета при любом прикосновении актёра, и <code>&quot;magic&quot;</code>, который превращается, только если до него дотронуться объектами <a href="#it_005fmagicwand">it_magicwand</a> или <a href="#it_005fbrush">it_brush</a>, расположенными слева в инвентаре.
</p>
<p>Для бесцветных актёров камень-пятно будет обыкновенным камнем без каких-либо особых свойств.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>flavor</b> &nbsp;&nbsp;<i>значения</i>: <code>&quot;straight&quot;</code>, <code>&quot;cross&quot;</code>, <code>&quot;magic&quot;</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>&quot;straight&quot;</code></dt>
<dd><p>Разновидность камня.
</p></dd>
</dl>

</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Действие:</b> отсутствует</dt>
<dt> <b>Разновидности:</b></dt>
<dd>
<dl compact="compact">
<dt> <img src="images/st_blur_straight.png" alt="images/st_blur_straight"><p> <b>st_blur</b>: flavor = <code>&quot;straight&quot;</code>
</p></dt>
<dt> <img src="images/st_blur_straight.png" alt="images/st_blur_straight"><p> <b>st_blur_straight</b>: flavor = <code>&quot;straight&quot;</code>
</p></dt>
<dt> <img src="images/st_blur_cross.png" alt="images/st_blur_cross"><p> <b>st_blur_cross</b>: flavor = <code>&quot;cross&quot;</code>
</p></dt>
<dt> <img src="images/st_blur_cross.png" alt="images/st_blur_cross"><p> <b>st_blur_magic</b>: flavor = <code>&quot;magic&quot;</code>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="st_005fboulder"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fblur" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fbox" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fboulder-1"></a>
<h3 class="subsection">9.5.6 st_boulder</h3>
<a name="index-st_005fboulder"></a>

<p>Этот непроницаемый камень двигается в направлении, в котором указывает нарисованная на нём стрелка. Если путь ему преграждает шарик, то этот шарик погибает. Если ему преграждает путь камень, болдер активирует его при помощи двух внутренних сообщений. Некоторые камни уступают ему дорогу, как например <a href="#st_005fblocker">st_blocker</a>, &lsquo;<samp>st_break_boulder</samp>&rsquo; (см. раздел <a href="#st_005fbreak">st_break</a>), другие изменяют своё состояние, как <a href="#st_005foxyd">st_oxyd</a>, <a href="#st_005fstoneimpulse">st_stoneimpulse</a>, <a href="#st_005fquake">st_quake</a>, <a href="#st_005fmirror">st_mirror</a>, <a href="#st_005ffourswitch">st_fourswitch</a>, <a href="#st_005fvolcano">st_volcano</a>. Ещё одна группа камней временно переходит в другое состояние после получения первого сообщения, когда болдер достигает участка решётки, а затем при получении второго сообщения, когда болдер удаляется, возвращается в первоначальное состояние (<a href="#st_005fpassage">st_passage</a>, <a href="#st_005fflat">st_flat</a>, <a href="#st_005flightpassenger">st_lightpassenger</a>).
</p>
<p>Если на пути у болдера оказываются предметы, они реагируют точно так же, как и на воздействие любого другого камня. Кроме того, <a href="#it_005fblocker">it_blocker</a> при прохождении по нему болдера снова превращается в блокирующий камень.
</p>
<p>Болдеры падают в <a href="#fl_005fabyss">fl_abyss</a>, но могут без опаски пересекать <a href="#fl_005fwater">fl_water</a>.
</p>
<p><a href="#it_005fmagicwand">it_magicwand</a> и лазеры изменяют направление движения болдера. <a href="#st_005factorimpulse">st_actorimpulse</a> также изменяет направление движения болдера, если тот в него врезается. <a href="#st_005frotator">st_rotator</a> изменяет направление движения болдера в соответствии с направлением своего вращения. <a href="#st_005fstoneimpulse">st_stoneimpulse</a> отталкивает болдер.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dd><a name="index-orientation-1"></a>
</dd>
<dt> <b>orientation</b>, &nbsp;&nbsp;<i>значения</i>: <code>NORTH</code>, <code>EAST</code>, <code>SOUTH</code>, <code>WEST</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>NORTH</code></dt>
<dd><p>Направление движения болдера, указанное нарисованной на нём стрелкой. Определяет направление, в котором болдер будет двигаться при следующем шаге.
</p></dd>
<dt> <b>counterclock</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code></dt>
<dd><p>По умолчанию объект поворачивается по часовой стрелке. Используйте данный атрибут, чтобы изменить направление вращения.
</p></dd>
</dl>

</dd>
<dt> <b>Сообщения:</b></dt>
<dd>
<dl compact="compact">
<dd><a name="index-orientate"></a>
</dd>
<dt> <b>orientate</b>, &nbsp;&nbsp;<i>тип значения:</i> direction</dt>
<dd><p>Изменяет направление движения на заданное. <a href="#st_005ffourswitch">st_fourswitch</a> предусматривает совместимое действие, которое позволяет задать болдер как цель, а это сообщение &mdash; как действие.
</p></dd>
<dt> <b>turn</b></dt>
<dd><p>Изменяет направление в соответствии со значением атрибута &lsquo;<samp>counterclock</samp>&rsquo;.
</p></dd>
<dt> <b>turnback</b></dt>
<dd><p>Поворачивает объект в направлении, противоположном заданному атрибутом &lsquo;<samp>counterclock</samp>&rsquo;.
</p></dd>
<dt> <b>flip</b></dt>
<dd><p>Изменяет направление на противоположное текущему.
</p></dd>
</dl>

</dd>
<dt> <b>Действие:</b></dt>
<dd><p>отсутствует
</p>
</dd>
<dt> <b>Разновидности:</b></dt>
<dd>
<dl compact="compact">
<dt> <img src="images/st_boulder.png" alt="images/st_boulder"><p> <b>st_boulder</b>
</p></dt>
<dt> <img src="images/st_boulder.png" alt="images/st_boulder"><p> <b>st_boulder_n</b>: orientation = <code>NORTH</code>
</p></dt>
<dt> <img src="images/st_boulder_b.png" alt="images/st_boulder_b"><p> <b>st_boulder_e</b>: orientation = <code>EAST</code>
</p></dt>
<dt> <img src="images/st_boulder_c.png" alt="images/st_boulder_c"><p> <b>st_boulder_s</b>: orientation = <code>SOUTH</code>
</p></dt>
<dt> <img src="images/st_boulder_d.png" alt="images/st_boulder_d"><p> <b>st_boulder_w</b>: orientation = <code>WEST</code>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="st_005fbox"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fboulder" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fbrake" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fbox-1"></a>
<h3 class="subsection">9.5.7 st_box</h3>
<a name="index-st_005fbox"></a>

<p>Ящик &mdash; это подвижный камень, который можно использовать для создания покрытий. Он существует в нескольких разновидностях.
</p>
<p>Этот широко распространённый камень хорошо известен игрокам по своей разновидности по умолчанию <code>&quot;wood&quot;</code> (дерево). Но для него существуют также разновидности <code>&quot;hay&quot;</code> (сено) и <code>&quot;rock&quot;</code> (камень). Размещение досок для разновидности <code>&quot;wood&quot;</code> задаётся случайным образом. Его также можно задать с помощью вариантов <code>st_box_wood_h</code> и <code>st_box_wood_v</code>.
</p>
<p>Разновидности <code>&quot;wood&quot;</code> и <code>&quot;hay&quot;</code> можно получить с помощью семечка (<a href="#it_005fseed">it_seed</a>). Существуют также разновидности, которые используются только при инициализации уровня &mdash; это <code>st_box_wood_growing</code> and <code>st_box_hay_growing</code>. Их необходимость обусловлена принципом снимка (см. раздел <a href="#Snapshot-Principle">Принцип снимка</a>).
</p>
<p>Все разновидности ящиков легко перемещаются, способны нажимать на <a href="#it_005ftrigger">it_trigger</a> и могут упасть в <a href="#fl_005fabyss">fl_abyss</a>, <a href="#fl_005fwater">fl_water</a> и <a href="#fl_005fswamp">fl_swamp</a>, образуя покрытие, тип которого определяется их атрибутом &lsquo;<samp>flavor</samp>&rsquo;. Все ящики падают при первом же удобном случае. Даже если они получат два импульса от <a href="#ot_005fwire">ot_wire</a>, они затонут на первом же участке решётки. Таким образом, переместить ящик через канаву невозможно. Ящики упадут, если покрытие под ними исчезнет. Например, взрыв <a href="#it_005fbomb">it_bomb</a> может заменить покрытие под ящиком на <a href="#fl_005fabyss">fl_abyss</a> либо поток воды может заменить его на <a href="#fl_005fwater">fl_water</a>. Во всех этих случаях ящик немедленно затонет, образовав соответствующий тип покрытия.
</p>
<p>Обратите внимание, что все ящики поддерживают <a href="#Flood-Spreading">распространение воды</a>. Это означает, что водный поток может свободно распространяться под ними. Если покрытие под ящиком также поддерживает это свойство, оно будет затоплено и ящик затонет. Новообразованное покрытие не может быть затоплено, но позволяет воде затопить соседние участки решётки (см. разделы <a href="#fl_005fwood">fl_wood</a>, <a href="#fl_005fhay">fl_hay</a>, <a href="#fl_005frock">fl_rock</a>).
</p>
<p>Различные типы ящиков имеют несколько небольших, но важных отличий. Если разновидности <code>&quot;wood&quot;</code> и <code>&quot;rock&quot;</code> сдвинуть на бомбу (<a href="#it_005fbomb">it_bomb</a>), то она взорвётся; разновидность <code>&quot;hay&quot;</code> не оказывает подобного воздействия.
</p>
<p>Как следует из их наименований, разновидности <code>&quot;wood&quot;</code> и <code>&quot;hay&quot;</code> легко воспламеняются. Разновидность же <code>&quot;rock&quot;</code> является огнеупорной и блокирует распространение огня.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>flavor</b> &nbsp;&nbsp;<i>значения</i>: <code>&quot;wood&quot;</code>, <code>&quot;hay&quot;</code>, <code>&quot;rock&quot;</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>&quot;wood&quot;</code>; &nbsp;&nbsp;<i>доступ</i>: read only</dt>
<dt> <b>secure</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code></dt>
<dd><p>Данный атрибут наследуется покрытием, образуемым упавшим ящиком, и гарантирует нужное поведение при воздействии огня.
</p></dd>
</dl>

</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Действие:</b> отсутствует</dt>
<dt> <b>Разновидности:</b></dt>
<dd>
<dl compact="compact">
<dt> <img src="images/st_box_wood.png" alt="images/st_box_wood"><p> <b>st_box</b>: flavor=<code>&quot;wood&quot;</code>
</p></dt>
<dt> <img src="images/st_box_wood.png" alt="images/st_box_wood"><p> <b>st_box_wood</b>: flavor=<code>&quot;wood&quot;</code>
</p></dt>
<dt> <img src="images/st_box_wood.png" alt="images/st_box_wood"><p> <b>st_box_wood_h</b>: flavor=<code>&quot;wood&quot;</code>
</p></dt>
<dt> <img src="images/st_box_wood_2.png" alt="images/st_box_wood_2"><p> <b>st_box_wood_v</b>: flavor=<code>&quot;wood&quot;</code>
</p></dt>
<dt> <img src="images/st_box_wood_growing.png" alt="images/st_box_wood_growing"><p> <b>st_box_wood_growing</b>: flavor=<code>&quot;wood&quot;</code>
</p></dt>
<dt> <img src="images/st_box_hay.png" alt="images/st_box_hay"><p> <b>st_box_hay</b>: flavor=<code>&quot;hay&quot;</code>
</p></dt>
<dt> <img src="images/st_box_hay_4.png" alt="images/st_box_hay_4"><p> <b>st_box_hay_growing</b>: flavor=<code>&quot;hay&quot;</code>
</p></dt>
<dt> <img src="images/st_box_rock.png" alt="images/st_box_rock"><p> <b>st_box_rock</b>: flavor=<code>&quot;rock&quot;</code>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="st_005fbrake"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fbox" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fbreak" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fbrake-1"></a>
<h3 class="subsection">9.5.8 st_brake</h3>
<a name="index-st_005fbrake"></a>

<p>Тормозной камень используется для того, чтобы заблокировать находящийся в движении <a href="#st_005fboulder">st_boulder</a> или <a href="#st_005flightpassenger">st_lightpassenger</a>, что, по-видимому, и дало объекту его имя. Но в отличие от всех прочих блокирующих камней, актёр может подобрать тормозной камень в виде предмета и перенести его в другое место.
</p>
<p>Когда актёр встречает на своём пути тормозной камень, перекатываясь по покрытию или находясь в прыжке, он подбирает его точно так же, как и любой другой объект. Тормоз будет добавлен в инвентарь игрока в виде объекта <a href="#it_005fbrake">it_brake</a>. В отличие от других предметов, тормоз можно поместить даже на участок решётки, уже занятый предметом. Но в отличие от <a href="#it_005fseed">it_seed</a>, его нельзя положить под другой камень.
</p>
<p>Когда игрок кладёт тормоз на покрытие, предмет немедленно превращается в <a href="#st_005fbrake">st_brake</a>, не уничтожая находящийся на том же участке другой предмет. Единственное исключение &mdash; это <a href="#it_005fblocker">it_blocker</a>, который, если на него положить тормоз, будет уничтожен. В то же время, если тормоз положить на <a href="#it_005ftrigger">it_trigger</a>, он приведёт триггер в действие, что делает его своего рода переносным переключателем для триггеров.
</p>
<p>Тормозной камень взрывается под воздействием лазерного луча либо при взрыве <a href="#it_005fbomb">it_bomb</a> на соседнем участке решётки.
</p>
<dl compact="compact">
<dt> <b>Атрибуты: </b>отсутствуют</dt>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Действие:</b> отсутствует</dt>
<dt> <b>Разновидности:</b> отсутствуют</dt>
<dd><dl compact="compact">
<dt> <img src="images/st_brake.png" alt="images/st_brake"><p> <b>st_brake</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="st_005fbreak"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fbrake" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fbrownpyramid" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fbreak-1"></a>
<h3 class="subsection">9.5.9 st_break</h3>
<a name="index-st_005fbreak"></a>

<p>Камень, который можно разбить только при выполнении определённых условий. Он существует в нескольких разновидностях. Он может быть уничтожен, к примеру, только определённым типом актёра (с помощью соответствующего предмета либо без него), сдетонировав от взрыва на соседнем участке решётки и, в большинстве случаев, посредством лазерного луча. Если не считать данного свойства, этот тип камня является стандартным. В силу существования различных разновидностей, внешний вид камня в разных случаях может существенно отличаться.
</p>
<p>Разновидность <code>&quot;plain&quot;</code> &mdash; это камень серого цвета, который может разрушить любой актёр, слева в инвентаре которого находится <a href="#it_005fhammer">it_hammer</a>. Он также разрушается под воздействием лазерного луча.
</p>
<p>Разновидности <code>&quot;black&quot;</code> и <code>&quot;white&quot;</code> похожи на <code>&quot;plain&quot;</code>, но на их вершине расположен маленький шарик, соответственно, чёрного или белого цвета. Эти камни может разбить только актёр соответствующего цвета. Конечно же, актёрам для этого также нужен <a href="#it_005fhammer">it_hammer</a>, находящийся слева в инвентаре. Лазерные лучи также могут разрушить эти разновидности камней.
</p>
<p>Разновидность <code>&quot;oxydc&quot;</code> по виду напоминает треснувший <a href="#st_005foxyd">st_oxyd</a> вида <code>&quot;c&quot;</code>. Как и в случае с разновидностью <code>&quot;plain&quot;</code>, её может разрушить любой актёр, слева в инвентаре которого имеется молоток (<a href="#it_005fhammer">it_hammer</a>), а также лазерный луч.
</p>
<p>Разновидность <code>&quot;boulder&quot;</code> &mdash; это желтоватый камень, похожий на <code>&quot;oxydc&quot;</code>. Она разрушается в тех же случаях, что и предыдущие, а также когда с ней сталкивается <a href="#st_005fboulder">st_boulder</a>.
</p>
<p>Разновидность <code>&quot;bug&quot;</code> похожа на <a href="#st_005fflat">st_flat</a> с символом &lsquo;жучка&rsquo; на вершине. Её может разрушить только <a href="#ac_005fbug">ac_bug</a>. Другие актёры, а также лазерные лучи не оказывают на неё никакого воздействия.
</p>
<p>Разновидность <code>&quot;laser&quot;</code> по виду идентична <a href="#st_005fflat">st_flat</a>. Актёры разрушить её не могут. Она разрушается только под воздействием лазерного луча, попавшего на одну из её поверхностей.
</p>
<p>Все разновидности, кроме <code>&quot;bug&quot;</code>, разрушаются, сдетонировав от объекта <a href="#it_005fdynamite">it_dynamite</a>, взорвавшегося на соседних по горизонтали и вертикали участках решётки, или бомбы чёрного цвета (<a href="#it_005fbomb">it_bomb</a>), взорвавшейся на соседних по диагонали участках.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>flavor</b> &nbsp;&nbsp;<i>значения</i>: <code>&quot;plain&quot;</code>, <code>&quot;black&quot;</code>, <code>&quot;white&quot;</code>, <code>&quot;oxydc&quot;</code>, <code>&quot;boulder&quot;</code>, <code>&quot;bug&quot;</code>, <code>&quot;laser&quot;</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>&quot;plain&quot;</code>; &nbsp;&nbsp;<i>доступ</i>: read only</dt>
</dl>

</dd>
<dt> <b>Сообщения:</b></dt>
<dd><dl compact="compact">
<dt> <b>ignite</b></dt>
<dd><p>Разрушает все разновидности камня, за исключением <code>&quot;bug&quot;</code>.
</p></dd>
</dl>

</dd>
<dt> <b>Действие:</b> отсутствует</dt>
<dt> <b>Разновидности:</b></dt>
<dd>
<dl compact="compact">
<dt> <img src="images/st_break_plain.png" alt="images/st_break_plain"><p> <b>st_break</b>: flavor=<code>&quot;plain&quot;</code>
</p></dt>
<dt> <img src="images/st_break_plain.png" alt="images/st_break_plain"><p> <b>st_break_plain</b>: flavor=<code>&quot;plain&quot;</code>
</p></dt>
<dt> <img src="images/st_break_black.png" alt="images/st_break_black"><p> <b>st_break_black</b>: flavor=<code>&quot;black&quot;</code>
</p></dt>
<dt> <img src="images/st_break_white.png" alt="images/st_break_white"><p> <b>st_break_white</b>: flavor=<code>&quot;white&quot;</code>
</p></dt>
<dt> <img src="images/st_break_oxydc.png" alt="images/st_break_oxydc"><p> <b>st_break_oxydc</b>: flavor=<code>&quot;oxydc&quot;</code>
</p></dt>
<dt> <img src="images/st_break_boulder.png" alt="images/st_break_boulder"><p> <b>st_break_boulder</b>: flavor=<code>&quot;boulder&quot;</code>
</p></dt>
<dt> <img src="images/st_break_bug.png" alt="images/st_break_bug"><p> <b>st_break_bug</b>: flavor=<code>&quot;bug&quot;</code>
</p></dt>
<dt> <img src="images/st_flat.png" alt="images/st_flat"><p> <b>st_break_laser</b>: flavor=<code>&quot;laser&quot;</code>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="st_005fbrownpyramid"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fbreak" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fchameleon" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fbrownpyramid-1"></a>
<h3 class="subsection">9.5.10 st_brownpyramid</h3>
<a name="index-st_005fbrownpyramid"></a>

<p>Серо-коричневый камень в форме пирамиды. По свойствам это стандартный камень, за исключением того, что его может разрушить пушечное ядро (<a href="#ot_005fcannonball">ot_cannonball</a>), выпущенное из пушки (<a href="#st_005fspitter">st_spitter</a>), при попадании на вершину камня.
</p>
<dl compact="compact">
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_brownpyramid.png" alt="images/st_brownpyramid"><p> <b>st_brownpyramid</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="st_005fchameleon"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fbrownpyramid" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fcharge" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fchameleon-1"></a>
<h3 class="subsection">9.5.11 st_chameleon</h3>
<a name="index-st_005fchameleon"></a>

<p>Камень, который не имеет своего особого внешнего вида, но принимает вид расположенного под ним покрытия. Таким образом, он практически невидим. Но имитируя находящийся под ним участок покрытия, он скрывает расположенные на этом участке предметы и даже актёров. Это парящий камень; следовательно, он не надавливает на <a href="#it_005ftrigger">it_trigger</a> и пропускает сквозь себя актёров и лазерные лучи.
</p>
<p>Пожалуйста, ограничьте использование этого камня в версии Enigma&nbsp;1.1, так как в настоящее время видеодвижок игры не поддерживает его должным образом. Все динамические покрытия и изменения покрытий ведут к искажениям изображения. Поэтому используйте его только в случаях, не предусматривающих динамического изменения покрытий.
</p>
<dl compact="compact">
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/fl_white.png" alt="images/fl_white"><p> <b>st_chameleon</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="st_005fcharge"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fchameleon" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fchess" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fcharge-1"></a>
<h3 class="subsection">9.5.12 st_charge</h3>
<a name="index-st_005fcharge"></a>

<p>Это своего рода &quot;зарядное устройство&quot; для актёров. На его верхней поверхности указан знак атрибута &lsquo;<samp>charge</samp>&rsquo;.
</p>
<p>Любой актёр, столкнувшись с этим камнем, изменит значение своего атрибута <a href="#charge">charge</a> на то, которое задано для данного камня.
</p>
<p>Сам камень не вызывает электромагнитных сил. Он не может ни притягивать, ни отталкивать заряженных актёров. Электромагнитные силы, воздействующие на актёров, зависят только от зарядов конкретных актёров и от глобального атрибута <a href="#ElectricStrength">ElectricStrength</a>.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>charge</b> &nbsp;&nbsp;<i>значения</i>: числа с плавающей запятой; &nbsp;&nbsp;<i>по умолчанию</i>: <code>0.0</code></dt>
<dd><p>Заряд, приобретаемый столкнувшимися с камнем актёрами.
</p></dd>
</dl>

</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Действие:</b>  отсутствует</dt>
<dt> <b>Разновидности:</b></dt>
<dd>
<dl compact="compact">
<dt> <img src="images/st_charge_zero.png" alt="images/st_charge_zero"><p> <b>st_charge</b>: charge = <code>0.0</code>
</p></dt>
<dt> <img src="images/st_charge_zero.png" alt="images/st_charge_zero"><p> <b>st_charge_zero</b>: charge = <code>0.0</code>
</p></dt>
<dt> <img src="images/st_charge_plus.png" alt="images/st_charge_plus"><p> <b>st_charge_plus</b>: charge = <code>+1.0</code>
</p></dt>
<dt> <img src="images/st_charge_minus.png" alt="images/st_charge_minus"><p> <b>st_charge_minus</b>: charge = <code>-1.0</code>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="st_005fchess"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fcharge" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fcoinslot" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fchess-1"></a>
<h3 class="subsection">9.5.13 st_chess</h3>
<a name="index-st_005fchess"></a>

<p>Конь в Enigma в основном схож с соответствующей шахматной фигурой. Он существует в двух разновидностях &mdash; чёрной и белой, он может прыгать и ходит также, как и его шахматный собрат. Он даже может бить камни в точке своего приземления.
</p>
<p>Чёрного коня можно сдвинуть только чёрным шариком, белого &mdash; только белым. Направление движения коня задаётся направлением удара. Он сдвигается на два шага в направлении, в котором обычный подвижный камень сдвинулся бы на один квадрат, плюс ещё на один шаг по вертикали. Вертикальное направление задаётся вертикальным компонентом скорости шарика.
</p>
<p>Если в точке приземления коня находится конь другого цвета либо <a href="#st_005fthief">st_thief</a>, то этот камень берётся в плен и нейтрализуется.
</p>
<p>Если до коня дотронуться объектом <a href="#it_005fmagicwand">it_magicwand</a>, находящимся слева в инвентаре, то он изменит цвет.
</p>
<p>Кони падают в <a href="#fl_005fabyss">fl_abyss</a> и тонут в <a href="#fl_005fswamp">fl_swamp</a>, но могут пересекать покрытие <a href="#fl_005fwater">fl_water</a> без вреда для себя.
</p>
<p>Если конь прыгает на объект <a href="#fl_005fthief">fl_thief</a>, он берёт в плен и нейтрализует этот объект.
</p>
<p>Кони не могут прыгать в огонь или перепрыгивать через него (см. раздел <a href="#Fire-Spreading">Распространение огня</a>). Но по крайней мере, конь достаточно отважен, чтобы не паниковать, когда под ним загорается покрытие. Обратите внимание, что пламя не может охватить участок покрытия, расположенный под конём. В этом отношении он похож на неподвижные камни. Точно так же он не реагирует на объекты <a href="#st_005fstoneimpulse">st_stoneimpulse</a> или <a href="#it_005fpuller">it_puller</a>.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>color</b> &nbsp;&nbsp;<i>значения</i>: <code>BLACK</code>, <code>WHITE</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>BLACK</code></dt>
<dd><p>Цвет камня.
</p></dd>
<dt> <b>movable</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code> &nbsp;&nbsp;См. раздел <a href="#movable">movable</a></dt>
<dd><p>Атрибут, доступный только для чтения, указывающий, является ли камень подвижным.
</p></dd>
</dl>

</dd>
<dt> <b>Сообщения:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>flip</b></dt>
<dd><p>Изменяет цвет камня.
</p></dd>
<dt> <b>move</b>, &nbsp;&nbsp;<i>тип значения</i>: position; &nbsp;&nbsp;<i>значения</i>: <code>NNE</code>, <code>NEE</code>, <code>SEE</code>, <code>SSE</code>, <code>SSW</code>, <code>SWW</code>, <code>NWW</code>, <code>NNW</code></dt>
<dd><p>Приказывает прыгать в заданном направлении.
</p></dd>
</dl>

</dd>
<dt> <b>Действие:</b>  отсутствует</dt>
<dt> <b>Разновидности:</b></dt>
<dd>
<dl compact="compact">
<dt> <img src="images/st_chess_black.png" alt="images/st_chess_black"><p> <b>st_chess</b>: color = <code>BLACK</code>
</p></dt>
<dt> <img src="images/st_chess_black.png" alt="images/st_chess_black"><p> <b>st_chess_black</b>: color = <code>BLACK</code>
</p></dt>
<dt> <img src="images/st_chess_white.png" alt="images/st_chess_white"><p> <b>st_chess_white</b>: color = <code>WHITE</code>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="st_005fcoinslot"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fchess" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fdarkglass" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fcoinslot-1"></a>
<h3 class="subsection">9.5.14 st_coinslot</h3>
<a name="index-st_005fcoinslot"></a>

<p>Переключатель, который можно привести в действие, бросив в него монету (<a href="#it_005fcoin">it_coin</a>). Только актёры, которыми непосредственно управляет игрок, могут бросать в автомат монеты из инвентаря, дотрагиваясь до автомата, когда монета находится в инвентаре слева. В зависимости от типа монеты, автомат переходит в состояние &lsquo;<samp>ON</samp>&rsquo; (&quot;включён&quot;) на определённый промежуток времени, заданный атрибутом &lsquo;<samp>interval</samp>&rsquo;, прежде чем вернуться в состояние &lsquo;<samp>OFF</samp>&rsquo; (&quot;выключен&quot;). Дополнительные монеты, брошенные в автомат, продлевают время его работы.
</p>
<p>Стандартные автоматы, у которых для атрибута &lsquo;<samp>instant</samp>&rsquo; установлено значение &lsquo;<samp>false</samp>&rsquo; , активируются после того, как туда брошена монета. Если актёр уже дотронулся до автомата, но монета ещё &quot;проглочена&quot; не до конца, дополнительную монету бросить туда нельзя. Это предохраняет от случайной потери монет. Но с другой стороны, игроку необходимо бросать дополнительные монеты заранее, чтобы автомат не выключился. Если время действия первой монеты истечёт, когда новая монета не до конца &quot;проглочена&quot; автоматом, то он временно выключится, а потом включится снова, когда монета будет им полностью &quot;проглочена&quot;.
</p>
<p>Интервал действия монеты зависит от её достоинства. Для монеты любого достоинства можно задать этот интервал с помощью одного из атрибутов &lsquo;<samp>interval_*</samp>&rsquo;. Установив в качестве значения интервала &lsquo;<samp>COIN_REJECT</samp>&rsquo;, можно отменить приём монет указанного достоинства. Монета не будет извлекаться из инвентаря игрока. Установив для атрибута интервала значение &lsquo;<samp>COIN_IGNORE</samp>&rsquo;, можно добиться того, что автомат будет принимать монету, но никак не будет реагировать на факт получения новой монеты.
</p>
<p>Если для атрибута &lsquo;<samp>instant</samp>&rsquo; установлено значение &lsquo;<samp>true</samp>&rsquo;, то автомат активируется сразу же, как только актёр до него дотронется. При каждом прикосновении актёра в монетоприемник опускается ещё одна монета, вне зависимости от того, до конца ли опущена предыдущая.
</p>
<p>Состояние автомата (атрибут &lsquo;<samp>state</samp>&rsquo;) можно запросить, но его нельзя задать ни атрибутом, ни сообщениями.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: <code>ON</code>, <code>OFF</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>OFF</code>; <i>доступ</i>: <code>read only</code>  &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dd><p>Текущее состояние автомата.
</p></dd>
<dt> <b>instant</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code></dt>
<dd><p>По умолчанию автомат срабатывает только после того, как монета была им &quot;проглочена&quot; до конца, и позволяет бросить только по одной монете за один раз.
</p></dd>
<dt> <b>interval_s</b> &nbsp;&nbsp;<i>значения</i>: положительное число, <code>COIN_REJECT</code>, <code>COIN_IGNORE</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>3.0</code></dt>
<dd><p>Дополнительное время (в секундах), которое работает автомат, если в него бросить монету наименьшего достоинства (см. раздел <a href="#it_005fcoin">it_coin</a>).
</p></dd>
<dt> <b>interval_m</b> &nbsp;&nbsp;<i>значения</i>: положительное число, <code>COIN_REJECT</code>, <code>COIN_IGNORE</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>6.0</code></dt>
<dd><p>Дополнительное время (в секундах), которое работает автомат, если в него бросить монету среднего достоинства (см. раздел <a href="#it_005fcoin">it_coin</a>).
</p></dd>
<dt> <b>interval_l</b> &nbsp;&nbsp;<i>значения</i>: положительное число, <code>COIN_REJECT</code>, <code>COIN_IGNORE</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>12.0</code></dt>
<dd><p>Дополнительное время (в секундах), которое работает автомат, если в него бросить монету наивысшего достоинства (см. раздел <a href="#it_005fcoin">it_coin</a>).
</p></dd>
</dl>

</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Действие:</b> &nbsp;&nbsp;См. раздел <a href="#target">target</a>, &nbsp;&nbsp;см. раздел <a href="#action">action</a></dt>
<dt> <b>Разновидности:</b></dt>
<dd>
<dl compact="compact">
<dt> <img src="images/st_coinslot.png" alt="images/st_coinslot"><p> <b>st_coinslot</b>: instant = <code>false</code>
</p></dt>
<dt> <img src="images/st_coinslot.png" alt="images/st_coinslot"><p> <b>st_coinslot_instant</b>: instant = <code>true</code>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="st_005fdarkglass"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fcoinslot" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fdeath" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fdarkglass-1"></a>
<h3 class="subsection">9.5.15 st_darkglass</h3>
<a name="index-st_005fdarkglass"></a>

<p>Полупрозрачный стеклянный камень с металлической оправой. Для него существуют неподвижная, подвижная и полая разновидности, лишь последняя из которых проницаема для лазера. Как и другие <a href="#Transparent-Stones">Прозрачные камни</a>, он проницаем для невидимых актёров, за исключением своей подвижной (&lsquo;<samp>movable</samp>&rsquo;) разновидности.
</p>
<p><a href="#st_005flightpassenger">st_lightpassenger</a> в состоянии &lsquo;<samp>OFF</samp>&rsquo; по виду идентичен данному камню.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>hollow</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: read only &nbsp;&nbsp;См. раздел <a href="#hollow">hollow</a></dt>
<dt> <b>movable</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: read only &nbsp;&nbsp;См. раздел <a href="#movable">movable</a></dt>
</dl>

</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_darkglass.png" alt="images/st_darkglass"><p> <b>st_darkglass</b>: hollow = <code>false</code>, movable = <code>false</code>
</p></dt>
<dt> <img src="images/st_darkglass.png" alt="images/st_darkglass"><p> <b>st_darkglass_hollow</b>: hollow = <code>true</code>, movable = <code>false</code>
</p></dt>
<dt> <img src="images/st_darkglass.png" alt="images/st_darkglass"><p> <b>st_darkglass_movable</b>: hollow = <code>false</code>, movable = <code>true</code>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="st_005fdeath"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fdarkglass" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fdisco" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fdeath-1"></a>
<h3 class="subsection">9.5.16 st_death</h3>
<a name="index-st_005fdeath"></a>

<p>Разбивает любой <a href="#ac_005fmarble">ac_marble</a> и <a href="#ac_005fpearl">ac_pearl</a>, который ударяется об него или хотя бы прикасается к нему. Только шарики и жемчужины, находящиеся под защитой активированного объекта <a href="#it_005fumbrella">it_umbrella</a>, отскочат от него невредимые, подобно другим актёрам, которые в любом случае не могут умереть.
</p>
<p>Смертоносные камни можно сделать невидимыми во время бездействия с помощью атрибута &lsquo;<samp>invisible</samp>&rsquo;. Когда к нему прикасается актёр, любой смертоносный камень на время становится видимым. Актёр, у которого в инвентаре имеются неразбитые очки <a href="#it_005fglasses">it_glasses</a> со стандартной настройкой, получает способность видеть невидимые смертоносные камни.
</p>
<p>Удалив значение &lsquo;<samp>SPOT_DEATH</samp>&rsquo;, автор уровня может настроить <a href="#it_005fglasses">it_glasses</a> таким образом, чтобы они не показывали невидимые смертоносные камни. С помощью глобального атрибута <a href="#ExtralifeGlasses">ExtralifeGlasses</a> так можно настроить даже очки, полученные с помощью лазерной трансформации из объекта <a href="#it_005fextralife">it_extralife</a>.
</p>
<p>Смертоносный камень также может быть подвижным. Конечно, шарообразные актёры не могут его передвинуть. Но другие актёры в состоянии это сделать. Подвижный смертоносный камень может быть привязан к другому подвижному камню с помощью объекта <a href="#ot_005fwire">ot_wire</a>, что позволяет им управлять. Кроме того, перемещать смертоносный камень могут любые камни, создающие импульсы, такие как <a href="#st_005fstoneimpulse">st_stoneimpulse</a>, <a href="#st_005frotator">st_rotator</a>, <a href="#st_005flightpassenger">st_lightpassenger</a>. Наконец, движущийся объект <a href="#st_005fboulder">st_boulder</a> будет толкать перед собой смертоносный камень, пока на их пути не возникнет препятствие.
</p>
<p>Подвижный смертоносный камень выглядит так же, как и статичная разновидность по умолчанию. Но время от времени он будет отображать анимацию, что позволит пользователю его идентифицировать. Периодичность отображения анимации задаётся атрибутом &lsquo;<samp>interval</samp>&rsquo;, но точная продолжительность перерывов определяется случайным образом и варьируется в диапазоне ±20% от заданного значения. При значении атрибута &lsquo;<samp>interval</samp>&rsquo;, равном нулю, анимация, выдающая подвижный смертоносный камень, будет отсутствовать. Но при наличии объекта <a href="#it_005fglasses">it_glasses</a>, имеющего в числе своих способностей &lsquo;<samp>SPOT_DEATH</samp>&rsquo;, подвижные смертоносные камни будут иметь более светлый оттенок, чем статичные.
</p>
<p>Подвижный (&lsquo;<samp>movable</samp>&rsquo;) смертоносный камень не может в то же время быть и невидимым (&lsquo;<samp>invisible</samp>&rsquo;). В случае установки обоих атрибутов второй установленный атрибут обладает приоритетом и приводит к изменению первого.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: <code>ON</code>, <code>OFF</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>OFF</code>; <i>доступ</i>: <code>read only</code>  &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dd><p>Текущее состояние смертоносного камня. Камень обычно приводится в действие прикосновением актёра.
</p></dd>
<dt> <b>invisible</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code></dt>
<dd><p>Невидимые смертоносные камни становятся видимыми, только когда к ним прикасаются актёры либо под воздействием сообщения &lsquo;<samp>toggle</samp>&rsquo;. В случае установки для данного атрибута значения &lsquo;<samp>true</samp>&rsquo; для атрибута &lsquo;<samp>movable</samp>&rsquo; автоматически устанавливается значение &lsquo;<samp>false</samp>&rsquo;.
</p></dd>
<dt> <b>movable</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;См. раздел <a href="#movable">movable</a></dt>
<dd><p>Подвижные смертоносные камни. В случае установки для данного атрибута значения &lsquo;<samp>true</samp>&rsquo; для атрибута &lsquo;<samp>invisible</samp>&rsquo; автоматически устанавливается значение &lsquo;<samp>false</samp>&rsquo;.
</p></dd>
<dt> <b>interval</b> &nbsp;&nbsp;<i>значения</i>: положительное число; &nbsp;&nbsp;<i>по умолчанию</i>: <code>10.0</code></dt>
<dd><p>Периодичность (в секундах) отображения анимации подвижных камней..
</p></dd>
</dl>

</dd>
<dt> <b>Сообщения:</b></dt>
<dd><dl compact="compact">
<dt> <b>toggle</b> &nbsp;&nbsp;См. раздел <a href="#toggle">toggle</a></dt>
<dd><p>Временно активирует камень, который показывает своё изображение, становясь видимым на этот промежуток времени.
</p></dd>
</dl>

</dd>
<dt> <b>Действие:</b> отсутствует</dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_death.png" alt="images/st_death"><p> <b>st_death</b>: invisible = <code>false</code>
</p></dt>
<dt> <img src="images/fl_white.png" alt="images/fl_white"><p> <b>st_death_invisible</b>: invisible = <code>true</code>
</p></dt>
<dt> <img src="images/st_death_light.png" alt="images/st_death_light"><p> <b>st_death_movable</b>: movable = <code>true</code>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="st_005fdisco"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fdeath" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fdispenser" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fdisco-1"></a>
<h3 class="subsection">9.5.17 st_disco</h3>
<a name="index-st_005fdisco"></a>

<p>Свободно проходимый камень, который затемняет то, что находится под ним. Он похож на затемнённое стекло и может быть нескольких оттенков. По-видимому, он так был назван в силу того, что степень его затемнения можно изменять.
</p>
<p>Существует три разновидности затемнённого камня: &lsquo;<samp>LIGHT</samp>&rsquo;, &lsquo;<samp>MEDIUM</samp>&rsquo; и &lsquo;<samp>DARK</samp>&rsquo;. Тёмный камень (&lsquo;'<samp>DARK</samp>'&rsquo;) совершенно непрозрачен, сквозь него нельзя рассмотреть ни актёров, ни предметы, ни покрытие. Вы можете переключаться между этими разновидностями при помощи сообщений и установки значений для атрибута &lsquo;<samp>state</samp>&rsquo;. Сообщения <code>&quot;lighten&quot;</code> (<code>&quot;осветлить</code>&quot;) и <code>&quot;darken&quot;</code> (<code>&quot;затемнить&quot;</code>) изменяют оттенок камня на одну ступень. Сообщение <code>&quot;signal&quot;</code> включает и выключает прозрачность камня, независимо от его предыдущего состояния. Стандартное сообщение <code>&quot;toggle&quot;</code> переключает состояния камня в следующей последовательности: light -&gt; medium -&gt; dark -&gt; light.
</p>
<p>Обратите внимание: в отличие от версий данного камня для старого API, данная версия объекта не поддерживает рекурсивное затемнение соседних камней. Используйте группы объектов (см. раздел <a href="#Object-Naming">Именование объектов</a>), чтобы затемнять произвольные группы камней одним сообщением.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: <code>LIGHT</code>, <code>MEDIUM</code>, <code>DARK</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>LIGHT</code> &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dd><p>Степень затемнения камня.
</p></dd>
</dl>

</dd>
<dt> <b>Сообщения:</b></dt>
<dd><dl compact="compact">
<dt> <b>lighten</b></dt>
<dd><p>Осветлить камень на одну ступень.
</p></dd>
<dt> <b>darken</b></dt>
<dd><p>Затемнить камень на одну ступень.
</p></dd>
<dt> <b>signal</b> &nbsp;&nbsp;См. раздел <a href="#signal">signal</a></dt>
<dd><p>Перейти в состояние &lsquo;<samp>LIGHT</samp>&rsquo; при значении <code>1</code>. Перейти в состояние &lsquo;<samp>DARK</samp>&rsquo; при значении <code>0</code>.
</p></dd>
<dt> <b>toggle</b> &nbsp;&nbsp;См. раздел <a href="#toggle">toggle</a></dt>
<dd><p>Затемнить камень на одну ступень или перейти из состояния &lsquo;<samp>DARK</samp>&rsquo; в &lsquo;<samp>LIGHT</samp>&rsquo;
</p></dd>
</dl>

</dd>
<dt> <b>Действие:</b> отсутствует</dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_disco.png" alt="images/st_disco"><p> <b>st_disco</b>: state = <code>LIGHT</code>
</p></dt>
<dt> <img src="images/st_disco.png" alt="images/st_disco"><p> <b>st_disco_light</b>: state = <code>LIGHT</code>
</p></dt>
<dt> <img src="images/st_disco_2.png" alt="images/st_disco_2"><p> <b>st_disco_medium</b>: state = <code>MEDIUM</code>
</p></dt>
<dt> <img src="images/st_disco_3.png" alt="images/st_disco_3"><p> <b>st_disco_dark</b>: state = <code>DARK</code>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="st_005fdispenser"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fdisco" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fdoor" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fdispenser-1"></a>
<h3 class="subsection">9.5.18 st_dispenser</h3>
<a name="index-st_005fdispenser"></a>

<p>Это камень, являющийся своего рода &quot;пунктом выдачи&quot; некоторых предметов.
</p>
<p>При каждом прикосновении актёра раздаточное устройство добавляет к инвентарю игрока предмет, определяемый атрибутом &lsquo;<samp>flavor</samp>&rsquo;, а именно <a href="#it_005fbomb">it_bomb</a> чёрного или белого цвета, <a href="#it_005fdynamite">it_dynamite</a> или <a href="#it_005fextralife">it_extralife</a>. Безусловно, предмет будет добавлен в инвентарь, только если там ещё осталось свободное место. Кроме того, количество предметов, которое может выдать устройство, ограничено и определяется атрибутом &lsquo;<samp>stock</samp>&rsquo;. По умолчанию в устройстве находится 1000 предметов, что в большинстве случаев будет достаточно. Но запас предметов можно ограничить до нескольких штук. Значение атрибута &lsquo;<samp>stock</samp>&rsquo; уменьшается на единицу каждый раз, когда актёр берёт предмет из устройства.
</p>
<p>Раздаточное устройство детонирует от взрывов <a href="#it_005fbomb">it_bomb</a> и других раздаточных устройств на соседних участках решётки. При этом оно само заставит сдетонировать соседние объекты <a href="#it_005fdynamite">it_dynamite</a> и расположенные под ним объекты <a href="#it_005fbomb">it_bomb</a>, а также находящиеся на соседних участках решётки другие раздаточные устройства. Под ударами актёров (даже если слева в инвентаре у них находится молоток), а также под воздействием лазера раздаточные устройства не разрушаются.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>flavor</b> &nbsp;&nbsp;<i>значения</i>: <code>&quot;bombblack&quot;</code>, <code>&quot;bombwhite&quot;</code>, <code>&quot;dynamite&quot;</code>, <code>&quot;extralife&quot;</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>&quot;bombblack&quot;</code>;</dt>
<dt> <b>stock</b>, &nbsp;&nbsp;<i>значения</i>: целые числа; &nbsp;&nbsp;<i>по умолчанию</i>: <code>1000</code>: &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
</dl>

</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Действие:</b> отсутствует</dt>
<dt> <b>Разновидности:</b></dt>
<dd>
<dl compact="compact">
<dt> <img src="images/st_dispenser_bombblack.png" alt="images/st_dispenser_bombblack"><p> <b>st_dispenser</b>: flavor=<code>&quot;bombblack&quot;</code>
</p></dt>
<dt> <img src="images/st_dispenser_bombblack.png" alt="images/st_dispenser_bombblack"><p> <b>st_dispenser_bombblack</b>: flavor=<code>&quot;bombblack&quot;</code>
</p></dt>
<dt> <img src="images/st_dispenser_bombwhite.png" alt="images/st_dispenser_bombwhite"><p> <b>st_dispenser_bombwhite</b>: flavor=<code>&quot;bombwhite&quot;</code>
</p></dt>
<dt> <img src="images/st_dispenser_dynamite.png" alt="images/st_dispenser_dynamite"><p> <b>st_dispenser_dynamite</b>: flavor=<code>&quot;dynamite&quot;</code>
</p></dt>
<dt> <img src="images/st_dispenser_extralife.png" alt="images/st_dispenser_extralife"><p> <b>st_dispenser_extralife</b>: flavor=<code>&quot;extralife&quot;</code>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="st_005fdoor"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fdispenser" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005ffake" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fdoor-1"></a>
<h3 class="subsection">9.5.19 st_door</h3>
<a name="index-st_005fdoor"></a>

<p>Двери &mdash; это камни, которые, в зависимости от своего состояния, пропускают актёров либо преграждают им путь на участок решётки. Их можно открывать и закрывать стандартным набором сообщений. Двери не могут открываться и закрываться мгновенно. Для этого им необходимо некоторое время. Актёры могут проходить только в полностью открытые двери.
</p>
<p>Существует несколько разновидностей дверей. Разновидности от <code>&quot;a&quot;</code> до <code>&quot;c&quot;</code> занимают весь участок решётки. Разновидность <code>&quot;a&quot;</code> в закрытом состоянии выглядит как <a href="#st_005foxyd">st_oxyd</a> типа <code>&quot;a&quot;</code>, а в открытом как <a href="#st_005fgrate">st_grate</a> типа <code>&quot;cross&quot;</code>. Разновидность <code>&quot;b&quot;</code> в закрытом состоянии выглядит как <a href="#st_005fflat">st_flat</a>, но при открытии образует невидимый камень, сквозь который можно свободно проходить, но который, тем не менее, занимает место на участке решётки. Разновидность <code>&quot;c&quot;</code> в закрытом состоянии выглядит как <a href="#st_005fflat">st_flat</a>, а в открытом как <a href="#st_005fgrate">st_grate</a> типа <code>&quot;framed&quot;</code>. Разновидность <code>&quot;d&quot;</code>, представляет собой дверь, которая блокирует только определённые стороны участка решётки. На данный момент поддерживается только комбинация из двух параллельных дверей (горизонтальных или вертикальных).
</p>
<p>Поскольку на участок решётки, на котором находится дверь, можно зайти со стороны, на которой двери нет, эти стороны следует заблокировать непроницаемыми камнями. Если вы этого не сделаете или, более того, допустите, чтобы шарики свободно заходили на участки решётки с дверью, актёры смогут свободно проходить даже сквозь закрытые двери. Но шарики разобьются, если они окажутся на участке решётки в момент закрытия дверей. Это поведение унаследовано от предыдущих версий Enigma.
</p>
<p>Двери &mdash; это такие камни, которые присутствуют на уровне, даже если они и не видимы в открытом состоянии (<code>OPEN</code>). Это означает, что вы не можете сдвинуть на дверь либо протолкнуть через неё другой камень. <a href="#st_005fblocker">st_blocker</a> &mdash; это вполне совместимая альтернатива двери, которая пропускает камни в открытом состоянии.
</p>
<p>Все двери расположены на некотором расстоянии от покрытия (плавают над покрытием) и не могут нажимать объекты <a href="#it_005ftrigger">it_trigger</a>. Таким образом, вы можете подавать сигнал о том, что актёр вошёл в дверь, поместив под ней триггер. Также двери не касаются и моста (<a href="#fl_005fbridge">fl_bridge</a>) и, следовательно, не оказывают на него никакого влияния.
</p>
<p>Лазерные лучи могут проходить сквозь открытую дверь, но блокируются закрытой дверью. Двери типа <code>&quot;d&quot;</code> пропускают луч, если дверные проемы расположены параллельно ему и не встают у него на пути.
</p>
<p>Двери типа <code>&quot;d&quot;</code> (и только данного типа) реагируют на стук актёра, когда находятся в закрытом состоянии. В результате они могут открыться либо выполнить какое-либо дрцгое действие. Типичной целью в данном случае являются <a href="#st_005fjamb">st_jamb</a>, которые оценивают цвет стучащего в дверь актёра.
</p>
<p>Через двери, в основном открытые (&lsquo;<samp>OPEN</samp>&rsquo;), может протекать вода (см. раздел <a href="#Flood-Spreading">Затопление покрытий</a>), или распространяться огонь (см. раздел <a href="#Fire-Spreading">Распространение огня</a>).
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: <code>OPEN</code>, <code>CLOSED</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>CLOSED</code>; &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dd><p>Определяет, открыта ли дверь или закрыта. При чтении сообщает, полностью ли открыта дверь, чтобы через неё могли проходить актёры. Следует отметить, что дверь переходит в состояние &lsquo;<samp>OPEN</samp>&rsquo; только после завершения анимации открытия, которая показывается некоторое время после отправки сообщения <code>&quot;open</code>&quot;. Однако после получения сообщения <code>&quot;close&quot;</code> дверь сразу же переходит в состояние &lsquo;<samp>CLOSED</samp>&rsquo; и блокирует передвижение актёров. При записи вызывается соответствующее сообщение, которое также приводит к задержке.
</p>
</dd>
<dt> <b>flavor</b> &nbsp;&nbsp;<i>значения</i>: <code>&quot;a&quot;</code>, <code>&quot;b&quot;</code>, <code>&quot;c&quot;</code>, <code>&quot;d&quot;</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>&quot;d&quot;</code></dt>
<dd><p>Определяет разновидность двери, как описано выше: блокирующие целую решётку <code>&quot;a&quot;</code>, <code>&quot;b&quot;</code>, <code>&quot;c&quot;</code> и блокирующая отдельные её стороны <code>&quot;d&quot;</code>.
</p>
</dd>
<dt> <b>faces</b> &nbsp;&nbsp;<i>значения</i>: string; &nbsp;&nbsp;<i>по умолчанию</i>: <code>&quot;nesw&quot;</code></dt>
<dd><p>Описывает расположение дверных проёмов. Строка является подстрокой <code>&quot;nesw&quot;</code>, перечисляющей расположение дверных проёмов. Последовательность сторон &mdash; север, восток, юг, запад &mdash; является обязательной при доступе для чтения, но произвольной при доступе для записи. Обратите внимание, что поддерживаемые комбинации зависят от типа двери. Все разновидности, кроме <code>&quot;d&quot;</code>, всегда имеют все 4 проёма. Разновидность <code>&quot;d&quot;</code> на данный момент поддерживает комбинации <code>&quot;ns&quot;</code> (по умолчанию) и <code>&quot;ew&quot;</code>, другими словами, дверные проёмы, расположенные горизонтально или вертикально.
</p>
</dd>
</dl>

</dd>
<dt> <b>Сообщения:</b></dt>
<dd><dl compact="compact">
<dt> <b>open</b> &nbsp;&nbsp;См. раздел <a href="#open">open</a></dt>
<dd><p>Открывает закрытую дверь либо останавливает процесс закрытия двери.
</p></dd>
<dt> <b>close</b> &nbsp;&nbsp;См. раздел <a href="#close">close</a></dt>
<dd><p>Закрывает открытую дверь либо останавливает процесс открытия двери.
</p></dd>
<dt> <b>signal</b> &nbsp;&nbsp;См. раздел <a href="#signal">signal</a></dt>
<dd><p>При значении &lsquo;<samp>1</samp>&rsquo; открывает дверь, при значении &lsquo;<samp>0</samp>&rsquo; &mdash; закрывает.
</p></dd>
</dl>

</dd>
<dt> <b>Действие:</b></dt>
<dd><p>Только двери типа <code>&quot;d&quot;</code> выполнят действие, если актёр прикоснётся к закрытой двери. Значением действия будет объект-актёр, вид которого может быть обработан. Это значение действия соответствует таким сообщениям, как &lsquo;<samp>hit</samp>&rsquo; объектов <a href="#st_005fjamb">st_jamb</a> и им подобных.
</p>
</dd>
<dt> <b>Разновидности:</b></dt>
<dd><table>
<tr><td width="8%"><img src="images/st_oxyda.png" alt="images/st_oxyda"></td><td width="42%"><b>st_door_a</b>: flavor = <code>&quot;a&quot;</code>, state = <code>CLOSED</code></td><td width="8%"><img src="images/st_grate_cross.png" alt="images/st_grate_cross"></td><td width="42%"><b>st_door_a</b>: flavor = <code>&quot;a&quot;</code>, state = <code>OPEN</code></td></tr>
<tr><td width="8%"><img src="images/st_flat.png" alt="images/st_flat"></td><td width="42%"><b>st_door_b</b>: flavor = <code>&quot;b&quot;</code>, state = <code>CLOSED</code></td><td width="8%"><img src="images/fl_white.png" alt="images/fl_white"></td><td width="42%"><b>st_door_b</b>: flavor = <code>&quot;b&quot;</code>, state = <code>OPEN</code></td></tr>
<tr><td width="8%"><img src="images/st_flat.png" alt="images/st_flat"></td><td width="42%"><b>st_door_c</b>: flavor = <code>&quot;c&quot;</code>, state = <code>CLOSED</code></td><td width="8%"><img src="images/st_grate_framed.png" alt="images/st_grate_framed"></td><td width="42%"><b>st_door_c</b>: flavor = <code>&quot;c&quot;</code>, state = <code>OPEN</code></td></tr>
<tr><td width="8%"><img src="images/st_door_d_ns_7.png" alt="images/st_door_d_ns_7"></td><td width="42%"><b>st_door_d</b>: flavor = <code>&quot;d&quot;</code>, faces = <code>&quot;ns&quot;</code>, state = <code>CLOSED</code></td><td width="8%"><img src="images/st_door_d_ns.png" alt="images/st_door_d_ns"></td><td width="42%"><b>st_door_d</b>: flavor = <code>&quot;d&quot;</code>, faces = <code>&quot;ns&quot;</code>, state = <code>OPEN</code></td></tr>
<tr><td width="8%"><img src="images/st_door_d_ew_g.png" alt="images/st_door_d_ew_g"></td><td width="42%"><b>st_door_d</b>: flavor = <code>&quot;d&quot;</code>, faces = <code>&quot;ew&quot;</code>, state = <code>CLOSED</code></td><td width="8%"><img src="images/st_door_d_ew.png" alt="images/st_door_d_ew"></td><td width="42%"><b>st_door_d</b>: flavor = <code>&quot;d&quot;</code>, faces = <code>&quot;ew&quot;</code>, state = <code>OPEN</code></td></tr>
</table>

</dd>
</dl>

<hr size="6">
<a name="st_005ffake"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fdoor" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fflash" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005ffake-1"></a>
<h3 class="subsection">9.5.20 st_fake</h3>
<a name="index-st_005ffake"></a>

<p>Это камень, который имитирует внешний вид других камней, но отличается от них своими свойствами.
</p>
<p>В отличие от <a href="#st_005fmagic">st_magic</a>, камень-подделка ни во что не превращается, принимая только внешний вид камня, под который он мимикрирует. Внешний вид камня (то есть, камень, под который камень-подделка мимикрирует) определяется атрибутом &lsquo;<samp>flavor</samp>&rsquo;. Камень-подделка может даже имитировать определяемое конкретным состоянием поведение, наряду с зависящими от этого состояния моделями и анимацией.
</p>
<p>Разновидность <code>&quot;quake&quot;</code> имитирует <a href="#st_005fquake">st_quake</a>, включая пульсирующую анимацию при прикосновениях актёра и изменениях состояния, но, в отличие от него, не закрывает <a href="#st_005foxyd">st_oxyd</a>.
</p>
<p>Разновидности <code>&quot;oxyda&quot;</code>, <code>&quot;oxydb&quot;</code>, <code>&quot;oxydc&quot;</code>, <code>&quot;oxydd&quot;</code>, <code>&quot;oxyde&quot;</code> имитируют соответствующие разновидности <a href="#st_005foxyd">st_oxyd</a>, но по свойствам &mdash; это обычные камни. Тем не менее, у них также есть состояние &lsquo;<samp>OPEN</samp>&rsquo;, при котором они имитируют вид открытого оксида, естественно, без цветного символа.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>flavor</b> &nbsp;&nbsp;<i>значения</i>: <code>&quot;quake&quot;</code>, <code>&quot;oxyda&quot;</code>, <code>&quot;oxydb&quot;</code>, <code>&quot;oxydc&quot;</code>, <code>&quot;oxydd&quot;</code>, <code>&quot;oxyde&quot;</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>&quot;quake&quot;</code>;</dt>
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: <code>CLOSED</code>, <code>OPEN</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>CLOSED</code>: &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
</dl>

</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Действие:</b> отсутствует</dt>
<dt> <b>Разновидности:</b></dt>
<dd><table>
<tr><td width="8%"><img src="images/st_oxydb.png" alt="images/st_oxydb"> <b>st_fake_quake</b>: flavor=<code>&quot;quake&quot;</code>, state=<code>IDLE</code></td><td width="42%"><img src="images/st_quake_3.png" alt="images/st_quake_3"> <b>st_fake_quake</b>: flavor=<code>&quot;quake&quot;</code>, state=<code>ACTIVE</code></td></tr>
<tr><td width="8%"><img src="images/st_oxyda.png" alt="images/st_oxyda"> <b>st_fake_oxyda</b>: flavor=<code>&quot;oxyda&quot;</code>, state=<code>CLOSED</code></td><td width="42%"><img src="images/st_oxyda_open.png" alt="images/st_oxyda_open"> <b>st_fake_oxyda</b>: flavor=<code>&quot;oxyda&quot;</code>, state=<code>OPEN</code></td></tr>
<tr><td width="8%"><img src="images/st_oxydb.png" alt="images/st_oxydb"> <b>st_fake_oxydb</b>: flavor=<code>&quot;oxydb&quot;</code>, state=<code>CLOSED</code></td><td width="42%"><img src="images/st_oxydb_open.png" alt="images/st_oxydb_open"> <b>st_fake_oxydb</b>: flavor=<code>&quot;oxydb&quot;</code>, state=<code>OPEN</code></td></tr>
<tr><td width="8%"><img src="images/st_oxydc.png" alt="images/st_oxydc"> <b>st_fake_oxydc</b>: flavor=<code>&quot;oxydc&quot;</code>, state=<code>CLOSED</code></td><td width="42%"><img src="images/st_oxydc_open.png" alt="images/st_oxydc_open"> <b>st_fake_oxydc</b>: flavor=<code>&quot;oxydc&quot;</code>, state=<code>OPEN</code></td></tr>
<tr><td width="8%"><img src="images/st_oxydd.png" alt="images/st_oxydd"> <b>st_fake_oxydd</b>: flavor=<code>&quot;oxydd&quot;</code>, state=<code>CLOSED</code></td><td width="42%"><img src="images/st_oxydb_open.png" alt="images/st_oxydb_open"> <b>st_fake_oxydd</b>: flavor=<code>&quot;oxydd&quot;</code>, state=<code>OPEN</code></td></tr>
<tr><td width="8%"><img src="images/st_oxydb.png" alt="images/st_oxydb"> <b>st_fake_oxyde</b>: flavor=<code>&quot;oxyde&quot;</code>, state=<code>CLOSED</code></td><td width="42%"><img src="images/st_oxydb_open.png" alt="images/st_oxydb_open"> <b>st_fake_oxyde</b>: flavor=<code>&quot;oxyde&quot;</code>, state=<code>OPEN</code></td></tr>
</table>

</dd>
</dl>

<hr size="6">
<a name="st_005fflash"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005ffake" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fflat" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fflash-1"></a>
<h3 class="subsection">9.5.21 st_flash</h3>
<a name="index-st_005fflash"></a>

<p>Камень с изображённым на нём символом молнии, который перенаправляет применяемую к нему силу ударов актёра на другого актёра.
</p>
<p>В этом взаимодействии могут участвовать только шарики (<a href="#ac_005fmarble">ac_marble</a>). Чёрный шарик, ударив по камню, толкнёт первый белый шарик, и наоборот. При этом скорость шарика, ударившего камень, умножается на матрицу искажения, заданную четырьмя отдельными атрибутами. Матрица, заданная по умолчанию, сохраняет первоначальное направление. Получившийся в результате вектор умножается на линейный множитель силы. Получившийся вектор силы воздействует на второй шарик. Если второй шарик отсутствует, то сила не применяется. Шарик, ударившийся о камень-молнию, отскакивает от него, как и от любого другого камня.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>hit_strength</b> &nbsp;&nbsp;<i>значения</i>: числа с плавающей запятой; &nbsp;&nbsp;<i>по умолчанию:</i> <code>20.0</code>; &nbsp;&nbsp;См. раздел <a href="#hit_005f_002a">hit_*</a></dt>
<dt> <b>hit_distortion_xx</b> &nbsp;&nbsp;<i>значения</i>: числа с плавающей запятой; &nbsp;&nbsp;<i>по умолчанию:</i> <code>1.0</code>; &nbsp;&nbsp;См. раздел <a href="#hit_005f_002a">hit_*</a></dt>
<dt> <b>hit_distortion_xy</b> &nbsp;&nbsp;<i>значения</i>: числа с плавающей запятой; &nbsp;&nbsp;<i>по умолчанию</i>: <code>0.0</code> &nbsp;&nbsp;См. раздел <a href="#hit_005f_002a">hit_*</a></dt>
<dt> <b>hit_distortion_yx</b> &nbsp;&nbsp;<i>значения</i>: числа с плавающей запятой; &nbsp;&nbsp;<i>по умолчанию</i>: <code>0.0</code> &nbsp;&nbsp;См. раздел <a href="#hit_005f_002a">hit_*</a></dt>
<dt> <b>hit_distortion_yy</b> &nbsp;&nbsp;<i>значения</i>: числа с плавающей запятой; &nbsp;&nbsp;<i>по умолчанию</i>: <code>1.0</code>; &nbsp;&nbsp;См. раздел <a href="#hit_005f_002a">hit_*</a></dt>
</dl>

</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Действие:</b>  отсутствует</dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_flash.png" alt="images/st_flash"><p> <b>st_flash</b>:
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="st_005fflat"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fflash" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005ffloppy" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fflat-1"></a>
<h3 class="subsection">9.5.22 st_flat</h3>
<a name="index-st_005fflat"></a>

<p>Плоский гипсовый камень с целым рядом свойств и разновидностей.
</p>
<p>Помимо типичных свойств подвижных, полых или бьющихся камней, плоский камень обладает некоторыми совершенно особыми свойствами и способностями к трансформации.
</p>
<p>Подвижные и бьющиеся плоские камни падают в пропасть <a href="#fl_005fabyss">fl_abyss</a>. Но только подвижная разновидность может затонуть в воде (<a href="#fl_005fwater">fl_water</a>) и болоте (<a href="#fl_005fswamp">fl_swamp</a>).
</p>
<p>Лазерный луч разрушает бьющуюся разновидность данного камня. Кроме того, он заставляет обычный плоский камень (и только эту разновидность) трескаться. Но дальнейшее воздействие лазера вреда камню не наносит. Возгорания и взрывы разрушают бьющуюся, потрескавшуюся и подвижную разновидности камня. Актёр, слева в инвентаре которого имеется молоток (<a href="#it_005fhammer">it_hammer</a>), может разрушить как бьющуюся, так и потрескавшуюся разновидности. Обратите внимание, что визуально неотличимые от данного камня объекты <a href="#st_005fbreak">st_break</a>_laser также разрушаются под воздействием лазера, но не могут быть уничтожены актёрами.
</p>
<p>Актёр, слева в инвентаре которого находится <a href="#it_005fpencil">it_pencil</a>, может пометить камень стандартной или подвижной разновидности как воспламеняющийся, на что указывает символическое изображение пламени на поверхности камня. Воспламеняющиеся плоские камни горят в огне, но только неподвижная воспламеняющаяся разновидность саморазрушается под его воздействием. Все воспламеняющиеся камни можно очистить с помощью щётки (<a href="#it_005fbrush">it_brush</a>), которая должна находиться слева в инвентаре игрока. В этом случае символ пламени исчезает и камень больше не реагирует на огонь либо идущий от огня жар.
</p>
<p>Важным свойством плоского камня является то, что <a href="#st_005fboulder">st_boulder</a>, столкнувшийся с его стандартной или полой разновидностью, дважды изменяет значение атрибута &lsquo;<samp>hollow</samp>&rsquo; в течение короткого промежутка времени. Этого времени достаточно для проворного актёра, чтобы пройти сквозь стандартный плоский камень, непроницаемый в других случаях. Вовремя изменив направление болдера, игрок может добиться того, чтобы камень остался полым.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>hollow</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: read only &nbsp;&nbsp;См. раздел <a href="#hollow">hollow</a></dt>
<dt> <b>movable</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: read only &nbsp;&nbsp;См. раздел <a href="#movable">movable</a></dt>
<dt> <b>breakable</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: read only &nbsp;&nbsp;См. раздел <a href="#breakable">breakable</a></dt>
<dt> <b>burnable</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: read only &nbsp;&nbsp;См. раздел <a href="#burnable">burnable</a></dt>
</dl>

</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Действие:</b> отсутствует</dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_flat.png" alt="images/st_flat"><p> <b>st_flat</b>:
</p></dt>
<dt> <img src="images/st_flat.png" alt="images/st_flat"><p> <b>st_flat_hollow</b>: hollow=<code>true</code>
</p></dt>
<dt> <img src="images/st_flat.png" alt="images/st_flat"><p> <b>st_flat_movable</b>: movable=<code>&quot;true&quot;</code>
</p></dt>
<dt> <img src="images/st_flat.png" alt="images/st_flat"><p> <b>st_flat_breakable</b>: breakable=<code>&quot;true&quot;</code>
</p></dt>
<dt> <img src="images/st_flat_cracked.png" alt="images/st_flat_cracked"><p> <b>st_flat_cracked</b>:
</p></dt>
<dt> <img src="images/st_flat_fire.png" alt="images/st_flat_fire"><p> <b>st_flat_burnable</b>: burnable=<code>&quot;true&quot;</code>
</p></dt>
<dt> <img src="images/st_flat_fire.png" alt="images/st_flat_fire"><p> <b>st_flat_moveburnable</b>: movable=<code>&quot;true&quot;</code>, burnable=<code>&quot;true&quot;</code>
</p></dt>
<dt> <img src="images/st_flat_break.png" alt="images/st_flat_break"><p> <b>st_flat_breaking</b>: breakable=<code>&quot;true&quot;</code>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="st_005ffloppy"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fflat" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005ffourswitch" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005ffloppy-1"></a>
<h3 class="subsection">9.5.23 st_floppy</h3>
<a name="index-st_005ffloppy"></a>

<p>Переключатель, который можно привести в действие при помощи дискеты (<a href="#it_005ffloppy">it_floppy</a>). Только актёры, непосредственно управляемые игроком, могут вставить дискету в дисковод, дотронувшись до дисковода, когда дискета находится у них слева в инвентаре.
</p>
<p>При повторном касании переключатель деактивируется, а дискета возвращается в инвентарь игрока.
</p>
<p>Дисководы часто используются для открытия ближайших объектов <a href="#st_005fdoor">st_door</a>, объявленных в качестве их целей (&lsquo;<samp>target</samp>&rsquo;). Но существует опасность того, что актёр, проходящий через дверной проём, случайно заденет соседний дисковод и вынет дискету, при этом дверь сразу же закроется. Конечно же, актёры <a href="#ac_005fmarble">ac_marble</a> или <a href="#ac_005fpearl">ac_pearl</a> будут уничтожены. Но если для дисковода был установлен атрибут &lsquo;<samp>secure</samp>&rsquo;, дисковод будет проверять, не находится ли коснувшийся его актёр на одной из позиций, определённых в качестве целей дисковода. В таком случае никаких действий дисковод выполнять не будет. Обратите внимание, что в случаях, когда целью является функция вызова, которая закрывает соседнюю дверь, защита предоставляться не будет. Дисковод, для атрибута &lsquo;<samp>secure</samp>&rsquo; которого установлено значение &lsquo;<samp>false</samp>&rsquo;, будет реагировать на любые удары, даже если результатом будет гибель актёра, как это было в ранних версиях Enigma и всё ещё происходит в режимах игры, кроме режима Enigma.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: <code>ON</code>, <code>OFF</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>OFF</code>; &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dd><p>Текущее состояние дисковода.
</p></dd>
<dt> <b>secure</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code></dt>
<dd><p>Защищает актёров на целевых позициях, игнорируя их удары.
</p></dd>
</dl>

</dd>
<dt> <b>Сообщения:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>signal</b> &nbsp;&nbsp;См. раздел <a href="#signal">signal</a></dt>
<dd><p>Включает дисковод, если задано значение &lsquo;<samp>1</samp>&rsquo;, и выключает, если задано значение &lsquo;<samp>0</samp>&rsquo;.
</p></dd>
<dt> <b>on</b> &nbsp;&nbsp;См. раздел <a href="#on">on</a></dt>
<dt> <b>off</b> &nbsp;&nbsp;См. раздел <a href="#off">off</a></dt>
</dl>

</dd>
<dt> <b>Действие:</b> &nbsp;&nbsp;См. раздел <a href="#target">target</a>, &nbsp;&nbsp;см. раздел <a href="#action">action</a></dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_floppy_off.png" alt="images/st_floppy_off"><p> <b>st_floppy</b> with state=<code>OFF</code>
</p></dt>
<dt> <img src="images/st_floppy_on.png" alt="images/st_floppy_on"><p> <b>st_floppy</b> with state=<code>ON</code>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="st_005ffourswitch"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005ffloppy" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fghost" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005ffourswitch-1"></a>
<h3 class="subsection">9.5.24 st_fourswitch</h3>
<a name="index-st_005ffourswitch"></a>

<p>Это переключатель, в каждый момент времени указывающий в одном из четырёх направлений и поворачивающийся при каждом переключении. Самая типичная ситуация, в которой объект переключается &mdash; это когда его касается актёр. Но <a href="#st_005fboulder">st_boulder</a> также может привести его в действие. Безусловно, прочие объекты могут посылать сообщения о действиях, чередующие состояния переключателя.
</p>
<p>При повороте указателя переключатель выполняет действие, заданное парой &lsquo;<samp>action/targe</samp>t&rsquo;. Это может быть либо обычная пара, либо пара, зависимая от состояния/направления, что позволяет отправлять различные сообщения в зависимости от направления указателя.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dd><a name="index-state"></a>
</dd>
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: <code>NORTH</code>, <code>EAST</code>, <code>SOUTH</code>, <code>WEST</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>NORTH</code> &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dt> <b>counterclock</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code></dt>
<dd><p>По умолчанию объект поворачивается по часовой стрелке. Используйте данный атрибут, чтобы изменить направление вращения.
</p></dd>
<dt> <b>inverse</b> &nbsp;&nbsp;См. раздел <a href="#inverse">inverse</a></dt>
<dd><p>Обратите внимание, что значение действия является противоположным в булевом понимании данного слова. Это означает, что противоположное значение действия &mdash; это не то же самое, что  противоположное направление, и его не следует использовать как значение направления.
</p></dd>
</dl>

</dd>
<dt> <b>Сообщения:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>signal</b> &nbsp;&nbsp;См. раздел <a href="#signal">signal</a></dt>
<dd><p>Обратите внимание, что переключатель реагирует только на значение <code>1</code>. Значение <code>0</code> просто игнорируется. Используйте сообщение toggle, если необходимо чередовать значение сообщения.
</p></dd>
<dt> <b>toggle</b> &nbsp;&nbsp;См. раздел <a href="#toggle">toggle</a></dt>
<dd><p>Обратите внимание, что данное сообщение поворачивает переключатель независимо от значения сообщения.
</p></dd>
</dl>

</dd>
<dt> <b>Действие:</b> &nbsp;&nbsp;См. раздел <a href="#target">target</a>, &nbsp;&nbsp;см. раздел <a href="#action">action</a></dt>
<dd><p>Выполняет действие при каждом повороте. Если задана только пара глобальных атрибутов &lsquo;<samp>target/action</samp>&rsquo;, то сообщение о действии посылается цели вместе со значением нового направления переключателя. Это значение подходит для любого сообщения для цели, которое требует значения направления, а также для сообщения signal, которое переводит значение направления в 1 для &lsquo;<samp>NORTH</samp>&rsquo;, &lsquo;<samp>SOUTH</samp>&rsquo; и 0 для &lsquo;<samp>EAST</samp>&rsquo;, &lsquo;<samp>WEST</samp>&rsquo;.
</p>
<p>Если вместо этого заданы зависимые от состояния пары цели/действия, а именно &lsquo;<samp>target_0/action_0</samp>&rsquo; для состояния &lsquo;<samp>WEST</samp>&rsquo;,... , &lsquo;<samp>target_3/action_3</samp>&rsquo; для состояния &lsquo;<samp>NORTH</samp>&rsquo;, будут выполняться два действия: сначала для состояния, соответствующего предыдущему направлению, будет отправлено сообщение о действии со значением 0, затем для состояния, соответствующего новому направлению, будет отправлено сообщение о действии со значением 1. Это позволяет включать и выключать альтернативные источники с помощью четырёхнаправленного переключателя.
</p>
</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_fourswitch.png" alt="images/st_fourswitch"><p> <b>st_fourswitch</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="st_005fghost"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005ffourswitch" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fgrate" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fghost-1"></a>
<h3 class="subsection">9.5.25 st_ghost</h3>
<a name="index-st_005fghost"></a>

<p>Это невидимый камень, который становится видимым, когда к нему прикасается актёр, слева в инвентаре которого находятся нужные инструменты.
</p>
<p>Подобно объекту <a href="#st_005fmagic">st_magic</a>, этот камень превращается в другие типы камней, но поначалу он всегда невидим, что и дало этому камню его имя. Но невидимость не означает проницаемости для лазера. Одна из разновидностей камней-призраков для лазера непроницаема. Также, тот факт, что камень является невидимым, не означает, что сквозь него могут проходить невидимые актёры (см. раздел <a href="#Transparent-Stones">Прозрачные камни</a>).
</p>
<p>Камень-призрак превращается в другой тип камня, заданный атрибутом &lsquo;<samp>flavor</samp>&rsquo;. Инструмент, необходимый для осуществления такой трансформации, также определяется этим атрибутом.
</p>
<p>Разновидность <code>&quot;purplemarble&quot;</code> превращается в <a href="#st_005fpurplemarble">st_purplemarble</a>, если до неё дотронуться щёткой (<a href="#it_005fbrush">it_brush</a>). Этот тип камня непроницаем для лазера.
</p>
<p>Разновидность <code>&quot;greenbrown&quot;</code> превращается в <a href="#st_005fgreenbrown">st_greenbrown</a>, если до неё дотронуться волшебной палочкой (<a href="#it_005fmagicwand">it_magicwand</a>).
</p>
<p>Разновидность <code>&quot;break&quot;</code> превращается в разновидность &lsquo;<samp>st_break_oxydc</samp>&rsquo; камня <a href="#st_005fbreak">st_break</a>, если до неё дотронуться щёткой (<a href="#it_005fbrush">it_brush</a>).
</p>

<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>flavor</b> &nbsp;&nbsp;<i>значения</i>: <code>&quot;purplemarble&quot;</code>, <code>&quot;greenbrown&quot;</code>, <code>&quot;break&quot;</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>&quot;purplemarble&quot;</code>; &nbsp;&nbsp;<i>доступ</i>: read only</dt>
</dl>

</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Действие:</b> отсутствует</dt>
<dt> <b>Разновидности:</b></dt>
<dd><table>
<tr><td width="8%"><img src="images/fl_white.png" alt="images/fl_white"></td><td width="52%"><b>st_ghost</b>: flavor=<code>&quot;purplemarble&quot;</code></td><td width="40%"><img src="images/st_purplemarble.png" alt="images/st_purplemarble"></td></tr>
<tr><td width="8%"><img src="images/fl_white.png" alt="images/fl_white"></td><td width="52%"><b>st_ghost_purplemarble</b>: flavor=<code>&quot;purplemarble&quot;</code></td><td width="40%"><img src="images/st_purplemarble.png" alt="images/st_purplemarble"></td></tr>
<tr><td width="8%"><img src="images/fl_white.png" alt="images/fl_white"></td><td width="52%"><b>st_ghost_greenbrown</b>: flavor=<code>&quot;greenbrown&quot;</code></td><td width="40%"><img src="images/st_greenbrown.png" alt="images/st_greenbrown"></td></tr>
<tr><td width="8%"><img src="images/fl_white.png" alt="images/fl_white"></td><td width="52%"><b>st_ghost_break</b>: flavor=<code>&quot;break&quot;</code></td><td width="40%"><img src="images/st_break_plain.png" alt="images/st_break_plain"></td></tr>
</table>
</dd>
</dl>

<hr size="6">
<a name="st_005fgrate"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fghost" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fgreenbrown" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fgrate-1"></a>
<h3 class="subsection">9.5.26 st_grate</h3>
<a name="index-st_005fgrate"></a>

<p>Это парящая над покрытием металлическая решётка, которая свободно пропускает сквозь себя актёров, но не даёт сдвинуть камень на участок покрытия, на котором она расположена. Она существует в нескольких разновидностях.
</p>
<p>Различные разновидности не отличаются друг от друга своими свойствами, но разновидность <code>&quot;cross&quot;</code> выглядит точно так же, как и открытая дверь (<a href="#st_005fdoor">st_door</a>) вида <code>&quot;a&quot;</code>, в то время как разновидность <code>&quot;framed&quot;</code> похожа на открытую дверь (<a href="#st_005fdoor">st_door</a>) вида <code>&quot;b&quot;</code>.
</p>
<p>В отличие от открытых дверей, если находящийся в прыжке актёр столкнётся с решёткой, он отскочит от неё.
</p>
<p>Будучи парящими камнями, решётки не могут надавливать на триггеры (<a href="#it_005ftrigger">it_trigger</a>) и пропускают сквозь себя лазерные лучи. Решётки также не препятствуют затоплению покрытия и распространению огня (см. разделы <a href="#Flood-Spreading">Распространение воды</a> и <a href="#Fire-Spreading">Распространение огня</a>).
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>flavor</b> &nbsp;&nbsp;<i>значения</i>: <code>&quot;cross&quot;</code>, <code>&quot;framed&quot;</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>&quot;cross&quot;</code></dt>
</dl>

</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Действие:</b> отсутствует</dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_grate_cross.png" alt="images/st_grate_cross"><p> <b>st_grate</b>: flavor=<code>&quot;cross&quot;</code>
</p></dt>
<dt> <img src="images/st_grate_cross.png" alt="images/st_grate_cross"><p> <b>st_grate_cross</b>: flavor=<code>&quot;cross&quot;</code>
</p></dt>
<dt> <img src="images/st_grate_framed.png" alt="images/st_grate_framed"><p> <b>st_grate_framed</b>: flavor=<code>&quot;framed&quot;</code>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="st_005fgreenbrown"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fgrate" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fice" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fgreenbrown-1"></a>
<h3 class="subsection">9.5.27 st_greenbrown</h3>
<a name="index-st_005fgreenbrown"></a>

<p>Камень преимущественно коричневого цвета, который по свойствам является стандартным камнем, если не считать того, что его появление может быть результатом трансформации двух других объектов.
</p>
<p>Во-первых, объект <a href="#it_005fseed">it_seed</a> вида <code>&quot;fake&quot;</code> вырастает в стандартный неподвижный коричнево-зелёный камень. В соответствии с принципом снимка (см. раздел <a href="#Snapshot-Principle">Принцип снимка</a>), для инициализации уровня можно даже создать разновидность &lsquo;<samp>st_greenbrown_growing</samp>&rsquo;.
</p>
<p>Во-вторых, объект <a href="#st_005fghost">st_ghost</a> вида <code>&quot;greenbrown&quot;</code> превращается в стандартный неподвижный коричнево-зелёный камень, если до него дотронуться волшебной палочкой (<a href="#it_005fmagicwand">it_magicwand</a>).
</p>
<dl compact="compact">
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_greenbrown.png" alt="images/st_greenbrown"><p> <b>st_greenbrown</b>
</p></dt>
<dt> <img src="images/st_greenbrown.png" alt="images/st_greenbrown"><p> <b>st_greenbrown_hollow</b>
</p></dt>
<dt> <img src="images/st_greenbrown.png" alt="images/st_greenbrown"><p> <b>st_greenbrown_movable</b>
</p></dt>
<dt> <img src="images/st_greenbrown_4.png" alt="images/st_greenbrown_4"><p> <b>st_greenbrown_growing</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="st_005fice"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fgreenbrown" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fjamb" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fice-1"></a>
<h3 class="subsection">9.5.28 st_ice</h3>
<a name="index-st_005fice"></a>

<p>Это ледяной подвижный куб, который способен замораживать некоторые предметы, если они оказываются у него на пути. Такое покрытие как <a href="#fl_005fwater">fl_water</a>, естественно, тоже замёрзнет, если на него сдвинуть лёд. Но ледяной куб можно разрушить с помощью взрыва или огня; в таком случае он оставит после себя <a href="#fl_005fice">fl_ice</a> или <a href="#fl_005fwater">fl_water</a>.
</p>
<p>Если ледяной куб, под которым ещё нет замороженного предмета, сдвинуть на участок решётки, на котором имеется замораживаемый предмет (см. раздел <a href="#freezable">freezable</a>), то лёд заморозит этот предмет и при последующих перемещениях потащит его за собой. Все предметы, которые игрок может носить с собой в инвентаре, поддаются заморозке (см. раздел <a href="#freezable">freezable</a>), равно как и некоторые <a href="#Static-Items">Статичные предметы</a> (<a href="#it_005fmagnet">it_magnet</a>, <a href="#it_005fspringboard">it_springboard</a>, и др.). Но некоторые предметы, если на них сдвинуть ледяной куб, реагируют особым образом:
</p><ul>
<li> <a href="#it_005fsquashed">it_squashed</a> и <a href="#it_005fburnable">it_burnable</a>, за исключением разновидности &lsquo;<samp>it_burnable_oil</samp>&rsquo;, полностью исчезают;
</li><li> <a href="#it_005fcrack">it_crack</a> исчезает, так как лёд в игре служит для потрескавшихся покрытий своего рода замазкой
</li><li> <a href="#it_005fseed">it_seed</a> не будет прорастать, хотя ледяной куб сдвигается на него, как и любой другой непроницаемый камень;
</li><li> <a href="#it_005fbomb">it_bomb</a> взорвётся и разрушит ледяной куб, а также покрытие под ним;
</li><li> <a href="#it_005fdynamite">it_dynamite</a> ведёт себя совершенно особым образом: если ледяной куб сдвинуть на него, то горящий динамит погаснет и замёрзнет в состоянии покоя.
</li></ul>

<p>Но что же происходит, если ледяной куб, под которым уже находится замороженный предмет, сдвинуть на участок решётки, на котором находится другой предмет? Более &quot;сильный&quot; предмет одержит верх и выживет подо льдом, в то время как более &quot;слабый&quot; будет уничтожен. Соотношение сил между предметами (от слабых к сильным) выглядит очень просто:
</p><ul>
<li> статичные предметы, которые ледяной куб в любом случае уничтожает;
</li><li> <a href="#Liftable-Items">переносные предметы</a>
</li><li> <a href="#portable">портативные </a> предметы , которые не являются <a href="#liftable">переносными </a>;
</li><li> <a href="#freezable">замораживаемые</a> предметы , которые не являются <a href="#portable">портативными</a>;
</li><li> <a href="#Static-Items">статичные</a> предметы , которые не являются <a href="#freezable">замораживаемыми</a>.
</li></ul>
<p>Когда два предмета принадлежат одной и той же категории, приоритетом обладает тот предмет, который уже был к тому времени заморожен. Это правило позволяет гарантировать, что игрок не сможет освободить замороженный предмет, вынув из своего инвентаря переносной предмет и столкнув на него ледяной куб.
</p>
<p>Ледяной куб по виду напоминает голубоватую разновидность <a href="#st_005frawglass">st_rawglass</a>. Но у них есть только одна общая черта: они оба проницаемы для лазера. Конечно же, лазерные лучи заморозить нельзя, хоть они и реализованы в слое предметов. Лазерный луч будет взаимодействовать даже с замороженными предметами и может взорвать объекты <a href="#it_005fdynamite">it_dynamite</a> или <a href="#it_005fbomb">it_bomb</a>. Хотя лёд и проницаем для лазера, невидимые актёры не могут проходить сквозь него (см. раздел <a href="#Transparent-Stones">Прозрачные камни</a>).
</p>
<p>Лёд разрушается под воздействием взрывов <a href="#it_005fbomb">it_bomb</a> и <a href="#it_005fdynamite">it_dynamite</a>, а также при попадании в него пушечного ядра (<a href="#ot_005fcannonball">ot_cannonball</a>). Осколки разлетятся на четыре соседних участка решётки, покрыв их, равно как и участок, на котором находился куб, слоем льда (<a href="#fl_005fice">fl_ice</a>). Только пропасть <a href="#fl_005fabyss">fl_abyss</a> не может быть покрыта льдом и, следовательно, не подвергается при этом изменениям. Таким образом, взорвавшаяся бомба оставляет после себя <a href="#fl_005fabyss">fl_abyss</a>, даже если рядом разбивается вдребезги ледяной куб.
</p>
<p>Огонь, начавший гореть на соседнем участке решётки, в конце концов растопит лёд (см. раздел <a href="#Heat_002dTransformation">Тепловая трансформация</a>). Лёд растает, превратившись в <a href="#fl_005fwater">fl_water</a>. Покрытие не претерпевает изменений, только когда лёд находится над <a href="#fl_005fabyss">fl_abyss</a>. На тот факт, что лёд под воздействием тепла обязательно растает, нельзя полагаться во всех случаях: каждый горящий участок решётки может &quot;пыхнуть жаром&quot; только раз. Таким образом, игрок может отодвинуть ледяной куб от огня, не дав ему растаять. Кроме того, таяние льда занимает некоторое время. Взрыв на соседнем участке решётки способен разбить даже тающий блок.
</p>
<dl compact="compact">
<dt> <b>Сообщения:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>ignite</b> &nbsp;&nbsp;См. раздел <a href="#ignite">ignite</a></dt>
<dd><p>Разбивает ледяной куб вдребезги.
</p></dd>
<dt> <b>heat</b> &nbsp;&nbsp;См. раздел <a href="#heat">heat</a></dt>
<dd><p>Заставляет лёд таять.
</p></dd>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_ice.png" alt="images/st_ice"><p> <b>st_ice</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="st_005fjamb"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fice" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fkey" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fjamb-1"></a>
<h3 class="subsection">9.5.29 st_jamb</h3>
<a name="index-st_005fjamb"></a>

<p>Это окрашенный в различные цвета дверной косяк, который позволяет одновременно открывать и закрывать две расположенные рядом двери (<a href="#st_005fdoor">st_door</a>). Особенно удобно его использовать с дверями типа <code>&quot;d&quot;</code>, которые могут открываться и закрываться, если в них постучит актёр соответствующего цвета.
</p>
<p>Камень по виду похож на четыре дверных косяка с цветным шариком на вершине. Он подходит к двери <a href="#st_005fdoor">st_door</a> разновидности <code>&quot;d&quot;</code>, состоящей из двух дверных проёмов. Эти двери можно сконфигурировать таким образом, чтобы они посылали сообщение <code>&quot;hit&quot;</code> прилегающим дверным косякам в качестве цели. Всякий раз, когда актёр стучит в дверь, косяк получает сообщение и проверяет цвет актёра. Если цвет актёра совпадает с цветом косяка, косяк посылает команду открыться двери, в которую стучит актёр, а также двери, расположенной с противоположной стороны косяка. Кроме того, две оставшиеся двери, прикреплённые к косяку, получают команду закрыться. Например:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">ti[&quot;n&quot;] = {&quot;st_door_d&quot;, &quot;north&quot;, target=&quot;jamb&quot;, action=&quot;hit&quot;}
ti[&quot;e&quot;] = {&quot;st_door_d&quot;, &quot;east&quot;, target=&quot;jamb&quot;, action=&quot;hit&quot;}
ti[&quot;s&quot;] = {&quot;st_door_d&quot;, &quot;south&quot;, target=&quot;jamb&quot;, action=&quot;hit&quot;}
ti[&quot;w&quot;] = {&quot;st_door_d&quot;, &quot;west&quot;, target=&quot;jamb&quot;, action=&quot;hit&quot;}
ti[&quot;J&quot;] = {&quot;st_jamb&quot;, &quot;jamb&quot;}
ti[&quot;@&quot;] = {&quot;st_marble&quot;}
wo(ti, &quot; &quot;, {
  &quot; n &quot;,
  &quot;wJe&quot;,
  &quot; s@&quot;
}
</pre></td></tr></table>

<p>Чёрный шарик, постучавший в восточную дверь, откроет восточную и западную дверь, одновременно закрыв северную и южную двери. Чёрный шарик, постучавший в южную дверь, откроет южную и северную двери и закроет западную и восточную.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>color</b> &nbsp;&nbsp;<i>значения</i>: <code>BLACK</code>, <code>WHITE</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>BLACK</code></dt>
</dl>

</dd>
<dt> <b>Сообщения:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>hit</b></dt>
<dd><p>Значение сообщения должно быть объектной ссылкой на актёра. Чтобы действие было выполнено, цвет актёра должен совпадать с цветом косяка. Позиция отправителя также должно совпадать с координатой x или координатой y косяка.
</p>
</dd>
<dt> <b>signal</b> &nbsp;&nbsp;См. раздел <a href="#signal">signal</a></dt>
<dd><p>Данное сообщение поддерживается исключительно в целях обратной совместимости. Использовать его в уровнях с новым API не рекомендуется, так как оно использует другие внутренние атрибуты, не поддерживаемые уровнями с новым API.
</p></dd>
</dl>

</dd>
<dt> <b>Действие:</b> &nbsp;&nbsp;См. раздел <a href="#target">target</a>, &nbsp;&nbsp;см. раздел <a href="#action">action</a></dt>
<dt> <b>Разновидности:</b></dt>
<dd>
<dl compact="compact">
<dt> <img src="images/st_jamb_black.png" alt="images/st_jamb_black"><p> <b>st_jamb</b>: color=<code>BLACK</code>
</p></dt>
<dt> <img src="images/st_jamb_black.png" alt="images/st_jamb_black"><p> <b>st_jamb_black</b>: color=<code>BLACK</code>
</p></dt>
<dt> <img src="images/st_jamb_white.png" alt="images/st_jamb_white"><p> <b>st_jamb_white</b>: color=<code>WHITE</code>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="st_005fkey"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fjamb" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fknight" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fkey-1"></a>
<h3 class="subsection">9.5.30 st_key</h3>
<a name="index-st_005fkey"></a>

<p>Переключатель, который можно привести в действие с помощью ключа (<a href="#it_005fkey">it_key</a>). Только актёры, управляемые игроком, могут вставить ключ в замок, дотронувшись до замка, когда ключ находится слева в инвентаре. Ключ можно вставить в замок, только если значения атрибута &lsquo;<samp>code</samp>&rsquo; для ключа и замка совпадают.
</p>
<p>При повторном прикосновении актёра к замку замок запирается и ключ возвращается в инвентарь игрока.
</p>
<p>Замки часто используются для открытия ближайших объектов <a href="#st_005fdoor">st_door</a>, объявленных в качестве их целей (&lsquo;<samp>target</samp>&rsquo;). Но существует опасность того, что актёр, проходящий через дверной проём, случайно заденет соседний замок и вынет ключ, при этом дверь сразу же закроется. Конечно же, актёры <a href="#ac_005fmarble">ac_marble</a> или <a href="#ac_005fpearl">ac_pearl</a> будут уничтожены. Но если для замка был установлен атрибут &lsquo;<samp>secure</samp>&rsquo;, замок будет проверять, не находится ли коснувшийся его актёр на одной из позиций, определённых в качестве его целей. В таком случае никаких действий дисковод выполнять не будет. Обратите внимание, что в случаях, когда целью является функция вызова, которая закрывает соседнюю дверь, защита предоставляться не будет. Замок, для атрибута &lsquo;<samp>secure</samp>&rsquo; которого установлено значение &lsquo;<samp>false</samp>&rsquo;, будет реагировать на любые удары, даже если результатом будет гибель актёра, как это было в ранних версиях Enigma и всё ещё происходит в режимах игры, кроме режима Enigma.
</p>
<p>Обычно значение атрибута &lsquo;<samp>code</samp>&rsquo; замка визуально никак не отображается. Но если для атрибута &lsquo;<samp>invisible</samp>&rsquo; установить значение &lsquo;<samp>false</samp>&rsquo;, то для значений от &lsquo;<samp>1</samp>&rsquo; до &lsquo;<samp>8</samp>&rsquo; код будет отображаться. Это помогает пользователю различать камни и выбирать для них правильные ключи (<a href="#it_005fkey">it_key</a>) при наличии нескольких ключей.
</p>
<p>Код замка с установленным атрибутом &lsquo;<samp>invisible</samp>&rsquo; можно узнать, только если в него вставить подходящий ключ (<a href="#it_005fkey">it_key</a>) с известным кодом.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: <code>ON</code>, <code>OFF</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>OFF</code>; &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dd><p>Текущее состояние камня-замка.
</p></dd>
<dt> <b>code</b>, &nbsp;&nbsp;<i>values</i>: number или string; &nbsp;&nbsp;<i>по умолчанию</i>: <code>1</code>:</dt>
<dd><p>Код, необходимый, чтобы привести переключатель в действие.
</p></dd>
<dt> <b>secure</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code></dt>
<dd><p>Защищает актёров на целевых позициях, игнорируя их удары.
</p></dd>
<dt> <b>invisible</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code></dt>
<dd><p>При данном значении атрибута код (&lsquo;<samp>code</samp>&rsquo;) замка отображается в виде цветного пятна.
</p></dd>
</dl>

</dd>
<dt> <b>Сообщения:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>signal</b> &nbsp;&nbsp;См. раздел <a href="#signal">signal</a></dt>
<dd><p>Включается при значении &lsquo;<samp>1</samp>&rsquo; и выключается при значении &lsquo;<samp>0</samp>&rsquo;.
</p></dd>
<dt> <b>on</b> &nbsp;&nbsp;См. раздел <a href="#on">on</a></dt>
<dt> <b>off</b> &nbsp;&nbsp;См. раздел <a href="#off">off</a></dt>
</dl>

</dd>
<dt> <b>Действие:</b> &nbsp;&nbsp;См. раздел <a href="#target">target</a>, &nbsp;&nbsp;см. раздел <a href="#action">action</a></dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_key_off.png" alt="images/st_key_off"><p> <b>st_key</b> with state=<code>OFF</code>
</p></dt>
<dt> <img src="images/st_key_on.png" alt="images/st_key_on"><p> <b>st_key</b> with state=<code>ON</code>
</p></dt>
</dl>
</dd>
</dl>
<hr size="6">
<a name="st_005fknight"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fkey" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005flaser" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fknight-1"></a>
<h3 class="subsection">9.5.31 st_knight</h3>
<a name="index-st_005fknight"></a>

<p>Каменный рыцарь, всегда имеющий при себе меч. Этот рыцарь разбивает все шарики, прикасающиеся к нему, если они не защищены активированным зонтиком (<a href="#it_005fumbrella">it_umbrella</a>) либо не орудуют мечом (<a href="#it_005fsword">it_sword</a>).
</p>
<p>Если рыцаря четыре раза ударить объектом <a href="#it_005fsword">it_sword</a>, он отпускает в вашу сторону презрительное замечание, и после этого вы можете пройти мимо него, даже не имея при себе меча.
</p>
<p>Побежденный каменный рыцарь пропускает сквозь себя лазерные лучи.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: от <code>0</code> до <code>4</code>; &nbsp;&nbsp;<i> по умолчанию</i>: <code>0</code>; <i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dd><p>Счётчик ударов, нанесённых рыцарю. Рыцарь начинает с состояния &lsquo;<samp>0</samp>&rsquo; (не ранен) и сдаётся после четырёх ударов.
</p></dd>
</dl>

</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Действие:</b> отсутствует</dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_knight.png" alt="images/st_knight"><p> <b>st_knight</b>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="st_005flaser"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fknight" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005flaserflop" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005flaser-1"></a>
<h3 class="subsection">9.5.32 st_laser</h3>
<a name="index-st_005flaser"></a>

<p>Лазерный камень &mdash; это единственный объект, способный испускать лучи света. По умолчанию камни выключены. Атрибут &lsquo;<samp>state</samp>&rsquo; отражает состояние лазера, и ему может предварительно быть задано значение &lsquo;<samp>ON</samp>&rsquo;. Лазерный камень всегда направлен в одну сторону, в которую он испускает лазерный луч.
</p>
<p>Для лазерных камней характерен своего рода период &quot;спячки&quot;, который предохраняет их от бесконечных быстрых чередований состояний. Это позволяет чередовать состояния лазера с помощью объекта <a href="#st_005flaserswitch">st_laserswitch</a>, который в свою очередь приводится в действие лазером. Во время периода &quot;спячки&quot; находящиеся в очереди запросы переключателя будут регистрироваться, но выполняться они будут с небольшой задержкой. Следует отметить, что несколько ожидающих в очереди запросов могут даже нейтрализовать друг друга.
</p>
<p>В соответствии с положениями главы <a href="#Snapshot-Principle">Принцип снимка</a> луч изначально включенного лазера не будет оказывать эффекта на окружающие объекты. Если вам это необходимо, то вы можете включить лазер с помощью сообщения в функции &lsquo;<samp>postinit</samp>&rsquo; (см. раздел <a href="#Level-Initialization">Инициализация уровня</a>). Так, лазер, который включается и выключается, потому что ему посылает сообщения <a href="#st_005flaserswitch">st_laserswitch</a>, следует включать при помощи сообщения.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: <code>ON</code>, <code>OFF</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>OFF</code> &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dt> <b>orientation</b>, &nbsp;&nbsp;<i>значения</i>: <code>NORTH</code>, <code>EAST</code>, <code>SOUTH</code>, <code>WEST</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>NORTH</code></dt>
<dd><p>Направление лазера. Данный атрибут определяет направление, в котором камень будет испускать лазерный луч во включённом состоянии.
</p></dd>
<dt> <b>counterclock</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code></dt>
<dd><p>По умолчанию объект поворачивается по часовой стрелке. Используйте данный атрибут, чтобы изменить направление вращения.
</p></dd>
</dl>

</dd>
<dt> <b>Сообщения:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>signal</b> &nbsp;&nbsp;См. раздел <a href="#signal">signal</a></dt>
<dd><p>Значение &lsquo;<samp>1</samp>&rsquo; включает лазер, значение &lsquo;<samp>0</samp>&rsquo; &mdash; выключает.
</p></dd>
<dt> <b>on</b> &nbsp;&nbsp;См. раздел <a href="#on">on</a></dt>
<dt> <b>off</b> &nbsp;&nbsp;См. раздел <a href="#off">off</a></dt>
<dt> <b>turn</b></dt>
<dd><p>Изменяет направление в соответствии со значением атрибута &lsquo;<samp>counterclock</samp>&rsquo;.
</p></dd>
<dt> <b>turnback</b></dt>
<dd><p>Поворачивает объект в направлении, противоположном заданному атрибутом &lsquo;<samp>counterclock</samp>&rsquo;.
</p></dd>
</dl>

</dd>
<dt> <b>Действие:</b> отсутствует</dt>
<dt> <b>Разновидности:</b></dt>
<dd><table>
<tr><td width="8%"><img src="images/st_laser_d.png" alt="images/st_laser_d"></td><td width="42%"><b>st_laser_w</b>: orientation = <code>WEST</code>, state = <code>OFF</code></td><td width="8%"><img src="images/st_laser_d6.png" alt="images/st_laser_d6"></td><td width="42%"><b>st_laser_w</b>: orientation = <code>WEST</code>, state = <code>ON</code></td></tr>
<tr><td width="8%"><img src="images/st_laser_c.png" alt="images/st_laser_c"></td><td width="42%"><b>st_laser_s</b>: orientation = <code>SOUTH</code>, state = <code>OFF</code></td><td width="8%"><img src="images/st_laser_c6.png" alt="images/st_laser_c6"></td><td width="42%"><b>st_laser_s</b>: orientation = <code>SOUTH</code>, state = <code>ON</code></td></tr>
<tr><td width="8%"><img src="images/st_laser_b.png" alt="images/st_laser_b"></td><td width="42%"><b>st_laser_e</b>: orientation = <code>EAST</code>, state = <code>OFF</code></td><td width="8%"><img src="images/st_laser_b6.png" alt="images/st_laser_b6"></td><td width="42%"><b>st_laser_e</b>: orientation = <code>EAST</code>, state = <code>ON</code></td></tr>
<tr><td width="8%"><img src="images/st_laser.png" alt="images/st_laser"></td><td width="42%"><b>st_laser_n</b>: orientation = <code>NORTH</code>, state = <code>OFF</code></td><td width="8%"><img src="images/st_laser_6.png" alt="images/st_laser_6"></td><td width="42%"><b>st_laser_n</b>: orientation = <code>NORTH</code>, state = <code>ON</code></td></tr>
</table>
</dd>
</dl>

<hr size="6">
<a name="st_005flaserflop"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005flaser" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005flaserswitch" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005flaserflop-1"></a>
<h3 class="subsection">9.5.33 st_laserflop</h3>
<a name="index-st_005flaserflop"></a>

<p>Переключатель, который приводится в действие актёрами и лазером. Он моментально приходит в состояние &lsquo;<samp>ON</samp>&rsquo; и, если свет на него больше не воздействует, снова переходит в состояние &lsquo;<samp>OFF</samp>&rsquo; через промежуток времени, заданный атрибутом &lsquo;<samp>interval</samp>&rsquo;. Повторные прикосновения актёров и длительное воздействие лазера продлевают работу переключателя; он выключается через промежуток времени, заданный атрибутом &lsquo;<samp>interval</samp>&rsquo;, после последнего прикосновения актёра. Похожим, но не работающим от света объектом является <a href="#st_005fmonoflop">st_monoflop</a>.
</p>
<p>Единичный цикл состояний, именуемый монофлоп, может быть инициирован сообщениями &lsquo;<samp>on</samp>&rsquo; и &lsquo;<samp>signal</samp>&rsquo;. Но активированный монофлоп нельзя выключить с помощью сообщений или путем манипуляций с состоянием.
</p>
<p>При инициализации <samp>&lsquo;st_laserflop&rsquo;</samp>, находящийся под действием лазерного луча, генерируется с состоянием &lsquo;<samp>ON</samp>&rsquo;, не вызывая никаких действий (согласно положениям, описанным в главе <a href="#Snapshot-Principle">Принцип снимка</a>).
</p>
<p>Лазерный монофлоп, который перемещён с участка решётки, освещаемого лазером, непосредственно актёром либо с помощью обменного камня, будет реагировать на отсутствие лазера соответствующими действиями.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: <code>ON</code>, <code>OFF</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>OFF</code>; &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dd><p>Задаёт состояние объекта. Состояние нового объекта может быть задано, но работающий монофлоп нельзя перевести в состояние &lsquo;<samp>OFF</samp>&rsquo;.
</p></dd>
<dt> <b>interval</b> &nbsp;&nbsp;<i>значения</i>: положительное число; &nbsp;&nbsp;<i>по умолчанию</i>: <code>1.8</code></dt>
<dd><p>Время в секундах, через которое монофлоп возвращается в состояние &lsquo;<samp>OFF</samp>&rsquo; после последнего воздействия.
</p>
</dd>
</dl>

</dd>
<dt> <b>Сообщения:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>signal</b> &nbsp;&nbsp;См. раздел <a href="#signal">signal</a></dt>
<dd><p>Включается при значении &lsquo;<samp>1</samp>&rsquo;. Значение &lsquo;<samp>0</samp>&rsquo; игнорируется.
</p></dd>
<dt> <b>on</b> &nbsp;&nbsp;См. раздел <a href="#on">on</a></dt>
<dd><p>Включает монофлоп, как при прикосновении актёра.
</p></dd>
</dl>

</dd>
<dt> <b>Действие:</b> &nbsp;&nbsp;См. раздел <a href="#target">target</a>, &nbsp;&nbsp;см. раздел <a href="#action">action</a></dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_monoflop.png" alt="images/st_monoflop"><p> <b>st_laserflop</b>: state = <code>OFF</code>
</p></dt>
<dt> <img src="images/st_monoflop_2.png" alt="images/st_monoflop_2"><p> <b>st_laserflop</b>: state = <code>ON</code>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="st_005flaserswitch"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005flaserflop" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005flightglass" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005flaserswitch-1"></a>
<h3 class="subsection">9.5.34 st_laserswitch</h3>
<a name="index-st_005flaserswitch"></a>

<p>Переключатель, который приводится в действие исключительно лазерным лучом. Он немедленно переходит в состояние &lsquo;<samp>ON</samp>&rsquo;, когда на него с любой стороны падает лазер. Когда лазер перестаёт воздействовать на него, он моментально переходит в состояние &lsquo;<samp>OFF</samp>&rsquo;.
</p>
<p>Не существует способа задать состояние данного камня вручную. Но, тем не менее, состояние доступно для чтения. При инициализации в соответствии с принципом снимка (см. раздел <a href="#Snapshot-Principle">Принцип снимка</a>) переключатель будет сгенерирован с состоянием &lsquo;<samp>ON</samp>&rsquo;, но не будет отправлять никаких действий.
</p>
<p>Переключатель, который перемещается с участка решётки, освещённого лазерным лучом, либо на такой участок, будет реагировать соответствующими действиями.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: <code>ON</code>, <code>OFF</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>OFF</code>; <i>доступ</i>: <code>read only</code> &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
</dl>

</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Действие:</b> &nbsp;&nbsp;См. раздел <a href="#target">target</a>, &nbsp;&nbsp;см. раздел <a href="#action">action</a></dt>
<dd>
<dl compact="compact">
<dt> <img src="images/st_oxydb.png" alt="images/st_oxydb"><p> <b>st_laserswitch</b>: state = <code>OFF</code>
</p></dt>
<dt> <img src="images/st_quake_3.png" alt="images/st_quake_3"><p> <b>st_laserswitch</b>: state = <code>ON</code>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="st_005flightglass"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005flaserswitch" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005flightpassenger" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005flightglass-1"></a>
<h3 class="subsection">9.5.35 st_lightglass</h3>
<a name="index-st_005flightglass"></a>

<p>Прозрачный стеклянный камень в металлической оправе. Для данного камня существуют неподвижная, подвижная и полая разновидности и в силу своей природы он проницаем для лазера. Как и другие <a href="#Transparent-Stones">Прозрачные камни</a>, он проницаем для невидимых актёров, за исключением своей подвижной (&lsquo;<samp>movable</samp>&rsquo;) разновидности.
</p>
<p>Разновидность <code>st_magic_oxyda</code> камня <a href="#st_005fmagic">st_magic</a>, если до неё дотронется актёр, превращается в подвижную разновидность прозрачного стекла.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>hollow</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: read only &nbsp;&nbsp;См. раздел <a href="#hollow">hollow</a></dt>
<dt> <b>movable</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: read only &nbsp;&nbsp;См. раздел <a href="#movable">movable</a></dt>
</dl>

</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Разновидности:</b></dt>
<dd>
<dl compact="compact">
<dt> <img src="images/st_lightglass.png" alt="images/st_lightglass"><p> <b>st_lightglass</b>: hollow = <code>false</code>, movable = <code>false</code>
</p></dt>
<dt> <img src="images/st_lightglass.png" alt="images/st_lightglass"><p> <b>st_lightglass_hollow</b>: hollow = <code>true</code>, movable = <code>false</code>
</p></dt>
<dt> <img src="images/st_lightglass.png" alt="images/st_lightglass"><p> <b>st_lightglass_movable</b>: hollow = <code>false</code>, movable = <code>true</code>
</p></dt>
</dl>

</dd>
</dl>


<hr size="6">
<a name="st_005flightpassenger"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005flightglass" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fmagic" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005flightpassenger-1"></a>
<h3 class="subsection">9.5.36 st_lightpassenger</h3>
<a name="index-st_005flightpassenger"></a>

<p>Камень-наездник перемещается, оседлав лазерный луч, и может двигать впереди себя один подвижный камень. Лазерные лучи, исходящие в противоположном направлении, игнорируются. Когда луч, на котором катается наездник, пересекает другой лазерный луч, наездник перескакивает на этот луч. Если его одновременно освещают два луча, пересекающиеся под прямым углом, наездник выбирает один из них случайным образом. Способность наездника седлать лазерные лучи можно включать и выключать.
</p>
<p>Если на пути у него находится камень, наездник посылает ему импульс, который может сдвинуть его, но может оказать и другое действие: так, турникет под напором наездника поворачивается, а амортизатор начинает пульсировать, но оксиды наездник открывать не может (так и было задумано).
</p>
<p>Актёры не могут сдвинуть наездника, но его может переместить, например, <a href="#st_005fstoneimpulse">st_stoneimpulse</a>.
</p>
<p>Скорость наездника можно изменить с помощью атрибута &lsquo;<samp>interval</samp>&rsquo; (по умолчанию его скорость составляет 50 мс, что не так уж и мало), а также на неё могут влиять трение покрытия и уклон посредством атрибутов &lsquo;<samp>friction</samp>&rsquo; и &lsquo;<samp>gradient</samp>&rsquo;. Окончательным интервалом будет:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">interval  =  base * (1 + stone_friction * floor_friction) / (1 + stone_gradient * floor_gradient)
</pre></td></tr></table>

<p>где &lsquo;<samp>base</samp>&rsquo; &mdash; это значение атрибута &lsquo;<samp>interval</samp>&rsquo;, &lsquo;<samp>floor_friction</samp>&rsquo; &mdash; трение поверхности под наездником, а &lsquo;<samp>floor_gradient</samp>&rsquo; &mdash; параллельная часть силы пола, т.е. сумма силы уклона и атрибутов <code>force_x/y</code>.
</p>
<p>Наездника можно включать и выключать при помощи сообщений (см. ниже), в выключенном состоянии он выглядит как &lsquo;<samp>st_darkglass</samp>&rsquo;. Игрок, у которого в инвентаре есть очки (<a href="#it_005fglasses">it_glasses</a>), для которых задана характеристика &lsquo;<samp>SPOT_LIGHTPASSENGER</samp>&rsquo;, может отличить выключенного наездника от &lsquo;<samp>st_darkglass</samp>&rsquo;. Разновидность &lsquo;<samp>st_lightpassenger_off</samp>&rsquo; изначально выключена. Наездник, который заезжает на <a href="#it_005fcross">it_cross</a>, сразу же выключается. Выключенного наездника можно включить, дотронувшись до него щёткой <a href="#it_005fbrush">it_brush</a> (она должна находиться слева в инвентаре). Данное действие также стирает находящийся под наездником крест.
</p>
<p>Когда с наездником сталкивается <a href="#st_005fboulder">st_boulder</a>, наездник на некоторое время изменяет своё состояние.
</p>
<p>Когда активный объект &lsquo;<samp>st_lightpassenger</samp>&rsquo; оказывается зажат между двумя лучами, идущими в противоположных направлениях, либо между лучами, идущими с четырех сторон, он начинает мигать.  В этом состоянии его можно разрушить с помощью молотка (<a href="#it_005fhammer">it_hammer</a>).
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: <code>ON</code>, <code>OFF</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>ON</code>; &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dd><p>Задаёт состояние объекта.
</p></dd>
<dt> <b>interval</b> &nbsp;&nbsp;<i>значения</i>: положительное число; &nbsp;&nbsp;<i>по умолчанию</i>: <code>0.05</code></dt>
<dd><p>Базовый интервал для движений.
</p></dd>
<dt> <b>friction</b> &nbsp;&nbsp;<i>значения</i>: положительное число; &nbsp;&nbsp;<i>по умолчанию</i>: <code>0.0</code></dt>
<dd><p>Трение камня о покрытие.
</p></dd>
<dt> <b>gradient</b> &nbsp;&nbsp;<i>значения</i>: положительное число; &nbsp;&nbsp;<i>по умолчанию</i>: <code>0.0</code></dt>
<dd><p>Градиент скорости наездника.
</p>
</dd>
</dl>

</dd>
<dt> <b>Сообщения:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>signal</b> &nbsp;&nbsp;См. раздел <a href="#signal">signal</a></dt>
<dd><p>Включается при значении &lsquo;<samp>1</samp>&rsquo;. Значение &lsquo;<samp>0</samp>&rsquo; игнорируется.
</p></dd>
<dt> <b>on</b> &nbsp;&nbsp;См. раздел <a href="#on">on</a></dt>
<dd><p>Включает наездника.
</p></dd>
<dt> <b>off</b> &nbsp;&nbsp;См. раздел <a href="#off">off</a></dt>
<dd><p>Выключает наездника.
</p></dd>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd>
<dl compact="compact">
<dt> <img src="images/st_lightpassenger.png" alt="images/st_lightpassenger"><p> <b>st_lightpassenger</b>: state = <code>ON</code>
</p></dt>
<dt> <img src="images/st_lightpassenger.png" alt="images/st_lightpassenger"><p> <b>st_lightpassenger_on</b>: state = <code>ON</code>
</p></dt>
<dt> <img src="images/st_darkglass.png" alt="images/st_darkglass"><p> <b>st_lightpassenger_off</b>: state = <code>OFF</code>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="st_005fmagic"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005flightpassenger" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fmail" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fmagic-1"></a>
<h3 class="subsection">9.5.37 st_magic</h3>
<a name="index-st_005fmagic"></a>

<p>Волшебный камень имитирует внешний вид одного камня, но превращается в другой, если до него дотронется актёр.
</p>
<p>Как и <a href="#st_005ffake">st_fake</a>, этот камень первоначально имитирует внешний вид другого камня, заданного атрибутом &lsquo;<samp>flavor</samp>&rsquo;. Но если до него дотронется актёр (с требуемым инструментом в инвентаре либо без оного), он превращается в другой камень со своими свойствами.
</p>
<p>Разновидность <code>&quot;brick&quot;</code> превращается в неподвижную разновидность <a href="#st_005frawglass">st_rawglass</a>, только если до неё дотронуться волшебной палочкой (<a href="#it_005fmagicwand">it_magicwand</a>).
</p>
<p>Разновидность <code>&quot;oxyda&quot;</code> превращается при любых прикосновениях актёра в подвижную разновидность <a href="#st_005flightglass">st_lightglass</a>.
</p>
<p>Разновидность <code>&quot;oxydc&quot;</code> превращается при любых прикосновениях актёра в подвижную разновидность <a href="#st_005frawglass">st_rawglass</a>.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>flavor</b> &nbsp;&nbsp;<i>значения</i>: <code>&quot;brick&quot;</code>, <code>&quot;oxyda&quot;</code>, <code>&quot;oxydc&quot;</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>&quot;brick&quot;</code>; &nbsp;&nbsp;<i>доступ</i>: read only</dt>
</dl>

</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Действие:</b> отсутствует</dt>
<dt> <b>Разновидности:</b></dt>
<dd>
<dl compact="compact">
<dt> <img src="images/st_brick.png" alt="images/st_brick"><p> <b>st_magic</b>: flavor=<code>&quot;brick&quot;</code>
</p></dt>
<dt> <img src="images/st_brick.png" alt="images/st_brick"><p> <b>st_magic_brick</b>: flavor=<code>&quot;brick&quot;</code>
</p></dt>
<dt> <img src="images/st_oxyda.png" alt="images/st_oxyda"><p> <b>st_magic_oxyda</b>: flavor=<code>&quot;oxyda&quot;</code>
</p></dt>
<dt> <img src="images/st_oxydc.png" alt="images/st_oxydc"><p> <b>st_magic_oxydc</b>: flavor=<code>&quot;oxydc&quot;</code>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="st_005fmail"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fmagic" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fmirror" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fmail-1"></a>
<h3 class="subsection">9.5.38 st_mail</h3>
<a name="index-st_005fmail"></a>

<p>Если актёр прикоснется к почтовому камню, первый предмет в его инвентаре будет изъят и отправлен к выходному отверстию почтового камня либо к выходу из присоединённой к нему трубы (<a href="#it_005fpipe">it_pipe</a>). Если выход заблокирован (например, другим предметом), предмет из инвентаря игрока не изымается. <a href="#it_005fbrake">it_brake</a> &mdash; это единственный предмет, который пересылается почтовым камнем, даже если выходное отверстие камня заблокировано другим предметом, поскольку он появляется на выходе в виде камня <a href="#st_005fbrake">st_brake</a>. Фрагмент трубы (<a href="#it_005fpipe">it_pipe</a>) с одним единственным соединением полностью блокирует почтовую трубу, не давая возможности пересылать по ней предметы.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>orientation</b>, &nbsp;&nbsp;<i>значения</i>: <code>NORTH</code>, <code>EAST</code>, <code>SOUTH</code>, <code>WEST</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>NORTH</code></dt>
<dd><p>Направление почтового камня. Определяет соседний участок решётки, на который будут пересылаться предметы либо на котором будет начинаться труба.
</p></dd>
</dl>

</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Действие:</b> отсутствует</dt>
<dt> <b>Разновидности:</b></dt>
<dd>
<dl compact="compact">
<dt> <img src="images/st_mail.png" alt="images/st_mail"><p> <b>st_mail</b>: orientation = <code>NORTH</code>
</p></dt>
<dt> <img src="images/st_mail_3.png" alt="images/st_mail_3"><p> <b>st_mail_w</b>: orientation = <code>WEST</code>
</p></dt>
<dt> <img src="images/st_mail_4.png" alt="images/st_mail_4"><p> <b>st_mail_s</b>: orientation = <code>SOUTH</code>
</p></dt>
<dt> <img src="images/st_mail_2.png" alt="images/st_mail_2"><p> <b>st_mail_e</b>: orientation = <code>EAST</code>
</p></dt>
<dt> <img src="images/st_mail.png" alt="images/st_mail"><p> <b>st_mail_n</b>: orientation = <code>NORTH</code>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="st_005fmirror"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fmail" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fmonoflop" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fmirror-1"></a>
<h3 class="subsection">9.5.39 st_mirror</h3>
<a name="index-st_005fmirror"></a>

<p>Зеркальные камни изменяют направление лазерных лучей и расщепляют их. Существуют различные разновидности зеркал. Форму зеркала можно задать с помощью атрибута &lsquo;<samp>flavor</samp>&rsquo; либо непосредственно указав соответствующую разновидность. Существуют две плоские разновидности &mdash; &lsquo;<samp>slab</samp>&rsquo; и &lsquo;<samp>sheets</samp>&rsquo; &mdash; и треугольная разновидность (&lsquo;<samp>triangle</samp>&rsquo;).
</p>
<p>Зеркала могут быть непрозрачными или полупрозрачными. Хотя это свойство можно задать с помощью атрибута &lsquo;<samp>transparent</samp>&rsquo;, следует помнить, что даже если задано значение &lsquo;<samp>true</samp>&rsquo;, зеркало не является полностью прозрачным. Так, зеркало типа &lsquo;<samp>slab</samp>&rsquo; будет блокировать любой лазерный луч, падающий параллельно его поверхности, так как его края не являются зеркалами. Поэтому мы предусмотрели ещё одну разновидность &mdash; &lsquo;<samp>sheets</samp>&rsquo; &mdash; которая пропускает лучи, падающие параллельно ему.
</p>
<p>Под воздействием ударов актёров и импульсов, исходящих от объектов <a href="#st_005fstoneimpulse">st_stoneimpulse</a>, зеркала будут сдвигаться, если для атрибута &lsquo;<samp>movable</samp>&rsquo; установлено значение &lsquo;true&rsquo;. Неподвижные зеркала будут окрашены в более тёмный цвет.
</p>
<p>Под воздействием ударов или даже лёгких прикосновений зеркала поворачиваются на 90 градусов. По умолчанию объект поворачивается по часовой стрелке. Но это направление можно изменить с помощью атрибута &lsquo;<samp>counterclock</samp>&rsquo;. Если в зеркало врежется <a href="#st_005fboulder">st_boulder</a>, оно также будет поворачиваться в стандартном направлении.
</p>
<p>Зеркало можно повернуть в противоположном направлении с помощью сообщения &lsquo;<samp>turnback</samp>&rsquo; либо объекта <a href="#it_005fwrench">it_wrench</a>, расположенного слева в инвентаре.
</p>
<p>Зеркала, перемещаемые под воздействием импульсов, исходящих от <a href="#it_005fpuller">it_puller</a>, <a href="#st_005fstoneimpulse">st_stoneimpulse</a> и т. д., или с помощью <a href="#ot_005fwire">ot_wire</a>) не поворачиваются.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>flavor</b> &nbsp;&nbsp;<i>значения</i>: <code>&quot;slab&quot;</code>, <code>&quot;sheets&quot;</code>, <code>&quot;triangle&quot;</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>&quot;slab&quot;</code></dt>
<dd><p>Устанавливает тип зеркала: треугольное, плоское и непроницаемое сбоку либо плоское и полупрозрачное со всех сторон.
</p></dd>
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: <code>NORTH</code>, <code>EAST</code>, <code>SOUTH</code>, <code>WEST</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>NORTH</code>; &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dd><p>Направление зеркала. Для треугольного зеркала это направление, в которое указывает тупой угол треугольника. Для плоского зеркала это направление, в котором будет отражён падающий на него луч, направленный на север.
</p></dd>
<dt> <b>orientation</b>, &nbsp;&nbsp;<i>значения</i>: <code>NORTH</code>, <code>EAST</code>, <code>SOUTH</code>, <code>WEST</code>, <code>RANDOMDIR</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>NORTH</code></dt>
<dd><p>Направление зеркала. Для треугольного зеркала это направление, в которое указывает тупой угол треугольника. Для плоского зеркала это направление, в котором будет отражён падающий на него луч, направленный на север. Значение <code>RANDOMDIR</code> оценивается только во время установки зеркала. После этого зеркало будет возвращать выбранное случайным образом одно из четырёх реальных направлений.
</p></dd>
<dt> <b>transparent</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code></dt>
<dd><p>Указывает, является ли зеркало полупрозрачным.
</p></dd>
<dt> <b>movable</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;См. раздел <a href="#movable">movable</a></dt>
<dd><p>Способность зеркала перемещаться под воздействием ударов актёров и импульсных камней.
</p></dd>
<dt> <b>counterclock</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code></dt>
<dd><p>По умолчанию объект поворачивается по часовой стрелке. Используйте данный атрибут, чтобы изменить направление вращения.
</p></dd>
</dl>

</dd>
<dt> <b>Сообщения:</b></dt>
<dd>
<dl compact="compact">
<dd><a name="index-orientate-1"></a>
</dd>
<dt> <b>orientate</b>, &nbsp;&nbsp;<i>тип значения:</i> orientation</dt>
<dd><p>Изменяет направление движения на заданное. <a href="#st_005ffourswitch">st_fourswitch</a> предусматривает совместимое действие, которое позволяет задать зеркало как цель, а это сообщение &mdash; как действие.
</p></dd>
<dt> <b>turn</b></dt>
<dd><p>Поворачивает зеркало в направлении, установленном атрибутом &lsquo;<samp>counterclock</samp>&rsquo;.
</p></dd>
<dt> <b>turnback</b></dt>
<dd><p>Поворачивает зеркало в направлении, противоположном установленному атрибутом  &lsquo;<samp>counterclock</samp>&rsquo;.
</p></dd>
<dt> <b>signal</b> &nbsp;&nbsp;См. раздел <a href="#signal">signal</a></dt>
<dd><p>Поворачивает зеркало в направлении, установленном атрибутом &lsquo;<samp>counterclock</samp>&rsquo;, при значении &lsquo;<samp>1</samp>&rsquo;. Значение &lsquo;<samp>0</samp>&rsquo; игнорируется.
</p>
</dd>
</dl>

</dd>
<dt> <b>Действие:</b> отсутствует</dt>
<dt> <b>Разновидности:</b></dt>
<dd><table>
<tr><td width="8%"><img src="images/st_mirror_static.png" alt="images/st_mirror_static"></td><td width="42%"><b>st_mirror_triangle</b>: flavor=<code>triangle</code>, state = <code>NORTH</code>, transparent = <code>false</code>, movable = <code>false</code></td><td width="8%"><img src="images/st_mirror_movable.png" alt="images/st_mirror_movable"></td><td width="42%"><b>st_mirror_triangle</b>: flavor=<code>triangle</code>, state = <code>NORTH</code>, transparent = <code>false</code>, movable = <code>true</code></td></tr>
<tr><td width="8%"><img src="images/st_mirror_static_2.png" alt="images/st_mirror_static_2"></td><td width="42%"><b>st_mirror_triangle</b>: flavor=<code>triangle</code>, state = <code>EAST</code>, transparent = <code>false</code>, movable = <code>false</code></td><td width="8%"><img src="images/st_mirror_movable_2.png" alt="images/st_mirror_movable_2"></td><td width="42%"><b>st_mirror_triangle</b>: flavor=<code>triangle</code>, state = <code>EAST</code>, transparent = <code>false</code>, movable = <code>true</code></td></tr>
<tr><td width="8%"><img src="images/st_mirror_static_3.png" alt="images/st_mirror_static_3"></td><td width="42%"><b>st_mirror_triangle</b>: flavor=<code>triangle</code>, state = <code>SOUTH</code>, transparent = <code>false</code>, movable = <code>false</code></td><td width="8%"><img src="images/st_mirror_movable_3.png" alt="images/st_mirror_movable_3"></td><td width="42%"><b>st_mirror_triangle</b>: flavor=<code>triangle</code>, state = <code>SOUTH</code>, transparent = <code>false</code>, movable = <code>true</code></td></tr>
<tr><td width="8%"><img src="images/st_mirror_static_4.png" alt="images/st_mirror_static_4"></td><td width="42%"><b>st_mirror_triangle</b>: flavor=<code>triangle</code>, state = <code>WEST</code>, transparent = <code>false</code>, movable = <code>false</code></td><td width="8%"><img src="images/st_mirror_movable_4.png" alt="images/st_mirror_movable_4"></td><td width="42%"><b>st_mirror_triangle</b>: flavor=<code>triangle</code>, state = <code>WEST</code>, transparent = <code>false</code>, movable = <code>true</code></td></tr>
<tr><td width="8%"><img src="images/st_mirror_static_b.png" alt="images/st_mirror_static_b"></td><td width="42%"><b>st_mirror_triangle</b>: flavor=<code>triangle</code>, state = <code>NORTH</code>, transparent = <code>true</code>, movable = <code>false</code></td><td width="8%"><img src="images/st_mirror_movable_b.png" alt="images/st_mirror_movable_b"></td><td width="42%"><b>st_mirror_triangle</b>: flavor=<code>triangle</code>, state = <code>NORTH</code>, transparent = <code>true</code>, movable = <code>true</code></td></tr>
<tr><td width="8%"><img src="images/st_mirror_static_b2.png" alt="images/st_mirror_static_b2"></td><td width="42%"><b>st_mirror_triangle</b>: flavor=<code>triangle</code>, state = <code>EAST</code>, transparent = <code>true</code>, movable = <code>false</code></td><td width="8%"><img src="images/st_mirror_movable_b2.png" alt="images/st_mirror_movable_b2"></td><td width="42%"><b>st_mirror_triangle</b>: flavor=<code>triangle</code>, state = <code>EAST</code>, transparent = <code>true</code>, movable = <code>true</code></td></tr>
<tr><td width="8%"><img src="images/st_mirror_static_b3.png" alt="images/st_mirror_static_b3"></td><td width="42%"><b>st_mirror_triangle</b>: flavor=<code>triangle</code>, state = <code>SOUTH</code>, transparent = <code>true</code>, movable = <code>false</code></td><td width="8%"><img src="images/st_mirror_movable_b3.png" alt="images/st_mirror_movable_b3"></td><td width="42%"><b>st_mirror_triangle</b>: flavor=<code>triangle</code>, state = <code>SOUTH</code>, transparent = <code>true</code>, movable = <code>true</code></td></tr>
<tr><td width="8%"><img src="images/st_mirror_static_b4.png" alt="images/st_mirror_static_b4"></td><td width="42%"><b>st_mirror_triangle</b>: flavor=<code>triangle</code>, state = <code>WEST</code>, transparent = <code>true</code>, movable = <code>false</code></td><td width="8%"><img src="images/st_mirror_movable_b4.png" alt="images/st_mirror_movable_b4"></td><td width="42%"><b>st_mirror_triangle</b>: flavor=<code>triangle</code>, state = <code>WEST</code>, transparent = <code>true</code>, movable = <code>true</code></td></tr>
<tr><td width="8%"><img src="images/st_mirror_static_c.png" alt="images/st_mirror_static_c"></td><td width="42%"><b>st_mirror_slab</b>: flavor=<code>slab</code>, state = <code>NORTH</code>, transparent = <code>false</code>, movable = <code>false</code></td><td width="8%"><img src="images/st_mirror_movable_c.png" alt="images/st_mirror_movable_c"></td><td width="42%"><b>st_mirror_slab</b>: flavor=<code>slab</code>, state = <code>NORTH</code>, transparent = <code>false</code>, movable = <code>true</code></td></tr>
<tr><td width="8%"><img src="images/st_mirror_static_c2.png" alt="images/st_mirror_static_c2"></td><td width="42%"><b>st_mirror_slab</b>: flavor=<code>slab</code>, state = <code>EAST</code>, transparent = <code>false</code>, movable = <code>false</code></td><td width="8%"><img src="images/st_mirror_movable_c2.png" alt="images/st_mirror_movable_c2"></td><td width="42%"><b>st_mirror_slab</b>: flavor=<code>slab</code>, state = <code>EAST</code>, transparent = <code>false</code>, movable = <code>true</code></td></tr>
<tr><td width="8%"><img src="images/st_mirror_static_c3.png" alt="images/st_mirror_static_c3"></td><td width="42%"><b>st_mirror_slab</b>: flavor=<code>slab</code>, state = <code>SOUTH</code>, transparent = <code>false</code>, movable = <code>false</code></td><td width="8%"><img src="images/st_mirror_movable_c3.png" alt="images/st_mirror_movable_c3"></td><td width="42%"><b>st_mirror_slab</b>: flavor=<code>slab</code>, state = <code>SOUTH</code>, transparent = <code>false</code>, movable = <code>true</code></td></tr>
<tr><td width="8%"><img src="images/st_mirror_static_c4.png" alt="images/st_mirror_static_c4"></td><td width="42%"><b>st_mirror_slab</b>: flavor=<code>slab</code>, state = <code>WEST</code>, transparent = <code>false</code>, movable = <code>false</code></td><td width="8%"><img src="images/st_mirror_movable_c4.png" alt="images/st_mirror_movable_c4"></td><td width="42%"><b>st_mirror_slab</b>: flavor=<code>slab</code>, state = <code>WEST</code>, transparent = <code>false</code>, movable = <code>true</code></td></tr>
<tr><td width="8%"><img src="images/st_mirror_static_d.png" alt="images/st_mirror_static_d"></td><td width="42%"><b>st_mirror_slab</b>: flavor=<code>slab</code>, state = <code>NORTH</code>, transparent = <code>true</code>, movable = <code>false</code></td><td width="8%"><img src="images/st_mirror_movable_d.png" alt="images/st_mirror_movable_d"></td><td width="42%"><b>st_mirror_slab</b>: flavor=<code>slab</code>, state = <code>NORTH</code>, transparent = <code>true</code>, movable = <code>true</code></td></tr>
<tr><td width="8%"><img src="images/st_mirror_static_d2.png" alt="images/st_mirror_static_d2"></td><td width="42%"><b>st_mirror_slab</b>: flavor=<code>slab</code>, state = <code>EAST</code>, transparent = <code>true</code>, movable = <code>false</code></td><td width="8%"><img src="images/st_mirror_movable_d2.png" alt="images/st_mirror_movable_d2"></td><td width="42%"><b>st_mirror_slab</b>: flavor=<code>slab</code>, state = <code>EAST</code>, transparent = <code>true</code>, movable = <code>true</code></td></tr>
<tr><td width="8%"><img src="images/st_mirror_static_d3.png" alt="images/st_mirror_static_d3"></td><td width="42%"><b>st_mirror_slab</b>: flavor=<code>slab</code>, state = <code>SOUTH</code>, transparent = <code>true</code>, movable = <code>false</code></td><td width="8%"><img src="images/st_mirror_movable_d3.png" alt="images/st_mirror_movable_d3"></td><td width="42%"><b>st_mirror_slab</b>: flavor=<code>slab</code>, state = <code>SOUTH</code>, transparent = <code>true</code>, movable = <code>true</code></td></tr>
<tr><td width="8%"><img src="images/st_mirror_static_d4.png" alt="images/st_mirror_static_d4"></td><td width="42%"><b>st_mirror_slab</b>: flavor=<code>slab</code>, state = <code>WEST</code>, transparent = <code>true</code>, movable = <code>false</code></td><td width="8%"><img src="images/st_mirror_movable_d4.png" alt="images/st_mirror_movable_d4"></td><td width="42%"><b>st_mirror_slab</b>: flavor=<code>slab</code>, state = <code>WEST</code>, transparent = <code>true</code>, movable = <code>true</code></td></tr>
<tr><td width="8%"><img src="images/st_mirror_static_e.png" alt="images/st_mirror_static_e"></td><td width="42%"><b>st_mirror_sheets</b>: flavor=<code>sheets</code>, state = <code>NORTH</code>, transparent = <code>true</code>, movable = <code>false</code></td><td width="8%"><img src="images/st_mirror_movable_e.png" alt="images/st_mirror_movable_e"></td><td width="42%"><b>st_mirror_sheets</b>: flavor=<code>sheets</code>, state = <code>NORTH</code>, transparent = <code>true</code>, movable = <code>true</code></td></tr>
<tr><td width="8%"><img src="images/st_mirror_static_e2.png" alt="images/st_mirror_static_e2"></td><td width="42%"><b>st_mirror_sheets</b>: flavor=<code>sheets</code>, state = <code>EAST</code>, transparent = <code>true</code>, movable = <code>false</code></td><td width="8%"><img src="images/st_mirror_movable_e2.png" alt="images/st_mirror_movable_e2"></td><td width="42%"><b>st_mirror_sheets</b>: flavor=<code>sheets</code>, state = <code>EAST</code>, transparent = <code>true</code>, movable = <code>true</code></td></tr>
<tr><td width="8%"><img src="images/st_mirror_static_e3.png" alt="images/st_mirror_static_e3"></td><td width="42%"><b>st_mirror_sheets</b>: flavor=<code>sheets</code>, state = <code>SOUTH</code>, transparent = <code>true</code>, movable = <code>false</code></td><td width="8%"><img src="images/st_mirror_movable_e3.png" alt="images/st_mirror_movable_e3"></td><td width="42%"><b>st_mirror_sheets</b>: flavor=<code>sheets</code>, state = <code>SOUTH</code>, transparent = <code>true</code>, movable = <code>true</code></td></tr>
<tr><td width="8%"><img src="images/st_mirror_static_e4.png" alt="images/st_mirror_static_e4"></td><td width="42%"><b>st_mirror_sheets</b>: flavor=<code>sheets</code>, state = <code>WEST</code>, transparent = <code>true</code>, movable = <code>false</code></td><td width="8%"><img src="images/st_mirror_movable_e4.png" alt="images/st_mirror_movable_e4"></td><td width="42%"><b>st_mirror_sheets</b>: flavor=<code>sheets</code>, state = <code>WEST</code>, transparent = <code>true</code>, movable = <code>true</code></td></tr>
</table>

</dd>
</dl>

<hr size="6">
<a name="st_005fmonoflop"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fmirror" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005foneway" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fmonoflop-1"></a>
<h3 class="subsection">9.5.40 st_monoflop</h3>
<a name="index-st_005fmonoflop"></a>

<p>Переключатель, который приводится в действие прикосновениями актёров. Он немедленно переходит в состояние &lsquo;<samp>ON</samp>&rsquo; и по истечении промежутка времени, заданного атрибутом &lsquo;<samp>interval</samp>&rsquo; &mdash; снова в &lsquo;<samp>OFF</samp>&rsquo;. Повторные прикосновения актёров продлевают работу переключателя; он выключается через промежуток времени, заданный атрибутом &lsquo;<samp>interval</samp>&rsquo;, после последнего прикосновения актёра. На монофлоп похож <a href="#st_005flaserflop">st_laserflop</a>, но он приводится в действие также и лазером.
</p>
<p>Единичный цикл состояний, именуемый монофлоп, может быть инициирован сообщениями &lsquo;<samp>on</samp>&rsquo; и &lsquo;<samp>signal</samp>&rsquo;. Но активированный монофлоп нельзя выключить с помощью сообщений или путем манипуляций с состоянием.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: <code>ON</code>, <code>OFF</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>OFF</code>; &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dd><p>Задаёт состояние объекта. Состояние нового объекта может быть задано, но работающий монофлоп нельзя перевести в состояние &lsquo;<samp>OFF</samp>&rsquo;.
</p></dd>
<dt> <b>interval</b> &nbsp;&nbsp;<i>значения</i>: положительное число; &nbsp;&nbsp;<i>по умолчанию</i>: <code>1.8</code></dt>
<dd><p>Время в секундах, через которое монофлоп возвращается в состояние &lsquo;<samp>OFF</samp>&rsquo; после последнего воздействия.
</p>
</dd>
</dl>

</dd>
<dt> <b>Сообщения:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>signal</b> &nbsp;&nbsp;См. раздел <a href="#signal">signal</a></dt>
<dd><p>Включается при значении &lsquo;<samp>1</samp>&rsquo;. Значение &lsquo;<samp>0</samp>&rsquo; игнорируется.
</p></dd>
<dt> <b>on</b> &nbsp;&nbsp;См. раздел <a href="#on">on</a></dt>
<dd><p>Включает монофлоп, как при прикосновении актёра.
</p></dd>
</dl>

</dd>
<dt> <b>Действие:</b> &nbsp;&nbsp;См. раздел <a href="#target">target</a>, &nbsp;&nbsp;см. раздел <a href="#action">action</a></dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_monoflop.png" alt="images/st_monoflop"><p> <b>st_monoflop</b>: state = <code>OFF</code>
</p></dt>
<dt> <img src="images/st_monoflop_2.png" alt="images/st_monoflop_2"><p> <b>st_monoflop</b>: state = <code>ON</code>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="st_005foneway"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fmonoflop" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005foxyd" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005foneway-1"></a>
<h3 class="subsection">9.5.41 st_oneway</h3>
<a name="index-st_005foneway"></a>

<p>Камень, одна из сторон которого обладает особым свойством: она позволяет актёрам проходить изнутри наружу, но не наоборот. Другие стороны обычно пропускают актёра в обоих направлениях. Так как в большинстве случаев более важно знать о том, какие из проходов заблокированы, помните, что стрелка указывает на поверхность, сквозь которую актёр не может войти.
</p>
<p>Существует три разновидности однонаправленного камня: нейтральный камень серо-зелёного цвета, который пропускает всех актёров в соответствии с описанными выше правилами, а также однонаправленные камни чёрного и белого цвета. Эти камни пропускают только шарики соответствующего цвета.  Прочие актёры не смогут войти ни с одной стороны камня.
</p>
<p>Во все однонаправленные камни актёры могут войти, только находясь на покрытии. Актеры, находящиеся в прыжке, будут отскакивать ото всех сторон камня.
</p>
<p>Направление нейтрального однонаправленного камня (атрибут &lsquo;<samp>orientation</samp>&rsquo;) можно изменить на противоположное, если актёр ударит по нему волшебной палочкой (<a href="#it_005fmagicwand">it_magicwand</a>). Направление всех однонаправленных камней можно изменить с помощью сообщений &lsquo;<samp>signal</samp>&rsquo; и &lsquo;<samp>flip</samp>&rsquo;.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: <code>NORTH</code>, <code>EAST</code>, <code>SOUTH</code>, <code>WEST</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>NORTH</code> &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dd><p>Направление однонаправленного камня, указанное нарисованной на нём стрелкой.
</p></dd>
<dt> <b>orientation</b>, &nbsp;&nbsp;<i>значения</i>: <code>NORTH</code>, <code>EAST</code>, <code>SOUTH</code>, <code>WEST</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>NORTH</code></dt>
<dd><p>Направление однонаправленного камня, указанное нарисованной на нём стрелкой.
</p></dd>
<dt> <b>color</b> &nbsp;&nbsp;<i>значения</i>: <code>nil</code>, <code>BLACK</code>, <code>WHITE</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>nil</code></dt>
<dd><p>Цвет однонаправленного камня, который должен соответствовать цвету актёра, чтобы позволить этому актёру пройти сквозь камень. Камень цвета по умолчанию &lsquo;<samp>nil</samp>&rsquo; &mdash; это серо-зелёный камень, который пропускает шарики любого цвета, равно как и других актёров.
</p></dd>
</dl>

</dd>
<dt> <b>Сообщения:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>orientate</b>, &nbsp;&nbsp;<i>тип значения:</i> orientation</dt>
<dd><p>Изменяет направление движения на заданное. <a href="#st_005ffourswitch">st_fourswitch</a> предусматривает совместимое действие, которое позволяет задать камень как цель, а это сообщение как действие.
</p></dd>
<dt> <b>flip</b>,</dt>
<dd><p>Изменяет направление камня на противоположное.
</p></dd>
<dt> <b>signal</b> &nbsp;&nbsp;См. раздел <a href="#signal">signal</a></dt>
<dd><p>Изменяет направление камня на противоположное.
</p></dd>
</dl>

</dd>
<dt> <b>Действие:</b> отсутствует</dt>
<dt> <b>Разновидности:</b></dt>
<dd><table>
<tr><td width="8%"><img src="images/st_oneway.png" alt="images/st_oneway"></td><td width="42%"><b>st_oneway</b>: orientation = <code>EAST</code></td><td width="8%"><img src="images/st_oneway_2.png" alt="images/st_oneway_2"></td><td width="42%"><b>st_oneway</b>: orientation = <code>NORTH</code></td></tr>
<tr><td width="8%"><img src="images/st_oneway_3.png" alt="images/st_oneway_3"></td><td width="42%"><b>st_oneway</b>: orientation = <code>SOUTH</code></td><td width="8%"><img src="images/st_oneway_4.png" alt="images/st_oneway_4"></td><td width="42%"><b>st_oneway</b>: orientation = <code>WEST</code></td></tr>
<tr><td width="8%"><img src="images/st_oneway_b.png" alt="images/st_oneway_b"></td><td width="42%"><b>st_oneway_black</b>: color = <code>BLACK</code>; orientation = <code>EAST</code></td><td width="8%"><img src="images/st_oneway_b2.png" alt="images/st_oneway_b2"></td><td width="42%"><b>st_oneway_black</b>: color = <code>BLACK</code>; orientation = <code>NORTH</code></td></tr>
<tr><td width="8%"><img src="images/st_oneway_b3.png" alt="images/st_oneway_b3"></td><td width="42%"><b>st_oneway_black</b>: color = <code>BLACK</code>; orientation = <code>SOUTH</code></td><td width="8%"><img src="images/st_oneway_b4.png" alt="images/st_oneway_b4"></td><td width="42%"><b>st_oneway_black</b>: color = <code>BLACK</code>; orientation = <code>WEST</code></td></tr>
<tr><td width="8%"><img src="images/st_oneway_c.png" alt="images/st_oneway_c"></td><td width="42%"><b>st_oneway_white</b>: color = <code>WHITE</code>; orientation = <code>EAST</code></td><td width="8%"><img src="images/st_oneway_c2.png" alt="images/st_oneway_c2"></td><td width="42%"><b>st_oneway_white</b>: color = <code>WHITE</code>; orientation = <code>NORTH</code></td></tr>
<tr><td width="8%"><img src="images/st_oneway_c3.png" alt="images/st_oneway_c3"></td><td width="42%"><b>st_oneway_white</b>: color = <code>WHITE</code>; orientation = <code>SOUTH</code></td><td width="8%"><img src="images/st_oneway_c4.png" alt="images/st_oneway_c4"></td><td width="42%"><b>st_oneway_white</b>: color = <code>WHITE</code>; orientation = <code>WEST</code></td></tr>
</table>
</dd>
</dl>

<hr size="6">
<a name="st_005foxyd"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005foneway" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fpassage" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005foxyd-1"></a>
<h3 class="subsection">9.5.42 st_oxyd</h3>
<a name="index-st_005foxyd"></a>

<p>В этих камнях заключён смысл игры. Открыть все типичные оксиды &mdash; это стандартная цель существующих условий завершения уровня (см. раздел <a href="#Ending-Conditions">Условия завершения</a>). Типичные оксиды при открытии демонстрируют кружок определённого цвета. Камни одинакового цвета необходимо открывать подряд, в противном случае предыдущий камень снова закроется.
</p>
<p>Хотя в большинстве уровней используется по одной паре камней одинакового цвета, на количество таких пар не накладывается никаких ограничений. Вы можете создать, например, три пары голубых оксидов и две пары жёлтых. Это можно сделать, установив значения атрибута &lsquo;<samp>oxydcolor</samp>&rsquo; для каждого оксида.
</p>
<p>В стандартных уровнях для атрибута &lsquo;<samp>oxydcolor</samp>&rsquo; может быть задано значение по умолчанию &lsquo;<samp>OXYD_AUTO</samp>&rsquo;. При выборе данного значения пары оксидов автоматически окрашиваются с использованием стандартной последовательности цветов.
</p>
<p>На количество используемых пар оксидов не накладывается никаких ограничений. Оксиды могут окрашиваться в 12 различных цветов. Но при автоматическом окрашивании оксидов по умолчанию применяются только первые 8. Цвета будут повторяться, начиная с девятой пары, давая игроку возможность составлять произвольные пары оксидов одного цвета. С помощью глобального атрибута <a href="#MaxOxydColor">MaxOxydColor</a> вы можете уменьшить или увеличить количество используемых цветов. Установив для атрибута значение &lsquo;<samp>OXYD_GREEN</samp>&rsquo;, вы можете заставить движок окрашивать оксиды только в первые три цвета. Но будьте осторожны, используя более 8 цветов, так как уровень может получиться чрезвычайно сложным.
</p>
<p>Количество автоматически окрашиваемых оксидов, как правило, должно быть чётным, поскольку при наличии на уровне только одного оксида определённого цвета уровень становится нерешаемым. При наличии на уровне нечётного количества оксидов один оксид получает значение цвета &lsquo;<samp>OXYD_FAKE</samp>&rsquo; и не принимает участия в открытии камней. Но при использовании явного указания цвета оксидов вместо автоматического окрашивания можно установить цвета и для нечётного количества оксидов. Также нечётное количество окрашенных оксидов на уровне остаётся, если один из оксидов удалить в процессе игры. В обоих случаях игра по умолчанию выдаёт сообщение об ошибке. Это исключение можно заблокировать, установив для атрибута <a href="#AllowSingleOxyds">AllowSingleOxyds</a> значение <code>true</code>. В этом случае автор должен самостоятельно обеспечить решаемость уровня.
</p>
<p>Обычно после своего создания оксиды перемешиваются методом &lsquo;<samp>wo:shuffleOxyd()</samp>&rsquo;. В этом процессе принимают участие все оксиды с состоянием &lsquo;<samp>CLOSED</samp>&rsquo;, для которых перемешивание не запрещено явно при помощи атрибута &lsquo;<samp>noshuffle</samp>&rsquo;. Но можно создавать и произвольные правила, которые влияют на процесс перемешивания оксидов и ограничивают его, чтобы обеспечить решаемость уровня и справедливость получающихся комбинаций оксидов (см. раздел <a href="#shuffleOxyd">shuffleOxyd</a>).
</p>
<p>Оксиды отрываются под воздействием прикосновений актёров, дополнительных лазерных лучей, ударов <a href="#st_005fboulder">st_boulder</a>, падений объектов <a href="#ot_005fcannonball">ot_cannonball</a>, выпущенных из камня <a href="#st_005fspitter">st_spitter</a>, или вызовов сообщений. Одиночный открытый оксид находится в состоянии &lsquo;<samp>OPEN</samp>&rsquo;. Если открывается совпадающий с ним по цвету второй оксид, они оба переходят в состояние &lsquo;<samp>OXYDPAIR</samp>&rsquo;. Следует отметить, что это состояние можно запросить, но его нельзя установить вручную.
</p>
<p>Одиночные открытые оксиды закрываются, если был открыт оксид другого цвета, а также при получении сообщения &lsquo;<samp>close</samp>&rsquo; и при операциях установки состояния. Но оксиды, являющиеся частью открытой пары, нельзя закрыть таким способом.
</p>
<p>Все оксиды, включая открытые пары, закрываются при получении сообщения &lsquo;<samp>closeall</samp>&rsquo;, которое отправляется при прикосновении актёра к камню <a href="#st_005fquake">st_quake</a> и оксидам, для которых определён цвет &lsquo;<samp>OXYD_QUAKE</samp>&rsquo;.
</p>
<p>Закрытые оксиды могут выглядеть по-разному. Их внешний вид определяется атрибутом &lsquo;<samp>flavor</samp>&rsquo;. Большинство разновидностей оксидов в закрытом состоянии скрывают свой цвет. Только оксиды разновидности <code>&quot;e&quot;</code> изначально скрывают свой цвет, но если такой оксид открыть и снова закрыть, на нём остаётся небольшое отверстие, которое всё-таки позволяет игроку увидеть цвет оксида.
</p>
<p>Для каждой разновидности оксидов существует простой камень, который выглядит точно так же: &lsquo;<samp>st_fake_oxyda</samp>&rsquo;, &lsquo;<samp>st_fake_oxydb</samp>&rsquo;, &lsquo;<samp>st_fake_oxydc</samp>&rsquo;, &lsquo;<samp>st_fake_oxydd</samp>&rsquo;, &lsquo;<samp>st_fake_oxyde</samp>&rsquo; (см. раздел <a href="#st_005ffake">st_fake</a>). Если необходимо, чтобы псевдооксиды, похожие на настоящие как две капли воды, участвовали в процессе перемешивания, используйте оксиды с цветом &lsquo;<samp>OXYD_FAKE</samp>&rsquo;.
</p>
<p>В процессе игры оксиды могут заново перемешиваться. В этом процессе принимают участие только закрытые оксиды. Правила перемешивания оксидов будут гарантированно соблюдаться и при этих частичных перемешиваниях. Новое перемешивание может быть инициировано сообщением &lsquo;<samp>shuffle</samp>&rsquo;, которое посылается какому-либо оксиду, или использованием оксида с цветом &lsquo;<samp>OXYD_BOLD</samp>&rsquo;. Если открыть такой оксид, например, дотронувшись до него актёром, он перемешивает все оставшиеся оксиды, включая самого себя.
</p>
<p>При инициализации уровня оксид, на который падает лазерный луч, будет иметь состояние &lsquo;<samp>CLOSED</samp>&rsquo;. Поскольку открытие оксидов является целью игры, данное поведение является исключением из принципа снимка (см. раздел <a href="#Snapshot-Principle">Принцип снимка</a>).
</p>
<p>Оксид, который перемещается с участка решётки, освещаемого лазерным лучом, или на такой участок, будет реагировать соответствующими действиями.
</p>
<p>Каждый оксид при своём открытии вызывает действие.  Вызов действия для открытой пары оксидов осуществляется только один раз, в момент, когда второй оксид начинает открываться, в то время как оксиды с цветом &lsquo;<samp>OXYD_BOLD</samp>&rsquo; и &lsquo;<samp>OXYD_QUAKE</samp>&rsquo; выполняют действие после выполнения задачи и проигрывания анимации. Данная особенность позволяет уничтожить эти оксиды в процессе выполнения ими действия, если для атрибута <a href="#safeaction">safeaction</a> было установлено значение <code>true</code>.
</p>
<p>Для замены открытой пары оксидов другими объектами (что, например, используется в уровнях серии &quot;Opal&quot;) непосредственный вызов действия не подходит, поскольку второй оксид в момент вызова ещё не открыл свой цвет. Кроме того, при этом необходимо было бы отслеживать оксиды, чтобы найти для второго оксида такой же открытый оксид. Поэтому у вас есть возможность непосредственно объявить замену, которую необходимо осуществить при открытии пары оксидов. Замена осуществляется сразу же по завершении анимации открытия второго оксида. Подобно объектам <a href="#st_005fsurprise">st_surprise</a>, оксиды позволяют использовать метки строк в качестве значения своего атрибута &lsquo;<samp>selection</samp>&rsquo;. Каждая строка должна быть или типом объекта (см. раздел <a href="#Object-Kind">Тип объекта</a>), или кодом участка решётки, перед которым должен стоять знак &lsquo;<samp>=</samp>&rsquo;.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">ti[&quot;n&quot;] = {&quot;st_nil&quot;}
ti[&quot;g&quot;] = {&quot;st_granite&quot;}
ti[&quot;s&quot;] = {&quot;st_oxyd_e&quot;, selection={&quot;=n&quot;, &quot;=g&quot;}}
</pre></td></tr></table>

<p>Первая метка определяет объект-замену для оксида, открытого первым, последняя определяет объект замену для оксида, совпадающего с предыдущим оксидом по цвету и открытого после него. При наличии только одной метки оба оксида замещаются одинаковыми камнями.
</p>
<p>Объявления секций, на которые делается ссылка с помощью кода, могут, помимо камней, содержать и другие объекты. Но эту возможность следует использовать осторожно и только в случае крайней необходимости.
</p>
<p>Оксид уничтожается любым другим камнем, который появляется на его месте. Если значением атрибута &lsquo;selection&rsquo; не является камень, к объявлению секции-замены целесообразно добавить <code>&quot;st_nil&quot;</code>.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: <code>CLOSED</code>, <code>OPEN</code>, <code>OXYDPAIR</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>CLOSED</code> &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dt> <b>flavor</b>, &nbsp;&nbsp;<i>значения</i>: <code>&quot;a&quot;</code>, <code>&quot;b&quot;</code>, <code>&quot;c&quot;</code>, <code>&quot;d&quot;</code>, <code>&quot;e&quot;</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>&quot;b&quot;</code></dt>
<dd><p>Данный атрибут определяет только внешний вид камня. Различия между оксидами различных типов заключаются в основном в их внешнем виде в закрытом состоянии и в способах открытия камней:
</p><dl compact="compact">
<dt> <code>&quot;a&quot;</code> &mdash; похожий на пирамиду камень бронзового цвета, который открывается, словно цветок</dt>
<dt> <code>&quot;b&quot;</code> &mdash; чёрный плоский камень, при открытии которого используется анимация угасания</dt>
<dt> <code>&quot;c&quot;</code> &mdash; голубой плоский камень, при открытии которого используется концентрическая анимация</dt>
<dt> <code>&quot;d&quot;</code> &mdash; синий камень, похожий на пирамиду, который открывается, словно цветок</dt>
<dt> <code>&quot;e&quot;</code> &mdash; чёрный плоский камень, на котором после закрытия остаётся небольшое отверстие, через которое можно увидеть цвет оксида</dt>
</dl>
</dd>
<dt> <b>oxydcolor</b>, &nbsp;&nbsp;<i>значения</i>: <code>OXYD_AUTO</code>, <code>OXYD_FAKE</code> (обманка), <code>OXYD_QUAKE</code>, <code>OXYD_BOLD</code>, <code>OXYD_BLUE</code> (синий), <code>OXYD_RED</code> (красный), <code>OXYD_GREEN </code>(зелёный), <code>OXYD_YELLOW</code> (жёлтый), <code>OXYD_CYAN</code> (голубой), <code>OXYD_PURPLE</code> (пурпурный), <code>OXYD_WHITE</code> (белый), <code>OXYD_BLACK</code> (чёрный), <code>OXYD_GRAY</code> (серый), <code>OXYD_ORANGE</code> (оранжевый), <code>OXYD_PINE</code> (сосновый), <code>OXYD_BROWN</code> (коричневый);   <i>по умолчанию</i>: <code>OXYD_AUTO</code></dt>
<dd><table>
<tr><td width="8%"><img src="images/st_oxyd_colordots.png" alt="images/st_oxyd_colordots"></td><td width="17%"><code>OXYD_BLUE</code></td><td width="8%"><img src="images/st_oxyd_colordots_2.png" alt="images/st_oxyd_colordots_2"></td><td width="17%"><code>OXYD_RED</code></td><td width="8%"><img src="images/st_oxyd_colordots_3.png" alt="images/st_oxyd_colordots_3"></td><td width="17%"><code>OXYD_GREEN</code></td><td width="8%"><img src="images/st_oxyd_colordots_4.png" alt="images/st_oxyd_colordots_4"></td><td width="17%"><code>OXYD_YELLOW</code></td></tr>
<tr><td width="8%"><img src="images/st_oxyd_colordots_b.png" alt="images/st_oxyd_colordots_b"></td><td width="17%"><code>OXYD_CYAN</code></td><td width="8%"><img src="images/st_oxyd_colordots_b2.png" alt="images/st_oxyd_colordots_b2"></td><td width="17%"><code>OXYD_PURPLE</code></td><td width="8%"><img src="images/st_oxyd_colordots_b3.png" alt="images/st_oxyd_colordots_b3"></td><td width="17%"><code>OXYD_WHITE</code></td><td width="8%"><img src="images/st_oxyd_colordots_b4.png" alt="images/st_oxyd_colordots_b4"></td><td width="17%"><code>OXYD_BLACK</code></td></tr>
<tr><td width="8%"><img src="images/st_oxyd_colordots_c.png" alt="images/st_oxyd_colordots_c"></td><td width="17%"><code>OXYD_GRAY</code></td><td width="8%"><img src="images/st_oxyd_colordots_c2.png" alt="images/st_oxyd_colordots_c2"></td><td width="17%"><code>OXYD_ORANGE</code></td><td width="8%"><img src="images/st_oxyd_colordots_c3.png" alt="images/st_oxyd_colordots_c3"></td><td width="17%"><code>OXYD_PINE</code></td><td width="8%"><img src="images/st_oxyd_colordots_c4.png" alt="images/st_oxyd_colordots_c4"></td><td width="17%"><code>OXYD_BROWN</code></td></tr>
<tr><td width="8%"><img src="images/st_oxyd_colordots_d3.png" alt="images/st_oxyd_colordots_d3"></td><td width="17%"><code>OXYD_BOLD</code></td><td width="8%"><img src="images/st_oxyd_colordots_d4.png" alt="images/st_oxyd_colordots_d4"></td><td width="17%"><code>OXYD_QUAKE</code></td></tr>
</table>
</dd>
<dt> <b>noshuffle</b> &nbsp;&nbsp;<i>з</i>начения <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code></dt>
<dt> <b>static</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code></dt>
<dd><p>Статичные оксиды нельзя ни столкнуть с занимаемого ими участка, ни переместить с помощью обменных камней.
</p></dd>
<dt> <b>selection</b>, &nbsp;&nbsp;<i>значения</i>: метки типов камней и коды участков покрытия; &nbsp;&nbsp;<i>по умолчанию</i>: замена отсутствует</dt>
</dl>

</dd>
<dt> <b>Сообщения:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>signal</b> &nbsp;&nbsp;См. раздел <a href="#signal">signal</a></dt>
<dd><p>Пытается открыть при значении &lsquo;<samp>1</samp>&rsquo; и закрыть при значении &lsquo;<samp>0</samp>&rsquo;.
</p></dd>
<dt> <b>open</b> &nbsp;&nbsp;См. раздел <a href="#open">open</a></dt>
<dt> <b>close</b> &nbsp;&nbsp;См. раздел <a href="#close">close</a></dt>
<dt> <b>closeall</b></dt>
<dd><p>Закрывает все открытые оксиды, если его отправить любому экземпляру объекта.
</p></dd>
<dt> <b>peepall</b></dt>
<dd><p>Если данное сообщение было отправлено любому экземпляру оксида, то все закрытые оксиды разновидности <code>&quot;e&quot;</code> будут иметь отверстие, сквозь которое можно увидеть их цвет.
</p></dd>
<dt> <b>shuffle</b></dt>
<dd><p>При отправлении любому экземпляру объекта заново перемешивает все закрытые оксиды.
</p></dd>
</dl>

</dd>
<dt> <b>Действие:</b> &nbsp;&nbsp;См. раздел <a href="#target">target</a>, &nbsp;&nbsp;см. раздел <a href="#action">action</a></dt>
<dd><p>Всякий раз, когда закрытый оксид (состояние <code>CLOSED</code>) открывается, совершается действие со значением <code>true</code>. Действие совершается сразу после окончания действий оксида (например проверки условий завершений игры, перемешивания или закрытия всех оксидов), которые он совершает после того как откроется . Кроме того, когда оксид переходит в состояние <code>CLOSED</code>, совершается действие со значением <code>false</code>. Обратите внимание, что при переходе от состояния <code>OPEN</code> к <code>OXYDPAIR</code> никаких действий не совершается.
</p>
</dd>
<dt> <b>Разновидности:</b></dt>
<dd>
<dl compact="compact">
<dt> <img src="images/st_oxydb.png" alt="images/st_oxydb"><p> <b>st_oxyd</b>: flavor = <code>&quot;b&quot;</code>
</p></dt>
<dt> <img src="images/st_oxyda.png" alt="images/st_oxyda"><p> <b>st_oxyd_a</b>: flavor = <code>&quot;a&quot;</code>
</p></dt>
<dt> <img src="images/st_oxydb.png" alt="images/st_oxydb"><p> <b>st_oxyd_b</b>: flavor = <code>&quot;b&quot;</code>
</p></dt>
<dt> <img src="images/st_oxydc.png" alt="images/st_oxydc"><p> <b>st_oxyd_c</b>: flavor = <code>&quot;c&quot;</code>
</p></dt>
<dt> <img src="images/st_oxydd.png" alt="images/st_oxydd"><p> <b>st_oxyd_d</b>: flavor = <code>&quot;d&quot;</code>
</p></dt>
<dt> <img src="images/st_oxyde.png" alt="images/st_oxyde"><p> <b>st_oxyd_e</b>: flavor = <code>&quot;e&quot;</code>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="st_005fpassage"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005foxyd" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fplaster" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fpassage-1"></a>
<h3 class="subsection">9.5.43 st_passage</h3>
<a name="index-st_005fpassage"></a>

<p>Это камень чёрного или белого цвета различной формы, который пропускает сквозь себя только актёров соответствующего цвета.
</p>
<p>Форма камня описывается с помощью атрибута &lsquo;<samp>flavor</samp>&rsquo;. Она не влияет на свойства камня, но может определять, насколько заметны будут находящиеся под камнем предметы и актёры.
</p>
<p>Камни данного типа реагируют на сообщения &lsquo;<samp>signal</samp>&rsquo; и &lsquo;<samp>toggle</samp>&rsquo;, а также на <a href="#st_005fboulder">st_boulder</a>, если он ударяется об одну из сторон камня. В обоих случаях камень-проход меняет свой цвет на противоположный. Во втором случае цвет изменяется на короткий промежуток времени, так как болдер изменяет цвет камня дважды. Этого времени достаточно, чтобы актёр прошёл под камнем либо изменил направление болдера, прежде чем он скомандует проходу изменить цвет ещё раз.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>color</b> &nbsp;&nbsp;<i>значения</i>: <code>BLACK</code>, <code>WHITE</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>BLACK</code></dt>
<dd><p>Цвет прохода, который определяет, какие актёры могут проходить через него.
</p></dd>
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: <code>BLACK</code>, <code>WHITE</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>BLACK</code> &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dd><p>Данный атрибут синонимичен атрибуту &lsquo;color&rsquo;.
</p></dd>
<dt> <b>flavor</b> &nbsp;&nbsp;<i>значения</i>: <code>&quot;square&quot;</code>, <code>&quot;slash&quot;</code>, <code>&quot;cross&quot;</code>, <code>&quot;frame&quot;</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>&quot;square&quot;</code></dt>
<dd><p>Внешний вид камня.
</p></dd>
</dl>

</dd>
<dt> <b>Сообщения:</b></dt>
<dd><dl compact="compact">
<dt> <b>signal</b> &nbsp;&nbsp;См. раздел <a href="#signal">signal</a></dt>
<dd><p>Изменяет цвет камня.
</p></dd>
</dl>

</dd>
<dt> <b>Действие:</b> отсутствует</dt>
<dt> <b>Разновидности:</b></dt>
<dd>
<dl compact="compact">
<dt> <img src="images/st_passage_black_square.png" alt="images/st_passage_black_square"><p> <b>st_passage</b>: color = <code>BLACK</code>, flavor = <code>&quot;square&quot;</code>
</p></dt>
<dt> <img src="images/st_passage_black_square.png" alt="images/st_passage_black_square"><p> <b>st_passage_black</b>: color = <code>BLACK</code>, flavor = <code>&quot;square&quot;</code>
</p></dt>
<dt> <img src="images/st_passage_black_slash.png" alt="images/st_passage_black_slash"><p> <b>st_passage_black</b>: color = <code>BLACK</code>, flavor = <code>&quot;slash&quot;</code>
</p></dt>
<dt> <img src="images/st_passage_black_cross.png" alt="images/st_passage_black_cross"><p> <b>st_passage_black</b>: color = <code>BLACK</code> &mdash; flavor = <code>&quot;cross&quot;</code>
</p></dt>
<dt> <img src="images/st_passage_black_frame.png" alt="images/st_passage_black_frame"><p> <b>st_passage_black</b>: color = <code>BLACK</code> &mdash; flavor = <code>&quot;frame&quot;</code>
</p></dt>
<dt> <img src="images/st_passage_white_square.png" alt="images/st_passage_white_square"><p> <b>st_passage_white</b>: color = <code>WHITE</code>, flavor = <code>&quot;square&quot;</code>
</p></dt>
<dt> <img src="images/st_passage_white_slash.png" alt="images/st_passage_white_slash"><p> <b>st_passage_white</b>: color = <code>WHITE</code> &mdash; flavor = <code>&quot;slash&quot;</code>
</p></dt>
<dt> <img src="images/st_passage_white_cross.png" alt="images/st_passage_white_cross"><p> <b>st_passage_white</b>: color = <code>WHITE</code> &mdash; flavor = <code>&quot;cross&quot;</code>
</p></dt>
<dt> <img src="images/st_passage_white_frame.png" alt="images/st_passage_white_frame"><p> <b>st_passage_white</b>: color = <code>WHITE</code> &mdash; flavor = <code>&quot;frame&quot;</code>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="st_005fplaster"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fpassage" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fplop" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fplaster-1"></a>
<h3 class="subsection">9.5.44 st_plaster</h3>
<a name="index-st_005fplaster"></a>

<p>Это камень, вылепленный из гипса. Он существует в нескольких разновидностях, определяемых различными комбинациями значений базовых атрибутов, присущих камням.
</p>
<p>В отличие от похожего на него камня <a href="#st_005fflat">st_flat</a>, гипсовый камень не обладает какими-либо особыми свойствами и ведёт себя как стандартный камень.
</p>
<p>Но для данного камня существуют бьющиеся разновидности. Подобно камню <a href="#st_005fbreak">st_break</a>, он разрушается под воздействием лазерных лучей и возгораний на соседних участках решётки (например, вызванных взрывом объекта <a href="#it_005fdynamite">it_dynamite</a> на соседних по горизонтали и вертикали участках либо взрывами бомб чёрного цвета (<a href="#it_005fbomb">it_bomb</a>) на соседних по диагонали участках решётки). Его также можно разбить молотком (<a href="#it_005fhammer">it_hammer</a>). Но в отличие от <a href="#st_005fbreak">st_break</a>, для него существует разновидность, которая является одновременно и бьющейся, и подвижной. Конечно же, возможные условия разрушения камня обладают приоритетом над возможными условиями его перемещения.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>hollow</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: read only &nbsp;&nbsp;См. раздел <a href="#hollow">hollow</a></dt>
<dt> <b>movable</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: read only &nbsp;&nbsp;См. раздел <a href="#movable">movable</a></dt>
<dt> <b>breakable</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: read only &nbsp;&nbsp;См. раздел <a href="#breakable">breakable</a></dt>
</dl>

</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Действие:</b> отсутствует</dt>
<dt> <b>Разновидности:</b></dt>
<dd>
<dl compact="compact">
<dt> <img src="images/st_plaster.png" alt="images/st_plaster"><p> <b>st_plaster</b>:
</p></dt>
<dt> <img src="images/st_plaster.png" alt="images/st_plaster"><p> <b>st_plaster_hollow</b>: hollow=<code>true</code>
</p></dt>
<dt> <img src="images/st_plaster.png" alt="images/st_plaster"><p> <b>st_plaster_movable</b>: movable=<code>&quot;true&quot;</code>
</p></dt>
<dt> <img src="images/st_plaster.png" alt="images/st_plaster"><p> <b>st_plaster_breakable</b>: breakable=<code>&quot;true&quot;</code>
</p></dt>
<dt> <img src="images/st_plaster.png" alt="images/st_plaster"><p> <b>st_plaster_movebreakable</b>: movable=<code>&quot;true&quot;</code>, breakable=<code>&quot;true&quot;</code>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="st_005fplop"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fplaster" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fpolarswitch" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fplop-1"></a>
<h3 class="subsection">9.5.45 st_plop</h3>
<a name="index-st_005fplop"></a>

<p>Подвижный камень, который при разрушении издаёт звук, похожий на тот, который издаёт упавший в воду предмет (отсюда и его название).
</p>
<p>Этот камень ведет себя точно так же, как и любой другой стандартный подвижный камень. Но в отличие от них, он может разрушиться под воздействием определенных условий. При этом он издаёт такой звук, как будто его кто-то бросил в воду, и испускает искры.
</p>
<p>В настоящее время существует только одна разновидность &mdash; <code>&quot;slate&quot;</code> (шифер), которая называется так из-за своего сине-серого цвета. Она уничтожается, если её сдвинуть на <a href="#fl_005fwater">fl_water</a>, <a href="#fl_005fabyss">fl_abyss</a> или <a href="#fl_005fswamp">fl_swamp</a>. В отличие от объекта <a href="#st_005fbox">st_box</a>, она не образует при этом покрытие.
</p>
<dl compact="compact">
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_plop_slate.png" alt="images/st_plop_slate"><p> <b>st_plop</b>
</p></dt>
<dt> <img src="images/st_plop_slate.png" alt="images/st_plop_slate"><p> <b>st_plop_slate</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="st_005fpolarswitch"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fplop" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fportal" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fpolarswitch-1"></a>
<h3 class="subsection">9.5.46 st_polarswitch</h3>
<a name="index-st_005fpolarswitch"></a>

<p>Специальный переключатель, чередующий свои состояния под влиянием прикосновений актёров. Безусловно, прочие объекты также могут посылать сообщения о действиях, чередующие состояния переключателя.
</p>
<p>Главная цель переключателя заключается в его способности открывать и закрывать путь лазерным лучам. Переключатель непроницаем для лазера в своём состоянии по умолчанию (&lsquo;OFF&rsquo;), но становится прозрачным, если его включить.
</p>
<p>Переключатель выглядит как <a href="#st_005fdarkglass">st_darkglass</a> в непрозрачном выключенном состоянии и как <a href="#st_005flightglass">st_lightglass</a> &mdash; в прозрачном включенном. Как и сквозь другие <a href="#Transparent-Stones">Прозрачные камни</a>, сквозь него могут проходить невидимые актёры.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: <code>ON</code>, <code>OFF</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>OFF</code> &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dd><p>&lsquo;<samp>OFF</samp>&rsquo; &mdash; непрозрачное состояние, &lsquo;<samp>ON</samp>&rsquo; &mdash; прозрачное.
</p></dd>
</dl>

</dd>
<dt> <b>Сообщения:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>signal</b> &nbsp;&nbsp;См. раздел <a href="#signal">signal</a></dt>
<dd><p>Включается при значении &lsquo;<samp>1</samp>&rsquo; и выключается при значении &lsquo;<samp>0</samp>&rsquo;.
</p></dd>
<dt> <b>on</b> &nbsp;&nbsp;См. раздел <a href="#on">on</a></dt>
<dt> <b>off</b> &nbsp;&nbsp;См. раздел <a href="#off">off</a></dt>
</dl>

</dd>
<dt> <b>Действие:</b> &nbsp;&nbsp;См. раздел <a href="#target">target</a>, &nbsp;&nbsp;см. раздел <a href="#action">action</a></dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_darkglass.png" alt="images/st_darkglass"><p> <b>st_polarswitch</b>: state = <code>OFF</code>
</p></dt>
<dt> <img src="images/st_lightglass.png" alt="images/st_lightglass"><p> <b>st_polarswitch</b>: state = <code>ON</code>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="st_005fportal"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fpolarswitch" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fpull" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fportal-1"></a>
<h3 class="subsection">9.5.47 st_portal</h3>
<a name="index-st_005fportal"></a>

<p>Это своего рода врата, через которые могут пройти только определённые типы актёров. Подобно камню <a href="#st_005fgrate">st_grate</a>, у портала есть металлическая оправа, но он не пропускает сквозь себя всех без исключения актёров.
</p>
<p>Портал пропускает сквозь себя только тех актёров, которые указаны в значении атрибута &lsquo;<samp>flavor</samp>&rsquo;.
</p>
<p>Разновидность <code>&quot;horse&quot;</code> пропускает сквозь себя только актёров типа <a href="#ac_005fhorse">ac_horse</a>.
</p>
<p>Разновидность <code>&quot;pearl&quot;</code> пропускает сквозь себя только актёров типа <a href="#ac_005fpearl">ac_pearl</a>.
</p>

<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>flavor</b> &nbsp;&nbsp;<i>значения</i>: <code>&quot;horse&quot;</code>, <code>&quot;pearl&quot;</code>; &nbsp;&nbsp;<i>по умолчанию</i> <code>&quot;horse&quot;</code>; &nbsp;&nbsp;<i>доступ</i>: read only</dt>
</dl>

</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Действие:</b> отсутствует</dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_portal_horse.png" alt="images/st_portal_horse"><p> <b>st_portal</b>: flavor=<code>&quot;horse&quot;</code>
</p></dt>
<dt> <img src="images/st_portal_horse.png" alt="images/st_portal_horse"><p> <b>st_portal_horse</b>: flavor=<code>&quot;horse&quot;</code>
</p></dt>
<dt> <img src="images/st_portal_horse.png" alt="images/st_portal_horse"><p> <b>st_portal_pearl</b>: flavor=<code>&quot;pearl&quot;</code>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="st_005fpull"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fportal" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fpuzzle" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fpull-1"></a>
<h3 class="subsection">9.5.48 st_pull</h3>
<a name="index-st_005fpull"></a>

<p>Обратный камень под воздействием импульса перемещается в направлении, противоположном направлению импульса. Таким образом, его нельзя толкать, как другие подвижные камни. Но если актёр ударит по нему, камень ведёт себя так, как будто его толкнули с противоположной стороны. Если на участке решётки, на которую перемещается обратный камень, находится другой камень, оба камня меняются местами. То же самое происходит, когда камень получает импульс через <a href="#ot_005fwire">ot_wire</a> или соседний <a href="#st_005fstoneimpulse">st_stoneimpulse</a>. Похожим образом ведёт себя <a href="#st_005fswap">st_swap</a>, который меняется местами с камнями, расположенными в направлении, соответствующем направлению импульса.
</p>
<p>Актёры на участке решётки, на который перемещается обратный камень, включая и актёра, ударившего камень, проходят сквозь него, а не оказываются под ним. Актёры появляются на участке решётки, который до этого момента занимал обратный камень, с сохранением первоначальной скорости.
</p>
<p>Подобно другим стеклянным камням, обратный камень проницаем для лазера.
</p>
<p>Совсем не обязательно, чтобы на участке решётки, на который перемещается обратный камень, находился другой камень, с которым можно было бы обменяться местами. Но если на этом участке камень всё-таки находится, то для того, чтобы обмен произошёл, необходимо соблюсти некоторые условия. <a href="#Cluster-Stones">Строительные камни</a>, образующие скопления, статичные (&lsquo;<samp>static</samp>&rsquo;) оксиды (<a href="#st_005foxyd">st_oxyd</a>), а также другие обменные (<a href="#st_005fswap">st_swap</a>) либо обратные камни, в данный момент сами меняющиеся местами с другими камнями, не будут участвовать в перемещении.
</p>
<p>Подобные перемещения камней не вызывают трансформаций предметов, которые происходят, если актёр толкает на предмет подвижный камень. Но камни, задействованные в перемещении, будут реагировать на новое покрытие: так, камни <a href="#st_005fbox">st_box</a> будут тонуть, если их переместить на воду.
</p>
<p>Кроме того, перемещение не является постепенным в том, что касается нажатия триггеров (<a href="#it_005ftrigger">it_trigger</a>) и проницаемости для лазера. Если в перемещении задействован непрозрачный камень, то в любой момент времени свет лазера будет проникать только на один из двух участков решётки. Если задействованный в перемещении камень является парящим и, таким образом, не может нажимать на <a href="#it_005ftrigger">it_trigger</a>, обратный камень будет в каждый момент времени нажимать только один триггер: старый триггер будет отпущен прежде, чем будет нажат новый, как происходит и в случае с перемещениями любых других камней.
</p>
<dl compact="compact">
<dt> <b>Атрибуты: </b>отсутствуют</dt>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Действие:</b> отсутствует</dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_pull.png" alt="images/st_pull"><p> <b>st_pull</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="st_005fpuzzle"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fpull" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fquake" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fpuzzle-1"></a>
<h3 class="subsection">9.5.49 st_puzzle</h3>
<a name="index-st_005fpuzzle"></a>

<p>Камни-головоломки могут образовывать большие скопления камней, которые перемещаются одновременно и могут быть разрушены одновременно. Камни-головоломки бывают двух видов &mdash; синие и жёлтые, &mdash; которые отличаются своими свойствами. Каждый тип насчитывает 16 различных камней, которые отличаются расположением разъёмов, к которым могут присоединяться соседние камни. Кроме того, существуют полые камни обоих цветов и всех типов соединений.
</p>
<p>Скопление камней является законченным, если все разъёмы всех камней соединены с соответствующими разъёмами соседних камней, независимо от того, являются ли эти камни полыми или же непроницаемыми. Во фрагменте же скопления имеется как минимум один камень с открытым разъёмом. Отдельный камень-головоломка, не имеющий открытых разъёмов, считается законченным скоплением.
</p>
<p>Камни-головоломки обладают многочисленными свойствами. Законченные скопления могут взрываться и потом полностью пропадать. Фрагменты скоплений и законченные скопления можно перемещать, и они будут тонуть на некоторых типах покрытий, образуя мост. Ряды и колонки прилегающих друг к другу камней-головоломок одного цвета, как связанных, так и не связанных, могут изменять свой порядок, давая игроку возможность располагать части головоломки требуемым образом.
</p>
<p>Синие камни-головоломки, а также составленные из них скопления и фрагменты скоплений могут под воздействием ударов актёров либо при помощи импульсов, исходящих от объектов <a href="#ot_005fwire">ot_wire</a> или <a href="#st_005fstoneimpulse">st_stoneimpulse</a>. Естественно, на участках решётки, на которые перемещается головоломка, не должно быть других камней. Если на всех участках решётки, на которые перемещается головоломка, присутствует покрытие <a href="#fl_005fwater">fl_water</a>, синяя головоломка утонет, превратившись в объект, заданный глобальным атрибутом <a href="#FallenPuzzle">FallenPuzzle</a>. По умолчанию она превращается в <a href="#fl_005fgray">fl_gray</a>, образуя мост через воду. Пользователь может не допустить затопления камня-головоломки, если толкнёт его с помощью волшебной палочки (<a href="#it_005fmagicwand">it_magicwand</a>), находящейся в начале инвентаря. Если на всех участках решётки, на которых оказывается головоломка, присутствует покрытие <a href="#fl_005fabyss">fl_abyss</a>, то мост образуют только законченные скопления камней. Если головоломка оказывается в месте, где присутствуют и пропасть, и вода (и только они, причём достаточно даже одного участка покрытия с пропастью), то затонут только законченные скопления синих камней. Обратите внимание, что головоломки тонут только после перемещения. Если переместить фрагмент головоломки к другому фрагменту, образовав законченное скопление над бездной, новообразованное скопление не превратится в мост. Это произойдет только при следующем перемещении скопления. Если два или более камней в скоплении получают от соединённой с ними проволоки импульсы, источником которых служит одно и то же событие, то скопление переместится несколько раз. Но оно затонет при первой же возможности.
</p>
<p>Что касается жёлтых камней-головоломок, актёры могут перемещать только отдельные несвязанные камни. Эти камни не тонут в <a href="#fl_005fwater">fl_water</a> и не падают в <a href="#fl_005fabyss">fl_abyss</a>. Актёры не могут перемещать скопления, состоящие из двух и более камней. Но под воздействием импульсов, идущих от камней, они перемещаются так же, как и синие камни.
</p>
<p>Все перемещения камней-головоломок не вызывают стандартных превращений предметов (изменения достоинства монет (<a href="#it_005fcoin">it_coin</a>), взрывов бомб (<a href="#it_005fbomb">it_bomb</a>) и т. д.). Но эти камни не парят над поверхностью и, следовательно, надавливают на триггеры (<a href="#it_005ftrigger">it_trigger</a>) и закрывают мосты (<a href="#fl_005fbridge">fl_bridge</a>).
</p>
<p>Полые камни беспрепятственно пропускают сквозь себя актёров (перемещающихся на покрытии или в прыжке) и лазерные лучи.
</p>
<p>Законченные скопления могут взрываться, пропадая без следа. Для этого нужно, чтобы рядом с ними не было других камней-головоломок того же цвета. Такие скопления взрываются, если  воздействовать лазерным лучом на какой-либо непроницаемый камень в скоплении. Жёлтые скопления взрываются от любого удара актёра. Синие &mdash; только если их ударить волшебной палочкой (<a href="#it_005fmagicwand">it_magicwand</a>). Кроме того законченные скопления взорвутся, когда ядро (<a href="#ot_005fcannonball">ot_cannonball</a>), выпущенное из пушки (<a href="#st_005fspitter">st_spitter</a>), упадёт на один из камней скопления.
</p>
<p>Во время взрыва головоломки будут оставаться на одном месте и не взаимодействовать с другими объектами. Прикосновение к взрывающемуся камню для актёра смертельно, но актёр может вызвать взрыв, находясь внутри полого камня, и затем без вреда для себя стоять под этим камнем до полного уничтожения головоломки.
</p>
<p>Последовательность камней-головоломок внутри колонки или ряда может быть изменена. Синие камни реагируют лишь на прикосновения волшебной палочкой, жёлтые &mdash; на любые прикосновения актёров. Камни всех цветов изменяют своё положение под воздействием лазера. Все ротации могут начинаться только с непроницаемого камня. Все следующие за ним камни-головоломки того же цвета сдвинутся вперёд на одну позицию, а последний камень переместится в начало ряда. Эта операция называется <code>&quot;push_rotate&quot;</code> и может быть также вызвана сообщением.
</p>
<p>В случае прикосновений актёра возможный взрыв предшествует перемещениям, а перемещения предшествуют ротации. Таким образом, если ряд синих камней является частью подвижного фрагмента скопления, прикасаться к нему волшебной палочкой следует с осторожностью. Если скорость актёра достаточна для удара, вместо ожидаемой ротации скопление переместится. Импульсы от ударов актёров по синим камням, не вызвавших ни перемещения, ни ротации, будут передаваться посредством объекта <a href="#ot_005fwire">ot_wire</a>, присоединённого к данному камню. Удары по жёлтым камням не передаются другим камням через <a href="#ot_005fwire">ot_wire</a><B>.</B>
</p>
<p>Как и <a href="#Cluster-Stones">Строительные камни</a>, камни-головоломки имеют атрибут &lsquo;<samp>cluster</samp>&rsquo;. Новый камень-головоломка автоматически присоединяется к соседнему камню того же цвета, принадлежащему тому же скоплению. Но после этого камень, конечно же, не изменит расположение своих разъёмов при последующих перемещениях или ротациях. При написании уровня вам следует иметь в виду, что камни-головоломки в процессе игры могут быть перемещены на участки решётки, соседние с теми, на которых вы хотите создать головоломку. Новые камни могут автоматически присоединиться к таким камням, неожиданно оказавшимся рядом, если их цвета и номер скопления совпадают.
</p>
<p>Преобразование <a href="#res_002epuzzle">res.puzzle</a> предоставляет простые способы установки и изменения расположения камней-головоломок. Атрибуты &lsquo;<samp>algorithm</samp>&rsquo; и &lsquo;<samp>intensity</samp>&rsquo; используются только преобразованием.
</p>
<p>Если требуется расположить камни головоломки в случайном порядке, можно воспользоваться сообщениями &lsquo;<samp>get_adjacents</samp>&rsquo;, которое возвращает группу прилегающих друг к другу камней соответствующего цвета, и &lsquo;<samp>pull_rotate</samp>&rsquo;, которое является операцией, обратной <code>&quot;push_rotate&quot;</code>.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dt> <b>color</b> &nbsp;&nbsp;<i>значения</i>: <code>BLUE</code>, <code>YELLOW</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>BLUE</code></dt>
<dd><p>Определяет цвет камней-головоломок. Прилегающие камни одного цвета и с подходящими разъёмами объединяются во фрагменты скоплений.
</p>
</dd>
<dt> <b>connections</b>, &nbsp;&nbsp;<i>значения</i>: string; &nbsp;&nbsp;<i>по умолчанию</i>: <code>nil</code></dt>
<dd><p>Описывает расположение разъёмов в камне-головоломке. Строка является подстрокой <code>&quot;nesw&quot;</code>, перечисляющей разъёмы. Последовательность сторон &mdash; север, восток, юг, запад &mdash; является обязательной при доступе для чтения, но произвольной при доступе для записи.
</p>
</dd>
<dt> <b>cluster</b> &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: <code>nil</code></dt>
<dd><p>Если задать значение этого атрибута, то все прилегающие друг к другу камни-головоломки одного цвета и с одинаковым номером скопления образуют скопление. Данный атрибут обладает приоритетом над любыми эксплицитно заданными связями камней.
</p>
</dd>
<dt> <b>hollow</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code></dt>
<dd><p>У полых камней-головоломок в центре находится отверстие, и актёры могут беспрепятственно проходить сквозь них.
</p>
</dd>
<dt> <b>algorithm</b>, &nbsp;&nbsp;<i>значения</i>: string; &nbsp;&nbsp;<i>по умолчанию</i>: <code>nil</code></dt>
<dt> <b>intensity</b> &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: <code>3</code></dt>
<dt> <b>Сообщения:</b></dt>
<dd><dl compact="compact">
<dt> <b>get_adjacents</b></dt>
<dd><p>Возвращает совокупность всех прилегающих камней-головоломок одного цвета, независимо от того, соединены они или нет. Совокупность возвращается в виде группы.
</p></dd>
<dt> <b><b>pull_rotate</b></b>, &nbsp;&nbsp;<i>тип значения:</i> orientation</dt>
<dd><p>Совершает действие, обратное &lsquo;<samp>push_rotate</samp>&rsquo;, начиная с заданного камня ряда в заданном направлении.
</p></dd>
<dt> <b>push_rotate</b>, &nbsp;&nbsp;<i>тип значения</i>: orientation</dt>
<dd><p>Осуществляет ротацию камней, как описано выше, начиная с заданного камня ряда в заданном направлении.
</p>
</dd>
</dl>

</dd>
<dt> <b>Действие:</b> отсутствует</dt>
<dt> <b>Разновидности:</b></dt>
<dd>
<table>
<tr><td width="8%"><img src="images/st_puzzle_blue.png" alt="images/st_puzzle_blue"></td><td width="42%"><b>st_puzzle_blue</b>: color = <code>BLUE</code>, connections = <code>&quot;&quot;</code>, hollow = <code>false</code></td><td width="8%"><img src="images/st_puzzle_blue_2.png" alt="images/st_puzzle_blue_2"></td><td width="42%"><b>st_puzzle_blue</b>: color = <code>BLUE</code>, connections = <code>&quot;w&quot;</code>, hollow = <code>false</code></td></tr>
<tr><td width="8%"><img src="images/st_puzzle_blue_3.png" alt="images/st_puzzle_blue_3"></td><td width="42%"><b>st_puzzle_blue</b>: color = <code>BLUE</code>, connections = <code>&quot;s&quot;</code>, hollow = <code>false</code></td><td width="8%"><img src="images/st_puzzle_blue_4.png" alt="images/st_puzzle_blue_4"></td><td width="42%"><b>st_puzzle_blue</b>: color = <code>BLUE</code>, connections = <code>&quot;sw&quot;</code>, hollow = <code>false</code></td></tr>
<tr><td width="8%"><img src="images/st_puzzle_blue_b.png" alt="images/st_puzzle_blue_b"></td><td width="42%"><b>st_puzzle_blue</b>: color = <code>BLUE</code>, connections = <code>&quot;e&quot;</code>, hollow = <code>false</code></td><td width="8%"><img src="images/st_puzzle_blue_b2.png" alt="images/st_puzzle_blue_b2"></td><td width="42%"><b>st_puzzle_blue</b>: color = <code>BLUE</code>, connections = <code>&quot;ew&quot;</code>, hollow = <code>false</code></td></tr>
<tr><td width="8%"><img src="images/st_puzzle_blue_b3.png" alt="images/st_puzzle_blue_b3"></td><td width="42%"><b>st_puzzle_blue</b>: color = <code>BLUE</code>, connections = <code>&quot;es&quot;</code>, hollow = <code>false</code></td><td width="8%"><img src="images/st_puzzle_blue_b4.png" alt="images/st_puzzle_blue_b4"></td><td width="42%"><b>st_puzzle_blue</b>: color = <code>BLUE</code>, connections = <code>&quot;esw&quot;</code>, hollow = <code>false</code></td></tr>
<tr><td width="8%"><img src="images/st_puzzle_blue_c.png" alt="images/st_puzzle_blue_c"></td><td width="42%"><b>st_puzzle_blue</b>: color = <code>BLUE</code>, connections = <code>&quot;n&quot;</code>, hollow = <code>false</code></td><td width="8%"><img src="images/st_puzzle_blue_c2.png" alt="images/st_puzzle_blue_c2"></td><td width="42%"><b>st_puzzle_blue</b>: color = <code>BLUE</code>, connections = <code>&quot;nw&quot;</code>, hollow = <code>false</code></td></tr>
<tr><td width="8%"><img src="images/st_puzzle_blue_c3.png" alt="images/st_puzzle_blue_c3"></td><td width="42%"><b>st_puzzle_blue</b>: color = <code>BLUE</code>, connections = <code>&quot;ns&quot;</code>, hollow = <code>false</code></td><td width="8%"><img src="images/st_puzzle_blue_c4.png" alt="images/st_puzzle_blue_c4"></td><td width="42%"><b>st_puzzle_blue</b>: color = <code>BLUE</code>, connections = <code>&quot;nsw&quot;</code>, hollow = <code>false</code></td></tr>
<tr><td width="8%"><img src="images/st_puzzle_blue_d.png" alt="images/st_puzzle_blue_d"></td><td width="42%"><b>st_puzzle_blue</b>: color = <code>BLUE</code>, connections = <code>&quot;ne&quot;</code>, hollow = <code>false</code></td><td width="8%"><img src="images/st_puzzle_blue_d2.png" alt="images/st_puzzle_blue_d2"></td><td width="42%"><b>st_puzzle_blue</b>: color = <code>BLUE</code>, connections = <code>&quot;new&quot;</code>, hollow = <code>false</code></td></tr>
<tr><td width="8%"><img src="images/st_puzzle_blue_d3.png" alt="images/st_puzzle_blue_d3"></td><td width="42%"><b>st_puzzle_blue</b>: color = <code>BLUE</code>, connections = <code>&quot;nes&quot;</code>, hollow = <code>false</code></td><td width="8%"><img src="images/st_puzzle_blue_d4.png" alt="images/st_puzzle_blue_d4"></td><td width="42%"><b>st_puzzle_blue</b>: color = <code>BLUE</code>, connections = <code>&quot;nesw&quot;</code>, hollow = <code>false</code></td></tr>
<tr><td width="8%"><img src="images/st_puzzle_blue_hollow.png" alt="images/st_puzzle_blue_hollow"></td><td width="42%"><b>st_puzzle_blue</b>: color = <code>BLUE</code>, connections = <code>&quot;&quot;</code>, hollow = <code>true</code></td><td width="8%"><img src="images/st_puzzle_blue_hollow_2.png" alt="images/st_puzzle_blue_hollow_2"></td><td width="42%"><b>st_puzzle_blue</b>: color = <code>BLUE</code>, connections = <code>&quot;w&quot;</code>, hollow = <code>true</code></td></tr>
<tr><td width="8%"><img src="images/st_puzzle_blue_hollow_3.png" alt="images/st_puzzle_blue_hollow_3"></td><td width="42%"><b>st_puzzle_blue</b>: color = <code>BLUE</code>, connections = <code>&quot;s&quot;</code>, hollow = <code>true</code></td><td width="8%"><img src="images/st_puzzle_blue_hollow_4.png" alt="images/st_puzzle_blue_hollow_4"></td><td width="42%"><b>st_puzzle_blue</b>: color = <code>BLUE</code>, connections = <code>&quot;sw&quot;</code>, hollow = <code>true</code></td></tr>
<tr><td width="8%"><img src="images/st_puzzle_blue_hollow_b.png" alt="images/st_puzzle_blue_hollow_b"></td><td width="42%"><b>st_puzzle_blue</b>: color = <code>BLUE</code>, connections = <code>&quot;e&quot;</code>, hollow = <code>true</code></td><td width="8%"><img src="images/st_puzzle_blue_hollow_b2.png" alt="images/st_puzzle_blue_hollow_b2"></td><td width="42%"><b>st_puzzle_blue</b>: color = <code>BLUE</code>, connections = <code>&quot;ew&quot;</code>, hollow = <code>true</code></td></tr>
<tr><td width="8%"><img src="images/st_puzzle_blue_hollow_b3.png" alt="images/st_puzzle_blue_hollow_b3"></td><td width="42%"><b>st_puzzle_blue</b>: color = <code>BLUE</code>, connections = <code>&quot;es&quot;</code>, hollow = <code>true</code></td><td width="8%"><img src="images/st_puzzle_blue_hollow_b4.png" alt="images/st_puzzle_blue_hollow_b4"></td><td width="42%"><b>st_puzzle_blue</b>: color = <code>BLUE</code>, connections = <code>&quot;esw&quot;</code>, hollow = <code>true</code></td></tr>
<tr><td width="8%"><img src="images/st_puzzle_blue_hollow_c.png" alt="images/st_puzzle_blue_hollow_c"></td><td width="42%"><b>st_puzzle_blue</b>: color = <code>BLUE</code>, connections = <code>&quot;n&quot;</code>, hollow = <code>true</code></td><td width="8%"><img src="images/st_puzzle_blue_hollow_c2.png" alt="images/st_puzzle_blue_hollow_c2"></td><td width="42%"><b>st_puzzle_blue</b>: color = <code>BLUE</code>, connections = <code>&quot;nw&quot;</code>, hollow = <code>true</code></td></tr>
<tr><td width="8%"><img src="images/st_puzzle_blue_hollow_c3.png" alt="images/st_puzzle_blue_hollow_c3"></td><td width="42%"><b>st_puzzle_blue</b>: color = <code>BLUE</code>, connections = <code>&quot;ns&quot;</code>, hollow = <code>true</code></td><td width="8%"><img src="images/st_puzzle_blue_hollow_c4.png" alt="images/st_puzzle_blue_hollow_c4"></td><td width="42%"><b>st_puzzle_blue</b>: color = <code>BLUE</code>, connections = <code>&quot;nsw&quot;</code>, hollow = <code>true</code></td></tr>
<tr><td width="8%"><img src="images/st_puzzle_blue_hollow_d.png" alt="images/st_puzzle_blue_hollow_d"></td><td width="42%"><b>st_puzzle_blue</b>: color = <code>BLUE</code>, connections = <code>&quot;ne&quot;</code>, hollow = <code>true</code></td><td width="8%"><img src="images/st_puzzle_blue_hollow_d2.png" alt="images/st_puzzle_blue_hollow_d2"></td><td width="42%"><b>st_puzzle_blue</b>: color = <code>BLUE</code>, connections = <code>&quot;new&quot;</code>, hollow = <code>true</code></td></tr>
<tr><td width="8%"><img src="images/st_puzzle_blue_hollow_d3.png" alt="images/st_puzzle_blue_hollow_d3"></td><td width="42%"><b>st_puzzle_blue</b>: color = <code>BLUE</code>, connections = <code>&quot;nes&quot;</code>, hollow = <code>true</code></td><td width="8%"><img src="images/st_puzzle_blue_hollow_d4.png" alt="images/st_puzzle_blue_hollow_d4"></td><td width="42%"><b>st_puzzle_blue</b>: color = <code>BLUE</code>, connections = <code>&quot;nesw&quot;</code>, hollow = <code>true</code></td></tr>
<tr><td width="8%"><img src="images/st_puzzle_yellow.png" alt="images/st_puzzle_yellow"></td><td width="42%"><b>st_puzzle_yellow</b>: color = <code>YELLOW</code>, connections = <code>&quot;&quot;</code>, hollow = <code>false</code></td><td width="8%"><img src="images/st_puzzle_yellow_2.png" alt="images/st_puzzle_yellow_2"></td><td width="42%"><b>st_puzzle_yellow</b>: color = <code>YELLOW</code>, connections = <code>&quot;w&quot;</code>, hollow = <code>false</code></td></tr>
<tr><td width="8%"><img src="images/st_puzzle_yellow_3.png" alt="images/st_puzzle_yellow_3"></td><td width="42%"><b>st_puzzle_yellow</b>: color = <code>YELLOW</code>, connections = <code>&quot;s&quot;</code>, hollow = <code>false</code></td><td width="8%"><img src="images/st_puzzle_yellow_4.png" alt="images/st_puzzle_yellow_4"></td><td width="42%"><b>st_puzzle_yellow</b>: color = <code>YELLOW</code>, connections = <code>&quot;sw&quot;</code>, hollow = <code>false</code></td></tr>
<tr><td width="8%"><img src="images/st_puzzle_yellow_b.png" alt="images/st_puzzle_yellow_b"></td><td width="42%"><b>st_puzzle_yellow</b>: color = <code>YELLOW</code>, connections = <code>&quot;e&quot;</code>, hollow = <code>false</code></td><td width="8%"><img src="images/st_puzzle_yellow_b2.png" alt="images/st_puzzle_yellow_b2"></td><td width="42%"><b>st_puzzle_yellow</b>: color = <code>YELLOW</code>, connections = <code>&quot;ew&quot;</code>, hollow = <code>false</code></td></tr>
<tr><td width="8%"><img src="images/st_puzzle_yellow_b3.png" alt="images/st_puzzle_yellow_b3"></td><td width="42%"><b>st_puzzle_yellow</b>: color = <code>YELLOW</code>, connections = <code>&quot;es&quot;</code>, hollow = <code>false</code></td><td width="8%"><img src="images/st_puzzle_yellow_b4.png" alt="images/st_puzzle_yellow_b4"></td><td width="42%"><b>st_puzzle_yellow</b>: color = <code>YELLOW</code>, connections = <code>&quot;esw&quot;</code>, hollow = <code>false</code></td></tr>
<tr><td width="8%"><img src="images/st_puzzle_yellow_c.png" alt="images/st_puzzle_yellow_c"></td><td width="42%"><b>st_puzzle_yellow</b>: color = <code>YELLOW</code>, connections = <code>&quot;n&quot;</code>, hollow = <code>false</code></td><td width="8%"><img src="images/st_puzzle_yellow_c2.png" alt="images/st_puzzle_yellow_c2"></td><td width="42%"><b>st_puzzle_yellow</b>: color = <code>YELLOW</code>, connections = <code>&quot;nw&quot;</code>, hollow = <code>false</code></td></tr>
<tr><td width="8%"><img src="images/st_puzzle_yellow_c3.png" alt="images/st_puzzle_yellow_c3"></td><td width="42%"><b>st_puzzle_yellow</b>: color = <code>YELLOW</code>, connections = <code>&quot;ns&quot;</code>, hollow = <code>false</code></td><td width="8%"><img src="images/st_puzzle_yellow_c4.png" alt="images/st_puzzle_yellow_c4"></td><td width="42%"><b>st_puzzle_yellow</b>: color = <code>YELLOW</code>, connections = <code>&quot;nsw&quot;</code>, hollow = <code>false</code></td></tr>
<tr><td width="8%"><img src="images/st_puzzle_yellow_d.png" alt="images/st_puzzle_yellow_d"></td><td width="42%"><b>st_puzzle_yellow</b>: color = <code>YELLOW</code>, connections = <code>&quot;ne&quot;</code>, hollow = <code>false</code></td><td width="8%"><img src="images/st_puzzle_yellow_d2.png" alt="images/st_puzzle_yellow_d2"></td><td width="42%"><b>st_puzzle_yellow</b>: color = <code>YELLOW</code>, connections = <code>&quot;new&quot;</code>, hollow = <code>false</code></td></tr>
<tr><td width="8%"><img src="images/st_puzzle_yellow_d3.png" alt="images/st_puzzle_yellow_d3"></td><td width="42%"><b>st_puzzle_yellow</b>: color = <code>YELLOW</code>, connections = <code>&quot;nes&quot;</code>, hollow = <code>false</code></td><td width="8%"><img src="images/st_puzzle_yellow_d4.png" alt="images/st_puzzle_yellow_d4"></td><td width="42%"><b>st_puzzle_yellow</b>: color = <code>YELLOW</code>, connections = <code>&quot;nesw&quot;</code>, hollow = <code>false</code></td></tr>
<tr><td width="8%"><img src="images/st_puzzle_yellow_hollow.png" alt="images/st_puzzle_yellow_hollow"></td><td width="42%"><b>st_puzzle_yellow</b>: color = <code>YELLOW</code>, connections = <code>&quot;&quot;</code>, hollow = <code>true</code></td><td width="8%"><img src="images/st_puzzle_yellow_hollow_2.png" alt="images/st_puzzle_yellow_hollow_2"></td><td width="42%"><b>st_puzzle_yellow</b>: color = <code>YELLOW</code>, connections = <code>&quot;w&quot;</code>, hollow = <code>true</code></td></tr>
<tr><td width="8%"><img src="images/st_puzzle_yellow_hollow_3.png" alt="images/st_puzzle_yellow_hollow_3"></td><td width="42%"><b>st_puzzle_yellow</b>: color = <code>YELLOW</code>, connections = <code>&quot;s&quot;</code>, hollow = <code>true</code></td><td width="8%"><img src="images/st_puzzle_yellow_hollow_4.png" alt="images/st_puzzle_yellow_hollow_4"></td><td width="42%"><b>st_puzzle_yellow</b>: color = <code>YELLOW</code>, connections = <code>&quot;sw&quot;</code>, hollow = <code>true</code></td></tr>
<tr><td width="8%"><img src="images/st_puzzle_yellow_hollow_b.png" alt="images/st_puzzle_yellow_hollow_b"></td><td width="42%"><b>st_puzzle_yellow</b>: color = <code>YELLOW</code>, connections = <code>&quot;e&quot;</code>, hollow = <code>true</code></td><td width="8%"><img src="images/st_puzzle_yellow_hollow_b2.png" alt="images/st_puzzle_yellow_hollow_b2"></td><td width="42%"><b>st_puzzle_yellow</b>: color = <code>YELLOW</code>, connections = <code>&quot;ew&quot;</code>, hollow = <code>true</code></td></tr>
<tr><td width="8%"><img src="images/st_puzzle_yellow_hollow_b3.png" alt="images/st_puzzle_yellow_hollow_b3"></td><td width="42%"><b>st_puzzle_yellow</b>: color = <code>YELLOW</code>, connections = <code>&quot;es&quot;</code>, hollow = <code>true</code></td><td width="8%"><img src="images/st_puzzle_yellow_hollow_b4.png" alt="images/st_puzzle_yellow_hollow_b4"></td><td width="42%"><b>st_puzzle_yellow</b>: color = <code>YELLOW</code>, connections = <code>&quot;esw&quot;</code>, hollow = <code>true</code></td></tr>
<tr><td width="8%"><img src="images/st_puzzle_yellow_hollow_c.png" alt="images/st_puzzle_yellow_hollow_c"></td><td width="42%"><b>st_puzzle_yellow</b>: color = <code>YELLOW</code>, connections = <code>&quot;n&quot;</code>, hollow = <code>true</code></td><td width="8%"><img src="images/st_puzzle_yellow_hollow_c2.png" alt="images/st_puzzle_yellow_hollow_c2"></td><td width="42%"><b>st_puzzle_yellow</b>: color = <code>YELLOW</code>, connections = <code>&quot;nw&quot;</code>, hollow = <code>true</code></td></tr>
<tr><td width="8%"><img src="images/st_puzzle_yellow_hollow_c3.png" alt="images/st_puzzle_yellow_hollow_c3"></td><td width="42%"><b>st_puzzle_yellow</b>: color = <code>YELLOW</code>, connections = <code>&quot;ns&quot;</code>, hollow = <code>true</code></td><td width="8%"><img src="images/st_puzzle_yellow_hollow_c4.png" alt="images/st_puzzle_yellow_hollow_c4"></td><td width="42%"><b>st_puzzle_yellow</b>: color = <code>YELLOW</code>, connections = <code>&quot;nsw&quot;</code>, hollow = <code>true</code></td></tr>
<tr><td width="8%"><img src="images/st_puzzle_yellow_hollow_d.png" alt="images/st_puzzle_yellow_hollow_d"></td><td width="42%"><b>st_puzzle_yellow</b>: color = <code>YELLOW</code>, connections = <code>&quot;ne&quot;</code>, hollow = <code>true</code></td><td width="8%"><img src="images/st_puzzle_yellow_hollow_d2.png" alt="images/st_puzzle_yellow_hollow_d2"></td><td width="42%"><b>st_puzzle_yellow</b>: color = <code>YELLOW</code>, connections = <code>&quot;new&quot;</code>, hollow = <code>true</code></td></tr>
<tr><td width="8%"><img src="images/st_puzzle_yellow_hollow_d3.png" alt="images/st_puzzle_yellow_hollow_d3"></td><td width="42%"><b>st_puzzle_yellow</b>: color = <code>YELLOW</code>, connections = <code>&quot;nes&quot;</code>, hollow = <code>true</code></td><td width="8%"><img src="images/st_puzzle_yellow_hollow_d4.png" alt="images/st_puzzle_yellow_hollow_d4"></td><td width="42%"><b>st_puzzle_yellow</b>: color = <code>YELLOW</code>, connections = <code>&quot;nesw&quot;</code>, hollow = <code>true</code></td></tr>
</table>

</dd>
</dl>

<hr size="6">
<a name="st_005fquake"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fpuzzle" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005frawglass" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fquake-1"></a>
<h3 class="subsection">9.5.50 st_quake</h3>
<a name="index-st_005fquake"></a>

<p>Этот камень похож на оксиды (<a href="#st_005foxyd">st_oxyd</a>) типа <code>&quot;b&quot;</code>, но у него есть неприятное свойство дрожать при активации. К несчастью, от этого закрываются все открытые <a href="#st_005foxyd">оксиды</a>.
</p>
<p>Камень активируется от прикосновений актёров, ударов болдеров (<a href="#st_005fboulder">st_boulder</a>), а также при разрушении.
</p>
<p>Игрок может разрушить этот проблемный камень, ударив по нему молотком (<a href="#it_005fhammer">it_hammer</a>), направив на него лазерный луч, а также с помощью взрыва или огня.
</p>
<p>Безусловно, его можно активировать и разрушать посредством сообщений и операций установки состояния.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: <code>IDLE</code>, <code>ACTIVE</code>, <code>BREAKING</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>IDLE</code>: &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dd><p>Текущее состояние дрожащего камня. Состояние можно изменить только на то, которое следует за текущим состоянием камня. Состояние BREAKING является окончательным.
</p></dd>
</dl>

</dd>
<dt> <b>Сообщения:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>toggle</b> &nbsp;&nbsp;См. раздел <a href="#toggle">toggle</a></dt>
<dd><p>Переводит камень из состояния &lsquo;<samp>IDLE</samp>&rsquo; в &lsquo;<samp>ACTIVE</samp>&rsquo; и наоборот.
</p></dd>
<dt> <b>signal</b> &nbsp;&nbsp;См. раздел <a href="#signal">signal</a></dt>
<dd><p>Переводит камень из состояния &lsquo;<samp>IDLE</samp>&rsquo; в &lsquo;<samp>ACTIVE</samp>&rsquo; и наоборот.
</p></dd>
<dt> <b>ignite</b></dt>
<dd><p>Переводит камень в состояние &lsquo;<samp>BREAKING</samp>&rsquo;
</p></dd>
</dl>

</dd>
<dt> <b>Действие:</b> отсутствует</dt>
<dd>
<dl compact="compact">
<dt> <img src="images/st_oxydb.png" alt="images/st_oxydb"><p> <b>st_quake</b>: state = <code>IDLE</code>
</p></dt>
<dt> <img src="images/st_quake_3.png" alt="images/st_quake_3"><p> <b>st_quake</b>: state = <code>ACTIVE</code>
</p></dt>
<dt> <img src="images/st_quake_break.png" alt="images/st_quake_break"><p> <b>st_quake</b>: state = <code>BREAKING</code>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="st_005frawglass"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fquake" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fredfiber" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005frawglass-1"></a>
<h3 class="subsection">9.5.51 st_rawglass</h3>
<a name="index-st_005frawglass"></a>

<p>Это кусок необработанного стекла кубической формы. Он существует в неподвижной и подвижной разновидностях и в силу своей природы является проницаемым для лазера. Как и сквозь другие <a href="#Transparent-Stones">Прозрачные камни</a>, сквозь него могут проходить невидимые актёры.
</p>
<p>Существует и другая разновидность этого камня, которая внешне похожа на 4 куска стекла, сложенных вместе. Эта разновидность (&lsquo;<samp>quad</samp>&rsquo;) является неподвижной.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>movable</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;<i>доступ</i>: read only &nbsp;&nbsp;См. раздел <a href="#movable">movable</a></dt>
</dl>

</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Разновидности:</b></dt>
<dd>
<dl compact="compact">
<dt> <img src="images/st_rawglass.png" alt="images/st_rawglass"><p> <b>st_rawglass</b>: movable = <code>false</code>
</p></dt>
<dt> <img src="images/st_rawglass_quad.png" alt="images/st_rawglass_quad"><p> <b>st_rawglass_quad</b>: movable = <code>false</code>
</p></dt>
<dt> <img src="images/st_rawglass.png" alt="images/st_rawglass"><p> <b>st_rawglass_movable</b>: movable = <code>true</code>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="st_005fredfiber"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005frawglass" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005frotator" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fredfiber-1"></a>
<h3 class="subsection">9.5.52 st_redfiber</h3>
<a name="index-st_005fredfiber"></a>

<p>Камень, состоящий из металлической оправы и плетёных красных волокон. Как и другие <a href="#Transparent-Stones">Прозрачные камни</a>, он проницаем для лазера. Но актёры сквозь него проходить не могут.
</p>
<dl compact="compact">
<dt> <b>Атрибуты: </b>отсутствуют</dt>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Разновидности:</b></dt>
<dd>
<dl compact="compact">
<dt> <img src="images/st_redfiber.png" alt="images/st_redfiber"><p> <b>st_redfiber</b>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="st_005frotator"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fredfiber" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005frubberband" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005frotator-1"></a>
<h3 class="subsection">9.5.53 st_rotator</h3>
<a name="index-st_005frotator"></a>

<p>Вращатели посылают импульсы соседним камням, толкая их в направлении своего вращения. Болдеры (<a href="#st_005fboulder">st_boulder</a>) кроме того изменяют направление своего движения на то, в которое их толкает вращатель.
</p>
<p>Вращатели могут вращаться по часовой стрелке или против часовой стрелки. Они бывают подвижными и неподвижными.
</p>
<p>Вращатели изменяют направление вращения под воздействием прикосновений актёров, в инвентаре которых слева находится <a href="#it_005fwrench">it_wrench</a>, а также под воздействием лазера. Каждый новый лазерный луч снова изменяет направление вращения камня.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: <code>CW</code>, <code>CCW</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>CW</code> &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dd><p>Направление вращения &mdash; &lsquo;<samp>CW</samp>&rsquo; по часовой стрелке (по умолчанию), &lsquo;<samp>CCW</samp>&rsquo; &mdash; против часовой.
</p></dd>
<dt> <b>counterclock</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code></dt>
<dd><p>Стандартное направление вращения &mdash; по часовой стрелке. Используйте данный атрибут, чтобы изменить направление вращения.
</p></dd>
<dt> <b>movable</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code>; &nbsp;&nbsp;См. раздел <a href="#movable">movable</a></dt>
</dl>

</dd>
<dt> <b>Сообщения:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>toggle</b> &nbsp;&nbsp;См. раздел <a href="#toggle">toggle</a></dt>
<dd><p>Изменяет направление вращения.
</p></dd>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_rotator_cw.png" alt="images/st_rotator_cw"><p> <b>st_rotator</b>: state = <code>CW</code>
</p></dt>
<dt> <img src="images/st_rotator_cw.png" alt="images/st_rotator_cw"><p> <b>st_rotator_cw</b>: state = <code>CW</code>
</p></dt>
<dt> <img src="images/st_rotator_ccw.png" alt="images/st_rotator_ccw"><p> <b>st_rotator_ccw</b>: state = <code>CCW</code>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="st_005frubberband"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005frotator" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fscissors" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005frubberband-1"></a>
<h3 class="subsection">9.5.54 st_rubberband</h3>
<a name="index-st_005frubberband"></a>

<p>Генератор лент соединяет с собой столкнувшегося с ним актёра с помощью заново сгенерированного объекта <a href="#ot_005frubberband">ot_rubberband</a>.
</p>
<p>Если актёр, коснувшийся камня, уже связан с данным конкретным камнем, новая лента не генерируется.
</p>
<p>Если для атрибута &lsquo;<samp>scissor</samp>&rsquo; задано значение &lsquo;<samp>true</samp>&rsquo;, то прежде чем будет создана новая резиновая лента, все существующие ленты, привязанные к данному актёру, обрезаются.
</p>
<p>Камень-генератор по умолчанию неподвижен. Но актёр, слева в инвентаре которого находится <a href="#it_005fmagicwand">it_magicwand</a>, может передвигать его при помощи ударов. Так как при этом актёр будет привязан к камню объектом <a href="#ot_005frubberband">ot_rubberband</a>, то в большинстве случаев недалеко от пункта назначения целесообразно поместить <a href="#st_005fscissors">st_scissors</a>, чтобы у шарика была возможность освободиться от камня.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>strength</b> &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: <code>10.0</code></dt>
<dd><p>Величина, определяющая силу упругости.
</p></dd>
<dt> <b>length</b> &nbsp;&nbsp;<i>значения</i>: положительное число или  <code>AUTOLENGTH</code>; &nbsp;&nbsp;<i>по умолчанию:</i> <code>1.0</code></dt>
<dd><p>Нормальная длина ненатянутой резиновой ленты, при превышении которой начинают действовать силы.
</p></dd>
<dt> <b>threshold</b> &nbsp;&nbsp;<i>значения</i>: положительное число или ноль; &nbsp;&nbsp;<i>по умолчанию</i>: <code>0.0</code></dt>
<dd><p>Расстояние, меньшее, чем длина ненатянутой ленты, при уменьшении которого начинают действовать обратные силы.
</p></dd>
<dt> <b>min</b> &nbsp;&nbsp;<i>значения</i>: положительное число или ноль; &nbsp;&nbsp;<i>по умолчанию</i>: <code>0.0</code></dt>
<dd><p>Минимальная длина, при которой отскакивают актёры.
</p></dd>
<dt> <b>max</b> &nbsp;&nbsp;<i>значения</i>: положительное число или ноль; &nbsp;&nbsp;<i>по умолчанию</i>: <code>0.0</code></dt>
<dd><p>Максимальная длина, при которой отскакивают актёры.
</p></dd>
<dt> <b>scissor</b>, &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code></dt>
<dd><p>Определяет, что происходит с уже существующими резиновыми лентами, привязанными к актёру, в момент создания новой.
</p></dd>
</dl>

</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_rubberband.png" alt="images/st_rubberband"><p> <b>st_rubberband</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="st_005fscissors"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005frubberband" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fshogun" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fscissors-1"></a>
<h3 class="subsection">9.5.55 st_scissors</h3>
<a name="index-st_005fscissors"></a>

<p>Этот камень обрезает все резиновые ленты (<a href="#ot_005frubberband">ot_rubberband</a>), привязанные к актёру, который его касается. Когда отрезается хотя бы одна лента, он выполняет действие, заданное парой &lsquo;цель/действие&rsquo;.
</p>
<dl compact="compact">
<dt> <b>Атрибуты: </b>отсутствуют</dt>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Действие:</b> &nbsp;&nbsp;См. раздел <a href="#target">target</a>, &nbsp;&nbsp;см. раздел <a href="#action">action</a></dt>
<dd><p>Освободив актёра от резиновых лент, посылает сообщение о действии со значением &lsquo;<samp>true</samp>&rsquo;.
</p>
</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_scissors.png" alt="images/st_scissors"><p> <b>st_scissors</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="st_005fshogun"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fscissors" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fspitter" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fshogun-1"></a>
<h3 class="subsection">9.5.56 st_shogun</h3>
<a name="index-st_005fshogun"></a>

<p>Камни сёгун &mdash; это камни различного размера, которые можно вкладывать один в другой, словно матрёшки или японские куклы фукурума. Различные разновидности камня можно отличить по отверстию в центре. Существует три разновидности камней сёгун: маленькие, средние и большие. В отличие от кукол фукурума, вы можете толкать меньшие камни под большие, но не наоборот. Вы можете рассмотреть меньшие камни, находящиеся под большими, сквозь большее отверстие в центре камня. Таким образом, игрок всегда знает, какие камни сёгун находятся на данном участке решётки.
</p>
<p>Если по стопке камней сёгун ударит актёр или на неё окажет воздействие идущий от камня импульс, самый маленький камень сёгун выскочит из стопки. Верхние и большие камни сёгун нельзя вынуть из стопки либо сдвинуть на меньшие камни.
</p>
<p>Объекты <a href="#it_005fshogun">it_shogun</a> &mdash; это своего рода триггеры для камней сёгун, имеющие вид синих анимированных точек. Они реагируют на стопки камней сёгун, помещённые над ними. Над датчиком должны находиться все типы камней, начиная с наименьшего и заканчивая камнем, размер отверстия в котором равен размеру датчика.
</p>
<p>Камни сёгун также могут нажимать на триггеры (<a href="#it_005ftrigger">it_trigger</a>). Но все другие предметы, которые реагируют на помещённые на них камни, на камни сёгун реагировать не будут. Так, семена (<a href="#it_005fseed">it_seed</a>) не будут расти, <a href="#it_005fbomb">it_bomb</a> не взорвётся, достоинство монеты (<a href="#it_005fcoin">it_coin</a>) не изменится, а вишня (<a href="#it_005fcherry">it_cherry</a>) не будет раздавлена.
</p>
<p>Все камни сёгун сохраняют свою сущность, даже если они находятся на одном и том же участке решётки. Таким образом, каждый сёгун можно независимо от других присоединить к объектам <a href="#ot_005fwire">ot_wire</a> и <a href="#ot_005frubberband">ot_rubberband</a>. При инициализации уровня можно создать стопку камней сёгун на участке решётки, создав один сёгун с комбинированной строкой &lsquo;flavor&rsquo;. Самый большой камень в стопке будет помещён на участок решётки, а все остальные камни будут находиться внутри него. Меньшие камни сёгун в стопке могут быть поименованы с помощью дополнительных атрибутов &lsquo;<samp>name_m</samp>&rsquo; и &lsquo;<samp>name_s</samp>&rsquo;. Каждый сёгун, даже находящийся в стопке, можно уничтожить независимо от других, отправив ему сообщение <a href="#kill">kill</a>. Если на участке решётки, на котором находятся камни сёгун, создать другой камень либо &lsquo;<samp>st_nil&rsquo;</samp>, все камни сёгун в стопке прекратят своё существование.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>flavor</b>, &nbsp;&nbsp;<i>значения</i>: <code>&quot;s&quot;</code>, <code>&quot;m&quot;</code>, <code>&quot;l&quot;</code>, <code>&quot;sm&quot;</code>, <code>&quot;sl&quot;</code>, <code>&quot;ml&quot;</code>, <code>&quot;sml&quot;</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>&quot;s&quot;</code>; &nbsp;&nbsp;<i>доступ</i>: после инициализации только чтение</dt>
<dd><p>Строка, которая описывает размер отверстия данного камня и всех камней, расположенных под ним. <code>&quot;s&quot;</code> соответствует маленькому отверстию, <code>&quot;m&quot;</code>  &mdash; среднему, а <code>&quot;l&quot;</code> &mdash; самому большому. Комбинации этих букв описывают стопки камней. При инициализации все сёгуны данной стопки будут расположены в соответствии с этим атрибутом, который можно задать предварительно. После инициализации этот атрибут доступен только для чтения и возвращает текущую конфигурацию стопки. Последовательность символов при чтении сортируется от символа, соответствующего наименьшему сёгуну в стопке, до символа, соответствующего наибольшему, но при первоначальной записи она является произвольной.
</p>
</dd>
<dt> <b><b>name_m</b></b> &nbsp;&nbsp;<i>значения</i>: string; &nbsp;&nbsp;<i>по умолчанию</i>: <code>nil</code></dt>
<dd><p>Имя среднего сёгуна как составной части стопки с большим сёгуном вверху.
</p>
</dd>
<dt> <b>name_s</b> &nbsp;&nbsp;<i>значения</i>: string; &nbsp;&nbsp;<i>по умолчанию:</i> <code>nil</code></dt>
<dd><p>Имя маленького сёгуна как составной части стопки с большим или средним сёгуном вверху.
</p>
</dd>
</dl>

</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Действие:</b> отсутствует</dt>
<dt> <b>Разновидности:</b></dt>
<dd>
<dl compact="compact">
<dt> <img src="images/st_shogun.png" alt="images/st_shogun"><p> <b>st_shogun</b>: flavor = <code>&quot;s&quot;</code>
</p></dt>
<dt> <img src="images/st_shogun.png" alt="images/st_shogun"><p> <b>st_shogun_s</b>: flavor = <code>&quot;s&quot;</code>
</p></dt>
<dt> <img src="images/st_shogun_2.png" alt="images/st_shogun_2"><p> <b>st_shogun_m</b>: flavor = <code>&quot;m&quot;</code>
</p></dt>
<dt> <img src="images/st_shogun_3.png" alt="images/st_shogun_3"><p> <b>st_shogun_sm</b>: flavor = <code>&quot;sm&quot;</code>
</p></dt>
<dt> <img src="images/st_shogun_4.png" alt="images/st_shogun_4"><p> <b>st_shogun_l</b>: flavor = <code>&quot;l&quot;</code>
</p></dt>
<dt> <img src="images/st_shogun_5.png" alt="images/st_shogun_5"><p> <b>st_shogun_sl</b>: flavor = <code>&quot;sl&quot;</code>
</p></dt>
<dt> <img src="images/st_shogun_6.png" alt="images/st_shogun_6"><p> <b>st_shogun_ml</b>: flavor = <code>&quot;ml&quot;</code>
</p></dt>
<dt> <img src="images/st_shogun_7.png" alt="images/st_shogun_7"><p> <b>st_shogun_sml</b>: flavor = <code>&quot;sml&quot;</code>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="st_005fspitter"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fshogun" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fstoneimpulse" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fspitter-1"></a>
<h3 class="subsection">9.5.57 st_spitter</h3>
<a name="index-st_005fspitter"></a>

<p>Это камень, который стреляет пушечными ядрами (<a href="#ot_005fcannonball">ot_cannonball</a>), если по нему ударит актёр, а также если ему будет отправлено соответствующее сообщение. Типичная пушка всегда активна (&lsquo;<samp>ACTIVE</samp>&rsquo;), о чём свидетельствует медленно вращающееся изображение на ней. В этом состоянии (атрибут &lsquo;<samp>state</samp>&rsquo;) пушка реагирует на удары актёров, в то время как в состоянии &lsquo;<samp>IDLE</samp>&rsquo; её изображение неподвижно и стреляет она только после получения соответствующих сообщений.
</p>
<p>Если до пушки дотронется актёр, она проверяет его инвентарь на предмет нахождения там <a href="#it_005fextralife">it_extralife</a>. Если данный объект там находится и не спрятан в сумку (<a href="#it_005fbag">it_bag</a>), она забирает его и выстреливает пушечным ядром (<a href="#ot_005fcannonball">ot_cannonball</a>) в соответствии со скоростью актёра и заданными для неё значениями атрибутов. Пушечное ядро вылетает в соответствующем направлении со скоростью, пропорциональной скорости столкнувшегося с пушкой актёра.
</p>
<p>Полёт пушечного ядра во всех случаях длится одинаковое время. Ядра пролетают над всеми прочими объектами и перелетают через стены. Расстояние полёта является пропорциональным их начальной скорости. Приземлившись, они заставляют некоторые объекты совершать действия либо уничтожают их:
</p>
<ul>
<li> <a href="#st_005foxyd">st_oxyd</a> открывается,
</li><li> <a href="#st_005fstoneimpulse">st_stoneimpulse</a> посылает импульс,
</li><li> <a href="#st_005fyinyang">st_yinyang</a> изменяет состояние на противоположное,
</li><li> завершённые скопления камней <a href="#st_005fpuzzle">st_puzzle</a> взрываются,
</li><li> <a href="#st_005fbrownpyramid">st_brownpyramid</a> разрушается,
</li><li> <a href="#st_005fspitter">st_spitter</a> разрушается, если для атрибута &lsquo;<samp>secure</samp>&rsquo; не было установлено значение &lsquo;<samp>true</samp>&rsquo;,
</li><li> другие камни не подвергаются изменениям и защищают находящиеся под ними предметы и покрытия,
</li><li> <a href="#it_005fdynamite">it_dynamite</a> загорается,
</li><li> <a href="#it_005fcrack">it_crack</a> увеличивается,
</li><li> другие неразрушаемые предметы не подвергаются изменениям и защищают находящееся под ними покрытие,
</li><li> прочие предметы уничтожаются, оставляя после себя объект <a href="#it_005fexplosion">it_explosion</a>_debris, который также может разрушить покрытие,
</li><li> покрытия уничтожаются, оставляя после себя <a href="#it_005fexplosion">it_explosion</a>_debris, кроме неразрушаемых покрытий, таких как <a href="#fl_005fwater">fl_water</a>, <a href="#fl_005fswamp">fl_swamp</a>, <a href="#fl_005fabyss">fl_abyss</a>.
</li></ul>

<p>Актёрам упавшее на них ядро не причиняет вреда
</p>
<p>Выстрел также может быть инициирован сообщением <code>&quot;hit&quot;</code>. В этом случае в объекте <a href="#it_005fextralife">it_extralife</a> нет необходимости. В качестве своего значения сообщение принимает пункт назначения, либо, если значение не задано, оно оценивает атрибут &lsquo;<samp>destination</samp>&rsquo;. Второй случай подходит для использования &lsquo;<samp>hit</samp>&rsquo; в качестве сообщения о действии.
</p>
<p>В качестве точки назначения может выступать любое значение, являющееся допустимым указателем на определённый участок решётки, включая ссылки на объект и наименования объектов. Для атрибута &lsquo;<samp>destination</samp>&rsquo; можно даже указать метки, описывающие целый ряд пунктов назначения. Пушки будут стрелять по этим целям по очереди, если будет получена последовательность сообщений &lsquo;<samp>hit</samp>&rsquo;.
</p>
<p>Обратите внимание, что уничтожение объектов-целей может иметь непредсказуемые последствия для последовательности целей. Если в качестве цели указать три камня <a href="#st_005fstoneimpulse">st_stoneimpulse</a>, то пушка будет стрелять по ним в заданной последовательности, поскольку ни один из этих камней не будет разрушен. Но если в качестве цели указать три объекта <a href="#st_005fbrownpyramid">st_brownpyramid</a>, первое ядро уничтожит первый объект, оставив две допустимые цели. Пушка выстрелит по второй цели в этом списке, которой окажется третий из первоначально указанных камней. Наконец, в списке целей останется только один объект, который первоначально был указан вторым. Он будет уничтожен следующим выстрелом, так как пушка при достижении конца списка снова начинает стрелять по первой (оставшейся) цели. Это не проблема, если объекты нужно уничтожить в случайном порядке или если для обозначения целей используются шаблоны имён. Но если последовательность целей имеет существенное значение, то следует использовать либо цели, которые не могут быть уничтожены, либо объектные ссылки на участки покрытия, поскольку они представляют собой <a href="#Named-Positions">Именованные позиции</a>, не поддающиеся уничтожению.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: <code>IDLE</code>, <code>ACTIVE</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>ACTIVE</code> &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dd><p>Пушка в состоянии &lsquo;<samp>ACTIVE</samp>&rsquo; использует анимированное изображение и реагирует на прикосновения актёров, в то время как пушка в состоянии &lsquo;<samp>IDLE</samp>&rsquo; использует статичное изображение и не стреляет под воздействием прикосновений актёров.
</p></dd>
<dt> <b>hit_strength</b> &nbsp;&nbsp;<i>значения</i>: числа с плавающей запятой; &nbsp;&nbsp;<i>по умолчанию:</i> <code>1.0</code>; &nbsp;&nbsp;См. раздел <a href="#hit_005f_002a">hit_*</a></dt>
<dt> <b>hit_distortion_xx</b> &nbsp;&nbsp;<i>значения</i>: числа с плавающей запятой; &nbsp;&nbsp;<i>по умолчанию:</i> <code>1.0</code>; &nbsp;&nbsp;См. раздел <a href="#hit_005f_002a">hit_*</a></dt>
<dt> <b>hit_distortion_xy</b> &nbsp;&nbsp;<i>значения</i>: числа с плавающей запятой; &nbsp;&nbsp;<i>по умолчанию</i>: <code>0.0</code> &nbsp;&nbsp;См. раздел <a href="#hit_005f_002a">hit_*</a></dt>
<dt> <b>hit_distortion_yx</b> &nbsp;&nbsp;<i>значения</i>: числа с плавающей запятой; &nbsp;&nbsp;<i>по умолчанию</i>: <code>0.0</code> &nbsp;&nbsp;См. раздел <a href="#hit_005f_002a">hit_*</a></dt>
<dt> <b>hit_distortion_yy</b> &nbsp;&nbsp;<i>значения</i>: числа с плавающей запятой; &nbsp;&nbsp;<i>по умолчанию</i>: <code>1.0</code>; &nbsp;&nbsp;См. раздел <a href="#hit_005f_002a">hit_*</a></dt>
<dt> <b>destination</b>, &nbsp;&nbsp;<i>значения</i>: метки или позиция; &nbsp;&nbsp;<i>по умолчанию</i>: <code>nil</code> &nbsp;&nbsp;См. раздел <a href="#destination">destination</a></dt>
<dd><p>Пункт назначения пушечного ядра, выраженный объектом или позицией.
</p></dd>
<dt> <b>secure</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code></dt>
<dd><p>Если для данного атрибута установлено значение false, то пушка разрушается при попадании в нее <a href="#ot_005fcannonball">ot_cannonball</a>.
</p></dd>
</dl>

</dd>
<dt> <b>Сообщения:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>hit</b></dt>
<dd><p>Даёт пушке команду выстрелить. В качестве значения принимает цель либо &lsquo;<samp>nil</samp>&rsquo;.
</p></dd>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_spitter_idle.png" alt="images/st_spitter_idle"><p> <b>st_spitter</b>: secure = <code>false</code>, state = <code>ACTIVE</code>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="st_005fstoneimpulse"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fspitter" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fsurprise" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fstoneimpulse-1"></a>
<h3 class="subsection">9.5.58 st_stoneimpulse</h3>
<a name="index-st_005fstoneimpulse"></a>

<p>Если эти камни привести в действие, они начинают пульсировать и посылают импульсы соседним камням. Существуют непроницаемые, полые и подвижные разновидности данного камня.
</p>
<p>Камень приводится в действие, если до него дотронется актёр, а также если он получит импульс от соседнего импульсного камня (<a href="#st_005fstoneimpulse">st_stoneimpulse</a>), через проволоку (<a href="#ot_005fwire">ot_wire</a>) или от помещённого рядом с ним объекта <a href="#it_005fpuller">it_puller</a>. Кроме того, пульсация может быть вызвана воздействием лазера, ударом болдера (<a href="#st_005fboulder">st_boulder</a>) и, конечно же, сообщениями.
</p>
<p>Хотя три основные разновидности камня и можно задать с помощью атрибутов, они взаимно исключают друг друга. Так, полый (&lsquo;<samp>hollow</samp>&rsquo;) камень не может быть подвижным или непроницаемым и наоборот. Это значит, что если установить значение для одного из этих основных атрибутов, то для остальных атрибутов будут автоматически установлены значения по умолчанию.
</p>
<p>Подвижный импульсный камень, если актёр толкнет его, отправит импульс уже на новом участке решётки. Даже если его толкнуть во время пульсации, пульсация продолжится и на новом участке решётки и в случае необходимости камень отправит ещё один импульс, чтобы гарантировать, что и камни, расположенные рядом с новым участком решётки, получат импульс.
</p>
<p>Но если камень толкнет актёр, слева в инвентаре которого расположена волшебная палочка (<a href="#it_005fmagicwand">it_magicwand</a>), камень переместится без пульсации.
</p>
<p>Как правило, импульсные камни очень чувствительны к прикосновениям актёров. Достаточно даже малейшего прикосновения, чтобы вызвать пульсацию. Если внутри полого камня во время его пульсации находится актёр, камень его разобьёт.
</p>
<p>Полые импульсные камни пропускают лазерные лучи и, следовательно, не реагируют на них. Но все другие камни под воздействием лазера посылают своим соседям импульс. Стандартные камни, у которых для атрибута &lsquo;<samp>steady</samp>&rsquo; установлено значение false, будут пульсировать только один раз в ответ на каждый добавочный лазерный луч. Но если для атрибута &lsquo;<samp>steady</samp>&rsquo; установлено значение <code>true</code>, камень будет пульсировать до тех пор, пока на него воздействует лазер.
</p>
<p><a href="#st_005fboulder">st_boulder</a>, ударивший импульсный камень, заставляет его пропульсировать один раз. К болдеру импульс не возвратится. Он распространится в трёх остальных направлениях. Таким образом, болдер останется у импульсного камня. Но если импульсный камень будет активирован другим способом, он оттолкнет болдер, который в свою очередь снова ударит импульсный камень.
</p>
<p>Ядро (<a href="#ot_005fcannonball">ot_cannonball</a>), выпущенное <a href="#st_005fspitter">st_spitter</a> и упавшее на импульсный камень, тоже вызовет его пульсацию.
</p>
<p>Если имеется цепочка импульсных камней, импульс распространится по цепочке, но без отдачи, так как во время пульсации следующего камня предыдущий пульсацию ещё не закончил. Это свойство позволяет линейным импульсам предсказуемо распространяться в больших скоплениях импульсных камней.
</p>
<p>В случае, когда нужно создать набор импульсных камней, в котором импульс распространялся бы в одном направлении по кругу бесконечно, в цепочке необходимо создать один &lsquo;<samp>st_stoneimpulse_new</samp>&rsquo;. В соответствии с принципом снимка (см. раздел <a href="#Snapshot-Principle">Принцип снимка</a>) это камень, который вот-вот начнёт пульсировать. Необходимо установить значение атрибута &lsquo;<samp>orientation</samp>&rsquo;, которое оценивается только для новых камней, созданных на решётке. Этот атрибут принимает направление входящего импульса, воздействующего на новый камень. Например, значение east означает, что камень получил импульс, направленный на восток, от камня, расположенного к западу от него. Таким образом, камень отправит импульсы во всех направлениях, кроме западного.
</p>
<p>Импульсные камни могут быть разрушены, если на одном из восьми соседних участков решётки взорвётся динамит (<a href="#it_005fdynamite">it_dynamite</a>), пока на камень воздействует лазер. Но прочие объекты, способные взрываться, например бомбы (<a href="#it_005fbomb">it_bomb</a>), не окажут на импульсные камни никакого воздействия.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>movable</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code></dt>
<dd><p>Подвижные камни не могут быть полыми (hollow).
</p></dd>
<dt> <b>hollow</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code></dt>
<dd><p>Полые камни не могут быть ни подвижными (movable), ни стабильными (steady).
</p></dd>
<dt> <b>steady</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code></dt>
<dd><p>Стабильные камни посылают импульсы всё время, пока на них воздействует лазерный луч. Стабильные камни не могут быть полыми (hollow).
</p></dd>
</dl>

</dd>
<dt> <b>Сообщения:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>signal</b> &nbsp;&nbsp;См. раздел <a href="#signal">signal</a></dt>
<dd><p>Камень пульсирует, если значение сообщения равно &lsquo;<samp>1</samp>&rsquo;.
</p></dd>
</dl>

</dd>
<dt> <b>Действие:</b> отсутствует</dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_stoneimpulse.png" alt="images/st_stoneimpulse"><p> <b>st_stoneimpulse</b>
</p></dt>
<dt> <img src="images/st_stoneimpulse.png" alt="images/st_stoneimpulse"><p> <b>st_stoneimpulse_movable</b>: movable = <code>true</code>
</p></dt>
<dt> <img src="images/st_stoneimpulse_hollow.png" alt="images/st_stoneimpulse_hollow"><p> <b>st_stoneimpulse_hollow</b>: hollow = <code>true</code>
</p></dt>
<dt> <img src="images/st_stoneimpulse_6.png" alt="images/st_stoneimpulse_6"><p> <b>st_stoneimpulse_steady</b>: steady = <code>true</code>
</p></dt>
<dt> <img src="images/st_stoneimpulse.png" alt="images/st_stoneimpulse"><p> <b>st_stoneimpulse_new</b>:
</p></dt>
<dd><p>Камень, который после создания вот-вот начнёт пульсировать.
</p></dd>
</dl>

</dd>
</dl>

<hr size="6">
<a name="st_005fsurprise"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fstoneimpulse" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fswap" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fsurprise-1"></a>
<h3 class="subsection">9.5.59 st_surprise</h3>
<a name="index-st_005fsurprise"></a>

<p>Камень, который превращается в другой камень, определяемый случайным образом, если с ним столкнётся актёр.
</p>
<p>Камень, в который превращается сюрприз, выбирается случайным образом из заданного ряда (атрибут &lsquo;<samp>selection</samp>&rsquo;). В качестве значений атрибута &lsquo;<samp>selection</samp>&rsquo; можно установить метки строк. Каждая строка должна быть или типом объекта (см. раздел <a href="#Object-Kind">Тип объекта</a>), или кодом участка решётки, перед которым должен стоять знак &lsquo;<samp>=</samp>&rsquo;.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">ti[&quot;b&quot;] = {&quot;st_brake&quot;}
ti[&quot;d&quot;] = {&quot;st_death&quot;}
ti[&quot;s&quot;] = {&quot;st_surprise&quot;, selection={&quot;st_chess&quot;, &quot;=b&quot;, &quot;=d&quot;, &quot;=d&quot;}}
</pre></td></tr></table>

<p>Новый камень выбирается случайным образом из заданного ряда. Указав камень среди значений атрибута несколько раз, можно повлиять на вероятность его выбора.
</p>
<p>Объявления секций, на которые делается ссылка с помощью кода, могут, помимо камней, содержать и другие объекты. Но эту возможность следует использовать осторожно и только в случае крайней необходимости.
</p>
<p>Прежде чем уступить место другому камню, камень-сюрприз выполняет действие. Это действие может быть использовано для оказания влияния на случайный выбор объекта либо для создания новых объектов.
</p>
<p>Камень-сюрприз уничтожается любым камнем, который появляется на его месте. Если значением атрибута &lsquo;selection&rsquo; не является камень, к объявлению секции-замены целесообразно добавить <code>&quot;st_nil&quot;</code>.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>selection</b>, &nbsp;&nbsp;<i>значения</i>: метки типов камней и коды секций; &nbsp;&nbsp;<i>по умолчанию</i>: <code>{&quot;st_grate_cross&quot;, &quot;st_death&quot;, &quot;st_surprise&quot;, &quot;st_lightglass_hollow&quot;, &quot;st_knight&quot;, &quot;st_thief&quot;, &quot;st_flat_breakable&quot;, &quot;st_flat_breaking&quot;}</code></dt>
</dl>

</dd>
<dt> <b>Сообщения:</b></dt>
<dt> <b>Действие:</b> &nbsp;&nbsp;См. раздел <a href="#target">target</a>, &nbsp;&nbsp;см. раздел <a href="#action">action</a></dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_surprise.png" alt="images/st_surprise"><p> <b>st_surprise</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="st_005fswap"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fsurprise" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fswitch" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fswap-1"></a>
<h3 class="subsection">9.5.60 st_swap</h3>
<a name="index-st_005fswap"></a>

<p>Обменный камень может меняться местами с соседним камнем, расположенным в направлении импульса, который привёл обменный камень в движение. Его нельзя свободно перемещать. Но если актёр толкает обменный камень, а на противоположной стороне рядом с ним находится другой камень, оба камня меняются местами. Это также произойдёт, если обменный камень получит импульс через проволоку (<a href="#ot_005fwire">ot_wire</a>) или от находящегося рядом импульсного камня (<a href="#st_005fstoneimpulse">st_stoneimpulse</a>). С обменным камнем схож <a href="#st_005fpull">st_pull</a>, который меняется местами с камнем, расположенным в направлении, противоположном направлению импульса.
</p>
<p>Наличие камня, с которым обменный камень мог бы поменяться местами, является обязательным. Почти все камни могут участвовать в подобных перемещениях. Не могут в них участвовать только <a href="#Cluster-Stones">Строительные камни</a>, входящие в скопления, статичные ('<samp>static</samp>') оксиды (<a href="#st_005foxyd">st_oxyd</a>) и другие обменные камни либо обратные камни (<a href="#st_005fpull">st_pull</a>), которые в данный момент задействованы в других перемещениях.
</p>
<p>Подобные перемещения камней не вызывают трансформаций предметов, которые происходят, если актёр толкает на предмет подвижный камень. Но камни, задействованные в перемещении, будут реагировать на новое покрытие: так, камни <a href="#st_005fbox">st_box</a> будут тонуть, если их переместить на воду.
</p>
<p>Кроме того, перемещение не является постепенным в том, что касается нажатия триггеров (<a href="#it_005ftrigger">it_trigger</a>) и проницаемости для лазера. Если в перемещении задействован прозрачный камень, то в любой момент времени свет лазера будет проникать только на один из двух участков решётки. Если задействованный в перемещении камень является парящим и, таким образом, не может нажимать на <a href="#it_005ftrigger">it_trigger</a>, обменный камень будет в каждый момент времени нажимать только один триггер, старый триггер будет отпущен прежде, чем будет нажат новый, как происходит и в случае с перемещениями любых других камней.
</p>
<dl compact="compact">
<dt> <b>Атрибуты: </b>отсутствуют</dt>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Действие:</b> отсутствует</dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_swap.png" alt="images/st_swap"><p> <b>st_swap</b>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="st_005fswitch"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fswap" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fthief" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fswitch-1"></a>
<h3 class="subsection">9.5.61 st_switch</h3>
<a name="index-st_005fswitch"></a>

<p>Классический переключатель, который чередует свои состояния под влиянием прикосновений актёров. Безусловно, прочие объекты также могут посылать сообщения о действиях, чередующие состояния переключателя.
</p>
<p>Существует три разновидности переключателя. Нейтральный переключатель серого цвета, который может включить любой актёр, а также переключатели чёрного и белого цвета. Эти переключатели реагируют только на прикосновения актёров соответствующего цвета.
</p>
<p>Когда переключатель включается или выключается, ему нужно некоторое время, чтобы перейти в новое состояние и выполнить нужное действие. Если необходим переключатель, который срабатывает немедленно, следует задать соответствующее значение атрибута &lsquo;<samp>instant</samp>&rsquo;.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: <code>ON</code>, <code>OFF</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>OFF</code> &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dt> <b>color</b> &nbsp;&nbsp;<i>значения</i>: <code>nil</code>, <code>BLACK</code>, <code>WHITE</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>nil</code></dt>
<dd><p>Задаёт цвет переключателя, который в свою очередь определяет цвет актёра, который может привести данный переключатель в действие. Значение по умолчанию &lsquo;<samp>nil</samp>&rsquo; соответствует серому переключателю, который приводится в действие шариками любого цвета, жемчужинами, киллерами и любыми другими актёрами.
</p></dd>
<dt> <b>instant</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code></dt>
<dd><p>По умолчанию переключателю для перехода в новое состояние и выполнения действий требуется время, равное времени, занимаемому анимацией перехода в новое состояние. Если для данного атрибута задано значение &lsquo;true&rsquo;, переключатель переходит в новое состояние моментально.
</p></dd>
</dl>

</dd>
<dt> <b>Сообщения:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>signal</b> &nbsp;&nbsp;См. раздел <a href="#signal">signal</a></dt>
<dd><p>Включается при значении &lsquo;<samp>1</samp>&rsquo; и выключается при значении &lsquo;<samp>0</samp>&rsquo;.
</p></dd>
<dt> <b>on</b> &nbsp;&nbsp;См. раздел <a href="#on">on</a></dt>
<dt> <b>off</b> &nbsp;&nbsp;См. раздел <a href="#off">off</a></dt>
</dl>

</dd>
<dt> <b>Действие:</b> &nbsp;&nbsp;См. раздел <a href="#target">target</a>, &nbsp;&nbsp;см. раздел <a href="#action">action</a></dt>
<dt> <b>Разновидности:</b></dt>
<dd>
<dl compact="compact">
<dt> <img src="images/st_switch.png" alt="images/st_switch"><p> <b>st_switch</b>
</p></dt>
<dt> <img src="images/st_switch_black.png" alt="images/st_switch_black"><p> <b>st_switch_black</b>: color = <code>BLACK</code>
</p></dt>
<dt> <img src="images/st_switch_white.png" alt="images/st_switch_white"><p> <b>st_switch_white</b>: color = <code>WHITE</code>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="st_005fthief"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fswitch" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005ftimer" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fthief-1"></a>
<h3 class="subsection">9.5.62 st_thief</h3>
<a name="index-st_005fthief"></a>

<p>Если актёр дотрагивается до этого камня, то вор крадёт у него из инвентаря предмет. К несчатью, этот камень внешне неотличим от <a href="#st_005fbluegray">st_bluegray</a>.
</p>
<p>Вор не крадёт предмет непосредственно в тот момент, когда актёр дотрагивается до камня. Прикосновение просто заставляет вора выглянуть из укрытия. Вор крадёт предмет из инвентаря в тот момент, когда он максимально высунется из укрытия. Он забирает случайный предмет из инвентаря игрока. Но он сможет его украсть только в том случае, если актёр не защищён активированным объектом <a href="#it_005fumbrella">it_umbrella</a>.
</p>
<p>Воры неравнодушны к алкоголю. Если им удастся украсть у игрока бутылку спиртного, то они напиваются и деактивируются.
</p>
<p>У воров есть враг &mdash; <a href="#st_005fchess">st_chess</a>. Если конь прыгнет на вора, он его схватит, трезвого или пьяного. Вор исчезает, а конь приземляется на его место. Все украденные им предметы вор оставит на этом участке решётки в своей сумке (<a href="#it_005fbag">it_bag</a>). Если под камнем, где скрывался вор, уже находился какой-либо предмет, он также будет положен в сумку. Если вор ещё ничего не украл, то пустую сумку он после себя не оставляет.
</p>
<dl compact="compact">
<dt> <b>Атрибуты: </b>отсутствуют</dt>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Действие:</b>  отсутствует</dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_bluegray.png" alt="images/st_bluegray"><p> <b>st_thief</b>: hidden
</p></dt>
<dt> <img src="images/st_thief.png" alt="images/st_thief"><p> <b>st_thief</b>: показывается во время кражи предметов
</p></dt>
<dt> <img src="images/st_thief_capture.png" alt="images/st_thief_capture"><p> <b>st_thief</b>: показывается во время поимки
</p></dt>
<dt> <img src="images/st_thief_drunken.png" alt="images/st_thief_drunken"><p> <b>st_thief</b>: пьяный вор
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="st_005ftimer"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fthief" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fturnstile" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005ftimer-1"></a>
<h3 class="subsection">9.5.63 st_timer</h3>
<a name="index-st_005ftimer"></a>

<p>Этот камень можно использовать, чтобы запустить отложенные разовые либо периодические события. Изображение действующего, включенного таймера, как правило, анимировано. Изображение же выключенного таймера статично. Альтернативой невидимому камню-таймеру является гаджет <a href="#ot_005ftimer">ot_timer</a>.
</p>
<p>Следует отметить, что этот объект достаточно необычен, поскольку его состоянием по умолчанию является &lsquo;<samp>ON</samp>&rsquo;. Это сделано для поддержки самых типичных случаев, когда таймеры должны начинать работать немедленно.
</p>
<p>Таймер, запрограммированный на единичное срабатывание, посылает значение действия &lsquo;<samp>true</samp>&rsquo;. Таймер, запрограммированный на периодическое срабатывание, посылает чередующиеся булевы значения действия, начиная с &lsquo;<samp>true</samp>&rsquo;. Чтобы начать чередование с &lsquo;<samp>false</samp>&rsquo;, следует использовать атрибут <a href="#inverse">inverse</a>.
</p>
<p>Если остановить таймер, выключив его, дальнейшие действия не будут выполнены. Если снова включить его, он запустится как новый таймер.
</p>
<p>Временной интервал между началом работы и первым событием, а также между последующими событиями соблюдается с точностью до 0,01 секунды. Но в силу требований производительности, а также специфики анимации, не следует задавать интервал меньший, чем 0,1 секунды. Интервал менее 0,01 секунды недействителен для таймера, запрограммированного на периодическое срабатывание.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: <code>ON</code>, <code>OFF</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>ON</code> &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dd><p>Состояние &lsquo;<samp>ON</samp>&rsquo; соответствует работающему таймеру. Таймер в состоянии &lsquo;<samp>OFF</samp>&rsquo; сброшен и ожидает повторной активации.
</p></dd>
<dt> <b>invisible</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code></dt>
<dd><p>Невидимый таймер полностью прозрачен. Но игрок может его заметить, так как актёры не могут сквозь него пройти, и другие камни не могут быть перемещены на занимаемый им участок решётки.
</p></dd>
<dt> <b>interval</b> &nbsp;&nbsp;<i>значения</i>: положительное число; &nbsp;&nbsp;<i>по умолчанию</i>: <code>1.0</code></dt>
<dd><p>Время в секундах, которое проходит от начала работы таймера до первого события и между последующими событиями. Должен быть больше или равен 0,01 секунды для таймеров, запрограммированных на периодическое выполнение действия.
</p></dd>
<dt> <b>loop</b> &nbsp;&nbsp;<I>значения:</I> <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code></dt>
<dd><p>Таймер, для которого задано значение &lsquo;true&rsquo;, будет отправлять периодические события.
</p></dd>
</dl>

</dd>
<dt> <b>Сообщения:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>signal</b> &nbsp;&nbsp;См. раздел <a href="#signal">signal</a></dt>
<dd><p>Включается при значении &lsquo;<samp>1</samp>&rsquo; и выключается при значении &lsquo;<samp>0</samp>&rsquo;.
</p></dd>
<dt> <b>on</b> &nbsp;&nbsp;См. раздел <a href="#on">on</a></dt>
<dt> <b>off</b> &nbsp;&nbsp;См. раздел <a href="#off">off</a></dt>
</dl>

</dd>
<dt> <b>Действие:</b> &nbsp;&nbsp;См. раздел <a href="#target">target</a>, &nbsp;&nbsp;см. раздел <a href="#action">action</a></dt>
<dd><p>Значение действия начинается с &lsquo;<samp>true</samp>&rsquo; и чередуется при каждом событии между &lsquo;<samp>false</samp>&rsquo; и &lsquo;<samp>true</samp>&rsquo;. Если таймер сброшен, он начинает чередование со значения &lsquo;<samp>true</samp>&rsquo;
</p>
</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_timer_3.png" alt="images/st_timer_3"><p> <b>st_timer</b>: state = <code>OFF</code>
</p></dt>
<dt> <img src="images/st_timer.png" alt="images/st_timer"><p> <b>st_timer</b>: state = <code>ON</code>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="st_005fturnstile"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005ftimer" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fturnstilearm" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fturnstile-1"></a>
<h3 class="subsection">9.5.64 st_turnstile</h3>
<a name="index-st_005fturnstile"></a>

<p>Турникет &mdash; это скопление камней, которое состоит из центрального камня, собственно &lsquo;<samp>st_turnstile</samp>&rsquo;, и до четырёх камней <a href="#st_005fturnstilearm">st_turnstilearm</a> взаимосвязанных направлений. Когда актёр ударяет по одной из рукоятей либо она получает импульс от другого объекта (например &lsquo;<samp>st_rotator</samp>&rsquo;, &lsquo;<samp>ot_wire</samp>&rsquo;, &lsquo;<samp>it_puller</samp>&rsquo; и т. д.), всё скопление поворачивается на 90 градусов в направлении импульса. Естественно, турникет поворачивается, только если он не был заблокирован другими находящимися рядом камнями. Турникеты могут блокироваться даже подвижными камнями.
</p>
<p>Существуют две разновидности (&lsquo;<samp>flavor</samp>&rsquo;) турникетов. Наиболее распространённые красные (&lsquo;<samp>red</samp>&rsquo;) турникеты тянут за собой только актёра, который ударил по рукояти. Актёр остаётся за рукоятью (&lsquo;<samp>st_turnstilearm</samp>&rsquo;), а прочие актёры, находящиеся на пути турникета, разбиваются. В то же время зелёные (&lsquo;<samp>green</samp>&rsquo;) турникеты толкают перед собой всех актёров, и актёры находятся перед рукоятью. Перемещаются только актёры, находящиеся в пределах досягаемости рукоятей турникета. Это означает, что они должны находиться на расстоянии не более 1,5 участка решётки от точки вращения. Таким образом, актёры, находящиеся на самом краю участка решётки, расположенного по диагонали от турникета, не будут перемещены. Так как актёров нельзя переместить за пределы мира, зелёный турникет, расположенный на самом краю уровня, при перемещении рукояти к границе вместо этого разобьёт актёров.
</p>
<p>Любой актёр, которого передвигает рукоять турникета, сразу переносится на новый участок, не касаясь покрытия между двумя точками. Таким образом актёры могут пересекать пропасть или воду, но они не смогут поднять предмет, расположенный на покрытии между двумя точками. Относительное расположение актёра на решётке сохраняется во время движения по окружности. Таким образом, если два небольших актёра смещаются одновременно, их расположение относительно друг друга сохраняется. Любые смещаемые актёры гарантированно упадут даже в крошечное отверстие <a href="#it_005fmeditation">it_meditation</a>_dent, расположенное на участке решётки, являющемся пунктом назначения.
</p>
<p>Если на пути рукоятей находятся предметы, они будут реагировать точно так же, как и при перемещении по ним других камней.
</p>
<p>Когда зелёные турникеты толкают актёра на участок решётки, расположенный по диагонали, они будут оттолкнут <a href="#st_005fturnstilearm">st_turnstilearm</a>, расположенную на этом участке решётки, причем это единственный камень, который ведёт себя подобным образом. Это свойство может быть использовано для переплетения нескольких турникетов, как это, например, сделано на уровне &lsquo;<samp>ZigZag</samp>&rsquo;.
</p>
<p>Существует два других способа объединения турникетов. Можно просто установить другой &lsquo;<samp>st_turnstile</samp>&rsquo; в качестве цели первого и выполнить действие &lsquo;<samp>signal</samp>&rsquo;. Тогда оба турникета будут поворачиваться в одном направлении. Но если один из них будет заблокирован, то их вращение будет рассинхронизировано.
</p>
<p>Другой способ &mdash; это соединение двух объектов <a href="#st_005fturnstilearm">st_turnstilearm</a> при помощи <a href="#ot_005fwire">ot_wire</a>. Турникет будет передавать импульсы вращения через проволоку, которая присоединена к одной из его рукоятей. Два турникета, рукояти которых соединены проволокой, будут синхронизированы, даже если один из них будет временно заблокирован.
</p>
<p>Турникеты можно повернуть при помощи стандартных сообщений и атрибутов. Они даже оценивают повороты и обновляют значения атрибута &lsquo;<samp>orientation</samp>&rsquo; для лёгкой оценки текущего направления турникета при чтении.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>flavor</b> &nbsp;&nbsp;<i>значения</i>: <code>&quot;red&quot;</code>, <code>&quot;green&quot;</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>&quot;red&quot;</code></dt>
<dd><p>Характерный цвет центральной части турникета, который отражает его поведение.
</p></dd>
<dt> <b>counterclock</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code></dt>
<dd><p>По умолчанию объект поворачивается по часовой стрелке. Используйте данный атрибут, чтобы изменить направление вращения. <a name="index-orientation-2"></a>
</p></dd>
<dt> <b>orientation</b>, &nbsp;&nbsp;<i>значения</i>: <code>NORTH</code>, <code>EAST</code>, <code>SOUTH</code>, <code>WEST</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>NORTH</code></dt>
<dd><p>Направление турникета, которое определяется по направлению его рукоятей. Установка данного атрибута просто задаёт новую базу турникета, но она не поворачивает турникет, так как направление движения при этом не определяется. Но каждый поворот обновляет данный атрибут относительно его предыдущего значения.
</p></dd>
</dl>

</dd>
<dt> <b>Сообщения:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>signal</b> &nbsp;&nbsp;См. раздел <a href="#signal">signal</a></dt>
<dd><p>Поворачивает турникет против часовой стрелки при значении &lsquo;<samp>1</samp>&rsquo; и по часовой стрелке при значении &lsquo;<samp>0</samp>&rsquo;.
</p></dd>
<dt> <b>turn</b></dt>
<dd><p>Поворачивает турникет в направлении, заданном атрибутом &lsquo;<samp>counterclock</samp>&rsquo;.
</p></dd>
<dt> <b>turnback</b></dt>
<dd><p>Поворачивает турникет в направлении, противоположном заданному атрибутом &lsquo;<samp>counterclock</samp>&rsquo;.
</p></dd>
</dl>

</dd>
<dt> <b>Действие:</b> &nbsp;&nbsp;См. раздел <a href="#target">target</a>, &nbsp;&nbsp;см. раздел <a href="#action">action</a></dt>
<dd><p>В конце каждого поворота выполняется действие со значением &lsquo;<samp>true</samp>&rsquo; при поворотах против часовой стрелке и &lsquo;<samp>false</samp>&rsquo; &mdash; при поворотах по часовой стрелке.
</p>
</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_turnstile.png" alt="images/st_turnstile"><p> <b>st_turnstile</b>: flavor = <code>&quot;red&quot;</code>
</p></dt>
<dt> <img src="images/st_turnstile.png" alt="images/st_turnstile"><p> <b>st_turnstile_red</b>: flavor = <code>&quot;red&quot;</code>
</p></dt>
<dt> <img src="images/st_turnstile_green.png" alt="images/st_turnstile_green"><p> <b>st_turnstile_green</b>: flavor = <code>&quot;green&quot;</code>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="st_005fturnstilearm"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fturnstile" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fvolcano" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fturnstilearm-1"></a>
<h3 class="subsection">9.5.65 st_turnstilearm</h3>
<a name="index-st_005fturnstilearm"></a>

<p>Камень, который обычно присоединён к центральному камню <a href="#st_005fturnstile">st_turnstile</a>, образуя скопление камней. Суффикс подвида рукояти, её состояние и направление определяются её положением в скоплении. Таким образом, для рукояти с состоянием &lsquo;<samp>NORTH</samp>&rsquo; значением атрибута &lsquo;connections&rsquo; является <code>&quot;s&quot;</code> &mdash; противоположное направление.
</p>
<p>Пока рукоять не присоединена к центральному камню, её можно свободно передвигать. Она намеренно сделана неотличимой от <a href="#st_005fpuzzle">st_puzzle</a> с такими же разъёмами. Но рукоять не присоединяется к <a href="#st_005fpuzzle">st_puzzle</a>, равно как и камень-мозаика к центральному камню турникета.
</p>
<p>Рукоять присоединяется к центральному камню, находящемуся на соседнем участке решётки, исключительно посредством соответствующих значений атрибута &lsquo;connections&rsquo;. Больше её нельзя свободно передвигать. Все воздействующие на неё импульсы вместо этого будут поворачивать скопление <a href="#st_005fturnstile">st_turnstile</a>.
</p>
<p>Особая разновидность перемещения рукояти вызывается актёрами, которые перемещаются другим зелёным турникетом на место её расположения. Рукоять получает импульс от другой точки вращения и либо двигается вперёд, либо будет поворачиваться вокруг своей точки вращения, если является частью скопления.
</p>
<p>Направление рукояти можно задать при помощи атрибутов или сообщений. Но ни тот, ни другой способ не могут создать импульс, который повернёт скопление камней. Рукоять будет переориентирована независимо от других камней, входящих в скопление.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: <code>NORTH</code>, <code>EAST</code>, <code>SOUTH</code>, <code>WEST</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>NORTH</code> &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dd><p>Расположение рукояти в скоплении-турникете. <a name="index-orientation-3"></a>
</p></dd>
<dt> <b>orientation</b>, &nbsp;&nbsp;<i>значения</i>: <code>NORTH</code>, <code>EAST</code>, <code>SOUTH</code>, <code>WEST</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>NORTH</code></dt>
<dd><p>Расположение рукояти в скоплении-турникете.
</p></dd>
<dt> <b>connections</b> &nbsp;&nbsp;<i>значения</i>: string; &nbsp;&nbsp;<i>по умолчанию</i>: <code>&quot;s&quot;</code></dt>
<dd><p>Описывает связи, аналогичные тем, которые характерны для камней <a href="#st_005fpuzzle">st_puzzle</a>; значение атрибута противоположно значению атрибута 'orientation'. Строка состоит из одного символа, описывающего единичную связь.
</p></dd>
</dl>

</dd>
<dt> <b>Сообщения:</b></dt>
<dd>
<dl compact="compact">
<dd><a name="index-orientate-2"></a>
</dd>
<dt> <b>orientate</b>, &nbsp;&nbsp;<i>тип значения:</i> orientation</dt>
<dd><p>Изменяет направление на заданное. Объект <a href="#st_005ffourswitch">st_fourswitch</a> предусматривает совместимое действие, которое позволяет установить рукоять как цель, а это сообщение как действие.
</p></dd>
</dl>

</dd>
<dt> <b>Действие:</b> отсутствует</dt>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_puzzle_blue_3.png" alt="images/st_puzzle_blue_3"><p> <b>st_turnstilearm</b>: orientation = <code>NORTH</code>
</p></dt>
<dt> <img src="images/st_puzzle_blue_3.png" alt="images/st_puzzle_blue_3"><p> <b>st_turnstilearm_n</b>: orientation = <code>NORTH</code>
</p></dt>
<dt> <img src="images/st_puzzle_blue_2.png" alt="images/st_puzzle_blue_2"><p> <b>st_turnstilearm_e</b>: orientation = <code>EAST</code>
</p></dt>
<dt> <img src="images/st_puzzle_blue_c.png" alt="images/st_puzzle_blue_c"><p> <b>st_turnstilearm_s</b>: orientation = <code>SOUTH</code>
</p></dt>
<dt> <img src="images/st_puzzle_blue_b.png" alt="images/st_puzzle_blue_b"><p> <b>st_turnstilearm_w</b>: orientation = <code>WEST</code>
</p></dt>
</dl>
</dd>
</dl>

<hr size="6">
<a name="st_005fvolcano"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fturnstilearm" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fwindow" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fvolcano-1"></a>
<h3 class="subsection">9.5.66 st_volcano</h3>
<a name="index-st_005fvolcano"></a>

<p>Камень-вулкан медленно распространяется на соседние участки решётки, полностью заполняя всю открытую территорию и останавливаясь только у границ, образованных другими камнями.
</p>
<p>Извержение вулкана можно начать, создав действующую (&lsquo;<samp>ACTIVE</samp>&rsquo;) версию камня, активировав бездействующий (&lsquo;<samp>IDLE</samp>&rsquo;) камень сообщением или ударом болдера (<a href="#st_005fboulder">st_boulder</a>) либо уронив или активировав семечко (<a href="#it_005fseed">it_seed</a>) разновидности <code>volcano</code>.
</p>
<p>После активации вулкан распространяется на соседние участки решётки в случайном порядке. Хотя актёр и может на протяжении короткого времени без вреда для себя проходить по создаваемым при этом семенам вулкана, растущие камни-вулканы для актёра смертельны. Достигнув своего полного размера, камень некоторое время ещё остается в раскалённом состоянии, распространяясь на соседние участки решётки. Во время этой стадии актёр может разбить камень молотком (<a href="#it_005fhammer">it_hammer</a>).
</p>
<p>Распространение вулкана можно сделать стабильным, установив значение &lsquo;<samp>true</samp>&rsquo; для атрибута &lsquo;<samp>secure</samp>&rsquo;. По умолчанию распространение вулкана не является стабильным и может остановиться где угодно, в особенности в узких проходах. В отличие от него стабильный камень-вулкан остаётся действующим до тех пор, пока все соседние участки решётки не оказываются заполненными.
</p>
<p>После своей активной стадии вулкан переходит в своё окончательное бездействующее состояние, и активировать его больше нельзя.
</p>
<p>Камень-вулкан нажмёт на любой <a href="#it_005ftrigger">it_trigger</a> сразу же после того, как начнёт расти.
</p>
<p>!!Work in progress!! возможно, будут добавлено описание особенностей поведения предметов и покрытий
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd><dl compact="compact">
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: <code>IDLE</code>, <code>ACTIVE</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>IDLE</code> &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dd><p>Во время бездействия, после окончания извержения либо во время своего уничтожения камень-вулкан возвращает состояние &lsquo;<samp>IDLE</samp>&rsquo;. Новый, растущий и действующий вулкан возвращает состояние &lsquo;<samp>ACTIVE</samp>&rsquo;. Бездействующий вулкан можно активировать, установив для данного атрибута значение &lsquo;<samp>ACTIVE</samp>&rsquo;. Все прочие попытки изменить состояние вулкана будут проигнорированы.
</p></dd>
<dt> <b>secure</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code></dt>
<dd><p>Стабильный вулкан гарантированно распространится по всей доступной ему территории.
</p></dd>
</dl>

</dd>
<dt> <b>Сообщения:</b></dt>
<dd><dl compact="compact">
<dt> <b>toggle</b> &nbsp;&nbsp;См. раздел <a href="#toggle">toggle</a></dt>
<dd><p>Активирует бездействующий камень-вулкан.
</p></dd>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><dl compact="compact">
<dt> <img src="images/st_flat.png" alt="images/st_flat"><p> <b>st_volcano</b>: state = <code>IDLE</code>
</p></dt>
<dt> <img src="images/st_flat.png" alt="images/st_flat"><p> <b>st_volcano_idle</b>: state = <code>IDLE</code>
</p></dt>
<dt> <img src="images/st_quake_3.png" alt="images/st_quake_3"><p> <b>st_volcano_active</b>: state = <code>ACTIVE</code>
</p></dt>
<dt> <img src="images/it_seed.png" alt="images/it_seed"><p> <b>st_volcano_new</b>:
</p></dt>
<dd><p>Действующий вулкан, начинающий своё существование со стадии семечка.
</p></dd>
<dt> <img src="images/st_volcano_growing.png" alt="images/st_volcano_growing"><p> <b>st_volcano_growing</b>:
</p></dt>
<dd><p>Действующий вулкан, начинающий своё существование со стадии роста.
</p></dd>
</dl>
</dd>
</dl>

<hr size="6">
<a name="st_005fwindow"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fvolcano" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#st_005fyinyang" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fwindow-1"></a>
<h3 class="subsection">9.5.67 st_window</h3>
<a name="index-st_005fwindow"></a>

<p>Камень, сделанный только из листов стекла. Допускаются любые комбинации, состоящие как минимум из одного листа стекла. Существует две разновидности окон: обычные окна голубого цвета и практически неуничтожимые небьющиеся окна зелёного цвета. Небьющимся окно можно сделать, задав значение &lsquo;<samp>true</samp>&rsquo; атрибуту &lsquo;<samp>secure</samp>&rsquo;. Любая из сторон камня может быть ослаблена царапинами (атрибут &lsquo;<samp>scratches</samp>&rsquo;), которые становятся видимыми в тени.
</p>
<p>Все окна пропускают лазерные лучи.
</p>
<p>Медленно передвигающиеся актёры будут отскакивать от любой стороны камня. Внутри камня они могут свободно передвигаться. Невидимые актёры могут даже проходить сквозь голубые окна (но не через небьющиеся зелёные).
</p>
<p>Быстро передвигающиеся актёры могут разбить голубое окно вдребезги. Но если шарик ударит слишком сильно, он сам может разбиться. Актёр может уменьшить требуемую скорость, поместив в инвентарь <a href="#it_005fweight">it_weight</a>, поместив <a href="#it_005fhammer">it_hammer</a> в качестве крайнего левого предмета инвентаря либо предварительно оцарапав окно объектом <a href="#it_005fring">it_ring</a>. Зелёным окнам удары актёров не причиняют вреда, равно как и актеры не могут разбиться, ударившись о небьющееся стекло.
</p>
<p>Взрывы бомб также могут разбивать окна. Обычные голубые окна, находящиеся рядом с бомбой, разобьются при взрыве. Зелёные окна разобьются, только если их предварительно оцарапать объектом <a href="#it_005fring">it_ring</a>.
</p>
<p>Расположение оконных рам можно изменить с помощью гаечного ключа (<a href="#it_005fwrench">it_wrench</a>, он должен находиться слева в инвентаре). Если толкнуть раму снаружи, она переместится на противоположную сторону камня. Но произойдет это только в том случае, если на противоположной стороне нет другой рамы. Кроме того, на соседнем с противоположной стороной участке решётки не должен находиться камень. Другое окно без рамы на данной стороне допускается. Причина заключается в том, что перемещённое окно оттолкнёт на соседний участок нестатичные предметы, а также любых актёров, находящихся на задействованном участке решётки. Если соседний участок уже занят, находящийся на участке с окном предмет превратится в <a href="#it_005fsquashed">it_squashed</a>.
</p>
<p>Перемещение оконных рам может быть вызвано объектом <a href="#it_005fpuller">it_puller</a>, помещённым внутрь окна, а также сообщением &lsquo;<samp>inner_pull</samp>&rsquo;.
</p>
<p>Окна поддерживают <a href="#Flood-Spreading">распространение воды</a> и <a href="#Fire-Spreading">распространения огня</a> через открытые проёмы.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>faces</b> &nbsp;&nbsp;<i>значения</i>: string; &nbsp;&nbsp;<i>по умолчанию</i>: <code>&quot;s&quot;</code></dt>
<dd><p>Описывает расположение оконных рам в камне. Строка является подстрокой <code>&quot;nesw&quot;</code>, перечисляющей расположение проёмов. Последовательность сторон &mdash; север, восток, юг, запад &mdash; является обязательной при доступе для чтения, но произвольной при доступе для записи.
</p></dd>
<dt> <b>secure</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code></dt>
<dd><p>Зелёное стекло (<code>true</code>) не бьётся, голубое (<code>false</code>) &mdash; бьётся.
</p></dd>
<dt> <b>scratches</b> &nbsp;&nbsp;<i>значения</i>: string; &nbsp;&nbsp;<i>по умолчанию</i>: <code>&quot;&quot;</code></dt>
<dd><p>Описывает оцарапанные стеклянные поверхности камня. Строка является подстрокой &quot;nesw&quot; и перечисляет оцарапанные стекла. Последовательность сторон &mdash; север, восток, юг, запад &mdash; является обязательной при доступе для чтения, но произвольной при доступе для записи.
</p></dd>
</dl>

</dd>
<dt> <b>Сообщения:</b></dt>
<dd>
<dl compact="compact">
<dt> <b><b>inner_pull</b></b>, &nbsp;&nbsp;<i>тип значения:</i> orientation</dt>
<dd><p>Пытается переместить противоположную оконную раму в заданном направлении.
</p></dd>
</dl>

</dd>
<dt> <b>Разновидности:</b></dt>
<dd><table>
<tr><td width="8%"><img src="images/st_window_blue_3.png" alt="images/st_window_blue_3"></td><td width="42%"><b>st_window</b>: faces = <code>&quot;s&quot;</code>, secure = <code>false</code></td><td width="8%"><img src="images/st_window_green_3.png" alt="images/st_window_green_3"></td><td width="42%"><b>st_window</b>: faces = <code>&quot;s&quot;</code>, secure = <code>true</code></td></tr>
<tr><td width="8%"><img src="images/st_window_blue_2.png" alt="images/st_window_blue_2"></td><td width="42%"><b>st_window_w</b>: faces = <code>&quot;w&quot;</code>, secure = <code>false</code></td><td width="8%"><img src="images/st_window_green_2.png" alt="images/st_window_green_2"></td><td width="42%"><b>st_window_w</b>: faces = <code>&quot;w&quot;</code>, secure = <code>true</code></td></tr>
<tr><td width="8%"><img src="images/st_window_blue_3.png" alt="images/st_window_blue_3"></td><td width="42%"><b>st_window_s</b>: faces = <code>&quot;s&quot;</code>, secure = <code>false</code></td><td width="8%"><img src="images/st_window_green_3.png" alt="images/st_window_green_3"></td><td width="42%"><b>st_window_s</b>: faces = <code>&quot;s&quot;</code>, secure = <code>true</code></td></tr>
<tr><td width="8%"><img src="images/st_window_blue_4.png" alt="images/st_window_blue_4"></td><td width="42%"><b>st_window_sw</b>: faces = <code>&quot;sw&quot;</code>, secure = <code>false</code></td><td width="8%"><img src="images/st_window_green_4.png" alt="images/st_window_green_4"></td><td width="42%"><b>st_window_sw</b>: faces = <code>&quot;sw&quot;</code>, secure = <code>true</code></td></tr>
<tr><td width="8%"><img src="images/st_window_blue_b.png" alt="images/st_window_blue_b"></td><td width="42%"><b>st_window_e</b>: faces = <code>&quot;e&quot;</code>, secure = <code>false</code></td><td width="8%"><img src="images/st_window_green_b.png" alt="images/st_window_green_b"></td><td width="42%"><b>st_window_e</b>: faces = <code>&quot;e&quot;</code>, secure = <code>true</code></td></tr>
<tr><td width="8%"><img src="images/st_window_blue_b2.png" alt="images/st_window_blue_b2"></td><td width="42%"><b>st_window_ew</b>: faces = <code>&quot;ew&quot;</code>, secure = <code>false</code></td><td width="8%"><img src="images/st_window_green_b2.png" alt="images/st_window_green_b2"></td><td width="42%"><b>st_window_ew</b>: faces = <code>&quot;ew&quot;</code>, secure = <code>true</code></td></tr>
<tr><td width="8%"><img src="images/st_window_blue_b3.png" alt="images/st_window_blue_b3"></td><td width="42%"><b>st_window_es</b>: faces = <code>&quot;es&quot;</code>, secure = <code>false</code></td><td width="8%"><img src="images/st_window_green_b3.png" alt="images/st_window_green_b3"></td><td width="42%"><b>st_window_es</b>: faces = <code>&quot;es&quot;</code>, secure = <code>true</code></td></tr>
<tr><td width="8%"><img src="images/st_window_blue_b4.png" alt="images/st_window_blue_b4"></td><td width="42%"><b>st_window_esw</b>: faces = <code>&quot;esw&quot;</code>, secure = <code>false</code></td><td width="8%"><img src="images/st_window_green_b4.png" alt="images/st_window_green_b4"></td><td width="42%"><b>st_window_esw</b>: faces = <code>&quot;esw&quot;</code>, secure = <code>true</code></td></tr>
<tr><td width="8%"><img src="images/st_window_blue_c.png" alt="images/st_window_blue_c"></td><td width="42%"><b>st_window_n</b>: faces = <code>&quot;n&quot;</code>, secure = <code>false</code></td><td width="8%"><img src="images/st_window_green_c.png" alt="images/st_window_green_c"></td><td width="42%"><b>st_window_n</b>: faces = <code>&quot;n&quot;</code>, secure = <code>true</code></td></tr>
<tr><td width="8%"><img src="images/st_window_blue_c2.png" alt="images/st_window_blue_c2"></td><td width="42%"><b>st_window_nw</b>: faces = <code>&quot;nw&quot;</code>, secure = <code>false</code></td><td width="8%"><img src="images/st_window_green_c2.png" alt="images/st_window_green_c2"></td><td width="42%"><b>st_window_nw</b>: faces = <code>&quot;nw&quot;</code>, secure = <code>true</code></td></tr>
<tr><td width="8%"><img src="images/st_window_blue_c3.png" alt="images/st_window_blue_c3"></td><td width="42%"><b>st_window_ns</b>: faces = <code>&quot;ns&quot;</code>, secure = <code>false</code></td><td width="8%"><img src="images/st_window_green_c3.png" alt="images/st_window_green_c3"></td><td width="42%"><b>st_window_ns</b>: faces = <code>&quot;ns&quot;</code>, secure = <code>true</code></td></tr>
<tr><td width="8%"><img src="images/st_window_blue_c4.png" alt="images/st_window_blue_c4"></td><td width="42%"><b>st_window_nsw</b>: faces = <code>&quot;nsw&quot;</code>, secure = <code>false</code></td><td width="8%"><img src="images/st_window_green_c4.png" alt="images/st_window_green_c4"></td><td width="42%"><b>st_window_nsw</b>: faces = <code>&quot;nsw&quot;</code>, secure = <code>true</code></td></tr>
<tr><td width="8%"><img src="images/st_window_blue_d.png" alt="images/st_window_blue_d"></td><td width="42%"><b>st_window_ne</b>: faces = <code>&quot;ne&quot;</code>, secure = <code>false</code></td><td width="8%"><img src="images/st_window_green_d.png" alt="images/st_window_green_d"></td><td width="42%"><b>st_window_ne</b>: faces = <code>&quot;ne&quot;</code>, secure = <code>true</code></td></tr>
<tr><td width="8%"><img src="images/st_window_blue_d2.png" alt="images/st_window_blue_d2"></td><td width="42%"><b>st_window_new</b>: faces = <code>&quot;new&quot;</code>, secure = <code>false</code></td><td width="8%"><img src="images/st_window_green_d2.png" alt="images/st_window_green_d2"></td><td width="42%"><b>st_window_new</b>: faces = <code>&quot;new&quot;</code>, secure = <code>true</code></td></tr>
<tr><td width="8%"><img src="images/st_window_blue_d3.png" alt="images/st_window_blue_d3"></td><td width="42%"><b>st_window_nes</b>: faces = <code>&quot;nes&quot;</code>, secure = <code>false</code></td><td width="8%"><img src="images/st_window_green_d3.png" alt="images/st_window_green_d3"></td><td width="42%"><b>st_window_nes</b>: faces = <code>&quot;nes&quot;</code>, secure = <code>true</code></td></tr>
<tr><td width="8%"><img src="images/st_window_blue_d4.png" alt="images/st_window_blue_d4"></td><td width="42%"><b>st_window_nesw</b>: faces = <code>&quot;nesw&quot;</code>, secure = <code>false</code></td><td width="8%"><img src="images/st_window_green_d4.png" alt="images/st_window_green_d4"></td><td width="42%"><b>st_window_nesw</b>: faces = <code>&quot;nesw&quot;</code>, secure = <code>true</code></td></tr>
</table>
</dd>
</dl>

<hr size="6">
<a name="st_005fyinyang"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fwindow" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Stone-Feature-Summaries" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Special-Stones" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="st_005fyinyang-1"></a>
<h3 class="subsection">9.5.68 st_yinyang</h3>
<a name="index-st_005fyinyang"></a>

<p>Камень Инь-Ян &mdash; это особого рода переключатель, который позволяет игроку чередоваться между <code>YIN</code> и <code>YANG</code> (см. раздел <a href="#Player-and-Inventory">Игрок и инвентарь</a>).
</p>
<p>В отличие от предмета <a href="#it_005fyinyang">it_yinyang</a>, с помощью камня игрок не может переключаться в любой момент. Это можно сделать только в тех случаях, когда у игрока есть возможность заставить управляемого им актёра дотронуться до камня. Безусловно, другие объекты также могут посылать этому камню сообщение <code>&quot;toggle&quot;</code> при выполнении действий. Кроме того, выпущенное из пушки (<a href="#st_005fspitter">st_spitter</a>) пушечное ядро (<a href="#ot_005fcannonball">ot_cannonball</a>) при попадании в камень Инь-Ян также активирует его.
</p>
<p>При активации камень Инь-Ян переключается из состояния &lsquo;<samp>IDLE</samp>&rsquo; в состояние &lsquo;<samp>ACTIVE</samp>&rsquo;, о чём свидетельствует поворот символа Инь-Ян на поверхности камня. По умолчанию переключение между игроками происходит в конце этой анимации, после чего камень снова возвращается в состояние &lsquo;<samp>IDLE</samp>&rsquo;.
</p>
<p>Если необходимо, чтобы переключение между игроками происходило незамедлительно, то для атрибута &lsquo;<samp>instant</samp>&rsquo; следует установить значение &lsquo;<samp>true</samp>&rsquo;. В таком случае анимация проигрывается после переключения. Имейте в виду, что даже такой камень нельзя повторно активировать до того, как он вернётся в состояние &lsquo;<samp>IDLE</samp>&rsquo; после окончания анимации.
</p>
<p>По умолчанию камень поочерёдно может находиться в одном из двух состояний: &lsquo;<samp>IDLE</samp>&rsquo; и &lsquo;<samp>ACTIVE</samp>&rsquo;. Это означает, что игрок может дотрагиваться до камня много раз, при этом каждый раз переключаясь между инвентарями. Но если для атрибута &lsquo;<samp>loop</samp>&rsquo; установить значение &lsquo;<samp>false</samp>&rsquo;, то после следующей активации камень перейдет в состояние &lsquo;<samp>INACTIVE</samp>&rsquo;. Таким образом, игрок может переключить инвентари с помощью этого камня только один раз.
</p>
<p>Экземпляр этого камня можно использовать для переключения между игроками в самом начале уровня. Используйте камень Инь-Ян в состоянии &lsquo;<samp>ACTIVE</samp>&rsquo;, чтобы переключиться после короткой анимации, или дополнительно задайте для атрибута &lsquo;<samp>instant</samp>&rsquo; значение &lsquo;<samp>true</samp>&rsquo;, чтобы переключиться прежде, чем игрок сможет что-либо сделать с помощью <code>YIN</code>.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: <code>IDLE</code>, <code>ACTIVE</code>, <code>INACTIVE</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>IDLE</code> &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dd><p>Инь-Ян в состоянии &lsquo;<samp>IDLE</samp>&rsquo; готов быть активирован в любой момент. Инь-Ян в состоянии &lsquo;<samp>ACTIVE</samp>&rsquo; проигрывает анимацию и игнорирует любые попытки повторной активации. Состояние &lsquo;<samp>INACTIVE</samp>&rsquo; является окончательным и не может быть изменено с помощью прикосновений актёра или сообщений о чередовании состояния.
</p></dd>
<dt> <b>instant</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>false</code></dt>
<dd><p>По умолчанию камень Инь-Ян осуществляет смену игроков после непродолжительной анимации. При установке значения <code>true</code> смена игроков осуществляется сразу после начала анимации.
</p></dd>
<dt> <b>loop</b> &nbsp;&nbsp;<i><i>з</i>начения</i> <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code></dt>
<dd><p>По умолчанию Инь-Ян из состояния &lsquo;<samp>ACTIVE</samp>&rsquo; переходит в состояние &lsquo;<samp>IDLE</samp>&rsquo;. Если для атрибута установлено значение &lsquo;<samp>false</samp>&rsquo;, то камень вместо этого окончательно переходит в состояние &lsquo;<samp>INACTIVE</samp>&rsquo;.
</p></dd>
</dl>

</dd>
<dt> <b>Сообщения:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>toggle</b> &nbsp;&nbsp;См. раздел <a href="#toggle">toggle</a></dt>
<dd><p>Активирует Инь-Ян, как если бы до камня дотронулся актёр.
</p></dd>
</dl>

</dd>
<dt> <b>Действие:</b> &nbsp;&nbsp;См. раздел <a href="#target">target</a>, &nbsp;&nbsp;см. раздел <a href="#action">action</a></dt>
<dt> <b>Разновидности:</b></dt>
<dd>
<dl compact="compact">
<dt> <img src="images/st_yinyang.png" alt="images/st_yinyang"><p> <b>st_yinyang</b>: state = <code>IDLE</code>
</p></dt>
<dt> <img src="images/st_yinyang.png" alt="images/st_yinyang"><p> <b>st_yinyang_active</b>: state = <code>ACTIVE</code>
</p></dt>
<dt> <img src="images/st_yinyang_inactive.png" alt="images/st_yinyang_inactive"><p> <b>st_yinyang_inactive</b>: state = <code>INACTIVE</code>
</p></dt>
<dt> <img src="images/st_yinyang.png" alt="images/st_yinyang"><p> <b>st_yinyang_instant</b>: instant = <code>true</code>, state = <code>IDLE</code>
</p></dt>
</dl>
</dd>
</dl>


<hr size="6">
<a name="Stone-Feature-Summaries"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#st_005fyinyang" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Transparent-Stones" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Stone-Feature-Summaries-1"></a>
<h2 class="section">9.6 Обзор свойств камней</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Transparent-Stones">9.6.1 Прозрачные камни</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Breakable-Stones">9.6.2 Бьющиеся камни</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Transparent-Stones"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Stone-Feature-Summaries" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Breakable-Stones" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Feature-Summaries" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Transparent-Stones-1"></a>
<h3 class="subsection">9.6.1 Прозрачные камни</h3>

<p>В Enigma имеется большое количество прозрачных камней, похожих по виду, но отличающихся по свойствам. Сквозь некоторые из этих камней игрок может пройти, после того как съест вишню (<a href="#it_005fcherry">it_cherry</a>), другие можно лишь толкать. Некоторые камни прозрачны для лазера, но не все! Ниже мы предлагаем полный список свойств прозрачных камней:
</p>
<table>
<thead><tr><th>Класс</th><th>Разновидность:</th><th>Актёр видим:</th><th>Актёр невидим:</th><th>Прозрачен для лазера:</th></tr></thead>
<tr><td><a href="#st_005frawglass">st_rawglass</a></td><td>st_rawglass</td><td>отскакивает</td><td>проходит</td><td>да</td></tr>
<tr><td><a href="#st_005frawglass">st_rawglass</a></td><td>нет</td><td>толкает</td><td>проходит</td><td>да</td></tr>
<tr><td><a href="#st_005flightglass">st_lightglass</a></td><td>st_lightglass</td><td>отскакивает</td><td>проходит</td><td>да</td></tr>
<tr><td><a href="#st_005flightglass">st_lightglass</a></td><td>st_lightglass_movable</td><td>толкает</td><td>толкает</td><td>да</td></tr>
<tr><td><a href="#st_005flightglass">st_lightglass</a></td><td>st_lightglass_hollow</td><td>проходит</td><td>проходит</td><td>да</td></tr>
<tr><td><a href="#st_005fdarkglass">st_darkglass</a></td><td>st_darkglass</td><td>отскакивает</td><td>проходит</td><td>нет</td></tr>
<tr><td><a href="#st_005fdarkglass">st_darkglass</a></td><td>st_darkglass_movable</td><td>толкает</td><td>толкает</td><td>нет</td></tr>
<tr><td><a href="#st_005fdarkglass">st_darkglass</a></td><td>st_darkglass_hollow</td><td>проходит</td><td>проходит</td><td>да</td></tr>
<tr><td><a href="#st_005fredfiber">st_redfiber</a></td><td>st_redfiber</td><td>отскакивает</td><td>отскакивает</td><td>да</td></tr>
<tr><td><a href="#st_005fpolarswitch">st_polarswitch</a></td><td>st_polarswitch_on</td><td>чередует состояние</td><td>проходит</td><td>да</td></tr>
<tr><td><a href="#st_005fpolarswitch">st_polarswitch</a></td><td>st_polarswitch_off</td><td>чередует состояние</td><td>проходит</td><td>нет</td></tr>
<tr><td><a href="#st_005fbeads">st_beads</a></td><td>st_beads</td><td>не задерживает</td><td>проходит</td><td>нет</td></tr>
<tr><td><a href="#st_005flightpassenger">st_lightpassenger</a></td><td>st_lightpassenger_off</td><td>отскакивает</td><td>отскакивает</td><td>нет</td></tr>
<tr><td><a href="#st_005fice">st_ice</a></td><td>st_ice</td><td>толкает</td><td>толкает</td><td>да</td></tr>
<tr><td><a href="#st_005finvisible">st_invisible</a></td><td>st_invisible</td><td>отскакивает</td><td>отскакивает</td><td>нет</td></tr>
<tr><td><a href="#st_005finvisible">st_invisible</a></td><td>st_invisible_movable</td><td>толкает</td><td>толкает</td><td>нет</td></tr>
<tr><td><a href="#st_005finvisible">st_invisible</a></td><td>st_invisible_hollow</td><td>проходит</td><td>проходит</td><td>нет</td></tr>
<tr><td><a href="#st_005fghost">st_ghost</a></td><td>st_ghost_purplemarble</td><td>отскакивает</td><td>отскакивает</td><td>нет</td></tr>
<tr><td><a href="#st_005fghost">st_ghost</a></td><td>st_ghost_greenbrown</td><td>отскакивает</td><td>отскакивает</td><td>да</td></tr>
<tr><td><a href="#st_005fghost">st_ghost</a></td><td>st_ghost_break</td><td>отскакивает</td><td>отскакивает</td><td>да</td></tr>
</table>

<p>Эти свойства можно запомнить следующим образом: если камень полый и прозрачный, то луч лазера проходит сквозь него, если он тёмный &mdash; не проходит. Исключение &mdash; &lsquo;<samp>st_beads</samp>&rsquo;, чьи края неправильной формы рассеивают луч. Невидимый актёр всегда может пройти сквозь камень за исключением трёх их разновидностей: <samp>st_redfiber</samp>, заполненного красными полосами, и двух подвижных камней &lsquo;<samp>st_lightglass_movable</samp>&rsquo; и &lsquo;<samp>st_darkglass_movable</samp>&rsquo;, у которых оправа сделан не из стекла, что позволяет актёру передвигать эти камни. У <code>st_rawglass_movable</code> такой оправы нет и поэтому невидимый актёр не может его передвигать.
</p>
<hr size="6">
<a name="Breakable-Stones"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Transparent-Stones" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Actor-Objects" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Stone-Feature-Summaries" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Breakable-Stones-1"></a>
<h3 class="subsection">9.6.2 Бьющиеся камни</h3>


<hr size="6">
<a name="Actor-Objects"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Breakable-Stones" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Actor-Attributes" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Stone-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Other-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Actor-Objects-1"></a>
<h1 class="chapter">10. Актёры</h1>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Actor-Attributes">10.1 Атрибуты актёров</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">    Общие атрибуты
</td></tr>
<tr><td align="left" valign="top"><a href="#Actors">10.2 Актёры</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">              Описание всех актёров
</td></tr>
<tr><td align="left" valign="top"><a href="#Actor-Features">10.3 Свойства актёров</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">      Общие свойства актёров, заслуживающие упоминания
</td></tr>
</table>


<hr size="6">
<a name="Actor-Attributes"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#adhesion-_0028actor_0029" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Other-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Actor-Attributes-1"></a>
<h2 class="section">10.1 Атрибуты актёров</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#adhesion-_0028actor_0029">10.1.1 adhesion (актёры)</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        Эффективность движений мыши
</td></tr>
<tr><td align="left" valign="top"><a href="#charge">10.1.2 charge</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Первоначальный электрический заряд
</td></tr>
<tr><td align="left" valign="top"><a href="#controllers">10.1.3 controllers</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">     Мышь
</td></tr>
<tr><td align="left" valign="top"><a href="#color">10.1.4 color</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Цвет
</td></tr>
<tr><td align="left" valign="top"><a href="#essential">10.1.5 essential</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#essential_005fid">10.1.6 essential_id</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#owner">10.1.7 owner</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Владелец инвентаря
</td></tr>
<tr><td align="left" valign="top"><a href="#velocity_005fx">10.1.8 velocity_x</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">      Начальная скорость
</td></tr>
<tr><td align="left" valign="top"><a href="#velocity_005fy">10.1.9 velocity_y</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">      Начальная скорость
</td></tr>
</table>


<hr size="6">
<a name="adhesion-_0028actor_0029"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Actor-Attributes" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#charge" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Other-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="adhesion-_0028actor_0029-1"></a>
<h3 class="subsection">10.1.1 adhesion (актёры)</h3>

<p>Определяет чувствительность актёра к перемещениям мыши Данный атрибут представляет собой скалярный множитель силы ускорения, прилагаемой к актёру. Обратите внимание, что сила перемещений мыши применяется к актёру, только если атрибут <a href="#controllers">controllers</a> разрешает воздействие сил на актёра. Соответственно, если вам необходимо исключить воздействие сил перемещения мыши на актёра, делать это следует с помощью атрибута <a href="#controllers">controllers</a> вместо того, чтобы устанавливать для атрибута adhesion значение 0. Значения атрибута также могут быть отрицательными.  Данные значения соответствуют обратным силам.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;number</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;число с плавающей запятой</dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>0.0</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
</dl>

<hr size="6">
<a name="charge"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#adhesion-_0028actor_0029" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#controllers" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Other-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="charge-1"></a>
<h3 class="subsection">10.1.2 charge</h3>

<p>Начальный электрический заряд, который получает актёр при добавлении в мир. Актёры могут многократно подзаряжаться от объекта <a href="#st_005fcharge">st_charge</a>. Столкновения заряженных актёров друг с другом не влияют на их заряд. Каждый актёр сохраняет свой заряд.
</p>
<p>Электрическая сила, воздействующая на заряженного актёра, определяется его собственным зарядом, а также зарядом и расположением всех остальных заряженных актёров. Обратите внимание, что на неё также влияет глобальный постоянный множитель <a href="#ElectricStrength">ElectricStrength</a>. Если данный множитель имеет отрицательное значение, то актёры, имеющие одинаковый заряд, даже могут притягиваться друг к другу.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;number</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;число с плавающей запятой</dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>0.0</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
</dl>

<hr size="6">
<a name="controllers"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#charge" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#color" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Other-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="controllers-1"></a>
<h3 class="subsection">10.1.3 controllers</h3>

<p>Данный атрибут определяет игроков, которые управляют актёрами при помощи перемещений мыши.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;number</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;<code>CTRL_NONE</code>, <code>CTRL_YIN</code>, <code>CTRL_YANG</code>, <code>CTRL_YINYANG</code></dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>CTRL_NONE</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
</dl>

<hr size="6">
<a name="color"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#controllers" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#essential" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Other-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="color-1"></a>
<h3 class="subsection">10.1.4 color</h3>

<p>Логический цвет актёра. Все актёры, кроме <a href="#ac_005fmarble">ac_marble</a>, <a href="#ac_005fpearl">ac_pearl</a> и <a href="#ac_005fkiller">ac_killer</a>, возвращают цвет <code>nil</code>. Цвет актёра нельзя изменить, данный атрибут доступен только для чтения.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;number</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;<code>BLACK</code>, <code>WHITE</code>, <code>nil</code></dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>nil</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read only</dt>
</dl>

<hr size="6">
<a name="essential"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#color" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#essential_005fid" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Other-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="essential-1"></a>
<h3 class="subsection">10.1.5 essential</h3>

<p>Определяет необходимость актёра оставаться в живых в случаях, когда игроку присвоено несколько актёров. При значении &lsquo;<samp>DISPENSABLE</samp>&rsquo; сохранение актёра в живых не является критичным. Игрок может продолжать играть, пока живы другие управляемые им актёры. При значении &lsquo;<samp>INDISPENSABLE</samp>&rsquo; сохранение актёра в живых является необходимым для продолжения игры. Если такого актёра нельзя воскресить после его гибели, то игрок проиграл. При значении &lsquo;<samp>PERKIND</samp>&rsquo; сохранение актёра в живых является важным, но не критичным условием для продолжения игры. Определяющее значение имеет не собственно выживание актёра, а наличие на уровне большего количество актёров данного типа, управляемых игроком, чем количество актёров со значением данного атрибута, равным &lsquo;<samp>PERKIND</samp>&rsquo;.  Например, если на уровне имеется 5&nbsp;актёров вида <a href="#ac_005fpearl">ac_pearl</a> и для 4&nbsp;из них установлено значение данного атрибута, равное &lsquo;<samp>PERKIND</samp>&rsquo;, то игрок проиграет в случае гибели двух шариков. 
</p>
<p>Конечно, игра сначала попытается воскресить разбившихся или утонувших актёров, если у них имеется объект <a href="#it_005fextralife">it_extralife</a> и глобальный атрибут <a href="#ConserveLevel">ConserveLevel</a> допускает воскрешение актёров.
</p>
<p>Подробнее о перезапуске уровня см. в разделе <a href="#Level-Restart">Перезапуск уровня</a>.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;number</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;<code>DISPENSABLE</code>, <code>INDISPENSABLE</code>, <code>PERKIND</code></dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code></code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
</dl>

<hr size="6">
<a name="essential_005fid"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#essential" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#owner" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Other-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="essential_005fid-1"></a>
<h3 class="subsection">10.1.6 essential_id</h3>

<p>Поскольку игрок может одновременно управлять актёрами различного вида, то критичность наличия актёра для продолжения игры ограничена его видом с помощью данного идентификатора. Он может объединять в одну группу актёров различного вида. Движок игры сохраняет этот идентификатор, даже если актёры изменяют свой вид, например при активации объекта <a href="#it_005fdrop">it_drop</a>.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;string</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;любые</dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;&nbsp;имя модели актёра</dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
</dl>

<hr size="6">
<a name="owner"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#essential_005fid" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#velocity_005fx" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Other-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="owner-1"></a>
<h3 class="subsection">10.1.7 owner</h3>

<p>Игрок, владеющий актёром. Все предметы, подбираемые актёром, кладутся в инвентарь этого игрока. Владение актёром не влияет на вохможность контроля игроком перемещений актёра. Обратите внимание, что в силу известных <a href="#Caveats">особенностей</a> таблиц Lua, для присвоегия данному атрибуту значения <code>nil</code> в таблицах Lua вам необходимо прописать значение <code>DEFAULT</code>. Два других значения, <code>YIN</code> и <code>YANG</code>, это типичные <a href="#state-values">значения состояний</a>.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;number</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;<code>YIN</code>, <code>YANG</code>, <code>nil</code></dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>nil</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
</dl>

<hr size="6">
<a name="velocity_005fx"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#owner" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#velocity_005fy" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Other-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="velocity_005fx-1"></a>
<h3 class="subsection">10.1.8 velocity_x</h3>

<p>Скорость в направлении x, которую получает актёр при добавлении в мир. Хотя этот атрибут доступен для чтения, он не отражает текущую скорость актёра во время выполнения.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;number</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;число с плавающей запятой</dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>0.0</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
</dl>

<hr size="6">
<a name="velocity_005fy"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#velocity_005fx" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Actors" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Attributes" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Other-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="velocity_005fy-1"></a>
<h3 class="subsection">10.1.9 velocity_y</h3>

<p>Скорость в направлении y, которую получает актёр при добавлении в мир. Хотя этот атрибут доступен для чтения, он не отражает текущую скорость актёра во время выполнения.
</p>
<dl compact="compact">
<dt> <b>Тип:</b> &nbsp;&nbsp;number</dt>
<dt> <b>Значения:</b> &nbsp;&nbsp;число с плавающей запятой</dt>
<dt> <b>По умолчанию:</b> &nbsp;&nbsp;<code>0.0</code></dt>
<dt> <b>Доступ:</b> &nbsp;&nbsp;read/write</dt>
</dl>

<hr size="6">
<a name="Actors"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#velocity_005fy" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#ac_005fbug" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Other-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Actors-1"></a>
<h2 class="section">10.2 Актёры</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#ac_005fbug">10.2.1 ac_bug</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#ac_005fhorse">10.2.2 ac_horse</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#ac_005fkiller">10.2.3 ac_killer</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#ac_005fmarble">10.2.4 ac_marble</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#ac_005fpearl">10.2.5 ac_pearl</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#ac_005frotor">10.2.6 ac_rotor</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#ac_005ftop">10.2.7 ac_top</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="ac_005fbug"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Actors" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#ac_005fhorse" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Actors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Other-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="ac_005fbug-1"></a>
<h3 class="subsection">10.2.1 ac_bug</h3>
<a name="index-ac_005fbug"></a>

<p>Актёр, похожий на маленький серый шарик с двумя красными точками. Жуки являются безвредными и обычно пассивными актёрами, не воздействующими на других актёров.
</p>
<p>В отличие от главных актёров, они не могут прыгать, проходить сквозь <a href="#it_005fvortex">it_vortex</a>, не тонут, не падают и не разбиваются. Жуки бессмертны.
</p>
<p>Обратите внимание, что если вы хотите, чтобы игрок непосредственно управлял жуком, вам необходимо установить для атрибутов &lsquo;<samp>controllers</samp>&rsquo; и &lsquo;<samp>adhesion</samp>&rsquo; соответствующие значения. Если жуком владеет игрок, то <a href="#fl_005fthief">fl_thief</a> и <a href="#st_005fthief">st_thief</a> могут украсть у этого актёра предметы.
</p>
<dl compact="compact">
<dt> <b>Attributes:</b> общие атрибуты актёров</dt>
<dd><dl compact="compact">
<dt> <b>adhesion</b> &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: <code>0.0</code>; &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>controllers</b> &nbsp;&nbsp;<i>значения</i>: <code>CTRL_NONE</code>, <code>CTRL_YIN</code>, <code>CTRL_YANG</code>, <code>CTRL_YINYANG</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>CTRL_NONE</code>; &nbsp;&nbsp;См. раздел <a href="#controllers">controllers</a></dt>
<dt> <b>owner</b> &nbsp;&nbsp;<i>значения</i>: <code>YIN</code>, <code>YANG</code>, <code>nil</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>nil</code>; &nbsp;&nbsp;См. раздел <a href="#owner">owner</a></dt>
<dt> <b>mass</b> &nbsp;&nbsp;<i>значения</i>: положительное число с плавающей запятой; &nbsp;&nbsp;<i>по умолчанию</i>: <code>0.7</code>; &nbsp;&nbsp;<i>доступ</i>: read only</dt>
</dl>

</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Разновидности:</b></dt>
<dd>
<dl compact="compact">
<dt> <img src="images/ac_bug.png" alt="images/ac_bug"><p> <b>ac_bug</b>: color = <code>nil</code>, controllers = <code>CTRL_NONE</code>, owner = <code>nil</code>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="ac_005fhorse"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#ac_005fbug" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#ac_005fkiller" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Actors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Other-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="ac_005fhorse-1"></a>
<h3 class="subsection">10.2.2 ac_horse</h3>
<a name="index-ac_005fhorse"></a>

<p>Большой синий дискообразный актёр. Его назвали лошадью, поскольку планируется, что в будущих версиях игры <a href="#ac_005fmarble">ac_marble</a> и <a href="#ac_005fpearl">ac_pearl</a> смогут на нём ездить.
</p>
<p>В отличие от главных актёров, актёры данного типа не могут прыгать, проходить сквозь <a href="#it_005fvortex">it_vortex</a>, не тонут, не падают и не разбиваются. Лошади бессмертны.
</p>
<p>По умолчанию лошадь является пассивным актёром. Но тем не менее, лошадь может передвигаться по своему пути. Различные аспекты перемещения лошади можно контролировать с помощью набора атрибутов.
</p>
<p>Самый простой подход предусматривает использование только атрибутов &lsquo;<samp>destination</samp>&rsquo; и &lsquo;<samp>strength</samp>&rsquo;. Путь для лошади можно проложить, отметив произвольное количество позиций в качестве <a href="#destination">destination</a>. Лошадь будет пытаться дойти до каждого пункта назначения по очереди с силой, заданной атрибутом &lsquo;<samp>strength</samp>&rsquo;. После того, как был достигнут первый пункт назначения, лошадь направится ко второму; по достижении последней укззанной позиции лошадь вернётся к началу пути. В данном режиме (&lsquo;<samp>steady</samp>&rsquo;) лошадь непрерывно ускоряется в направлении следующего пункта назначения. Если ей не удастся добраться до пункта назначения с первого раза, она вернётся к начальной точке и будет пытаться добраться до него снова, пока ей это не удастся. Данный алгоритм довольно упрощён и не подходит для точного управления лошадью, если ей требуется столкнуться с определёнными камнями или двигаться по точно заданной траектории.
</p>
<p>В случае установки для атрибута &lsquo;<samp>steady</samp>&rsquo; значения <code>false</code> используется другой алгоритм ускорения, при котором скорость лошади будет снижаться по мере приближения к пункту назначения. Это позволяет точно контролировать путь следования лошади.
</p>
<p>Кроме того, в любой момент можно запросить индекс текущего пункта назначения. Атрибуту &lsquo;<samp>destidx</samp>&rsquo; даже можно в любой момент присвоить значение. Обратите внимание, что значения данного индекса начинаются с 0 и учитывают все позиции, поэтому они могут не совпадать с номером метки точки назначения, если одна часть метки относится к нескольким позициям одновременно.
</p>
<p>Кроме того, можно контролировать поведение лошади по достижении ей последнего пункта назначения. Она может или остановиться, или начать свой путь снова в зависимости от того, установлено ли для атрибута &lsquo;<samp>loop</samp>&rsquo; значение <code>true</code>.
</p>
<p>Если установить для атрибута &lsquo;<samp>destination</samp>&rsquo; значение <code>nil</code> либо для атрибутов &lsquo;<samp>destidx</samp>&rsquo; или &lsquo;<samp>strength</samp>&rsquo; установить отрицательные значения, то самостоятельное путешествие лошади будет остановлено.
</p>
<p>При движении лошадь пытается достичь пункта назначения. Но если данная позиция заблокирована камнем, то лошадь, столкнувшись с ним, продолжает своё путешествие, направляясь к следующему пункту назначения. Таким образом, лошадь можно использовать для переключения <a href="#st_005fswitch">st_switch</a> и других активных камней.
</p>
<p>Каждый раз по достижении пункта назначения лошадь выполняет своё действие. Установить новый пункт назначения можно, изменив значение атрибута &lsquo;<samp>destination</samp>&rsquo; и других атрибутов в процессе обратного вызова.
</p>
<p>Обратите внимание, что если вы хотите, чтобы игрок непосредственно управлял лошадью, вам необходимо установить для атрибутов &lsquo;<samp>controllers</samp>&rsquo; и &lsquo;<samp>adhesion</samp>&rsquo; соответствующие значения.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>adhesion</b> &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: <code>0.0</code>; &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>controllers</b> &nbsp;&nbsp;<i>значения</i>: <code>CTRL_NONE</code>, <code>CTRL_YIN</code>, <code>CTRL_YANG</code>, <code>CTRL_YINYANG</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>CTRL_NONE</code>; &nbsp;&nbsp;См. раздел <a href="#controllers">controllers</a></dt>
<dt> <b>owner</b> &nbsp;&nbsp;<i>значения</i>: <code>YIN</code>, <code>YANG</code>, <code>nil</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>nil</code>; &nbsp;&nbsp;См. раздел <a href="#owner">owner</a></dt>
<dt> <b>destination</b>, &nbsp;&nbsp;<i>значения</i>: метки или позиция; &nbsp;&nbsp;<i>по умолчанию</i>: <code>nil</code> &nbsp;&nbsp;См. раздел <a href="#destination">destination</a></dt>
<dd><p>Путь, заданный последовательностью позиций.
</p></dd>
<dt> <b>destidx</b>, &nbsp;&nbsp;<i>значения</i>: целые числа; &nbsp;&nbsp;<i>по умолчанию</i>: <code>0</code></dt>
<dd><p>Индекс пункта назначения.
</p></dd>
<dt> <b>loop</b> &nbsp;&nbsp;<I>значения:</I> <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code></dt>
<dd><p>Флаг, определяющий, устанавливается ли для атрибута &lsquo;<samp>destidx</samp>&rsquo; значение по умолчанию после достижения последнего пункта назначения.
</p></dd>
<dt> <b>strength</b> &nbsp;&nbsp;<i>значения</i>: число с плавающей запятой; &nbsp;&nbsp;<i>по умолчанию</i>: <code>+10.0</code></dt>
<dd><p>Скалярный множитель силы, направляющий лошадь к следующему пункту назначения.
</p></dd>
<dt> <b>steady</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code></dt>
<dd><p>Флаг, определяющий выбранный алгоритм ускорения. При значении <code>true</code> выполняется непрерывное ускорение актёра в направлении следующего пункта назначения. Если лошадь не сможет добраться до него с первого раза, то будет запущен цикл. При значении <code>false</code> сила сменит свой знак, когда актёр окажется на некотором критическом расстоянии. Таким образом, в момент достижения пункта назначения актёр будет иметь минимальную скорость.
</p></dd>
<dt> <b>mass</b> &nbsp;&nbsp;<i>значения</i>: положительное число с плавающей запятой; &nbsp;&nbsp;<i>по умолчанию</i>: <code>1.2</code>; &nbsp;&nbsp;<i>доступ</i>: read only</dt>
</dl>

</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Действие:</b> &nbsp;&nbsp;См. раздел <a href="#target">target</a>, &nbsp;&nbsp;см. раздел <a href="#action">action</a></dt>
<dd><p>Выполняется при каждом достижении пункта назначения либо при столкновении с камнем, преграждающим путь к пункту назначения.
</p>
</dd>
<dt> <b>Разновидности:</b></dt>
<dd>
<dl compact="compact">
<dt> <img src="images/ac_horse.png" alt="images/ac_horse"><p> <b>ac_horse</b>: controllers = <code>CTRL_NONE</code>, owner = <code>nil</code>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="ac_005fkiller"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#ac_005fhorse" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#ac_005fmarble" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Actors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Other-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="ac_005fkiller-1"></a>
<h3 class="subsection">10.2.3 ac_killer</h3>
<a name="index-ac_005fkiller"></a>

<p>Актёр, похожий на белый <a href="#ac_005fpearl">ac_pearl</a>, но представляющий смертельную угрозу для актёров <a href="#ac_005fmarble">ac_marble</a> и <a href="#ac_005fpearl">ac_pearl</a>, разбивая их при сопрокосновении.
</p>
<p>В отличие от главных актёров, актёры данного типа не могут прыгать, проходить сквозь <a href="#it_005fvortex">it_vortex</a>, не тонут, не падают и не разбиваются. Шарики-киллеры бессмертны.
</p>
<p>По умолчанию киллерам присваиваются стандартные значения атрибутов, которые позволяют обоим игрокам управлять актёром и задают более высокие значения &lsquo;<samp>adhesion</samp>&rsquo;, чем для <a href="#ac_005fpearl">ac_pearl</a>.
</p>
<p>Обратите внимание, что хотя киллеры и выглядят угрожающе, <a href="#fl_005fthief">fl_thief</a> и <a href="#st_005fthief">st_thief</a> всё равно крадут у них предметы, если киллером управляет игрок.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>color</b> &nbsp;&nbsp;<i>значения</i>: <code>BLACK</code>, <code>WHITE</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>WHITE</code>; &nbsp;&nbsp;<i>доступ</i>: read only</dt>
<dd><p>Цвет киллера.
</p></dd>
<dt> <b>adhesion</b> &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: <code>2.0</code> &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>controllers</b> &nbsp;&nbsp;<i>значения</i>: <code>CTRL_NONE</code>, <code>CTRL_YIN</code>, <code>CTRL_YANG</code>, <code>CTRL_YINYANG</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>CTRL_YINYANG</code>; &nbsp;&nbsp;См. раздел <a href="#controllers">controllers</a></dt>
<dt> <b>owner</b> &nbsp;&nbsp;<i>значения</i>: <code>YIN</code>, <code>YANG</code>, <code>nil</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>nil</code>; &nbsp;&nbsp;См. раздел <a href="#owner">owner</a></dt>
<dt> <b>mass</b> &nbsp;&nbsp;<i>значения</i>: положительное число с плавающей запятой; &nbsp;&nbsp;<i>по умолчанию</i>: <code>0.7</code>; &nbsp;&nbsp;<i>доступ</i>: read only</dt>
</dl>

</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Разновидности:</b></dt>
<dd>
<dl compact="compact">
<dt> <img src="images/ac_pearl_white.png" alt="images/ac_pearl_white"><p> <b>ac_killer</b>: color = <code>WHITE</code>, controllers = <code>CTRL_YINYANG</code>, owner = <code>nil</code>
</p></dt>
<dt> <img src="images/ac_pearl_black.png" alt="images/ac_pearl_black"><p> <b>ac_killer_black</b>: color = <code>BLACK</code>, controllers = <code>CTRL_YINYANG</code>, owner = <code>nil</code>
</p></dt>
<dt> <img src="images/ac_pearl_white.png" alt="images/ac_pearl_white"><p> <b>ac_killer_white</b>: color = <code>WHITE</code>, controllers = <code>CTRL_YINYANG</code>, owner = <code>nil</code>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="ac_005fmarble"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#ac_005fkiller" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#ac_005fpearl" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Actors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Other-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="ac_005fmarble-1"></a>
<h3 class="subsection">10.2.4 ac_marble</h3>
<a name="index-ac_005fmarble"></a>

<p>Главный актёр, представляющий собой большой чёрный или белый шар. Шарики &mdash; это многогранные актёры, которые могут прыгать, проходить через <a href="#it_005fvortex">it_vortex</a>, но которые в то же время тонут, падают и разбиваются.
</p>
<p>Пока у владельца шарика, определяемого атрибутом &lsquo;<samp>owner</samp>&rsquo;, в инвентаре имеется объект <a href="#it_005fextralife">it_extralife</a>, погибший шарик будет воскрешаться. При отсутствии дополнительной жизни состояние (&lsquo;<samp>state</samp>&rsquo;) шарика изменяется на <code>DEAD</code> и управлять шариком больше нельзя.
</p>
<p>При создании шарикам присваиваются стандартные значения атрибутов. Изменить цвет шарика нельзя. Состояние шарика изменяется под влиянием событий и также доступно только для чтения.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: <code>ALIVE</code>, <code>DEAD</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>ALIVE</code>; &nbsp;&nbsp;См. раздел <a href="#state">state</a>; &nbsp;&nbsp;<i>доступ</i>: read only</dt>
<dt> <b>color</b> &nbsp;&nbsp;<i>значения</i>: <code>BLACK</code>, <code>WHITE</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>BLACK</code>; &nbsp;&nbsp;<i>доступ</i>: read only</dt>
<dd><p>Цвет шарика.
</p></dd>
<dt> <b>adhesion</b> &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: <code>1.0</code>; &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>controllers</b> &nbsp;&nbsp;<i>значения</i>: <code>CTRL_NONE</code>, <code>CTRL_YIN</code>, <code>CTRL_YANG</code>, <code>CTRL_YINYANG</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>CTRL_NONE</code>; &nbsp;&nbsp;См. раздел <a href="#controllers">controllers</a></dt>
<dt> <b>owner</b> &nbsp;&nbsp;<i>значения</i>: <code>YIN</code>, <code>YANG</code>, <code>nil</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>nil</code>; &nbsp;&nbsp;См. раздел <a href="#owner">owner</a></dt>
<dt> <b>mass</b> &nbsp;&nbsp;<i>значения</i>: положительное число с плавающей запятой; &nbsp;&nbsp;<i>по умолчанию</i>: <code>1.0</code>; &nbsp;&nbsp;<i>доступ</i>: read only</dt>
</dl>

</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Разновидности:</b></dt>
<dd>
<dl compact="compact">
<dt> <img src="images/ac_marble_black.png" alt="images/ac_marble_black"><p>  <b>ac_marble</b>: color = <code>BLACK</code>, controllers = <code>CTRL_YIN</code>, owner = <code>YIN</code>
</p></dt>
<dt> <img src="images/ac_marble_black.png" alt="images/ac_marble_black"><p> <b>ac_marble_black</b>: color = <code>BLACK</code>, controllers = <code>CTRL_YIN</code>, owner = <code>YIN</code>
</p></dt>
<dt> <img src="images/ac_marble_white.png" alt="images/ac_marble_white"><p> <b>ac_marble_white</b>: color = <code>WHITE</code>, controllers = <code>CTRL_YANG</code>, owner = <code>YANG</code>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="ac_005fpearl"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#ac_005fmarble" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#ac_005frotor" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Actors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Other-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="ac_005fpearl-1"></a>
<h3 class="subsection">10.2.5 ac_pearl</h3>
<a name="index-ac_005fpearl"></a>

<p>Главное действующее лицо на уровнях для медитации, представляющее собой маленький белый шарик (в настоящее время только белого цвета). Жемчужины, подобно большим шарикам, &mdash; это многогранные актёры, которые могут прыгать, проходить через <a href="#it_005fvortex">it_vortex</a>, но которые в то же время тонут, падают и разбиваются.
</p>
<p>Пока у владельца шарика, определяемого атрибутом &lsquo;<samp>owner</samp>&rsquo;, в инвентаре имеется объект <a href="#it_005fextralife">it_extralife</a>, погибший шарик будет воскрешаться. При отсутствии дополнительной жизни состояние (&lsquo;<samp>state</samp>&rsquo;) шарика изменяется на <code>DEAD</code> и управлять шариком больше нельзя.
</p>
<p>При создании жемчужинам присваиваются стандартные значения атрибутов. Состояние жемчужины изменяется под влиянием событий и также доступно только для чтения.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: <code>ALIVE</code>, <code>DEAD</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>ALIVE</code>; &nbsp;&nbsp;См. раздел <a href="#state">state</a>; &nbsp;&nbsp;<i>доступ</i>: read only</dt>
<dt> <b>color</b> &nbsp;&nbsp;<i>значения</i>: <code>BLACK</code>, <code>WHITE</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>WHITE</code>; &nbsp;&nbsp;<i>доступ</i>: read only</dt>
<dd><p>Цвет жемчужины.
</p></dd>
<dt> <b>adhesion</b> &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: <code>1.0</code>; &nbsp;&nbsp;См. раздел <a href="#adhesion">adhesion</a></dt>
<dt> <b>controllers</b> &nbsp;&nbsp;<i>значения</i>: <code>CTRL_NONE</code>, <code>CTRL_YIN</code>, <code>CTRL_YANG</code>, <code>CTRL_YINYANG</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>CTRL_NONE</code>; &nbsp;&nbsp;См. раздел <a href="#controllers">controllers</a></dt>
<dt> <b>owner</b> &nbsp;&nbsp;<i>значения</i>: <code>YIN</code>, <code>YANG</code>, <code>nil</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>nil</code>; &nbsp;&nbsp;См. раздел <a href="#owner">owner</a></dt>
<dt> <b>mass</b> &nbsp;&nbsp;<i>значения</i>: положительное число с плавающей запятой; &nbsp;&nbsp;<i>по умолчанию</i>: <code>0.7</code>; &nbsp;&nbsp;<i>доступ</i>: read only</dt>
</dl>

</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Разновидности:</b></dt>
<dd>
<dl compact="compact">
<dt> <img src="images/ac_pearl_white.png" alt="images/ac_pearl_white"><p> <b>ac_pearl</b>: color = <code>WHITE</code>, controllers = <code>CTRL_YINYANG</code>, owner = <code>YIN</code>
</p></dt>
<dt> <img src="images/ac_pearl_black.png" alt="images/ac_pearl_black"><p> <b>ac_pearl_black</b>: color = <code>BLACK</code>, controllers = <code>CTRL_YINYANG</code>, owner = <code>YIN</code>
</p></dt>
<dt> <img src="images/ac_pearl_white.png" alt="images/ac_pearl_white"><p> <b>ac_pearl_white</b>: color = <code>WHITE</code>, controllers = <code>CTRL_YINYANG</code>, owner = <code>YIN</code>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="ac_005frotor"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#ac_005fpearl" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#ac_005ftop" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Actors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Other-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="ac_005frotor-1"></a>
<h3 class="subsection">10.2.6 ac_rotor</h3>
<a name="index-ac_005frotor"></a>

<p>Вращающийся актёр, состоящий из 4&nbsp;зеленоватых палочек. Он представляет смертельную опасность для <a href="#ac_005fmarble">ac_marble</a> и <a href="#ac_005fpearl">ac_pearl</a>, разбивая их при соприкосновении. Его поведение идентично поведению <a href="#ac_005ftop">ac_top</a>.
</p>
<p>В отличие от главных актёров, роторы не могут прыгать, проходить сквозь <a href="#it_005fvortex">it_vortex</a>, не тонут, не падают и не разбиваются. Роторы бессмертны.
</p>
<p>Роторы обычно охотятся на смертных актёров, пытаясь их разбить. Они ускоряются с силой, заданной атрибутом &lsquo;<samp>strength</samp>&rsquo;, но расстояние, на котором они преследуют актёров, ограничего атрибутом &lsquo;<samp>range</samp>&rsquo;. Если актёры, которых можно атаковать, на данном расстоянии отсутствуют, то они возвращаются в своё первоначальное положение, если для атрибута &lsquo;<samp>gohome</samp>&rsquo; установлено значение &lsquo;<samp>true</samp>&rsquo;.
</p>
<p>Обратите внимание, что если на расстоянии атаки имеется несколько актёров, которых можно атаковать, это сбивает ротора с толку и он бросается на центральный участок между своими жертвами.  Но если для атрибута &lsquo;<samp>attacknearest</samp>&rsquo; установить значение &lsquo;<samp>true</samp>&rsquo;, ротор сосредоточит своё внимание на ближайшей жертве. Изменяя значение атрибута &lsquo;<samp>prefercurrent</samp>&rsquo;, ротору можно указать, чтобы он с определённой вероятностью атаковал жертв, управляемых активным игроком.
</p>
<p>Обратите внимание, что если вы хотите, чтобы игрок непосредственно управлял ротором, вам необходимо установить для атрибутов &lsquo;<samp>controllers</samp>&rsquo; и &lsquo;<samp>adhesion</samp>&rsquo; соответствующие значения. Если ротором владеет игрок, то <a href="#fl_005fthief">fl_thief</a> и <a href="#st_005fthief">st_thief</a> могут украсть у этого актёра предметы.
</p>
<p>При активации <a href="#it_005fdrop">it_drop</a> актёр <a href="#ac_005fmarble">ac_marble</a> временно превратится в ротора. На 5&nbsp;секунд шарик становится настоящим неуязвимым ротором, который сохраняет идентичность бывшего шарика, включая атрибут &lsquo;<samp>essential_id</samp>&rsquo;. После этого актёр снова принимает свой изначальный вид.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>range</b> &nbsp;&nbsp;<i>значения</i>: число с плавающей запятой; &nbsp;&nbsp;<i>по умолчанию</i>: <code>5.0</code></dt>
<dd><p>Расстояние, на котором актёр преследует своих жертв.
</p></dd>
<dt> <b>strength</b> &nbsp;&nbsp;<i>значения</i>: число с плавающей запятой; &nbsp;&nbsp;<i>по умолчанию</i>: <code>+10.0</code></dt>
<dd><p>Значение силы, направляющей ротора к своим жертвам.
</p></dd>
<dt> <b>gohome</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code></dt>
<dd><p>Поведение ротора, в поле зрения которого отсутствуют потенциальные жертвы.
</p></dd>
<dt> <b>attacknearest</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code></dt>
<dd><p>Поведение ротора, в поле зрения которого присутствует несколько потенциальных жертв.
</p></dd>
<dt> <b>prefercurrent</b> &nbsp;&nbsp;<i>значения</i>: число с плавающей запятой в диапазоне [0.0 - 1.0]; &nbsp;&nbsp;<i>по умолчанию</i>: <code>0.0</code></dt>
<dd><p>Вероятность выбора стратегии атаки. Данный атрибут обычно используется в сочетании со значением &lsquo;<samp>true</samp>&rsquo; атрибута &lsquo;<samp>attacknearest</samp>&rsquo;. Уровень &lsquo;<samp>Toreador</samp>&rsquo; представляет собой пример подобного поведения роторов.
</p></dd>
<dt> <b>mass</b> &nbsp;&nbsp;<i>значения</i>: положительное число с плавающей запятой; &nbsp;&nbsp;<i>по умолчанию</i>: <code>0.8</code>; &nbsp;&nbsp;<i>доступ</i>: read only</dt>
</dl>

</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Разновидности:</b></dt>
<dd>
<dl compact="compact">
<dt> <img src="images/ac_rotor.png" alt="images/ac_rotor"><p> <b>ac_rotor</b>: color = <code>nil</code>, controllers = <code>CTRL_NONE</code>, owner = <code>nil</code>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="ac_005ftop"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#ac_005frotor" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Actor-Features" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Actors" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Other-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="ac_005ftop-1"></a>
<h3 class="subsection">10.2.7 ac_top</h3>
<a name="index-ac_005ftop"></a>

<p>Быстро вращающийся дископодобный зеленоватый актёр. Он представляет смертельную опасность для <a href="#ac_005fmarble">ac_marble</a> и <a href="#ac_005fpearl">ac_pearl</a>, разбивая их при соприкосновении. Его поведение идентично поведению <a href="#ac_005frotor">ac_rotor</a>.
</p>
<p>В отличие от главных актёров, актёры данного типа не могут прыгать, проходить сквозь <a href="#it_005fvortex">it_vortex</a>, не тонут, не падают и не разбиваются. Волчки бессмертны.
</p>
<p>Волчки обычно охотятся на смертных актёров, пытаясь их разбить. Они ускоряются с силой, заданной атрибутом &lsquo;<samp>strength</samp>&rsquo;, но расстояние, на котором они преследуют актёров, ограничего атрибутом &lsquo;<samp>range</samp>&rsquo;. Если актёры, которых можно атаковать, на данном расстоянии отсутствуют, то они возвращаются в своё первоначальное положение, если для атрибута &lsquo;<samp>gohome</samp>&rsquo; установлено значение &lsquo;<samp>true</samp>&rsquo;.
</p>
<p>Обратите внимание, что если на расстоянии атаки имеется несколько актёров, которых можно атаковать, это сбивает волчок с толку и он бросается на центральный участок между своими жертвами. Но если для атрибута &lsquo;<samp>attacknearest</samp>&rsquo; установить значение &lsquo;<samp>true</samp>&rsquo;, волчок сосредоточит своё внимание на ближайшей жертве. Изменяя значение атрибута &lsquo;<samp>prefercurrent</samp>&rsquo;, волчку можно указать, чтобы он с определённой вероятностью атаковал жертв, управляемых активным игроком.
</p>
<p>Обратите внимание, что если вы хотите, чтобы игрок непосредственно управлял волчком, вам необходимо установить для атрибутов &lsquo;<samp>controllers</samp>&rsquo; и &lsquo;<samp>adhesion</samp>&rsquo; соответствующие значения. Если волчком владеет игрок, то <a href="#fl_005fthief">fl_thief</a> и <a href="#st_005fthief">st_thief</a> могут украсть у этого актёра предметы.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>range</b> &nbsp;&nbsp;<i>значения</i>: число с плавающей запятой; &nbsp;&nbsp;<i>по умолчанию</i>: <code>5.0</code></dt>
<dd><p>Расстояние, на котором актёр преследует своих жертв.
</p></dd>
<dt> <b>strength</b> &nbsp;&nbsp;<i>значения</i>: число с плавающей запятой; &nbsp;&nbsp;<i>по умолчанию</i>: <code>+10.0</code></dt>
<dd><p>Значение силы, направляющей волчок к своим жертвам.
</p></dd>
<dt> <b>gohome</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code></dt>
<dd><p>Поведение волчка, в поле зрения которого отсутствуют потенциальные жертвы.
</p></dd>
<dt> <b>attacknearest</b> &nbsp;&nbsp;<i>значения</i>: <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code></dt>
<dd><p>Поведение волчка, в поле зрения которого присутствует несколько потенциальных жертв.
</p></dd>
<dt> <b>prefercurrent</b> &nbsp;&nbsp;<i>значения</i>: число с плавающей запятой в диапазоне [0.0 - 1.0]; &nbsp;&nbsp;<i>по умолчанию</i>: <code>+0.0</code></dt>
<dd><p>Вероятность выбора стратегии атаки. Данный атрибут обычно используется в сочетании со значением &lsquo;<samp>true</samp>&rsquo; атрибута &lsquo;<samp>attacknearest</samp>&rsquo;. Уровень &lsquo;<samp>Toreador</samp>&rsquo; представляет собой пример подобного поведения роторов.
</p></dd>
<dt> <b>mass</b> &nbsp;&nbsp;<i>значения</i>: положительное число с плавающей запятой; &nbsp;&nbsp;<i>по умолчанию</i>: <code>0.8</code>; &nbsp;&nbsp;<i>доступ</i>: read only</dt>
</dl>

</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Разновидности:</b></dt>
<dd>
<dl compact="compact">
<dt> <img src="images/ac_top.png" alt="images/ac_top"><p> <b>ac_top</b>: color = <code>nil</code>, controllers = <code>CTRL_NONE</code>, owner = <code>nil</code>
</p></dt>
</dl>

</dd>
</dl>

<hr size="6">
<a name="Actor-Features"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#ac_005ftop" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Flying-Actors" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Other-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Actor-Features-1"></a>
<h2 class="section">10.3 Свойства актёров</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Flying-Actors">10.3.1 Летающие актёры</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
</table>

<hr size="6">
<a name="Flying-Actors"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Actor-Features" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Other-Objects" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Actor-Features" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Other-Objects" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Flying-Actors-1"></a>
<h3 class="subsection">10.3.1 Летающие актёры</h3>

<p>Шарообразные актёры, а именно <a href="#ac_005fmarble">ac_marble</a> и <a href="#ac_005fpearl">ac_pearl</a>, могут летать непродолжительное время, если их катапультирует какой-либо предмет.
</p>
<p>В настоящее время к таким предметам относятся портативная пружина (<a href="#it_005fspring">it_spring</a>), которая позволяет актёрам подпрыгивать при активации, и статичные трамплин (<a href="#it_005fspringboard">it_springboard</a>), катапультирующий проходящих по нему актёров, и телепорт (<a href="#it_005fvortex">it_vortex</a>), катапультирующий выпрыгивающих из него актёров.
</p>
<p>Летающие актёры могут без труда пересекать смертоносные участки с расположенными на них объектами <a href="#fl_005fwater">fl_water</a>, <a href="#fl_005fabyss">fl_abyss</a>, <a href="#it_005ftrap">it_trap</a> и даже лазерные лучи. Но большинство камней преградят актёрам путь, даже некоторые полые, такие как <a href="#st_005fgrate">st_grate</a> или <a href="#st_005foneway">st_oneway</a>. Некоторые же другие, такие как <a href="#st_005fdoor">st_door</a> или некоторые <a href="#Standard-Stones">простые камни</a>, позволяют актёрам пролетать над ними.
</p>
<p>Во время полёта актёры не могут подбирать предметы. Но они могут их ронять. Актёр, тонущий на покрытиях <a href="#fl_005fwater">fl_water</a> или <a href="#fl_005fswamp">fl_swamp</a>, может активировать пружину и сразу же из них выпрыгнуть; процесс затопления начнётся сначала после приземления актёра на такое покрытие.
</p>


<hr size="6">
<a name="Other-Objects"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Flying-Actors" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Visible-Others" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Actor-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Other-Objects-1"></a>
<h1 class="chapter">11. Остальные объекты</h1>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Visible-Others">11.1 Видимые объекты</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">    Особые игровые объекты
</td></tr>
<tr><td align="left" valign="top"><a href="#Gadgets">11.2 Гаджеты</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Инструменты для конструирования уровней по принципу plug-and-play
</td></tr>
</table>


<hr size="6">
<a name="Visible-Others"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Other-Objects" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#ot_005fcannonball" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Other-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Other-Objects" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Visible-Others-1"></a>
<h2 class="section">11.1 Видимые объекты</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#ot_005fcannonball">11.1.1 ot_cannonball</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">     Ядро, вылетевшее из пушки
</td></tr>
<tr><td align="left" valign="top"><a href="#ot_005frubberband">11.1.2 ot_rubberband</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">     Резиновая лента, воздействующая на актёров
</td></tr>
<tr><td align="left" valign="top"><a href="#ot_005fwire">11.1.3 ot_wire</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Передаёт импульсы от одного камня другому
</td></tr>
</table>


<hr size="6">
<a name="ot_005fcannonball"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Visible-Others" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#ot_005frubberband" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Other-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Visible-Others" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="ot_005fcannonball-1"></a>
<h3 class="subsection">11.1.1 ot_cannonball</h3>
<a name="index-ot_005fcannonball"></a>

<p>Кратковременно существующий объект, который представляет собой ядро, вылетевшее из пушки (<a href="#st_005fspitter">st_spitter</a>). Это внутренний объект, экземпляр которого нельзя создать произвольно. Здесь он приводится для полноты описания.
</p>
<hr size="6">
<a name="ot_005frubberband"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#ot_005fcannonball" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#ot_005fwire" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Other-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Visible-Others" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="ot_005frubberband-1"></a>
<h3 class="subsection">11.1.2 ot_rubberband</h3>
<a name="index-ot_005frubberband"></a>

<p>Оранжевая лента, которая соединяет два объекта и может применять к ним силы притяжения или отталкивания.
</p>
<p>Два соединённых лентой объекта называются якорями. Атрибут &lsquo;<samp>anchor1</samp>&rsquo; содержит ссылку на первый объект, который должен быть актёром. Атрибут &lsquo;<samp>anchor2</samp>&rsquo; указывает на второй объект, который может быть либо ещё одним актёром, либо камнем. Чтобы добавить (<a href="#add">add</a>) резиновую ленту к миру, оба объекта должны существовать. Если камень утонет, разобьётся либо будет уничтожен любым другим способом, лента также будет уничтожена.
</p>
<p>Оба якоря обновят свои атрибуты <a href="#rubbers">rubbers</a> и <a href="#fellows">fellows</a>, чтобы указать эту ленту и объект, с которым она их связывает, с целью оценки.
</p>
<p>Силу, которая применяется по отношению к объектам, можно задать несколькими атрибутами. Каждая лента имеет естественную длину (&lsquo;<samp>length</samp>&rsquo;), на которой она не воздействует на актёров. Если ленту растянуть на расстояние, большее, чем эта длина, она начнет применять к актёрам силу (&lsquo;<samp>strength</samp>&rsquo;). Положительная сила &mdash; это естественная сила притяжения, в то время как отрицательная сила &mdash; это сила отталкивания.
</p>
<p>Лента короче своей естественной длины (&lsquo;<samp>length</samp>&rsquo;), как правило, не будет воздействовать на актёров. Но вы можете установить порог (&lsquo;<samp>threshold</samp>&rsquo;), за которым лента, подобно пружине, начнет применять к актерам силы, направленные в противоположную сторону. Таким образом, положительное значение атрибута &lsquo;<samp>strength</samp>&rsquo; будет соответствовать силе отталкивания, отрицательное &mdash; силе притяжения. Лента с длиной, значение которой находится между значениями атрибутов &lsquo;<samp>threshold</samp>&rsquo; и &lsquo;<samp>length</samp>&rsquo;, не будет воздействовать на актёров. Если для атрибута &lsquo;<samp>length</samp>&rsquo; установить значение <code>AUTOLENGTH</code>, длина резиновой ленты будет определяться на основе расстояния между её конечными точками в момент её создания.
</p>
<p>В некоторых случаях длину ленты может потребоваться ограничить . Это можно сделать, установив значения атрибутов &lsquo;<samp>min</samp>&rsquo; и &lsquo;<samp>max</samp>&rsquo;. При достижении этих границ актёры будут отскакивать. Не пытайтесь использовать с этой целью искусственно завышенные значения атрибута &lsquo;<samp>strength</samp>&rsquo;, так как это может привести к чрезмерно высоким значениям сил и вызвать непредусмотренные и нестабильные движения актёров.
</p>
<p>При установке предельных значений &lsquo;<samp>min</samp>&rsquo; или &lsquo;<samp>max</samp>&rsquo; могут возникнуть проблемы в чрезвычайных ситуациях, таких как выпрыгивание актёра из телепорта, воскрешение актёра, перемещение якорей или просто создание лент недопустимой длины. При обнаружении недопустимой длины ленты выполняется действие со значением  &lsquo;<samp>false</samp>&rsquo;. Может возникнуть необходимость уничтожить ленту либо отреагировать другим способом с помощью функции обратного вызова. По умолчанию используется постоянная сила, возвращающая актёров в допустимые границы. Эта сила задаётся атрибутом <a href="#RubberViolationStrength">RubberViolationStrength</a> и по умолчанию равна &lsquo;<samp>50.0</samp>&rsquo;. Если действительно необходимо гарантировать, что игрок ни при каких обстоятельствах не сможет нарушить установленные лимиты, значение этой константы можно увеличить.
</p>
<p>Ленты можно отрезать с помощью объекта <a href="#st_005fscissors">st_scissors</a>, объектами <a href="#it_005fvortex">it_vortex</a> или <a href="#it_005fwormhole">it_wormhole</a> с соответствующим установленным значением атрибута &lsquo;<samp>scissors</samp>&rsquo;, посредством сообщения <a href="#kill">kill</a>, отправив одному из якорей сообщение <a href="#disconnect">disconnect</a> либо уничтожив камень-якорь.
</p>
<p>Ленты могут быть сгенерированы в процессе игры с помощью объектов <a href="#it_005frubberband">it_rubberband</a> и <a href="#st_005frubberband">st_rubberband</a>.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>anchor1</b> &nbsp;&nbsp;<i>значения</i>: объект (актёр); &nbsp;&nbsp;<i>по умолчанию</i>: <code>nil</code></dt>
<dd><p>Ссылка на объект либо имя актёра, к которому будет привязана лента. Обратите внимание, что ссылка будет оцениваться немедленно и, следовательно, актёр уже должен существовать.
</p></dd>
<dt> <b>anchor2</b> &nbsp;&nbsp;<i>значения</i>: актёр или камень; &nbsp;&nbsp;по умолчанию: <code>nil</code></dt>
<dd><p>Объектная ссылка либо имя актёра/камня, к которому присоединится лента. Обратите внимание, что ссылка будет оцениваться немедленно и, следовательно, актёр или камень уже должны существовать.
</p></dd>
<dt> <b>strength</b> &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: <code>10.0</code></dt>
<dd><p>Величина, определяющая силу упругости.
</p></dd>
<dt> <b>length</b> &nbsp;&nbsp;<i>значения</i>: положительное число или  <code>AUTOLENGTH</code>; &nbsp;&nbsp;<i>по умолчанию:</i> <code>1.0</code></dt>
<dd><p>Нормальная длина ненатянутой резиновой ленты, при превышении которой начинают действовать силы.
</p></dd>
<dt> <b>threshold</b> &nbsp;&nbsp;<i>значения</i>: положительное число или ноль; &nbsp;&nbsp;<i>по умолчанию</i>: <code>0.0</code></dt>
<dd><p>Расстояние, меньшее, чем длина ненатянутой ленты, при уменьшении которого начинают действовать обратные силы.
</p></dd>
<dt> <b>min</b> &nbsp;&nbsp;<i>значения</i>: положительное число или ноль; &nbsp;&nbsp;<i>по умолчанию</i>: <code>0.0</code></dt>
<dd><p>Минимальная длина, при которой отскакивают актёры.
</p></dd>
<dt> <b>max</b> &nbsp;&nbsp;<i>значения</i>: положительное число или ноль; &nbsp;&nbsp;<i>по умолчанию</i>: <code>0.0</code></dt>
<dd><p>Максимальная длина, при которой отскакивают актёры.
</p></dd>
</dl>

</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Действие:</b> &nbsp;&nbsp;См. раздел <a href="#target">target</a>, &nbsp;&nbsp;см. раздел <a href="#action">action</a></dt>
<dd><p>При выходе за минимальный или максимальный пределы будет выполнено действие со значением &lsquo;<samp>false</samp>&rsquo;. Кроме того, от лица объекта <a href="#it_005frubberband">it_rubberband</a> после применения и создания резиновой ленты будет выполнено действие со значением &lsquo;<samp>true</samp>&rsquo;.
</p></dd>
</dl>

<hr size="6">
<a name="ot_005fwire"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#ot_005frubberband" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Gadgets" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Other-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Visible-Others" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="ot_005fwire-1"></a>
<h3 class="subsection">11.1.3 ot_wire</h3>
<a name="index-ot_005fwire"></a>

<p>Это пурпурная проволока, которая передаёт импульсы от одного камня к другому и наоборот. Таким образом, оба камня будут сдвигаться под воздействием импульса, если они являются подвижными и путь им ничего не преграждает. Импульсы могут исходить от актёра, ударившегося о камень, а также от объектов <a href="#it_005fpuller">it_puller</a>, <a href="#st_005frotator">st_rotator</a>, <a href="#st_005fstoneimpulse">st_stoneimpulse</a>.
</p>
<p>Один камень может быть соединён проволокой с несколькими другими камнями. Все эти &quot;соратники&quot; (<a href="#fellows">fellows</a>) будут сдвигаться под воздействием импульса. Но импульсы не будут передаваться камням, которые в свою очередь связаны с одним из &quot;соратников&quot;. Сдвигаться будут только непосредственно соединённые камни.
</p>
<p>Связать камни проволокой можно только один раз. Добавление новой проволоки между уже связанными камнями приведёт к обрыву имеющейся.
</p>
<p>С помощью атрибута камня <a href="#wires">wires</a> можно запросить проволоки, присоединённые к камню. Поскольку оценивать оба якоря утомительно, все камни поддерживают атрибут <a href="#fellows">fellows</a>, который возвращает соединённые с камнем объекты.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>anchor1</b> &nbsp;&nbsp;<i>значения</i>: объект (камень); &nbsp;&nbsp;<i>по умолчанию</i>: <code>nil</code></dt>
<dd><p>Ссылка на объект либо имя камня, к которому будет присоединена проволока. Обратите внимание, что ссылка будет оцениваться немедленно и, следовательно, камень уже должен существовать.
</p></dd>
<dt> <b>anchor2</b> &nbsp;&nbsp;<i>значения</i>: объект (камень); &nbsp;&nbsp;<i>по умолчанию</i>: <code>nil</code></dt>
<dd><p>Ссылка на объект либо имя камня, к которому будет присоединена проволока. Обратите внимание, что ссылка будет оцениваться немедленно и, следовательно, камень уже должен существовать.
</p></dd>
</dl>

</dd>
<dt> <b>Сообщения:</b> отсутствуют</dt>
<dt> <b>Действия:</b> отсутствуют</dt>
</dl>

<hr size="6">
<a name="Gadgets"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#ot_005fwire" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#ot_005fcounter" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Other-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Other-Objects" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Gadgets-1"></a>
<h2 class="section">11.2 Гаджеты</h2>


<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#ot_005fcounter">11.2.1 ot_counter</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">   Пороговый выключатель
</td></tr>
<tr><td align="left" valign="top"><a href="#ot_005ftimer">11.2.2 ot_timer</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">     Невидимый таймер
</td></tr>
</table>

<hr size="6">
<a name="ot_005fcounter"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Gadgets" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#ot_005ftimer" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Other-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Gadgets" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="ot_005fcounter-1"></a>
<h3 class="subsection">11.2.1 ot_counter</h3>
<a name="index-ot_005fcounter"></a>

<p>Счётчик, который срабатывает по достижении заданных порогов. Он является дополнением к группе отдельных переключателей, таких как <a href="#it_005ftrigger">it_trigger</a>, <a href="#st_005fswitch">st_switch</a>, <a href="#st_005flaserswitch">st_laserswitch</a>, <a href="#st_005fcoinslot">st_coinslot</a>, <a href="#st_005fkey">st_key</a>, <a href="#st_005ffloppy">st_floppy</a>, и реагирует на определённое число данных переключателей, находящихся в состоянии &lsquo;<samp>ON</samp>&rsquo; и  &lsquo;<samp>OFF</samp>&rsquo;.
</p>
<p>Атрибут &lsquo;<samp>state</samp>&rsquo; определяет количество переключателей, которое должно находиться в состоянии &lsquo;<samp>ON</samp>&rsquo;. В соответствии с <a href="#Snapshot-Principle">принципом снимка</a> его значение должно равняться изначальному количеству переключателей, находящихся в состоянии &lsquo;<samp>ON</samp>&rsquo;. Все переключатели должны объявить данный гаджет в качестве своей цели (&lsquo;<samp>target</samp>&rsquo;). Все они должны отправить <code>&quot;signal&quot;</code> в качестве действия (&lsquo;<samp>action</samp>&rsquo;). Значение атрибута &lsquo;<samp>state</samp>&rsquo; увеличивается или уменьшается при каждом полученном сигнальном сообщении, благодаря чему это значение поддерживается в актуальном состоянии.
</p>
<p>Сам гаджет может выполнять действия, используя цели и действия, зависящие от <a href="#Object-State">состояния объекта</a>.
</p>
<p>Например, у нас имеется 8&nbsp;объектов <a href="#it_005ftrigger">it_trigger</a> и 8&nbsp;объектов <a href="#st_005fbox">st_box</a>. Два ящика изначально находятся на триггерах. Дверь должна открыться, когда пользователь переместит все ящики на триггеры.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">ti[&quot;t&quot;] = {&quot;it_trigger&quot;, target=&quot;mycounter&quot;, action=&quot;signal&quot;}
ti[&quot;b&quot;] = {&quot;st_box&quot;}
ti[&quot;o&quot;] = ti[&quot;t&quot;] .. ti[&quot;b&quot;]
ti[&quot;d&quot;] = {&quot;st_door&quot;, &quot;mydoor&quot;}
wo(ti, &quot; &quot;, {&quot;t t t o t o t t&quot;,
             &quot;b b b   b   b b&quot;,
	     &quot;      d   @    &quot;})
wo:add({&quot;ot_counter&quot;, &quot;mycounter&quot;, state=2, target=&quot;mydoor&quot;, action_7=&quot;close&quot;, action_8=&quot;open&quot;})
</pre></td></tr></table>

<p>Обратите внимание, что недостаточно отправить сообщение <code>&quot;open&quot;</code> при значении атрибута &lsquo;<samp>state</samp>&rsquo;, равном 8, поскольку данное событие также происходит, когда на триггерах находятся 7&nbsp;ящиков, а на последний триггер нажимает актёр. Когда актёр уходит с восьмого триггера, значение состояния гаджета уменьшается до 7 и гаджет отправляет двери сообщение <code>&quot;close&quot;</code>.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>state</b> &nbsp;&nbsp;<i>значения</i>: number; &nbsp;&nbsp;<i>по умолчанию</i>: 0 &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dd><p>Количество переключателей с состоянием &lsquo;<samp>ON</samp>&rsquo;.
</p></dd>
</dl>

</dd>
<dt> <b>Сообщения:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>signal</b> &nbsp;&nbsp;См. раздел <a href="#signal">signal</a></dt>
<dd><p>Увеличивает значение состояния при значении &lsquo;<samp>1</samp>&rsquo; и уменьшает при значении &lsquo;<samp>0</samp>&rsquo;.
</p></dd>
</dl>

</dd>
<dt> <b>Действие:</b> &nbsp;&nbsp;См. раздел <a href="#target">target</a>, &nbsp;&nbsp;см. раздел <a href="#action">action</a></dt>
<dd><p>Отправляет действие со значением &lsquo;<samp>true</samp>&rsquo; только при явно заданных атрибутах цели или действия, зависящих от <a href="#Object-State">состояний объектов</a>. При других состояниях действия по умолчанию <code>&quot;toggle&quot;</code> не отправляются.
</p></dd>
</dl>


<hr size="6">
<a name="ot_005ftimer"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#ot_005fcounter" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Libraries" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Other-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Gadgets" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="ot_005ftimer-1"></a>
<h3 class="subsection">11.2.2 ot_timer</h3>
<a name="index-ot_005ftimer"></a>

<p>Этот гаджет можно использовать, чтобы запустить отложенные разовые либо периодические события. Он практически идентичен объекту <a href="#st_005ftimer">st_timer</a>, но не требует места на решётке и не отвлекает игрока пульсирующей анимацией.
</p>
<p>Следует отметить, что этот объект достаточно необычен, поскольку его состоянием по умолчанию является &lsquo;<samp>ON</samp>&rsquo;. Это сделано для поддержки самых типичных случаев, когда таймеры должны начинать работать немедленно.
</p>
<p>Таймер, запрограммированный на единичное срабатывание, посылает значение действия &lsquo;<samp>true</samp>&rsquo;. Таймер, запрограммированный на периодическое срабатывание, посылает чередующиеся булевы значения действия, начиная с &lsquo;<samp>true</samp>&rsquo;. Чтобы начать чередование с &lsquo;<samp>false</samp>&rsquo;, следует использовать атрибут <a href="#inverse">inverse</a>.
</p>
<p>Если остановить таймер, выключив его, дальнейшие действия не будут выполнены. Если снова включить его, он запустится как новый таймер.
</p>
<p>Временной интервал между началом работы и первым событием, а также между последующими событиями соблюдается с точностью до 0,01 секунды. Но в силу требований производительности, а также специфики анимации, не следует задавать интервал меньший, чем 0,1 секунды. Интервал менее 0,01 секунды недействителен для таймера, запрограммированного на периодическое срабатывание.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>state</b>, &nbsp;&nbsp;<i>значения</i>: <code>ON</code>, <code>OFF</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>ON</code> &nbsp;&nbsp;См. раздел <a href="#state">state</a></dt>
<dd><p>Состояние &lsquo;<samp>ON</samp>&rsquo; соответствует работающему таймеру. Таймер в состоянии &lsquo;<samp>OFF</samp>&rsquo; сброшен и ожидает повторной активации.
</p></dd>
<dt> <b>interval</b> &nbsp;&nbsp;<i>значения</i>: положительное число; &nbsp;&nbsp;<i>по умолчанию</i>: <code>1.0</code></dt>
<dd><p>Время в секундах, которое проходит от начала работы таймера до первого события и между последующими событиями. Должен быть больше или равен 0,01 секунды для таймеров, запрограммированных на периодическое выполнение действия.
</p></dd>
<dt> <b>loop</b> &nbsp;&nbsp;<I>значения:</I> <code>true</code>, <code>false</code>; &nbsp;&nbsp;<i>по умолчанию</i>: <code>true</code></dt>
<dd><p>Таймер, для которого задано значение &lsquo;true&rsquo;, будет отправлять периодические события.
</p></dd>
</dl>

</dd>
<dt> <b>Сообщения:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>signal</b> &nbsp;&nbsp;См. раздел <a href="#signal">signal</a></dt>
<dd><p>Включается при значении &lsquo;<samp>1</samp>&rsquo; и выключается при значении &lsquo;<samp>0</samp>&rsquo;.
</p></dd>
<dt> <b>on</b> &nbsp;&nbsp;См. раздел <a href="#on">on</a></dt>
<dt> <b>off</b> &nbsp;&nbsp;См. раздел <a href="#off">off</a></dt>
</dl>

</dd>
<dt> <b>Действие:</b> &nbsp;&nbsp;См. раздел <a href="#target">target</a>, &nbsp;&nbsp;см. раздел <a href="#action">action</a></dt>
<dd><p>Значение действия начинается с &lsquo;<samp>true</samp>&rsquo; и чередуется при каждом событии между &lsquo;<samp>false</samp>&rsquo; и &lsquo;<samp>true</samp>&rsquo;. Если таймер сброшен, он начинает чередование со значения &lsquo;<samp>true</samp>&rsquo;.
</p></dd>
</dl>


<hr size="6">
<a name="Libraries"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#ot_005ftimer" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Basic-Functions" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Other-Objects" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Libraries-1"></a>
<h1 class="chapter">12. Библиотеки</h1>

<p>В библиотеках содержатся дополнения, которые нужны не для каждого уровня. Выделение их в отдельные файлы позволяет не загружать их, если они не нужны. Это уменьшает время загрузки уровня и расход системных ресурсов. Но автор уровня должен объявить их использование, указав нужное значение для элемента метаданных &lsquo;<samp>dependency</samp>&rsquo; внутри элемента <a href="#g_t_003ccompatibility_003e">&lt;compatibility&gt;</a>. Нужная строка кода указана в описании каждой библиотеки.
</p>
<p>В некоторых библиотеках содержатся полезные функции и методы. Они описаны в этом разделе. В других библиотеках содержатся <a href="#Resolvers">Преобразования</a>. Им посвящен отдельный раздел.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Basic-Functions">12.1 Основные функции</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">  Основные функции и стандартные библиотеки Lua.
</td></tr>
<tr><td align="left" valign="top"><a href="#liblua">12.2 liblua</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Основные методы для списков.
</td></tr>
<tr><td align="left" valign="top"><a href="#libmath">12.3 libmath</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Математические алгоритмы, такие как случайные перестановки.
</td></tr>
<tr><td align="left" valign="top"><a href="#libmap">12.4 libmap</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Методы для карт API 2.
</td></tr>
<tr><td align="left" valign="top"><a href="#libimport">12.5 libimport</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        Методы импортирования сторонних файлов уровней.
</td></tr>
<tr><td align="left" valign="top"><a href="#libsoko">12.6 libsoko</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Библиотека для работы с файлами уровней Сокобана.
</td></tr>
</table>

<hr size="6">
<a name="Basic-Functions"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Libraries" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#liblua" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Basic-Functions-1"></a>
<h2 class="section">12.1 Основные функции</h2>

<p>Enigma поддерживает большинство операторов Lua версии 5.1 и выше, то есть вполне ожидаемо можно свободно использовать в своём уровне списки и управляющие структуры. Однако в целях безопасности и обеспечения совместимости с последующими версиями, некоторые функции Lua были отключены. К ним относятся &lsquo;<samp>dofile</samp>&rsquo;, &lsquo;<samp>module</samp>&rsquo;, &lsquo;<samp>require</samp>&rsquo; и большинство, если не все, функций из стандартных библиотек  &lsquo;<samp>package</samp>&rsquo;, &lsquo;<samp>io</samp>&rsquo; и &lsquo;<samp>os</samp>&rsquo;. Чтобы подключить внешние библиотеки следует вместо тэгов &lsquo;<samp>require</samp>&rsquo;, &lsquo;<samp>dofile</samp>&rsquo; или &lsquo;<samp>package</samp>&rsquo; использовать тэг <a href="#g_t_003ccompatibility_003e">&lt;compatibility&gt;</a>, а чтобы выводить сообщения в стандартный поток вывода вместо &lsquo;<samp>io</samp>&rsquo; следует использовать &lsquo;<samp>print</samp>&rsquo;. Функция &lsquo;<samp>print</samp>&rsquo; очень полезна при разработке и отладке сложных уровней, но в окончательных версиях её быть не должно.
</p>
<p>Из встроенных математических функций Lua можно использовать следующие: &lsquo;<samp>math.abs</samp>&rsquo;, &lsquo;<samp>math.acos</samp>&rsquo;, &lsquo;<samp>math.asin</samp>&rsquo;, &lsquo;<samp>math.atan</samp>&rsquo;, &lsquo;<samp>math.atan2</samp>&rsquo;, &lsquo;<samp>math.ceil</samp>&rsquo;, &lsquo;<samp>math.cos</samp>&rsquo;, &lsquo;<samp>math.cosh</samp>&rsquo;, &lsquo;<samp>math.deg</samp>&rsquo;, &lsquo;<samp>math.exp</samp>&rsquo;, &lsquo;<samp>math.floor</samp>&rsquo;, &lsquo;<samp>math.fmod</samp>&rsquo;, &lsquo;<samp>math.frexp</samp>&rsquo;, &lsquo;<samp>math.huge</samp>&rsquo;, &lsquo;<samp>math.ldexp</samp>&rsquo;, &lsquo;<samp>math.log</samp>&rsquo;, &lsquo;<samp>math.log10</samp>&rsquo;, &lsquo;<samp>math.max</samp>&rsquo;, &lsquo;<samp>math.min</samp>&rsquo;, &lsquo;<samp>math.modf</samp>&rsquo;, &lsquo;<samp>math.pi</samp>&rsquo;, &lsquo;<samp>math.pow</samp>&rsquo;, &lsquo;<samp>math.rad</samp>&rsquo;, &lsquo;<samp>math.random</samp>&rsquo;, &lsquo;<samp>math.sin</samp>&rsquo;, &lsquo;<samp>math.sinh</samp>&rsquo;,  &lsquo;<samp>math.sqrt</samp>&rsquo;, &lsquo;<samp>math.tan</samp>&rsquo;, &lsquo;<samp>math.tanh</samp>&rsquo;.
</p>
<p>Все тригонометрические функции используют радианы, чтобы преобразовать градусы к радианам и наоборот можно использовать &lsquo;<samp>math.deg</samp>&rsquo; и &lsquo;<samp>math.rad</samp>&rsquo;. Чтобы разобраться в различиях между &lsquo;<samp>math.mod</samp>&rsquo;, &lsquo;<samp>%</samp>&rsquo; и &lsquo;<samp>math.fmod</samp>&rsquo; прочтите раздел <a href="#lib_002elua_002emod">lib.lua.mod</a>.
</p>
<p>Хотя можно пользоваться почти всеми математическими функциями, доступными в Lua, Enigma использует свой собственный генератор случайных чисел, который можно использовать через метод &lsquo;<samp>math.random</samp>&rsquo; с синтаксисом, аналогичным генератору случайных чисел Lua. Для обеспечения стабильности в будущих версиях Enigma &lsquo;<samp>math.randomseed</samp>&rsquo; был отключен.
</p>
<p>Чтобы получить более подробную информацию, пожалуйста, прочтите руководство по <a href="http://www.lua.org/manual/5.1/">Lua 5.1</a>, выложенное в свободный доступ.
</p>

<hr size="6">
<a name="liblua"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Basic-Functions" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#lib_002elua_002ecombine_005ftables" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="liblua-1"></a>
<h2 class="section">12.2 liblua</h2>

<p>Эта библиотека основных дополнений к языку Lua описана в соответствии с выпуском 1.
</p>
<p>Её можно загрузить, добавив к элементу метаданных XML <a href="#g_t_003ccompatibility_003e">&lt;compatibility&gt;</a> элемент &lsquo;<samp>dependency</samp>&rsquo;, как указано ниже:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">  &lt;<i>el</i>:<b>dependency</b> <i>el</i>:<b>path</b>=&quot;<var>lib/liblua</var>&quot; <i>el</i>:<b>id</b>=&quot;<var>lib/liblua</var>&quot; <i>el</i>:<b>release</b>=&quot;<var>1</var>&quot; <i>el</i>:<b>preload</b>=&quot;<var>true</var>&quot;/&gt;
</pre></td></tr></table>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#lib_002elua_002ecombine_005ftables">12.2.1 lib.lua.combine_tables</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">  Комбинирование записей из анонимных списков Lua в общий список.
</td></tr>
<tr><td align="left" valign="top"><a href="#lib_002elua_002edeep_005fcopy">12.2.2 lib.lua.deep_copy</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       Полное копирование списков Lua.
</td></tr>
<tr><td align="left" valign="top"><a href="#lib_002elua_002emod">12.2.3 lib.lua.mod</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">             Взятие остатка от деления.
</td></tr>
<tr><td align="left" valign="top"><a href="#lib_002elua_002eprint_005ftable">12.2.4 lib.lua.print_table</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">     Печать списков в целях отладки.
</td></tr>
<tr><td align="left" valign="top"><a href="#lib_002elua_002eshuffle">12.2.5 lib.lua.shuffle</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         Перемешивание произвольных анонимных списков Lua.
</td></tr>
<tr><td align="left" valign="top"><a href="#lib_002elua_002eto_005fstring">12.2.6 lib.lua.to_string</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       Получая что-либо в качестве параметра, пытается вернуть осмысленное описание.
</td></tr>
</table>


<hr size="6">
<a name="lib_002elua_002ecombine_005ftables"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#liblua" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#lib_002elua_002edeep_005fcopy" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#liblua" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="lib_002elua_002ecombine_005ftables-1"></a>
<h3 class="subsection">12.2.1 lib.lua.combine_tables</h3>
<a name="index-lib_002elua_002ecombine_005ftables"></a>

<p><samp>&lsquo;combine_tables&rsquo;</samp> объединяет все записи из набора списков или списка списков в один общий список (то есть, объединяет подсписки). Так как у подсписков могут быть одинаковые названия записей, у первого списка самый большой приоритет, у второго &mdash; ниже и т. д.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><b>lib.lua.combine_tables</b>(<i>overtable</i>)
</p>
<p><b>lib.lua.combine_tables</b>(<i>table1</i>, <i>table2</i>, ...)
</p>
<dl compact="compact">
<dt> <i>overtable</i></dt>
<dd><p>Список списков: &lsquo;<samp>overtable = {table1, table2, ...}</samp>&rsquo;
</p>
</dd>
<dt> <i>table1</i>, <i>table2</i>, ...</dt>
<dd><p>Списки Lua, которые следует объединить.
</p></dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">all_contacts = lib.lua.combine_tables(telephone_numbers, email_addresses)
</pre></td></tr></table>

</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Подобно тому, как группы можно объединить посредством сложения (&lsquo;<samp>grp1 + grp2</samp>&rsquo;), иногда может потребоваться объединить анонимные списки. В большинстве случаев можно воспользоваться группировкой объектов, но если автор работает с абстрактными данными (например именами объектов вместо самих объектов или списками с описанием оформления), может пригодиться &lsquo;<samp>combine_tables</samp>&rsquo;.
</p>
</dd>
<dt> <b>Готовый пример:</b></dt>
</dl>


<hr size="6">
<a name="lib_002elua_002edeep_005fcopy"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#lib_002elua_002ecombine_005ftables" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#lib_002elua_002emod" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#liblua" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="lib_002elua_002edeep_005fcopy-1"></a>
<h3 class="subsection">12.2.2 lib.lua.deep_copy</h3>
<a name="index-lib_002elua_002edeep_005fcopy"></a>

<p>&lsquo;<samp>deep_copy</samp>&rsquo; возвращает копии своих параметров, причём списки записей копируются не как ссылки на области памяти (что обычно делает Lua), а полностью (поэтому оно и называется &quot;полное копирование&quot;).
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><b>lib.lua.deep_copy</b>(<i>source</i>)
</p>
<dl compact="compact">
<dt> <i>source</i></dt>
<dd><p>Объект, который нужно скопировать.
</p></dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">a = {5}
b = a
c = lib.lua.deep_copy(a)
b[1] = 4
</pre></td></tr></table>

<p>После выполнения этих четырёх команд и &lsquo;<samp>a[1]</samp>&rsquo;, и &lsquo;<samp>b[1]</samp>&rsquo; будут равны &lsquo;<samp>4</samp>&rsquo;, а &lsquo;<samp>c[1]</samp>&rsquo; останется &lsquo;<samp>5</samp>&rsquo;.
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Метасписки переносятся, а не копируются полностью. Пользовательские данные (например секции и позиции) могут не поддаваться полному копированию.
</p>
</dd>
<dt> <b>Готовый пример:</b></dt>
</dl>


<hr size="6">
<a name="lib_002elua_002emod"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#lib_002elua_002edeep_005fcopy" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#lib_002elua_002eprint_005ftable" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#liblua" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="lib_002elua_002emod-1"></a>
<h3 class="subsection">12.2.3 lib.lua.mod</h3>
<a name="index-lib_002elua_002emod"></a>

<p>Обёртка для операции взятия остатка от деления.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><b>lib.lua.mod</b>(<i>value</i>, <i>modul</i>)
</p>
<dl compact="compact">
<dt> <i>value</i>, <i>modul</i></dt>
<dd><p>Числа. &lsquo;<samp>modul</samp>&rsquo; должно быть положительным (и не равно нулю).
</p></dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">lib.lua.mod(7*7, 17)
lib.lua.mod(5.3, 1/3)
lib.lua.mod(no[&quot;marble&quot;].x, 1)
</pre></td></tr></table>

</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Lua 5.0 в качестве операции взятия остатка использовала &lsquo;<samp>math.mod</samp>&rsquo;, эта функция больше не доступна в версии Lua 5.1, а значит её нет и в Enigma. Lua 5.1 предоставляет операции &lsquo;<samp>%</samp>&rsquo; и &lsquo;<samp>math.fmod</samp>&rsquo;. Хотя каждая из них в качестве значения (&lsquo;<samp>value</samp>&rsquo;) принимает положительные числа и ноль, они по разному обращаются с отрицательными числами:
</p><table><tr><td>&nbsp;</td><td><pre class="example">Lua 5.0:  math.mod(-1, 4) == -1
Lua 5.1:  math.fmod(-1, 4) == -1
Lua 5.1:  (-1)%4 == 3
lib.lua:  lib.lua.mod(-1, 4) == 3
</pre></td></tr></table>
<p>В то время, как функции Lua для взятия остатка выдают результаты даже для отрицательного &lsquo;<samp>modul</samp>&rsquo; (изменяя знак результата), &lsquo;<samp>lib.lua.mod</samp>&rsquo; возвращает ошибку, если &lsquo;<samp>modul &lt;= 0</samp>&rsquo;, с другой стороны результат &lsquo;<samp>r</samp>&rsquo; гарантированно находится в диапазоне <code>0 &lt;= r &lt; modul</code>.
</p>
</dd>
<dt> <b>Готовый пример:</b></dt>
</dl>


<hr size="6">
<a name="lib_002elua_002eprint_005ftable"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#lib_002elua_002emod" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#lib_002elua_002eshuffle" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#liblua" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="lib_002elua_002eprint_005ftable-1"></a>
<h3 class="subsection">12.2.4 lib.lua.print_table</h3>
<a name="index-lib_002elua_002eprint_005ftable"></a>

<p>&lsquo;<samp>print_table</samp>&rsquo; это отладочная команда, которая использует команду API &lsquo;<samp>print</samp>&rsquo; для рекурсивного вывода своего параметра на стандартное устройство вывода.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><b>lib.lua.print_table</b>(<i>table</i>, <i>prefix</i>, <i>depth</i>)
</p>
<dl compact="compact">
<dt> <i>table</i></dt>
<dd><p>Список, который нужно вывести.
</p>
</dd>
<dt> <i>prefix</i></dt>
<dd><p>Строка-разделитель, которая выводится перед самим списком. Может быть &lsquo;<samp>nil</samp>&rsquo;.
</p>
</dd>
<dt> <i>depth</i></dt>
<dd><p>Как правило &lsquo;<samp>nil</samp>&rsquo;, если нужно исключить рекурсию, то &lsquo;<samp>-1</samp>&rsquo;.
</p></dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">a = {1, [5]=2, &quot;Hello&quot;, other_table = {x = 4, y = 5, z = &quot;World&quot;}}
lib.lua.print_table(a, nil, -1)
lib.lua.print_table(a, &quot;--&gt; &quot;)
</pre></td></tr></table>

</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>&lsquo;<samp>print_table</samp>&rsquo; рекурсивна, то есть, список, у которого в записях тоже списки, повторно вызовет &lsquo;<samp>print_table</samp>&rsquo;. Во избежание зацикливания, для определения глубины рекурсии во время выполнения служит &lsquo;<samp>depth</samp>&rsquo;. На данный момент глубина рекурсии ограничена значением 5. Чтобы полностью исключить рекурсию, установите значение &lsquo;<samp>depth</samp>&rsquo; равным &lsquo;<samp>-1</samp>&rsquo;.
</p>
<p>&lsquo;<samp>print_table</samp>&rsquo; следует использовать только для отладки и тестирования, она не задумывалась как игровой элемент.
</p></dd>
<dt> <b>Готовый пример:</b></dt>
</dl>


<hr size="6">
<a name="lib_002elua_002eshuffle"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#lib_002elua_002eprint_005ftable" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#lib_002elua_002eto_005fstring" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#liblua" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="lib_002elua_002eshuffle-1"></a>
<h3 class="subsection">12.2.5 lib.lua.shuffle</h3>
<a name="index-lib_002elua_002eshuffle"></a>

<p>&lsquo;<samp>shuffle</samp>&rsquo; случайным образом перемешивает элементы своего параметра &mdash; списки чисел.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><i>result</i> = <b>lib.lua.shuffle</b>(<i>source</i>)
</p>
<dl compact="compact">
<dt> <i>source</i></dt>
<dd><p>Список, который нужно перемешать (перемешиваются только записи с числами).
</p></dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">orientations = lib.lua.shuffle({NORTH, SOUTH, EAST, WEST})
a = {1, 2, 3, &quot;r&quot;, {&quot;x&quot;, &quot;y&quot;, &quot;z&quot;}, 4}
b = lib.lua.shuffle(a)
</pre></td></tr></table>

<p>Обычным результатом для &lsquo;<samp>b</samp>&rsquo; будет
</p><table><tr><td>&nbsp;</td><td><pre class="example">b = {&quot;r&quot;, 4, 2, {&quot;x&quot;, &quot;y&quot;, &quot;z&quot;}, 1, 3}
</pre></td></tr></table>

</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Результат операции &mdash; перестановка численных записей исходного списка, начиная с первой записи и заканчивая &lsquo;<samp>table.getn(source)</samp>&rsquo;. Все другие записи просто копируются в &lsquo;<samp>result</samp>&rsquo;. Все копии поверхностны, то есть записи со значениями типа списка или пользовательских типов данных (например объектов) не копируются, а только превращаются в ссылки (указатели) на них. Если необходимо сделать полную копию перемешиваемого списка, то следует использовать <a href="#lib_002elua_002edeep_005fcopy">lib.lua.deep_copy</a>. Результатом (&lsquo;<samp>result</samp>&rsquo;) станет тот же метасписок, что и &lsquo;<samp>source</samp>&rsquo;, к тому же для копирования и перемешивания будут использоваться его методы.
</p>
<p>На данный момент, &lsquo;<samp>lib.lua.shuffle</samp>&rsquo; может перемешивать только списки. Для перемешивания групп следует использовать метод с таким же названием, предназначенный для групп:
</p><table><tr><td>&nbsp;</td><td><pre class="example">mygroup:shuffle()
</pre></td></tr></table>

<p>В результате перемешивания карты <a href="#libmap">libmap</a> будет получена карта из перемешанных строк, то есть координаты x всех кодовых секций останутся постоянными. Для перемешивания столбцов следует использовать <a href="#Rotating-and-Mirroring-Maps">Вращение и отражение карт</a>.
</p>
</dd>
<dt> <b>Готовый пример:</b></dt>
</dl>


<hr size="6">
<a name="lib_002elua_002eto_005fstring"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#lib_002elua_002eshuffle" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#libmath" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#liblua" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="lib_002elua_002eto_005fstring-1"></a>
<h3 class="subsection">12.2.6 lib.lua.to_string</h3>
<a name="index-lib_002elua_002eto_005fstring"></a>

<p>&lsquo;<samp>to_string</samp>&rsquo; &mdash; это отладочная функция. В качестве параметра она может принимать что угодно и пытается вернуть осмысленную строку, описывающую тип, а может и содержимое параметра.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><b>lib.lua.to_string</b>(<i>arg</i>)
</p>
<dl compact="compact">
<dt> <i>arg</i></dt>
<dd><p>Параметр, который нужно описать.
</p></dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">print(lib.lua.to_string(strange_variable))
</pre></td></tr></table>

</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>&lsquo;<samp>to_string</samp>&rsquo; задумывалась для отладки кода Lua. Иногда бывает, что переменная ведёт себя не так, как задумывал автор, и приходится выбирать нужный вывод методом проб и ошибок. &lsquo;<samp>to_string</samp>&rsquo; позволяет быстро решить эту проблему. Она возвращает содержимое строк, чисел, булевых величин, списков, позиций и групп. Она различает обычные списки и карты <a href="#libmap">libmap</a>. Для объектов возвращаются их название и позиция, для списка позиций &mdash; общее количество позиций. Кроме того, она различает nil, секцию и секции.
</p>
<p>&lsquo;<samp>to_string</samp>&rsquo; следует использовать только для отладки и тестирования, она не задумывалась как игровой элемент.
</p>
</dd>
<dt> <b>Готовый пример:</b></dt>
</dl>

<hr size="6">
<a name="libmath"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#lib_002elua_002eto_005fstring" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#lib_002emath_002ecombinations" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="libmath-1"></a>
<h2 class="section">12.3 libmath</h2>

<p>Эта библиотека основных математических дополнений описана в соответствии с выпуском 1.
</p>
<p>Её можно загрузить, добавив к элементу метаданных XML <a href="#g_t_003ccompatibility_003e">&lt;compatibility&gt;</a> элемент &lsquo;<samp>dependency</samp>&rsquo;, как указано ниже:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">  &lt;<i>el</i>:<b>dependency</b> <i>el</i>:<b>path</b>=&quot;<var>lib/libmath</var>&quot; <i>el</i>:<b>id</b>=&quot;<var>lib/libmath</var>&quot; <i>el</i>:<b>release</b>=&quot;<var>1</var>&quot; <i>el</i>:<b>preload</b>=&quot;<var>true</var>&quot;/&gt;
</pre></td></tr></table>

<p>Она автоматически подгружает библиотеку <a href="#liblua">liblua</a>.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#lib_002emath_002ecombinations">12.3.1 lib.math.combinations</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       Определение всех возможных комбинаций набора значений.
</td></tr>
<tr><td align="left" valign="top"><a href="#lib_002emath_002ecubic_005fpolynomial">12.3.2 lib.math.cubic_polynomial</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">   Вычисление кубического многочлена.
</td></tr>
<tr><td align="left" valign="top"><a href="#lib_002emath_002ecyclic_005fpermutation">12.3.3 lib.math.cyclic_permutation</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"> Случайная циклическая перестановка.
</td></tr>
<tr><td align="left" valign="top"><a href="#lib_002emath_002edigits">12.3.4 lib.math.digits</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">             Разложение числа на цифры по произвольному основанию.
</td></tr>
<tr><td align="left" valign="top"><a href="#lib_002emath_002emanhattan_005fdistance">12.3.5 lib.math.manhattan_distance</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"> Вычисление манхэттенского растояния между позициями.
</td></tr>
<tr><td align="left" valign="top"><a href="#lib_002emath_002emark_005fcomponents">12.3.6 lib.math.mark_components</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">    Вычисление связанных компонентов группы покрытий
</td></tr>
<tr><td align="left" valign="top"><a href="#lib_002emath_002epermutation">12.3.7 lib.math.permutation</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        Случайная перестановка.
</td></tr>
<tr><td align="left" valign="top"><a href="#lib_002emath_002erandom_005fvector">12.3.8 lib.math.random_vector</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">      Список со случайными записями.
</td></tr>
<tr><td align="left" valign="top"><a href="#lib_002emath_002esteps">12.3.9 lib.math.steps</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">              Функция для ранжирования чисел по интервалам.
</td></tr>
</table>


<hr size="6">
<a name="lib_002emath_002ecombinations"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#libmath" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#lib_002emath_002ecubic_005fpolynomial" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#libmath" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="lib_002emath_002ecombinations-1"></a>
<h3 class="subsection">12.3.1 lib.math.combinations</h3>
<a name="index-lib_002emath_002ecombinations"></a>

<p>&lsquo;<samp>lib.math.combinations&rsquo;</samp> возвращает список, состоящий из всех комбинаций записей &lsquo;<samp>depth</samp>&rsquo;, каждая из которых выбирается из &lsquo;<samp>digits</samp>&rsquo;.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><b>lib.math.combinations</b>(<i>depth</i>, <i>digits</i>)
</p>
<dl compact="compact">
<dt> <i>depth</i></dt>
<dd><p>Положительное целое число.
</p>
</dd>
<dt> <i>digits</i></dt>
<dd><p>Положительное целое число или список с числовыми записями.
</p></dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">lib.math.combinations(2, 2)
 == { {1, 1}, {1, 2}, {2, 1}, {2, 2} }
lib.math.combinations(3, {7, 8, &quot;a&quot;})
 == { {7,7,7}, {7,7,8}, {7,7,&quot;a&quot;},
       {7,8,7}, {7,8,8}, {7,8,&quot;a&quot;},
       {7,&quot;a&quot;,7}, {7,&quot;a&quot;,8}, {7,&quot;a&quot;,&quot;a&quot;},
       {8,7,7}, ... }
</pre></td></tr></table>

</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>С точки зрения математики, строится дерево с числом ветвей/листьев, кратным &lsquo;<samp>#digits</samp>&rsquo; с глубиной равной &lsquo;<samp>depth</samp>&rsquo;.
</p>
</dd>
<dt> <b>Готовый пример:</b></dt>
</dl>


<hr size="6">
<a name="lib_002emath_002ecubic_005fpolynomial"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#lib_002emath_002ecombinations" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#lib_002emath_002ecyclic_005fpermutation" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#libmath" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="lib_002emath_002ecubic_005fpolynomial-1"></a>
<h3 class="subsection">12.3.2 lib.math.cubic_polynomial</h3>
<a name="index-lib_002emath_002ecubic_005fpolynomial"></a>

<p>&lsquo;<samp>cubic_polynomial</samp>&rsquo; возвращает значение следующего многочлена с коэффициентами из массива &lsquo;<samp>a</samp>&rsquo;:
</p><table><tr><td>&nbsp;</td><td><pre class="example">a[10]*y*y*y + a[9]*x*y*y + a[8]*x*x*y + a[7]*x*x*x
  + a[6]*y*y + a[5]*x*y + a[4]*x*x + a[3]*y + a[2]*x + a[1]
</pre></td></tr></table>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><b>lib.math.cubic_polynomial</b>(<i>a</i>, <i>x</i>, <i>y</i>)
</p>
<dl compact="compact">
<dt> <i>a</i></dt>
<dd><p>Список числовых записей от &lsquo;<samp>a[1]</samp>&rsquo; до &lsquo;<samp>a[10]</samp>&rsquo;. Записи могут быть &lsquo;<samp>nil</samp>&rsquo; (т.е. отсутствовать), тогда они считаются равными нулю.
</p>
</dd>
<dt> <i>x</i>, <i>y</i></dt>
<dd><p>Числа.
</p>
</dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">lib.math.cubic_polynomial({1, a, b}, x, y) == a*x + b*y + 1
</pre></td></tr></table>

</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Чтобы сформировать случайный шаблон для покрытия, можно использовать &lsquo;<samp>lib.math.random_vector(10, ...)</samp>&rsquo; и операцию взятия остатка или же выбрать коэффициенты по своему усмотрению. Записи в &lsquo;<samp>a</samp>&rsquo;, которые не являются числами, считаются равными нулю.
</p>
</dd>
<dt> <b>Готовый пример:</b></dt>
<dd><p>Ниже приведён фрагмент из &quot;Weirdly Wired&quot;, который демонстрирует использование &lsquo;<samp>cubic_polynomial</samp>&rsquo; внутри настраиваемого преобразования для создания случайных (но основанных на шаблоне) покрытий:
</p><table><tr><td>&nbsp;</td><td><pre class="example">[...]
floors = {ti[&quot; &quot;], ti[&quot;a&quot;], ti[&quot;b&quot;], ti[&quot;c&quot;]}
polynom = lib.math.random_vector(10, 4)

function myresolver(key, x, y)
  if key == &quot; &quot; then
    return floors[lib.math.cubic_polynomial(a, x, y) % (#floors) + 1]
  elseif
    [...]
  else
    return ti[key]
  end
end

w, h = wo(myresolver, &quot; &quot;, {
[...]
</pre></td></tr></table>
<p>Уровень &quot;Weirdly Wired&quot; подробно описан в разделе <a href="#Weirdly-Wired">Weirdly Wired</a>.
</p></dd>
</dl>


<hr size="6">
<a name="lib_002emath_002ecyclic_005fpermutation"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#lib_002emath_002ecubic_005fpolynomial" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#lib_002emath_002edigits" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#libmath" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="lib_002emath_002ecyclic_005fpermutation-1"></a>
<h3 class="subsection">12.3.3 lib.math.cyclic_permutation</h3>
<a name="index-lib_002emath_002ecyclic_005fpermutation"></a>

<p>&lsquo;<samp>cyclic_permutation</samp>&rsquo; возвращает случайную перестановку (т.е. случайное перемешивание) чисел от 1 до &lsquo;<samp>n</samp>&rsquo;, которые образуют цикл: существует замкнутый путь от любого числа к любому другому (ниже есть подробное описание).
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><b>lib.math.cyclic_permutation</b>(<i>n</i>)
</p>
<dl compact="compact">
<dt> <i>n</i></dt>
<dd><p>Положительное целое число.
</p></dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">lib.math.cyclic_permutation(#no[&quot;marbles#*&quot;])
</pre></td></tr></table>

</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Циклическая перестановка это особый вид перестановки, в котором есть всего один цикл. Проще всего объяснить принцип циклической перестановки на примере:
</p><table><tr><td>&nbsp;</td><td><pre class="example">8, 1, 2, 9, 3, 7, 4, 6, 10, 5
</pre></td></tr></table>
<p>Это можно записать в виде:
</p><table><tr><td>&nbsp;</td><td><pre class="example">1 -&gt; 8
2 -&gt; 1
3 -&gt; 2
...
</pre></td></tr></table>
<p>Теперь всё это можно представить в виде последовательности:
</p><table><tr><td>&nbsp;</td><td><pre class="example">1 -&gt; 8 -&gt; 6 -&gt; 7 -&gt; 4 -&gt; 9 -&gt; 10 -&gt; 5 -&gt; 3 -&gt; 2 -&gt; 1
</pre></td></tr></table>
<p>Здесь видно, что последовательность создаёт единственный цикл из всех 10 чисел. При перестановке в общем случае это не всегда так.
</p>
<p>Чтобы получить перестановку без фиксированных точек, можно воспользоваться циклической перестановкой, хотя не всякая перестановка без фиксированных точек циклична.
</p>
</dd>
<dt> <b>Готовый пример:</b></dt>
<dd><p>Если нужно циклически соединить резиновыми лентами произвольное количество шариков для медитации, причём случайным образом, то можно воспользоваться &lsquo;<samp>lib.math.cyclic_permutation</samp>&rsquo;:
</p><table><tr><td>&nbsp;</td><td><pre class="example">marbles = no[&quot;marbles#*&quot;]
p = lib.math.cyclic_permutation(#marbles)

for j = 1, #marbles do
  wo:add({&quot;ot_rubberband&quot;, anchor1 = marbles[j], anchor2 = marbles[p[j]]})
end
</pre></td></tr></table>
<p>Чтобы соединить их линейно, можно либо убрать шаг в цикле:
</p><table><tr><td>&nbsp;</td><td><pre class="example">[...]
for j = 1, #marbles - 1 do
[...]
</pre></td></tr></table>
<p>либо использовать &lsquo;<samp>lib.math.permutation</samp>&rsquo; следующим образом:
</p><table><tr><td>&nbsp;</td><td><pre class="example">marbles = no[&quot;marbles#*&quot;]
p = lib.math.permutation(#marbles)

for j = 1, #marbles - 1 do
  wo:add({&quot;ot_rubberband&quot;, anchor1 = marbles[p[j]], anchor2 = marbles[p[j+1]]})
end
</pre></td></tr></table>
</dd>
</dl>


<hr size="6">
<a name="lib_002emath_002edigits"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#lib_002emath_002ecyclic_005fpermutation" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#lib_002emath_002emanhattan_005fdistance" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#libmath" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="lib_002emath_002edigits-1"></a>
<h3 class="subsection">12.3.4 lib.math.digits</h3>
<a name="index-lib_002emath_002edigits"></a>

<p>&lsquo;<samp>lib.math.digits</samp>&rsquo; возвращает список, элементами которого являются цифры числа &lsquo;<samp>number</samp>&rsquo; по основанию &lsquo;<samp>base</samp>&rsquo;. &lsquo;<samp>base</samp>&rsquo; может быть положительным числом (например 3 при тернарном основании) или списком (тогда цифры выбираются из числовых кодов записей списка).
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><b>lib.math.digits</b>(<i>number</i>, <i>base</i> [, <i>zero_is_empty</i>])
</p>
<dl compact="compact">
<dt> <i>number</i></dt>
<dd><p>Неотрицательное целое число.
</p>
</dd>
<dt> <i>base</i></dt>
<dd><p>Положительное целое число отличное от 1 или список с числовыми кодами.
</p>
</dd>
<dt> <i>zero_is_empty</i></dt>
<dd><p>Если <code>number</code> равно нулю, тогда по умолчанию возвращается список с цифрой ноль. Если же <code>zero_is_empty</code> равен <code>true</code>, то возвращается пустой список.
</p></dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">lib.math.digits(13, 2) == {1, 0, 1, 1}
lib.math.digits(15, 16) == {15}
lib.math.digits(17, 3) == {2, 2, 1}
lib.math.digits(17, {2, &quot;b&quot;, 5}) == {5, 5, &quot;b&quot;}
</pre></td></tr></table>

<p>Чтобы получить список с шестнадцатеричными записями, можно воспользоваться следующей функцией:
</p><table><tr><td>&nbsp;</td><td><pre class="example">lib.math.digits(x, {0,1,2,3,4,5,6,7,8,9,&quot;A&quot;,&quot;B&quot;,&quot;C&quot;,&quot;D&quot;,&quot;E&quot;,&quot;F&quot;})
</pre></td></tr></table>

</dd>
<dt> <b>Подробности:</b></dt>
<dt> <b>Готовый пример:</b></dt>
</dl>


<hr size="6">
<a name="lib_002emath_002emanhattan_005fdistance"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#lib_002emath_002edigits" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#lib_002emath_002emark_005fcomponents" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#libmath" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="lib_002emath_002emanhattan_005fdistance-1"></a>
<h3 class="subsection">12.3.5 lib.math.manhattan_distance</h3>
<a name="index-lib_002emath_002emanhattan_005fdistance"></a>

<p>&lsquo;<samp>manhattan_distance</samp>&rsquo; вычисляет манхэттеновское расстояние между двумя позициями &lsquo;<samp>pos1</samp>&rsquo; и &lsquo;<samp>pos2</samp>&rsquo;, которое равно:
</p><table><tr><td>&nbsp;</td><td><pre class="example">|pos1.x - pos2.x| + |pos1.y - pos2.y|.
</pre></td></tr></table>

<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><b>lib.math.manhattan_distance</b>(<i>pos1</i>, <i>pos2</i>)
</p>
<p><b>lib.math.manhattan_distance</b>(<i>x1</i>, <i>y1</i>, <i>x2</i>, <i>y2</i>)
</p>
<dl compact="compact">
<dt> <i>pos1</i>, <i>pos2</i></dt>
<dd><p>Позиции (например ссылки на объект или списки &lsquo;<samp>{posx, posy}</samp>&rsquo;).
</p>
</dd>
<dt> <i>x1</i>, <i>y1</i>, <i>x2</i>, <i>y2</i></dt>
<dd><p>Координаты позиций &lsquo;<samp>pos1</samp>&rsquo; и &lsquo;<samp>pos2</samp>&rsquo;, соответственно.
</p></dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">lib.math.manhattan_distance(4, 5, 3, 3)
lib.math.manhattan_distance({4, 5}, {3, 3})
lib.math.manhattan_distance(no[&quot;marble&quot;], no[&quot;othermarble&quot;])
</pre></td></tr></table>

</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Манхэттеновское расстояние определяет минимальное количество толчков, необходимых чтобы переместить деревянный ящик с одной позиции в другую. Её единицами измерения являются квадраты с диагоналями, параллельными осям x и y (ромбы).
</p>
</dd>
<dt> <b>Готовый пример:</b></dt>
</dl>


<hr size="6">
<a name="lib_002emath_002emark_005fcomponents"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#lib_002emath_002emanhattan_005fdistance" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#lib_002emath_002epermutation" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#libmath" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="lib_002emath_002emark_005fcomponents-1"></a>
<h3 class="subsection">12.3.6 lib.math.mark_components</h3>
<a name="index-lib_002emath_002emark_005fcomponents"></a>

<p>&lsquo;<samp>mark_components</samp>&rsquo; вычисляет связанные компоненты группы покрытий. Два участка покрытия являются непосредственно связанными, если их разность не выходит за рамки данного списка позиций (по умолчанию <code>NEIGHBORS_4</code>). Возвращаемое значение представляет собой таблицу, содержащую список групп, каждая из которых является законченным связанным компонентом. В свою очередь, к каждому участку покрытия, входящему в группу, добавляется атрибут, содержащий номер этого компонента.  Имя атрибута может быть любым.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><b>lib.math.mark_components</b>(<i>group</i>, <i>attribute_name</i> [, <i>neighborhood</i> [, <i>exclusive_attribute</i>]])
</p>
<dl compact="compact">
<dt> <i>group</i></dt>
<dd><p>Группа участков покрытия.
</p>
</dd>
<dt> <i>attribute_name</i></dt>
<dd><p>Непустая строка. Обычно это заголовок пользовательского атрибута, поэтому она должна начинаться со знака подчёркивания &lsquo;<samp>_</samp>&rsquo; кроме случаев, когда информация передаётся непосредственно в непользовательский атрибут, принимающий числовые значения.
</p>
</dd>
<dt> <i>neighborhood</i></dt>
<dd><p>Симметричный список позиций (см. подробности). По умолчанию это <code>NEIGHBORS_4</code>, результатом чего является вычисление соседних компонентов.
</p>
</dd>
<dt>  <i>exclusive_attribute</i></dt>
<dd><p>Булево значение (по умолчанию <code>false</code>), для которого можно установить значение <code>true</code>, если другие участки покрытия, использующие имя <i>attribute_name</i>, отсутствуют.
</p></dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">lib.math.mark_components(all_floors, &quot;_component&quot;)
local number = #lib.math.mark_components(all_floors, &quot;_component&quot;, NEIGHBORS_CHESS .. NEIGHBORS_4)
local lines = lib.math.mark_components(all_floors, &quot;_linenumber&quot;, po(-1, 0) .. po(1, 0), true)
</pre></td></tr></table>

</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>&lsquo;<samp>mark_components</samp>&rsquo; возвращает таблицу групп Lua, в которую в качестве индексов входят натуральные числа, начиная с <code>1</code>, такую, что доступ к общему количеству компонентов можно получить с помощью знака &lsquo;<samp>#</samp>&rsquo;. Каждая запись таблицы представляет собой подгруппу, входящую в <code>group</code>, полный связанный компонент. Последовательность компонентов определяется последовательностью участков покрытия в <code>group</code>.
</p>
<p>Вам необходимо выбрать атрибут, поскольку он используется в процессе вычисления. Обратите внимание, что вся информация, ранее сохранённая в данном атрибуте, будет утрачена. Также имейте в виду, что выбор атрибута, доступного только для чтения, приводит к ошибке.
</p>
<p>Выбранные соседние участки покрытия должны представлять собой симметричный список позиций, то есть, если там есть позиция <code>po(x, y)</code>, то где-то в списке должна быть и позиция <code>po(-x, -y)</code>. С точки зрения математики, мы анализируем связанные компоненты неориентированного графа (в противоположность ориентированному).
</p>
<p>Если достоверно известно, что другие участки покрытия, использующие атрибут <code>attribute_name</code>, отсутствуют, то для атрибута &lsquo;<samp>exclusive_attribute</samp>&rsquo; можно установить значение &lsquo;<samp>true</samp>&rsquo;. Это позволит получить значительно более быстрый алгоритм.
</p>
</dd>
<dt> <b>Готовый пример:</b></dt>
</dl>


<hr size="6">
<a name="lib_002emath_002epermutation"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#lib_002emath_002emark_005fcomponents" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#lib_002emath_002erandom_005fvector" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#libmath" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="lib_002emath_002epermutation-1"></a>
<h3 class="subsection">12.3.7 lib.math.permutation</h3>
<a name="index-lib_002emath_002epermutation"></a>

<p>&lsquo;<samp>permutation</samp>&rsquo; возвращает случайную перестановку чисел (то есть, перемешанные случайным образом числа) от 1 до &lsquo;<samp>n</samp>&rsquo;.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><b>lib.math.permutation</b>(<i>n</i>)
</p>
<dl compact="compact">
<dt> <i>n</i></dt>
<dd><p>Положительное целое число.
</p></dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">lib.math.permutation(#no[&quot;doors#*&quot;])
</pre></td></tr></table>

</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Перестановки упрощают создание уровней со случайным размещением объектов, например, изменяя значения пар цель/действие (&quot;Какой триггер к какой двери относится?&quot;)
</p>
</dd>
<dt> <b>Готовый пример:</b></dt>
</dl>


<hr size="6">
<a name="lib_002emath_002erandom_005fvector"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#lib_002emath_002epermutation" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#lib_002emath_002esteps" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#libmath" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="lib_002emath_002erandom_005fvector-1"></a>
<h3 class="subsection">12.3.8 lib.math.random_vector</h3>
<a name="index-lib_002emath_002erandom_005fvector"></a>

<p>&lsquo;<samp>random_vector</samp>&rsquo; возвращает список с &lsquo;<samp>n</samp>&rsquo; случайными записями.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><b>lib.math.random_vector</b>(<i>n</i>, <i>...</i>)
</p>
<dl compact="compact">
<dt> <i>n</i></dt>
<dd><p>Неотрицательное целое число.
</p>
</dd>
<dt> <i>...</i></dt>
<dd><p>Дополнительные параметры, аналогичные параметрам &lsquo;<samp>math.random</samp>&rsquo;: если параметры не заданы, то дробные числа случайным образом берутся из диапазона &lsquo;<samp>[0,1)</samp>&rsquo;, если задан один параметр &lsquo;<samp>p</samp>&rsquo;, то случайными числами становятся целые числа из диапазона от 1 до &lsquo;<samp>p</samp>&rsquo; (включая как 1, так и &lsquo;p&rsquo;), если заданы два числа &lsquo;<samp>p, q</samp>&rsquo;, то случайными числами становятся целые числа из диапазона от &lsquo;<samp>p</samp>&rsquo; до &lsquo;<samp>q</samp>&rsquo; (включая как &lsquo;<samp>p</samp>&rsquo;, так и &lsquo;<samp>q</samp>&rsquo;).
</p></dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">lib.math.random_vector(4, 3)
</pre></td></tr></table>
<p>вернёт список из 4 случайных чисел из множества {1,2,3}, а
</p><table><tr><td>&nbsp;</td><td><pre class="example">lib.math.random_vector(22)
</pre></td></tr></table>
<p>возвращает список из 22 значений с плавающей запятой из диапазона от 0.0 до 1.0 (1.0 не входит).
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Для создания случайных шаблонов совместно с &lsquo;<samp>cubic_polynomial</samp>&rsquo; может использоваться &lsquo;<samp>random_vector</samp>&rsquo;, подробнее об этом можно узнать в разделах <a href="#lib_002emath_002ecubic_005fpolynomial">lib.math.cubic_polynomial</a> и <a href="#Weirdly-Wired">Weirdly Wired</a>.
</p>
</dd>
<dt> <b>Готовый пример:</b></dt>
</dl>


<hr size="6">
<a name="lib_002emath_002esteps"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#lib_002emath_002erandom_005fvector" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#libmap" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#libmath" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="lib_002emath_002esteps-1"></a>
<h3 class="subsection">12.3.9 lib.math.steps</h3>
<a name="index-lib_002emath_002esteps"></a>

<p>&lsquo;<samp>steps</samp>&rsquo; получает в качестве аргументов число &lsquo;<samp>d</samp>&rsquo; и список чисел, а возвращает индекс на единицу меньший индекса первого аргумента, большего или равного &lsquo;<samp>d</samp>&rsquo;. Другими словами, этот метод классифицирует &lsquo;<samp>d</samp>&rsquo; по интервалам, задаваемым списком, начиная с нуля, если &lsquo;<samp>d</samp>&rsquo; меньше первого числа в списке, единицы, если <samp>d</samp> больше или равно первому числу, но меньше второго числа и т. д.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><b>lib.math.steps</b>(<i>discriminator</i>, <i>steps</i>)
</p>
<dl compact="compact">
<dt> <i>discriminator</i></dt>
<dd><p>Число.
</p>
</dd>
<dt> <i>steps</i></dt>
<dd><p>Список чисел.
</p></dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">number_pairs = lib.math.steps(total_places, {2, 6, 10, 30})
</pre></td></tr></table>

</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Можно работать с отрицательными и дробными значениями. Однако числа в списке шагов (&lsquo;<samp>steps</samp>&rsquo;) должны монотонно возрастать (возможно, не строго монотонно), иначе результат может оказаться непредсказуемым.
</p>
</dd>
<dt> <b>Готовый пример:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">lib.math.steps(x, {4, 8, 13})
</pre></td></tr></table>
<p>возвращает:
</p><table><tr><td>&nbsp;</td><td><pre class="example">     0  if        x &lt; 4
     1  if   4 &lt;= x &lt; 8
     2  if   8 &lt;= x &lt; 13
     3  if  13 &lt;= x
</pre></td></tr></table>
</dd>
</dl>


<hr size="6">
<a name="libmap"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#lib_002emath_002esteps" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Creating-Maps" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="libmap-1"></a>
<h2 class="section">12.4 libmap</h2>

<p>&lsquo;<samp>libmap</samp>&rsquo; наделяет автора большими возможностями по работе с картами API 2. До сих пор карта считалась просто списком строк, как описано в разделе <a href="#World-Creation">Создание мира</a>. С помощью &lsquo;<samp>libmap</samp>&rsquo; можно работать с картами на более высоком уровне.
</p>
<p>Эта библиотека описана в соответствии с выпуском 1.
</p>
<p>Её можно загрузить, добавив к элементу метаданных XML <a href="#g_t_003ccompatibility_003e">&lt;compatibility&gt;</a> элемент &lsquo;<samp>dependency</samp>&rsquo;, как указано ниже:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">  &lt;<i>el</i>:<b>dependency</b> <i>el</i>:<b>path</b>=&quot;<var>lib/libmap</var>&quot; <i>el</i>:<b>id</b>=&quot;<var>lib/libmap</var>&quot; <i>el</i>:<b>release</b>=&quot;<var>1</var>&quot; <i>el</i>:<b>preload</b>=&quot;<var>true</var>&quot;/&gt;
</pre></td></tr></table>

<p>Она автоматически подгружает библиотеку <a href="#liblua">liblua</a>.
</p>
<p>Сначала приводится шесть разделов, отсортированных по типу задач, а потом подробно описывается каждая функция.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Creating-Maps">12.4.1 Создание карт</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Drawing-Maps">12.4.2 Рисование карт</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Rotating-and-Mirroring-Maps">12.4.3 Вращение и отражение карт</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Requesting-and-Changing-Single-Map-Entries">12.4.4 Запрос и изменение отдельных участков карт</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Connecting-Two-Maps">12.4.5 Соединение двух карт</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Other-Map-Tasks">12.4.6 Другие операции с картами</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#newMap">12.4.7 newMap</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Map-Entry-Request">12.4.8 Запрос участка карты</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"> Оператор доступа на чтение/запись элемента по индексу &lsquo;<samp>[]</samp>&rsquo;
</td></tr>
<tr><td align="left" valign="top"><a href="#Map-Transformation">12.4.9 Преобразование карты</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"> Оператор &lsquo;<samp>^</samp>&rsquo;
</td></tr>
<tr><td align="left" valign="top"><a href="#Map-Horizontal-Concatenation">12.4.10 Горизонтальное объединение карт</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"> Оператор &lsquo;<samp>..</samp>&rsquo;
</td></tr>
<tr><td align="left" valign="top"><a href="#Map-Vertical-Concatenation">12.4.11 Вертикальное объединение карт</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"> Оператор &lsquo;<samp>+</samp>&rsquo;
</td></tr>
<tr><td align="left" valign="top"><a href="#Map-Fusing">12.4.12 Слияние карт</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"> Оператор &lsquo;<samp>*</samp>&rsquo;
</td></tr>
<tr><td align="left" valign="top"><a href="#Map-Default-Keys">12.4.13 Предустановленные коды карты</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Map-Width-and-Height">12.4.14 Ширина и высота карты</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#lib_002emap_002ecovers">12.4.15 lib.map.covers</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#lib_002emap_002edefuse">12.4.16 lib.map.defuse</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#lib_002emap_002eextend">12.4.17 lib.map.extend</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#lib_002emap_002ematch">12.4.18 lib.map.match</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#lib_002emap_002epaste">12.4.19 lib.map.paste</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#lib_002emap_002eprint">12.4.20 lib.map.print</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#lib_002emap_002ereplace">12.4.21 lib.map.replace</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#lib_002emap_002ereplace_005foutside">12.4.22 lib.map.replace_outside</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#lib_002emap_002esub">12.4.23 lib.map.sub</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#lib_002emap_002etrim">12.4.24 lib.map.trim</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Map-Transformation-Index-and-MAP_005fALL">12.4.25 Индекс преобразования карты и MAP_ALL</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Map-Transformation-Composition-and-Powers">12.4.26 Произведение и возведение в степень преобразований карт</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"> Операторы &lsquo;<samp>*</samp>&rsquo; и &lsquo;<samp>^</samp>&rsquo;
</td></tr>
<tr><td align="left" valign="top"><a href="#Map-Transformation-Inverse">12.4.27 Обратное преобразование карты</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                Оператор &lsquo;<samp>-</samp>&rsquo;
</td></tr>
<tr><td align="left" valign="top"><a href="#Random-Map-Transformations">12.4.28 Случайные преобразования карты</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>


<hr size="6">
<a name="Creating-Maps"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#libmap" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Drawing-Maps" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#libmap" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Creating-Maps-1"></a>
<h3 class="subsection">12.4.1 Создание карт</h3>

<p>В начале задаётся список строк, представляющий предполагаемый уровень в виде двумерного массива кодов секций:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">mypremap = {&quot;# # # # # # # &quot;,
            &quot;o t1  #   t2o &quot;,
            &quot;#     #     # &quot;,
            &quot;#     d2d1# # &quot;,
            &quot;# @1#     @2# &quot;,
            &quot;# # #     t1# &quot;,
            &quot;o   d3    t3o &quot;,
            &quot;# # # # # # # &quot;}
</pre></td></tr></table>

<p>Чтобы не запутаться в названиях, в этом разделе такой список строк будет называться &rsquo;наброском&rsquo; (в оригинале &mdash; &rsquo;premap&rsquo;). Карта (в контексте libmap) создаётся вызовом метода &lsquo;<samp>wo:newMap</samp>&rsquo;, с передачей ему в качестве параметров кода по умолчанию и наброска:
</p><table><tr><td>&nbsp;</td><td><pre class="example">mymap = wo:newMap(&quot;  &quot;, mypremap)
</pre></td></tr></table>
<p>Код по умолчанию хранится и в &lsquo;<samp>mymap</samp>&rsquo;, поскольку входит в состав карты.
</p>
<p>Чтобы задать карте размер &lsquo;<samp>height*width</samp>&rsquo;, можно воспользоваться вызовом
</p><table><tr><td>&nbsp;</td><td><pre class="example">mymap = wo:newMap(key, height, width)
</pre></td></tr></table>
<p>где каждый код секции, а также секция по умолчанию приравниваются &lsquo;<samp>key</samp>&rsquo;. Кроме того, можно опустить &lsquo;<samp>height</samp>&rsquo; и &lsquo;<samp>width</samp>&rsquo; &mdash; тогда будет создана карта, состоящая всего из одного символа.
</p>

<hr size="6">
<a name="Drawing-Maps"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Creating-Maps" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Rotating-and-Mirroring-Maps" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#libmap" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Drawing-Maps-1"></a>
<h3 class="subsection">12.4.2 Рисование карт</h3>

<p>Подобно тому, как мы рисовали набросок с помощью &lsquo;<samp>wo</samp>&rsquo; или &lsquo;<samp>wo:drawMap</samp>&rsquo; (см. раздел <a href="#drawMap">drawMap</a>), мы можем воспользоваться этими функциями и чтобы нарисовать новую карту:
</p><table><tr><td>&nbsp;</td><td><pre class="example">wo(resolver, mymap)
wo:drawMap(resolver, anchor, mymap)
wo:drawMap(resolver, anchor, ignore, mymap)
</pre></td></tr></table>
<p>Если для &lsquo;<samp>drawMap</samp>&rsquo; опущен параметр &lsquo;<samp>ignore</samp>&rsquo;, то вместо него будет использоваться код по умолчанию карты &lsquo;<samp>mymap</samp>&rsquo;.
</p>
<p>Естественно, можно нарисовать карту несколько раз, даже внутри преобразования, готовый пример можно увидеть в разделе <a href="#drawMap">drawMap</a>.
</p>

<hr size="6">
<a name="Rotating-and-Mirroring-Maps"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Drawing-Maps" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Requesting-and-Changing-Single-Map-Entries" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#libmap" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Rotating-and-Mirroring-Maps-1"></a>
<h3 class="subsection">12.4.3 Вращение и отражение карт</h3>

<p>Отдельная карта легко преобразуется с помощью одной из следующих команд:
</p><table><tr><td>&nbsp;</td><td><pre class="example">newmap = lib.map.transform(mymap, maptransformation)
newmap = mymap ^ maptransformation
</pre></td></tr></table>
<p>&lsquo;<samp>maptransformation</samp>&rsquo; может принимать одно из следующих постоянных значений:
</p><dl compact="compact">
<dt> &lsquo;<samp>MAP_IDENT</samp>&rsquo;</dt>
<dd><p>Без преобразований.
</p></dd>
<dt> &lsquo;<samp>MAP_ROT_CW</samp>&rsquo;</dt>
<dd><p>Поворот на 90 градусов по часовой стрелке.
</p></dd>
<dt> &lsquo;<samp>MAP_ROT_180</samp>&rsquo;</dt>
<dd><p>Поворот на 180 градусов (т.е. отражение относительно центральной точки).
</p></dd>
<dt> &lsquo;<samp>MAP_ROT_CCW</samp>&rsquo;</dt>
<dd><p>Поворот на 90 градусов против часовой стрелки.
</p></dd>
<dt> &lsquo;<samp>MAP_FLIP_HORIZONTAL</samp>&rsquo;</dt>
<dd><p>Отражение каждой строки, то есть отражение в вертикальном зеркале: левая и правая части меняются местами.
</p></dd>
<dt> &lsquo;<samp>MAP_FLIP_VERTICAL</samp>&rsquo;</dt>
<dd><p>Отражение каждой колонки, то есть отражение в горизонтальном зеркале: верхняя и нижняя части меняются местами.
</p></dd>
<dt> &lsquo;<samp>MAP_FLIP_SLASH</samp>&rsquo;</dt>
<dd><p>Отражение каждой <code>/</code>-подобной диагонали, то есть отражение в <code>\</code>-подобном зеркале: верхний правый и нижний левый углы меняются местами.
</p></dd>
<dt> &lsquo;<samp>MAP_FLIP_BACKSLASH</samp>&rsquo;</dt>
<dd><p>Отражение каждой <code>\</code>-подобной диагонали, то есть отражение в <code>/</code>-подобном зеркале: верхний левый и нижний правый углы меняются местами.
</p></dd>
</dl>

<p>Применяя несколько преобразований, следует помнить, что их порядок имеет значение. Если использовать
</p><table><tr><td>&nbsp;</td><td><pre class="example">newmap = mymap ^ maptransformation1 ^ maptransformation2 ^ maptransformation3
</pre></td></tr></table>
<p>то сначала на <code>mymap</code> подействует <code>maptransformation1</code>, потом <code>maptransformation2</code>, и наконец <code>maptransformation3</code>. Однако, комбинирование преобразований ассоциативно, т.е. возможна следующая запись
</p><table><tr><td>&nbsp;</td><td><pre class="example">newmap = mymap ^ ((maptransformation1 ^ maptransformation2) ^ maptransformation3)
</pre></td></tr></table>
<p>или такая
</p><table><tr><td>&nbsp;</td><td><pre class="example">newmap = (mymap ^ maptransformation1) ^ (maptransformation2 ^ maptransformation3)
</pre></td></tr></table>
<p>которые равнозначны. Следует помнить и то, что комбинирование преобразований выполняется значительно быстрее применения отдельных преобразований к картам. Таким образом первый пример выполнится быстрее второго. Вследствие последовательности выполнения операторов Lua,
</p><table><tr><td>&nbsp;</td><td><pre class="example">newmap = mymap ^ maptransformation1 ^ maptransformation2 ^ maptransformation3
</pre></td></tr></table>
<p>равносильно
</p><table><tr><td>&nbsp;</td><td><pre class="example">newmap = mymap ^ (maptransformation1 ^ (maptransformation2 ^ maptransformation3))
</pre></td></tr></table>
<p>а значит уже самый быстрый вариант из возможных.
</p>
<p>При комбинировании преобразований можно пользоваться как <code>^</code>, так и <code>*</code>. Кроме того, <code>maptransformation ^ n</code> может рассчитать преобразование <code>maptransformation</code> n-ной степени для любого целого n. Обратное преобразование задаётся в виде <code>-maptransformation</code>, таким образом:
</p><table><tr><td>&nbsp;</td><td><pre class="example">MAP_ROT_CW * (-MAP_ROT_CW) == MAP_IDENT
</pre></td></tr></table>


<hr size="6">
<a name="Requesting-and-Changing-Single-Map-Entries"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Rotating-and-Mirroring-Maps" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Connecting-Two-Maps" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#libmap" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Requesting-and-Changing-Single-Map-Entries-1"></a>
<h3 class="subsection">12.4.4 Запрос и изменение отдельных участков карт</h3>

<p>Давайте ещё раз взглянем на наш пример:
</p><table><tr><td>&nbsp;</td><td><pre class="example">mymap = wo:newMap(&quot;  &quot;, {&quot;# # # # # # # &quot;,
                         &quot;o t1  #   t2o &quot;,
                         &quot;#     #     # &quot;,
                         &quot;#     d2d1# # &quot;,
                         &quot;# @1#     @2# &quot;,
                         &quot;# # #     t1# &quot;,
                         &quot;o   d3    t3o &quot;,
                         &quot;# # # # # # # &quot;})
</pre></td></tr></table>
<p>Нетрудно проверить, секция какого типа расположена на позиции <code>{1,1} </code> (следует заметить, что верхний левый угол находится в позиции {<code>0,0}</code>):
</p><table><tr><td>&nbsp;</td><td><pre class="example">mymap[{1, 1}] == &quot;t1&quot;
</pre></td></tr></table>
<p>Так же просто её изменить. Скажем, требуется создать проход в секции справа от второго шарика &lsquo;<samp>@2</samp>&rsquo;, к которому можно обратиться по имени &lsquo;<samp>marble2</samp>&rsquo;:
</p><table><tr><td>&nbsp;</td><td><pre class="example">mymap[no[&quot;marble2&quot;] + {1,0}] = &quot;  &quot;
</pre></td></tr></table>
<p>Следует заметить, что ссылка на &lsquo;<samp>marble2</samp>&rsquo; будет работать только после того, как шарик будет размещён.
</p>
<p>Запрос и изменение участков карт можно использовать и со списком позиций, ссылками на объект и группу.
</p>
<p>Вхождение любого кода секции &lsquo;<samp>tile1</samp>&rsquo; легко заменяется на &lsquo;<samp>tile2</samp>&rsquo; следующей командой:
</p><table><tr><td>&nbsp;</td><td><pre class="example">mymap:replace(tile1, tile2)
</pre></td></tr></table>
<p>Можно опустить &lsquo;<samp>tile2</samp>&rsquo;, тогда любое вхождение &lsquo;<samp>tile1</samp>&rsquo; будет заменено кодом секции по умолчанию.
</p>
<p>С помощью &lsquo;<samp>match</samp>&rsquo; можно искать позиции на карте, которые удовлетворяют заданным условиям, возвращаемое значение представляет собой список позиций. Синтаксис прост:
</p><table><tr><td>&nbsp;</td><td><pre class="example">mymap:match()
mymap:match(tilekey)
mymap:match({pos1, key1a, key1b, ...}, {pos2, key2a, key2b, ...}, ...)
mymap:match({{pos1, key1a, key1b, ...}, {pos2, key2a, key2b, ...}, ...})
</pre></td></tr></table>
<p>Первый вызов вернёт все позиции на карте. Второй вызов вернёт все позиции с указанным кодом <code>tilekey</code>. Третий и четвёртый вызовы вернут все позиции <code>x</code>, для которых в позиции <code>x + pos1</code> расположен один из кодов <code>key1a</code>, <code>key1b</code> ... и в позиции <code>x + pos2</code> расположен один из кодов <code>key2a</code>, <code>2b</code>, ... и т. д. Предполагается, что пространство за пределами карты заполнено секциями с кодами по умолчанию.
</p>
<p>Полученный список позиций можно использовать, чтобы заменить совпавшие коды секций:
</p><table><tr><td>&nbsp;</td><td><pre class="example">mymap[mymap:match(oldkey)] = newkey
</pre></td></tr></table>
<p>эквивалентно &lsquo;<samp>mymap:replace(oldkey, newkey)</samp>&rsquo; (только медленнее), а
</p><table><tr><td>&nbsp;</td><td><pre class="example">mymap[mymap:match({po(0,0), &quot; &quot;}, {NEIGHBORS_4, &quot;.&quot;, &quot;:&quot;})] = &quot;.&quot;
</pre></td></tr></table>
<p>найдёт все вхождения &lsquo;<samp> </samp>&rsquo;, окружённые со всех сторон &lsquo;<samp>.</samp>&rsquo;, &lsquo;<samp>:</samp>&rsquo; или их сочетаниями, и заменит их на &lsquo;<samp>.</samp>&rsquo;. Поскольку все замены произойдут после проверки на соответствие, а значит и одновременно, вновь добавленные &lsquo;<samp>.</samp>&rsquo; не будут участвовать в процессе проверки.
</p>

<hr size="6">
<a name="Connecting-Two-Maps"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Requesting-and-Changing-Single-Map-Entries" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Other-Map-Tasks" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#libmap" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Connecting-Two-Maps-1"></a>
<h3 class="subsection">12.4.5 Соединение двух карт</h3>

<p>Две заданные карты &lsquo;<samp>map1</samp>&rsquo; и &lsquo;<samp>map2</samp>&rsquo; можно склеить по горизонтали с помощью &lsquo;<samp>map1 .. map2</samp>&rsquo; или по вертикали с помощью &lsquo;<samp>map1 + map2</samp>&rsquo;. Отсутствующие участки будут заполнены секцией с кодом по умолчанию соответствующей карты, код по умолчанию результата берётся из &lsquo;<samp>map1</samp>&rsquo;. Простой пример:
</p><table><tr><td>&nbsp;</td><td><pre class="example">map1 = wo:newMap(&quot; &quot;, {&quot;####&quot;,
                       &quot;o  #&quot;,
                       &quot;# w#&quot;,
                       &quot;####&quot;})
map2 = wo:newMap(&quot;.&quot;, {&quot;#######&quot;,
                       &quot;#w.#..#&quot;,
                       &quot;#..D..#&quot;,
                       &quot;#..#.w#&quot;,
                       &quot;#######&quot;})
map1 .. map2 == wo:newMap(&quot; &quot;, {&quot;###########&quot;,
                                &quot;o  ##w.#..#&quot;,
                                &quot;# w##..D..#&quot;,
                                &quot;#####..#.w#&quot;,
                                &quot;    #######&quot;})
map2 .. map1 == wo:newMap(&quot;.&quot;, {&quot;###########&quot;,
                                &quot;#w.#..#o  #&quot;,
                                &quot;#..D..## w#&quot;,
                                &quot;#..#.w#####&quot;,
                                &quot;#######    &quot;})
map1 + map2 == wo:newMap(&quot; &quot;, {&quot;####   &quot;,
                               &quot;o  #   &quot;,
                               &quot;# w#   &quot;,
                               &quot;####   &quot;,
                               &quot;#######&quot;,
                               &quot;#w.#..#&quot;,
                               &quot;#..D..#&quot;,
                               &quot;#..#.w#&quot;,
                               &quot;#######&quot;})
</pre></td></tr></table>

<p>Кроме того, можно вставить одну карту в другую:
</p><table><tr><td>&nbsp;</td><td><pre class="example">map1:paste(map2, pos)
</pre></td></tr></table>
<p>вставит &lsquo;<samp>map2</samp>&rsquo; в &lsquo;<samp>map1</samp>&rsquo; в позицию &lsquo;<samp>pos</samp>&rsquo; (относительно &lsquo;<samp>map1</samp>&rsquo;: координаты верхнего левого угла &mdash; <code>{0,0}</code>). При необходимости, &lsquo;<samp>map1</samp>&rsquo; будет расширена настолько, чтобы в ней полностью поместилась &lsquo;<samp>map2</samp>&rsquo;. Чтобы снова уменьшить её размер (см. ниже) или задать &lsquo;<samp>map2</samp>&rsquo; в качестве участка другой карты, можно воспользоваться &lsquo;<samp>map1.sub</samp>&rsquo;. Во время вставки, любое вхождение кода секции по умолчанию &lsquo;<samp>map2</samp>&rsquo; будет проигнорировано, другими словами оно не появится в &lsquo;<samp>map1</samp>&rsquo;. Чтобы избежать этого, код секции по умолчанию можно изменить перед командой вставки с помощью &lsquo;<samp>map2.defaultkey = ...</samp>&rsquo; или воспользоваться &lsquo;<samp>map2:replace(tile)</samp>&rsquo; для замены других кодов секций кодом секции по умолчанию, чтобы они тоже не появлялись. В качестве &lsquo;<samp>pos</samp>&rsquo; можно использовать группу объектов или список позиций, в таком случае в &lsquo;<samp>map1</samp>&rsquo; будет вставлено несколько копий &lsquo;<samp>map2</samp>&rsquo;. В первом случае нельзя быть уверенным в последовательности, в которой карты будут вставляться в &lsquo;<samp>map1</samp>&rsquo;. Во втором случае последующие записи в списке позиций могут перекрывать результаты выполнения предыдущих.
</p>
<p>На самом деле есть ещё один вариант: две карты могут отображать две различные части кода секций. Ниже приводится пример слияния двух слоёв кодов секций:
</p><table><tr><td>&nbsp;</td><td><pre class="example">first_char = wo:newMap(&quot;.&quot;, {&quot;#######&quot;,
                             &quot;#w.#..#&quot;,
                             &quot;#..D..#&quot;,
                             &quot;#..#.w#&quot;,
                             &quot;#######&quot;})
last_char  = wo:newMap(&quot;.&quot;, {&quot;C     C&quot;,
                             &quot; 11 22 &quot;,
                             &quot; 11322 &quot;,
                             &quot; 11 22 &quot;,
                             &quot;C     C&quot;})
first_char * last_char = wo:newMap(&quot; .&quot;, {&quot;#C# # # # # #C&quot;,
                                          &quot;# w1.1# .2.2# &quot;,
                                          &quot;# .1.1D3.2.2# &quot;,
                                          &quot;# .1.1# .2w2# &quot;,
                                          &quot;#C# # # # # #C&quot;})
</pre></td></tr></table>
<p>Код секции по умолчанию для объединённой карты будет слиянием двух изначальных кодов секций по умолчанию. Вместо любой из двух карт можно использовать строку, в этом случае весь слой кодов секций будет заполнен этой строкой:
</p><table><tr><td>&nbsp;</td><td><pre class="example">first_char = wo:newMap(&quot;.&quot;, {&quot;#######&quot;,
                             &quot;#w.#..#&quot;,
                             &quot;#..D..#&quot;,
                             &quot;#..#.w#&quot;,
                             &quot;#######&quot;})
first_char * &quot;u&quot; = wo:newMap(&quot; u&quot;, {&quot;#u#u#u#u#u#u#u&quot;,
                                    &quot;#uwu.u#u.u.u#u&quot;,
                                    &quot;#u.u.uDu.u.u#u&quot;,
                                    &quot;#u.u.u#u.uwu#u&quot;,
                                    &quot;#u#u#u#u#u#u#u&quot;})

</pre></td></tr></table>
<p>Слияние карт в сочетании с преобразованиями <a href="#res_002ecomposer">res.composer</a> и <a href="#res_002eautotile">res.autotile</a> может оказаться очень мощным инструментом.
</p>
<p>Карта может быть и разделена: &lsquo;<samp>map:defuse()</samp>&rsquo; вернёт список карт, причём длина кода секции каждой карты будет равна единице, а храниться в ней будет соответствующий символ подкода.
</p>

<hr size="6">
<a name="Other-Map-Tasks"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Connecting-Two-Maps" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#newMap" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#libmap" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Other-Map-Tasks-1"></a>
<h3 class="subsection">12.4.6 Другие операции с картами</h3>

<p>Доступ к коду по умолчанию можно получить с помощью &lsquo;<samp>mymap.defaultkey</samp>&rsquo;, а изменяется он так же просто:
</p><table><tr><td>&nbsp;</td><td><pre class="example">mymap.defaultkey = &quot;.3&quot;
mymap:set_default_key(&quot;.3&quot;)
</pre></td></tr></table>
<p>Новый код по умолчанию должен быть такой же длины, что и старый. Однако, можно выбрать новую длину кода, если она не превышает допустимой для данной карты.
</p>
<p>Прочесть значения ширины и высоты карты можно с помощью методов &lsquo;<samp>mymap.width</samp>&rsquo; и &lsquo;<samp>mymap.height</samp>&rsquo;. Тем не менее, изменить эти значения можно только командами &lsquo;<samp>mymap:extend</samp>&rsquo; и &lsquo;<samp>mymap:sub</samp>&rsquo;.
</p>
<p>Расширить карту до заданной позиции можно, если её координаты не отрицательны:
</p><table><tr><td>&nbsp;</td><td><pre class="example">mymap:extend({19, 12})
</pre></td></tr></table>
<p>расширит &lsquo;<samp>mymap</samp>&rsquo; до позиции &lsquo;<samp>{19,12}</samp>&rsquo;. Пустые области будут заполнены кодом по умолчанию. Если эта позиция уже находится в пределах карты, то ничего не произойдёт.
</p>
<p>При необходимости проверить, лежит ли позиция &lsquo;<samp>pos</samp>&rsquo; в пределах карты, можно воспользоваться методом &lsquo;<samp>mymap:covers(pos)</samp>&rsquo;, который вернёт булево значение. Следует помнить, что карта всегда начинается с позиции &lsquo;<samp>{0,0}</samp>&rsquo;.
</p>
<p>&lsquo;<samp>lib.map.sub</samp>&rsquo; позволяет скопировать прямоугольную область карты и создать таким образом &quot;подкарту&quot;. У &lsquo;<samp>lib.map.sub</samp>&rsquo; такой же синтаксис, как и у &lsquo;<samp>wo:drawRect</samp>&rsquo;, то есть
</p><table><tr><td>&nbsp;</td><td><pre class="example">submap = mymap:sub(pos1, pos2)
</pre></td></tr></table>
<p>задаёт прямоугольник с &lsquo;<samp>pos1</samp>&rsquo;, соответствующим верхнему левому углу, и &lsquo;<samp>pos2</samp>&rsquo;, соответствующим нижнему правому углу, а
</p><table><tr><td>&nbsp;</td><td><pre class="example">submap = mymap:sub(pos1, width, height)
</pre></td></tr></table>
<p>задаёт прямоугольник его верхним левым углом и размерами сторон. Если нижний правый угол накладывается на область карты &lsquo;<samp>mymap</samp>&rsquo;, то полученная карта &lsquo;<samp>submap</samp>&rsquo; станет прямоугольной областью в рамках &lsquo;<samp>mymap</samp>&rsquo;, другими словами ширина и высота могут быть меньше указанных параметров. Чтобы гарантировано заполнить карту по ширине и высоте, пользуйтесь методом &lsquo;<samp>submap:extend(width, height)</samp>&rsquo;. Естественно, код по умолчанию подкарты совпадает с кодом по умолчанию первоначальной карты.
</p>
<p>&lsquo;<samp>lib.map.trim</samp>&rsquo; либо &lsquo;<samp>mymap:trim(tilekey)</samp>&rsquo; удаляют все строки и столбцы по направлениям на север, юг, восток и запад, которые состоят лишь из одного кода <code>tilekey</code>; напоминает удаление непечатаемых символов из строки. Если опустить &lsquo;<samp>tilekey</samp>&rsquo;, то вместо него будет использоваться код секции по умолчанию.
</p>
<p>&lsquo;<samp>mymap:replace_outside(tile1, tile2)</samp>&rsquo; это своего рода сочетание &lsquo;<samp>replace</samp>&rsquo; и &lsquo;<samp>trim</samp>&rsquo;: все вхождения <code>tile1</code>, которые отделяются от границы последовательностью &lsquo;<samp>tile1</samp>&rsquo;, заменяются <code>tile2</code> (или кодом секции по умолчанию). Например:
</p><table><tr><td>&nbsp;</td><td><pre class="example">map1 = wo:newMap(&quot; &quot;, {&quot; ##########&quot;,
                       &quot;###      ##&quot;,
                       &quot;F# D ## # #&quot;,
                       &quot;#       # #&quot;,
                       &quot;########   &quot;})
map2 = wo:newMap(&quot; &quot;, map1)
map1:replace_outside(&quot; &quot;, &quot;.&quot;)
map2:replace_outside(&quot; &quot;, &quot;#&quot;)
map2:replace_outside(&quot;#&quot;, &quot;.&quot;)
</pre></td></tr></table>
<p>сгенерирует:
</p><table><tr><td>&nbsp;</td><td><pre class="example">map1 = {&quot;.##########&quot;,
        &quot;###      ##&quot;,
        &quot;F# D ## #.#&quot;,
        &quot;#       #.#&quot;,
        &quot;########...&quot;})
map2 = {&quot;...........&quot;,
        &quot;...      ..&quot;,
        &quot;F. D ## ...&quot;,
        &quot;.       ...&quot;,
        &quot;...........&quot;})
</pre></td></tr></table>
<p>Чтобы убрать нежелательные стены, можно совместить &lsquo;<samp>replace_outside</samp>&rsquo; с &lsquo;<samp>match</samp>&rsquo;:
</p><table><tr><td>&nbsp;</td><td><pre class="example">map1.defaultkey = &quot;-&quot;
map1:replace_outside(&quot; &quot;)
map1[map1:match({{po(0,0), &quot;#&quot;}, {NEIGHBORS_4, &quot;-&quot;, &quot;#&quot;, &quot;F&quot;}})] = &quot;-&quot;
map1:trim()
map1.defaultkey = &quot; &quot;
</pre></td></tr></table>
<p>сгенерирует:
</p><table><tr><td>&nbsp;</td><td><pre class="example">map1 = {&quot;---######-&quot;,
        &quot;--#      #&quot;,
        &quot;F# D ## #-&quot;,
        &quot;#       #-&quot;,
        &quot;-#######--&quot;})
</pre></td></tr></table>

<p>Наконец, чтобы вывести &lsquo;<samp>mymap</samp>&rsquo; на стандартный вывод, воспользуйтесь методом &lsquo;<samp>mymap:print()</samp>&rsquo;. Как и <a href="#lib_002elua_002eprint_005ftable">lib.lua.print_table</a>, он полезен при отладке уровня, чтобы окинуть взглядом его карты, но его не следует включать в окончательный вариант уровня. &lsquo;<samp>mymap:print()</samp>&rsquo; можно использовать с несколькими необязательными параметрами:
</p><table><tr><td>&nbsp;</td><td><pre class="example">mymap:print(withXYCounts, left_separator, right_separator)
</pre></td></tr></table>
<p>Если значение &lsquo;<samp>withXYCounts</samp>&rsquo; равно &lsquo;<samp>true</samp>&rsquo;, то карта распечатывается с координатными осями. &lsquo;<samp>left_separator</samp>&rsquo; и &lsquo;<samp>right_separator</samp>&rsquo; могут быть строками, которые располагаются между левой координатной осью и картой и под картой (для удобства определения символов-заполнителей).
</p>

<hr size="6">
<a name="newMap"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Other-Map-Tasks" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Map-Entry-Request" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#libmap" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="newMap-1"></a>
<h3 class="subsection">12.4.7 newMap</h3>
<a name="index-lib_002emap_002enewMap"></a>

<p>&lsquo;<samp>wo:newMap</samp>&rsquo; получает в качестве параметров код по умолчанию и набросок карты или её ширину и высоту, а возвращает карту типа libmap.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><i>mymap</i> = <b>wo:newMap</b>(<i>defaultkey</i>, <i>premap</i>)
</p>
<p><i>mymap</i> = <b>wo:newMap</b>(<i>defaultkey</i>, <i>width</i>, <i>height</i>)
</p>
<p><i>mymap</i> = <b>wo:newMap</b>(<i>defaultkey</i>)
</p>
<dl compact="compact">
<dt> <i>defaultkey</i></dt>
<dd><p>Непустая строка, которая становится кодом по умолчанию для новой карты.
</p>
</dd>
<dt> <i>premap</i></dt>
<dd><p>Список строк. В нём могут быть строки различной длины, но длина каждой строки должна делиться нацело на длину кода секции по умолчанию.
</p>
</dd>
<dt> <i>width</i>, <i>height</i></dt>
<dd><p>Положительные целые числа. Если вместо наброска карты указаны ширина и высота, то возвращается прямоугольная область, состоящая только из секций с кодом по умолчанию.
</p></dd>
</dl>

<p>Если не указаны ни набросок карты, ни ширина и высота, то возвращается карта размера 1x1 с кодом секции по умолчанию.
</p>
</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><p>См. раздел <a href="#Creating-Maps">Создание карт</a>.
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Синтаксис без наброска карты, ширины и высоты полезен в сочетании со слиянием карт (см. раздел <a href="#Map-Fusing">Слияние карт</a>).
</p>
<p>Карта типа libmap всегда прямоугольной формы. Однако при создании карт произвольной формы с помощью метода <a href="#drawMap">drawMap</a> можно указать ключ игнорирования.
</p>
<p>Если набросок не прямоугольный, то недостающие позиции будут заполнены кодом по умолчанию. Тем не менее, длина каждой строки должна делиться нацело на длину кода по умолчанию, иначе будет вызвано исключение.
</p>
<p>Методу <code>wo:newMap</code> можно передавать произвольные списки строк, но использоваться будут только их целые положительные составляющие, а все остальные будут проигнорированы. Можно даже пропускать строки, как показано в примере ниже:
</p><table><tr><td>&nbsp;</td><td><pre class="example">wo:newMap(&quot; &quot;, {[25] = &quot;g&quot;})
</pre></td></tr></table>
<p>Будет получена карта шириной в 1 и высотой в 25 секций, заполненная пробелами, и лишь в последней строке будет присутствовать символ <code>&quot;g&quot;</code>.
</p>
<p>Каждая карта типа libmap представляет собой список и тоже может выступать в качестве наброска. В случае, когда карта libmap используется в качестве наброска, её код по умолчанию игнорируется. В частности карту libmap можно скопировать с помощью метода <code>wo:newMap</code>:
</p><table><tr><td>&nbsp;</td><td><pre class="example">newcopy = wo:newMap(mymap.defaultkey, mymap)
</pre></td></tr></table>
</dd>
</dl>


<hr size="6">
<a name="Map-Entry-Request"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#newMap" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Map-Transformation" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#libmap" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Map-Entry-Request-1"></a>
<h3 class="subsection">12.4.8 Запрос участка карты</h3>
<a name="index-lib_002emap_002eget"></a> <a name="index-lib_002emap_002eset"></a>

<p>Получить и изменить участок карты libmap можно с помощью оператора доступа по индексу &lsquo;<samp>[]</samp>&rsquo;.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><i>entry</i> = <i>mymap</i><b>[</b><i>posarg</i><b>]</b>
</p>
<p><i>entry</i> = <b>lib.map.get</b>(<i>mymap</i>, <i>posarg</i>)
</p>
<p><i>mymap</i><b>[</b><i>posarg</i><b>]</b> = <b>newentry</b>
</p>
<p><b>lib.map.set</b>(<i>mymap</i>, <i>posarg</i>, <i>newentry</i>)
</p>
<dl compact="compact">
<dt> <i>entry</i>, <i>newentry</i></dt>
<dd><p>Непустые строки той же длины, что и код по умолчанию для <code>mymap</code>.
</p>
</dd>
<dt> <i>mymap</i></dt>
<dd><p>Карта libmap.
</p>
</dd>
<dt> <i>posarg</i></dt>
<dd><p>Позиция, объект, группа, список позиций, строка или список строк (интерпретируемых как отдельные позиции).
</p></dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><p>См. раздел <a href="#Requesting-and-Changing-Single-Map-Entries">Запрос и изменение отдельных участков карт</a>.
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Попытка получить группу или список позиций приведёт к получению списка всех кодовых записей позиций группы или списка позиций в соответствующем порядке. Пустые группы и списки позиций вернут пустые списки строк.
</p>
<p>Соответственно, попытка записать группу или список позиций изменит код в каждой позиции в группе или списке позиций на указанную строку.
</p>
<p>Попытка получить доступ к строке вызывает для получения именованной позиции <a href="#Positions-Repository-Request">Запрос к хранилищу позиций</a>, кроме случаев, когда строка совпадает с <code>&quot;type&quot;</code>, <code>&quot;width&quot;</code>, <code>&quot;height&quot;</code>, <code>&quot;defaultkey&quot;</code> или <code>&quot;keylength&quot;</code>, которые возвращают соответствующие свойства карты.
</p>
<p>Попытка записать строку похожим образом интерпретируется, как обращение к именованной позиции, кроме случаев, когда строка совпадает с <code>&quot;defaultkey&quot;</code>, (см. раздел <a href="#Map-Default-Keys">Предустановленные коды карты</a>). Попытка записи в несуществующую позицию вызывает исключение.
</p>
<p>Можно обращаться к любой позиции за пределами карты, даже с отрицательными координатами. Тогда будет получен код по умолчанию. Это касается и несуществующих позиций (например позиций предметов в инвентаре или позиции строки, не описывающей именованную позицию).
</p>
<p>При попытке указать отрицательные координаты для позиции будет выдана ошибка. Однако при использовании положительных значений за пределами карты, карта постепенно будет расширена до новой позиции, при необходимости задав код по умолчанию для нуждающихся в нём записей.
</p>
<p>Дробные координаты точки всегда округляются до позиции в пределах решётки (см. раздел <a href="#Position-Grid-Rounding">Округление позиции до границ решётки</a>).
</p></dd>
</dl>


<hr size="6">
<a name="Map-Transformation"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Map-Entry-Request" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Map-Horizontal-Concatenation" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#libmap" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Map-Transformation-1"></a>
<h3 class="subsection">12.4.9 Преобразование карты</h3>
<a name="index-lib_002emap_002etransform"></a>

<p>С помощью восьми констант преобразования карты, указанных в разделе <a href="#Rotating-and-Mirroring-Maps">Вращение и отражение карт</a>, можно преобразовать любую карту libmap.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><i>newmap</i> = <i>mymap</i><b>^</b><i>maptransformation</i>
</p>
<p><i>newmap</i> = <b>lib.map.transform</b>(<i>mymap</i>, <i>maptransformation</i>)
</p>
<dl compact="compact">
<dt> <i>mymap</i>, <i>newmap</i></dt>
<dd><p>Карты libmap.
</p>
</dd>
<dt> <i>maptransformation</i></dt>
<dd><p>Одна из следующих восьми констант: <code>MAP_IDENT</code>, <code>MAP_ROT_CW</code>, <code>MAP_ROT_180</code>, <code>MAP_ROT_CCW</code>, <code>MAP_FLIP_HORIZONTAL</code>, <code>MAP_FLIP_VERTICAL</code>, <code>MAP_FLIP_SLASH</code>, <code>MAP_FLIP_BACKSLASH</code>.
</p></dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><p>См. раздел <a href="#Rotating-and-Mirroring-Maps">Вращение и отражение карт</a>.
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Поскольку преобразования карт можно совмещать оператором &lsquo;<samp>^</samp>&rsquo;, то можно совмещать несколько преобразований, даже не пользуясь скобками; важно только всегда помещать слева от знака &lsquo;<samp>^</samp>&rsquo; карту:
</p><table><tr><td>&nbsp;</td><td><pre class="example">newmap = mymap ^ MAP_ROT_CW ^ MAP_FLIP_HORIZONTAL
</pre></td></tr></table>
<p>Однако каждая такая комбинация с тем же успехом может быть представлена единственной константой.
</p>
<p>После преобразования высота и ширина карты могут поменяться местами.
</p></dd>
</dl>


<hr size="6">
<a name="Map-Horizontal-Concatenation"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Map-Transformation" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Map-Vertical-Concatenation" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#libmap" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Map-Horizontal-Concatenation-1"></a>
<h3 class="subsection">12.4.10 Горизонтальное объединение карт</h3>
<a name="index-lib_002emap_002econcat_005fhorizontally"></a>

<p>Две карты можно последовательно склеить горизонтально с помощью оператора &lsquo;<samp>..</samp>&rsquo;. Запомнить отличие оператора &lsquo;<samp>..</samp>&rsquo; от &lsquo;<samp>+</samp>&rsquo; можно, проведя аналогию со строками, где он имеет похожее значение (см. раздел <a href="#Map-Vertical-Concatenation">Вертикальное объединение карт</a>).
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><i>newmap</i> = <i>mymap1</i> <b>..</b> <i>mymap2</i>
</p>
<p><i>newmap</i> = <b>lib.map.concat_horizontally</b>(<i>mymap1</i>, <i>mymap2</i>)
</p>
<dl compact="compact">
<dt> <i>mymap1</i>, <i>mymap2</i>, <i>newmap</i></dt>
<dd><p>Карты libmap.
</p></dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><p>См. раздел <a href="#Connecting-Two-Maps">Соединение двух карт</a>.
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Верхний левый угол второй карты располагается рядом с верхним правым углом первой, таким образом нижние строки карт находятся на одном уровне. При необходимости выровнять их по другому, можно сначала прикрепить ко второй (или первой) карте другую карту с такой же высотой по вертикали, как в примере:
</p><table><tr><td>&nbsp;</td><td><pre class="example">newmap = mymap1 .. (wo:newMap(&quot; &quot;, 1, 13) + mymap2)
</pre></td></tr></table>

<p>Код по умолчанию новой карты совпадает с кодом по умолчанию первой карты. Любые отсутствующие в прямоугольной карте позиции последовательно выставляются в код по умолчанию.
</p></dd>
</dl>


<hr size="6">
<a name="Map-Vertical-Concatenation"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Map-Horizontal-Concatenation" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Map-Fusing" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#libmap" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Map-Vertical-Concatenation-1"></a>
<h3 class="subsection">12.4.11 Вертикальное объединение карт</h3>
<a name="index-lib_002emap_002econcat_005fvertically"></a>

<p>Карты libmap можно склеить по верху каждой по вертикали с помощью оператора &lsquo;<samp>+</samp>&rsquo;. Сравните с описанием оператора &lsquo;<samp>..</samp>&rsquo; (см. раздел <a href="#Map-Horizontal-Concatenation">Горизонтальное объединение карт</a>).
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><i>newmap</i> = <i>mymap1</i> <b>+</b> <i>mymap2</i>
</p>
<p><i>newmap</i> = <b>lib.map.concat_vertically</b>(<i>mymap1</i>, <i>mymap2</i>)
</p>
<dl compact="compact">
<dt> <i>mymap1</i>, <i>mymap2</i>, <i>newmap</i></dt>
<dd><p>Карты libmap.
</p></dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><p>См. раздел <a href="#Connecting-Two-Maps">Соединение двух карт</a>.
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Верхний левый угол второй карты размещается под нижнем левым углом первой, таким образом левые границы карт находятся на одном уровне. При необходимости выровнять их по другому, можно сначала прикрепить ко второй (или первой) карте по горизонтали карту подходящей ширины, как в примере:
</p><table><tr><td>&nbsp;</td><td><pre class="example">newmap = mymap1 + (wo:newMap(&quot; &quot;, 13, 1) .. mymap2)
</pre></td></tr></table>

<p>Код по умолчанию новой карты совпадает с кодом по умолчанию первой карты. Любые отсутствующие в прямоугольной карте позиции последовательно выставляются в код по умолчанию.
</p></dd>
</dl>


<hr size="6">
<a name="Map-Fusing"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Map-Vertical-Concatenation" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Map-Default-Keys" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#libmap" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Map-Fusing-1"></a>
<h3 class="subsection">12.4.12 Слияние карт</h3>
<a name="index-lib_002emap_002efuse"></a>

<p>Карты libmap можно объединить, как описано в разделе <a href="#Connecting-Two-Maps">Соединение двух карт</a>, интерпретируя два кода двух карт, расположенных в одной позиции, как части совмещённого (объединённого) кода в этой позиции.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><i>newmap</i> = <i>mymap1</i> <b>*</b> <i>mymap2</i>
</p>
<p><i>newmap</i> = <b>lib.map.fuse</b>(<i>mymap1</i>, <i>mymap2</i>)
</p>
<dl compact="compact">
<dt> <i>mymap1</i>, <i>mymap2</i>, <i>newmap</i></dt>
<dd><p>Карты libmap.
</p></dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><p>См. раздел <a href="#Connecting-Two-Maps">Соединение двух карт</a>.
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Отсутствующие в одной карте коды заменяются на коды по умолчанию для этой карты.
</p>
<p>Код по умолчанию получившейся карты включает в себя коды по умолчанию первой и второй карт (что логично).
</p>
<p>Операция, обратная слиянию, задаётся методом <a href="#lib_002emap_002edefuse">lib.map.defuse</a>.
</p>
<p>Одна из карт может быть строкой, которая интерпретируется как карта размером 1x1 с указанной строкой, выступающей в роли кода по умолчанию. В результате процесса слияния код каждой секции объединяется с указанной строкой.
</p></dd>
</dl>


<hr size="6">
<a name="Map-Default-Keys"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Map-Fusing" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Map-Width-and-Height" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#libmap" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Map-Default-Keys-1"></a>
<h3 class="subsection">12.4.13 Предустановленные коды карты</h3>
<a name="index-lib_002emap_002eset_005fdefault_005fkey"></a>

<p>В карте libmap всегда есть код по умолчанию, который используется в библиотеке повсюду. Этот код вписывается в тех местах, где запрошенный код не удовлетворяет условиям карты либо когда <a href="#drawMap">drawMap</a> или <code>wo</code> (см. раздел <a href="#World-Creation">Создание мира</a>) вызываются без кода по умолчанию либо игнорируемого кода. Поэтому, иногда может понадобиться получить или изменить код по умолчанию для карты.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><i>defaultkey</i> = <i>mymap</i><b>.defaultkey</b>
</p>
<p><i>defaultkey</i> = <i>mymap</i><b>[&quot;defaultkey&quot;]</b>
</p>
<p><i>keylength</i> = <i>mymap</i><b>.keylength</b>
</p>
<p><i>keylength</i> = <i>mymap</i><b>[&quot;keylength&quot;]</b>
</p>
<p><i>mymap</i><b>.defaultkey</b> = <i>newkey</i>
</p>
<p><i>mymap</i><b>[&quot;defaultkey&quot;]</b> = <i>newkey</i>
</p>
<p><i>mymap</i>:<b>set_default_key</b>(<i>newkey</i>)
</p>
<p><b>lib.map.set_default_key</b>(<i>mymap</i>, <i>newkey</i>)
</p>
<dl compact="compact">
<dt> <i>defaultkey</i>, <i>newkey</i></dt>
<dd><p>Непустая строка.
</p>
</dd>
<dt> <i>mymap</i></dt>
<dd><p>Карта libmap.
</p>
</dd>
<dt> <i>keylength</i></dt>
<dd><p>Положительное целое число, равняющееся длине кода по умолчанию.
</p></dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><p>См. раздел <a href="#Other-Map-Tasks">Другие операции с картами</a>.
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Как правило, код по умолчанию для карты имеет смысл изменить, когда два и более кода могут быть восприняты как коды по умолчанию. Это может произойти, например, при импорте уровней Сокобана: хотя общепринятый код по умолчанию должен быть кодом внутренних незаполненных секций, ему временно присваивается значение кода внешней области, чтобы упростить сверку секций и их исключение из карты. Затем ему снова присваивается значение по умолчанию:
</p><table><tr><td>&nbsp;</td><td><pre class="example">local map = lib.import.level_to_map(level, &quot;\n&quot;, &quot; &quot;)
map:replace(&quot;_&quot;)
map:replace(&quot;-&quot;)
map:replace_outside(&quot; &quot;, &quot;-&quot;)
-- Удаляет избыточные стены по контуру:
-- Стены избыточны, если они окружены &quot;-&quot; или &quot;#&quot;.
-- В этом случае они могут быть заменены &quot;-&quot;.
map.defaultkey = &quot;-&quot;
map[map:match({{po(0,0), &quot;#&quot;}, {NEIGHBORS_8, &quot;-&quot;, &quot;#&quot;}})] = &quot;-&quot;
map = map:trim()
map.defaultkey = &quot; &quot;
</pre></td></tr></table>
<p>Подробнее о работе с кодами по умолчанию см. разделы <a href="#lib_002emap_002ematch">lib.map.match</a> и <a href="#lib_002emap_002etrim">lib.map.trim</a>.
</p>
<p>Длину кода карты можно узнать, но нельзя изменить. Чтобы длина кода карты изменилась, необходимо изменить само значение кода по умолчанию. С другой стороны, можно сменить код по умолчанию на код другой длины; однако, как правило, этого не следует делать, поскольку каждая строка будет заново пересмотрена интерпретатором и ширина карты изменится. Как и прежде, ширина карты должна делиться нацело на новую длину кода, иначе будет вызвано исключение.
</p>
<p>Чтобы изменить длину кода без повторной интерпретации каждой строки, следует слить или разорвать карту (см. разделы <a href="#Map-Fusing">Слияние карт</a> и <a href="#lib_002emap_002edefuse">lib.map.defuse</a>). С <a href="#newMap">newMap</a> это довольно просто:
</p><table><tr><td>&nbsp;</td><td><pre class="example">extendedmap = mymap * wo:newMap(&quot; &quot;)
restrictedmap = (mymap:defuse())[1] * (mymap:defuse())[3]
</pre></td></tr></table>
</dd>
</dl>


<hr size="6">
<a name="Map-Width-and-Height"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Map-Default-Keys" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#lib_002emap_002ecovers" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#libmap" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Map-Width-and-Height-1"></a>
<h3 class="subsection">12.4.14 Ширина и высота карты</h3>

<p>У карты libmap всегда есть ширина и высота. Они задают, например, точное расположение второй карты при объединении (см. раздел <a href="#Connecting-Two-Maps">Соединение двух карт</a>).
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><i>width</i> = <i>mymap</i><b>.width</b>
</p>
<p><i>width</i> = <i>mymap</i><b>[&quot;width&quot;]</b>
</p>
<p><i>height</i> = <i>mymap</i><b>.height</b>
</p>
<p><i>height</i> = <i>mymap</i><b>[&quot;height&quot;]</b>
</p>
<dl compact="compact">
<dt> <i>width</i>, <i>height</i></dt>
<dd><p>Положительные целые числа.
</p>
</dd>
<dt> <i>mymap</i></dt>
<dd><p>Карта libmap.
</p></dd>
</dl>

</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>См. также <a href="#Other-Map-Tasks">Другие операции с картами</a>.
</p>
<p>Нельзя (да и практически не нужно) напрямую изменять ширину и высоту карты. Вместо этого, можно расширить карту до указанной позиции с помощью метода <a href="#lib_002emap_002eextend">lib.map.extend</a>, получить прямоугольную часть карты с помощью метода <a href="#lib_002emap_002esub">lib.map.sub</a> или убрать из карты ненужные строки и колонки с помощью метода <a href="#lib_002emap_002etrim">lib.map.trim</a>.
</p>
<p>Следует отметить, что ширина и высота не постоянны. Они могут измениться при выполнении множества действий, таких как преобразования, объединения или установка кода за пределами карты.
</p>
<p>Кроме того, запомните, что координаты левого угла карты &mdash; <code>{0, 0}</code>, следовательно, координаты нижнего правого угла &mdash; {<code>width - 1, height - 1}</code>.
</p></dd>
</dl>


<hr size="6">
<a name="lib_002emap_002ecovers"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Map-Width-and-Height" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#lib_002emap_002edefuse" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#libmap" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="lib_002emap_002ecovers-1"></a>
<h3 class="subsection">12.4.15 lib.map.covers</h3>
<a name="index-lib_002emap_002ecovers"></a>

<p><code>covers</code> проверяет находится ли позиция в пределах карты.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><i>result</i> = <i>mymap</i>:<b>covers</b>(<i>position</i>)
</p>
<p><i>result</i> = <b>lib.map.covers</b>(<i>mymap</i>, <i>position</i>)
</p>
<dl compact="compact">
<dt> <i>result</i></dt>
<dd><p>Булево значение: <code>true</code>, если <i>position</i> находится в пределах прямоугольной области, заданной точками <code>(0,0)</code> и <code>(mymap.width - 1, mymap.height - 1)</code>, в противном случае &mdash; <code>false</code>.
</p>
</dd>
<dt> <i>mymap</i></dt>
<dd><p>Карта libmap.
</p>
</dd>
<dt> <i>позиция</i></dt>
<dd><p>Позиционное значение (позиция или список из двух записей).
</p></dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">if map1:covers(po(no[&quot;mycoin&quot;]) - po(no[&quot;anchor1&quot;])) then
    wo(no[&quot;mycoin&quot;]) = ti[&quot;-&quot;]
end
</pre></td></tr></table>

</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Позиции, задаваемые значениями с плавающей запятой, обрабатываются интуитивным образом &mdash; позиция шарика, находящегося в секции, относящейся к карте, предписывает методу <code>cover</code> вернуть <code>true</code>.
</p>
<p>Чтобы получить правильную информацию о позиции мира уровня, не забывайте вычитать смещение уже отрисованной карты.
</p></dd>
</dl>


<hr size="6">
<a name="lib_002emap_002edefuse"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#lib_002emap_002ecovers" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#lib_002emap_002eextend" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#libmap" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="lib_002emap_002edefuse-1"></a>
<h3 class="subsection">12.4.16 lib.map.defuse</h3>
<a name="index-lib_002emap_002edefuse"></a>

<p><code>defuse</code> возвращает список карт с длиной кода равной единице, которые соответствуют первому, второму, n-ному символу каждого кода в каждой позиции.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><i>result</i> = <i>mymap</i>:<b>defuse</b>()
</p>
<p><i>result</i> = <b>lib.map.defuse</b>(<i>mymap</i>)
</p>
<dl compact="compact">
<dt> <i>result</i></dt>
<dd><p>Непустой список с записями в целых позициях в виде карт. Карт столько же, сколько символов в коде карты <code>mymap</code>.
</p>
</dd>
<dt> <i>mymap</i></dt>
<dd><p>Карта libmap.
</p></dd>
</dl>

</dd>
<dt> <b>Готовый пример:</b></dt>
<dd><p>Для карты
</p><table><tr><td>&nbsp;</td><td><pre class="example">mymap = wo:newMap(&quot; .&quot;, {&quot;#C# # # # # #C&quot;,
                         &quot;# w1.1# .2.2# &quot;,
                         &quot;# .1.1D3.2.2# &quot;,
                         &quot;# .1.1# .2w2# &quot;,
                         &quot;#C# # # # # #C&quot;})
</pre></td></tr></table>
<p><code>mymap:defuse()</code> вернёт список
</p><table><tr><td>&nbsp;</td><td><pre class="example">result = {map1, map2}
</pre></td></tr></table>
<p>включающий две следующие карты:
</p><table><tr><td>&nbsp;</td><td><pre class="example">map1 = wo:newMap(&quot;.&quot;, {&quot;#######&quot;,
                       &quot;#w.#..#&quot;,
                       &quot;#..D..#&quot;,
                       &quot;#..#.w#&quot;,
                       &quot;#######&quot;})
map2  = wo:newMap(&quot;.&quot;, {&quot;C     C&quot;,
                        &quot; 11 22 &quot;,
                        &quot; 11322 &quot;,
                        &quot; 11 22 &quot;,
                        &quot;C     C&quot;})
</pre></td></tr></table>

</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Коды по умолчанию для разбитых карт &mdash; это отдельные символы кода по умолчанию, полученные в соответствующей последовательности.
</p>
<p>Обратная разделению операция &mdash; <a href="#Map-Fusing">Слияние карт</a>.
</p></dd>
</dl>


<hr size="6">
<a name="lib_002emap_002eextend"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#lib_002emap_002edefuse" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#lib_002emap_002ematch" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#libmap" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="lib_002emap_002eextend-1"></a>
<h3 class="subsection">12.4.17 lib.map.extend</h3>
<a name="index-lib_002emap_002eextend"></a>

<p><code>extend</code> непосредственно изменяет карту таким образом, что она покрывает и указанную позицию. Если эта позиция уже находится в пределах карты, то ничего не происходит.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><i>mymap</i>:<b>extend</b>(<i>position</i>)
</p>
<p><b>lib.map.extend</b>(<i>mymap</i>, <i>position</i>)
</p>
<dl compact="compact">
<dt> <i>mymap</i></dt>
<dd><p>Карта libmap.
</p>
</dd>
<dt> <i>позиция</i></dt>
<dd><p>Позиционное значение (позиция, список из двух записей, подходящий объект или строка).
</p></dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">mymap:extend(po(no[&quot;mycoin1&quot;]) - po(no[&quot;anchor1&quot;]))
mymap:extend(&quot;secondanchor&quot;)
</pre></td></tr></table>

</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Отрицательные координаты просто игнорируются. Однако, если другая координата имеет хоть какой-то смысл, карта может быть расширена.
</p>
<p>Значения координат с плавающей запятой округляются до границ решётки (см. раздел <a href="#Position-Grid-Rounding">Округление позиции до границ решётки</a>).
</p></dd>
</dl>


<hr size="6">
<a name="lib_002emap_002ematch"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#lib_002emap_002eextend" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#lib_002emap_002epaste" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#libmap" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="lib_002emap_002ematch-1"></a>
<h3 class="subsection">12.4.18 lib.map.match</h3>
<a name="index-lib_002emap_002ematch"></a>

<p>Для поиска на карте шаблонов или кодов можно воспользоваться методом <code>match</code>, который возвращает список позиций решётки.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><i>result</i> = <i>mymap</i>:<b>match</b>()
</p>
<p><i>result</i> = <i>mymap</i>:<b>match</b>(<i>tilekey</i>)
</p>
<p><i>result</i> = <i>mymap</i>:<b>match</b>(<i>conditionlist</i>)
</p>
<p><i>result</i> = <i>mymap</i>:<b>match</b>({conditionlist})
</p>
<p><i>result</i> = <b>lib.map.match</b>(<i>mymap</i>, <i>conditionlist</i>)
</p>
<dl compact="compact">
<dt> <i>result</i></dt>
<dd><p>Список всех позиций, удовлетворяющих шаблону.
</p>
</dd>
<dt> <i>mymap</i></dt>
<dd><p>Карта libmap.
</p>
</dd>
<dt> <i>conditionlist</i> = condition, condition, ...</dt>
<dd><p>Список условий. Позиция удовлетворяет условию тогда и только тогда, когда выполняются все условия из <i>conditionlist </i>
</p>
</dd>
<dt> <i>condition</i> = {<i>positionlist</i>, <i>tilekey</i>, <i>tilekey</i>, ...}</dt>
<dd><p>Позиция <code>pos</code> удовлетворяет условию тогда и только тогда, когда для каждой позиции <code>relativepos</code> из списка <code>positionlist</code> код секции <code>mymap[pos + relativepos]</code> равен одному из кодов секции в списке. Если <code>pos + relativepos</code> находится за пределами карты mymap, то кодом секции выступает код по умолчанию.
</p>
</dd>
<dt> <i>tilekey</i></dt>
<dd><p>Непустая строка той же длины, что и код по умолчанию для <code>mymap</code> (без символов-заменителей).
</p>
</dd>
<dt> <i>positionlist</i></dt>
<dd><p>Единственная относительная позиция или список относительных позиций.
</p></dd>
</dl>

</dd>
<dt> <b>Готовый пример:</b></dt>
<dd><p>Для карты
</p><table><tr><td>&nbsp;</td><td><pre class="example">mymap = wo:newMap(&quot; &quot;, {&quot;#####&quot;,
                        &quot;#w# #&quot;,
                        &quot;# D #&quot;,
                        &quot;# #w#&quot;,
                        &quot;#####&quot;})
</pre></td></tr></table>
<p><code>mymap:match(&quot;#&quot;)</code> вернёт список позиций всех стен <code>&quot;#&quot;</code>, идентичен <code>mymap:match({po(0, 0), &quot;#&quot;})</code> и <code>mymap:match({{po(0, 0), &quot;#&quot;}})</code>.
</p>
<p>Можно искать все позиции <code>pos</code>, расположенные между двумя стенами:
</p><table><tr><td>&nbsp;</td><td><pre class="example">result = mymap:match({po(-1, 0), &quot;#&quot;}, {po(1, 0), &quot;#&quot;})
</pre></td></tr></table>
<p>Две позиции <code>po(-1, 0)</code> и <code>po(1, 0)</code> отсчитываются относительно возвращаемой позиции. Будет получен список позиций, включающий такие позиции, как стена в <code>{1,0}</code> (которая в действительности расположена между двумя стенами: <code>po(1, 0) + po(-1, 0)</code> и <code>po(1, 0) + po(1, 0))</code>), а кроме того и <code>{1,1}</code>. Если требуется исключить стены из позиции, нужно указать все остальные коды:
</p><table><tr><td>&nbsp;</td><td><pre class="example">result = mymap:match({po(-1, 0), &quot;#&quot;}, {po(1, 0), &quot;#&quot;}, {po(0, 0), &quot;w&quot;, &quot; &quot;, &quot;D&quot;})
</pre></td></tr></table>

<p>Наконец, <code>mymap:match()</code> вернёт все позиции карты, т.е. список позиций со всеми позициями из диапазона от <code>{0,0}</code> до <code>{mymap.width - 1, mymap.height - 1}</code>.
</p>
<p>См. также <a href="#Requesting-and-Changing-Single-Map-Entries">Запрос и изменение отдельных участков карт</a>.
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Допускается, но не приветствуется совмещение списков условий <code>match</code> в отдельном списке. Такая возможность существует для упрощения работы с автоматически создаваемыми списками условий, но ею не следует пользоваться в остальных случаях, чтобы сохранить читаемость файла уровня.
</p>
<p>В результате выполнения <code>match</code> получается отсортированным сначала по вертикали, а потом по горизонтали, т.е. результат, как правило, выглядит следующим образом:
</p><table><tr><td>&nbsp;</td><td><pre class="example">po(1, 1) .. po(1, 3) .. po(1, 4) .. po(2, 2) .. po(2, 3) .. po(5, 1)
</pre></td></tr></table>

<p>Если требуется снова вернуть список позиций в команду замены, как, например, в примере ниже
</p><table><tr><td>&nbsp;</td><td><pre class="example">mymap = wo:newMap(&quot; &quot;, {&quot;####&quot;,
                        &quot;#  #&quot;,
                        &quot;####&quot;})
mymap[mymap:match({NEIGHBORS_8, &quot;#&quot;})] = &quot;#&quot;
</pre></td></tr></table>
<p>то следует помнить, что вновь внесённые изменения не обрабатываются методом <code>match</code>, таким образом, для вышеприведённого примера, match вернёт пустой список позиций, а следовательно ни один код секции не будет изменён.
</p>
<p>Значения координат с плавающей запятой округляются до границ решётки (см. раздел <a href="#Position-Grid-Rounding">Округление позиции до границ решётки</a>).
</p></dd>
</dl>


<hr size="6">
<a name="lib_002emap_002epaste"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#lib_002emap_002ematch" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#lib_002emap_002eprint" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#libmap" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="lib_002emap_002epaste-1"></a>
<h3 class="subsection">12.4.19 lib.map.paste</h3>
<a name="index-lib_002emap_002epaste"></a>

<p><code>paste</code>, начиная с указанной позиции, копирует одну карту в другую. Эта команда работает по месту вызова, то есть вместо создания новой карты изменяется карта-получатель.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><i>map1</i>:<b>paste</b>(<i>map2</i>, <i>position</i>)
</p>
<p><b>lib.map.paste</b>(<i>map1</i>, <i>map2</i>, <i>position</i>)
</p>
<dl compact="compact">
<dt> <i>map1</i></dt>
<dd><p>Карта-получатель типа libmap.
</p>
</dd>
<dt> <i>map2</i></dt>
<dd><p>Карта libmap, которая будет скопирована в <code>map1</code>.
</p>
</dd>
<dt> <i>position</i></dt>
<dd><p>Позиционное значение (позиция, список из двух записей, действительный объект, список позиций, группа или строка). Верхняя левая позиция <code>{0, 0}</code> карты <code>map2</code> вставляется в ту же позицию (или позиции) в карте <code>map1</code>.
</p></dd>
</dl>

</dd>
<dt> <b>Готовый пример:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">map1 = wo:newMap(&quot; &quot;, {&quot;#######&quot;,
                       &quot;#w #  #&quot;,
                       &quot;#  D  #&quot;,
                       &quot;#  # w#&quot;,
                       &quot;#######&quot;})
map2 = wo:newMap(&quot;.&quot;, {&quot;F.E&quot;,
                       &quot;E.E&quot;})
</pre></td></tr></table>
<p>В такой ситуации <code>map1:paste(map2, po(1, 1) .. po(5, 3))</code> превратит map1 в:
</p><table><tr><td>&nbsp;</td><td><pre class="example">{&quot;####### &quot;,
 &quot;#F E  # &quot;,
 &quot;#E E  # &quot;,
 &quot;#  # F#E&quot;,
 &quot;#####E#E&quot;}
</pre></td></tr></table>

</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Карта-получатель при необходимости будет расширена секциями с кодом по умолчанию.
</p>
<p>Каждый код секции копируемой карты, совпадающий с кодом по умолчанию, в процессе вставки игнорируется.
</p>
<p>Значения координат с плавающей запятой округляются до границ решётки (см. раздел <a href="#Position-Grid-Rounding">Округление позиции до границ решётки</a>).
</p>
<p>Если часть карты должна быть скопирована в позицию с отрицательными координатами, будет вызвано исключение. Однако, если подобная часть в любом случае должна быть проигнорирована (из-за того, что это код по умолчанию), то отрицательные значения координат игнорируются. Например, для карты
</p><table><tr><td>&nbsp;</td><td><pre class="example">map1 = wo:newMap(&quot; &quot;, {&quot;#######&quot;,
                       &quot;#w #  #&quot;,
                       &quot;#  D  #&quot;,
                       &quot;#  # w#&quot;,
                       &quot;#######&quot;})
map2 = wo:newMap(&quot;.&quot;, {&quot;.FE&quot;,
                       &quot;.EE&quot;})
</pre></td></tr></table>
<p><code>map1:paste(map2, po(-1, 0))</code> превратит map1 в
</p><table><tr><td>&nbsp;</td><td><pre class="example">{&quot;FE#####&quot;,
 &quot;EE #  #&quot;,
 &quot;#  D  #&quot;,
 &quot;#  #  #&quot;,
 &quot;#######&quot;}
</pre></td></tr></table>
<p>а <code>map1:paste(map2, po(0, -1))</code> вызовет исключение.
</p>
<p>Передавая в качестве параметров список позиций или группу объектов, одну карту можно вставить в другую несколько раз. Порядок вставок в таком случае задаётся порядком элементов списка или группы, таким образом вторая вставка перезапишет изменения, внесённые первой.
</p></dd>
</dl>


<hr size="6">
<a name="lib_002emap_002eprint"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#lib_002emap_002epaste" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#lib_002emap_002ereplace" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#libmap" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="lib_002emap_002eprint-1"></a>
<h3 class="subsection">12.4.20 lib.map.print</h3>
<a name="index-lib_002emap_002eprint"></a>

<p><code>print</code> выводит карту на стандартное устройство вывода. Эта команда может использоваться в целях отладкиили для сопровождения или перевода уровня, но её не следует оставлять в уровне, предназначенном для выпуска.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><i>mymap</i>:<b>print</b>([<i>withXYCounts</i> [, <i>left_separator</i> [, <i>right_separator</i>]]])
</p>
<p><b>lib.map.print</b>(<i>mymap</i> [, <i>withXYCounts</i> [, <i>left_separator</i> [, <i>right_separator</i>]]])
</p>
<dl compact="compact">
<dt> <i>mymap</i></dt>
<dd><p>Карта libmap.
</p>
</dd>
<dt> <i>withXYCounts</i></dt>
<dd><p>Булево значение, по умолчанию <code>false</code>.
</p>
</dd>
<dt> <i>left_separator</i>, <i>right_separator</i></dt>
<dd><p>Строки, выводимые слева и справа от карты, по умолчанию пусты.
</p></dd>
</dl>

</dd>
<dt> <b>Готовый пример:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">mymap = wo:newMap(&quot; &quot;, {&quot;#######&quot;,
                        &quot;#w #  #&quot;,
                        &quot;#  D  #&quot;,
                        &quot;#  # w#&quot;,
                        &quot;#######&quot;})
</pre></td></tr></table>
<p>Для такой карты <code>mymap:print(true, &quot; -&gt; &quot;, &quot;|&quot;)</code> выведет на стандартное устройство вывода следующую информацию:
</p><table><tr><td>&nbsp;</td><td><pre class="example">  -&gt; 0123456|
0 -&gt; #######|
1 -&gt; #w #  #|
2 -&gt; #  D  #|
3 -&gt; #  # w#|
4 -&gt; #######|
</pre></td></tr></table>

</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>При использовании карт, размеры которых более чем в десять раз превышают размеры их кодов, подписи по оси x будут отображать, только последние цифры координаты по оси x.
</p>
<p>Если между колонками требуется вставить строки, то можно слить карту с предпочтительным символом, например так: <code>(mymap * &quot;|&quot;):print(...)</code>.
</p>
<p>В принципе, <code>print</code> можно использовать для создания файла карты уровня, при условии предоставления подходящих разделителей:
</p><table><tr><td>&nbsp;</td><td><pre class="example">mymap:print(false, &quot;    \&quot;&quot;, &quot;\&quot;,&quot;)
</pre></td></tr></table>
</dd>
</dl>


<hr size="6">
<a name="lib_002emap_002ereplace"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#lib_002emap_002eprint" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#lib_002emap_002ereplace_005foutside" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#libmap" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="lib_002emap_002ereplace-1"></a>
<h3 class="subsection">12.4.21 lib.map.replace</h3>
<a name="index-lib_002emap_002ereplace"></a>

<p><code>replace</code> заменяет все отдельные коды секций по их месту вхождения в карту на коды других секций.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><i>mymap</i>:<b>replace</b>(<i>oldkey</i> [, <i>newkey</i>])
</p>
<p><b>lib.map.replace</b>(<i>mymap</i>, <i>oldkey</i> [, <i>newkey</i>])
</p>
<dl compact="compact">
<dt> <i>mymap</i></dt>
<dd><p>Карта libmap.
</p>
</dd>
<dt> <i>oldkey</i></dt>
<dd><p>Непустая строка той же длины, что и код по умолчанию для карты <code>mymap</code>.
</p>
</dd>
<dt> <i>newkey</i></dt>
<dd><p>Непустая строка той же длины, что и код по умолчанию для карты <code>mymap</code>, которая служит заменой <code>oldkey</code>. По умолчанию код замены совпадает с самим кодом по умолчанию.
</p></dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">mymap:replace(&quot;#&quot;, &quot;-&quot;)
</pre></td></tr></table>
<p>изменит <code>mymap</code> так, чтобы каждый символ <code>&quot;#&quot;</code> был заменён на <code>&quot;-&quot;</code>. Если опущен <code>&quot;-&quot;</code>, то вместо него каждый <code>&quot;#&quot;</code> будет заменён на код по умолчанию.
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>&lsquo;<samp>mymap:replace(tile1, tile2)</samp>&rsquo; эквивалентно
</p><table><tr><td>&nbsp;</td><td><pre class="example">mymap[mymap:match(tile1)] = tile2 или mymap.defaultkey
</pre></td></tr></table>
<p>но быстрее, поскольку в процессе работы не создаётся список позиций (см. раздел <a href="#lib_002emap_002ematch">lib.map.match</a>).
</p>
<p>См. также <a href="#lib_002emap_002ereplace_005foutside">lib.map.replace_outside</a> и <a href="#Requesting-and-Changing-Single-Map-Entries">Запрос и изменение отдельных участков карт</a>.
</p></dd>
</dl>


<hr size="6">
<a name="lib_002emap_002ereplace_005foutside"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#lib_002emap_002ereplace" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#lib_002emap_002esub" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#libmap" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="lib_002emap_002ereplace_005foutside-1"></a>
<h3 class="subsection">12.4.22 lib.map.replace_outside</h3>
<a name="index-lib_002emap_002ereplace_005foutside"></a>

<p><code>replace_outside</code> &mdash; довольно специфичная команда, используемая для замены всех вхождений кода секции, на пути которых к краю карты лежат секции с другим кодом секции. Замена происходит в той же карте, то есть новая карта не создаётся и не возвращается.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><i>mymap</i>:<b>replace_outside</b>(<i>oldkey</i> [, <i>newkey</i>])
</p>
<p><b>lib.map.replace_outside</b>(<i>mymap</i>, <i>oldkey</i> [, <i>newkey</i>])
</p>
<dl compact="compact">
<dt> <i>mymap</i></dt>
<dd><p>Карта libmap.
</p>
</dd>
<dt> <i>oldkey</i></dt>
<dd><p>Непустая строка той же длины, что и код по умолчанию для карты <code>mymap</code>.
</p>
</dd>
<dt> <i>newkey</i></dt>
<dd><p>Непустая строка той же длины, что и код по умолчанию для карты <code>mymap</code>, которая служит заменой <code>oldkey</code>. По умолчанию код замены совпадает с самим кодом по умолчанию.
</p></dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><p>См. раздел <a href="#Other-Map-Tasks">Другие операции с картами</a>.
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p><code>replace_outside</code> совмещает в себе <a href="#lib_002emap_002ereplace">lib.map.replace</a> и <a href="#lib_002emap_002etrim">lib.map.trim</a>. Это единственный способ работать с зоной у границ карты, а чтобы использовать все его возможности, его можно совмещать с <a href="#lib_002emap_002ematch">lib.map.match</a> и <a href="#lib_002emap_002etrim">lib.map.trim</a>.
</p>
<p>Из-за своей рекурсивной природы, старый и новый коды должны отличаться; в отличие от ситуации с <a href="#lib_002emap_002ereplace">lib.map.replace</a>, идентичные коды секций не игнорируются, а вызывают исключения с сообщением об ошибке.
</p></dd>
</dl>


<hr size="6">
<a name="lib_002emap_002esub"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#lib_002emap_002ereplace_005foutside" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#lib_002emap_002etrim" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#libmap" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="lib_002emap_002esub-1"></a>
<h3 class="subsection">12.4.23 lib.map.sub</h3>
<a name="index-lib_002emap_002esub"></a>

<p>В качестве новой карты <code>sub</code> возвращает копию прямоугольной области карты.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><i>submap</i> = <i>mymap</i>:<b>sub</b>(<i>upperleft</i>, <i>lowerright</i>)
</p>
<p><i>submap</i> = <i>mymap</i>:<b>sub</b>(<i>upperleft</i>, <i>width</i>, <i>height</i>)
</p>
<p><i>submap</i> = <b>lib.map.sub</b>(<i>mymap</i>, <i>upperleft</i>, <i>lowerright</i>)
</p>
<p><i>submap</i> = <b>lib.map.sub</b>(<i>mymap</i>, <i>upperleft</i>, <i>width</i>, <i>height</i>)
</p>
<dl compact="compact">
<dt> <i>submap</i></dt>
<dd><p>Карта libmap, прямоугольная область <code>mymap</code>.
</p>
</dd>
<dt> <i>mymap</i></dt>
<dd><p>Карта libmap.
</p>
</dd>
<dt> <i>upperleft</i>, <i>lowerright</i></dt>
<dd><p>Позиционные значения (позиция, существующий объект, список из двух записей, имя именованной позиции).
</p>
</dd>
<dt> <i>width</i>, <i>height</i></dt>
<dd><p>Положительные целые числа.
</p></dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><p>См. раздел <a href="#Other-Map-Tasks">Другие операции с картами</a>.
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Если нижний правый угол перекрывает область <code>mymap</code>, то полученная <code>submap</code> всё ещё будет прямоугольной областью карты <code>mymap</code>, то есть, ширина и высота могут быть меньше указанных аргументов. Чтобы быть уверенным, что будет заполнена вся ширина и высота, пользуйтесь командой <code>submap:extend(width, height)</code>.
</p>
<p>Позиции с дробными координатами округляются до позиций границ решётки, а координаты нижнего правого угла не могут быть меньше, чем у верхнего левого, иначе будет вызвано исключение с ошибкой.
</p>
<p>Код по умолчанию подкарты совпадает с кодом по умолчанию первоначальной карты.
</p>
<p>Координаты верхнего левого угла подкарты, конечно же, <code>{0,0}</code>, то есть, координаты смещаются соответствующим образом.
</p></dd>
</dl>


<hr size="6">
<a name="lib_002emap_002etrim"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#lib_002emap_002esub" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Map-Transformation-Index-and-MAP_005fALL" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#libmap" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="lib_002emap_002etrim-1"></a>
<h3 class="subsection">12.4.24 lib.map.trim</h3>
<a name="index-lib_002emap_002etrim"></a>

<p>В качестве новой карты, <code>trim</code> возвращает наименьший прямоугольный участок карты, у которого граница состоит только из секций с указанным кодом, т.о. trim вырезает из первоначальной карты прямоугольный участок, ограниченный с севера, востока, юга и запада.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><i>trimmedmap</i> = <i>mymap</i>:<b>trim</b>([<i>tilekey</i>])
</p>
<p><i>trimmedmap</i> = <b>lib.map.trim</b>(<i>mymap</i> [, <i>tilekey</i>])
</p>
<dl compact="compact">
<dt> <i>trimmedmap</i></dt>
<dd><p>Карта libmap, урезанная копия <code>mymap</code>.
</p>
</dd>
<dt> <i>mymap</i></dt>
<dd><p>Карта libmap.
</p>
</dd>
<dt> <i>tilekey</i></dt>
<dd><p>Непустая строка той же длины, что и у кода по умолчанию. Если опущена, то используется код по умолчанию.
</p></dd>
</dl>

</dd>
<dt> <b>Готовый пример:</b></dt>
<dd><p>Для следующей карты:
</p><table><tr><td>&nbsp;</td><td><pre class="example">mymap = wo:newMap(&quot; &quot;, {&quot;#######&quot;,
                        &quot;#w #  #&quot;,
                        &quot;#  D  #&quot;,
                        &quot;#  # w#&quot;,
                        &quot;#######&quot;})
</pre></td></tr></table>
<p>Обрезание с использованием &lsquo;<samp>mymap:trim()</samp>&rsquo; вернёт точную копию исходной карты, а &lsquo;<samp>mymap:trim(&quot;#&quot;)</samp>&rsquo; вернёт следующую карту:
</p><table><tr><td>&nbsp;</td><td><pre class="example">{&quot;w #  &quot;,
 &quot;  D  &quot;,
 &quot;  # w&quot;})
</pre></td></tr></table>

</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>В качестве кода по умолчанию для урезанной карты используется код по умолчанию исходной карты.
</p>
<p>Если исходная карта состоит только из урезанного кода, то <code>trim</code> возвращает карту размера 1x1 с одним единственным кодом и кодом по умолчанию исходной карты.
</p></dd>
</dl>


<hr size="6">
<a name="Map-Transformation-Index-and-MAP_005fALL"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#lib_002emap_002etrim" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Map-Transformation-Composition-and-Powers" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#libmap" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Map-Transformation-Index-and-MAP_005fALL-1"></a>
<h3 class="subsection">12.4.25 Индекс преобразования карты и MAP_ALL</h3>

<p>Все восемь констант преобразования (см. разделы <a href="#map-read-directions">Направления чтения карты</a>, <a href="#Rotating-and-Mirroring-Maps">Вращение и отражение карт</a>, <a href="#Map-Transformation">Преобразование карты</a>) помимо прочего заносятся в таблицу <code>MAP_ALL</code>, т.о. к каждому из них можно последовательно обратиться, просто вызвав <code>ipairs(MAP_ALL)</code>. <code>MAP_ALL</code> можно использовать, не загружая libmap.
</p>
<p>У каждого преобразования есть поле <code>&quot;index&quot;</code>, которое возвращает число, которое ассоциировано с преобразованием в <code>MAP_ALL</code>. <code>&quot;index&quot;</code> также можно использовать, не загружая libmap.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><b>MAP_ALL</b> = {<b>MAP_IDENT</b>, <b>MAP_ROT_CW</b>, <b>MAP_ROT_180</b>, <b>MAP_ROT_CCW</b>, <b>MAP_FLIP_BACKSLASH</b>, <b>MAP_FLIP_HORIZONTAL</b>, <b>MAP_FLIP_SLASH</b>, <b>MAP_FLIP_VERTICAL</b>}
</p>
<p><b>transformation_index</b> = <i>maptransformation</i>.<b>index</b>
</p>
<dl compact="compact">
<dt> <i>transformation_index</i></dt>
<dd><p>Целое число между 1 и 8.
</p>
</dd>
<dt> <i>maptransformation</i></dt>
<dd><p>Преобразование карты.
</p></dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">MAP_ALL[MAP_ROT_CW.index] == MAP_ROT_CW
</pre></td></tr></table>

</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Преобразования карт не сохраняются как атрибуты объектов, например, следующий участок уровня вызовет ошибку:
</p><table><tr><td>&nbsp;</td><td><pre class="example">no[&quot;stone_a&quot;][&quot;_mytrafo&quot;] = MAP_ROT_CCW
</pre></td></tr></table>
<p>Вместо этого, следует использовать <code>index</code> и получать правильное преобразование из <code>MAP_ALL</code>:
</p><table><tr><td>&nbsp;</td><td><pre class="example">no[&quot;stone_a&quot;][&quot;_mytrafo&quot;] = MAP_ROT_CCW.index
...
oldtrafo = MAP_ALL[no[&quot;stone_a&quot;][&quot;_mytrafo&quot;]]
</pre></td></tr></table>
</dd>
</dl>


<hr size="6">
<a name="Map-Transformation-Composition-and-Powers"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Map-Transformation-Index-and-MAP_005fALL" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Map-Transformation-Inverse" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#libmap" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Map-Transformation-Composition-and-Powers-1"></a>
<h3 class="subsection">12.4.26 Произведение и возведение в степень преобразований карт</h3>
<a name="index-lib_002emap_002etransformation_005fcompose"></a> <a name="index-lib_002emap_002etransformation_005fpower"></a>

<p>Как только загрузится библиотека libmap, становится возможным перемножать константы преобразований (см. разделы <a href="#map-read-directions">Направления чтения карты</a>, <a href="#Rotating-and-Mirroring-Maps">Вращение и отражение карт</a>, <a href="#Map-Transformation">Преобразование карты</a>) согласно их непосредственному влиянию на карту. Произведение возвращается операторами &lsquo;<samp>*</samp>&rsquo; и &lsquo;<samp>^</samp>&rsquo;.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><i>composition</i> = <i>maptransformation1</i> <b>*</b> <i>maptransformation2</i>
</p>
<p><i>composition</i> = <i>maptransformation1</i> <b>^</b> <i>maptransformation2</i>
</p>
<p><i>composition</i> = <b>lib.map.transformation_compose</b>(<i>maptransformation1</i>, <i>maptransformation2</i>)
</p>
<p><i>composition</i> = <b>lib.map.transformation_power</b>(<i>maptransformation1</i>, <i>maptransformation2</i>)
</p>
<p><i>power</i> = <i>maptransformation</i> <b>^</b> <i>exponent</i>
</p>
<p><i>power</i> = <b>lib.map.transformation_power</b>(<i>maptransformation</i>, <i>exponent</i>)
</p>
<dl compact="compact">
<dt> <i>composition</i></dt>
<dd><p>Результат перемножения двух преобразований карты.
</p>
</dd>
<dt> <i>maptransformation1</i>, <i>maptransformation2</i>, <i>maptransformation</i></dt>
<dd><p>Преобразования карты.
</p>
</dd>
<dt> <i>power</i></dt>
<dd><p><code>exponent</code>-ная степень <code>maptransformation</code> (опять таки произведение карты).
</p>
</dd>
<dt> <i>exponent</i></dt>
<dd><p>Целое число.
</p></dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">new_transformation = (MAP_ROT_CW * MAP_FLIP_HORIZONTAL) ^ 2
another_transformation = (new_transformation ^ MAP_ROT_180) ^ (-1)
</pre></td></tr></table>

</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Восемь возможных преобразований карты образуют математическую группу, двугранную группу 8-го порядка. Произведение любых двух преобразований карты соответственно порождает ещё одно из восьми преобразований карт. Произведение преобразования карты <i>n</i>-ной степени представляет собой <i>n</i> произведений таких преобразований. Для двугранной группы, каждая 4-ая степень возвращает исходный элемент. Это свойство применяется при вычислении степени, поэтому использование больших чисел в качестве экспоненты не приводит к значительному снижению производительности.
</p>
<p>Умножение на <code>MAP_IDENT</code> не изменяет значение; эффект сходен со сложением числа с нулём или умножением на единицу.
</p>
<p>Сохраняя терминологию групп, оператор &lsquo;<samp>^</samp>&rsquo;, стоящий между преобразованиями карты, вместо умножения должен совершать возведение в степень. Однако, чтобы сохранить ассоциативность выражений, подобных приведённым ниже, он представляет собой синоним &lsquo;<samp>*</samp>&rsquo;:
</p><table><tr><td>&nbsp;</td><td><pre class="example">new_map = old_map ^ MAP_ROT_CCW ^ MAP_FLIP_VERTICAL
</pre></td></tr></table>
<p>(Не забывайте, что Lua выполняет оператор &lsquo;<samp>^</samp>&rsquo; начиная справа.)
</p>
<p>Карту можно обратить возведением в степень <code>-1</code>, а также при помощи оператора &lsquo;<samp>-</samp>&rsquo;, подробности см. в разделе <a href="#Map-Transformation-Inverse">Обратное преобразование карты</a>.
</p></dd>
</dl>


<hr size="6">
<a name="Map-Transformation-Inverse"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Map-Transformation-Composition-and-Powers" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Random-Map-Transformations" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#libmap" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Map-Transformation-Inverse-1"></a>
<h3 class="subsection">12.4.27 Обратное преобразование карты</h3>

<p>У констант преобразования (см. разделы <a href="#map-read-directions">Направления чтения карты</a>, <a href="#Rotating-and-Mirroring-Maps">Вращение и отражение карт</a>, <a href="#Map-Transformation">Преобразование карты</a>) есть обратные им преобразования, т.е. преобразования карты, которые изменяют их действие с точностью до наоборот. Такие обратные преобразования возвращаются оператором &lsquo;<samp>-</samp>&rsquo;.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><i>inverse</i> = <b>-</b><i>maptransformation</i>
</p>
<p><i>inverse</i> = <b>lib.map.transformation_inverse</b>(<i>maptransformation</i>)
</p>
<dl compact="compact">
<dt> <i>inverse</i></dt>
<dd><p>Преобразование карты, обратное <code>maptransformation</code>.
</p>
</dd>
<dt> <i>maptransformation</i></dt>
<dd><p>Преобразование карты.
</p></dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">reverse_transformation = -MAP_ROT_CW
</pre></td></tr></table>
<p>В этом случае <code>reverse_transformation</code> соответствует <code>MAP_ROT_CCW</code>, поскольку их перемножение <code>MAP_ROT_CW * MAP_ROT_CCW</code> соответствует тривиальному (тождественному) преобразованию <code>MAP_IDENT</code>.
</p>
</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Восемь возможных преобразований карты образуют математическую группу, двугранную группу 8-го порядка. Любое обратное преобразование, соответственно, порождает ещё одно из восьми преобразований карт. Произведение любого преобразование карты на обратное ему возвращает в качестве результата <code>MAP_IDENT</code>. Однако в двугранной группе 8-го порядка только у двух элементов есть обратные преобразования, которые по сути не являются обратными: это два поворота на 90 градусов.
</p>
<p>Сохраняя терминологию групп, обратный оператор обозначается как &lsquo;<samp>^ (-1)</samp>&rsquo; и работает так же (см. раздел <a href="#Map-Transformation-Composition-and-Powers">Произведение и возведение в степень преобразований карт</a>).
</p></dd>
</dl>


<hr size="6">
<a name="Random-Map-Transformations"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Map-Transformation-Inverse" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#libimport" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#libmap" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Random-Map-Transformations-1"></a>
<h3 class="subsection">12.4.28 Случайные преобразования карты</h3>
<a name="index-lib_002emap_002erandom_005ftransformation"></a>

<p>Кроме того, libmap предоставляет функцию <code>lib.map.random_transformation()</code>, которая случайным образом выбирает одно из восьми преобразований.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><i>randomtransformation</i> = <b>lib.map.random_transformation</b>()
</p>
<dl compact="compact">
<dt> <i>randomtransformation</i></dt>
<dd><p>Преобразование карты, выбранное случайным образом из <code>MAP_ALL</code>.
</p></dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">wo:drawMap(ti, po(5, 4), mymap, lib.map.random_transformation())
</pre></td></tr></table>

</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>При использовании случайных преобразований карт следует помнить, что четыре преобразования меняют ширину и высоту карт, к которым они применяются.
</p></dd>
</dl>


<hr size="6">
<a name="libimport"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Random-Map-Transformations" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#lib_002eimport_002eunpack_005fmultilevel" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="libimport-1"></a>
<h2 class="section">12.5 libimport</h2>
<a name="index-lib_002eimport"></a>

<p>libimport предназначен для парсинга файлов уровней от других игр или форматов и, как правило, возвращает карты <a href="#libmap">libmap</a>. Здесь слово &quot;уровень&quot; обозначает строку, задающую уровень другой игры. Строка &quot;monolevel&quot; соответствует отдельному уровню с дополнительной информацией, такой как название или имена создателей. Строка &quot;multilevel&quot; соответствует одному или нескольким отдельным уровням. &quot;map&quot; &mdash; это карта в терминологии libmap, другими словами, уровень Enigma.
</p>
<p>Кроме приведённых ниже функций, в состав lib.import входят небольшие подпрограммы: &lsquo;<samp>lib.import.string_replace</samp>&rsquo;, которая представляет собой оболочку для <code>string.gsub</code>, и &lsquo;<samp>lib.import.string_remove_multiples</samp>&rsquo;, которая удаляет несколько вхождений строки из другой строки.
</p>
<p>Эта библиотека описана в соответствии с выпуском 1.
</p>
<p>Её можно загрузить, добавив к элементу метаданных XML <a href="#g_t_003ccompatibility_003e">&lt;compatibility&gt;</a> элемент &lsquo;<samp>dependency</samp>&rsquo;, как указано ниже:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">  &lt;<i>el</i>:<b>dependency</b> <i>el</i>:<b>path</b>=&quot;<var>lib/libimport</var>&quot; <i>el</i>:<b>id</b>=&quot;<var>lib/libimport</var>&quot; <i>el</i>:<b>release</b>=&quot;<var>1</var>&quot; <i>el</i>:<b>preload</b>=&quot;<var>true</var>&quot;/&gt;
</pre></td></tr></table>

<p>Библиотека автоматически подгружает <a href="#libmap">libmap</a> и <a href="#liblua">liblua</a>.
</p>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#lib_002eimport_002eunpack_005fmultilevel">12.5.1 lib.import.unpack_multilevel</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        Извлекает из набора уровней один уровень.
</td></tr>
<tr><td align="left" valign="top"><a href="#lib_002eimport_002euncompress_005frle">12.5.2 lib.import.uncompress_rle</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Расшифровка кодирования длин серий.
</td></tr>
<tr><td align="left" valign="top"><a href="#lib_002eimport_002elevel_005fto_005fmap">12.5.3 lib.import.level_to_map</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">             Превращает уровень в карту.
</td></tr>
<tr><td align="left" valign="top"><a href="#lib_002eimport_002emap_005fsokoban">12.5.4 lib.import.map_sokoban</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">              Превращает уровень из Сокобана в карту.
</td></tr>
<tr><td align="left" valign="top"><a href="#lib_002eimport_002emap_005fwanderer">12.5.5 lib.import.map_wanderer</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">             Превращает уровень из Wanderer в карту.
</td></tr>
</table>


<hr size="6">
<a name="lib_002eimport_002eunpack_005fmultilevel"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#libimport" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#lib_002eimport_002euncompress_005frle" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#libimport" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="lib_002eimport_002eunpack_005fmultilevel-1"></a>
<h3 class="subsection">12.5.1 lib.import.unpack_multilevel</h3>
<a name="index-lib_002eimport_002eunpack_005fmultilevel"></a>

<p>&lsquo;<samp>unpack_multilevel</samp>&rsquo; извлекает уровень из строки, включающей несколько уровней. Для этого необходимо регулярное выражение, описывающее строку отдельного уровня.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><b>lib.import.unpack_multilevel</b>(<i>multilevel</i>, <i>sublevel_number</i>, <i>format</i>)
</p>
<dl compact="compact">
<dt> <i>multilevel</i></dt>
<dd><p>Строка набора уровней.
</p>
</dd>
<dt> <i>sublevel_number</i></dt>
<dd><p>Номер уровня, который нужно извлечь из <code>multilevel</code>. Номер первого уровня &mdash; &lsquo;<samp>1</samp>&rsquo;. Если не указан (указан <code>nil</code>), то берётся &lsquo;<samp>1</samp>&rsquo;
</p>
</dd>
<dt> <i>format</i></dt>
<dd><p>Строка, указывающая на запись в &lsquo;<samp>lib.import.line_regexp</samp>&rsquo;. На данный момент поддерживаются только &lsquo;<samp>sokoban</samp>&rsquo; и &lsquo;<samp>wanderer</samp>&rsquo;. Тем не менее, при необходимости, в &lsquo;<samp>lib.import.line_regexp</samp>&rsquo; можно добавить новые записи.
</p></dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">level_four = lib.import.unpack_multilevel(large_string, 4, &quot;sokoban&quot;)
</pre></td></tr></table>

</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Уровень, извлечённый с помощью <code>unpack_multilevel</code>, всё ещё нужно преобразовать в формат, понятный Enigma. Уровень представляет собой строку, и строки уровня определяются по символам окончания строки, которые могут значительно отличаться. В противовес такому поведению, карта Enigma представляет собой список строк, каждая из которых является записью таблицы. Таким образом, необходимо как-то преобразовать хотя бы окончания строк.
</p></dd>
</dl>


<hr size="6">
<a name="lib_002eimport_002euncompress_005frle"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#lib_002eimport_002eunpack_005fmultilevel" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#lib_002eimport_002elevel_005fto_005fmap" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#libimport" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="lib_002eimport_002euncompress_005frle-1"></a>
<h3 class="subsection">12.5.2 lib.import.uncompress_rle</h3>
<a name="index-lib_002eimport_002euncompress_005frle"></a>

<p>&lsquo;<samp>uncompress_rle</samp>&rsquo; в качестве параметра получает строку, а возвращает её расшифрованный вариант без кодирования длин серий.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><b>lib.import.uncompress_rle</b>(<i>level</i>, <i>attribs</i>)
</p>
<dl compact="compact">
<dt> <i>level</i></dt>
<dd><p>Строка уровня.
</p>
</dd>
<dt> <i>attribs</i></dt>
<dd><p>Список параметров. На данный момент поддерживается только &lsquo;<samp>error_on_multiple</samp>&rsquo;.
</p></dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">uncompressed = lib.import.uncompress_rle(compressed, {error_on_multiple = &quot;\n&quot;})
</pre></td></tr></table>

</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Уровни, как правило, состоят из длинных строк с повторяющимися символами, например стенами или пустыми клетками. Чтобы уменьшить объём данных, они иногда подсчитываются и заменяются на общее количество и один экземпляр повторяющегося символа. Такой подход называется &quot;кодированием длин серий&quot; (&quot;run-length encoding&quot; или RLE).
</p><table><tr><td>&nbsp;</td><td><pre class="example">&quot;############  A #####BB#&quot; сокращается до &quot;12#2 A5#2B#&quot;
</pre></td></tr></table>
<p>Однако нет смысла повторять некоторые символы, например символы окончания строки. Чтобы выдавать ошибку при попытке во время расшифровки повторно завершить строку, её можно передать в атрибут &lsquo;<samp>error_on_multiple</samp>&rsquo;. Тогда любой символ в этой строке не будет повторяться. Следует помнить, что символ окончания строки в Lua представлен управляющей последовательностью &lsquo;<samp>\n</samp>&rsquo;.
</p></dd>
</dl>


<hr size="6">
<a name="lib_002eimport_002elevel_005fto_005fmap"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#lib_002eimport_002euncompress_005frle" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#lib_002eimport_002emap_005fsokoban" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#libimport" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="lib_002eimport_002elevel_005fto_005fmap-1"></a>
<h3 class="subsection">12.5.3 lib.import.level_to_map</h3>
<a name="index-lib_002eimport_002elevel_005fto_005fmap"></a>

<p>&lsquo;<samp>level_to_map</samp>&rsquo; разбивает строку уровня на список строк, которые затем преобразуются в карту <a href="#libmap">libmap</a>.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><b>lib.import.level_to_map</b>(<i>level</i>, <i>line_ending</i>, <i>default_key</i>)
</p>
<dl compact="compact">
<dt> <i>level</i></dt>
<dd><p>Строка уровня.
</p>
</dd>
<dt> <i>line_ending</i></dt>
<dd><p>Строка, задающая окончание отдельной строки. По умолчанию: &lsquo;<samp>\n</samp>&rsquo;
</p>
</dd>
<dt> <i>default_key</i></dt>
<dd><p>Код по умолчанию для возвращаемой карты. По умолчанию: &lsquo;<samp> </samp>&rsquo;
</p></dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">mymap = lib.import.level_to_map(level, &quot;|&quot;, &quot; &quot;)
</pre></td></tr></table>

</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Несколько окончаний строки интерпретируются как несколько строк (в которых последние строки заполнены кодом по умолчанию).
</p>
<p>Необходимо удостовериться, что последняя строка уровня заканчивается правильным символом завершения строки в единственном экземпляре. Иначе возвращаемая карта может оказаться слишком маленькой или слишком большой.
</p></dd>
</dl>


<hr size="6">
<a name="lib_002eimport_002emap_005fsokoban"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#lib_002eimport_002elevel_005fto_005fmap" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#lib_002eimport_002emap_005fwanderer" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#libimport" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="lib_002eimport_002emap_005fsokoban-1"></a>
<h3 class="subsection">12.5.4 lib.import.map_sokoban</h3>
<a name="index-lib_002eimport_002emap_005fsokoban"></a>

<p>&lsquo;<samp>map_sokoban</samp>&rsquo; получает в качестве параметра набор уровней Сокобана, а возвращает преображённую карту <a href="#libmap">libmap</a>.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><b>lib.import.map_sokoban</b>(<i>multilevel</i>, <i>sublevel_number</i>, <i>keylength_one</i>)
</p>
<dl compact="compact">
<dt> <i>multilevel</i></dt>
<dd><p>Строка набора уровней.
</p>
</dd>
<dt> <i>sublevel_number</i></dt>
<dd><p>Номер уровня, который следует извлечь. Номер первого уровня &mdash; &lsquo;<samp>1</samp>&rsquo;. По умолчанию: &lsquo;<samp>1</samp>&rsquo;
</p>
</dd>
<dt> <i>keylength_one</i></dt>
<dd><p>Булево значение. Если <code>false</code>, то длина кода возвращаемой карты равна двум. В противном случае &mdash; единице. По умолчанию: &lsquo;<samp>false</samp>&rsquo;
</p></dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">map_four = lib.import.map_sokoban(multilevel, 4, true)
</pre></td></tr></table>

</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Файлы уровней Сокобана могут значительно отличаться &mdash; в них могут использоваться кодирование длин серий и многоуровневые файлы. Иногда в качестве символа завершения строки используется &lsquo;<samp>|</samp>&rsquo;, порой вместе с &lsquo;<samp>\n</samp>&rsquo;. И &lsquo;<samp> </samp>&rsquo;, и &lsquo;<samp>_</samp>&rsquo;, и даже &lsquo;<samp>-</samp>&rsquo; могут считаться пробелом. Иногда контур заполнен сначала &lsquo;<samp> </samp>&rsquo;, а затем &lsquo;<samp>#</samp>&rsquo;. Наконец, может меняться толщина линии. Здесь используется обобщённый вариант, который включает уровни чесобана (ориг. &quot;chessoban&quot; &mdash; шахматная разновидность уровней Сокобана). Разрешается использовать следующие символы:
</p><table><tr><td>&nbsp;</td><td><pre class="example">   - _ пробел пробел
   #          стена
   .          цель
   $ *        ящик, ящик-цель
   n N        st_chess, st_chess-цель
   @ +        игрок, игрок-цель
</pre></td></tr></table>
<p>Возвращаемая карта будет использовать &lsquo;<samp> </samp>&rsquo; для внутренних пробелов, &lsquo;<samp>-</samp>&rsquo; для внешних, а кодом по умолчанию будет &lsquo;<samp> </samp>&rsquo;.
</p>
<p>При выборе &lsquo;<samp>keylength_one = true</samp>&rsquo; возвращаемая карта будет использовать приведённый выше набор символов. В противном случае, длина кода возвращаемой карты будет равна двум, а символы &lsquo;<samp>*</samp>&rsquo;, &lsquo;<samp>N</samp>&rsquo; и &lsquo;<samp>+</samp>&rsquo; будут преобразованы соответственно в &lsquo;<samp>$.</samp>&rsquo;, &lsquo;<samp>n.</samp>&rsquo;, and &lsquo;<samp>@.</samp>&rsquo; , то время как остальные коды превратятся в &lsquo;<samp>  </samp>&rsquo;, &lsquo;<samp>- </samp>&rsquo;, &lsquo;<samp># </samp>&rsquo;, &lsquo;<samp> .</samp>&rsquo;, &lsquo;<samp>$ </samp>&rsquo;, &lsquo;<samp>n </samp>&rsquo; и &lsquo;<samp>@ </samp>&rsquo;. После этого можно легко нарисовать карту с помощью <a href="#res_002ecomposer">res.composer</a>.
</p>
<p>Следует помнить, что возвращаемая карта использует внутренние пробелы &lsquo;<samp> </samp>&rsquo; или &lsquo;<samp>  </samp> в качестве кодов по умолчанию. Поэтому, если нужно вставить одну карту в другую (см. раздел <a href="#Connecting-Two-Maps">Соединение двух карт</a>), предварительно придётся сделать кодом по умолчанию &lsquo;<samp>-</samp>&rsquo; или &lsquo;<samp>- </samp>&rsquo;, чтобы добиться хорошего результата.
</p></dd>
</dl>

<hr size="6">
<a name="lib_002eimport_002emap_005fwanderer"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#lib_002eimport_002emap_005fsokoban" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#libsoko" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#libimport" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="lib_002eimport_002emap_005fwanderer-1"></a>
<h3 class="subsection">12.5.5 lib.import.map_wanderer</h3>
<a name="index-lib_002eimport_002emap_005fwanderer"></a>

<p>&lsquo;<samp>map_wanderer</samp>&rsquo; получает в качестве параметра отдельный уровень игры Wanderer, а возвращает карту <a href="#libmap">libmap</a>. Следует отметить, что в Enigma пока нет всех объектов, необходимых для симуляции игры Wanderer.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><b>lib.import.map_wanderer</b>(<i>monolevel</i>)
</p>
<dl compact="compact">
<dt> <i>monolevel</i></dt>
<dd><p>Строка отдельного уровня.
</p></dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">mymap = lib.import.map_wanderer(monolevel)
</pre></td></tr></table>

</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Wanderer &mdash; это игра, первоначально созданная Стивеном Шипвеем (Steven Shipway) в 1988 году. Файлы уровней представляют собой неупакованные отдельные уровни фиксированного размера. После самого уровня следует короткое описание (название/автор/адрес электронной почты), размещающееся в одной строке, или строка, заполненная символами &lsquo;<samp>#</samp>&rsquo;. Последняя строка может состоять из числа. Уровень Wanderer может оперировать следующими символами (информация получена из редактора Wanderer):
</p><table><tr><td>&nbsp;</td><td><pre class="example">   : _ #      земля, камень, неразрушимый камень
   * - space  сокровище, альтернативный пробел, пробел
   O &lt; &gt; ^    падающий болдер, стрелка влево, стрелка вправо, шарик
   ! + B      мина, клетка, бомба
   / \        отражатели
   T A X @    телепорт, пункт назначения, выход, начало
   M S C ~    большой монстр, монстр-ребёнок, капсула времени, нечто
</pre></td></tr></table>
<p>Из-за своей ограниченности в ширине (40) и высоте (16), уровень Wanderer не всегда окружён стенами; возможно, их придётся добавить.
</p>
<p>Следует отметить, что в Enigma не поддерживаются игровые элементы из Wanderer, поэтому на данный момент эта функция предназначается исключительно для использования разработчиками.
</p></dd>
</dl>

<hr size="6">
<a name="libsoko"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#lib_002eimport_002emap_005fwanderer" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Advanced-Features" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="libsoko-1"></a>
<h2 class="section">12.6 libsoko</h2>
<a name="index-lib_002esoko_002ecreate_005fsokoball"></a>

<p>Эта библиотека описана в соответствии с выпуском 1.
</p>
<p>Её можно загрузить, добавив к элементу метаданных XML <a href="#g_t_003ccompatibility_003e">&lt;compatibility&gt;</a> элемент &lsquo;<samp>dependency</samp>&rsquo;, как указано ниже:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">  &lt;<i>el</i>:<b>dependency</b> <i>el</i>:<b>path</b>=&quot;<var>lib/libsoko</var>&quot; <i>el</i>:<b>id</b>=&quot;<var>lib/libsoko</var>&quot; <i>el</i>:<b>release</b>=&quot;<var>1</var>&quot; <i>el</i>:<b>preload</b>=&quot;<var>true</var>&quot;/&gt;
</pre></td></tr></table>

<p>Библиотека автоматически подгружает <a href="#libimport">libimport</a>, <a href="#libmap">libmap</a>, <a href="#libmath">libmath</a> и <a href="#liblua">liblua</a>.
</p>
<p>Единственная функция использование которой в уровнях допускается, это &lsquo;<samp>lib.soko.create_sokoball</samp>&rsquo;.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><b>lib.soko.create_sokoball</b>(<i>multilevel</i>, <i>sublevel_number</i>, <i>args</i>)
</p>
<dl compact="compact">
<dt> <i>multilevel</i></dt>
<dd><p>Строка набора уровней в контексте <a href="#libimport">libimport</a>.
</p>
</dd>
<dt> <i>sublevel_number</i></dt>
<dd><p>Число, задающее номер уровня в <code>multilevel</code>. По умолчанию &lsquo;<samp>1&rsquo;</samp>.
</p>
</dd>
<dt> <i>args</i></dt>
<dd><p>Таблица, содержащая опциональную информацию для конструирования уровня, по умолчанию {}. В настоящее время поддерживаются следующие ключевые слова, при использовании любых других ключевых слов будет возвращена ошибка:
</p><dl compact="compact">
<dt> <i>design</i></dt>
<dd><p>Число или оформление таблицы (см. ниже).
</p>
</dd>
<dt> <i>maxdesign</i></dt>
<dd><p>Число (см. ниже).
</p></dd>
</dl>
</dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">lib.soko.create_sokoball(many_levels, 13, {design = 48})
lib.soko.create_sokoball(many_levels, 12, {maxdesign = MAXDESIGN[1.1]})
</pre></td></tr></table>

</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>&lsquo;<samp>create_sokoball</samp>&rsquo; создаёт из строки <code>multilevel</code> уровень сокобола (ориг. &quot;sokoball&quot; &mdash; разновидность уровня Сокобана с мячом). Строка может представлять собой набор уровней, в таком случае &lsquo;<samp>sublevel_number</samp>&rsquo; задаёт номер уровня, начиная с 1 (по умолчанию 1).
</p>
<p>Оформление можно задать параметром &lsquo;<samp>design</samp>&rsquo;. Это либо число, присутствующее в списке предустановленных оформлений из <code>libsoko_designlist.xml</code>, либо таблица с соответствующими записями оформления. Отсутствующая запись интерпретируется как запись из lib.soko_designlist.default. Если параметр &lsquo;<samp>design</samp>&rsquo; опущен, то из уровня создаётся проверочное число, однозначно* определяющее оформление по списку оформления, причем максимально допустимое число &mdash; это <code>maxdesign</code>.
</p>
<p>*Однозначно с оговоркой, что оформление может измениться при расширении списка оформления.
</p>
<p>Количество доступных оформлений в Enigma 1.1 составляет 150, что равно константе <code>MAXDESIGN[1.1]</code>. В последующих версиях игры число оформлений может увеличиться. При загрузке многоуровневого файла, в котором указано (в числовом виде) количество оформлений, превышающее количество доступных оформлений, для игры будут доступны только уровни, расчитанное число оформлений в которых поддерживается игрой; во всех других случаях будет выведено сообщение об ошибке. Однако лучше использовать константы MAXDESIGN. В таком случае, если запрошенные дизайны отсутствуют, всегда будет выведена ошибка. Константы MAXDESIGN доступны только для чтения.
</p>
<p>Если отсутствуют как аргумент оформления, так и число MAXDESIGN, то в таком случае будут использоваться оригинальные 150&nbsp;оформлений вне зависимости от того, какая версия игры была запущена.
</p>
<p>Чтобы задавать своё оформление, прочтите &lsquo;<samp>data/levels/lib/libsoko_designlist.xml</samp>&rsquo; либо используйте <a href="#libimport">libimport</a>.
</p>
<p>Возвращает ширину и высоту нового уровня Enigma.
</p></dd>
</dl>



<hr size="6">
<a name="Advanced-Features"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#libsoko" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Resolvers" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Libraries" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Extension-Development" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Advanced-Features-1"></a>
<h1 class="chapter">13. Дополнительные возможности</h1>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Resolvers">13.1 Преобразования</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">               Стандартные инструменты интерпретации участков карты
</td></tr>
<tr><td align="left" valign="top"><a href="#General-Features">13.2 Общие возможности</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        Специальные возможности различных объектов (прокрутка, вода, огонь и т. д.)
</td></tr>
<tr><td align="left" valign="top"><a href="#Tips-and-Tricks">13.3 Советы и хитрости</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         Простые шаблоны, которые можно выделить отдельно
</td></tr>
</table>

<hr size="6">
<a name="Resolvers"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Resolver-Chaining" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Extension-Development" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Resolvers-1"></a>
<h2 class="section">13.1 Преобразования</h2>

<p>В пределах мира каждая секция определяется кодом, который необходимо преобразовать к его объявлению. Это можно сделать как с помощью одного &lsquo;<samp>ti</samp>&rsquo; из хранилища секций (см. раздел <a href="#Tiles-Repository">Хранилище секций</a>), так и с помощью дополнительной цепи преобразований. В разделе <a href="#Lua-API">Lua API</a> было описано, как настроить <a href="#World">Мир</a> с помощью неизменных объявлений секций и объектов (см. раздел <a href="#Tile-and-Object-Declaration">Описание секций и объектов</a>). Теперь пришло время исследовать возможности преобразований. При создании мира (см. раздел <a href="#World-Creation">Создание мира</a>) необходимо передавать в качестве параметра высшее преобразование. Давайте рассмотрим доступные типы преобразований и как из них можно составлять цепочки.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Resolver-Chaining">13.1.1 Составление цепочек преобразований</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">  Соединение преобразований и хранилища секций
</td></tr>
<tr><td align="left" valign="top"><a href="#Custom-Resolver">13.1.2 Настраиваемое преобразование</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">    Написание собственных упрощённых преобразований
</td></tr>
<tr><td align="left" valign="top"><a href="#res_002eautotile">13.1.3 res.autotile</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       Генерирует секции по полученному шаблону определений
</td></tr>
<tr><td align="left" valign="top"><a href="#res_002ecomposer">13.1.4 res.composer</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       Собирает секции на основе заданных секций
</td></tr>
<tr><td align="left" valign="top"><a href="#res_002emaze">13.1.5 res.maze</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Генерирует произвольные узкие лабиринты
</td></tr>
<tr><td align="left" valign="top"><a href="#res_002epuzzle">13.1.6 res.puzzle</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         Генерирует секции головоломок и перемешивает получившиеся блоки головоломок
</td></tr>
<tr><td align="left" valign="top"><a href="#res_002erandom">13.1.7 res.random</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         Выбор случайных секций в заданном распределении
</td></tr>
<tr><td align="left" valign="top"><a href="#res_002etrain">13.1.8 res.train</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          Создание цепочек участков покрытия, перемещающихся по заданным рельсам
</td></tr>
</table>


<hr size="6">
<a name="Resolver-Chaining"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Resolvers" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Custom-Resolver" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Resolvers" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Extension-Development" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Resolver-Chaining-1"></a>
<h3 class="subsection">13.1.1 Составление цепочек преобразований</h3>

<p>Существует несколько полезных преобразований, которые могут упростить написание уровня или сделать доступными такие динамичные возможности, как элемент случайности, лабиринты и т.п. Каждое из них оперирует только с несколькими кодами карты мира. Преобразование даже не догадывается, что делать с остальными кодами, чтобы превратить их в описание объектов. Поэтому каждое преобразование должно быть связано с так называемым &lsquo;<samp>подпреобразованием</samp>&rsquo;. Преобразование просто перенаправляет все запросы на преобразование кодов, которые он не может обработать, своему подпреобразованию. На самом деле, в большинстве случаев, оно может перенаправить своему подпреобразованию и уже обработанные им запросы кодов, которые необходимы в процессе обработки его собственных кодов.
</p>
<p>Последним в цепочке преобразований должно быть либо использовано &lsquo;<samp>ti</samp>&rsquo; из хранилища секций (см. раздел <a href="#Tiles-Repository">Хранилище секций</a>) в качестве его подпреобразования, либо функция настраиваемого преобразования (см. раздел <a href="#Custom-Resolver">Настраиваемое преобразование</a>), которая также основывается на &lsquo;<samp>ti</samp>&rsquo;.
</p>
<p>Типичная цепочка преобразований выглядит следующим образом:
</p>

<dl compact="compact">
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example"><var>subresolver</var> = <i>res</i>.<i>random</i>(<i>ti</i>, ...)
<var>topresolver</var> = <i>res</i>.<i>composer</i>(<var>subresolver</var>)
width, height = <i>wo</i>(<var>topresolver</var>, ...)
</pre></td></tr></table>

</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Вызов каждого преобразования возвращает контекстный указатель, который следует передать преобразованию цепочки более высокого уровня. Поэтому кодирование следует начинать с создания преобразования самого низкого уровня. При создании мира (см. раздел <a href="#World-Creation">Создание мира</a>) используется указатель на преобразование наивысшего уровня.
</p>
<p>Количество преобразований, входящих в цепочку, никак не ограничивается. Но порой важен порядок преобразований. Пожалуйста, внимательно ознакомьтесь с советами по использованию преобразований, ограничениям и описанием подводных камней.
</p>
</dd>
<dt> <b>Готовый пример:</b></dt>
<dd><p>Уровень &quot;Demo Resolver Chain&quot; из пакета уровней &quot;Demolevels&quot;:
</p><table><tr><td>&nbsp;</td><td><pre class="example">ti[&quot;~&quot;] = {&quot;fl_water&quot;}
ti[&quot;s&quot;] = {&quot;fl_sahara&quot;}
ti[&quot;t&quot;] = {&quot;fl_tigris&quot;}
ti[&quot;1&quot;] = {&quot;ac-blackball&quot;, 0, 0.5}

ti[&quot;template_trigger&quot;] = {&quot;it_trigger&quot;, target=&quot;myoxyd%%&quot;, action=&quot;open&quot;}
ti[&quot;template_oxyd&quot;]    = ti[&quot;~&quot;] .. {&quot;st_oxyd&quot;, &quot;myoxyd%%&quot;}

myrandom = res.random(ti, &quot; &quot;, {&quot;s&quot;, &quot;t&quot;})

myautotile = res.autotile(myrandom, {&quot;a&quot;, &quot;h&quot;, &quot;template_trigger&quot;},
                              {&quot;A&quot;, &quot;H&quot;, &quot;template_oxyd&quot;})

w, h = wo(myautotile, &quot; &quot;, {
&quot;A~                ~E&quot;,
&quot;~~                ~~&quot;,
&quot;~~   h        b   ~~&quot;,
&quot;~~                ~~&quot;,
&quot;B~     c    d     ~F&quot;,
&quot;~~                ~~&quot;,
&quot;~~        1       ~~&quot;,
&quot;~~                ~~&quot;,
&quot;C~     f    e     ~G&quot;,
&quot;~~                ~~&quot;,
&quot;~~   g        a   ~~&quot;,
&quot;~~                ~~&quot;,
&quot;D~                ~H&quot;
})

wo:shuffleOxyd()
</pre></td></tr></table>
</dd>
</dl>


<hr size="6">
<a name="Custom-Resolver"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Resolver-Chaining" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#res_002eautotile" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Resolvers" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Extension-Development" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Custom-Resolver-1"></a>
<h3 class="subsection">13.1.2 Настраиваемое преобразование</h3>
<a name="index-custom-resolver"></a>

<p>Настраиваемое преобразование &mdash; это функция уровня, которая позволяет динамически переназначать секции. Когда эта функция появляется в цепочке преобразований, она вызывается единожды для каждой секции, которую надо разместить. Размещена будет секция, которую вернёт эта функция.
</p>
<p>Типичные области применения такой функции &mdash; шаблоны оформления, которые легко рассчитываются, но их размещение на карте крайне утомительно, а также уровни, создаваемые динамически и немного различающиеся после каждого перезапуска.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>tile = <b>myresolver</b>(<i>key</i>, <i>x</i>, <i>y</i>)
</p>
<dl compact="compact">
<dt> <i>key</i></dt>
<dd><p>Строка, содержащая код секции для преобразования.
</p></dd>
<dt> <i>x</i></dt>
<dd><p>Координата секции по оси x.
</p></dd>
<dt> <i>y</i></dt>
<dd><p>Координата секции по оси y.
</p></dd>
</dl>

</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Функция настраиваемого преобразования &mdash; это последнее преобразование, вызываемое в цепочке. Оно должно возвращать окончательный код секции, которую следует отрисовать в указанной позиции. Это можно сделать с помощью выражения &lsquo;<samp>return ti[&quot;k&quot;]</samp>&rsquo;, которое указывает на секцию, уже описанную на карте секций.
</p>
<p>Если ни одна подходящая секция ещё не определена, в качестве альтернативы можно вернуть новую секцию, например, таким образом: &lsquo;<samp>return ti({&quot;st_switch&quot;, state=ON})</samp>&rsquo;.
</p>
<p>Если вообще не нужно рисовать никакой секции, следует возвращать пустое определение секции: &lsquo;<samp>return {&quot;nil&quot;}</samp>&rsquo; или &lsquo;<samp>return {}</samp>&rsquo;.
</p>
<p>&lsquo;<samp>return nil</samp>&rsquo; указывает на ошибку при использовании кода неизвестной секции.
</p>
</dd>
<dt> <b>Например:</b></dt>
<dd><p>Уровень &quot;Demo User Resolver&quot; из пакета уровней &quot;Demolevels&quot;:
</p><table><tr><td>&nbsp;</td><td><pre class="example">ti[&quot;r&quot;] = {&quot;fl_rough_red&quot;}
ti[&quot;b&quot;] = {&quot;fl_rough_blue&quot;}
ti[&quot;1&quot;] = {&quot;#ac-blackball&quot;}

ti[&quot;x&quot;] = {&quot;it_cross&quot;}

function myresolver(key, x, y)
    if key == &quot; &quot; then
        local center = ((x%3) * (y%3))%2
        local checker = ((math.modf(x/3) %2) + (math.modf(y/3) %2))%2
        if center + checker == 1 then
            return ti[&quot;r&quot;]
        else
            return ti[&quot;b&quot;]
        end
    else
        return ti[key]
    end
end

w, h = wo(myresolver, &quot; &quot;, {
&quot;                    &quot;,
&quot;                    &quot;,
&quot;                    &quot;,
&quot;      x x           &quot;,
&quot;       x            &quot;,
&quot;      x x           &quot;,
&quot;                    &quot;,
&quot;          1         &quot;,
&quot;                    &quot;,
&quot;                    &quot;,
&quot;                    &quot;,
&quot;                    &quot;,
&quot;                    &quot;
})
</pre></td></tr></table>
</dd>
</dl>


<hr size="6">
<a name="res_002eautotile"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Custom-Resolver" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#res_002ecomposer" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Resolvers" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Extension-Development" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="res_002eautotile-1"></a>
<h3 class="subsection">13.1.3 res.autotile</h3>
<a name="index-res_002eautotile"></a>

<p>Автоматическое заполнение карты секциями уменьшает количество необходимых объявлений за счёт их генерации согласно простым заданным правилам. Самая типичная область его применения &mdash; это группа переключателей, целями которых являются однотипные объекты, такие как двери или лазеры. Так как у каждого из них свой целевой объект, для них нужно писать отдельные объявления с уникальными кодами, например:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">ti[&quot;A&quot;] = {&quot;st_floppy&quot;, target=&quot;laserA&quot;}
ti[&quot;B&quot;] = {&quot;st_floppy&quot;, target=&quot;laserB&quot;}
ti[&quot;C&quot;] = {&quot;st_floppy&quot;, target=&quot;laserC&quot;}
ti[&quot;a&quot;] = {&quot;st_laser&quot;, name=&quot;laserA&quot;}
ti[&quot;b&quot;] = {&quot;st_laser&quot;, name=&quot;laserB&quot;}
ti[&quot;c&quot;] = {&quot;st_laser&quot;, name=&quot;laserC&quot;}
</pre></td></tr></table>

<p>Автоматическому заполнению карты секциями необходима всего одна шаблонная секция каждого типа, и она подменяет любой шаблон вида &lsquo;<samp>%%</samp>&rsquo; уникальной заменой.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">ti[&quot;template_switch&quot;] = {&quot;st_floppy&quot;, target=&quot;laser%%&quot;}
ti[&quot;template_laser&quot;]  = {&quot;st_laser&quot;, name=&quot;laser%%&quot;}
</pre></td></tr></table>

<p>Вне зависимости от числа требуемых уникальных объектов необходим всего один шаблон. Требуется просто указать в правиле используемый диапазон кодов и можно использовать их на своей карте уровня.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd>
<p><b>res.autotile</b>(<i>subresolver</i>, <i>rules</i>)
</p>
<dl compact="compact">
<dt> <i>subresolver</i></dt>
<dd><p>Преобразование, которому должны быть перенаправлены необработанные запросы. В качестве последнего преобразования цепи преобразований может выступать &lsquo;<samp>ti</samp>&rsquo;.
</p></dd>
<dt> <i>rules</i> = <i>rule</i>, <i>rule</i>,...</dt>
<dd><p>Одно или более правил, разделённые запятыми.
</p></dd>
<dt> <i>rule</i> = <i>prefixrule</i> | <i>rangerule</i></dt>
<dd><p>Каждое правило может быть любой разновидностью &lsquo;prefixrule&rsquo; или &lsquo;rangerule&rsquo;
</p></dd>
<dt> <i>prefixrule</i> = {<i>prefix</i>, <i>template</i>}</dt>
<dd><p>Таблица с двумя столбцами. Первый &mdash; префиксная строка, общая для кодов всех секций, которые нужно обработать, вслед за которой должна идти кодовая строка шаблонной секции.
</p></dd>
<dt> <i>rangerule</i> = {<i>first</i>, <i>last</i>, <i>template</i>&nbsp;[, <i>offset</i>]}</dt>
<dd><p>Таблица с тремя и более столбцами. Строка с первым кодом, который нужно обработать, вслед за которой идёт строка с последним кодом, который нужно обработать. Третий столбец &mdash; кодовая строка шаблонной секции. Опциональное четвёртое значение, по умолчанию равное <code>1</code>, определяет первый код при замещениях шаблона &lsquo;<samp>%%</samp>&rsquo;.
</p></dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">res.autotile(ti, {&quot;A&quot;, &quot;template_switch&quot;}, {&quot;L&quot;, &quot;template_laser})
res.autotile(ti, {&quot;a&quot;, &quot;e&quot;, &quot;template_trigger}, {&quot;A&quot;, &quot;E&quot;, &quot;template_door&quot;}
</pre></td></tr></table>

</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Префиксные правила нуждаются в кодовой строке длиной хотя бы в 2 символа. Их нельзя использовать с картами всего с одним символом, обозначающим секцию. Преобразование создаст описание секции для каждого кода секции на карте, который совпадает с заданным префиксом. Будет создана копия шаблона,
</p>
<p>а все вхождения двух символов &lsquo;<samp>%%</samp>&rsquo; будут заменены одним знаком процента, за которым последует суффикс используемого кода секции. Поэтому код &lsquo;<samp>AD</samp>&rsquo; будет преобразован в лазер &lsquo;<samp>laser%D</samp>&rsquo;. Для отождествления с лазером на карте следует использовать код &lsquo;<samp>LD</samp>&rsquo;.
</p>
<p>Правила диапазонов проверяют совпадения любого кода секции из заданного диапазона. Их уместно использовать в картах с односимвольными кодами. Но они могут использоваться и в многосимвольных картах. В этом случае заданные первый и последний коды могут отличаться только последним символом. Опять же будет создана копия шаблона, а все вхождения символов &lsquo;<samp>%%</samp>&rsquo; будут заменены. Но в этом случае замена будет состоять из одного знака процента, за которым последует целое число, представляющее собой порядковый номер символа в заданном диапазоне либо значение по умолчанию <code>1</code>. Поэтому код &lsquo;<samp>c</samp>&rsquo; в примере выше будет преобразован в дверь &lsquo;<samp>door%3&rsquo;.</samp> Для отождествления с дверью на карте следует использовать код &lsquo;<samp>C</samp>&rsquo;.
</p>
<p>Определения шаблонных секций могут быть составлены и из нескольких объединённых секций, даже ссылок на базовые секции. Замена шаблонов произойдет с любым значением атрибута, содержащим строковые определения. Возможным шаблоном может быть такой:
</p><table><tr><td>&nbsp;</td><td><pre class="example">ti[&quot;template&quot;] = ti[&quot;~&quot;] .. ti({&quot;it_trigger&quot;, target={&quot;door%%#*&quot;,&quot;laser%%&quot;}}) .. {&quot;st_grate1&quot;}
</pre></td></tr></table>

<p>Замещения шаблонов могут осуществляться даже для кодов базовых секций, на которые имеются ссылки. Каждое вхождение двух символов &lsquo;<samp>%%</samp>&rsquo; в код будет заменено на суффикс используемого кода секции без начального знака &lsquo;<samp>%</samp>&rsquo;. Например, в случае применения шаблона
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">ti[&quot;template&quot;] = ti[&quot;P%%&quot;] .. {&quot;st_floppy&quot;, target=&quot;laser%%&quot;}
</pre></td></tr></table>

<p>к коду с суффиксом &lsquo;<samp>d</samp>&rsquo; мы получим код базовой секции &lsquo;<samp>Pd</samp>&rsquo;. Данное свойство особенно полезно в случаях, когда преобразование autotile подключается к другому преобразованию, которое генерирует базовые секции.
</p>
</dd>
<dt> <b>Готовый пример:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">ti[&quot; &quot;] = {&quot;fl_sahara&quot;}

ti[&quot;template_a&quot;] = {&quot;st_floppy&quot;, target={&quot;door%%#*&quot;,&quot;laser%%&quot;}}
ti[&quot;template_A&quot;] = {&quot;st_blocker&quot;, &quot;door%%#&quot;}
ti[&quot;template_1&quot;] = {&quot;st_laser_s&quot;, &quot;laser%%&quot;}

ti[&quot;x&quot;] = {&quot;#ac-marble_black&quot;} .. ti({&quot;it_floppy&quot;})

local resolver = res.autotile(ti, {&quot;a&quot;, &quot;e&quot;, &quot;template_a&quot;},
    {&quot;A&quot;, &quot;E&quot;, &quot;template_A&quot;},  {&quot;1&quot;, &quot;5&quot;, &quot;template_1&quot;})

w, h = wo(resolver, &quot; &quot;, {
&quot;                    &quot;,
&quot;                    &quot;,
&quot;   a   DB  e    BC  &quot;,
&quot;                    &quot;,
&quot;   CD  b   AE   c   &quot;,
&quot;                    &quot;,
&quot;   d   EA           &quot;,
&quot;                    &quot;,
&quot;           x        &quot;,
&quot;                    &quot;,
&quot;                    &quot;,
&quot;   4  2  5  1  3    &quot;,
&quot;                    &quot;
})
</pre></td></tr></table>
<p>Доработанный вариант примера можно найти в разделе <a href="#Orthogonal-Autotiling">Orthogonal Autotiling</a>.
</p>
</dd>
<dt> <b>Предупреждение:</b><a name="Caveats"></a></dt>
<dd><p>В качестве суффикса для кодов автоматического заполнения секциями длиной в 2 и более символов не следует использовать знак решётки &lsquo;<samp>#</samp>&rsquo;. Код <code>&quot;A#&quot;</code> атрибута &lsquo;name&rsquo; может совсем некстати превратиться в &lsquo;<samp>%%</samp>&rsquo;. Имя <code>&quot;sample%%&quot;</code> заменилось бы на <code>&quot;sample%#&quot;</code>, что представляет собой автоматически нумерованное имя (см. раздел <a href="#Object-Naming">Именование объектов</a>).
</p></dd>
</dl>



<hr size="6">
<a name="res_002ecomposer"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#res_002eautotile" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#res_002emaze" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Resolvers" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Extension-Development" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="res_002ecomposer-1"></a>
<h3 class="subsection">13.1.4 res.composer</h3>
<a name="index-res_002ecomposer"></a>

<p>Составитель преобразований уменьшает число необходимых описаний секций, составляя их из базовых секций. Почти на всех больших уровнях и даже на некоторых маленьких используется множество разнообразных объектов в различных сочетаниях. Так как односимвольный код секции здесь не подходит, нужно будет использовать двух- или трёхсимвольные коды секций. Но понадобятся многочисленные описания секций, по одному для каждой комбинации используемых объектов.
</p>
<p>Составитель помогает избавиться от необходимости описания всех используемых комбинаций. Просто описывайте базовые объекты, например поверхности и все камни, предметы, актёров и используйте комбинации кодов этих базовых секций. Составитель собирает необходимые описания секций на лету. Например, используя следующие базовые описания секций:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">ti[&quot; .&quot;] = {&quot;fl_space&quot;}
ti[&quot; ~&quot;] = {&quot;fl_water&quot;}
ti[&quot;X &quot;] = {&quot;st_grate&quot;}
ti[&quot;h &quot;] = {&quot;it_hammer&quot;}
</pre></td></tr></table>

<p>Разрешается использовать любые дополнительные комбинации, такие как:<code> &quot;X.&quot;</code> &mdash; решётка в космосе, <code>&quot;X~&quot;</code> &mdash; решётка на воде, <code>&quot;h.&quot;</code> &mdash; молоток в космосе, <code>&quot;h~&quot;</code> &mdash; молоток на воде.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd>
<p><b>res.composer</b>(<i>subresolver</i>)
</p>
<p><b>res.composer</b>(<i>subresolver</i>, <i>sequence</i>)
</p>
<dl compact="compact">
<dt> <i>subresolver</i></dt>
<dd><p>Преобразование, которому должны быть перенаправлены необработанные запросы. В качестве последнего преобразования цепи преобразований может выступать &lsquo;<samp>ti</samp>&rsquo;.
</p></dd>
<dt> <i>sequence</i></dt>
<dd><p>Последовательность поиска описаний основных секций, указанная в виде числовой строки приоритетов. Последовательность по умолчанию: <code>&quot;123456789&quot;.</code>
</p></dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">res.composer(ti)
</pre></td></tr></table>

</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Для каждого кода на карте преобразованию сначала передаётся запрос на описание секции. Поэтому любое заданное описание предшествует автоматической сборке.
</p>
<p>Только в случае, когда описания не существует, начинается поиск возможных подкодов секций. Подкоды &mdash; это коды, в которых большинство символов заменено пробелом &lsquo;<samp> </samp>&rsquo;.
</p>
<p>Последовательность поиска задаётся необязательным вторым параметром и по умолчанию представляет собой строку: <code>&quot;123456789&quot;</code>. На первом шаге все позиции символов, обозначенных в последовательности как &lsquo;<samp>1</samp>&rsquo;, остаются в строке кодов, а все остальные заменяются пробельными символами. На втором шаге все позиции символов, обозначенных в последовательности как &lsquo;<samp>2</samp>&rsquo;, остаются в строке кодов, а все остальные заменяются пробельными символами. Эта процедура повторяется пока число не станет равным длине кода. Все сгенерированные подкоды преобразуются подпреобразованием и объединяются в заданной последовательности.
</p>
<p>При использовании последовательности по умолчанию <code>&quot;123456789&quot;</code> запрос кода для <code>&quot;~mX&quot;</code> преобразует его к подкодам  <code>&quot;~  &quot;</code>, <code>&quot; m &quot;</code> и <code>&quot;  X&quot;</code>. Эти подкоды преобразовываются подпреобразованием. Если подпреобразованием является &lsquo;<samp>ti</samp>&rsquo;, то результатом будет:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">ti[&quot;~  &quot;] .. ti[&quot; m &quot;] .. ti[&quot;  X&quot;]
</pre></td></tr></table>

<p>При длине кода равной 3 или более символам иногда полезно избегать полного разбиения на подкоды, содержащие одиночные символы. Такое случается, например, при использовании в качестве подпреобразования <a href="#res_002eautotile">res.autotile</a> или <a href="#res_002epuzzle">res.puzzle</a>. Для обоих важно, чтобы в подкоде было по крайней мере 2 символа. В таком случае можно просто задать для кода длиной 3 символа последовательность <code>&quot;122&quot;</code>. Запрос кода для <code>&quot;~Pa&quot;</code> вернёт подкоды <code>&quot;~  &quot;</code>, <code>&quot; Pa&quot;</code>. В случае с подпреобразованием головоломки будет получен следующий результат:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">ti[&quot;~  &quot;] .. ti[&quot; P&quot;]
</pre></td></tr></table>

<p>где описание второй секции представляет собой описание <a href="#st_005fpuzzle">st_puzzle</a> со значением атрибута &lsquo;<samp>connections</samp>&rsquo; равным <code>&quot;w&quot;</code>, согласно последнему символу кода &lsquo;<samp>a</samp>&rsquo;.
</p>
<p>Случай с <code>&quot;231&quot;</code> сводится к полному разбиению, однако с изменённой последовательностью выборки и объединения. В отличие от первого случая, для того же кода <code>&quot;~mX&quot;</code> будет получен следующий результат:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">ti[&quot;  X&quot;] .. ti[&quot;~  &quot;] .. ti[&quot; m &quot;]
</pre></td></tr></table>

<p>В любом случае строки подкодов, состоящие из одних пробельных символов, просто будут проигнорированы. При последовательности по умолчанию, код <code>&quot;~ X&quot;</code> будет преобразован к:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">ti[&quot;~  &quot;] .. ti[&quot;  X&quot;]
</pre></td></tr></table>

<p>При размещении покрытий с помощью составителя в качестве покрытия по умолчанию следует использовать код, состоящий исключительно из пробельных символов, поскольку такой код не преобразуется составителем и обрабатывается механизмом по умолчанию.
</p>
</dd>
<dt> <b>Готовый пример:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">ti[&quot;  &quot;] = {&quot;fl_sahara&quot;}
ti[&quot; =&quot;] = {&quot;fl_tigris&quot;}
ti[&quot; .&quot;] = {&quot;fl_abyss&quot;}
ti[&quot; ~&quot;] = {&quot;fl_water&quot;}
ti[&quot; ;&quot;] = {&quot;fl_lawn&quot;}

ti[&quot;# &quot;] = {&quot;st_granite&quot;}
ti[&quot;W &quot;] = {&quot;st_wood&quot;}
ti[&quot;X &quot;] = {&quot;st_oxyd&quot;}
ti[&quot;G &quot;] = {&quot;st_grate_cross&quot;}

ti[&quot;2 &quot;] = {&quot;it_coin_s&quot;}
ti[&quot;s &quot;] = {&quot;it_seed&quot;}
ti[&quot;c &quot;] = {&quot;it_cherry&quot;}
ti[&quot;h &quot;] = {&quot;it_hammer&quot;}

ti[&quot;k &quot;] = {&quot;it_key&quot;} .. ti({&quot;st_lightglass&quot;})

ti[&quot;xx&quot;] = {&quot;#ac_marble_black&quot;}

local resolver = res.composer(ti)

w, h = wo(resolver, &quot;  &quot;, {
--0001020304050607080910111213141516171819
 &quot;                                        &quot;,
 &quot;  h= ;W;2;c G~ ~# #.2.X X~k=k;          &quot;,
 &quot;                                        &quot;,
 &quot;  2;s;    2.s.    2=s=                  &quot;,
 &quot;  c;h;    c.h.    c=h=    xx            &quot;,
 &quot;                                        &quot;
})
</pre></td></tr></table>

</dd>
</dl>


<hr size="6">
<a name="res_002emaze"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#res_002ecomposer" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#res_002epuzzle" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Resolvers" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Extension-Development" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="res_002emaze-1"></a>
<h3 class="subsection">13.1.5 res.maze</h3>
<a name="index-res_002emaze"></a>

<p>Преобразование лабиринтов позволяет создавать в значительной степени произвольные лабиринты. Форма лабиринта больше не ограничена надоевшими прямоугольниками со стенами толщиной один участок решётки и таким же проходом между ними, который уникальным способом соединяет между собой все участки лабиринта.
</p>
<p>Генератор лабиринтов второго поколения позволяет создавать лабиринты произвольной формы, с толстыми стенами или пропастями, или тонкими стенами, состоящими из оконного стекла, лабиринты с пустотами размером в одну клетку или целый остров, лабиринты, состоящие из переплетений <a href="#it_005fstrip">it_strip</a> вообще без каких-либо комнат. Пустоты лабиринта могут быть строго прямоугольными или скошенными в одном из направлений, они могут быть связаны с 4 или 6&nbsp;соседними пустотами в шестиугольных или трёхмерных лабиринтах. Вы можете создавать и добавлять собственные алгоритмы генерации и отображения лабиринтов. Кроме того, вы можете анализировать, повторно обрабатывать и, более того, изменять свои лабиринты даже после их создания.
</p>
<p>С математической точки зрения мы предлагаем базовые структуры для генерации в значительной степени произвольных ориентированных графов. Наши лабиринты состоят из пустот, вершин графа. Каждая пустота может быть соединена с определённым количеством соседних пустот.  Эти соединения, представляющие собой проходы, соединяющие между собой пустоты, могут даже быть зависимыми от направления. Это позволяет использовать оконные рамы по сторонам соединения или однонаправленные камни.  Эти проходы из одной пустоты в другую представляют собой рёбра графа, и, поскольку они могут иметь направления, этот граф является ориентированным. Но для большинства лабиринтов поддержка направлений несущественна и очевидна, и вам вообще ничего не нужно знать о графах. Поэтому мы назвали данный преобразователь просто преобразователем лабиринтов.
</p>
<p>Конечно же, такой гибкий преобразователь нуждается в настройке. Поскольку количество параметров превышает количество аргументов, которое было бы целесообразно передать функции путём простого перечисления, мы решили сгруппировать параметры для отдельных задач и использовать для настройки таблицу с именованными атрибутами. На самом деле всё проще, чем могло показаться из объяснения выше. Нужно только внимательно следить за фигурными скобками в таблице, поскольку они необходимы и не могут быть пропущены.
</p>
<p>В большом уровне может потребоваться сгенерировать два или более полностью независимых лабиринта. Это можно сделать, используя несколько экземпляров преобразования. Дескриптор преобразователя, возвращаемый при настройке, является уникальным указателем на лабиринт, используемым при последующих запросах. Сохраните его и свяжите все преобразования лабиринтов, как описано в разделе <a href="#Resolver-Chaining">Составление цепочек преобразований</a>.
</p>
<dl compact="compact">
<dt> <b>Расположение:</b></dt>
<dd><p>Это преобразование входит в состав библиотеки &lsquo;<samp>libmaze</samp>&rsquo; выпуска 2. Его можно использовать, добавив следующую зависимость к объявлению элемента <a href="#g_t_003ccompatibility_003e">&lt;compatibility&gt;</a> уровня:
</p><table><tr><td>&nbsp;</td><td><pre class="example">  &lt;<i>el</i>:<b>dependency</b> <i>el</i>:<b>path</b>=&quot;<var>lib/libmaze</var>&quot; <i>el</i>:<b>id</b>=&quot;<var>lib/libmaze</var>&quot; <i>el</i>:<b>release</b>=&quot;<var>2</var>&quot; <i>el</i>:<b>preload</b>=&quot;<var>true</var>&quot;/&gt;
</pre></td></tr></table>

<p>Данное преобразование автоматически осуществляет предварительную загрузку библиотеки <a href="#libmap">libmap</a>.
</p>
</dd>
<dt> <b>Синтаксис:</b></dt>
<dd>
<p><i>themaze</i> = <b>res.maze</b>(<i>subresolver</i>, <i>attributes</i>)
</p>
<dl compact="compact">
<dt> <i>subresolver</i></dt>
<dd><p>Преобразование, которому должны быть перенаправлены необработанные запросы. В качестве последнего преобразования цепи преобразований может выступать &lsquo;<samp>ti</samp>&rsquo;.
</p></dd>
<dt> <i>attributes</i> = {<i>keyvalue</i>, <i>keyvalue</i>,...}</dt>
<dd><p>Анонимный список с одним или несколькими атрибутами в виде пар значений кодов, разделённых запятой.
</p></dd>
<dt> <i>keyvalue</i> = &lt;area=<i>area_value</i> | render = <i>render_value</i> | kernel = <i>kernel_value</i> | spacing = <i>spacing_value</i> | persistent=<i>persistence</i>&gt;</dt>
<dd><p>Значения данных кодов, которые могут встречаться в анонимном списке в любой последовательности.
</p></dd>
<dt> <i>area_value</i> = {&lt;<i>rectangular_area</i> | <i>marked_area</i>&gt;}</dt>
<dd><p>Определение области лабиринта, которая может представлять собой прямоугольник или территорию, отмеченную на карте мира.
</p></dd>
<dt> <i>rectangular_area</i> = <i>anchor</i>, <i>width</i>, <i>height</i></dt>
<dd><p>Прямоугольная область, заданная положением якоря в рамках мира и двумя числами,определяющими ширину и высоту, измеряемые в клетках лабиринта.
</p></dd>
<dt> <i>anchor</i></dt>
<dd><p>Любое значение, преобразуемое в <a href="#Position">позицию</a>, которое определяет верхний левый угол прямоугольной области лабиринта. Помимо позиционных значений поддерживаются также ссылки на объект и строки имён объектов или позиций.
</p></dd>
<dt> <i>marked_area</i></dt>
<dd><p>Одна или несколько строк, разделённых запятой, представляющих собой простые записи в анонимном списке. Каждая строка определяет код, префикс кода или имя объекта. Все эти строки могут использоваться одновременно для маркировки области. Строки могут встречаться в любой последовательности и в любом количестве.
</p></dd>
<dt> <i>kernel_value</i> = {kernel_width, kernel_height}</dt>
<dd><p>Размер ядра пустоты, заданный высотой и шириной, измеряемыми в секциях.
</p></dd>
<dt> <i>spacing_value</i> = {spacing_x, spacing_y}</dt>
<dd><p>Расстояние от ядра пустоты до соседного ядра в направлении x и y, измеряемое в секциях.
</p></dd>
<dt> <i>render_value</i> = {&lt;<i>std_renderer_args</i> | <i>other_renderer</i>&gt;}</dt>
<dd><p>Спецификация для рисования лабиринта. Если она отсутствует, то лабиринт нарисован не будет. Если необходимо использовать стандартное средство визуализации по умолчанию, то его параметры можно указать в явной форме, для других средств визуализации необходимо указать типовую спецификацию и необходимую информацию для настройки.
</p></dd>
<dt> <i>std_renderer_args</i> = <i>passage_keys</i> [, &lt;<i>wall_key</i> [, <i>kernel_key</i>] | <i>cell_map</i>&gt;]]</dt>
<dd><p>Стандартное средство визуализации принимает информацию о кодах секций, используемых для проходов, а также карту пустот или дополнительные коды секций для стен и, опционально, для ядер пустот.
</p></dd>
<dt> <i>passage_keys</i> = &lt;<i>passage_key</i> | {<i>passage_open</i>, <i>passage_closed</i>}&gt;</dt>
<dd><p>Обычно здесь задаётся только код секции для открытых ходов лабиринта. Закрытые проходы выглядят как стены и используют те же коды секций. Но если вам необходимо использовать особые коды секций для открытых и закрытых проходов, вы можете указать в анонимном списке сразу две строки. Если коды стен не были заданы, то в объявлениях секций открытых проходов необходимо указать &lsquo;<samp>st_nil</samp>&rsquo;, чтобы убрать камни стен, рисуемые картой мира.
</p></dd>
<dt> <i>wall_key</i></dt>
<dd><p>Код секции, искользуемый для рисования стен. Если он отсутствует, то стены не будут нарисованы, а преобразование будет полагаться на карту мира в плане рисования секций со стенами.
</p></dd>
<dt> <i>kernel_key</i></dt>
<dd><p>В большинстве случаев ядро пустоты рисуется картой мира. Но вы также можете указать код секции, который будет использоваться для рисования всех секций в ядрах пустот.
</p></dd>
<dt> <i>cell_map</i></dt>
<dd><p>Вместо кодов секция ядра и стен для пустоты также можно указать полную карту <a href="#libmap">libmap</a>. Карта может предусматривать произвольные участки покрытия для ядер пустот размером более одной клетки. Стены на южной и восточной стороне также могут различаться.
</p></dd>
<dt> <i>other_renderer</i> = <i>renderer</i>  [, <i>other_renderer_args</i>]</dt>
<dd><p>Указание функции средства визуализации, вместе с её аргументами.
</p></dd>
<dt> <i>renderer</i></dt>
<dd><p>Функция, осуществляющая визуализацию. По умолчанию это &lsquo;<samp>lib.maze.renderer_standard</samp>&rsquo; с аргументами, указанными выше. С игрой также поставляются функции визуализации <samp>lib.maze.renderer_window</samp>&rsquo; и &lsquo;<samp>lib.maze.renderer_strip</samp>&rsquo;. <a name="index-lib_002emaze_002erenderer_005fstandard"></a> <a name="index-lib_002emaze_002erenderer_005fwindow"></a> <a name="index-lib_002emaze_002erenderer_005fstrip"></a>
</p>
</dd>
<dt> <i>persistence</i></dt>
<dd><p>Булево значение, по умолчанию равное &lsquo;<samp>false</samp>&rsquo;. Если необходимо получить доступ к лабиринту или любым из его клеток после инициализации уровня, это значение следует изменить на &lsquo;<samp>true</samp>&rsquo;. В противном случае дескриптор лабиринта со всеми его данными может стать недействительным после очистки памяти от ненужных данных. Это не является проблемой для большинства лабиринтов, которые рисуются непосредственно и не нуждаются в дальнейшей оценке или изменениях во время выполнения.
</p></dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">maze1 = res.maze(ti, {area ={&quot;anchor1&quot;, 4, 5}, render = {&quot; &quot;, &quot;-&quot;, &quot; &quot;}})
maze2 = res.maze(ti, {area ={&quot;.&quot;}, kernel={1,1}, render = {&quot;!&quot;, &quot;~&quot;, &quot;-&quot;}})
maze3 = res.maze(ti, {area ={&quot;amaze#*&quot;}, render = {{&quot;.&quot;,&quot;+&quot;}, &quot;~&quot;, &quot;-&quot;}})
maze4 = res.maze(ti, {area ={po(2, 12), 5, 5}, kernel={3,2},
                   render = {&quot;.&quot;, wo:newMap(&quot; &quot;, {&quot;!!!~&quot;,&quot;--!~&quot;,&quot;~~~~&quot;})}})
</pre></td></tr></table>

</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Будут дописаны.
</p>

</dd>
<dt> <b>Готовый пример:</b></dt>
</dl>


<hr size="6">
<a name="res_002epuzzle"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#res_002emaze" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#res_002erandom" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Resolvers" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Extension-Development" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="res_002epuzzle-1"></a>
<h3 class="subsection">13.1.6 res.puzzle</h3>
<a name="index-res_002epuzzle"></a>

<p>Преобразование головоломок помогает сократить количество требуемых описаний секций для групп из камней-головоломок (см. раздел <a href="#st_005fpuzzle">st_puzzle</a>). С помощью атрибута &lsquo;<samp>cluster</samp>&rsquo; камня-головоломки (см. раздел <a href="#st_005fpuzzle">st_puzzle</a>) можно легко составлять группы полностью взаимосвязанных камней. Однако в случае с необычными, лишь частично связанными камнями-головоломками зачастую необходимо несколько похожих описаний секций, которые отличаются только значением атрибута &lsquo;<samp>connections</samp>&rsquo;.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">ti[&quot;B1&quot;] = {&quot;st_puzzle_blue&quot;, cluster=1}
ti[&quot;Ba&quot;] = {&quot;st_puzzle_blue&quot;, connections=&quot;w&quot;}
ti[&quot;Bb&quot;] = {&quot;st_puzzle_blue&quot;, connections=&quot;sw&quot;}
ti[&quot;Bd&quot;] = {&quot;st_puzzle_blue&quot;, connections=&quot;ew&quot;}
ti[&quot;Bh&quot;] = {&quot;st_puzzle_blue&quot;, connections=&quot;n&quot;}
</pre></td></tr></table>

<p>Как и <a href="#res_002eautotile">res.autotile</a>, это преобразование предлагает автоматическое описание секций. Требуется задать всего один шаблон секции и можно пользоваться любыми разновидностями соединений.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">ti[&quot;B&quot;] = {&quot;st_puzzle_blue&quot;}
</pre></td></tr></table>

<p>Кроме того, это преобразование запоминает каждую группу камней-головоломок и перемешивать скопления камней. Есть возможность даже выбрать алгоритм перемешивания и задать доступные стороны камней-головоломок.
</p>
<dl compact="compact">
<dt> <b>Расположение:</b></dt>
<dd><p>Это преобразование входит в состав библиотеки &lsquo;<samp>libpuzzle</samp>&rsquo; выпуска 3. Его можно использовать, добавив следующую зависимость к объявлению элемента <a href="#g_t_003ccompatibility_003e">&lt;compatibility&gt;</a> уровня:
</p><table><tr><td>&nbsp;</td><td><pre class="example">  &lt;<i>el</i>:<b>dependency</b> <i>el</i>:<b>path</b>=&quot;<var>lib/libpuzzle</var>&quot; <i>el</i>:<b>id</b>=&quot;<var>lib/libpuzzle</var>&quot; <i>el</i>:<b>release</b>=&quot;<var>3</var>&quot; <i>el</i>:<b>preload</b>=&quot;<var>true</var>&quot;/&gt;
</pre></td></tr></table>

</dd>
<dt> <b>Синтаксис:</b></dt>
<dd>
<p><b>res.puzzle</b>(<i>subresolver</i>, <i>rules</i>)
</p>
<dl compact="compact">
<dt> <i>subresolver</i></dt>
<dd><p>Преобразование, которому должны быть перенаправлены необработанные запросы. В качестве последнего преобразования цепи преобразований может выступать &lsquo;<samp>ti</samp>&rsquo;.
</p></dd>
<dt> <i>rules</i> = <i>rule</i>, <i>rule</i>,...</dt>
<dd><p>Одно или более правил, разделённых запятыми.
</p></dd>
<dt> <i>rule</i></dt>
<dd><p>Строка шаблона кода секции, которая представляет собой общую приставку к кодам секций для всех сгенерированных описаний секций.
</p></dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">res.puzzle(ti, &quot;B&quot;, &quot;Y&quot;, &quot;I&quot;, &quot;M&quot;)
</pre></td></tr></table>

</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Преобразование головоломок предполагает, что длина кода секции составляет два и более символа. Полученные правила представляют собой строки-приставки, которые нужно объединить с односимвольным суффиксом, чтобы получить стандартный код секции. Передав правильный шаблон правила, можно пользоваться любым из следующих суффиксов, не описывая секцию:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">    Суффикс   Блок Соединения
Непроницаемый Полый
 '0'   '5'       0   autoconnect
 '1'   '6'       1   autoconnect
 '2'   '7'       2   autoconnect
 '3'   '8'       3   autoconnect
 '4'   '9'       4   autoconnect
 ' '   '+'      nil    &quot;&quot;
 'a'   'A'      nil    &quot;w&quot;
 'b'   'B'      nil    &quot;s&quot;
 'c'   'C'      nil    &quot;sw&quot;
 'd'   'D'      nil    &quot;e&quot;
 'e'   'E'      nil    &quot;ew&quot;
 'f'   'F'      nil    &quot;es&quot;
 'g'   'G'      nil    &quot;esw&quot;
 'h'   'H'      nil    &quot;n&quot;
 'i'   'I'      nil    &quot;nw&quot;
 'j'   'J'      nil    &quot;ns&quot;
 'k'   'K'      nil    &quot;nsw&quot;
 'l'   'L'      nil    &quot;ne&quot;
 'm'   'M'      nil    &quot;new&quot;
 'n'   'N'      nil    &quot;nes&quot;
 'o'   'O'      nil    &quot;nesw&quot;
 'p'   'P'      10   autoconnect
 'q'   'Q'      11   autoconnect
 'r'   'R'      12   autoconnect
 's'   'S'      13   autoconnect
 't'   'T'      14   autoconnect
 'u'   'U'      15   autoconnect
 'v'   'V'      16   autoconnect
 'w'   'W'      17   autoconnect
 'x'   'X'      18   autoconnect
 'y'   'Y'      19   autoconnect
 'z'   'Z'      20   autoconnect
</pre></td></tr></table>

<p>Все камни-головоломки, созданные с помощью этого преобразования, будут записаны и перемешаны с учетом значения атрибута интенсивности (&lsquo;<samp>intensity</samp>&rsquo;), по умолчанию равного 3. Для любого камня-головоломки можно задать другое значение атрибута интенсивности. Будет использоваться максимальное значение интенсивности всех камней в блоке. Интенсивность помноженная на количество камней в блоке задаёт количество обратных толчков, называемых подтягиваниями, которые производятся во время перемешивания. Таким образом, интенсивность 3 для блока из 6 камней приведёт к 18 подтягиваниям. Это значит, что головоломку гарантированно можно решить за 18 толчков. Однако поскольку некоторые подтягивания могут нейтрализоваться другими, у игрока есть возможность решить головоломку и за меньшее число толчков.
</p>
<p>Если алгоритм (<samp>algorithm</samp>&rsquo;) перемешивания не был задан, предполагается, что игрок может вращать головоломку с любой стороны, дотрагиваясь до любого камня-головоломки (см. раздел <a href="#st_005fpuzzle">st_puzzle</a>). Запрошенное количество толчков перемешивания будет производиться со стороны произвольных камней-головоломок таким образом, чтобы игрок мог гарантированно решить головоломку, обладая возможностью оперировать с любыми её сторонами.
</p>
<p>Если для любого камня-головоломки установить значение атрибута &lsquo;<samp>algorithm</samp>&rsquo; равным <code>&quot;marked&quot;</code>, то преобразование отметит для себя, что игрок не обладает полным доступом, а может взаимодействовать только с помеченных позиций. Позиции можно пометить, установив покрытию атрибут <a href="#push_005fdirections">push_directions</a>. Все покрытия смежные с камнем-головоломкой на границе блока, с которого пользователь может толчком запустить перемешивание головоломки, включая покрытия под другими камнями-головоломками, будут проверяться на значение этого атрибута. Автору уровня необходимо отметить все участки покрытия и следить за тем, чтобы у игрока был к ним непрерывный доступ для решения головоломки с помощью ротаций, вызываемых ударами. Атрибут принимает строковое значение, подстроку из <code>&quot;nesw&quot;</code>, Если она содержит символ направления запрошенного толчка, то это событие толчка будет учавствовать в процессе произвольного обратного перемешивания.
</p>
<p>Следует отметить, что запрет на инициирование вращения для полых камней распространяется и на перемешивание.
</p>
</dd>
<dt> <b>Готовый пример:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">ti[&quot;  &quot;] = {&quot;fl_sahara&quot;}
ti[&quot;##&quot;] = {&quot;st_granite&quot;}

ti[&quot;..&quot;] = {&quot;fl_sahara&quot;, push_directions=&quot;nesw&quot;}

ti[&quot;B&quot;] = {&quot;st_puzzle_blue&quot;}
ti[&quot;Y&quot;] = {&quot;st_puzzle_yellow&quot;}
ti[&quot;I&quot;] = {&quot;st_puzzle_blue&quot;, intensity=2/6}
ti[&quot;M&quot;] = {&quot;st_puzzle_blue&quot;, algorithm=&quot;marked&quot;, intensity=10}

ti[&quot;xx&quot;] = {&quot;#ac_marble_black&quot;} ..ti({&quot;it_magicwand&quot;})

local resolver = res.puzzle(ti, &quot;B&quot;, &quot;Y&quot;, &quot;I&quot;, &quot;M&quot;)

w, h = wo(resolver, &quot;  &quot;, {
&quot;                                        &quot;,
&quot;B1B1B1B1                                &quot;,
&quot;B2B1BjB1                      Y1Y6Y1    &quot;,
&quot;B2B2B2B2                      Y1Y1YC    &quot;,
&quot;                                Y6YnY1  &quot;,
&quot;                ##########      Y1Y1Y1  &quot;,
&quot;                ##M1M1M1##              &quot;,
&quot;  I1I1          ##M1McM1..              &quot;,
&quot;  I6Ia          ..M1M1M1..      xx      &quot;,
&quot;  I1I1            ....####              &quot;,
&quot;                                        &quot;,
&quot;                                        &quot;,
&quot;                                        &quot;
})
</pre></td></tr></table>
</dd>
</dl>



<hr size="6">
<a name="res_002erandom"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#res_002epuzzle" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#res_002etrain" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Resolvers" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Extension-Development" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="res_002erandom-1"></a>
<h3 class="subsection">13.1.7 res.random</h3>
<a name="index-res_002erandom"></a>

<p>Описание уровня, основанное на карте, даёт явный контроль над размещением объектов на отдельных участках сетки карты. Но иногда может захотеться добавить некий элемент случайности в размещение используемых объектов. Например, поверхность может быть двух типов, случайно генерирующих свой вид при загрузке уровня. Случайность может даже усложнить уровень, если один из двух типов покрытия будет изменять направление силы воздействия мыши. Преобразование случайности позволит регулировать такие случаи.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd>
<p><b>res.random</b>(<i>subresolver</i>, <i>hits</i>, <i>replacements</i>)
</p>
<dl compact="compact">
<dt> <i>subresolver</i></dt>
<dd><p>Преобразование, которому должны быть перенаправлены необработанные запросы. В качестве последнего преобразования цепи преобразований может выступать &lsquo;<samp>ti</samp>&rsquo;.
</p></dd>
<dt> <i>hits</i> = <i>key</i> | {<i>hit</i>, <i>hit</i>, ...}</dt>
<dd><p>Либо кодовая строка одной секции, которая описывает секции, которые будут подвержены случайному размещению, либо таблица описаний совпадений, которые будут проверяться параллельно.
</p></dd>
<dt> <i>hit</i> = <i>key</i> | {<i>key</i>, <i>superkey</i>}</dt>
<dd><p>Либо кодовая строка одной секции, либо пара, состоящая из кодовой строки секции и соответствующего первичного ключа секции. Первичный ключ секции устанавливается в дополнение к случайному размещению.
</p></dd>
<dt> <i>replacements</i> = <i>key</i> | {<i>replacement</i>, <i>replacement</i>, ...}</dt>
<dd><p>Либо кодовая строка отдельной секции, которая должна быть неслучайной, либо, в большинстве случаев, таблица описаний замен, из которых случайным образом должен быть выбран окончательный вариант секции.
</p></dd>
<dt> <i>replacement</i> = <i>key</i> | {<i>key</i>, <i>frequency</i>}</dt>
<dd><p>Либо кодовая строка отдельной секции, которая должна быть выбрана с вероятностью &lsquo;<samp>1</samp>&rsquo;, либо пара из кодовой строки секции и заданной частоты (в виде числа). Частота может быть выражена целым или дробным числом, но она должна быть положительной или равной нулю.
</p></dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">res.random(ti, &quot;x&quot;, {&quot;a&quot;, &quot;b&quot;})
res.random(ti, {{&quot;x&quot;, &quot;y&quot;},{&quot;i&quot;,&quot;j&quot;}}, {{&quot;a&quot;, 2}, {&quot;b&quot;, 1}})
</pre></td></tr></table>

</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Каждый код на карте проверяется на наличие совпадений с заданными кодовыми строками. Если такое совпадение будет найдено, то произойдёт замена.
</p>
<p>Заменой станет один из кодов замены секции, выбранных преобразованием. Различные коды выбираются с вероятностью, заданной числовой пропорцией. Если частота отсутствует, берётся частота по умолчанию, равная &lsquo;<samp>1</samp>&rsquo;. Следовательно, в первом примере оба кода выбираются, исходя из пропорции 1:1, а во втором &mdash; из пропорции 2:1.
</p>
<p>Если для кода совпадения задан первичный ключ, этот первичный ключ будет дополнительно пропущен через преобразование. Эта возможность позволяет использовать фактор случайности при размещении в одной секции решётки более одного объекта. Например, предмет или актёр на случайной поверхности. В то время как поверхность будет установлена согласно правилам замены, остальные объекты могут быть установлены с использованием первичного ключа.
</p>
</dd>
<dt> <b>Готовый пример:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">ti[&quot;~&quot;] = {&quot;fl_water&quot;}
ti[&quot;s&quot;] = {&quot;fl_sahara&quot;}
ti[&quot;t&quot;] = {&quot;fl_tigris&quot;}
ti[&quot;i&quot;] = {&quot;fl_inverse_gray&quot;}
ti[&quot;b&quot;] = {&quot;fl_yinyang_yin&quot;}
ti[&quot;w&quot;] = {&quot;fl_yinyang_yang&quot;}

ti[&quot;c&quot;] = {&quot;it_coin_s&quot;}
ti[&quot;p&quot;] = {&quot;it_brush&quot;}

ti[&quot;1&quot;] = {&quot;ac_marble_black&quot;, 0, 0.5}

simple_random = res.random(ti, &quot; &quot;, {&quot;s&quot;, &quot;t&quot;})

full_random = res.random(simple_random, {&quot;.&quot;,{&quot;C&quot;,&quot;c&quot;},{&quot;p&quot;,&quot;p&quot;}},
                                        {{&quot;i&quot;,3},{&quot;b&quot;,4},{&quot;w&quot;,1}})

w, h = wo(full_random, &quot;s&quot;, {
&quot;         ~~.........&quot;,
&quot;         ~~.........&quot;,
&quot;         ~~......C..&quot;,
&quot;         ~~.........&quot;,
&quot;         ~~.........&quot;,
&quot;         ~~.........&quot;,
&quot;         c1.........&quot;,
&quot;         ~~.........&quot;,
&quot;         ~~.........&quot;,
&quot;         ~~.........&quot;,
&quot;         ~~......p..&quot;,
&quot;         ~~.........&quot;,
&quot;         ~~.........&quot;
})
</pre></td></tr></table>

<p>Следует отметить, что в этом примере мы можем использовать &lsquo;<samp>p</samp>&rsquo; как для кода, так и для первичного ключа. Это возможно благодаря тому обстоятельству, что эта секция нигде не устанавливается напрямую. Тогда как код секции &lsquo;<samp>c</samp>&rsquo; используется в другой секции с поверхностью по умолчанию. Поэтому для монеты на нашей случайной поверхности нам нужно использовать другой уникальный код &lsquo;<samp>C</samp>&rsquo;.
</p>
</dd>
</dl>

<hr size="6">
<a name="res_002etrain"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#res_002erandom" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#General-Features" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Resolvers" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Extension-Development" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="res_002etrain-1"></a>
<h3 class="subsection">13.1.8 res.train</h3>
<a name="index-res_002etrain"></a>

<p>Преобразователь цепочки позволяет создавать блуждающие цепочки участков покрытия, функционирующие по принципу железнодорожных составов. Как правило, он применяется для создания групп твёрдых стандартных покрытий, которые блуждают по в ином случае непроходимым покрытиям, например <a href="#fl_005fabyss">fl_abyss</a> или <a href="#fl_005fwater">fl_water</a>.
</p>
<p>Сам путь, по которому перемещаются цепочки покрытий, называется железной дорогой, хотя название &quot;железнодорожный состав&quot; не достаточно точно отражает характеристики подобных цепочек. Но эти имена были выбраны Петром Мачата (Petr Machata) в его первой реализации простой цепочки блуждающих покрытий.
</p>
<p>В отличие от настоящих железнодорожных составов, блуждающие покрытия сами по себе не двигаются. Как следствие, они не перевозят предметы или камни и не позволяют актёру расположиться на них и автоматически отправиться в путь по выбранному маршруту. Этот &quot;железнодорожный состав&quot; по своему принципу действия похож, скорее, на колёса движущегося грузовика: новые участки покрытия добавляются в начале цепочки, в то время как последние участки исчезают.
</p>
<p>По сути, цепочка покрытий состоит из двух локомотивов, которые перемещаются по заданной железной дороге. Передний локомотив меняет участок покрытия на стандартный проходимый, а задний локомотив (если быть точным, расположенный на следующем участке покрытия, следующим за концом цепочки) меняет участок покрытия не непроходимый.
</p>
<p>Как правило, оба локомотива движутся с одинаковой скоростью, поддерживая стабильную длину цепочки. Но преобразование позволяет создать произвольное количество локомотивов, движущихся по железной дороге с произвольной скоростью и в произвольном направлении. Поведение покрытий при этом, скорее всего, больше не будет напоминать поезд, но данное название мы всё равно сохраняем.
</p>
<p>Каждая железнодорожная колея описывается отдельным экземпляром преобразования цепочки. Колеи различных преобразований могут пересекаться друг с другом, но столкновение поездов может привести к непредсказуемым результатам, поскольку локомотивы просто меняют покрытия, не обращая внимания на другие поезда. В будущем планируется добавить атрибуты маршрута и поезда, что позволит создавать ещё более сложные железнодорожные колеи.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd>
<p><b>res.train</b>(<i>subresolver</i>[, <i>suffix</i>][, <i>hits</i>])
</p>
<dl compact="compact">
<dt> <i>subresolver</i></dt>
<dd><p>Преобразование, которому должны быть перенаправлены необработанные запросы. В качестве последнего преобразования цепи преобразований может выступать &lsquo;<samp>ti</samp>&rsquo;.
</p></dd>
<dt> <i>suffix</i></dt>
<dd><p>Строка опционального суффикса кода. Каждая позиция с соответствующим кодом регистрируется в качестве составной части железнодорожной колеи.
</p></dd>
<dt> <i>hits</i> = <i>hit</i>, <i>hit</i>, ...</dt>
<dd><p>Один из многочисленных шагов обработки преобразованием кода покрытия, который определяет позиции железнодорожной колеи с возможными поездами, расположенными на ней.
</p></dd>
<dt> <i>hit</i> = <i>key</i> | {<i>key</i> [, <i>subkey</i>][, edge=<i>edgevalue</i>][, train=<i>trainvalue</i>]}</dt>
<dd><p>Строка кода отдельной секции или список таких строк с опциональными связанными строками подкодов секции и опциональными дополнительными аргументами.
</p></dd>
<dt> <i>edgevalue</i></dt>
<dd><p>Позиция на железнодорожной колее, отмечающая один из двух краёв прямоугольного участка, ограничивающего железнодорожную колею.
</p></dd>
<dt> <i>trainvalue</i> = {<i>successorkey</i> [, <i>predecessorkey</i>] [, length=<i>trainlength</i>] [, orientation=<i>traveldirection</i>] [, interval=<i>speed</i>] [, name=<i>namevalue</i>]}</dt>
<dd><p>Локомотив, перемещающийся с заданной скоростью (по умолчанию 1 участок решётки каждые 0,25&nbsp;сек) в заданном направлении следования. Локомотив меняет участки покрытия на тип, заданный строкой кода-заместителя, которая преобразуется посредством подпреобразования. Если была задана длина железнодорожного состава, то автоматически будет создан второй локомотив, отстающий от первого на заданную длину. Этот передний локомотив будет устанавливать участки покрытия, определённые строкой кода-предшественника. Если локомотиву присвоена строка имени, то к имени переднего локомотива будет добавлен суффикс <code>&quot;_front&quot;</code>.
</p></dd>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">res.train(ti, &quot;.&quot;, {&quot; ^&quot;, train={&quot; ~&quot;, &quot; w&quot;, orientation=NORTH, length=6, interval=0.3}})
res.train(ti, {&quot;e&quot;, edge=true}, {&quot;&gt;&quot;, train={&quot; w&quot;, orientation=EAST}}, {&quot;&lt;&quot;, train={&quot;~&quot;, orientation=WEST}})
</pre></td></tr></table>

</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Каждый код на карте проверяется на наличие совпадений с заданными кодовыми строками. Если совпадение обнаруживается, то позиция добавляется к железнодорожной колее, а подстрока используется для размещения оставшихся объектов на решётке через подпреобразование. Если подкод отсутствует, дополнительные объекты не размещаются.
</p>
<p>Если код не совпал, но была задана строка суффикса, которая совпадает с кодом, то позиция также будет зарегистрирована в качестве части железнодорожной колеи. В этом случае суффиксальная часть кода будет заменена пробелами, а получившийся код будет преобразован с помощью подпреобразования.
</p>
<p>Нет необходимости отмечать каждую позицию железнодорожной колеи, что при наличии на этих позициях большого количества предметов и камней было бы утомительной задачей.  По умолчанию каждый железнодорожный состав движется напрямик. Необходимо только указать позиции, где ему необходимо повернуть налево или направо. Достаточно только указать позиции, следующие за каждым поворотом.
</p>

</dd>
<dt> <b>Готовый пример:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">ti[&quot;  &quot;] = {&quot;fl_sahara&quot;}
ti[&quot; ~&quot;] = {&quot;fl_water&quot;}
ti[&quot; w&quot;] = {&quot;fl_wood&quot;}
ti[&quot;# &quot;] = {&quot;st_rawglass&quot;}
ti[&quot; @&quot;] = {&quot;#ac_marble&quot;}

railway1 = res.train(ti, &quot;.&quot;, {&quot;1^&quot;, train={&quot; ~&quot;, &quot; w&quot;, orientation=NORTH, length=6}})
railway2 = res.train(railway1, {&quot;2e&quot;, edge=true}, {&quot;2^&quot;, train={&quot; ~&quot;, &quot; w&quot;, orientation=NORTH, length=5}})

wo(railway2, &quot;  &quot;, {
    &quot;             .        &quot;,
    &quot;   .                  &quot;,
    &quot;              1^      &quot;,
    &quot;                     @&quot;,
    &quot;              #       &quot;,
    &quot;          2e          &quot;,
    &quot;                      &quot;,
    &quot;                      &quot;,
    &quot;  # #.            2^  &quot;,
    &quot;       .              &quot;,
    &quot;                  2e  &quot;,
    &quot;               .      &quot;,
    &quot;         .            &quot;
})
</pre></td></tr></table>
<p>На первой железнодорожной колее отмечены только важнейшие позиции, которые её определяют.
</p></dd>
</dl>


<hr size="6">
<a name="General-Features"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#res_002etrain" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Display-Follow-Strategy" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Extension-Development" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="General-Features-1"></a>
<h2 class="section">13.2 Общие возможности</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Display-Follow-Strategy">13.2.1 Способы прокрутки изображения</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">    Прокрутка дисплея следом за активным шариком
</td></tr>
<tr><td align="left" valign="top"><a href="#Flood-Spreading">13.2.2 Распространение воды</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Распространение воды по заданной территории
</td></tr>
<tr><td align="left" valign="top"><a href="#Fire-Spreading">13.2.3 Распространение огня</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">             Добыча, использование и тушение огня
</td></tr>
<tr><td align="left" valign="top"><a href="#Heat_002dTransformation">13.2.4 Тепловая трансформация</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        Варианты преобразования некоторых покрытий вблизи очагов возгорания.
</td></tr>
<tr><td align="left" valign="top"><a href="#Freeze-Checking">13.2.5 Проверка тупика</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">            Превращение камней, загнанных в тупик в процессе игры в Сокобан, в st_death
</td></tr>
</table>

<hr size="6">
<a name="Display-Follow-Strategy"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#General-Features" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Flood-Spreading" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#General-Features" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Extension-Development" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Display-Follow-Strategy-1"></a>
<h3 class="subsection">13.2.1 Способы прокрутки изображения</h3>

<p>Поскольку мир может быть больше одного экрана, действующий шарик может выйти за пределы территории, видимой в начале уровня. Изображению нужно как-то за ним следовать.
</p>
<p>В то время как предыдущие версии Enigma предлагали лишь несколько фиксированных способов прокрутки изображения, будущие версии будут обеспечивать значительно более полный контроль над этим аспектом игры. Мы решили перейти на будущие параметры конфигурации уже сейчас. Это позволит нам обеспечить более полный контроль над прокруткой изображения, хотя для некоторых атрибутов пока ещё существует довольно ограниченный набор значений.
</p>
<p>Способ прокрутки описывается при помощи следующих параметров.
</p>
<dl compact="compact">
<dt> <b>Атрибуты:</b></dt>
<dd>
<dl compact="compact">
<dt> <a href="#FollowGrid">FollowGrid</a></dt>
<dt> <a href="#FollowMethod">FollowMethod</a></dt>
<dt> <a href="#FollowThreshold">FollowThreshold</a></dt>
<dt> <a href="#FollowAction">FollowAction</a></dt>
</dl>

</dd>
<dt> <b>Примеры синтаксиса:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">wo[&quot;FollowGrid&quot;] = true
wo[&quot;FollowMethod&quot;] = FOLLOW_SCROLL
</pre></td></tr></table>

</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Значения атрибутов всегда должны задаваться в описанной выше последовательности. Причиной этого служит тот факт, что первые атрибуты могут изменить значения последующих на подходящие значения по умолчанию. Таким образом, в наиболее типичных случаях придётся задавать значения только двух атрибутов.
</p>
<p>Установить режим прокрутки изображения можно в любой момент. Режим можно переключить даже во время игры.
</p>
</dd>
<dt> <b>Допустимые конфигурации для версии Enigma 1.10:</b></dt>
<dd>
<dl compact="compact">
<dt> <b>Пошаговое перемещение через весь экран:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">wo[&quot;FollowGrid&quot;] = true
wo[&quot;FollowMethod&quot;] = FOLLOW_FLIP
</pre></td></tr></table>
<p>Стратегия по умолчанию. Перемещение изображения осуществляется, когда шарик достигает внешней половины крайнего участка решётки. Изображение перемещается на размер полного экрана минус общий ряд или колонка участков решётки.
</p>
</dd>
<dt> <b>Прокрутка до половины экрана:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">wo[&quot;FollowGrid&quot;] = true
wo[&quot;FollowMethod&quot;] = FOLLOW_SCROLL
wo[&quot;FollowAction&quot;] = FOLLOW_HALFSCREEN
</pre></td></tr></table>
<p>Когда шарик достигает внешней половины крайнего участка решётки, изображение плавно перемещается на расстояние половины экрана. Оно перестраивается в соответствии с границами участков решётки. Поскольку на стандартном экране изображение должно было бы перемещаться в горизонтальном направлении на 9,5 участков решётки, изображение будет поочерёдно прокручиваться на 9 и 10 участков. Программа будет пытаться стабилизировать достижимые позиции прокрутки.
</p>
</dd>
<dt> <b>Постоянная плавная прокрутка:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">wo[&quot;FollowGrid&quot;] = false
wo[&quot;FollowMethod&quot;] = FOLLOW_SCROLL
</pre></td></tr></table>
<p>Действующий актёр будет всегда оставаться в центре экрана. Дисплей компенсирует движения актёра попиксельной прокруткой. Позиции дисплея не перестраиваются в соответствии с границами участков решётки.
</p>
</dd>
<dt> <b>Полноэкранная прокрутка:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">wo[&quot;FollowGrid&quot;] = true
wo[&quot;FollowMethod&quot;] = FOLLOW_SCROLL
wo[&quot;FollowAction&quot;] = FOLLOW_FULLSCREEN
</pre></td></tr></table>
<p>Когда шарик достигает наружной половины внешнего участка решётки, изображение прокручивается попиксельно на расстояние полного экрана минус общий ряд или колонка.
</p>
</dd>
<dt> <b>Отсутствие прокрутки:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">wo[&quot;FollowMethod&quot;] = FOLLOW_NO
</pre></td></tr></table>
<p>Прокрутка полностью отсутствует. Даже если действующий актёр выйдет за пределы экрана, изображение останется неизменным.
</p>
</dd>
<dt> <b>Пошаговое перемещение у заданного порога:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">wo[&quot;FollowGrid&quot;] = true
wo[&quot;FollowMethod&quot;] = FOLLOW_FLIP
wo[&quot;FollowThreshold&quot;] = po(2.5, 1.5)
</pre></td></tr></table>
<p>Изображение перемещается, когда шарик оказывается на определённом расстоянии от границы экрана. Изображение перемещается на расстояние полного экрана минус две пороговых дистанции. Полученное изображение перестраивается в соответствии с границами участков решётки даже при нечётных пороговых расстояниях.
</p>
</dd>
<dt> <b>Полноэкранная прокрутка у заданного порога:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">wo[&quot;FollowGrid&quot;] = true
wo[&quot;FollowMethod&quot;] = FOLLOW_SCROLL
wo[&quot;FollowThreshold&quot;] = po(2.5, 1.5)
</pre></td></tr></table>
<p>Изображение перемещается, когда шарик оказывается на определённом расстоянии от границы экрана. Изображение перемещается на расстояние полного экрана минус две пороговых дистанции. Полученное изображение перестраивается в соответствии с границами участков решётки даже при нечётных пороговых расстояниях.
</p></dd>
</dl>

</dd>
</dl>

<hr size="6">
<a name="Flood-Spreading"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Display-Follow-Strategy" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Fire-Spreading" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#General-Features" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Extension-Development" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Flood-Spreading-1"></a>
<h3 class="subsection">13.2.2 Распространение воды</h3>
<a name="index-flood"></a>

<p>Поток воды представляет собой активное покрытие <a href="#fl_005fwater">fl_water</a>, которое, распространяясь из источника, заливает поверхности, для которых установлен атрибут <a href="#floodable">floodable</a>. В отличие от потока, стандартное водное покрытие статично, его атрибут &lsquo;<samp>state</samp>&rsquo; имеет значение &lsquo;<samp>IDLE</samp>&rsquo; и оно не распространяется на соседние участки. Но если поток воды достигнет статичного участка водного покрытия, он пронесётся через него, словно цунами, и продолжит заливать все прибрежные зоны.
</p>
<p>Область распространения потока можно обозначить, установив для всех находящихся на ней участков покрытия значение атрибута <a href="#floodable">floodable</a>, равное <code>true</code>. Не обязательно отмечать как затапливаемые только покрытия <a href="#fl_005fwater">fl_water</a>, а также окаймлённые разновидности <a href="#fl_005fwood">fl_wood</a>, <a href="#fl_005fhay">fl_hay</a> и <a href="#fl_005frock">fl_rock</a>, поскольку они затапливаемы по умолчанию. Обозначенная территория представляет собой зону максимального теоретически возможного распространения воды. Но поток могут временно или постоянно заблокировать препятствия.
</p>
<p>Поток распространяется из источника.  Как только вы добавите &lsquo;<samp>fl_water_source</samp>&rsquo; или установите для атрибута &lsquo;<samp>state</samp>&rsquo; значение &lsquo;<samp>FLOODING</samp>&rsquo;, <a href="#fl_005fwater">fl_water</a> начнёт растекаться по соседним затапливаемым решёткам с скоростью, указанной в атрибуте &lsquo;<samp>interval</samp>&rsquo;. Эта скорость будет унаследована участками покрытия, которые поток затопит.
</p>
<p>Затапливаемые покрытия с находящимися на них непроницаемыми камнями, закрытые двери, объекты <a href="#st_005fwindow">st_window</a> с расположенными на них блокирующими стёклами препятствуют распространению потока на занимаемые ими участки покрытия или, если эти участки уже были затоплены, распространению потока на соседние участки покрытия. Но как только препятствие исчезает (например, <a href="#st_005fdoor">st_door</a> открывается), поток продолжает свой путь. Полые камни, в особенности <a href="#st_005foneway">st_oneway</a>, не блокируют поток воды вне зависимости от способности каких-либо своих разновидностей или каких-либо из своих сторон создавать преграду для актёров.
</p>
<p>Особый интерес представляют объекты <a href="#st_005fbox">st_box</a> и окаймлённые разновидности покрытий <a href="#fl_005fwood">fl_wood</a>, <a href="#fl_005fhay">fl_hay</a> и <a href="#fl_005frock">fl_rock</a>, которые они оставляют после себя. Если покрытие, на котором стоит ящик, является затапливаемым,  то вода затечёт под него. Ящик скроется под водой почти целиком, превратившись в окаймлённое покрытие соответствующего вида. Эти покрытия выступают в роли мостов над водным потоком. Они не создают препятствий для распространения воды на соседние затапливаемые участки покрытия. Таким образом, пользователь не может остановить поток воды, поставив у него на пути <a href="#st_005fbox">st_box</a>, но он может построить таким образом мост, по которому смогут пройти шарики. Эти окаймлённые покрытия могут даже выступать в качестве источника затопления, но мы не рекомендуем использовать это свойство.
</p>
<p>В отличие от описанных выше камней, служащих строительным материалом для покрытий, камни <a href="#st_005fpuzzle">st_puzzle</a> не тонут ни на статичных покрытиях <a href="#fl_005fwater">fl_water</a>, ни в водном потоке. Будучи непроницаемыми камнями, они даже создают преграду для распространения воды на соседние участки решётки. Но, конечно, если его полностью переместить на <a href="#fl_005fwater">fl_water</a>, камень-головоломка утонет при соблюдении необходимых условий.  Остающееся после него покрытие <a href="#fl_005fgray">fl_gray</a> не образует мостов над водой. Оно заполняет пустоту и полностью замещает воду. Таким образом, игрок может использовать камни-головоломки, чтобы остановить поток воды.
</p>
<p>Если поток заливает новые участки решётки, это может повлиять на предметы, которые на них находятся. Так, трещина (<a href="#it_005fcrack">it_crack</a>) будет затоплена и исчезнет. Все разновидности <a href="#it_005fburnable">it_burnable</a>, кроме нефти, тоже исчазают.
</p>
<p>Особым образом ведут себя объекты <a href="#it_005fvortex">it_vortex</a> и <a href="#it_005fwormhole">it_wormhole</a>. Они телепортируют не только актёров, но и воду. Объект <a href="#it_005fwormhole">it_wormhole</a> телепортирует поток в свою точку назначения (&lsquo;<samp>destination</samp>&rsquo;), если для покрытия в этой точке установлен атрибут &lsquo;<samp>floodable</samp>&rsquo;. Объект <a href="#it_005fvortex">it_vortex</a> позволит затопить все свои точки назначения (&lsquo;<samp>destination</samp>&rsquo;), но, конечно же, только в состоянии &lsquo;<samp>OPEN</samp>&rsquo;. Если точки назначения представляют собой другие объекты <a href="#it_005fvortex">it_vortex</a>, то для успешного распространения воды они тоже должны быть открыты. Когда последний закрытый телепорт на любой из конечных точек снова открывается, поток продолжает распространяться. Обратите внимание, что в этом случае поток попадает на участок покрытия снизу. Следовательно, его не сможет заблокировать никакой камень. Но камень, расположенный в точке назначения, всё же может не дать воде разлиться на соседние участки решётки.
</p>
<p>Помните, что у потока воды в Enigma есть целый ряд очень специфических черт. Самая важная из них &mdash; это способность распространяться на все участки покрытия без ограничений, вне зависимости от наличия доступа к источнику воды. Таким образом, после открытия двери, если поток проникнет за неё, то он продолжит распространяться, даже если дверь закрыть. Это также справедливо и для включения и отключения телепортов, а также если поток воды полностью перекрыть камнем-головоломкой. Это сделано намеренно, поскольку данное свойство позволяет избежать многих непредусмотренных вариантов решения и делает поток воды более полезным для авторов уровней.
</p>
<hr size="6">
<a name="Fire-Spreading"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Flood-Spreading" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Heat_002dTransformation" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#General-Features" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Extension-Development" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Fire-Spreading-1"></a>
<h3 class="subsection">13.2.3 Распространение огня</h3>

<p>В версии Enigma 1.0 была представлена новая система огня, которая использует атрибуты и сообщения секций покрытия. По умолчанию огонь после возгорания распространяется по всему ландшафту и уничтожает предметы, шарики и некоторые камни. Огонь распространяется по секциям, которые  являются горючими по умолчанию (например <a href="#fl_005fhay">fl_hay</a> или <a href="#fl_005fwood">fl_wood</a>), для которых установлен атрибут <a href="#burnable">burnable</a> либо на которых имеется один из двух предметов, являющихся индикаторами горючести: невидимый <a href="#it_005fburnable">it_burnable</a> и видимый <code>it_burnable_oil</code>. На горящем покрытии все предметы также сгорают. Однако некоторые предметы не дают покрытию загореться, например <a href="#it_005fmeditation">it_meditation</a> или <a href="#it_005fdynamite">it_dynamite</a> (у которого вместо этого запаливается фитиль).
</p>
<p>Имеется несколько стандартных способов зажигания огня:
</p><ul>
<li> сообщение <code>setfire</code> поджигает покрытие, если оно является горючим и находящийся на нём предмет допускает горение; при наличии на нём огнестойких предметов (например <a href="#it_005fdynamite">it_dynamite</a>) покрытие не загорается.
</li><li> Сообщение <code>heat</code> поджигает горючие покрытия, подобно <code>setfire</code>, но вместе с этим оно запускает <a href="#Heat_002dTransformation">тепловую трансформацию</a> покрытия и находящихся на нём предметов.
</li><li> Сообщения <code>ignite</code> и <code>explosion</code>, инициируемые предметами <a href="#it_005fdynamite">it_dynamite</a> и <a href="#it_005fbomb">it_bomb</a>, могут зажечь огонь посредством предметов <a href="#it_005fburnable">it_burnable</a>[_oil] либо если для покрытия установлен атрибут <a href="#ignitable">ignitable</a> (по умолчанию выключен).
</li><li> Если для покрытия установлен атрибут <code>initfire</code>, то оно начинает гореть уже при инициализации уровня (по умолчанию выключен).
</li><li> О распространении огня на соседние участки решётки см. ниже.
</li></ul>

<p>При необходимости поджечь негорючие участки покрытия, сделать это можно с помощью сообщения <code>forcefire</code>. С точки зрения механики игры это аналогично ручной установке предмета <code>it_burnable_ignited</code>, однако устанавливать <code>it_burnable_ignited</code> вручную не рекомендуется, поскольку это может создать сложности для дальнейшей разработки системы огня.
</p>
<p>Огонь в игре ведёт себя следующим образом:
</p><ul>
<li> он уничтожает объекты <a href="#st_005fbox">st_box</a>_wood, <a href="#st_005fbox">st_box</a>_hay и <a href="#st_005fflat">st_flat</a>_moveburnable, расположенные над ним, а также <a href="#st_005fflat">st_flat</a>_burnable, расположенные под ним;
</li><li> он растапливает <a href="#st_005fice">st_ice</a>, оставляя после него <a href="#fl_005fwater">fl_water</a>;
</li><li> он нагревает близлежацие участки покрытия, которые могут в результате подвергнуться <a href="#Heat_002dTransformation">тепловой трансформации</a>;
</li><li> он может поджечь или уничтожить предметы, расположенные на соседних участках решётки, а именно <a href="#it_005fdynamite">it_dynamite</a>, оба вида <a href="#it_005fbomb">it_bomb</a> и <a href="#it_005fcrack">it_crack</a>;
</li><li> он может поджечь соседние участки покрытия;
</li><li> он уничтожает шарики, не защищённые с помощью объекта <a href="#it_005fumbrella">it_umbrella</a> или других средств. Обратите внимание, что в будущих версиях может появиться возможность прыжка через огонь с помощью объекта <a href="#it_005fspring">it_spring</a>.
</li></ul>

<p>Огонь тухнет через случайный промежуток времени, если для покрытия не установлен атрибут <code>eternal</code>. При этом он может заменить имеющийся вид покрытия на другой (осуществить его &quot;тепловую трансформацию&quot;): <a href="#fl_005fwood">fl_wood</a> меняется на <a href="#fl_005fabyss">fl_abyss</a>, а <a href="#fl_005flawn">fl_lawn</a> &mdash; на <a href="#fl_005fdunes">fl_dunes</a>. Кроме того, он оставляет после себя на покрытии предмет <a href="#it_005fburnable">it_burnable</a>_ash, который не даёт покрытию загореться повторно. Данный можно убрать с помощью щётки (<a href="#it_005fbrush">it_brush</a>). Однако пепел не образуется, если для покрытия был установлен атрибут <a href="#noash">noash</a> (по умолчанию установлен только для <a href="#fl_005fabyss">fl_abyss</a>).
</p>
<p>Поскольку распространение огня является случайным событием, в версии 0.92 автор уровня не мог быть уверен, что огонь загорится или что какой-либо конкретный предмет будет подожжён. Начиная с версии 1.0, это можно гарантировать, установив атрибут <a href="#secure">secure</a>. Если покрытие с атрибутом <code>secure = true</code> расположено рядом с огнём, то рано или поздно оно загорится вместе с находящимися на нём предметами и т. д. По умолчанию для атрибута <code>secure</code> установлено значение <code>false</code>.
</p>
<p>В версии 0.92 существовало две скорости огня: при использовании объекта <a href="#it_005fburnable">it_burnable</a> огонь распространялся значительно быстрее, чем без него. Это справедливо и для версии 1.0 и выше. Однако в этих версиях можно установить атрибут <a href="#fastfire">fastfire</a>, чтобы ускорить горение без использования невидимого объекта <a href="#it_005fburnable">it_burnable</a>, причём данный метод является рекомендуемым.
</p>
<p>Если огонь горит под камнем, то распространяться он не может; единственными исключениями являются парящие камни, такие как <a href="#st_005fgrate">st_grate</a>, а также камни, в любом случае уничтожаемые огнём (<a href="#st_005fbox">st_box</a>_wood, <a href="#st_005fbox">st_box</a>_hay, <a href="#st_005fflat">st_flat</a>_burnable, <a href="#st_005fflat">st_flat</a>_moveburnable). В противоположность данному случаю, огонь также может распространяться под подвижные камни, но не дальше.
</p>
<p>Потушить огонь можно с помощью объекта <code>it_extinguisher</code>, который в создаёт огнестойкий объект <code>it_burnable_fireproof</code>. Потушить огонь также можно, сдвинув на него абсолютно инертный камень <a href="#st_005fbox">st_box</a>_rock<B>:</B> это единственный подвижный камень, под которым не может гореть огонь. Наконец, огонь можно потушить, отправив покрытию сообщение <code>stopfire</code>.
</p>
<p><strong>Отличия между версиями 1.0 и 0.92</strong>
</p>
<p>Старая система огня, использовавшаяся в Enigma версии 0.92 и ниже, отличается от системы, используемой начиная с версии 1.0, в следующих основных аспектах:
</p>
<ul>
<li> трансформация под воздействием огня отсутствует, за исключением превращения <a href="#fl_005fwood">fl_wood</a> в <a href="#fl_005fabyss">fl_abyss</a>;
</li><li> <a href="#Heat_002dTransformation">тепловая трансформация</a> отсутствует;
</li><li> на покрытии <a href="#fl_005fabyss">fl_abyss</a> остаётся пепел;
</li><li> разные покрытия ведут себя одинаково;
</li><li> распространения огня на одинаковые покрытия вместо горючих покрытий: версия 0.92 не различала горючие и негорючие покрытия. Вместо этого огонь медленно распространялся на участки покрытия того же типа;
</li><li> горючие предметы всегда загораются: в версии 1.0 и выше, в отличие от версии 0.92, горючие предметы на негорючем покрытии (за исключением предмета <a href="#it_005fburnable">it_burnable</a>[_oil]), не загораются.
</li></ul>

<p>Систему, приближённую к версии 0.92, можно использовать с помощью режима совместимости: во всех режимах игры, кроме режима Enigma (см. разделы <a href="#Engine-Compatibility">Совместимость движка</a> и <a href="#g_t_003ccompatibility_003e">&lt;compatibility&gt;</a>), используется система огня, лишь в незначительной степени отличающаяся от версии 0.92, но позволяющая пользоваться некоторыми преимуществами новой версии, например атрибутами <a href="#secure">secure</a> или <code>eternal</code>.
</p>
<p>Обратите внимание, что в версии 0.92 трансформация под воздействием огня осуществлялась в начале горения, что приводило к так называемой ошибке &quot;горящей пропасти&quot;. В этом заключаются основные отличия системы огня в версии 0.92 от режимов, кроме режима Enigma, используемых в версии 1.0.
</p>
<p><strong>Горючие и огнеупорные покрытия</strong>
</p>
<p>Все покрытия, по виду похожие на пластмассу, ткань или органические материалы, по умолчанию являются горючими: <code>fl_adhesionless, fl_aquamarine, fl_bluegray, fl_bluegreen, fl_blueslab, fl_fake_trigger, fl_hay, fl_ivory, fl_marble, fl_platinum, fl_red, fl_redslab, fl_rough*, fl_tigris, fl_woven</code>.
</p>
<p>Все покрытия, по виду похожие на дерево, являются горючими и оставляют после себя <a href="#fl_005fabyss">fl_abyss</a>: <code>fl_bast, fl_plank, fl_samba*, fl_wood*</code> и <a href="#fl_005fbridge">fl_bridge</a>_b*.
</p>
<p>Все покрытия, по виду похожие на траву, являются горючими и оставляют после себя <a href="#fl_005fdunes">fl_dunes</a>: <a href="#fl_005flawn">fl_lawn</a>.
</p>
<p>Все прочие покрытия являются огнеупорными (то есть, по умолчанию не горят): <code>fl_abyss*, fl_brick, fl_bright, fl_concrete, fl_dark, fl_darkgray, fl_dummy, fl_dunes,  fl_gravel, fl_gray, fl_himalaya, fl_ice, fl_inverse*, fl_metal*, fl_mortar, fl_pinkbumps, fl_rock, fl_sahara, fl_sand, fl_slope*, fl_space, fl_stone, fl_swamp, fl_water, fl_white, fl_yinyang*</code> и <a href="#fl_005fbridge">fl_bridge</a>_g*.
</p>
<p>Открытый мост (<a href="#fl_005fbridge">fl_bridge</a>) не горит никогда: данное свойство обладает приоритетом над всеми прочими свойствами предметов и атрибутами. Закрытые мосты (<a href="#fl_005fbridge">fl_bridge</a>) являются горючими исключительно в своей коричневой разновидности, но это можно изменить, установив нужное значение атрибута <B><code>burnable</code>.</B> Обратите внимание, что при изменении типа <a href="#fl_005fbridge">fl_bridge</a> значение атрибута <code>burnable</code> также будет изменено на значение по умолчанию для нового типа.
</p>
<p><strong>Огнеупорные предметы</strong>
</p>
<p>Большинство предметов являются пассивно горючими, то есть: предмет будет уничтожен огнём тогда и только тогда, когда покрытие под ним способно сгореть самостоятельно.  Однако некоторые предметы реагируют на огонь особым образом (<code>it_burnable, it_burnable_oil, it_dynamite, it_bomb*, it_crack*</code>), а некоторые являются абсолютно огнестойкими. А именно: <code>it_burnable_ash, it_burnable_fireproof, it_debris, it_dummy, it_explosion*, it_extinguisher, it_extinguisher_medium, it_meditation*, it_trap, it_vortex*</code> и собственно анимированные изображения огня: <code>it_burnable_ignited</code> и <code>it_burnable_burning</code>.
</p>
<p>Обратите внимание, что предметы  <code>it_extinguisher_empty, it_trigger</code> (видимый и невидимый), <code>it_landmine</code> и <code>it_death</code> являются пассивно горючими.  В частности, <code>it_landmine</code> при горении не взрывается и не создаёт <code>it_meditation</code>. Поведение объекта <a href="#it_005fsensor">it_sensor</a> под воздействием огня может быть изменено в последующих версиях игры.
</p>
<p>Если пассивно горючий предмет необходимо защитить от огня, просто создайте под ним огнеупорное покрытие, например <code>fl_sand</code> или <code>fl_rock</code>. Такой способ часто применяется при использовании <a href="#it_005fstrip">it_strip</a>. Однако данные покрытия можно сделать горючими с помощью установки значения атрибута <code>burnable</code>.
</p>
<hr size="6">
<a name="Heat_002dTransformation"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Fire-Spreading" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Freeze-Checking" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#General-Features" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Extension-Development" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Heat_002dTransformation-1"></a>
<h3 class="subsection">13.2.4 Тепловая трансформация</h3>

<p>Если огонь загорается возле объекта <a href="#fl_005fice">fl_ice</a>, то данный объект тает, оставляя после себя <a href="#fl_005fwater">fl_water</a>. Похожим образом покрытие <a href="#fl_005fwater">fl_water</a> превращается в <a href="#fl_005fswamp">fl_swamp</a>, а оно в свою очередь в <a href="#fl_005fdunes">fl_dunes</a>. В отличие от большинства аспектов горения огня, данная трансформация не является случайной, но осуществляется всегда при условии, что на соседнем участке покрытия загорается огонь (то есть, один раз для каждого нового огня).
</p>
<p>Примеры: поместим объект <a href="#st_005fbox">st_box</a>_rock на покрытие <a href="#fl_005fice">fl_ice</a>. Огонь растопит лёд, а <a href="#st_005fbox">st_box</a>_rock  создаст надёжный мост через огонь. Если вместо этого использовать объект <a href="#st_005fbox">st_box</a>_wood, то будет создано покрытие <a href="#fl_005fwood">fl_wood</a>_framed, которое также может сгореть, оставив после себя <a href="#fl_005fabyss">fl_abyss</a>. Наконец, <a href="#st_005fbox">st_box</a>_hay превратится в покрытие <a href="#fl_005fhay">fl_hay</a>_framed, которое также является горючим, но не оставит после себя <a href="#fl_005fabyss">fl_abyss</a>. Похожим образом ведёт себя сочетание <code>fl_water</code> и <a href="#st_005fchess">st_chess</a>.
</p>
<p>Тепловую трансформацию можно осуществить принудительно, отправив покрытию сообщение <code>heat</code>.
</p>
<p>Если вам необходимо не допустить тепловой трансформации, используйте один из режимов совместимости вместо режима Enigma.
</p>
<hr size="6">
<a name="Freeze-Checking"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Heat_002dTransformation" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Tips-and-Tricks" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#General-Features" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Extension-Development" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Freeze-Checking-1"></a>
<h3 class="subsection">13.2.5 Проверка тупика</h3>

<p>В версии Enigma 1.1 и выше имеется особая функция для поддержки уровней и фрагментов уровней типа Сокобан. Если подвижный камень столкнуть на участок, с которого его сдвинуть больше нельзя, то этот камень автоматически превратится в <a href="#st_005fdeath">st_death</a>, демонстрируя, что игра проиграна, и давая игроку возможность быстро перезапустить уровень.
</p>
<p>Данная функциональность называется &quot;Проверка тупика&quot;. Она применяется к каждому камню с атрибутом <code>freeze_check = true</code>, который был перемещён на участок покрытия с атрибутом <code>freeze_check = true</code>. Использование данного атрибута позволяет ограничить проверку тупика заданной областью. Для настоящего Сокобана секции-цели не должны быть отмечены как <code>freeze_check = true</code>, поскольку ящик, находящийся на целевой секции, даже в тупике, не препятствует решению уровня. С другой стороны, вы можете указать, для каких ящиков будет осуществляться проверка тупика. Это даёт ещё большую свободу в использовании других камней за пределами зоны Сокобана: атрибут <code>freeze_check</code> должен быть активирован как для покрытия, так и для камня.
</p>
<p>Проверка тупика распознаёт три основные сочетания камней, которые блокируют стандартный подвижный камень. Если <code>B</code> &mdash; это ящик (подвижный или устойчивый), а <code>#</code> &mdash; это стена (устойчивая):
</p><table><tr><td>&nbsp;</td><td><pre class="example">BB   #B   #B
BB    #    B#
</pre></td></tr></table>
<p>Есть и другие сочетания объектов, препятствующие решению уровня, которые не распознаются игрой, вот пример простейшего из них:
</p><table><tr><td>&nbsp;</td><td><pre class="example">#B
 BB
  #
</pre></td></tr></table>
<p>Не используйте тот факт, что игра не распознаёт данные скопления, при создании уровней: это поведение может измениться в последующих версиях игры.
</p>
<p>Имейте в виду: проверка тупика не является интеллектуальной. Она не может предсказать, что одна из ваших функций может убрать камень, что какая-либо дверь может больше не открыться (двери при проверке тупика не учитываются), и она не учитывает наличие на уровне объектов <a href="#it_005fpuller">it_puller</a>, <a href="#it_005fcherry">it_cherry</a> или <a href="#st_005fswap">st_swap</a>. Данная функция обрабатывает специальные камни таким образом, чтобы минимизировать ложные срабатывания проверки тупика.
</p>
<p>Парящие камни (например <a href="#st_005fgrate">st_grate</a>) создают совершенно новые тупиковые совокупности. В следующих двух примерах только правое скопление создаёт тупик (<code>G</code> &mdash; это<code>st_grate_cross</code>):
</p><table><tr><td>&nbsp;</td><td><pre class="example">G    G
BB   BB
GB   GBG
</pre></td></tr></table>
<p>В настоящее время ни одно из этих скоплений не распознаётся игрой как тупик, поскольку парящие камни при проверке тупика не учитываются. Чтобы оценить сложность проблемы, попробуйте сами определить, какое из приведённых ниже скоплений является тупиком:
</p><table><tr><td>&nbsp;</td><td><pre class="example">G      G      GBG   GB#    G G#G
B#    BBB     BB    GB G   BBBBB
G    #B B#   #B      G     G#G G
      G G     G
</pre></td></tr></table>

<p>В некоторых случаях разные камни обрабатываются различным образом, хоть и имеют похожие свойства: <a href="#st_005fbox">st_box</a>_wood и <code>st_flat_moveburnable</code> (см. раздел <a href="#st_005fflat">st_flat</a>) оба являются подвижными и разрушаются огнём (см. раздел <a href="#Fire-Spreading">Распространение огня</a>). Они никогда не будут определяться как находящиеся в тупике, поскольку их можно легко сжечь. В то же время для <code>st_box_wood</code> по умолчанию осуществляется проверка тупика, в то время как <code>st_flat_moveburnable</code> вообще не учитывается. Это происходит потому, что <code>st_box_wood</code> часто используется в случаях, когда огонь отсутствует, в то время как <code>st_flat_moveburnable</code> обычно используется в сочетании с огнём.
</p>
<p>Другим примером является <a href="#st_005fshogun">st_shogun</a>_s, который по умолчанию считается подвижным камнем, в отличие от других камней сёгун. Таким образом, вы можете использовать камень <code>st_shogun_s</code> в сочетании с целью <a href="#it_005fshogun">it_shogun</a>_s, не опасаясь ложных срабатываний проверки тупика из-за нестандартного способа перемещения камней сёгун.
</p>
<p>В заключение необходимо отметить, что проверку тупика следует использовать лишь как подсказку для игрока. Она не предназначена для того, чтобы подвижные камни превращать в неподвижные или давать игроку возможность вернуться к началу уровня. В будущих версиях игри данная функциональность может быть изменена. В версиях игры младше 1.1 проверка тупика вообще отсутствует, так что нельзя полагаться на то, что она будет осуществляться. Эта функциональность разработана специально для уровней и частей уровней, основанных на игре Сокобан, и должна использоваться только для них.
</p>
<hr size="6">
<a name="Tips-and-Tricks"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Freeze-Checking" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Nearest-Object-Clustering" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Extension-Development" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Tips-and-Tricks-1"></a>
<h2 class="section">13.3 Советы и хитрости</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Nearest-Object-Clustering">13.3.1 Группировка ближайших объектов</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">    Когда ближайший объект ссылается на недопустимую цель
</td></tr>
<tr><td align="left" valign="top"><a href="#Orthogonal-Autotiling">13.3.2 Ортогональное автоопределение секций</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">        Автоопределение при различных источниках и целях
</td></tr>
</table>

<hr size="6">
<a name="Nearest-Object-Clustering"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Tips-and-Tricks" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Orthogonal-Autotiling" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Tips-and-Tricks" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Extension-Development" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Nearest-Object-Clustering-1"></a>
<h3 class="subsection">13.3.1 Группировка ближайших объектов</h3>

<p>Как описано в главе <a href="#Object-Naming">Именование объектов</a>, ближайший объект предоставляет важную возможность уменьшить количество необходимых объявлений секций. Так как выбор должен быть однозначным, необходимо было установить правило, действующее в случае равных расстояний: южные объекты обладают приоритетом над всеми объектами, восточные на втором месте, камни обладают приоритетом над предметами, покрытиями и актёрами.
</p>
<p>В большинстве случаев создатели уровней могут расположить свои объекты так, чтобы они удовлетворяли этим правилам. Но иногда дизайн уровня не позволяет непосредственно использовать простой выбор ближайшего объекта. Например:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">ti[&quot;F&quot;] = {&quot;st_floppy&quot;, target=&quot;@door#*&quot;}
ti[&quot;B&quot;] = {&quot;st_blocker&quot;, name=&quot;door#&quot;}
wo{ti, &quot; &quot;, {
&quot;       B            &quot;,
&quot;       FB#####FB####&quot;,
&quot;       # F    B     &quot;,
&quot;       # #    F#####&quot;,
</pre></td></tr></table>

<p>В обоих случаях дисковод, расположенный между двумя блокирующими дверьми, открывает не ту дверь.
</p>
<p>Однако можно использовать идею группировки, похожую на ту, которую мы рассмотрели в главе <a href="#Cluster-Stones">Строительные камни</a>. Просто добавьте одну или, в редких случаях, две или три дополнительных группы. Отнесите все стандартные ситуации к группе A, а остальные к группе B:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">ti[&quot;F&quot;] = {&quot;st_floppy&quot;, target=&quot;@doorA#*&quot;}
ti[&quot;B&quot;] = {&quot;st_blocker&quot;, name=&quot;doorA#&quot;}
ti[&quot;f&quot;] = {&quot;st_floppy&quot;, target=&quot;@doorB#*&quot;}
ti[&quot;b&quot;] = {&quot;st_blocker&quot;, name=&quot;doorB#&quot;}
wo{ti, &quot; &quot;, {
&quot;       b            &quot;,
&quot;       fB#####fb####&quot;,
&quot;       # F    B     &quot;,
&quot;       # #    F#####&quot;,
</pre></td></tr></table>

<p>Для группировки дверей в две группы понадобится два дополнительных объявления секций. Но она может дать возможность управлять дюжиной сочетаний переключателей и дверей.
</p>
<hr size="6">
<a name="Orthogonal-Autotiling"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Nearest-Object-Clustering" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Extension-Development" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Tips-and-Tricks" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Extension-Development" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Orthogonal-Autotiling-1"></a>
<h3 class="subsection">13.3.2 Ортогональное автоопределение секций</h3>

<p>Автоопределение секций удобно использовать, когда необходимо определить большое количество пар &quot;цель-действие&quot;, даже если объекты-источники и объекты-цели не совпадают (то есть, имеют разные коды секций). В таких случаях мы говорим об &lsquo;<samp>ортогональном автоопределении секций</samp>&rsquo;. Рассмотрим некоторые важные аспекты версии уровня &lsquo;<samp>Laser Games</samp>&rsquo;, использующей API 2:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">...
ti[&quot;T*&quot;] = {&quot;it_trigger&quot;, target = &quot;mirror%%&quot;, action_1 = &quot;turn&quot;, action_0 = &quot;turnback&quot;}
ti[&quot;F*&quot;] = {&quot;st_fourswitch&quot;, target = &quot;mirror%%&quot;}
ti[&quot;1*&quot;] = {&quot;st_mirror&quot;, name = &quot;mirror%%&quot;, flavor = &quot;triangle&quot;, orientation = NORTH}
ti[&quot;2*&quot;] = {&quot;st_mirror&quot;, name = &quot;mirror%%&quot;, flavor = &quot;triangle&quot;, orientation = SOUTH}
ti[&quot;3*&quot;] = {&quot;st_mirror&quot;, name = &quot;mirror%%&quot;, orientation = NORTH}
...

local resolver = res.autotile(ti, {&quot;T&quot;, &quot;T*&quot;}, {&quot;F&quot;, &quot;F*&quot;},
    {&quot;1&quot;, &quot;1*&quot;}, {&quot;2&quot;, &quot;2*&quot;}, {&quot;3&quot;, &quot;3*&quot;}, {&quot;4&quot;, &quot;4*&quot;}, {&quot;5&quot;, &quot;5*&quot;},
    {&quot;6&quot;, &quot;6*&quot;}, {&quot;7&quot;, &quot;7*&quot;}, {&quot;8&quot;, &quot;8*&quot;}, {&quot;9&quot;, &quot;9*&quot;})

w, h = wo(resolver, &quot;  &quot;, {
&quot;# # # # # # # # # # # $ # $ # $ # $ # # &quot;,
&quot;#                 #                   # &quot;,
&quot;#     =   =       #   1a  9b  3c  2d  $ &quot;,
&quot;#             =   #                   # &quot;,
&quot;#     TaTbTcTd    #   3e  4f  5g  4h  $ &quot;,
&quot;#     TeFfFgTh    #                   # &quot;,
&quot;#     TiFjFkTl    #   6i  3j  4k  7l  $ &quot;,
&quot;#     TmFnFoTp    #                   # &quot;,
&quot;#     TqTrTsTt    #   8m  7n  6o  8p  $ &quot;,
&quot;#                 #                   # &quot;,
&quot;#       @   =     #   1q  7r  3s  2t  $ &quot;,
&quot;#                 #                   # &quot;,
&quot;# # # # # # # # # # # $ # $ # $ # ^ # # &quot;
})
...
</pre></td></tr></table>

<p>У нас имеются различные виды источников действий (триггеры <code>T</code> и четырёхнаправленные переключатели <code>F</code>) и различные типы целей (зеркала <code>1</code>, <code>2</code> и т. д.). Однако поскольку все зеркала однотипно поименованы <code>mirror%%</code>, где <code>%%</code> замещается символами от <code>%a</code> до <code>%t</code>, связи между объектами легко создать без необходимости учитывать различные типы объектов: Триггер <code>Ta</code> повернёт зеркало <code>1a</code> (которое имеет имя <code>mirror%a</code>), <code>Tb</code> же в свою очередь повернёт <code>9b</code> и т. д. Если мы захотим заменить зеркало <code>1a</code>, например, на зеркало типа <code>2</code>, мы просто заменим <code>1a</code> на <code>2a</code>, сохранив пару цель-действие.
</p>
<p>В данном случае полезным оказывается атрибут <code>counterclock</code>: все зеркала на данном уровне поворачиваются по часовой стрелке, за исключением <code>9b</code>. Без атрибута <code>counterclock</code> нам бы пришлось использовать функцию обратного вызова, чтобы определить цель, и вручную выбирать между действиями <code>turn</code> и <code>turnback</code>. Однако, установив
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">ti[&quot;9*&quot;] = {&quot;st_mirror&quot;, name = &quot;mirror%%&quot;, flavor = &quot;triangle&quot;,
                         orientation = SOUTH, counterclock = true}
</pre></td></tr></table>

<p>мы можем отправлять одинаковые сообщения всем зеркалам, которым соответствуют триггеры (например <code>turn</code> при нажатии триггера и <code>turnback</code>, когда он отпущен), и одновременно добиться того, чтобы одно или несколько зеркал вели себя особым образом (например поворачивались в противоположном направлении). Похожим образом может использоваться атрибут <code>inverse</code>.
</p>

<hr size="6">
<a name="Extension-Development"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Orthogonal-Autotiling" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Resolver-Development" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Advanced-Features" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Guidelines-and-Hints" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Extension-Development-1"></a>
<h1 class="chapter">14. Разработка расширений</h1>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Resolver-Development">14.1 Разработка преобразований</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Resolver-Development"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Extension-Development" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Resolver-Configurator" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Extension-Development" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Extension-Development" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Guidelines-and-Hints" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Resolver-Development-1"></a>
<h2 class="section">14.1 Разработка преобразований</h2>

<p>Целью преобразований является предоставление возможности лёгкой интеграции расширений для нужд создателей уровней. Кроме того, преобразования должны быть как можно более гибкими. Чтобы соответствовать этим требованиям, каждое преобразование состоит из трёх частей: блоков настройки, реализации и завершения.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Resolver-Configurator">14.1.1 Блок настройки преобразования</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Resolver-Implementation">14.1.2 Блок реализации преобразования</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Resolver-Finalizer">14.1.3 Блок завершения преобразования</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>


<hr size="6">
<a name="Resolver-Configurator"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Resolver-Development" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Resolver-Implementation" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Extension-Development" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Resolver-Development" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Guidelines-and-Hints" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Resolver-Configurator-1"></a>
<h3 class="subsection">14.1.1 Блок настройки преобразования</h3>
<a name="index-res_002eresolvername"></a>

<p>Блок настройки &mdash; это функция, вызываемая, когда создателю уровня требуются особые параметры преобразования.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>context = <b>res.resolvername</b>(<i>subresolver</i>,...)
</p>
<dl compact="compact">
<dt> <i>subresolver</i></dt>
<dd><p>Преобразование, которому должны быть перенаправлены необработанные запросы. В качестве последнего преобразования цепи преобразований может выступать &lsquo;<samp>ti</samp>&rsquo;.
</p></dd>
</dl>

</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>У этой функции всего один обязательный параметр &mdash; подпреобразование. Можно указать и остальные произвольные параметры, которые понадобятся для работы преобразования.
</p>
<p>Все служебные преобразования будут зарегистрированы в таблице регистрации &lsquo;<samp>res</samp>&rsquo; под их служебными именами:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">function res.composer(subresolver)
    ...
end
</pre></td></tr></table>

<p>Эта функция блока настройки будет вызвана всего однажды, при запуске уровня. Она вызывается после объявления секций и перед тем, как будет размещена первая секция и сможет быть вызван блок реализации.
</p>
<p>В задачи функции блока настройки входит тщательная проверка передаваемых пользователем параметров и вывод соответствующего сообщения об ошибке для неверных параметров. Используйте следующий вызов сообщения об ошибке Lua на уровне 2 либо полезные вспомогательные функции <a href="#assert_005fbool">assert_bool</a> и <a href="#assert_005ftype">assert_type</a>:
</p><table><tr><td>&nbsp;</td><td><pre class="example">error(&quot;Resolver autotile rule &quot; .. i..&quot; is not a table&quot;, 2)
assert_bool(is_resolver(subresolver), &quot;res.composer first argument (subresolver)&quot;, 2)
assert_type(args[1], &quot;res.composer second argument (sequence)&quot;, 2, &quot;non-empty string&quot;)
</pre></td></tr></table>

<p>Функция блока настройки должна возвращать таблицу, которая содержит переменные окружения для последующих вызовов блока реализации. Эта таблица содержит три предопределённых записи:
</p>
<dl compact="compact">
<dt> <b>[1]</b> = <i>функция блока реализации</i></dt>
<dt> <b>[2]</b> = <i>функция блока завершения</i></dt>
<dt> <b>[3]</b> = <i>преобразование</i></dt>
<dt> <b>...</b> = дополнительные записи, специфичные для преобразования</dt>
</dl>

<p>Все выбранные и предварительно обработанные параметры должны храниться в этой таблице переменных окружения для дальнейшего использования. Функция преобразования из блока реализации обычно записывается как &lsquo;<samp>res.resolvername_implementation</samp>&rsquo;. Если завершение не требуется, то блок завершения может быть &lsquo;<samp>nil</samp>&rsquo;. Преобразование, переданное первым параметром вызова блока настройки, должно находиться в третьей записи таблицы переменных окружения.
</p>
<p>Переменная окружения требует добавления метатаблицы с двумя записями. Вначале элемент <code>&quot;_type&quot;</code> должен определить контекст в качестве типа данных Enigma для функции <a href="#etype">etype</a>. Большинство преобразований просто сохраняют строку <code>&quot;resolver&quot;</code>, но некоторые могут возвращать особые идентификационные строки, например <code>&quot;maze&quot;</code>. Второй необходимой записью является <code>&quot;_resolver&quot;</code>, которому необходимо присвоить булево значение &lsquo;<samp>true</samp>&rsquo; для надёжной идентификации таблиц преобразований. Метатаблица преобразований по умолчанию хранится в &lsquo;<samp>res.metatable</samp>&rsquo; и может быть непосредственно установлена с помощью &lsquo;<samp>setmetatable</samp>&rsquo;.
</p>
</dd>
<dt> <b>Готовый пример:</b></dt>
<dd><table><tr><td>&nbsp;</td><td><pre class="example">function res.composer(subresolver)
    assert_bool(is_resolver(subresolver), &quot;res.composer first argument (subresolver)&quot;, 2)
    local context = {res.composer_implementation, nil, subresolver}
    setmetatable(context, res.metatable)
    return context
end
</pre></td></tr></table>
</dd>
</dl>

<hr size="6">
<a name="Resolver-Implementation"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Resolver-Configurator" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Resolver-Finalizer" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Extension-Development" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Resolver-Development" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Guidelines-and-Hints" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Resolver-Implementation-1"></a>
<h3 class="subsection">14.1.2 Блок реализации преобразования</h3>
<a name="index-res_002ecomposer_005fimplementation"></a>

<p>Когда, при создании мира, карта начинает заполняться, к преобразованию высшего уровня обращаются, чтобы для каждого кода узнать правильное описание секции. Это делается следующим вызовом.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p>tile = <b>resolver_implementation</b>(<i>context</i>, <i>evaluator</i>, <i>key</i>, <i>x</i>, <i>y</i>)
</p>
<dl compact="compact">
<dt> <i>context</i></dt>
<dd><p>Таблица переменных окружения, которую возвращает <a href="#Resolver-Configurator">Блок настройки преобразования</a>.
</p></dd>
<dt> <i>evaluator</i></dt>
<dd><p>Системная функция, вызываемая всякий раз, когда преобразованию необходимо найти код по его преобразованию низшего уровня.
</p></dd>
<dt> <i>key</i></dt>
<dd><p>Кодовая строка, которая должна быть разобрана.
</p></dd>
<dt> <i>x</i>, <i>y</i></dt>
<dd><p>Позиция секции.
</p></dd>
</dl>

</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>На основании полученных параметров, кодов, позиций, параметров преобразований, хранящихся в таблице переменных окружения, и существующих секций, к которым можно обратиться с помощью вычислительной функции, реализация должна решить, влияет ли всё это на код. Следует отметить, что на данный момент ни к какому объекту мира нельзя получить доступ по его координатам. При каждом вызове следует допускать, что эта секция может быть размещена первой.
</p>
<p>Если этим преобразованием код не будет преобразован до конца, через вычислительную функцию нужно вызвать другое преобразование:
</p><table><tr><td>&nbsp;</td><td><pre class="example">local tile = evaluator(context[3], key, x, y)
</pre></td></tr></table>

<p>Не забывайте, что преобразование хранится в третьей записи таблицы переменных окружения. Если изменения вносить не надо, то полученная секция должна остаться неизменной.
</p>
<p>Но если нужно вернуть другую секцию, это можно сделать. Можно выбрать другой код и запросить у подпреобразования соответствующую секцию. Можно даже объединить две секции, которые вернули последовательные вызовы подпреобразований. Разрешается, используя таблицу объявлений объекта, вернуть новую секцию. Вот несколько возможных конструкций для возврата:
</p><table><tr><td>&nbsp;</td><td><pre class="example">return evaluator(context[3], &quot;a&quot;, x, y)
return evaluator(context[3], &quot;a&quot;, x, y) .. evaluator(context[3], &quot;b&quot;, x, y)
return evaluator(context[3], &quot;a&quot;, x, y) .. ti({&quot;st_laser_n&quot;, state=ON})
</pre></td></tr></table>

<p>Разрешается даже добавить в хранилище секций новые объявления секций, чтобы ускорить последующие вызовы:
</p><table><tr><td>&nbsp;</td><td><pre class="example">ti[&quot;newkey&quot;] = evaluator(context[3], &quot;a&quot;, x, y) .. ti({&quot;st_laser_n&quot;, state=ON})
</pre></td></tr></table>

<p>Преобразование блока реализации для дальнейших вызовов может хранить и изменять любой из своих параметров в таблице переменных окружения. В частности, для операций завершающей обработки в блоке завершения преобразований, оно может воспользоваться списком всех координат.
</p>
</dd>
<dt> <b>Готовый пример:</b></dt>
<dd><p>Реализация составителя преобразований (без обработки особого 3-символьного кода)
</p><table><tr><td>&nbsp;</td><td><pre class="example">function res.composer_implementation(context, evaluator, key, x, y)
    local tile = evaluator(context[3], key, x, y)
    if tile ~= nil then
        return tile
    end
    -- try to compose tile
    for i = 1, #key do
        local subkey = string.rep(&quot; &quot;, i-1) .. string.sub(key, i, i) .. string.rep(&quot; &quot;, #key - i)
        local subtile = evaluator(context[3], subkey, x, y)
        if subtile == nil then
            return nil
        end
        if tile == nil then
            tile = subtile
        else
            tile = tile .. subtile
        end
    end
    return tile
end
</pre></td></tr></table>
</dd>
</dl>

<hr size="6">
<a name="Resolver-Finalizer"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Resolver-Implementation" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Guidelines-and-Hints" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Extension-Development" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Resolver-Development" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Guidelines-and-Hints" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Resolver-Finalizer-1"></a>
<h3 class="subsection">14.1.3 Блок завершения преобразования</h3>
<a name="index-res_002eresolver_005ffinalization"></a>

<p>Если <a href="#Resolver-Configurator">Блок настройки преобразования</a> в своей таблице переменных окружения предоставляет функцию завершения преобразования, она будет вызвана, как только все секции будут размещены на карте.
</p>
<dl compact="compact">
<dt> <b>Синтаксис:</b></dt>
<dd><p><b>resolver_finalization</b>(<i>context</i>)
</p>
<dl compact="compact">
<dt> <i>context</i></dt>
<dd><p>Таблица переменных окружения, которую возвращает <a href="#Resolver-Configurator">Блок настройки преобразования</a>.
</p></dd>
</dl>

</dd>
<dt> <b>Подробности:</b></dt>
<dd><p>Функции завершения цепочки преобразований вызываются, начиная с высшего уровня и заканчивая низшим.
</p>
<p>Многие преобразования не нуждаются в завершении. Но некоторым, таким как конструктор лабиринтов, нужно знать все задействованные секции, чтобы иметь возможность завершить свою работу.
</p>
<p>Поскольку все секции карты к этому времени обработаны, теперь можно взаимодействовать с объектами. Остальная информация может храниться в таблице переменных окружения преобразований.
</p>
<p>Блок завершения ни вызывает свои преобразования низшего уровня, ни возвращает значений.
</p></dd>
</dl>


<hr size="6">
<a name="Guidelines-and-Hints"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Resolver-Finalizer" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Filename-Recommendation" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Extension-Development" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Compatibility" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Guidelines-and-Hints-1"></a>
<h1 class="chapter">15. Советы и рекомендации</h1>

<p>В предыдущих разделах мы подробно описывали все свойства игры. Конечно же, для своих собственных уровней вы можете использовать их как угодно. Мы намерены поддерживать все свойства в будущих версиях Enigma.
</p>
<p>Но чтобы стать частью проекта Enigma, уровни должны соответствовать определённым стандартам. Соблюдение приведённых ниже рекомендаций позволяет гарантировать, что ваши уровни могут быть легко обработаны нашими административными инструментами, игроки смогут эти уровни обсуждать, а разработчики проекта их редактировать в случае крайней необходимости.
</p>
<p>Кроме того, мы дадим вам некоторые рекомендации, касающиеся стратегии написания хороших уровней.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Filename-Recommendation">15.1 Имя файла</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Title-Recommendation">15.2 Название уровня</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Tile-Key-Recommendation">15.3 Выбор кодов секций</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Easy-Mode-Hints">15.4 Рекомендации по использованию простого режима сложности</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Filename-Recommendation"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Guidelines-and-Hints" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Title-Recommendation" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Guidelines-and-Hints" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Guidelines-and-Hints" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Compatibility" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Filename-Recommendation-1"></a>
<h2 class="section">15.1 Имя файла</h2>
<p>Не используйте пробелы.
</p>
<hr size="6">
<a name="Title-Recommendation"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Filename-Recommendation" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Tile-Key-Recommendation" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Guidelines-and-Hints" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Guidelines-and-Hints" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Compatibility" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Title-Recommendation-1"></a>
<h2 class="section">15.2 Название уровня</h2>
<p>Предпочтительно использовать английские названия; рекомендуется использовать подзаголовки.
</p>
<hr size="6">
<a name="Tile-Key-Recommendation"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Title-Recommendation" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Easy-Mode-Hints" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Guidelines-and-Hints" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Guidelines-and-Hints" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Compatibility" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Tile-Key-Recommendation-1"></a>
<h2 class="section">15.3 Выбор кодов секций</h2>

<p>Приведённые ниже рекомендации не являются обязательными, но мы тем не менее рекомендуем их соблюдать, поскольку они облегчают разработку новых уровней и поддержку старых.
</p>
<ul>
<li> Для камней используются прописные буквы, для предметов &mdash; строчные, для покрытий &mdash; знаки пунктуации.
</li><li> Код покрытия по умолчанию имеет следующий вид: <code>&quot; &quot;</code>. Код второго по значению покрытия обычно имеет вид <code>&quot;_&quot;</code> или <code>&quot;.&quot;</code>. Для покрытий рекомендуется использовать небольшие коды секций, которые не отвлекают внимание от более важных объектов, таких как камни и предметы. Для кодов важных покрытий (например мостов) могут использоваться буквы и цифры, чтобы подчеркнуть значение этих покрытий (мост, например, может обозначаться символом <code>&quot;b&quot;</code> или числом для использования автоматического определения секций).
</li><li> Вода обычно обозначается <code>&quot;~&quot;</code>, поскольку тильда напоминает собой волну. Аналогично, пропасть может обозначаться символом подчёркивания <code>&quot;_&quot;</code>, поскольку он напоминает яму.
</li><li> В немецкой раскладке клавиатуры символы <code>&quot;.&quot;</code>, <code>&quot;,&quot;</code>, <code>&quot;:&quot;</code> и <code>&quot;;&quot;</code> образуют собой квадрат, что позволяет легко использовать их для создания повторяющихся сочетаний из четырёх секций, например участков газона различной яркости. В американской раскладке с этой целью можно использовать клавиши <code>&quot;,&quot;</code>, <code>&quot;.&quot;</code>, <code>&quot;&lt;&quot;</code> и <code>&quot;&gt;&quot;</code>. Другим подобным сочетанием из четырёх клавиш являются арифметические операторы <code>&quot;+&quot;</code>, <code>&quot;-&quot;</code>,<code>&quot;*&quot;</code> и <code>&quot;/&quot;</code>.
</li><li> Склоны можно создать с помощью клавиш <code>&quot;&lt;&quot;</code>, <code>&quot;&gt;&quot;</code>, <code>&quot;v&quot;</code> и <code>&quot;^&quot;</code>. Как видите, в этом случае для нижнего участка покрытия мы рекомендуем использовать клавишу <code>&quot;v&quot;</code>, поскольку данный символ напоминает стрелку, направленную вниз. Для создания пологих склонов можно использовать цифры, вводимые с цифровой клавиатуры, символы, расположенные на клавиатуре рядом, например <code>&quot;.&quot;</code>, <code>&quot;,&quot;</code>, <code>&quot;:&quot;</code>, <code>&quot;;&quot;</code>, или арифметические операторы.
</li><li> Хотя знак <code>&quot;/&quot;</code> кажется очевидным кандидатом для данной роли, использовать обратный слеш мы не рекомендуем, поскольку для его корректной работы необходима маска. По этой же причине мы не рекомендуем использовать в качестве кодов секций скобки.
</li><li> Самый важный простой камень следует обозначать символом <code>&quot;#&quot;</code>, для прочих камней необходимо использовать первые буквы их названий, &ldquo;laser&rdquo; -&gt; <code>&quot;L&quot;</code>, &ldquo;switch&rdquo; -&gt; <code>&quot;S&quot;</code>, &ldquo;box&rdquo; -&gt; <code>&quot;B&quot;</code> и т. д. Если названия камней начинаются с одной и той же буквы, то приоритет следует отдавать более важному из них (<code>&quot;L&quot;</code> для лазера вместо <code>&quot;L&quot;</code> для <code>&quot;st_lightglass&quot;</code>, <code>&quot;G&quot;</code> для <code>&quot;st_lightglass&quot;</code> вместо <code>&quot;G&quot;</code> для <code>&quot;st_greenbrown&quot;</code>).
</li><li> Для камней, имеющих направление (болдеры, лазеры и т. д.) необходимо использовать символы <code>&quot;N&quot;</code>, <code>&quot;E&quot;</code>, <code>&quot;S&quot;</code>, <code>&quot;W&quot;</code>, если на уровне имеются камни нескольких направлений.
</li><li> Камни одного вида, используемые на уровне несколько раз в различных ситуациях (например переключатели, выполняющие различные действия), должны именоваться последовательными буквами (<code>&quot;S&quot;</code>, <code>&quot;T&quot;</code>, <code>&quot;U&quot;</code> и т. д.) или числами.
</li><li> Для камней-оксидов необходимо использовать символы <code>&quot;O&quot;</code> или <code>&quot;0&quot;</code>. При наличии нескольких отличающихся друг от друга оксидов (например, разного цвета) используйте последовательные буквы (<code>&quot;P&quot;</code>, <code>&quot;Q&quot;</code>, <code>&quot;R&quot;</code> и т. д.) или цифры.
</li><li> Для зеркал целесообразно использовать символы, ассоциирующиеся с направлениями этих зеркал, например <code>&quot;|&quot;</code>, <code>&quot;-&quot;</code> и <code>&quot;/&quot;</code>. Поскольку обратный слеш является неудачным выбором для использования в качестве кода секции, вместо него можно использовать символы <code>&quot;&amp;&quot;</code> или <code>&quot;Q&quot;</code>, поскольку в их составе есть заметная наклонная линия, похожая на обратный слеш. Треугольные зеркала лучше описывать с помощью символов <code>&quot;&lt;&quot;</code>, <code>&quot;&gt;&quot;</code>, <code>&quot;v&quot;</code> и <code>&quot;^&quot;</code>.
</li><li> Для вращающихся камней рекомендуется использовать символы <code>&quot;R&quot;</code> и <code>&quot;L&quot;</code>, соответственно для вращающихся по часовой стрелке (right &mdash; право) и против часовой (left &mdash; лево). Также можно использовать символы, при написании которых рука движется по часовой стрелке и против часовой стрелки, например <code>&quot;p&quot;</code> и <code>&quot;q&quot;</code>. Обратите внимание, что выбор символа может зависить от того, как вы привыкли их писать.
</li><li> Для документов используются символы <code>&quot;d&quot;</code> или <code>&quot;i&quot;</code> (от <code>&quot;information&quot;</code>), при этом <code>&quot;d&quot;</code> используется чаще  (например, для автоматического заполнения). Если на уровне имеется несколько документов, для них можно использовать последовательные символы (<code>&quot;i&quot;</code>, <code>&quot;j&quot;</code>, <code>&quot;k&quot;</code> и т. д.). Помните, что при наличии на уровне большого количества документов можно воспользоваться автоматическим заполнением секций.
</li><li> Монеты могут обозначаться символами <code>&quot;c&quot;</code>, <code>&quot;$&quot;</code> или цифрами, соответствующими их достоинству.
</li><li> Шарики должны обозначаться<code>&quot;@&quot;</code>, для обозначения всех прочих актёров необходимо использовать строчные буквы (<code>&quot;t&quot;</code> для ac_top, <code>&quot;p&quot;</code> для ac_pearl и т. д.) или хорошо заметные пунктуационные знаки.
</li><li> Для автозаполнения секций удобно использовать <code>&quot;X&quot;</code>, <code>&quot;Y&quot;</code>, <code>&quot;x&quot;</code>, <code>&quot;y&quot;</code>, <code>&quot;*&quot;</code>, <code>&quot;?&quot;</code> и подобные символы, ассоциирующиеся с переменными в качестве шаблонов. Также в качестве кодов шаблонов секций можно использовать полные слова, например <code>&quot;door&quot;</code> или <code>&quot;switch&quot;</code>, что является более простым способом.
</li></ul>

<hr size="6">
<a name="Easy-Mode-Hints"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Tile-Key-Recommendation" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Compatibility" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Guidelines-and-Hints" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Guidelines-and-Hints" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Compatibility" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Easy-Mode-Hints-1"></a>
<h2 class="section">15.4 Рекомендации по использованию простого режима сложности</h2>
<p>Вначале напишите уровень в простом режиме. Трение покрытия.
</p>

<hr size="6">
<a name="Compatibility"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Easy-Mode-Hints" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Engine-Compatibility" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Guidelines-and-Hints" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Compatibility-1"></a>
<h1 class="chapter">16. Совместимость</h1>


<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Engine-Compatibility">16.1 Совместимость движка</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">     Различия между режимами совместимости
</td></tr>
</table>

<hr size="6">
<a name="Engine-Compatibility"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Compatibility" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Object-Index" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Compatibility" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Compatibility" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Engine-Compatibility-1"></a>
<h2 class="section">16.1 Совместимость движка</h2>

<p>Хотя прототипом Enigma послужила серия игр Oxyd, существуют некоторые различия между &quot;родным&quot; режимом движка Enigma и другими режимами, а также между этими режимами.  С помощью элемента <a href="#g_t_003ccompatibility_003e">&lt;compatibility&gt;</a> метаданных XML можно активировать эти особые свойства. Ниже приведён список основных различий между режимами
</p>
<p><strong>Все режимы, кроме основного режима Enigma <code>(oxyd1, per.oxyd, oxyd.magnum, oxyd.extra)</code></strong>
</p>
<ul>
<li> При использовании <a href="#it_005fkey">it_key</a> они не остаются в камне <a href="#st_005fkey">st_key</a>.
</li><li> Оксиды (<a href="#st_005foxyd">st_oxyd</a>) должны мигнуть перед окончательным открытием (поэтому пары оксидов необходимо открывать с некоторой задержкой по времени).
</li><li> Модель огня, используемая в режимах игры, кроме основного режима Enigma, в целом аналогична той, которая использовалась в версии 0.92 (см. раздел <a href="#Fire-Spreading">Распространение огня</a>).
</li><li> Объекты <a href="#it_005fsquashed">it_squashed</a> и <a href="#it_005fcross">it_cross</a> нельзя убрать с помощью <a href="#it_005fbrush">it_brush</a>.
</li><li> Единственной функцией объекта <a href="#it_005fpencil">it_pencil</a> является превращение объекта <a href="#st_005fflat">st_flat</a> и его подвижной разновидности в горючую разновидность.
</li><li> Объект <a href="#it_005fbottle">it_bottle</a> не разбивается, если на него столкнуть камень.
</li><li> Объекты <a href="#st_005fswap">st_swap</a> и <a href="#st_005fpull">st_pull</a> не могут быть перемещены на границу уровня.
</li></ul>


<p><strong>Режим совместимости <code>oxyd1</code></strong>
</p>
<ul>
<li> Из объекта <a href="#it_005fseed">it_seed</a>, находящегося под <a href="#st_005fgrate">st_grate</a>_cross, вырастает <a href="#fl_005fwood">fl_wood</a>_framed, а не <a href="#st_005fbox">st_box</a>_wood.
</li><li> Летающие актёры могут пролетать над <a href="#st_005fgrate">st_grate</a>.
</li><li> Объект <a href="#st_005fbox">st_box</a>_wood падает, только если его сдвинуть.
</li><li> Сообщение <code>ignite</code> (отправляемое, например, объектом <a href="#it_005fdynamite">it_dynamite</a>) не уничтожает <a href="#it_005fdocument">it_document</a>.
</li><li> Бомбы (<a href="#it_005fbomb">it_bomb</a>) не взрываются, если на них сдвинуть <a href="#st_005fbox">st_box</a>_wood (см. режим совместимости <code>oxydmagnum</code>).
</li></ul>


<p><strong>Режим совместимости <code>per.oxyd</code></strong>
</p>
<ul>
<li> Под действием объекта <a href="#it_005fbrush">it_brush</a> камень <a href="#st_005fghost">st_ghost</a>_purplemarble превращается в открытый <a href="#st_005ffake">st_fake</a>_oxydc вместо <code>st_purplemarble</code>.
</li><li> Объект <a href="#it_005fhammer">it_hammer</a> не превращается в <a href="#it_005fsword">it_sword</a> под действием лазера.
</li><li> Объект <a href="#it_005fumbrella">it_umbrella</a> не взрывается под действием лазера.
</li><li> Объект <a href="#it_005fcross">it_cross</a> изменяет полученный сигнал на противоположный.
</li></ul>


<p><strong>Режим совместимости <code>oxyd.magnum</code></strong>
</p>
<ul>
<li> Из объекта <a href="#it_005fseed">it_seed</a>, находящегося под <a href="#st_005fgrate">st_grate</a>_cross, вырастает <a href="#fl_005fwood">fl_wood</a>_framed, а не <a href="#st_005fbox">st_box</a>_wood.
</li><li> Бомбы (<a href="#it_005fbomb">it_bomb</a>) не взрываются, если на них сдвинуть <a href="#st_005fbox">st_box</a>_wood (см. режим совместимости <code>oxyd1</code>).
</li></ul>




<hr size="6">
<a name="Object-Index"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Engine-Compatibility" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Attribute-Index" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Compatibility" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Attribute-Index" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Object-Index-1"></a>
<h1 class="unnumbered">Указатель объектов</h1>

<table><tr><th valign="top">Перейти к: &nbsp; </th><td><a href="#Object-Index-1_ob_letter-A" class="summary-letter"><b>A</b></a> &nbsp; <a href="#Object-Index-1_ob_letter-F" class="summary-letter"><b>F</b></a> &nbsp; <a href="#Object-Index-1_ob_letter-I" class="summary-letter"><b>I</b></a> &nbsp; <a href="#Object-Index-1_ob_letter-N" class="summary-letter"><b>N</b></a> &nbsp; <a href="#Object-Index-1_ob_letter-O" class="summary-letter"><b>O</b></a> &nbsp; <a href="#Object-Index-1_ob_letter-S" class="summary-letter"><b>S</b></a> &nbsp; 
</td></tr></table>
<table border="0" class="index-ob">
<tr><td></td><th align="left">Статья указателя</th><th align="left"> Раздел</th></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Object-Index-1_ob_letter-A">A</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-ac_005fbug">ac_bug</a></td><td valign="top"><a href="#ac_005fbug">10.2.1 ac_bug</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ac_005fhorse">ac_horse</a></td><td valign="top"><a href="#ac_005fhorse">10.2.2 ac_horse</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ac_005fkiller">ac_killer</a></td><td valign="top"><a href="#ac_005fkiller">10.2.3 ac_killer</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ac_005fmarble">ac_marble</a></td><td valign="top"><a href="#ac_005fmarble">10.2.4 ac_marble</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ac_005fpearl">ac_pearl</a></td><td valign="top"><a href="#ac_005fpearl">10.2.5 ac_pearl</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ac_005frotor">ac_rotor</a></td><td valign="top"><a href="#ac_005frotor">10.2.6 ac_rotor</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ac_005ftop">ac_top</a></td><td valign="top"><a href="#ac_005ftop">10.2.7 ac_top</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Object-Index-1_ob_letter-F">F</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-fl_005fabyss">fl_abyss</a></td><td valign="top"><a href="#fl_005fabyss">7.4.1 fl_abyss</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fl_005fadhesionless">fl_adhesionless</a></td><td valign="top"><a href="#fl_005fadhesionless">7.3.1 fl_adhesionless</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fl_005faquamarine">fl_aquamarine</a></td><td valign="top"><a href="#fl_005faquamarine">7.3.2 fl_aquamarine</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fl_005fbast">fl_bast</a></td><td valign="top"><a href="#fl_005fbast">7.3.3 fl_bast</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fl_005fbluegray">fl_bluegray</a></td><td valign="top"><a href="#fl_005fbluegray">7.3.4 fl_bluegray</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fl_005fbluegreen">fl_bluegreen</a></td><td valign="top"><a href="#fl_005fbluegreen">7.3.5 fl_bluegreen</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fl_005fblueslab">fl_blueslab</a></td><td valign="top"><a href="#fl_005fblueslab">7.3.6 fl_blueslab</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fl_005fbrick">fl_brick</a></td><td valign="top"><a href="#fl_005fbrick">7.3.7 fl_brick</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fl_005fbridge">fl_bridge</a></td><td valign="top"><a href="#fl_005fbridge">7.4.2 fl_bridge</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fl_005fbright">fl_bright</a></td><td valign="top"><a href="#fl_005fbright">7.3.8 fl_bright</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fl_005fconcrete">fl_concrete</a></td><td valign="top"><a href="#fl_005fconcrete">7.3.9 fl_concrete</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fl_005fdark">fl_dark</a></td><td valign="top"><a href="#fl_005fdark">7.3.10 fl_dark</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fl_005fdarkgray">fl_darkgray</a></td><td valign="top"><a href="#fl_005fdarkgray">7.3.11 fl_darkgray</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fl_005fdunes">fl_dunes</a></td><td valign="top"><a href="#fl_005fdunes">7.3.12 fl_dunes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fl_005ffake">fl_fake</a></td><td valign="top"><a href="#fl_005ffake">7.4.3 fl_fake</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fl_005fgravel">fl_gravel</a></td><td valign="top"><a href="#fl_005fgravel">7.3.13 fl_gravel</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fl_005fgray">fl_gray</a></td><td valign="top"><a href="#fl_005fgray">7.3.14 fl_gray</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fl_005fhay">fl_hay</a></td><td valign="top"><a href="#fl_005fhay">7.4.4 fl_hay</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fl_005fhimalaya">fl_himalaya</a></td><td valign="top"><a href="#fl_005fhimalaya">7.3.15 fl_himalaya</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fl_005fice">fl_ice</a></td><td valign="top"><a href="#fl_005fice">7.4.5 fl_ice</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fl_005finverse">fl_inverse</a></td><td valign="top"><a href="#fl_005finverse">7.4.6 fl_inverse</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fl_005fivory">fl_ivory</a></td><td valign="top"><a href="#fl_005fivory">7.3.16 fl_ivory</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fl_005flawn">fl_lawn</a></td><td valign="top"><a href="#fl_005flawn">7.3.17 fl_lawn</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fl_005fmarble">fl_marble</a></td><td valign="top"><a href="#fl_005fmarble">7.3.18 fl_marble</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fl_005fmetal">fl_metal</a></td><td valign="top"><a href="#fl_005fmetal">7.3.19 fl_metal</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fl_005fmortar">fl_mortar</a></td><td valign="top"><a href="#fl_005fmortar">7.3.20 fl_mortar</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fl_005fnil">fl_nil</a></td><td valign="top"><a href="#Tile-and-Object-Declaration">5.11 Описание секций и объектов</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fl_005fpinkbumps">fl_pinkbumps</a></td><td valign="top"><a href="#fl_005fpinkbumps">7.3.21 fl_pinkbumps</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fl_005fplank">fl_plank</a></td><td valign="top"><a href="#fl_005fplank">7.3.22 fl_plank</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fl_005fplatinum">fl_platinum</a></td><td valign="top"><a href="#fl_005fplatinum">7.3.23 fl_platinum</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fl_005fred">fl_red</a></td><td valign="top"><a href="#fl_005fred">7.3.24 fl_red</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fl_005fredslab">fl_redslab</a></td><td valign="top"><a href="#fl_005fredslab">7.3.25 fl_redslab</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fl_005frock">fl_rock</a></td><td valign="top"><a href="#fl_005frock">7.4.7 fl_rock</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fl_005frough">fl_rough</a></td><td valign="top"><a href="#fl_005frough">7.3.26 fl_rough</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fl_005fsahara">fl_sahara</a></td><td valign="top"><a href="#fl_005fsahara">7.3.27 fl_sahara</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fl_005fsamba">fl_samba</a></td><td valign="top"><a href="#fl_005fsamba">7.3.28 fl_samba</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fl_005fsand">fl_sand</a></td><td valign="top"><a href="#fl_005fsand">7.3.29 fl_sand</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fl_005fscales">fl_scales</a></td><td valign="top"><a href="#fl_005fscales">7.4.8 fl_scales</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fl_005fslope">fl_slope</a></td><td valign="top"><a href="#fl_005fslope">7.4.9 fl_slope</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fl_005fspace">fl_space</a></td><td valign="top"><a href="#fl_005fspace">7.3.30 fl_space</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fl_005fstone">fl_stone</a></td><td valign="top"><a href="#fl_005fstone">7.3.31 fl_stone</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fl_005fswamp">fl_swamp</a></td><td valign="top"><a href="#fl_005fswamp">7.4.10 fl_swamp</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fl_005fthief">fl_thief</a></td><td valign="top"><a href="#fl_005fthief">7.4.11 fl_thief</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fl_005ftigris">fl_tigris</a></td><td valign="top"><a href="#fl_005ftigris">7.3.32 fl_tigris</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fl_005fwater">fl_water</a></td><td valign="top"><a href="#fl_005fwater">7.4.12 fl_water</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fl_005fwhite">fl_white</a></td><td valign="top"><a href="#fl_005fwhite">7.3.33 fl_white</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fl_005fwood">fl_wood</a></td><td valign="top"><a href="#fl_005fwood">7.4.13 fl_wood</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fl_005fwoven">fl_woven</a></td><td valign="top"><a href="#fl_005fwoven">7.3.34 fl_woven</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fl_005fyinyang">fl_yinyang</a></td><td valign="top"><a href="#fl_005fyinyang">7.4.14 fl_yinyang</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Object-Index-1_ob_letter-I">I</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005fbag">it_bag</a></td><td valign="top"><a href="#it_005fbag">8.3.1 it_bag</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005fbanana">it_banana</a></td><td valign="top"><a href="#it_005fbanana">8.3.2 it_banana</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005fblocker">it_blocker</a></td><td valign="top"><a href="#it_005fblocker">8.4.1 it_blocker</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005fbomb">it_bomb</a></td><td valign="top"><a href="#it_005fbomb">8.4.2 it_bomb</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005fbottle">it_bottle</a></td><td valign="top"><a href="#it_005fbottle">8.3.3 it_bottle</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005fbrake">it_brake</a></td><td valign="top"><a href="#it_005fbrake">8.3.4 it_brake</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005fbrush">it_brush</a></td><td valign="top"><a href="#it_005fbrush">8.3.5 it_brush</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005fburnable">it_burnable</a></td><td valign="top"><a href="#it_005fburnable">8.4.3 it_burnable</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005fcherry">it_cherry</a></td><td valign="top"><a href="#it_005fcherry">8.3.6 it_cherry</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005fcoffee">it_coffee</a></td><td valign="top"><a href="#it_005fcoffee">8.3.7 it_coffee</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005fcoin">it_coin</a></td><td valign="top"><a href="#it_005fcoin">8.3.8 it_coin</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005fcrack">it_crack</a></td><td valign="top"><a href="#it_005fcrack">8.4.4 it_crack</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005fcross">it_cross</a></td><td valign="top"><a href="#it_005fcross">8.4.5 it_cross</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005fdeath">it_death</a></td><td valign="top"><a href="#it_005fdeath">8.4.6 it_death</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005fdocument">it_document</a></td><td valign="top"><a href="#it_005fdocument">8.3.9 it_document</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005fdrop">it_drop</a></td><td valign="top"><a href="#it_005fdrop">8.3.10 it_drop</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005fdynamite">it_dynamite</a></td><td valign="top"><a href="#it_005fdynamite">8.3.11 it_dynamite</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005fexplosion">it_explosion</a></td><td valign="top"><a href="#it_005fexplosion">8.4.7 it_explosion</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005fextinguisher">it_extinguisher</a></td><td valign="top"><a href="#it_005fextinguisher">8.3.12 it_extinguisher</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005fextralife">it_extralife</a></td><td valign="top"><a href="#it_005fextralife">8.3.13 it_extralife</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005fflag">it_flag</a></td><td valign="top"><a href="#it_005fflag">8.3.14 it_flag</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005ffloppy">it_floppy</a></td><td valign="top"><a href="#it_005ffloppy">8.3.15 it_floppy</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005fglasses">it_glasses</a></td><td valign="top"><a href="#it_005fglasses">8.3.16 it_glasses</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005fhammer">it_hammer</a></td><td valign="top"><a href="#it_005fhammer">8.3.17 it_hammer</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005fkey">it_key</a></td><td valign="top"><a href="#it_005fkey">8.3.18 it_key</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005flandmine">it_landmine</a></td><td valign="top"><a href="#it_005flandmine">8.4.8 it_landmine</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005flaserbeam">it_laserbeam</a></td><td valign="top"><a href="#it_005flaserbeam">8.4.9 it_laserbeam</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005fmagicwand">it_magicwand</a></td><td valign="top"><a href="#it_005fmagicwand">8.3.19 it_magicwand</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005fmagnet">it_magnet</a></td><td valign="top"><a href="#it_005fmagnet">8.4.10 it_magnet</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005fmeditation">it_meditation</a></td><td valign="top"><a href="#it_005fmeditation">8.4.11 it_meditation</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005fnil">it_nil</a></td><td valign="top"><a href="#Tile-and-Object-Declaration">5.11 Описание секций и объектов</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005fpencil">it_pencil</a></td><td valign="top"><a href="#it_005fpencil">8.3.20 it_pencil</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005fpin">it_pin</a></td><td valign="top"><a href="#it_005fpin">8.3.21 it_pin</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005fpipe">it_pipe</a></td><td valign="top"><a href="#it_005fpipe">8.3.22 it_pipe</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005fpuller">it_puller</a></td><td valign="top"><a href="#it_005fpuller">8.3.23 it_puller</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005fring">it_ring</a></td><td valign="top"><a href="#it_005fring">8.3.24 it_ring</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005frubberband">it_rubberband</a></td><td valign="top"><a href="#it_005frubberband">8.3.25 it_rubberband</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005fseed">it_seed</a></td><td valign="top"><a href="#it_005fseed">8.3.26 it_seed</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005fsensor">it_sensor</a></td><td valign="top"><a href="#it_005fsensor">8.4.12 it_sensor</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005fshogun">it_shogun</a></td><td valign="top"><a href="#it_005fshogun">8.4.13 it_shogun</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005fspade">it_spade</a></td><td valign="top"><a href="#it_005fspade">8.3.27 it_spade</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005fspoon">it_spoon</a></td><td valign="top"><a href="#it_005fspoon">8.3.28 it_spoon</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005fspring">it_spring</a></td><td valign="top"><a href="#it_005fspring">8.3.29 it_spring</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005fspringboard">it_springboard</a></td><td valign="top"><a href="#it_005fspringboard">8.4.14 it_springboard</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005fsquashed">it_squashed</a></td><td valign="top"><a href="#it_005fsquashed">8.4.15 it_squashed</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005fstrip">it_strip</a></td><td valign="top"><a href="#it_005fstrip">8.4.16 it_strip</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005fsurprise">it_surprise</a></td><td valign="top"><a href="#it_005fsurprise">8.3.30 it_surprise</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005fsword">it_sword</a></td><td valign="top"><a href="#it_005fsword">8.3.31 it_sword</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005ftrap">it_trap</a></td><td valign="top"><a href="#it_005ftrap">8.4.17 it_trap</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005ftrigger">it_trigger</a></td><td valign="top"><a href="#it_005ftrigger">8.4.18 it_trigger</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005fumbrella">it_umbrella</a></td><td valign="top"><a href="#it_005fumbrella">8.3.32 it_umbrella</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005fvortex">it_vortex</a></td><td valign="top"><a href="#it_005fvortex">8.4.19 it_vortex</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005fweight">it_weight</a></td><td valign="top"><a href="#it_005fweight">8.3.33 it_weight</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005fwormhole">it_wormhole</a></td><td valign="top"><a href="#it_005fwormhole">8.4.20 it_wormhole</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005fwrench">it_wrench</a></td><td valign="top"><a href="#it_005fwrench">8.3.34 it_wrench</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-it_005fyinyang">it_yinyang</a></td><td valign="top"><a href="#it_005fyinyang">8.3.35 it_yinyang</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Object-Index-1_ob_letter-N">N</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-nil">nil</a></td><td valign="top"><a href="#Tile-and-Object-Declaration">5.11 Описание секций и объектов</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Object-Index-1_ob_letter-O">O</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-ot_005fcannonball">ot_cannonball</a></td><td valign="top"><a href="#ot_005fcannonball">11.1.1 ot_cannonball</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ot_005fcounter">ot_counter</a></td><td valign="top"><a href="#ot_005fcounter">11.2.1 ot_counter</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ot_005frubberband">ot_rubberband</a></td><td valign="top"><a href="#ot_005frubberband">11.1.2 ot_rubberband</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ot_005ftimer">ot_timer</a></td><td valign="top"><a href="#ot_005ftimer">11.2.2 ot_timer</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ot_005fwire">ot_wire</a></td><td valign="top"><a href="#ot_005fwire">11.1.3 ot_wire</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Object-Index-1_ob_letter-S">S</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005factorimpulse">st_actorimpulse</a></td><td valign="top"><a href="#st_005factorimpulse">9.5.1 st_actorimpulse</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fancient">st_ancient</a></td><td valign="top"><a href="#st_005fancient">9.3.1 st_ancient</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fbarrier">st_barrier</a></td><td valign="top"><a href="#st_005fbarrier">9.5.2 st_barrier</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fbeads">st_beads</a></td><td valign="top"><a href="#st_005fbeads">9.5.3 st_beads</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fblocker">st_blocker</a></td><td valign="top"><a href="#st_005fblocker">9.5.4 st_blocker</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fbluegray">st_bluegray</a></td><td valign="top"><a href="#st_005fbluegray">9.3.2 st_bluegray</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fbluesand">st_bluesand</a></td><td valign="top"><a href="#st_005fbluesand">9.4.2 st_bluesand</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fblur">st_blur</a></td><td valign="top"><a href="#st_005fblur">9.5.5 st_blur</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fboulder">st_boulder</a></td><td valign="top"><a href="#st_005fboulder">9.5.6 st_boulder</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fbox">st_box</a></td><td valign="top"><a href="#st_005fbox">9.5.7 st_box</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fbrake">st_brake</a></td><td valign="top"><a href="#st_005fbrake">9.5.8 st_brake</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fbreak">st_break</a></td><td valign="top"><a href="#st_005fbreak">9.5.9 st_break</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fbrick">st_brick</a></td><td valign="top"><a href="#st_005fbrick">9.4.3 st_brick</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fbrownie">st_brownie</a></td><td valign="top"><a href="#st_005fbrownie">9.3.3 st_brownie</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fbrownmarble">st_brownmarble</a></td><td valign="top"><a href="#st_005fbrownmarble">9.3.4 st_brownmarble</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fbrownpyramid">st_brownpyramid</a></td><td valign="top"><a href="#st_005fbrownpyramid">9.5.10 st_brownpyramid</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fcamouflage">st_camouflage</a></td><td valign="top"><a href="#st_005fcamouflage">9.3.5 st_camouflage</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fchameleon">st_chameleon</a></td><td valign="top"><a href="#st_005fchameleon">9.5.11 st_chameleon</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fcharge">st_charge</a></td><td valign="top"><a href="#st_005fcharge">9.5.12 st_charge</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fchess">st_chess</a></td><td valign="top"><a href="#st_005fchess">9.5.13 st_chess</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fcoinslot">st_coinslot</a></td><td valign="top"><a href="#st_005fcoinslot">9.5.14 st_coinslot</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fconcrete">st_concrete</a></td><td valign="top"><a href="#st_005fconcrete">9.3.6 st_concrete</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fdarkglass">st_darkglass</a></td><td valign="top"><a href="#st_005fdarkglass">9.5.15 st_darkglass</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fdarkgray">st_darkgray</a></td><td valign="top"><a href="#st_005fdarkgray">9.3.7 st_darkgray</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fdeath">st_death</a></td><td valign="top"><a href="#st_005fdeath">9.5.16 st_death</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fdisco">st_disco</a></td><td valign="top"><a href="#st_005fdisco">9.5.17 st_disco</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fdispenser">st_dispenser</a></td><td valign="top"><a href="#st_005fdispenser">9.5.18 st_dispenser</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fdoor">st_door</a></td><td valign="top"><a href="#st_005fdoor">9.5.19 st_door</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005ffake">st_fake</a></td><td valign="top"><a href="#st_005ffake">9.5.20 st_fake</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fflash">st_flash</a></td><td valign="top"><a href="#st_005fflash">9.5.21 st_flash</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fflat">st_flat</a></td><td valign="top"><a href="#st_005fflat">9.5.22 st_flat</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005ffloppy">st_floppy</a></td><td valign="top"><a href="#st_005ffloppy">9.5.23 st_floppy</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005ffourswitch">st_fourswitch</a></td><td valign="top"><a href="#st_005ffourswitch">9.5.24 st_fourswitch</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fghost">st_ghost</a></td><td valign="top"><a href="#st_005fghost">9.5.25 st_ghost</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fgranite">st_granite</a></td><td valign="top"><a href="#st_005fgranite">9.3.8 st_granite</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fgrate">st_grate</a></td><td valign="top"><a href="#st_005fgrate">9.5.26 st_grate</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fgreenbrown">st_greenbrown</a></td><td valign="top"><a href="#st_005fgreenbrown">9.5.27 st_greenbrown</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fgreengray">st_greengray</a></td><td valign="top"><a href="#st_005fgreengray">9.3.9 st_greengray</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fice">st_ice</a></td><td valign="top"><a href="#st_005fice">9.5.28 st_ice</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005finvisible">st_invisible</a></td><td valign="top"><a href="#st_005finvisible">9.3.10 st_invisible</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fjamb">st_jamb</a></td><td valign="top"><a href="#st_005fjamb">9.5.29 st_jamb</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fkey">st_key</a></td><td valign="top"><a href="#st_005fkey">9.5.30 st_key</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fknight">st_knight</a></td><td valign="top"><a href="#st_005fknight">9.5.31 st_knight</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005flaser">st_laser</a></td><td valign="top"><a href="#st_005flaser">9.5.32 st_laser</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005flaserflop">st_laserflop</a></td><td valign="top"><a href="#st_005flaserflop">9.5.33 st_laserflop</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005flaserswitch">st_laserswitch</a></td><td valign="top"><a href="#st_005flaserswitch">9.5.34 st_laserswitch</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005flightglass">st_lightglass</a></td><td valign="top"><a href="#st_005flightglass">9.5.35 st_lightglass</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005flightpassenger">st_lightpassenger</a></td><td valign="top"><a href="#st_005flightpassenger">9.5.36 st_lightpassenger</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fmagic">st_magic</a></td><td valign="top"><a href="#st_005fmagic">9.5.37 st_magic</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fmail">st_mail</a></td><td valign="top"><a href="#st_005fmail">9.5.38 st_mail</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fmetal">st_metal</a></td><td valign="top"><a href="#st_005fmetal">9.3.11 st_metal</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fmirror">st_mirror</a></td><td valign="top"><a href="#st_005fmirror">9.5.39 st_mirror</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fmonoflop">st_monoflop</a></td><td valign="top"><a href="#st_005fmonoflop">9.5.40 st_monoflop</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fnil">st_nil</a></td><td valign="top"><a href="#Tile-and-Object-Declaration">5.11 Описание секций и объектов</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005foneway">st_oneway</a></td><td valign="top"><a href="#st_005foneway">9.5.41 st_oneway</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005foxyd">st_oxyd</a></td><td valign="top"><a href="#st_005foxyd">9.5.42 st_oxyd</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fpanel">st_panel</a></td><td valign="top"><a href="#st_005fpanel">9.4.4 st_panel</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fpassage">st_passage</a></td><td valign="top"><a href="#st_005fpassage">9.5.43 st_passage</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fpinkbumps">st_pinkbumps</a></td><td valign="top"><a href="#st_005fpinkbumps">9.3.12 st_pinkbumps</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fplaster">st_plaster</a></td><td valign="top"><a href="#st_005fplaster">9.5.44 st_plaster</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fplop">st_plop</a></td><td valign="top"><a href="#st_005fplop">9.5.45 st_plop</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fpolarswitch">st_polarswitch</a></td><td valign="top"><a href="#st_005fpolarswitch">9.5.46 st_polarswitch</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fportal">st_portal</a></td><td valign="top"><a href="#st_005fportal">9.5.47 st_portal</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fpull">st_pull</a></td><td valign="top"><a href="#st_005fpull">9.5.48 st_pull</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fpurplegray">st_purplegray</a></td><td valign="top"><a href="#st_005fpurplegray">9.3.13 st_purplegray</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fpurplemarble">st_purplemarble</a></td><td valign="top"><a href="#st_005fpurplemarble">9.3.14 st_purplemarble</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fpuzzle">st_puzzle</a></td><td valign="top"><a href="#st_005fpuzzle">9.5.49 st_puzzle</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fquake">st_quake</a></td><td valign="top"><a href="#st_005fquake">9.5.50 st_quake</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005frawglass">st_rawglass</a></td><td valign="top"><a href="#st_005frawglass">9.5.51 st_rawglass</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fredbrown">st_redbrown</a></td><td valign="top"><a href="#st_005fredbrown">9.3.15 st_redbrown</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fredfiber">st_redfiber</a></td><td valign="top"><a href="#st_005fredfiber">9.5.52 st_redfiber</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fredmarble">st_redmarble</a></td><td valign="top"><a href="#st_005fredmarble">9.3.16 st_redmarble</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fredrock">st_redrock</a></td><td valign="top"><a href="#st_005fredrock">9.3.17 st_redrock</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005frotator">st_rotator</a></td><td valign="top"><a href="#st_005frotator">9.5.53 st_rotator</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005frubberband">st_rubberband</a></td><td valign="top"><a href="#st_005frubberband">9.5.54 st_rubberband</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fscissors">st_scissors</a></td><td valign="top"><a href="#st_005fscissors">9.5.55 st_scissors</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fshogun">st_shogun</a></td><td valign="top"><a href="#st_005fshogun">9.5.56 st_shogun</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fspitter">st_spitter</a></td><td valign="top"><a href="#st_005fspitter">9.5.57 st_spitter</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fstoneimpulse">st_stoneimpulse</a></td><td valign="top"><a href="#st_005fstoneimpulse">9.5.58 st_stoneimpulse</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fsurprise">st_surprise</a></td><td valign="top"><a href="#st_005fsurprise">9.5.59 st_surprise</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fswap">st_swap</a></td><td valign="top"><a href="#st_005fswap">9.5.60 st_swap</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fswitch">st_switch</a></td><td valign="top"><a href="#st_005fswitch">9.5.61 st_switch</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fthief">st_thief</a></td><td valign="top"><a href="#st_005fthief">9.5.62 st_thief</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005ftigris">st_tigris</a></td><td valign="top"><a href="#st_005ftigris">9.3.18 st_tigris</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005ftimer">st_timer</a></td><td valign="top"><a href="#st_005ftimer">9.5.63 st_timer</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fturnstile">st_turnstile</a></td><td valign="top"><a href="#st_005fturnstile">9.5.64 st_turnstile</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fturnstilearm">st_turnstilearm</a></td><td valign="top"><a href="#st_005fturnstilearm">9.5.65 st_turnstilearm</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fvolcano">st_volcano</a></td><td valign="top"><a href="#st_005fvolcano">9.5.66 st_volcano</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fwindow">st_window</a></td><td valign="top"><a href="#st_005fwindow">9.5.67 st_window</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fwoven">st_woven</a></td><td valign="top"><a href="#st_005fwoven">9.3.19 st_woven</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fyellow">st_yellow</a></td><td valign="top"><a href="#st_005fyellow">9.3.20 st_yellow</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-st_005fyinyang">st_yinyang</a></td><td valign="top"><a href="#st_005fyinyang">9.5.68 st_yinyang</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
</table>
<table><tr><th valign="top">Перейти к: &nbsp; </th><td><a href="#Object-Index-1_ob_letter-A" class="summary-letter"><b>A</b></a> &nbsp; <a href="#Object-Index-1_ob_letter-F" class="summary-letter"><b>F</b></a> &nbsp; <a href="#Object-Index-1_ob_letter-I" class="summary-letter"><b>I</b></a> &nbsp; <a href="#Object-Index-1_ob_letter-N" class="summary-letter"><b>N</b></a> &nbsp; <a href="#Object-Index-1_ob_letter-O" class="summary-letter"><b>O</b></a> &nbsp; <a href="#Object-Index-1_ob_letter-S" class="summary-letter"><b>S</b></a> &nbsp; 
</td></tr></table>

<hr size="6">
<a name="Attribute-Index"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Object-Index" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Message-Index" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Message-Index" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Attribute-Index-1"></a>
<h1 class="unnumbered">Указатель атрибутов</h1>

<table><tr><th valign="top">Перейти к: &nbsp; </th><td><a href="#Attribute-Index-1_at_letter-A" class="summary-letter"><b>A</b></a> &nbsp; <a href="#Attribute-Index-1_at_letter-O" class="summary-letter"><b>O</b></a> &nbsp; <a href="#Attribute-Index-1_at_letter-S" class="summary-letter"><b>S</b></a> &nbsp; 
</td></tr></table>
<table border="0" class="index-at">
<tr><td></td><th align="left">Статья указателя</th><th align="left"> Раздел</th></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Attribute-Index-1_at_letter-A">A</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-autoclose">autoclose</a></td><td valign="top"><a href="#it_005fblocker">8.4.1 it_blocker</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-autoclose-1">autoclose</a></td><td valign="top"><a href="#st_005fblocker">9.5.4 st_blocker</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Attribute-Index-1_at_letter-O">O</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-orientation">orientation</a></td><td valign="top"><a href="#it_005fpuller">8.3.23 it_puller</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-orientation-1">orientation</a></td><td valign="top"><a href="#st_005fboulder">9.5.6 st_boulder</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-orientation-2">orientation</a></td><td valign="top"><a href="#st_005fturnstile">9.5.64 st_turnstile</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-orientation-3">orientation</a></td><td valign="top"><a href="#st_005fturnstilearm">9.5.65 st_turnstilearm</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Attribute-Index-1_at_letter-S">S</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-state">state</a></td><td valign="top"><a href="#st_005ffourswitch">9.5.24 st_fourswitch</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
</table>
<table><tr><th valign="top">Перейти к: &nbsp; </th><td><a href="#Attribute-Index-1_at_letter-A" class="summary-letter"><b>A</b></a> &nbsp; <a href="#Attribute-Index-1_at_letter-O" class="summary-letter"><b>O</b></a> &nbsp; <a href="#Attribute-Index-1_at_letter-S" class="summary-letter"><b>S</b></a> &nbsp; 
</td></tr></table>

<hr size="6">
<a name="Message-Index"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Attribute-Index" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Function-Index" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Attribute-Index" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Message-Index-1"></a>
<h1 class="unnumbered">Указатель сообщений</h1>

<table><tr><th valign="top">Перейти к: &nbsp; </th><td><a href="#Message-Index-1_ms_letter-O" class="summary-letter"><b>O</b></a> &nbsp; 
</td></tr></table>
<table border="0" class="index-ms">
<tr><td></td><th align="left">Статья указателя</th><th align="left"> Раздел</th></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Message-Index-1_ms_letter-O">O</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-orientate">orientate</a></td><td valign="top"><a href="#st_005fboulder">9.5.6 st_boulder</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-orientate-1">orientate</a></td><td valign="top"><a href="#st_005fmirror">9.5.39 st_mirror</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-orientate-2">orientate</a></td><td valign="top"><a href="#st_005fturnstilearm">9.5.65 st_turnstilearm</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
</table>
<table><tr><th valign="top">Перейти к: &nbsp; </th><td><a href="#Message-Index-1_ms_letter-O" class="summary-letter"><b>O</b></a> &nbsp; 
</td></tr></table>

<hr size="6">
<a name="Function-Index"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Message-Index" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Concept-Index" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Message-Index" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Concept-Index" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Function-Index-1"></a>
<h1 class="unnumbered">Указатель функций</h1>




<table><tr><th valign="top">Перейти к: &nbsp; </th><td><a href="#Function-Index-1_tp_letter-A" class="summary-letter"><b>A</b></a> &nbsp; <a href="#Function-Index-1_tp_letter-C" class="summary-letter"><b>C</b></a> &nbsp; <a href="#Function-Index-1_tp_letter-E" class="summary-letter"><b>E</b></a> &nbsp; <a href="#Function-Index-1_tp_letter-F" class="summary-letter"><b>F</b></a> &nbsp; <a href="#Function-Index-1_tp_letter-G" class="summary-letter"><b>G</b></a> &nbsp; <a href="#Function-Index-1_tp_letter-I" class="summary-letter"><b>I</b></a> &nbsp; <a href="#Function-Index-1_tp_letter-L" class="summary-letter"><b>L</b></a> &nbsp; <a href="#Function-Index-1_tp_letter-R" class="summary-letter"><b>R</b></a> &nbsp; <a href="#Function-Index-1_tp_letter-S" class="summary-letter"><b>S</b></a> &nbsp; <a href="#Function-Index-1_tp_letter-U" class="summary-letter"><b>U</b></a> &nbsp; 
</td></tr></table>
<table border="0" class="index-tp">
<tr><td></td><th align="left">Статья указателя</th><th align="left"> Раздел</th></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Function-Index-1_tp_letter-A">A</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-assert_005fbool"><code>assert_bool</code></a></td><td valign="top"><a href="#assert_005fbool">1.14.5 assert_bool</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-assert_005ftype"><code>assert_type</code></a></td><td valign="top"><a href="#assert_005ftype">2.14.5 assert_type</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Function-Index-1_tp_letter-C">C</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-Callback-Function"><code>Callback Function (функция обратного вызова)</code></a></td><td valign="top"><a href="#Callback-Function">4.3.3 Функция обратного вызова</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-custom-resolver"><code>custom resolver (настраиваемое преобразование)</code></a></td><td valign="top"><a href="#Custom-Resolver">13.1.2 Настраиваемое преобразование</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Function-Index-1_tp_letter-E">E</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-etype"><code>etype</code></a></td><td valign="top"><a href="#etype">4.14.5 etype</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Function-Index-1_tp_letter-F">F</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-fl"><code>fl</code></a></td><td valign="top"><a href="#fl">5.14.5 fl</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Function-Index-1_tp_letter-G">G</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-grp"><code>grp</code></a></td><td valign="top"><a href="#grp">6.14.5 grp</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Function-Index-1_tp_letter-I">I</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-it"><code>it</code></a></td><td valign="top"><a href="#it">5.14.7 it</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Function-Index-1_tp_letter-L">L</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-lib_002eimport"><code>lib.import</code></a></td><td valign="top"><a href="#libimport">12.5 libimport</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lib_002eimport_002elevel_005fto_005fmap"><code>lib.import.level_to_map</code></a></td><td valign="top"><a href="#lib_002eimport_002elevel_005fto_005fmap">12.5.3 lib.import.level_to_map</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lib_002eimport_002emap_005fsokoban"><code>lib.import.map_sokoban</code></a></td><td valign="top"><a href="#lib_002eimport_002emap_005fsokoban">12.5.4 lib.import.map_sokoban</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lib_002eimport_002emap_005fwanderer"><code>lib.import.map_wanderer</code></a></td><td valign="top"><a href="#lib_002eimport_002emap_005fwanderer">12.5.5 lib.import.map_wanderer</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lib_002eimport_002euncompress_005frle"><code>lib.import.uncompress_rle</code></a></td><td valign="top"><a href="#lib_002eimport_002euncompress_005frle">12.5.2 lib.import.uncompress_rle</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lib_002eimport_002eunpack_005fmultilevel"><code>lib.import.unpack_multilevel</code></a></td><td valign="top"><a href="#lib_002eimport_002eunpack_005fmultilevel">12.5.1 lib.import.unpack_multilevel</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lib_002elua_002ecombine_005ftables"><code>lib.lua.combine_tables</code></a></td><td valign="top"><a href="#lib_002elua_002ecombine_005ftables">12.2.1 lib.lua.combine_tables</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lib_002elua_002edeep_005fcopy"><code>lib.lua.deep_copy</code></a></td><td valign="top"><a href="#lib_002elua_002edeep_005fcopy">12.2.2 lib.lua.deep_copy</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lib_002elua_002emod"><code>lib.lua.mod</code></a></td><td valign="top"><a href="#lib_002elua_002emod">12.2.3 lib.lua.mod</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lib_002elua_002eprint_005ftable"><code>lib.lua.print_table</code></a></td><td valign="top"><a href="#lib_002elua_002eprint_005ftable">12.2.4 lib.lua.print_table</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lib_002elua_002eshuffle"><code>lib.lua.shuffle</code></a></td><td valign="top"><a href="#lib_002elua_002eshuffle">12.2.5 lib.lua.shuffle</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lib_002elua_002eto_005fstring"><code>lib.lua.to_string</code></a></td><td valign="top"><a href="#lib_002elua_002eto_005fstring">12.2.6 lib.lua.to_string</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lib_002emap_002econcat_005fhorizontally"><code>lib.map.concat_horizontally</code></a></td><td valign="top"><a href="#Map-Horizontal-Concatenation">12.4.10 Горизонтальное объединение карт</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lib_002emap_002econcat_005fvertically"><code>lib.map.concat_vertically</code></a></td><td valign="top"><a href="#Map-Vertical-Concatenation">12.4.11 Вертикальное объединение карт</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lib_002emap_002ecovers"><code>lib.map.covers</code></a></td><td valign="top"><a href="#lib_002emap_002ecovers">12.4.15 lib.map.covers</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lib_002emap_002edefuse"><code>lib.map.defuse</code></a></td><td valign="top"><a href="#lib_002emap_002edefuse">12.4.16 lib.map.defuse</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lib_002emap_002eextend"><code>lib.map.extend</code></a></td><td valign="top"><a href="#lib_002emap_002eextend">12.4.17 lib.map.extend</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lib_002emap_002efuse"><code>lib.map.fuse</code></a></td><td valign="top"><a href="#Map-Fusing">12.4.12 Слияние карт</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lib_002emap_002eget"><code>lib.map.get</code></a></td><td valign="top"><a href="#Map-Entry-Request">12.4.8 Запрос участка карты</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lib_002emap_002ematch"><code>lib.map.match</code></a></td><td valign="top"><a href="#lib_002emap_002ematch">12.4.18 lib.map.match</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lib_002emap_002enewMap"><code>lib.map.newMap</code></a></td><td valign="top"><a href="#newMap">12.4.7 newMap</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lib_002emap_002epaste"><code>lib.map.paste</code></a></td><td valign="top"><a href="#lib_002emap_002epaste">12.4.19 lib.map.paste</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lib_002emap_002eprint"><code>lib.map.print</code></a></td><td valign="top"><a href="#lib_002emap_002eprint">12.4.20 lib.map.print</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lib_002emap_002erandom_005ftransformation"><code>lib.map.random_transformation</code></a></td><td valign="top"><a href="#Random-Map-Transformations">12.4.28 Случайные преобразования карты</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lib_002emap_002ereplace"><code>lib.map.replace</code></a></td><td valign="top"><a href="#lib_002emap_002ereplace">12.4.21 lib.map.replace</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lib_002emap_002ereplace_005foutside"><code>lib.map.replace_outside</code></a></td><td valign="top"><a href="#lib_002emap_002ereplace_005foutside">12.4.22 lib.map.replace_outside</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lib_002emap_002eset"><code>lib.map.set</code></a></td><td valign="top"><a href="#Map-Entry-Request">12.4.8 Запрос участка карты</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lib_002emap_002eset_005fdefault_005fkey"><code>lib.map.set_default_key</code></a></td><td valign="top"><a href="#Map-Default-Keys">12.4.13 Предустановленные коды карты</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lib_002emap_002esub"><code>lib.map.sub</code></a></td><td valign="top"><a href="#lib_002emap_002esub">12.4.23 lib.map.sub</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lib_002emap_002etransform"><code>lib.map.transform</code></a></td><td valign="top"><a href="#Map-Transformation">12.4.9 Преобразование карты</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lib_002emap_002etransformation_005fcompose"><code>lib.map.transformation_compose</code></a></td><td valign="top"><a href="#Map-Transformation-Composition-and-Powers">12.4.26 Произведение и возведение в степень преобразований карт</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lib_002emap_002etransformation_005fpower"><code>lib.map.transformation_power</code></a></td><td valign="top"><a href="#Map-Transformation-Composition-and-Powers">12.4.26 Произведение и возведение в степень преобразований карт</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lib_002emap_002etrim"><code>lib.map.trim</code></a></td><td valign="top"><a href="#lib_002emap_002etrim">12.4.24 lib.map.trim</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lib_002emath_002ecombinations"><code>lib.math.combinations</code></a></td><td valign="top"><a href="#lib_002emath_002ecombinations">12.3.1 lib.math.combinations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lib_002emath_002ecubic_005fpolynomial"><code>lib.math.cubic_polynomial</code></a></td><td valign="top"><a href="#lib_002emath_002ecubic_005fpolynomial">12.3.2 lib.math.cubic_polynomial</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lib_002emath_002ecyclic_005fpermutation"><code>lib.math.cyclic_permutation</code></a></td><td valign="top"><a href="#lib_002emath_002ecyclic_005fpermutation">12.3.3 lib.math.cyclic_permutation</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lib_002emath_002edigits"><code>lib.math.digits</code></a></td><td valign="top"><a href="#lib_002emath_002edigits">12.3.4 lib.math.digits</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lib_002emath_002emanhattan_005fdistance"><code>lib.math.manhattan_distance</code></a></td><td valign="top"><a href="#lib_002emath_002emanhattan_005fdistance">12.3.5 lib.math.manhattan_distance</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lib_002emath_002emark_005fcomponents"><code>lib.math.mark_components</code></a></td><td valign="top"><a href="#lib_002emath_002emark_005fcomponents">12.3.6 lib.math.mark_components</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lib_002emath_002epermutation"><code>lib.math.permutation</code></a></td><td valign="top"><a href="#lib_002emath_002epermutation">12.3.7 lib.math.permutation</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lib_002emath_002erandom_005fvector"><code>lib.math.random_vector</code></a></td><td valign="top"><a href="#lib_002emath_002erandom_005fvector">12.3.8 lib.math.random_vector</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lib_002emath_002esteps"><code>lib.math.steps</code></a></td><td valign="top"><a href="#lib_002emath_002esteps">12.3.9 lib.math.steps</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lib_002emaze_002erenderer_005fstandard"><code>lib.maze.renderer_standard</code></a></td><td valign="top"><a href="#res_002emaze">13.1.5 res.maze</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lib_002emaze_002erenderer_005fstrip"><code>lib.maze.renderer_strip</code></a></td><td valign="top"><a href="#res_002emaze">13.1.5 res.maze</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lib_002emaze_002erenderer_005fwindow"><code>lib.maze.renderer_window</code></a></td><td valign="top"><a href="#res_002emaze">13.1.5 res.maze</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lib_002esoko_002ecreate_005fsokoball"><code>lib.soko.create_sokoball</code></a></td><td valign="top"><a href="#libsoko">12.6 libsoko</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Function-Index-1_tp_letter-R">R</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-random"><code>random</code></a></td><td valign="top"><a href="#random">9.14.5 random</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-res_002eautotile"><code>res.autotile</code></a></td><td valign="top"><a href="#res_002eautotile">13.1.3 res.autotile</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-res_002ecomposer"><code>res.composer</code></a></td><td valign="top"><a href="#res_002ecomposer">13.1.4 res.composer</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-res_002ecomposer_005fimplementation"><code>res.composer_implementation</code></a></td><td valign="top"><a href="#Resolver-Implementation">14.1.2 Блок реализации преобразования</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-res_002emaze"><code>res.maze</code></a></td><td valign="top"><a href="#res_002emaze">13.1.5 res.maze</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-res_002epuzzle"><code>res.puzzle</code></a></td><td valign="top"><a href="#res_002epuzzle">13.1.6 res.puzzle</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-res_002erandom"><code>res.random</code></a></td><td valign="top"><a href="#res_002erandom">13.1.7 res.random</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-res_002eresolvername"><code>res.resolvername</code></a></td><td valign="top"><a href="#Resolver-Configurator">14.1.1 Блок настройки преобразования</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-res_002eresolver_005ffinalization"><code>res.resolver_finalization</code></a></td><td valign="top"><a href="#Resolver-Finalizer">14.1.3 Блок завершения преобразования</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-res_002etrain"><code>res.train</code></a></td><td valign="top"><a href="#res_002etrain">13.1.8 res.train</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Function-Index-1_tp_letter-S">S</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-st"><code>st</code></a></td><td valign="top"><a href="#st">10.14.5 st</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Function-Index-1_tp_letter-U">U</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-usertype"><code>usertype</code></a></td><td valign="top"><a href="#usertype">11.14.5 usertype</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
</table>
<table><tr><th valign="top">Перейти к: &nbsp; </th><td><a href="#Function-Index-1_tp_letter-A" class="summary-letter"><b>A</b></a> &nbsp; <a href="#Function-Index-1_tp_letter-C" class="summary-letter"><b>C</b></a> &nbsp; <a href="#Function-Index-1_tp_letter-E" class="summary-letter"><b>E</b></a> &nbsp; <a href="#Function-Index-1_tp_letter-F" class="summary-letter"><b>F</b></a> &nbsp; <a href="#Function-Index-1_tp_letter-G" class="summary-letter"><b>G</b></a> &nbsp; <a href="#Function-Index-1_tp_letter-I" class="summary-letter"><b>I</b></a> &nbsp; <a href="#Function-Index-1_tp_letter-L" class="summary-letter"><b>L</b></a> &nbsp; <a href="#Function-Index-1_tp_letter-R" class="summary-letter"><b>R</b></a> &nbsp; <a href="#Function-Index-1_tp_letter-S" class="summary-letter"><b>S</b></a> &nbsp; <a href="#Function-Index-1_tp_letter-U" class="summary-letter"><b>U</b></a> &nbsp; 
</td></tr></table>

<hr size="6">
<a name="Concept-Index"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Function-Index" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left"><a href="#Renaming-Index" title="Переход к следующему разделу">[ &gt; ]</a></td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Function-Index" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[<a href="#Renaming-Index" title="Переход к следующей главе"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Concept-Index-1"></a>
<h1 class="unnumbered">Указатель терминов</h1>

<table><tr><th valign="top">Перейти к: &nbsp; </th><td><a href="#Concept-Index-1_cp_letter-A" class="summary-letter"><b>A</b></a> &nbsp; <a href="#Concept-Index-1_cp_letter-C" class="summary-letter"><b>C</b></a> &nbsp; <a href="#Concept-Index-1_cp_letter-D" class="summary-letter"><b>D</b></a> &nbsp; <a href="#Concept-Index-1_cp_letter-F" class="summary-letter"><b>F</b></a> &nbsp; <a href="#Concept-Index-1_cp_letter-G" class="summary-letter"><b>G</b></a> &nbsp; <a href="#Concept-Index-1_cp_letter-I" class="summary-letter"><b>I</b></a> &nbsp; <a href="#Concept-Index-1_cp_letter-L" class="summary-letter"><b>L</b></a> &nbsp; <a href="#Concept-Index-1_cp_letter-N" class="summary-letter"><b>N</b></a> &nbsp; <a href="#Concept-Index-1_cp_letter-O" class="summary-letter"><b>O</b></a> &nbsp; <a href="#Concept-Index-1_cp_letter-P" class="summary-letter"><b>P</b></a> &nbsp; <a href="#Concept-Index-1_cp_letter-R" class="summary-letter"><b>R</b></a> &nbsp; <a href="#Concept-Index-1_cp_letter-S" class="summary-letter"><b>S</b></a> &nbsp; <a href="#Concept-Index-1_cp_letter-T" class="summary-letter"><b>T</b></a> &nbsp; <a href="#Concept-Index-1_cp_letter-U" class="summary-letter"><b>U</b></a> &nbsp; 
</td></tr></table>
<table border="0" class="index-cp">
<tr><td></td><th align="left">Статья указателя</th><th align="left"> Раздел</th></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Concept-Index-1_cp_letter-A">A</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-abstract-kind">abstract kind (абстрактный тип)</a></td><td valign="top"><a href="#Object-Kind">4.2.1 Тип объекта</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-auto-naming">auto naming (автоматическое именование)</a></td><td valign="top"><a href="#Object-Naming">4.2.3 Именование объектов</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Concept-Index-1_cp_letter-C">C</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-callback-function">callback function (функция обратного вызова)</a></td><td valign="top"><a href="#Callback-Function">4.3.3 Функция обратного вызова</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-crossindex">crossindex (ссылка на индекс)</a></td><td valign="top"><a href="#Levelpack-Basics">2. Основы работы с пакетами уровней</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-crossreference">crossreference (перекрёстная ссылка)</a></td><td valign="top"><a href="#Levelpack-Basics">2. Основы работы с пакетами уровней</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Concept-Index-1_cp_letter-D">D</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-default-floor">default floor (покрытие по умолчанию)</a></td><td valign="top"><a href="#Object-Layers">4.1.2 Слои объектов</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Concept-Index-1_cp_letter-F">F</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-flood">flood (наводнение)</a></td><td valign="top"><a href="#Flood-Spreading">13.2.2 Распространение воды</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Concept-Index-1_cp_letter-G">G</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-grid-position">grid position (позиция решётки)</a></td><td valign="top"><a href="#World_0027s-Shape-and-Coordinates">4.1.1 Очертания и координаты мира</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Concept-Index-1_cp_letter-I">I</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-index">index (индекс)</a></td><td valign="top"><a href="#Levelpack-Basics">2. Основы работы с пакетами уровней</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Concept-Index-1_cp_letter-L">L</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-l10n-path">l10n path (папка локализации)</a></td><td valign="top"><a href="#Locating-Resources">1.1 Размещение ресурсов</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-layer">layer (слой)</a></td><td valign="top"><a href="#Object-Layers">4.1.2 Слои объектов</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-levelinspector">levelinspector (инспектор уровней)</a></td><td valign="top"><a href="#Level-Info">1.5 Информация об уровне</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-levelpack">levelpack (пакет уровней)</a></td><td valign="top"><a href="#Levelpack-Basics">2. Основы работы с пакетами уровней</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-localization-path">localization path (папка локализации)</a></td><td valign="top"><a href="#Locating-Resources">1.1 Размещение ресурсов</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Concept-Index-1_cp_letter-N">N</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-nearest-object">nearest object (ближайший объект)</a></td><td valign="top"><a href="#Object-Naming">4.2.3 Именование объектов</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Concept-Index-1_cp_letter-O">O</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-onescreener">onescreener (одноэкранный уровень)</a></td><td valign="top"><a href="#World_0027s-Shape-and-Coordinates">4.1.1 Очертания и координаты мира</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-overloading">overloading (перегрузка)</a></td><td valign="top"><a href="#Polymorphism-and-Overloading">5.4.3 Полиморфизм и перегрузка</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Concept-Index-1_cp_letter-P">P</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-polymorphism">polymorphism (полиморфизм)</a></td><td valign="top"><a href="#Polymorphism-and-Overloading">5.4.3 Полиморфизм и перегрузка</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-position">position (позиция)</a></td><td valign="top"><a href="#World_0027s-Shape-and-Coordinates">4.1.1 Очертания и координаты мира</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-preferences-path">preferences path (путь к настройкам)</a></td><td valign="top"><a href="#Locating-Resources">1.1 Размещение ресурсов</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Concept-Index-1_cp_letter-R">R</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-resource-paths">resource paths (папки с ресурсами)</a></td><td valign="top"><a href="#Locating-Resources">1.1 Размещение ресурсов</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Concept-Index-1_cp_letter-S">S</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-system-path">system path (системная папка)</a></td><td valign="top"><a href="#Locating-Resources">1.1 Размещение ресурсов</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Concept-Index-1_cp_letter-T">T</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-target-action-paradigm">target action paradigm (механизм цели-действия)</a></td><td valign="top"><a href="#Target-_002d-Action">4.3.2 Цель-действие</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-tile">tile (секция)</a></td><td valign="top"><a href="#World_0027s-Shape-and-Coordinates">4.1.1 Очертания и координаты мира</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="Concept-Index-1_cp_letter-U">U</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-user-image-path">user image path (папка эскизов)</a></td><td valign="top"><a href="#Locating-Resources">1.1 Размещение ресурсов</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-user-path">user path (папка пользователя)</a></td><td valign="top"><a href="#Locating-Resources">1.1 Размещение ресурсов</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
</table>
<table><tr><th valign="top">Перейти к: &nbsp; </th><td><a href="#Concept-Index-1_cp_letter-A" class="summary-letter"><b>A</b></a> &nbsp; <a href="#Concept-Index-1_cp_letter-C" class="summary-letter"><b>C</b></a> &nbsp; <a href="#Concept-Index-1_cp_letter-D" class="summary-letter"><b>D</b></a> &nbsp; <a href="#Concept-Index-1_cp_letter-F" class="summary-letter"><b>F</b></a> &nbsp; <a href="#Concept-Index-1_cp_letter-G" class="summary-letter"><b>G</b></a> &nbsp; <a href="#Concept-Index-1_cp_letter-I" class="summary-letter"><b>I</b></a> &nbsp; <a href="#Concept-Index-1_cp_letter-L" class="summary-letter"><b>L</b></a> &nbsp; <a href="#Concept-Index-1_cp_letter-N" class="summary-letter"><b>N</b></a> &nbsp; <a href="#Concept-Index-1_cp_letter-O" class="summary-letter"><b>O</b></a> &nbsp; <a href="#Concept-Index-1_cp_letter-P" class="summary-letter"><b>P</b></a> &nbsp; <a href="#Concept-Index-1_cp_letter-R" class="summary-letter"><b>R</b></a> &nbsp; <a href="#Concept-Index-1_cp_letter-S" class="summary-letter"><b>S</b></a> &nbsp; <a href="#Concept-Index-1_cp_letter-T" class="summary-letter"><b>T</b></a> &nbsp; <a href="#Concept-Index-1_cp_letter-U" class="summary-letter"><b>U</b></a> &nbsp; 
</td></tr></table>

<hr size="6">
<a name="Renaming-Index"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Concept-Index" title="Переход к предыдущему разделу"> &lt; </a>]</td>
<td valign="middle" align="left">[ &gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Concept-Index" title="Переход к началу данной или предыдущей главы"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало раздела"> Вверх </a>]</td>
<td valign="middle" align="left">[ &gt;&gt; ]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<a name="Renaming-Index-1"></a>
<h1 class="unnumbered">Список изменений</h1>

<dl compact="compact">
<dt> <b>ac-blackball</b> &rarr; <code>ac_marble_black</code>, см. раздел <a href="#ac_005fmarble">ac_marble</a></dt>
<dt> <b>ac-bug</b> &rarr; <a href="#ac_005fbug">ac_bug</a></dt>
<dt> <b>ac-horse</b> &rarr; <a href="#ac_005fhorse">ac_horse</a></dt>
<dt> <b>ac-killerball</b> &rarr; <a href="#ac_005fkiller">ac_killer</a></dt>
<dt> <b>ac-rotor</b> &rarr; <a href="#ac_005frotor">ac_rotor</a></dt>
<dt> <b>ac-top</b> &rarr; <a href="#ac_005ftop">ac_top</a></dt>
<dt> <b>ac-whiteball</b> &rarr; <code>ac_marble_white</code>, см. раздел <a href="#ac_005fmarble">ac_marble</a></dt>
<dt> <b>ac-whiteball-small</b> &rarr; <code>ac_pearl_white, owner=DEFAULT</code>, см. раздел <a href="#ac_005fpearl">ac_pearl</a></dt>
<dt> <b>fl-abyss</b> &rarr; <a href="#fl_005fabyss">fl_abyss</a></dt>
<dt> <b>fl-abyss_fake</b> &rarr; <code>fl_fake_abyss</code>, см. раздел <a href="#fl_005ffake">fl_fake</a></dt>
<dt> <b>fl-acblack</b> &rarr; <code>fl_yinyang_yin</code>, см. раздел <a href="#fl_005fyinyang">fl_yinyang</a></dt>
<dt> <b>fl-acwhite</b> &rarr; <code>fl_yinyang_yang</code>, см. раздел <a href="#fl_005fyinyang">fl_yinyang</a></dt>
<dt> <b>fl-black</b> &rarr; <a href="#fl_005fdark">fl_dark</a></dt>
<dt> <b>fl-bluegray</b> &rarr; <a href="#fl_005fbluegray">fl_bluegray</a></dt>
<dt> <b>fl-bluegreen</b> &rarr; <a href="#fl_005fbluegreen">fl_bluegreen</a></dt>
<dt> <b>fl-bluegreenx</b> &rarr; <a href="#fl_005faquamarine">fl_aquamarine</a></dt>
<dt> <b>fl-brick</b> &rarr; <a href="#fl_005fbrick">fl_brick</a></dt>
<dt> <b>fl-bridge</b> &rarr; <a href="#fl_005fbridge">fl_bridge</a></dt>
<dt> <b>fl-bridge-closed</b> &rarr; <code>fl_bridge, state=CLOSED</code>, см. раздел <a href="#fl_005fbridge">fl_bridge</a></dt>
<dt> <b>fl-bridge-open</b> &rarr; <a href="#fl_005fbridge">fl_bridge</a></dt>
<dt> <b>fl-bumps</b> &rarr; <a href="#fl_005fpinkbumps">fl_pinkbumps</a></dt>
<dt> <b>fl-concrete</b> &rarr; <a href="#fl_005fconcrete">fl_concrete</a></dt>
<dt> <b>fl-darkgray</b> &rarr; <a href="#fl_005fdarkgray">fl_darkgray</a></dt>
<dt> <b>fl-dunes</b> &rarr; <a href="#fl_005fdunes">fl_dunes</a></dt>
<dt> <b>fl-floor_001</b> &rarr; <a href="#fl_005fbast">fl_bast</a></dt>
<dt> <b>fl-gradient</b> &rarr; <code>fl_slope_ps</code>, см. раздел <a href="#fl_005fslope">fl_slope</a></dt>
<dt> <b>fl-gradient1</b> &rarr; <code>fl_slope_ps</code>, см. раздел <a href="#fl_005fslope">fl_slope</a></dt>
<dt> <b>fl-gradient2</b> &rarr; <code>fl_slope_pn</code>, см. раздел <a href="#fl_005fslope">fl_slope</a></dt>
<dt> <b>fl-gradient3</b> &rarr; <code>fl_slope_pe</code>, см. раздел <a href="#fl_005fslope">fl_slope</a></dt>
<dt> <b>fl-gradient4</b> &rarr; <code>fl_slope_pw</code>, см. раздел <a href="#fl_005fslope">fl_slope</a></dt>
<dt> <b>fl-gradient5</b> &rarr; <code>fl_slope_ose</code>, см. раздел <a href="#fl_005fslope">fl_slope</a></dt>
<dt> <b>fl-gradient6</b> &rarr; <code>fl_slope_osw</code>, см. раздел <a href="#fl_005fslope">fl_slope</a></dt>
<dt> <b>fl-gradient7</b> &rarr; <code>fl_slope_one</code>, см. раздел <a href="#fl_005fslope">fl_slope</a></dt>
<dt> <b>fl-gradient8</b> &rarr; <code>fl_slope_onw</code>, см. раздел <a href="#fl_005fslope">fl_slope</a></dt>
<dt> <b>fl-gradient9</b> &rarr; <code>fl_slope_ise</code>, см. раздел <a href="#fl_005fslope">fl_slope</a></dt>
<dt> <b>fl-gradient10</b> &rarr; <code>fl_slope_ine</code>, см. раздел <a href="#fl_005fslope">fl_slope</a></dt>
<dt> <b>fl-gradient11</b> &rarr; <code>fl_slope_isw</code>, см. раздел <a href="#fl_005fslope">fl_slope</a></dt>
<dt> <b>fl-gradient12</b> &rarr; <code>fl_slope_inw</code>, см. раздел <a href="#fl_005fslope">fl_slope</a></dt>
<dt> <b>fl-gradient13</b> &rarr; <code>fl_slope_tn</code>, см. раздел <a href="#fl_005fslope">fl_slope</a></dt>
<dt> <b>fl-gradient14</b> &rarr; <code>fl_slope_ts</code>, см. раздел <a href="#fl_005fslope">fl_slope</a></dt>
<dt> <b>fl-gradient15</b> &rarr; <code>fl_slope_tw</code>, см. раздел <a href="#fl_005fslope">fl_slope</a></dt>
<dt> <b>fl-gradient16</b> &rarr; <code>fl_slope_te</code>, см. раздел <a href="#fl_005fslope">fl_slope</a></dt>
<dt> <b>fl-gravel</b> &rarr; <a href="#fl_005fgravel">fl_gravel</a></dt>
<dt> <b>fl-gray</b> &rarr; <a href="#fl_005fgray">fl_gray</a></dt>
<dt> <b>fl-hay</b> &rarr; <a href="#fl_005fhay">fl_hay</a></dt>
<dt> <b>fl-himalaya</b> &rarr; <a href="#fl_005fhimalaya">fl_himalaya</a></dt>
<dt> <b>fl-ice</b> &rarr; <a href="#fl_005fice">fl_ice</a></dt>
<dt> <b>fl-inverse</b> &rarr; <code>fl_inverse_white</code>, см. раздел <a href="#fl_005finverse">fl_inverse</a></dt>
<dt> <b>fl-inverse2</b> &rarr; <code>fl_inverse_gray</code>, см. раздел <a href="#fl_005finverse">fl_inverse</a></dt>
<dt> <b>fl-leaves</b> &rarr; <code>fl_lawn_a</code>, см. раздел <a href="#fl_005flawn">fl_lawn</a></dt>
<dt> <b>fl-leavesb</b> &rarr; <code>fl_lawn_b</code>, см. раздел <a href="#fl_005flawn">fl_lawn</a></dt>
<dt> <b>fl-leavesc1</b> &rarr; <code>fl_lawn_c1</code>, см. раздел <a href="#fl_005flawn">fl_lawn</a></dt>
<dt> <b>fl-leavesc2</b> &rarr; <code>fl_lawn_c2</code>, см. раздел <a href="#fl_005flawn">fl_lawn</a></dt>
<dt> <b>fl-leavesc3</b> &rarr; <code>fl_lawn_c3</code>, см. раздел <a href="#fl_005flawn">fl_lawn</a></dt>
<dt> <b>fl-leavesc4</b> &rarr; <code>fl_lawn_c4</code>, см. раздел <a href="#fl_005flawn">fl_lawn</a></dt>
<dt> <b>fl-leavesd1</b> &rarr; <code>fl_lawn_d1</code>, см. раздел <a href="#fl_005flawn">fl_lawn</a></dt>
<dt> <b>fl-leavesd2</b> &rarr; <code>fl_lawn_d2</code>, см. раздел <a href="#fl_005flawn">fl_lawn</a></dt>
<dt> <b>fl-leavesd3</b> &rarr; <code>fl_lawn_d3</code>, см. раздел <a href="#fl_005flawn">fl_lawn</a></dt>
<dt> <b>fl-leavesd4</b> &rarr; <code>fl_lawn_d4</code>, см. раздел <a href="#fl_005flawn">fl_lawn</a></dt>
<dt> <b>fl-leavese1</b> &rarr; <code>fl_lawn_e1</code>, см. раздел <a href="#fl_005flawn">fl_lawn</a></dt>
<dt> <b>fl-leavese2</b> &rarr; <code>fl_lawn_e2</code>, см. раздел <a href="#fl_005flawn">fl_lawn</a></dt>
<dt> <b>fl-leavese3</b> &rarr; <code>fl_lawn_e3</code>, см. раздел <a href="#fl_005flawn">fl_lawn</a></dt>
<dt> <b>fl-leavese4</b> &rarr; <code>fl_lawn_e4</code>, см. раздел <a href="#fl_005flawn">fl_lawn</a></dt>
<dt> <b>fl-light</b> &rarr; <a href="#fl_005fivory">fl_ivory</a></dt>
<dt> <b>fl-lightgray</b> &rarr; <a href="#fl_005fplatinum">fl_platinum</a></dt>
<dt> <b>fl-marble</b> &rarr; <a href="#fl_005fmarble">fl_marble</a></dt>
<dt> <b>fl-metal</b> &rarr; <a href="#fl_005fmetal">fl_metal</a></dt>
<dt> <b>fl-metal1</b> &rarr; <code>fl_metal_1</code>, см. раздел <a href="#fl_005fmetal">fl_metal</a></dt>
<dt> <b>fl-metal2</b> &rarr; <code>fl_metal_2</code>, см. раздел <a href="#fl_005fmetal">fl_metal</a></dt>
<dt> <b>fl-metal3</b> &rarr; <code>fl_metal_3</code>, см. раздел <a href="#fl_005fmetal">fl_metal</a></dt>
<dt> <b>fl-metal4</b> &rarr; <code>fl_metal_4</code>, см. раздел <a href="#fl_005fmetal">fl_metal</a></dt>
<dt> <b>fl-metal5</b> &rarr; <code>fl_metal_5</code>, см. раздел <a href="#fl_005fmetal">fl_metal</a></dt>
<dt> <b>fl-metal6</b> &rarr; <code>fl_metal_6</code>, см. раздел <a href="#fl_005fmetal">fl_metal</a></dt>
<dt> <b>fl-mortar</b> &rarr; <a href="#fl_005fmortar">fl_mortar</a></dt>
<dt> <b>fl-nomouse</b> &rarr; <a href="#fl_005fadhesionless">fl_adhesionless</a></dt>
<dt> <b>fl-normal_x</b> &rarr; <code>fl_metal_7</code>, см. раздел <a href="#fl_005fmetal">fl_metal</a></dt>
<dt> <b>fl-normal</b> &rarr; <code>fl_metal_7n</code>, см. раздел <a href="#fl_005fmetal">fl_metal</a></dt>
<dt> <b>fl-plank</b> &rarr; <a href="#fl_005fplank">fl_plank</a></dt>
<dt> <b>fl-red</b> &rarr; <a href="#fl_005fred">fl_red</a></dt>
<dt> <b>fl-rock</b> &rarr; <a href="#fl_005frock">fl_rock</a></dt>
<dt> <b>fl-rough</b> &rarr; <a href="#fl_005frough">fl_rough</a></dt>
<dt> <b>fl-rough_medium</b> &rarr; <code>fl_rough, friction=5.0, adhesion=1.2</code>, см. раздел <a href="#fl_005frough">fl_rough</a></dt>
<dt> <b>fl-rough_slow</b> &rarr; <code>fl_rough, friction=7.0, adhesion=0.5</code>, см. раздел <a href="#fl_005frough">fl_rough</a></dt>
<dt> <b>fl-rough-blue</b> &rarr; <a href="#fl_005fblueslab">fl_blueslab</a></dt>
<dt> <b>fl-rough-red</b> &rarr; <a href="#fl_005fredslab">fl_redslab</a></dt>
<dt> <b>fl-sahara</b> &rarr; <a href="#fl_005fsahara">fl_sahara</a></dt>
<dt> <b>fl-samba</b> &rarr; <a href="#fl_005fsamba">fl_samba</a></dt>
<dt> <b>fl-samba1</b> &rarr; <code>fl_samba_h</code>, см. раздел <a href="#fl_005fsamba">fl_samba</a></dt>
<dt> <b>fl-samba2</b> &rarr; <code>fl_samba_v</code>, см. раздел <a href="#fl_005fsamba">fl_samba</a></dt>
<dt> <b>fl-sand</b> &rarr; <a href="#fl_005fsand">fl_sand</a></dt>
<dt> <b>fl-space</b> &rarr; <a href="#fl_005fspace">fl_space</a></dt>
<dt> <b>fl-springboard</b> &rarr; <a href="#fl_005fwhite">fl_white</a></dt>
<dt> <b>fl-stone</b> &rarr; <a href="#fl_005fstone">fl_stone</a></dt>
<dt> <b>fl-stwood</b> &rarr; <code>fl_wood_framed</code>, см. раздел <a href="#fl_005fwood">fl_wood</a></dt>
<dt> <b>fl-stwood1</b> &rarr; <code>fl_wood_framed_h</code>, см. раздел <a href="#fl_005fwood">fl_wood</a></dt>
<dt> <b>fl-stwood2</b> &rarr; <code>fl_wood_framed_v</code>, см. раздел <a href="#fl_005fwood">fl_wood</a></dt>
<dt> <b>fl-swamp</b> &rarr; <a href="#fl_005fswamp">fl_swamp</a></dt>
<dt> <b>fl-thief</b> &rarr; <a href="#fl_005fthief">fl_thief</a></dt>
<dt> <b>fl-tigris</b> &rarr; <a href="#fl_005ftigris">fl_tigris</a></dt>
<dt> <b>fl-trigger</b> &rarr; <code>fl_fake_trigger</code>, см. раздел <a href="#fl_005ffake">fl_fake</a></dt>
<dt> <b>fl-water</b> &rarr; <a href="#fl_005fwater">fl_water</a></dt>
<dt> <b>fl-white</b> &rarr; <a href="#fl_005fbright">fl_bright</a></dt>
<dt> <b>fl-wood</b> &rarr; <a href="#fl_005fwood">fl_wood</a></dt>
<dt> <b>fl-wood1</b> &rarr; <code>fl_wood_h</code>, см. раздел <a href="#fl_005fwood">fl_wood</a></dt>
<dt> <b>fl-wood2</b> &rarr; <code>fl_wood_v</code>, см. раздел <a href="#fl_005fwood">fl_wood</a></dt>
<dt> <b>fl-woven</b> &rarr; <a href="#fl_005fwoven">fl_woven</a></dt>
<dt> <b>it-abyss</b> &rarr; <a href="#it_005ftrap">it_trap</a></dt>
<dt> <b>it-bag</b> &rarr; <a href="#it_005fbag">it_bag</a></dt>
<dt> <b>it-banana</b> &rarr; <a href="#it_005fbanana">it_banana</a></dt>
<dt> <b>it-blackbomb</b> &rarr; <code>it_bomb_black</code>, см. раздел <a href="#it_005fbomb">it_bomb</a></dt>
<dt> <b>it-blocker</b> &rarr; <a href="#it_005fblocker">it_blocker</a></dt>
<dt> <b>it-blocker-new</b> &rarr; <code>it_blocker_new</code>, см. раздел <a href="#it_005fblocker">it_blocker</a></dt>
<dt> <b>it-booze</b> &rarr; <a href="#it_005fbottle">it_bottle</a></dt>
<dt> <b>it-booze-broken</b> &rarr; <code>it_bottle_broken</code>, см. раздел <a href="#it_005fbottle">it_bottle</a></dt>
<dt> <b>it-brake</b> &rarr; <a href="#it_005fbrake">it_brake</a></dt>
<dt> <b>it-brush</b> &rarr; <a href="#it_005fbrush">it_brush</a></dt>
<dt> <b>it-burnable</b> &rarr; <a href="#it_005fburnable">it_burnable</a></dt>
<dt> <b>it-burnable_ash</b> &rarr; <code>it_burnable_ash</code>, см. раздел <a href="#it_005fburnable">it_burnable</a></dt>
<dt> <b>it-burnable_burning</b> &rarr; <code>it_burnable_burning</code>, см. раздел <a href="#it_005fburnable">it_burnable</a></dt>
<dt> <b>it-burnable_fireproof</b> &rarr; <code>it_burnable_fireproof</code>, см. раздел <a href="#it_005fburnable">it_burnable</a></dt>
<dt> <b>it-burnable_ignited</b> &rarr; <code>it_burnable_ignited</code>, см. раздел <a href="#it_005fburnable">it_burnable</a></dt>
<dt> <b>it-burnable_oil</b> &rarr; <code>it_burnable_oil</code>, см. раздел <a href="#it_005fburnable">it_burnable</a></dt>
<dt> <b>it-cherry</b> &rarr; <a href="#it_005fcherry">it_cherry</a></dt>
<dt> <b>it-coffee</b> &rarr; <a href="#it_005fcoffee">it_coffee</a></dt>
<dt> <b>it-coin1</b> &rarr; <code>it_coin_s</code>, см. раздел <a href="#it_005fcoin">it_coin</a></dt>
<dt> <b>it-coin2</b> &rarr; <code>it_coin_m</code>, см. раздел <a href="#it_005fcoin">it_coin</a></dt>
<dt> <b>it-coin4</b> &rarr; <code>it_coin_l</code>, см. раздел <a href="#it_005fcoin">it_coin</a></dt>
<dt> <b>it-crack0</b> &rarr; <code>it_crack_i</code>, см. раздел <a href="#it_005fcrack">it_crack</a></dt>
<dt> <b>it-crack1</b> &rarr; <code>it_crack_s</code>, см. раздел <a href="#it_005fcrack">it_crack</a></dt>
<dt> <b>it-crack2</b> &rarr; <code>it_crack_m</code>, см. раздел <a href="#it_005fcrack">it_crack</a></dt>
<dt> <b>it-crack3</b> &rarr; <code>it_crack_l</code>, см. раздел <a href="#it_005fcrack">it_crack</a></dt>
<dt> <b>it-cross</b> &rarr; <a href="#it_005fcross">it_cross</a></dt>
<dt> <b>it-death</b> &rarr; <a href="#it_005fdeath">it_death</a></dt>
<dt> <b>it-document</b> &rarr; <a href="#it_005fdocument">it_document</a></dt>
<dt> <b>it-drop</b> &rarr; <a href="#it_005fdrop">it_drop</a></dt>
<dt> <b>it-dynamite</b> &rarr; <a href="#it_005fdynamite">it_dynamite</a></dt>
<dt> <b>it-explosion1</b> &rarr; <code>it_explosion_nil</code>, см. раздел <a href="#it_005fexplosion">it_explosion</a></dt>
<dt> <b>it-explosion2</b> &rarr; <code>it_explosion_hollow</code>, см. раздел <a href="#it_005fexplosion">it_explosion</a></dt>
<dt> <b>it-explosion3</b> &rarr; <code>it_explosion_debris</code>, см. раздел <a href="#it_005fexplosion">it_explosion</a></dt>
<dt> <b>it-extinguisher</b> &rarr; <a href="#it_005fextinguisher">it_extinguisher</a></dt>
<dt> <b>it-extinguisher_empty</b> &rarr; <code>it_extinguisher_empty</code>, см. раздел <a href="#it_005fextinguisher">it_extinguisher</a></dt>
<dt> <b>it-extinguisher_medium</b> &rarr; <code>it_extinguisher_medium</code>, см. раздел <a href="#it_005fextinguisher">it_extinguisher</a></dt>
<dt> <b>it-extralife</b> &rarr; <a href="#it_005fextralife">it_extralife</a></dt>
<dt> <b>it-flagblack</b> &rarr; <code>it_flag_black</code>, см. раздел <a href="#it_005fflag">it_flag</a></dt>
<dt> <b>it-flagwhite</b> &rarr; <code>it_flag_white</code>, см. раздел <a href="#it_005fflag">it_flag</a></dt>
<dt> <b>it-floppy</b> &rarr; <a href="#it_005ffloppy">it_floppy</a></dt>
<dt> <b>it-glasses</b> &rarr; <a href="#it_005fglasses">it_glasses</a></dt>
<dt> <b>it-glasses-broken</b> &rarr; <code>it_glasses_broken</code>, см. раздел <a href="#it_005fglasses">it_glasses</a></dt>
<dt> <b>it-hammer</b> &rarr; <a href="#it_005fhammer">it_hammer</a></dt>
<dt> <b>it-hollow</b> &rarr; <code>it_meditation_hollow</code>, см. раздел <a href="#it_005fmeditation">it_meditation</a></dt>
<dt> <b>it-hill</b> &rarr; <code>it_meditation_hill</code>, см. раздел <a href="#it_005fmeditation">it_meditation</a></dt>
<dt> <b>it-hstrip</b> &rarr; <code>it_strip_ew</code>, см. раздел <a href="#it_005fstrip">it_strip</a></dt>
<dt> <b>it-inversesensor</b> &rarr; <code>it_sensor, invisible=true, inverse=true</code>, см. раздел <a href="#it_005fsensor">it_sensor</a></dt>
<dt> <b>it-key</b> &rarr; <code>it_key, code=1</code>, см. раздел <a href="#it_005fkey">it_key</a></dt>
<dt> <b>it-key_a</b> &rarr; <code>it_key, code=1</code>, см. раздел <a href="#it_005fkey">it_key</a></dt>
<dt> <b>it-key_b</b> &rarr; <code>it_key, code=2</code>, см. раздел <a href="#it_005fkey">it_key</a></dt>
<dt> <b>it-key_c</b> &rarr; <code>it_key, code=3</code>, см. раздел <a href="#it_005fkey">it_key</a></dt>
<dt> <b>it-landmine</b> &rarr; <a href="#it_005flandmine">it_landmine</a></dt>
<dt> <b>it-magicwand</b> &rarr; <a href="#it_005fmagicwand">it_magicwand</a></dt>
<dt> <b>it-magnet</b> &rarr; <a href="#it_005fmagnet">it_magnet</a></dt>
<dt> <b>it-magnet-on</b> &rarr; <code>it_magnet_on</code>, см. раздел <a href="#it_005fmagnet">it_magnet</a></dt>
<dt> <b>it-magnet-off</b> &rarr; <code>it_magnet_off</code>, см. раздел <a href="#it_005fmagnet">it_magnet</a></dt>
<dt> <b>it-pencil</b> &rarr; <a href="#it_005fpencil">it_pencil</a></dt>
<dt> <b>it-pin</b> &rarr; <a href="#it_005fpin">it_pin</a></dt>
<dt> <b>it-pipe-e</b> &rarr; <code>it_pipe_e</code>, см. раздел <a href="#it_005fpipe">it_pipe</a></dt>
<dt> <b>it-pipe-es</b> &rarr; <code>it_pipe_es</code>, см. раздел <a href="#it_005fpipe">it_pipe</a></dt>
<dt> <b>it-pipe-h</b> &rarr; <code>it_pipe_ew</code>, см. раздел <a href="#it_005fpipe">it_pipe</a></dt>
<dt> <b>it-pipe-n</b> &rarr; <code>it_pipe_n</code>, см. раздел <a href="#it_005fpipe">it_pipe</a></dt>
<dt> <b>it-pipe-ne</b> &rarr; <code>it_pipe_ne</code>, см. разделn <a href="#it_005fpipe">it_pipe</a></dt>
<dt> <b>it-pipe-s</b> &rarr; <code>it_pipe_s</code>, см. раздел <a href="#it_005fpipe">it_pipe</a></dt>
<dt> <b>it-pipe-sw</b> &rarr; <code>it_pipe_sw</code>, см. раздел <a href="#it_005fpipe">it_pipe</a></dt>
<dt> <b>it-pipe-v</b> &rarr; <code>it_pipe_ns</code>, см. раздел <a href="#it_005fpipe">it_pipe</a></dt>
<dt> <b>it-pipe-w</b> &rarr; <code>it_pipe_w</code>, см. раздел <a href="#it_005fpipe">it_pipe</a></dt>
<dt> <b>it-pipe-wn</b> &rarr; <code>it_pipe_nw</code>, см. раздел <a href="#it_005fpipe">it_pipe</a></dt>
<dt> <b>it-puller-e</b> &rarr; <code>it_puller_e</code>, см. раздел <a href="#it_005fpuller">it_puller</a></dt>
<dt> <b>it-puller-n</b> &rarr; <code>it_puller_n</code>, см. раздел <a href="#it_005fpuller">it_puller</a></dt>
<dt> <b>it-puller-s</b> &rarr; <code>it_puller_s</code>, см. раздел <a href="#it_005fpuller">it_puller</a></dt>
<dt> <b>it-puller-w</b> &rarr; <code>it_puller_w</code>, см. раздел <a href="#it_005fpuller">it_puller</a></dt>
<dt> <b>it-ring</b> &rarr; <a href="#it_005fring">it_ring</a></dt>
<dt> <b>it-rubberband</b> &rarr; <a href="#it_005frubberband">it_rubberband</a></dt>
<dt> <b>it-seed</b> &rarr; <code>it_seed_wood</code>, см. раздел <a href="#it_005fseed">it_seed</a></dt>
<dt> <b>it-seed_nowood</b> &rarr; <code>it_seed_fake</code>, см. раздел <a href="#it_005fseed">it_seed</a></dt>
<dt> <b>it-seed_volcano</b> &rarr; <code>it_seed_volcano</code>, см. раздел <a href="#it_005fseed">it_seed</a></dt>
<dt> <b>it-sensor</b> &rarr; <code>it_sensor, invisible=true</code>, см. раздел <a href="#it_005fsensor">it_sensor</a></dt>
<dt> <b>it-spade</b> &rarr; <a href="#it_005fspade">it_spade</a></dt>
<dt> <b>it-spoon</b> &rarr; <a href="#it_005fspoon">it_spoon</a></dt>
<dt> <b>it-spring1</b> &rarr; <code>it_spring_keep</code>, см. раздел <a href="#it_005fspring">it_spring</a></dt>
<dt> <b>it-spring2</b> &rarr; <code>it_spring_drop</code>, см. раздел <a href="#it_005fspring">it_spring</a></dt>
<dt> <b>it-springboard</b> &rarr; <a href="#it_005fspringboard">it_springboard</a></dt>
<dt> <b>it-squashed</b> &rarr; <a href="#it_005fsquashed">it_squashed</a></dt>
<dt> <b>it-shogun-s</b> &rarr; <code>it_shogun_s</code>, см. раздел <a href="#it_005fshogun">it_shogun</a></dt>
<dt> <b>it-shogun-m</b> &rarr; <code>it_shogun_m</code>, см. раздел <a href="#it_005fshogun">it_shogun</a></dt>
<dt> <b>it-shogun-l</b> &rarr; <code>it_shogun_l</code>, см. раздел <a href="#it_005fshogun">it_shogun</a></dt>
<dt> <b>it-surprise</b> &rarr; <a href="#it_005fsurprise">it_surprise</a></dt>
<dt> <b>it-sword</b> &rarr; <a href="#it_005fsword">it_sword</a></dt>
<dt> <b>it-tinyhollow</b> &rarr; <code>it_meditation_dent</code>, см. раздел <a href="#it_005fmeditation">it_meditation</a></dt>
<dt> <b>it-tinyhill</b> &rarr; <code>it_meditation_bump</code>, см. раздел <a href="#it_005fmeditation">it_meditation</a></dt>
<dt> <b>it-trigger</b> &rarr; <a href="#it_005ftrigger">it_trigger</a></dt>
<dt> <b>it-umbrella</b> &rarr; <a href="#it_005fumbrella">it_umbrella</a></dt>
<dt> <b>it-vortex-open</b> &rarr; <code>it_vortex_open, scissor=false</code>, см. раздел <a href="#it_005fvortex">it_vortex</a></dt>
<dt> <b>it-vortex-closed</b> &rarr; <code>it_vortex_closed, autoclose=true, scissor=false</code>, см. раздел <a href="#it_005fvortex">it_vortex</a></dt>
<dt> <b>it-vstrip</b> &rarr; <code>it_strip_ns</code>, см. раздел <a href="#it_005fstrip">it_strip</a></dt>
<dt> <b>it-weight</b> &rarr; <a href="#it_005fweight">it_weight</a></dt>
<dt> <b>it-whitebomb</b> &rarr; <code>it_bomb_white</code>, см. раздел <a href="#it_005fbomb">it_bomb</a></dt>
<dt> <b>it-wormhole</b> &rarr; <code>it_wormhole_on, scissor=false</code>, см. раздел <a href="#it_005fwormhole">it_wormhole</a></dt>
<dt> <b>it-wormhole-off</b> &rarr; <code>it_wormhole_off, scissor=false</code>, см. раздел <a href="#it_005fwormhole">it_wormhole</a></dt>
<dt> <b>it-wrench</b> &rarr; <a href="#it_005fwrench">it_wrench</a></dt>
<dt> <b>it-yinyang</b> &rarr; <a href="#it_005fyinyang">it_yinyang</a></dt>
<dt> <b>st-actorimpulse</b> &rarr; <a href="#st_005factorimpulse">st_actorimpulse</a></dt>
<dt> <b>st-actorimpulse_invisible</b> &rarr; <code>st_actorimpulse_invisible</code>, см. раздел <a href="#st_005factorimpulse">st_actorimpulse</a></dt>
<dt> <b>st-beads</b> &rarr; <a href="#st_005fbeads">st_beads</a></dt>
<dt> <b>st-bigbluesand-e</b> &rarr; <code>st_bluesand_e</code>, см. раздел <a href="#st_005fbluesand">st_bluesand</a></dt>
<dt> <b>st-bigbluesand-es</b> &rarr; <code>st_bluesand_es</code>, см. раздел <a href="#st_005fbluesand">st_bluesand</a></dt>
<dt> <b>st-bigbluesand-esw</b> &rarr; <code>st_bluesand_esw</code>, см. раздел <a href="#st_005fbluesand">st_bluesand</a></dt>
<dt> <b>st-bigbluesand-ew</b> &rarr; <code>st_bluesand_ew</code>, см. раздел <a href="#st_005fbluesand">st_bluesand</a></dt>
<dt> <b>st-bigbluesand-n</b> &rarr; <code>st_bluesand_n</code>, см. раздел <a href="#st_005fbluesand">st_bluesand</a></dt>
<dt> <b>st-bigbluesand-ne</b> &rarr; <code>st_bluesand_ne</code>, см. раздел <a href="#st_005fbluesand">st_bluesand</a></dt>
<dt> <b>st-bigbluesand-nes</b> &rarr; <code>st_bluesand_nes</code>, см. раздел <a href="#st_005fbluesand">st_bluesand</a></dt>
<dt> <b>st-bigbluesand-nesw</b> &rarr; <code>st_bluesand_nesw</code>, см. раздел <a href="#st_005fbluesand">st_bluesand</a></dt>
<dt> <b>st-bigbluesand-new</b> &rarr; <code>st_bluesand_new</code>, см. раздел <a href="#st_005fbluesand">st_bluesand</a></dt>
<dt> <b>st-bigbluesand-ns</b> &rarr; <code>st_bluesand_ns</code>, см. раздел <a href="#st_005fbluesand">st_bluesand</a></dt>
<dt> <b>st-bigbluesand-nsw</b> &rarr; <code>st_bluesand_nsw</code>, см. раздел <a href="#st_005fbluesand">st_bluesand</a></dt>
<dt> <b>st-bigbluesand-nw</b> &rarr; <code>st_bluesand_nw</code>, см. раздел <a href="#st_005fbluesand">st_bluesand</a></dt>
<dt> <b>st-bigbluesand-s</b> &rarr; <code>st_bluesand_s</code>, см. раздел <a href="#st_005fbluesand">st_bluesand</a></dt>
<dt> <b>st-bigbluesand-sw</b> &rarr; <code>st_bluesand_sw</code>, см. раздел <a href="#st_005fbluesand">st_bluesand</a></dt>
<dt> <b>st-bigbluesand-w</b> &rarr; <code>st_bluesand_w</code>, см. раздел <a href="#st_005fbluesand">st_bluesand</a></dt>
<dt> <b>st-bigbrick-e</b> &rarr; <code>st_brick_e</code>, см. раздел <a href="#st_005fbrick">st_brick</a></dt>
<dt> <b>st-bigbrick-es</b> &rarr; <code>st_brick_es</code>, см. раздел <a href="#st_005fbrick">st_brick</a></dt>
<dt> <b>st-bigbrick-esw</b> &rarr; <code>st_brick_esw</code>, см. раздел <a href="#st_005fbrick">st_brick</a></dt>
<dt> <b>st-bigbrick-ew</b> &rarr; <code>st_brick_ew</code>, см. раздел <a href="#st_005fbrick">st_brick</a></dt>
<dt> <b>st-bigbrick-n</b> &rarr; <code>st_brick_n</code>, см. раздел <a href="#st_005fbrick">st_brick</a></dt>
<dt> <b>st-bigbrick-ne</b> &rarr; <code>st_brick_ne</code>, см. раздел <a href="#st_005fbrick">st_brick</a></dt>
<dt> <b>st-bigbrick-nes</b> &rarr; <code>st_brick_nes</code>, см. раздел <a href="#st_005fbrick">st_brick</a></dt>
<dt> <b>st-bigbrick-nesw</b> &rarr; <code>st_brick_nesw</code>,см. раздел <a href="#st_005fbrick">st_brick</a></dt>
<dt> <b>st-bigbrick-new</b> &rarr; <code>st_brick_new</code>, см. раздел <a href="#st_005fbrick">st_brick</a></dt>
<dt> <b>st-bigbrick-ns</b> &rarr; <code>st_brick_ns</code>, см. раздел <a href="#st_005fbrick">st_brick</a></dt>
<dt> <b>st-bigbrick-nsw</b> &rarr; <code>st_brick_nsw</code>, см. раздел <a href="#st_005fbrick">st_brick</a></dt>
<dt> <b>st-bigbrick-nw</b> &rarr; <code>st_brick_nw</code>, см. раздел <a href="#st_005fbrick">st_brick</a></dt>
<dt> <b>st-bigbrick-s</b> &rarr; <code>st_brick_s</code>, см. раздел <a href="#st_005fbrick">st_brick</a></dt>
<dt> <b>st-bigbrick-sw</b> &rarr; <code>st_brick_sw</code>, см. раздел <a href="#st_005fbrick">st_brick</a></dt>
<dt> <b>st-bigbrick-w</b> &rarr; <code>st_brick_w</code>, см. раздел <a href="#st_005fbrick">st_brick</a></dt>
<dt> <b>st-blackballs</b> &rarr; <code>st_jamb_black</code>, см. раздел <a href="#st_005fjamb">st_jamb</a></dt>
<dt> <b>st-black1</b> &rarr; <code>st_passage_black_square</code>, см. раздел <a href="#st_005fpassage">st_passage</a></dt>
<dt> <b>st-black2</b> &rarr; <code>st_passage_black_slash</code>, см. раздел <a href="#st_005fpassage">st_passage</a></dt>
<dt> <b>st-black3</b> &rarr; <code>st_passage_black_cross</code>, см. раздел <a href="#st_005fpassage">st_passage</a></dt>
<dt> <b>st-black4</b> &rarr; <code>st_passage_black_frame</code>, см. раздел <a href="#st_005fpassage">st_passage</a></dt>
<dt> <b>st-block</b> &rarr; <a href="#st_005fplop">st_plop</a></dt>
<dt> <b>st-blocker</b> &rarr; <a href="#st_005fblocker">st_blocker</a></dt>
<dt> <b>st-blocker-growing</b> &rarr; <code>st_blocker_new</code>, см. раздел <a href="#st_005fblocker">st_blocker</a></dt>
<dt> <b>st-bluegray</b> &rarr; <a href="#st_005fbluegray">st_bluegray</a></dt>
<dt> <b>st-bluegray_hole</b> &rarr; <code>st_bluegray_hollow</code>, см. раздел <a href="#st_005fbluegray">st_bluegray</a></dt>
<dt> <b>st-blue-sand</b> &rarr; <a href="#st_005fbluesand">st_bluesand</a></dt>
<dt> <b>st-bolder</b> &rarr; <a href="#st_005fboulder">st_boulder</a></dt>
<dt> <b>st-bolder-e</b> &rarr; <code>st_boulder_e</code>, см. раздел <a href="#st_005fboulder">st_boulder</a></dt>
<dt> <b>st-bolder-n</b> &rarr; <code>st_boulder_n</code>, см. раздел <a href="#st_005fboulder">st_boulder</a></dt>
<dt> <b>st-bolder-s</b> &rarr; <code>st_boulder_s</code>, см. раздел <a href="#st_005fboulder">st_boulder</a></dt>
<dt> <b>st-bolder-w</b> &rarr; <code>st_boulder_w</code>, см. раздел <a href="#st_005fboulder">st_boulder</a></dt>
<dt> <b>st-bombs</b> &rarr; <code>st_dispenser_bombblack</code>, см. раздел <a href="#st_005fdispenser">st_dispenser</a></dt>
<dt> <b>st-brake</b> &rarr; <a href="#st_005fbrake">st_brake</a></dt>
<dt> <b>st-break_acblack</b> &rarr; <code>st_break_black</code>, см. раздел <a href="#st_005fbreak">st_break</a></dt>
<dt> <b>st-break_acwhite</b> &rarr; <code>st_break_white</code>, см. раздел <a href="#st_005fbreak">st_break</a></dt>
<dt> <b>st-break_bolder</b> &rarr; <code>st_break_boulder</code>, см. раздел <a href="#st_005fbreak">st_break</a></dt>
<dt> <b>st-break_gray</b> &rarr; <code>st_break_plain</code>, см. раздел <a href="#st_005fbreak">st_break</a></dt>
<dt> <b>st-break_invisible</b> &rarr; <code>st_ghost_break</code>, см. раздел <a href="#st_005fghost">st_ghost</a></dt>
<dt> <b>st-brick</b> &rarr; <a href="#st_005fbrick">st_brick</a></dt>
<dt> <b>st-brick_magic</b> &rarr; <code>st_magic_brick</code>, см. раздел <a href="#st_005fmagic">st_magic</a></dt>
<dt> <b>st-brownie</b> &rarr; <a href="#st_005fbrownie">st_brownie</a></dt>
<dt> <b>st-bug</b> &rarr; <code>st_break_bug</code>, см. раздел <a href="#st_005fbreak">st_break</a></dt>
<dt> <b>st-bumps</b> &rarr; <a href="#st_005fpinkbumps">st_pinkbumps</a></dt>
<dt> <b>st-camouflage</b> &rarr; <a href="#st_005fcamouflage">st_camouflage</a></dt>
<dt> <b>st-camouflage_hole</b> &rarr; <code>st_camouflage_hollow</code>, см. раздел <a href="#st_005fcamouflage">st_camouflage</a></dt>
<dt> <b>st-camouflage_move</b> &rarr; <code>st_camouflage_movable</code>, см. раздел <a href="#st_005fcamouflage">st_camouflage</a></dt>
<dt> <b>st-chameleon</b> &rarr; <a href="#st_005fchameleon">st_chameleon</a></dt>
<dt> <b>st-chargeminus</b> &rarr; <code>st_charge_minus</code>, см. раздел <a href="#st_005fcharge">st_charge</a></dt>
<dt> <b>st-chargeplus</b> &rarr; <code>st_charge_plus</code>, см. раздел <a href="#st_005fcharge">st_charge</a></dt>
<dt> <b>st-chargezero</b> &rarr; <code>st_charge_zero</code>, см. раздел <a href="#st_005fcharge">st_charge</a></dt>
<dt> <b>st-chess</b> &rarr; <a href="#st_005fchess">st_chess</a></dt>
<dt> <b>st-chess_black</b> &rarr; <code>st_chess_black</code>, см. раздел <a href="#st_005fchess">st_chess</a></dt>
<dt> <b>st-chess_white</b> &rarr; <code>st_chess_white</code>, см. раздел <a href="#st_005fchess">st_chess</a></dt>
<dt> <b>st-coffee</b> &rarr; <code>st_magic_oxydc</code>, см. раздел <a href="#st_005fmagic">st_magic</a></dt>
<dt> <b>st-coinslot</b> &rarr; <a href="#st_005fcoinslot">st_coinslot</a></dt>
<dt> <b>st-death</b> &rarr; <a href="#st_005fdeath">st_death</a></dt>
<dt> <b>st-death_invisible</b> &rarr; <code>st_death_invisible</code>, см. раздел <a href="#st_005fdeath">st_death</a></dt>
<dt> <b>st-disco-dark</b> &rarr; <code>st_disco_dark</code>, см. раздел <a href="#st_005fdisco">st_disco</a></dt>
<dt> <b>st-disco-light</b> &rarr; <code>st_disco_light</code>, см. раздел <a href="#st_005fdisco">st_disco</a></dt>
<dt> <b>st-disco-medium</b> &rarr; <code>st_disco_medium</code>, см. раздел <a href="#st_005fdisco">st_disco</a></dt>
<dt> <b>st-door_a</b> &rarr; <code>st_door_a</code>, см. раздел <a href="#st_005fdoor">st_door</a></dt>
<dt> <b>st-door_b</b> &rarr; <code>st_door_b</code>, см. раздел <a href="#st_005fdoor">st_door</a></dt>
<dt> <b>st-door_c</b> &rarr; <code>st_door_c</code>, см. раздел <a href="#st_005fdoor">st_door</a></dt>
<dt> <b>st-door-h</b> &rarr; <code>st_door_d, faces=&quot;ns&quot;</code>, см. раздел <a href="#st_005fdoor">st_door</a></dt>
<dt> <b>st-door-h-open</b> &rarr; <code>st_door_d, faces=&quot;ns&quot;, state=OPEN</code>, см. раздел <a href="#st_005fdoor">st_door</a></dt>
<dt> <b>st-door-v</b> &rarr; <code>st_door_d, faces=&quot;ew&quot;</code>, см. раздел <a href="#st_005fdoor">st_door</a></dt>
<dt> <b>st-door-v-open</b> &rarr; <code>st_door_d, faces=&quot;ew&quot;, state=OPEN</code>, см. раздел <a href="#st_005fdoor">st_door</a></dt>
<dt> <b>st-fakeoxyd</b> &rarr; <code>st_fake_quake</code>, см. раздел <a href="#st_005ffake">st_fake</a></dt>
<dt> <b>st-fakeoxyda</b> &rarr; <code>st_magic_oxyda</code>, см. раздел <a href="#st_005fmagic">st_magic</a></dt>
<dt> <b>st-fart</b> &rarr; <a href="#st_005fquake">st_quake</a></dt>
<dt> <b>st-firebreak</b> &rarr; <code>st_flat_burnable</code>, см. раздел <a href="#st_005fflat">st_flat</a></dt>
<dt> <b>st-firebreak_move</b> &rarr; <code>st_flat_moveburnable</code>, см. раздел <a href="#st_005fflat">st_flat</a></dt>
<dt> <b>st-flash</b> &rarr; <a href="#st_005fflash">st_flash</a></dt>
<dt> <b>st-flhay</b> &rarr; <code>st_box_hay</code>, см. раздел <a href="#st_005fbox">st_box</a></dt>
<dt> <b>st-floppy</b> &rarr; <a href="#st_005ffloppy">st_floppy</a></dt>
<dt> <b>st-flrock</b> &rarr; <code>st_box_rock</code>, см. раздел <a href="#st_005fbox">st_box</a></dt>
<dt> <b>st-fourswitch</b> &rarr; <a href="#st_005ffourswitch">st_fourswitch</a></dt>
<dt> <b>st-glass</b> &rarr; <a href="#st_005frawglass">st_rawglass</a></dt>
<dt> <b>st-glass_move</b> &rarr; <code>st_rawglass_movable</code>, см. раздел <a href="#st_005frawglass">st_rawglass</a></dt>
<dt> <b>st-glass1</b> &rarr; <a href="#st_005flightglass">st_lightglass</a></dt>
<dt> <b>st-glass1_hole</b> &rarr; <code>st_lightglass_hollow</code>, см. раздел <a href="#st_005flightglass">st_lightglass</a></dt>
<dt> <b>st-glass1_move</b> &rarr; <code>st_lightglass_movable</code>, см. раздел <a href="#st_005flightglass">st_lightglass</a></dt>
<dt> <b>st-glass2</b> &rarr; <a href="#st_005fdarkglass">st_darkglass</a></dt>
<dt> <b>st-glass2_hole</b> &rarr; <code>st_darkglass_hollow</code>, см. раздел <a href="#st_005fdarkglass">st_darkglass</a></dt>
<dt> <b>st-glass2_move</b> &rarr; <code>st_darkglass_movable</code>, см. раздел <a href="#st_005fdarkglass">st_darkglass</a></dt>
<dt> <b>st-glass3</b> &rarr; <a href="#st_005fredfiber">st_redfiber</a></dt>
<dt> <b>st-grate1</b> &rarr; <code>st_grate_cross</code>, см. раздел <a href="#st_005fgrate">st_grate</a></dt>
<dt> <b>st-grate2</b> &rarr; <code>st_grate_framed</code>, см. раздел <a href="#st_005fgrate">st_grate</a></dt>
<dt> <b>st-grate3</b> &rarr; <code>st_portal_horse</code>, см. раздел <a href="#st_005fportal">st_portal</a></dt>
<dt> <b>st-greenbrown</b> &rarr; <a href="#st_005fgreenbrown">st_greenbrown</a></dt>
<dt> <b>st-greenbrown_hole</b> &rarr; <code>st_greenbrown_hollow</code>, см. раздел <a href="#st_005fgreenbrown">st_greenbrown</a></dt>
<dt> <b>st-greenbrown_move</b> &rarr; <code>st_greenbrown_movable</code>, см. раздел <a href="#st_005fgreenbrown">st_greenbrown</a></dt>
<dt> <b>st-invisible</b> &rarr; <a href="#st_005finvisible">st_invisible</a></dt>
<dt> <b>st-invisible_hole</b> &rarr; <code>st_invisible_hollow</code>, см. раздел <a href="#st_005finvisible">st_invisible</a></dt>
<dt> <b>st-invisible_magic</b> &rarr; <code>st_ghost_greenbrown</code>, см. раздел <a href="#st_005fghost">st_ghost</a></dt>
<dt> <b>st-invisible_move</b> &rarr; <code>st_invisible_movable</code>, см. раздел <a href="#st_005finvisible">st_invisible</a></dt>
<dt> <b>st-key</b> &rarr; <code>st_key, code=0</code>, см. раздел <a href="#st_005fkey">st_key</a></dt>
<dt> <b>st-key_a</b> &rarr; <code>st_key, code=1</code>, см. раздел <a href="#st_005fkey">st_key</a></dt>
<dt> <b>st-key_b</b> &rarr; <code>st_key, code=2</code>, см. раздел <a href="#st_005fkey">st_key</a></dt>
<dt> <b>st-key_c</b> &rarr; <code>st_key, code=3</code>, см. раздел <a href="#st_005fkey">st_key</a></dt>
<dt> <b>st-knight</b> &rarr; <a href="#st_005fknight">st_knight</a></dt>
<dt> <b>st-laserbreak</b> &rarr; <code>st_break_laser</code>, см. раздел <a href="#st_005fbreak">st_break</a></dt>
<dt> <b>st-laserswitch</b> &rarr; <a href="#st_005flaserswitch">st_laserswitch</a></dt>
<dt> <b>st-lasertimeswitch</b> &rarr; <a href="#st_005flaserflop">st_laserflop</a></dt>
<dt> <b>st-laser</b> &rarr; <code>st_laser_e</code>, см. раздел <a href="#st_005flaser">st_laser</a></dt>
<dt> <b>st-laser-e</b> &rarr; <code>st_laser_e</code>, см. раздел <a href="#st_005flaser">st_laser</a></dt>
<dt> <b>st-laser-n</b> &rarr; <code>st_laser_n</code>, см. раздел <a href="#st_005flaser">st_laser</a></dt>
<dt> <b>st-laser-s</b> &rarr; <code>st_laser_s</code>, см. раздел <a href="#st_005flaser">st_laser</a></dt>
<dt> <b>st-laser-w</b> &rarr; <code>st_laser_w</code>, см. раздел <a href="#st_005flaser">st_laser</a></dt>
<dt> <b>st-lightpassenger</b> &rarr; <a href="#st_005flightpassenger">st_lightpassenger</a></dt>
<dt> <b>st-lightpassenger_off</b> &rarr; <code>st_lightpassenger_off</code>, см. раздел <a href="#st_005flightpassenger">st_lightpassenger</a></dt>
<dt> <b>st-likeoxyda</b> &rarr; <code>st_fake_oxyda</code>, см. раздел <a href="#st_005ffake">st_fake</a></dt>
<dt> <b>st-likeoxyda-open</b> &rarr; <code>st_fake_oxyda, state=OPEN</code>, см. раздел <a href="#st_005ffake">st_fake</a></dt>
<dt> <b>st-likeoxydb</b> &rarr; <code>st_fake_oxydb</code>, см. раздел <a href="#st_005ffake">st_fake</a></dt>
<dt> <b>st-likeoxydb-open</b> &rarr; <code>st_fake_oxydb, state=OPEN</code>, см. раздел <a href="#st_005ffake">st_fake</a></dt>
<dt> <b>st-likeoxydc</b> &rarr; <code>st_fake_oxydc</code>, см. раздел <a href="#st_005ffake">st_fake</a></dt>
<dt> <b>st-likeoxydb-open</b> &rarr; <code>st_fake_oxydb, state=OPEN</code>, см. раздел <a href="#st_005ffake">st_fake</a></dt>
<dt> <b>st-likeoxydd</b> &rarr; <code>st_fake_oxydd</code>, см. раздел <a href="#st_005ffake">st_fake</a></dt>
<dt> <b>st-likeoxydd-open</b> &rarr; <code>st_fake_oxydd, state=OPEN</code>, см. раздел <a href="#st_005ffake">st_fake</a></dt>
<dt> <b>st-mail-e</b> &rarr; <code>st_mail_e</code>, см. раздел <a href="#st_005fmail">st_mail</a></dt>
<dt> <b>st-mail-n</b> &rarr; <code>st_mail_n</code>, см. раздел <a href="#st_005fmail">st_mail</a></dt>
<dt> <b>st-mail-s</b> &rarr; <code>st_mail_s</code>, см. раздел <a href="#st_005fmail">st_mail</a></dt>
<dt> <b>st-mail-w</b> &rarr; <code>st_mail_w</code>, см. раздел <a href="#st_005fmail">st_mail</a></dt>
<dt> <b>st-marble</b> &rarr; <a href="#st_005fredbrown">st_redbrown</a></dt>
<dt> <b>st-marble_hole</b> &rarr; <code>st_redbrown_hollow</code>, см. раздел <a href="#st_005fredbrown">st_redbrown</a></dt>
<dt> <b>st-marble_move</b> &rarr; <code>st_redbrown_movable</code>, см. раздел <a href="#st_005fredbrown">st_redbrown</a></dt>
<dt> <b>st-metal</b> &rarr; <a href="#st_005fmetal">st_metal</a></dt>
<dt> <b>st-metal_hole</b> &rarr; <code>st_metal_hollow</code>, см. раздел <a href="#st_005fmetal">st_metal</a></dt>
<dt> <b>st-mirror-p|</b> &rarr; <code>st_mirror_slab_n</code>, см. раздел <a href="#st_005fmirror">st_mirror</a></dt>
<dt> <b>st-mirror-p/</b> &rarr; <code>st_mirror_slab_e</code>, см. раздел <a href="#st_005fmirror">st_mirror</a></dt>
<dt> <b>st-mirror-p-</b> &rarr; <code>st_mirror_slab_s</code>, см. раздел <a href="#st_005fmirror">st_mirror</a></dt>
<dt> <b>st-mirror-p\\</b> &rarr; <code>st_mirror_slab_w</code>, см. раздел <a href="#st_005fmirror">st_mirror</a></dt>
<dt> <b>st-mirror-p|t</b> &rarr; <code>st_mirror_slab_nt</code>, см. раздел <a href="#st_005fmirror">st_mirror</a></dt>
<dt> <b>st-mirror-p/t</b> &rarr; <code>st_mirror_slab_et</code>, см. раздел <a href="#st_005fmirror">st_mirror</a></dt>
<dt> <b>st-mirror-p-t</b> &rarr; <code>st_mirror_slab_st</code>, см. раздел <a href="#st_005fmirror">st_mirror</a></dt>
<dt> <b>st-mirror-p\\t</b> &rarr; <code>st_mirror_slab_wt</code>, см. раздел <a href="#st_005fmirror">st_mirror</a></dt>
<dt> <b>st-mirror-p|m</b> &rarr; <code>st_mirror_slab_nm</code>, см. раздел <a href="#st_005fmirror">st_mirror</a></dt>
<dt> <b>st-mirror-p/m</b> &rarr; <code>st_mirror_slab_em</code>, см. раздел <a href="#st_005fmirror">st_mirror</a></dt>
<dt> <b>st-mirror-p-m</b> &rarr; <code>st_mirror_slab_sm</code>, см. раздел <a href="#st_005fmirror">st_mirror</a></dt>
<dt> <b>st-mirror-p\\m</b> &rarr; <code>st_mirror_slab_wm</code>, см. раздел <a href="#st_005fmirror">st_mirror</a></dt>
<dt> <b>st-mirror-p|tm</b> &rarr; <code>st_mirror_slab_ntm</code>, см. раздел <a href="#st_005fmirror">st_mirror</a></dt>
<dt> <b>st-mirror-p/tm</b> &rarr; <code>st_mirror_slab_etm</code>, см. раздел <a href="#st_005fmirror">st_mirror</a></dt>
<dt> <b>st-mirror-p-tm</b> &rarr; <code>st_mirror_slab_stm</code>, см. раздел <a href="#st_005fmirror">st_mirror</a></dt>
<dt> <b>st-mirror-p\\tm</b> &rarr; <code>st_mirror_slab_wtm</code>, см. раздел <a href="#st_005fmirror">st_mirror</a></dt>
<dt> <b>st-mirror-3^</b> &rarr; <code>st_mirror_triangle_n</code>, см. раздел <a href="#st_005fmirror">st_mirror</a></dt>
<dt> <b>st-mirror-3&gt;</b> &rarr; <code>st_mirror_triangle_e</code>, см. раздел <a href="#st_005fmirror">st_mirror</a></dt>
<dt> <b>st-mirror-3v</b> &rarr; <code>st_mirror_triangle_s</code>, см. раздел <a href="#st_005fmirror">st_mirror</a></dt>
<dt> <b>st-mirror-3&lt;</b> &rarr; <code>st_mirror_triangle_w</code>, см. раздел <a href="#st_005fmirror">st_mirror</a></dt>
<dt> <b>st-mirror-3^t</b> &rarr; <code>st_mirror_triangle_nt</code>, см. раздел <a href="#st_005fmirror">st_mirror</a></dt>
<dt> <b>st-mirror-3&gt;t</b> &rarr; <code>st_mirror_triangle_et</code>, см. раздел <a href="#st_005fmirror">st_mirror</a></dt>
<dt> <b>st-mirror-3vt</b> &rarr; <code>st_mirror_triangle_st</code>, см. раздел <a href="#st_005fmirror">st_mirror</a></dt>
<dt> <b>st-mirror-3&lt;t</b> &rarr; <code>st_mirror_triangle_wt</code>, см. раздел <a href="#st_005fmirror">st_mirror</a></dt>
<dt> <b>st-mirror-3^m</b> &rarr; <code>st_mirror_triangle_nm</code>, см. раздел <a href="#st_005fmirror">st_mirror</a></dt>
<dt> <b>st-mirror-3&gt;m</b> &rarr; <code>st_mirror_triangle_em</code>, см. раздел <a href="#st_005fmirror">st_mirror</a></dt>
<dt> <b>st-mirror-3vm</b> &rarr; <code>st_mirror_triangle_sm</code>, см. раздел <a href="#st_005fmirror">st_mirror</a></dt>
<dt> <b>st-mirror-3&lt;m</b> &rarr; <code>st_mirror_triangle_wm</code>, см. раздел <a href="#st_005fmirror">st_mirror</a></dt>
<dt> <b>st-mirror-3^tm</b> &rarr; <code>st_mirror_triangle_ntm</code>, см. раздел <a href="#st_005fmirror">st_mirror</a></dt>
<dt> <b>st-mirror-3&gt;tm</b> &rarr; <code>st_mirror_triangle_etm</code>, см. раздел <a href="#st_005fmirror">st_mirror</a></dt>
<dt> <b>st-mirror-3vtm</b> &rarr; <code>st_mirror_triangle_stm</code>, см. раздел <a href="#st_005fmirror">st_mirror</a></dt>
<dt> <b>st-mirror-3&lt;tm</b> &rarr; <code>st_mirror_triangle_wtm</code>, см. раздел <a href="#st_005fmirror">st_mirror</a></dt>
<dt> <b>st-oneway</b> &rarr; <a href="#st_005foneway">st_oneway</a></dt>
<dt> <b>st-oneway_black&quot;</b> &rarr; <code>st_oneway_black</code>, см. раздел <a href="#st_005foneway">st_oneway</a></dt>
<dt> <b>st-oneway_black-e&quot;</b> &rarr; <code>st_oneway_black_e</code>, см. раздел <a href="#st_005foneway">st_oneway</a></dt>
<dt> <b>st-oneway_black-n&quot;</b> &rarr; <code>st_oneway_black_n</code>, см. раздел <a href="#st_005foneway">st_oneway</a></dt>
<dt> <b>st-oneway_black-s&quot;</b> &rarr; <code>st_oneway_black_s</code>, см. раздел <a href="#st_005foneway">st_oneway</a></dt>
<dt> <b>st-oneway_black-w&quot;</b> &rarr; <code>st_oneway_black_w</code>, см. раздел <a href="#st_005foneway">st_oneway</a></dt>
<dt> <b>st-oneway-e&quot;</b> &rarr; <code>st_oneway_e</code>, см. раздел <a href="#st_005foneway">st_oneway</a></dt>
<dt> <b>st-oneway-n&quot;</b> &rarr; <code>st_oneway_n</code>, см. раздел <a href="#st_005foneway">st_oneway</a></dt>
<dt> <b>st-oneway-s&quot;</b> &rarr; <code>st_oneway_s</code>, см. раздел <a href="#st_005foneway">st_oneway</a></dt>
<dt> <b>st-oneway-w&quot;</b> &rarr; <code>st_oneway_w</code>, см. раздел <a href="#st_005foneway">st_oneway</a></dt>
<dt> <b>st-oneway_white&quot;</b> &rarr; <code>st_oneway_white</code>, см. раздел <a href="#st_005foneway">st_oneway</a></dt>
<dt> <b>st-oneway_white-e&quot;</b> &rarr; <code>st_oneway_white_e</code>, см. раздел <a href="#st_005foneway">st_oneway</a></dt>
<dt> <b>st-oneway_white-n&quot;</b> &rarr; <code>st_oneway_white_n</code>, см. раздел <a href="#st_005foneway">st_oneway</a></dt>
<dt> <b>st-oneway_white-s&quot;</b> &rarr; <code>st_oneway_white_s</code>, см. раздел <a href="#st_005foneway">st_oneway</a></dt>
<dt> <b>st-oneway_white-w&quot;</b> &rarr; <code>st_oneway_white_w</code>, см. раздел <a href="#st_005foneway">st_oneway</a></dt>
<dt> <b>st-oxyd</b> &rarr; <a href="#st_005foxyd">st_oxyd</a></dt>
<dt> <b>st-plain</b> &rarr; <a href="#st_005fflat">st_flat</a></dt>
<dt> <b>st-plain_break</b> &rarr; <code>st_flat_breakable</code>, см. раздел <a href="#st_005fflat">st_flat</a></dt>
<dt> <b>st-plain_cracked</b> &rarr; <code>st_flat_cracked</code>, см. раздел <a href="#st_005fflat">st_flat</a></dt>
<dt> <b>st-plain_hole</b> &rarr; <code>st_flat_hollow</code>, см. раздел <a href="#st_005fflat">st_flat</a></dt>
<dt> <b>st-plain_move</b> &rarr; <code>st_flat_movable</code>, см. раздел <a href="#st_005fflat">st_flat</a></dt>
<dt> <b>st-pmirror</b> &rarr; <code>st_mirror_slab_e</code>, см. раздел <a href="#st_005fmirror">st_mirror</a></dt>
<dt> <b>st-polarswitch</b> &rarr; <a href="#st_005fpolarswitch">st_polarswitch</a></dt>
<dt> <b>st-pull</b> &rarr; <a href="#st_005fpull">st_pull</a></dt>
<dt> <b>st-puzzle</b> &rarr; <a href="#st_005fpuzzle">st_puzzle</a></dt>
<dt> <b>st-puzzle-e</b> &rarr; <code>st_puzzle_blue_e</code>, см. раздел <a href="#st_005fpuzzle">st_puzzle</a></dt>
<dt> <b>st-puzzle-es</b> &rarr; <code>st_puzzle_blue_es</code>, см. раздел <a href="#st_005fpuzzle">st_puzzle</a></dt>
<dt> <b>st-puzzle-esw</b> &rarr; <code>st_puzzle_blue_esw</code>, см. раздел <a href="#st_005fpuzzle">st_puzzle</a></dt>
<dt> <b>st-puzzle-ew</b> &rarr; <code>st_puzzle_blue_ew</code>, см. раздел <a href="#st_005fpuzzle">st_puzzle</a></dt>
<dt> <b>st-puzzle-hollow</b> &rarr; <code>st_puzzle_blue_nesw_hollow</code>, см. раздел <a href="#st_005fpuzzle">st_puzzle</a></dt>
<dt> <b>st-puzzle-n</b> &rarr; <code>st_puzzle_blue_n</code>, см. раздел <a href="#st_005fpuzzle">st_puzzle</a></dt>
<dt> <b>st-puzzle-ne</b> &rarr; <code>st_puzzle_blue_ne</code>, см. раздел <a href="#st_005fpuzzle">st_puzzle</a></dt>
<dt> <b>st-puzzle-nes</b> &rarr; <code>st_puzzle_blue_nes</code>, см. раздел <a href="#st_005fpuzzle">st_puzzle</a></dt>
<dt> <b>st-puzzle-nesw</b> &rarr; <code>st_puzzle_blue_nesw</code>, см. раздел <a href="#st_005fpuzzle">st_puzzle</a></dt>
<dt> <b>st-puzzle-new</b> &rarr; <code>st_puzzle_blue_new</code>, см. раздел <a href="#st_005fpuzzle">st_puzzle</a></dt>
<dt> <b>st-puzzle-ns</b> &rarr; <code>st_puzzle_blue_ns</code>, см. раздел <a href="#st_005fpuzzle">st_puzzle</a></dt>
<dt> <b>st-puzzle-nsw</b> &rarr; <code>st_puzzle_blue_nsw</code>, см. раздел <a href="#st_005fpuzzle">st_puzzle</a></dt>
<dt> <b>st-puzzle-nw</b> &rarr; <code>st_puzzle_blue_nw</code>, см. раздел <a href="#st_005fpuzzle">st_puzzle</a></dt>
<dt> <b>st-puzzle-s</b> &rarr; <code>st_puzzle_blue_s</code>, см. раздел <a href="#st_005fpuzzle">st_puzzle</a></dt>
<dt> <b>st-puzzle-sw</b> &rarr; <code>st_puzzle_blue_sw</code>, см. раздел <a href="#st_005fpuzzle">st_puzzle</a></dt>
<dt> <b>st-puzzle-w</b> &rarr; <code>st_puzzle_blue_w</code>, см. раздел <a href="#st_005fpuzzle">st_puzzle</a></dt>
<dt> <b>st-puzzle2-e</b> &rarr; <code>st_puzzle_yellow_e</code>, см. раздел <a href="#st_005fpuzzle">st_puzzle</a></dt>
<dt> <b>st-puzzle2-es</b> &rarr; <code>st_puzzle_yellow_es</code>, см. раздел <a href="#st_005fpuzzle">st_puzzle</a></dt>
<dt> <b>st-puzzle2-esw</b> &rarr; <code>st_puzzle_yellow_esw</code>, см. раздел <a href="#st_005fpuzzle">st_puzzle</a></dt>
<dt> <b>st-puzzle2-ew</b> &rarr; <code>st_puzzle_yellow_ew</code>, см. раздел <a href="#st_005fpuzzle">st_puzzle</a></dt>
<dt> <b>st-puzzle2-hollow</b> &rarr; <code>st_puzzle_yellow_nesw_hollow</code>, см. раздел <a href="#st_005fpuzzle">st_puzzle</a></dt>
<dt> <b>st-puzzle2-n</b> &rarr; <code>st_puzzle_yellow_n</code>, см. раздел <a href="#st_005fpuzzle">st_puzzle</a></dt>
<dt> <b>st-puzzle2-ne</b> &rarr; <code>st_puzzle_yellow_ne</code>, см. раздел <a href="#st_005fpuzzle">st_puzzle</a></dt>
<dt> <b>st-puzzle2-nes</b> &rarr; <code>st_puzzle_yellow_nes</code>, см. раздел <a href="#st_005fpuzzle">st_puzzle</a></dt>
<dt> <b>st-puzzle2-nesw</b> &rarr; <code>st_puzzle_yellow_nesw</code>, см. раздел <a href="#st_005fpuzzle">st_puzzle</a></dt>
<dt> <b>st-puzzle2-new</b> &rarr; <code>st_puzzle_yellow_new</code>, см. раздел <a href="#st_005fpuzzle">st_puzzle</a></dt>
<dt> <b>st-puzzle2-ns</b> &rarr; <code>st_puzzle_yellow_ns</code>, см. раздел <a href="#st_005fpuzzle">st_puzzle</a></dt>
<dt> <b>st-puzzle2-nsw</b> &rarr; <code>st_puzzle_yellow_nsw</code>, см. раздел <a href="#st_005fpuzzle">st_puzzle</a></dt>
<dt> <b>st-puzzle2-nw</b> &rarr; <code>st_puzzle_yellow_nw</code>, см. раздел <a href="#st_005fpuzzle">st_puzzle</a></dt>
<dt> <b>st-puzzle2-s</b> &rarr; <code>st_puzzle_yellow_s</code>, см. раздел <a href="#st_005fpuzzle">st_puzzle</a></dt>
<dt> <b>st-puzzle2-sw</b> &rarr; <code>st_puzzle_yellow_sw</code>, см. раздел <a href="#st_005fpuzzle">st_puzzle</a></dt>
<dt> <b>st-puzzle2-w</b> &rarr; <code>st_puzzle_yellow_w</code>, см. раздел <a href="#st_005fpuzzle">st_puzzle</a></dt>
<dt> <b>st-redrock</b> &rarr; <a href="#st_005fredrock">st_redrock</a></dt>
<dt> <b>st-rock1</b> &rarr; <a href="#st_005fgranite">st_granite</a></dt>
<dt> <b>st-rock1_hole</b> &rarr; <code>st_granite_hollow</code>, см. раздел <a href="#st_005fgranite">st_granite</a></dt>
<dt> <b>st-rock1_move</b> &rarr; <code>st_granite_movable</code>, см. раздел <a href="#st_005fgranite">st_granite</a></dt>
<dt> <b>st-rock2</b> &rarr; <a href="#st_005fdarkgray">st_darkgray</a></dt>
<dt> <b>st-rock2_hole</b> &rarr; <code>st_darkgray_hollow</code>, см. раздел <a href="#st_005fdarkgray">st_darkgray</a></dt>
<dt> <b>st-rock3</b> &rarr; <a href="#st_005fplaster">st_plaster</a></dt>
<dt> <b>st-rock3_break</b> &rarr; <code>st_plaster_breakable</code>, см. раздел <a href="#st_005fplaster">st_plaster</a></dt>
<dt> <b>st-rock3_hole</b> &rarr; <code>st_plaster_hollow</code>, см. раздел <a href="#st_005fplaster">st_plaster</a></dt>
<dt> <b>st-rock3_move</b> &rarr; <code>st_plaster_movable</code>, см. раздел <a href="#st_005fplaster">st_plaster</a></dt>
<dt> <b>st-rock3_movebreak</b> &rarr; <code>st_plaster_movebreakable</code>, см. раздел <a href="#st_005fplaster">st_plaster</a></dt>
<dt> <b>st-rock4</b> &rarr; <a href="#st_005fpurplemarble">st_purplemarble</a></dt>
<dt> <b>st-rock5</b> &rarr; <a href="#st_005ftigris">st_tigris</a></dt>
<dt> <b>st-rock6</b> &rarr; <a href="#st_005fpurplegray">st_purplegray</a></dt>
<dt> <b>st-rock7</b> &rarr; <a href="#st_005fgreengray">st_greengray</a></dt>
<dt> <b>st-rock8</b> &rarr; <a href="#st_005fconcrete">st_concrete</a></dt>
<dt> <b>st-rock9</b> &rarr; <a href="#st_005fancient">st_ancient</a></dt>
<dt> <b>st-rock10</b> &rarr; <a href="#st_005fbrownmarble">st_brownmarble</a></dt>
<dt> <b>st-rotator-left</b> &rarr; <code>st_rotator_ccw</code>, см. раздел <a href="#st_005frotator">st_rotator</a></dt>
<dt> <b>st-rotator_move-left</b> &rarr; <code>st_rotator_ccw_movable</code>, см. раздел <a href="#st_005frotator">st_rotator</a></dt>
<dt> <b>st-rotator_move-right</b> &rarr; <code>st_rotator_cw_movable</code>, см. раздел <a href="#st_005frotator">st_rotator</a></dt>
<dt> <b>st-rotator-right</b> &rarr; <code>st_rotator_cw</code>, см. раздел <a href="#st_005frotator">st_rotator</a></dt>
<dt> <b>st-rubberband</b> &rarr; <a href="#st_005frubberband">st_rubberband</a></dt>
<dt> <b>it-sensor</b> &rarr; <code>st_scissors, invisible=true</code>, см. раздел <a href="#st_005fscissors">st_scissors</a></dt>
<dt> <b>st-shogun</b> &rarr; <a href="#st_005fshogun">st_shogun</a></dt>
<dt> <b>st-shogun-l</b> &rarr; <code>st_shogun_l</code>, см. раздел <a href="#st_005fshogun">st_shogun</a></dt>
<dt> <b>st-shogun-m</b> &rarr; <code>st_shogun_m</code>, см. раздел <a href="#st_005fshogun">st_shogun</a></dt>
<dt> <b>st-shogun-ml</b> &rarr; <code>st_shogun_ml</code>, см. раздел <a href="#st_005fshogun">st_shogun</a></dt>
<dt> <b>st-shogun-s</b> &rarr; <code>st_shogun_s</code>, см. раздел <a href="#st_005fshogun">st_shogun</a></dt>
<dt> <b>st-shogun-sl</b> &rarr; <code>st_shogun_sl</code>, см. раздел <a href="#st_005fshogun">st_shogun</a></dt>
<dt> <b>st-shogun-sm</b> &rarr; <code>st_shogun_sm</code>, см. раздел <a href="#st_005fshogun">st_shogun</a></dt>
<dt> <b>st-shogun-sml</b> &rarr; <code>st_shogun_sml</code>, см. раздел <a href="#st_005fshogun">st_shogun</a></dt>
<dt> <b>st-spitter</b> &rarr; <a href="#st_005fspitter">st_spitter</a></dt>
<dt> <b>st-stonebrush</b> &rarr; <code>st_ghost_purplemarble</code>, см. раздел <a href="#st_005fghost">st_ghost</a></dt>
<dt> <b>st-stoneimpulse</b> &rarr; <a href="#st_005fstoneimpulse">st_stoneimpulse</a></dt>
<dt> <b>st-stoneimpulse-hollow</b> &rarr; <code>st_stoneimpulse_hollow</code>, см. раздел <a href="#st_005fstoneimpulse">st_stoneimpulse</a></dt>
<dt> <b>st-stoneimpulse_movable</b> &rarr; <code>st_stoneimpulse_movable</code>, см. раздел <a href="#st_005fstoneimpulse">st_stoneimpulse</a></dt>
<dt> <b>st-stone1</b> &rarr; <a href="#st_005fbrownpyramid">st_brownpyramid</a></dt>
<dt> <b>st-stone2</b> &rarr; <a href="#st_005fredmarble">st_redmarble</a></dt>
<dt> <b>st-stone_break</b> &rarr; <code>st_break_oxydc</code>, см. раздел <a href="#st_005fbreak">st_break</a></dt>
<dt> <b>st-surprise</b> &rarr; <a href="#st_005fsurprise">st_surprise</a></dt>
<dt> <b>st-swap</b> &rarr; <a href="#st_005fswap">st_swap</a></dt>
<dt> <b>st-switch</b> &rarr; <code>st_switch, instant=true</code>, см. раздел <a href="#st_005fswitch">st_switch</a></dt>
<dt> <b>st-switch</b> &rarr; <code>st_switch, instant=true</code>, см. раздел <a href="#st_005fswitch">st_switch</a></dt>
<dt> <b>st-switch_white</b> &rarr; <code>st_switch_white, instant=true</code>, см. раздел <a href="#st_005fswitch">st_switch</a></dt>
<dt> <b>st-thief</b> &rarr; <a href="#st_005fthief">st_thief</a></dt>
<dt> <b>st-timer</b> &rarr; <a href="#st_005ftimer">st_timer</a></dt>
<dt> <b>st-timeswitch</b> &rarr; <a href="#st_005fmonoflop">st_monoflop</a></dt>
<dt> <b>st-turnstile</b> &rarr; <code>st_turnstile_red</code>, см. раздел <a href="#st_005fturnstile">st_turnstile</a></dt>
<dt> <b>st-turnstile-green</b> &rarr; <code>st_turnstile_green</code>, см. раздел <a href="#st_005fturnstile">st_turnstile</a></dt>
<dt> <b>st-turnstile-e</b> &rarr; <code>st_turnstilearm_e</code>, см. раздел <a href="#st_005fturnstilearm">st_turnstilearm</a></dt>
<dt> <b>st-turnstile-n</b> &rarr; <code>st_turnstilearm_n</code>, см. раздел <a href="#st_005fturnstilearm">st_turnstilearm</a></dt>
<dt> <b>st-turnstile-s</b> &rarr; <code>st_turnstilearm_s</code>, см. раздел <a href="#st_005fturnstilearm">st_turnstilearm</a></dt>
<dt> <b>st-turnstile-w</b> &rarr; <code>st_turnstilearm_w</code>, см. раздел <a href="#st_005fturnstilearm">st_turnstilearm</a></dt>
<dt> <b>st-volcano</b> &rarr; <a href="#st_005fvolcano">st_volcano</a></dt>
<dt> <b>st-volcano_active</b> &rarr; <code>st_volcano_active</code>, см. раздел <a href="#st_005fvolcano">st_volcano</a></dt>
<dt> <b>st-volcano-growing</b> &rarr; <code>st_volcano_new</code>, см. раздел <a href="#st_005fvolcano">st_volcano</a></dt>
<dt> <b>st-volcano_inactive</b> &rarr; <code>st_volcano_idle</code>, см. раздел <a href="#st_005fvolcano">st_volcano</a></dt>
<dt> <b>st-whiteballs</b> &rarr; <code>st_jamb_white</code>, см. раздел <a href="#st_005fjamb">st_jamb</a></dt>
<dt> <b>st-white1</b> &rarr; <code>st_passage_white_square</code>, см. раздел <a href="#st_005fpassage">st_passage</a></dt>
<dt> <b>st-white2</b> &rarr; <code>st_passage_white_slash</code>, см. раздел <a href="#st_005fpassage">st_passage</a></dt>
<dt> <b>st-white3</b> &rarr; <code>st_passage_white_cross</code>, см. раздел <a href="#st_005fpassage">st_passage</a></dt>
<dt> <b>st-white4</b> &rarr; <code>st_passage_white_frame</code>, см. раздел <a href="#st_005fpassage">st_passage</a></dt>
<dt> <b>st-window</b> &rarr; <a href="#st_005fwindow">st_window</a></dt>
<dt> <b>st-wood</b> &rarr; <code>st_box_wood</code>, см. раздел <a href="#st_005fbox">st_box</a></dt>
<dt> <b>st-wood1</b> &rarr; <code>st_box_wood_h</code>, см. раздел <a href="#st_005fbox">st_box</a></dt>
<dt> <b>st-wood2</b> &rarr; <code>st_box_wood_v</code>, см. раздел <a href="#st_005fbox">st_box</a></dt>
<dt> <b>st-wood-growing</b> &rarr; <code>st_box_wood_growing</code>, см. раздел <a href="#st_005fbox">st_box</a></dt>
<dt> <b>st-wood_001</b> &rarr; <a href="#st_005fpanel">st_panel</a></dt>
<dt> <b>st-woven</b> &rarr; <a href="#st_005fwoven">st_woven</a></dt>
<dt> <b>st-yellow</b> &rarr; <a href="#st_005fyellow">st_yellow</a></dt>
<dt> <b>st-yinyang1</b> &rarr; <code>st_blur_cross</code>, см. раздел <a href="#st_005fblur">st_blur</a></dt>
<dt> <b>st-yinyang2</b> &rarr; <code>st_blur_straight</code>, см. раздел <a href="#st_005fblur">st_blur</a></dt>
<dt> <b>st-yinyang3</b> &rarr; <code>st_blur_magic</code>, см. раздел <a href="#st_005fblur">st_blur</a></dt>
<dt> <b>st-3mirror</b> &rarr; <code>st_mirror_triangle_s</code>, см. раздел <a href="#st_005fmirror">st_mirror</a></dt>
</dl>
<hr size="6">
<a name="SEC_Contents"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<h1>Содержание</h1>
<div class="contents">

<ul class="toc">
  <li><a name="toc-Running-Enigma-1" href="#Running-Enigma">1. Использование Enigma</a>
  <ul class="toc">
    <li><a name="toc-Locating-Resources-1" href="#Locating-Resources">1.1 Размещение ресурсов</a></li>
    <li><a name="toc-Startup-Switches-1" href="#Startup-Switches">1.2 Опции запуска</a></li>
    <li><a name="toc-User-Options-1" href="#User-Options">1.3 Пользовательские опции</a></li>
    <li><a name="toc-Inventory-Console-1" href="#Inventory-Console">1.4 Консольная функция инвентаря</a></li>
    <li><a name="toc-Level-Info-1" href="#Level-Info">1.5 Информация об уровне</a>
    <ul class="toc">
      <li><a name="toc-Public-Ratings-1" href="#Public-Ratings">1.5.1 Публичные рейтинги</a></li>
      <li><a name="toc-Scores-1" href="#Scores">1.5.2 Баллы</a></li>
      <li><a name="toc-Versions-1" href="#Versions">1.5.3 Версии</a></li>
      <li><a name="toc-Private-Annotations-and-Ratings-1" href="#Private-Annotations-and-Ratings">1.5.4 Личные примечания и оценки</a></li>
      <li><a name="toc-Screenshots-1" href="#Screenshots">1.5.5 Снимки экрана</a></li>
    </ul></li>
    <li><a name="toc-Handicap-and-PAR-1" href="#Handicap-and-PAR">1.6 Гандикап и пар (PAR)</a></li>
    <li><a name="toc-User-Sound-Sets-1" href="#User-Sound-Sets">1.7 Пользовательские наборы звуков</a></li>
  </ul></li>
  <li><a name="toc-Levelpack-Basics-1" href="#Levelpack-Basics">2. Основы работы с пакетами уровней</a>
  <ul class="toc">
    <li><a name="toc-Getting-Started-with-Levelpacks-1" href="#Getting-Started-with-Levelpacks">2.1 Начало работы с пакетами уровней</a></li>
    <li><a name="toc-Converting-0_002e92-Levelpacks-1" href="#Converting-0_002e92-Levelpacks">2.2 Конвертирование пакетов из версии 0.92</a></li>
    <li><a name="toc-Zip-Levelpacks-1" href="#Zip-Levelpacks">2.3 Пакеты в формате zip</a></li>
    <li><a name="toc-Grouping-and-Sorting-Levelpacks-1" href="#Grouping-and-Sorting-Levelpacks">2.4 Группировка и сортировка пакетов</a></li>
    <li><a name="toc-Creating-New-Levelpacks-1" href="#Creating-New-Levelpacks">2.5 Создание новых пакетов уровней</a></li>
    <li><a name="toc-Modifying-and-Deleting-Levelpacks-1" href="#Modifying-and-Deleting-Levelpacks">2.6 Изменение и удаление пакетов</a></li>
    <li><a name="toc-Composing-Levelpacks-1" href="#Composing-Levelpacks">2.7 Составление пакетов уровней</a></li>
  </ul></li>
  <li><a name="toc-Level-Basics-1" href="#Level-Basics">3. Основы работы с уровнями</a>
  <ul class="toc">
    <li><a name="toc-Getting-Started-with-Levels-1" href="#Getting-Started-with-Levels">3.1 Общее знакомство с уровнями</a></li>
    <li><a name="toc-XML-Level-structure-1" href="#XML-Level-structure">3.2 XML-структура уровня</a></li>
    <li><a name="toc-Info-metadata-1" href="#Info-metadata">3.3 Информация о метаданных</a>
    <ul class="toc">
      <li><a name="toc-_003cidentity_003e-1" href="#g_t_003cidentity_003e">3.3.1 &lt;identity&gt;</a></li>
      <li><a name="toc-_003cversion_003e-1" href="#g_t_003cversion_003e">3.3.2 &lt;version&gt;</a></li>
      <li><a name="toc-_003cauthor_003e-1" href="#g_t_003cauthor_003e">3.3.3 &lt;author&gt;</a></li>
      <li><a name="toc-_003ccopyright_003e-1" href="#g_t_003ccopyright_003e">3.3.4 &lt;copyright&gt;</a></li>
      <li><a name="toc-_003clicense_003e-1" href="#g_t_003clicense_003e">3.3.5 &lt;license&gt;</a></li>
      <li><a name="toc-_003ccompatibility_003e-1" href="#g_t_003ccompatibility_003e">3.3.6 &lt;compatibility&gt;</a></li>
      <li><a name="toc-_003cmodes_003e-1" href="#g_t_003cmodes_003e">3.3.7 &lt;modes&gt;</a></li>
      <li><a name="toc-_003ccomments_003e-1" href="#g_t_003ccomments_003e">3.3.8 &lt;comments&gt;</a></li>
      <li><a name="toc-_003cscore_003e-1" href="#g_t_003cscore_003e">3.3.9 &lt;score&gt;</a></li>
    </ul></li>
    <li><a name="toc-LUA-code-1" href="#LUA-code">3.4 Код LUA</a></li>
    <li><a name="toc-Internationalization-_0028i18n_0029-1" href="#Internationalization-_0028i18n_0029">3.5 Интернационализация (i18n)</a></li>
    <li><a name="toc-Usage-1" href="#Usage">3.6 Использование</a></li>
    <li><a name="toc-Update-and-Upgrade-1" href="#Update-and-Upgrade">3.7 Обновление и дополнение</a></li>
    <li><a name="toc-Library-Files-1" href="#Library-Files">3.8 Использование библиотек</a>
    <ul class="toc">
      <li><a name="toc-Writing-a-Library-1" href="#Writing-a-Library">3.8.1 Написание библиотеки</a></li>
      <li><a name="toc-Maintaining-a-Library-1" href="#Maintaining-a-Library">3.8.2 Поддержка библиотеки</a></li>
    </ul></li>
    <li><a name="toc-Multilevel-Files-1" href="#Multilevel-Files">3.9 Многоуровневые файлы</a></li>
  </ul></li>
  <li><a name="toc-Enigma-Paradigm-1" href="#Enigma-Paradigm">4. Ключевые понятия Enigma</a>
  <ul class="toc">
    <li><a name="toc-The-World_0027s-Structure-1" href="#The-World_0027s-Structure">4.1 Структура мира</a>
    <ul class="toc">
      <li><a name="toc-World_0027s-Shape-and-Coordinates-1" href="#World_0027s-Shape-and-Coordinates">4.1.1 Очертания и координаты мира</a></li>
      <li><a name="toc-Object-Layers-1" href="#Object-Layers">4.1.2 Слои объектов</a></li>
      <li><a name="toc-World-as-an-Object-1" href="#World-as-an-Object">4.1.3 Мир как объект</a></li>
      <li><a name="toc-Unpositioned-Objects-1" href="#Unpositioned-Objects">4.1.4 Неразмещаемые объекты</a></li>
      <li><a name="toc-Player-and-Inventory-1" href="#Player-and-Inventory">4.1.5 Игрок и инвентарь</a></li>
      <li><a name="toc-Owned-Objects-1" href="#Owned-Objects">4.1.6 Подконтрольные объекты</a></li>
    </ul></li>
    <li><a name="toc-Object-Description-1" href="#Object-Description">4.2 Описание объектов</a>
    <ul class="toc">
      <li><a name="toc-Object-Kind-1" href="#Object-Kind">4.2.1 Тип объекта</a></li>
      <li><a name="toc-Object-Reference-1" href="#Object-Reference">4.2.2 Ссылка на объект</a></li>
      <li><a name="toc-Object-Naming-1" href="#Object-Naming">4.2.3 Именование объектов</a></li>
      <li><a name="toc-Object-Attributes-1" href="#Object-Attributes">4.2.4 Атрибуты объектов</a></li>
    </ul></li>
    <li><a name="toc-Methods-of-Interaction-1" href="#Methods-of-Interaction">4.3 Способы взаимодействия</a>
    <ul class="toc">
      <li><a name="toc-Messages-1" href="#Messages">4.3.1 Сообщения</a></li>
      <li><a name="toc-Target-_002d-Action-1" href="#Target-_002d-Action">4.3.2 Цель-действие</a></li>
      <li><a name="toc-Callback-Function-1" href="#Callback-Function">4.3.3 Функция обратного вызова</a></li>
      <li><a name="toc-Object-State-1" href="#Object-State">4.3.4 Состояние объекта</a></li>
    </ul></li>
    <li><a name="toc-The-Lifecycle-of-a-Level-1" href="#The-Lifecycle-of-a-Level">4.4 Жизненный цикл уровня</a>
    <ul class="toc">
      <li><a name="toc-Library-Preloading-1" href="#Library-Preloading">4.4.1 Предварительная загрузка библиотек</a></li>
      <li><a name="toc-Snapshot-Principle-1" href="#Snapshot-Principle">4.4.2 Принцип снимка</a></li>
      <li><a name="toc-Level-Initialization-1" href="#Level-Initialization">4.4.3 Инициализация уровня</a></li>
      <li><a name="toc-Object-Transformation-1" href="#Object-Transformation">4.4.4 Преобразование объекта</a></li>
      <li><a name="toc-Named-Positions-1" href="#Named-Positions">4.4.5 Именованные позиции</a></li>
      <li><a name="toc-Callbacks-and-Load-Balancing-1" href="#Callbacks-and-Load-Balancing">4.4.6 Обратные вызовы и таймеры</a></li>
      <li><a name="toc-Level-Restart-1" href="#Level-Restart">4.4.7 Перезапуск уровня</a></li>
      <li><a name="toc-Ending-Conditions-1" href="#Ending-Conditions">4.4.8 Условия завершения</a></li>
    </ul>
</li>
  </ul></li>
  <li><a name="toc-Lua-API-1" href="#Lua-API">5. Lua API</a>
  <ul class="toc">
    <li><a name="toc-Basic-Lua-Examples-1" href="#Basic-Lua-Examples">5.1 Примеры простых уровней на языке Lua</a>
    <ul class="toc">
      <li><a name="toc-Basic-Example-1" href="#Basic-Example">5.1.1 Простой пример</a></li>
      <li><a name="toc-Colored-Turnstiles-1" href="#Colored-Turnstiles">5.1.2 Colored Turnstiles</a></li>
    </ul></li>
    <li><a name="toc-API-2-Overview-1" href="#API-2-Overview">5.2 Обзор API 2</a>
    <ul class="toc">
      <li><a name="toc-Types-Overview-1" href="#Types-Overview">5.2.1 Обзор типов</a></li>
      <li><a name="toc-Position-Tasks-1" href="#Position-Tasks">5.2.2 Работа с позициями</a></li>
      <li><a name="toc-Attribute-Tasks-1" href="#Attribute-Tasks">5.2.3 Работа с атрибутами</a></li>
      <li><a name="toc-Object-Tasks-1" href="#Object-Tasks">5.2.4 Работа с объектами</a></li>
      <li><a name="toc-Group-Tasks-1" href="#Group-Tasks">5.2.5 Работа с группами</a></li>
      <li><a name="toc-Tiles-and-World-Tasks-1" href="#Tiles-and-World-Tasks">5.2.6 Работа с секциями и миром</a></li>
      <li><a name="toc-Named-Positions-Tasks-1" href="#Named-Positions-Tasks">5.2.7 Работа с именованными позициями</a></li>
    </ul></li>
    <li><a name="toc-Advanced-Lua-Examples-1" href="#Advanced-Lua-Examples">5.3 Примеры сложных уровней на языке Lua</a>
    <ul class="toc">
      <li><a name="toc-Color-Maze-1" href="#Color-Maze">5.3.1 Color Maze</a></li>
      <li><a name="toc-Weirdly-Wired-1" href="#Weirdly-Wired">5.3.2 Weirdly Wired</a></li>
    </ul></li>
    <li><a name="toc-Introduction-to-Datatypes-1" href="#Introduction-to-Datatypes">5.4 Введение в типы данных</a>
    <ul class="toc">
      <li><a name="toc-Syntax-and-Conventions-1" href="#Syntax-and-Conventions">5.4.1 Синтаксис и соглашения</a></li>
      <li><a name="toc-Value-and-Reference-1" href="#Value-and-Reference">5.4.2 Значение и ссылка</a></li>
      <li><a name="toc-Polymorphism-and-Overloading-1" href="#Polymorphism-and-Overloading">5.4.3 Полиморфизм и перегрузка</a></li>
      <li><a name="toc-Pseudo-Datatypes-1" href="#Pseudo-Datatypes">5.4.4 Мнимые типы данных</a></li>
    </ul></li>
    <li><a name="toc-Position-1" href="#Position">5.5 Позиция</a>
    <ul class="toc">
      <li><a name="toc-Position-Addition-and-Subtraction-1" href="#Position-Addition-and-Subtraction">5.5.1 Сложение и вычитание позиций</a></li>
      <li><a name="toc-Position-Multiplication-and-Division-1" href="#Position-Multiplication-and-Division">5.5.2 Умножение и деление позиций</a></li>
      <li><a name="toc-Position-Sign-1" href="#Position-Sign">5.5.3 Смена знака позиции</a></li>
      <li><a name="toc-Position-Center-1" href="#Position-Center">5.5.4 Округление позиции до центра решётки</a></li>
      <li><a name="toc-Position-Comparison-1" href="#Position-Comparison">5.5.5 Сравнение позиций</a></li>
      <li><a name="toc-Position-Concatenation-1" href="#Position-Concatenation">5.5.6 Объединение позиций</a></li>
      <li><a name="toc-Position-Coordinate-Access-1" href="#Position-Coordinate-Access">5.5.7 Доступ к координатам позиций</a></li>
      <li><a name="toc-Position-Grid-Rounding-1" href="#Position-Grid-Rounding">5.5.8 Округление позиции до границ решётки</a></li>
      <li><a name="toc-Position-Existence-1" href="#Position-Existence">5.5.9 Существование позиции</a></li>
    </ul></li>
    <li><a name="toc-Object-1" href="#Object">5.6 Объект</a>
    <ul class="toc">
      <li><a name="toc-Object-Attribute-Access-1" href="#Object-Attribute-Access">5.6.1 Доступ к атрибутам объекта</a></li>
      <li><a name="toc-Object-Messaging-1" href="#Object-Messaging">5.6.2 Отправка сообщений объектам</a></li>
      <li><a name="toc-Object-Comparison-1" href="#Object-Comparison">5.6.3 Сравнение объектов</a></li>
      <li><a name="toc-Object-Existence-1" href="#Object-Existence">5.6.4 Существование объекта</a></li>
      <li><a name="toc-Object-Kill-1" href="#Object-Kill">5.6.5 Уничтожение объекта</a></li>
      <li><a name="toc-Object-Kind-Check-1" href="#Object-Kind-Check">5.6.6 Определение типа объекта</a></li>
      <li><a name="toc-Object-Coordinate-Access-1" href="#Object-Coordinate-Access">5.6.7 Доступ к координатам объекта</a></li>
      <li><a name="toc-Object-Addition-and-Subtraction-1" href="#Object-Addition-and-Subtraction">5.6.8 Сложение и вычитание объектов</a></li>
      <li><a name="toc-Object-Center-1" href="#Object-Center">5.6.9 Округление объекта до центра решётки</a></li>
      <li><a name="toc-Object-Join-1" href="#Object-Join">5.6.10 Объединение объектов</a></li>
      <li><a name="toc-Object-Intersection-1" href="#Object-Intersection">5.6.11 Пересечение объектов</a></li>
      <li><a name="toc-Object-Difference-1" href="#Object-Difference">5.6.12 Разность объектов</a></li>
      <li><a name="toc-Object-Sound-1" href="#Object-Sound">5.6.13 Звук объекта</a></li>
    </ul></li>
    <li><a name="toc-Group-1" href="#Group">5.7 Группа</a>
    <ul class="toc">
      <li><a name="toc-Group-Messaging-1" href="#Group-Messaging">5.7.1 Отправка сообщений группам</a></li>
      <li><a name="toc-Group-Attribute-Write-1" href="#Group-Attribute-Write">5.7.2 Запись атрибутов в группу</a></li>
      <li><a name="toc-Group-Comparison-1" href="#Group-Comparison">5.7.3 Сравнение групп</a></li>
      <li><a name="toc-Group-Length-1" href="#Group-Length">5.7.4 Размер группы</a></li>
      <li><a name="toc-Group-Member-Access-1" href="#Group-Member-Access">5.7.5 Доступ к элементам группы</a></li>
      <li><a name="toc-Group-Loop-1" href="#Group-Loop">5.7.6 Обход элементов группы в цикле</a></li>
      <li><a name="toc-Group-Join-1" href="#Group-Join">5.7.7 Объединение групп</a></li>
      <li><a name="toc-Group-Intersection-1" href="#Group-Intersection">5.7.8 Пересечение групп</a></li>
      <li><a name="toc-Group-Difference-1" href="#Group-Difference">5.7.9 Разность групп</a></li>
      <li><a name="toc-Group-Shuffle-1" href="#Group-Shuffle">5.7.10 Перемешивание группы</a></li>
      <li><a name="toc-Group-Sorting-1" href="#Group-Sorting">5.7.11 Сортировка группы</a></li>
      <li><a name="toc-Group-Subset-1" href="#Group-Subset">5.7.12 Выделение подгруппы</a></li>
      <li><a name="toc-Group-Nearest-Object-1" href="#Group-Nearest-Object">5.7.13 Ближайший объект из группы</a></li>
    </ul></li>
    <li><a name="toc-NamedObjects-1" href="#NamedObjects">5.8 NamedObjects</a>
    <ul class="toc">
      <li><a name="toc-NamedObjects-Repository-Request-1" href="#NamedObjects-Repository-Request">5.8.1 Запрос к хранилищу NamedObjects</a></li>
      <li><a name="toc-NamedObjects-Object-Naming-1" href="#NamedObjects-Object-Naming">5.8.2 Именование объектов NamedObjects</a></li>
    </ul></li>
    <li><a name="toc-PositionList-1" href="#PositionList">5.9 PositionList</a>
    <ul class="toc">
      <li><a name="toc-PositionList-Comparison-1" href="#PositionList-Comparison">5.9.1 Сравнение PositionList</a></li>
      <li><a name="toc-PositionList-Length-1" href="#PositionList-Length">5.9.2 Размер PositionList</a></li>
      <li><a name="toc-PositionList-Member-Access-1" href="#PositionList-Member-Access">5.9.3 Доступ к элементам PositionList</a></li>
      <li><a name="toc-PositionList-Concatenation-1" href="#PositionList-Concatenation">5.9.4 Объединение PositionList</a></li>
      <li><a name="toc-PositionList-Translation-1" href="#PositionList-Translation">5.9.5 Смещение PositionList</a></li>
      <li><a name="toc-PositionList-Stretching-1" href="#PositionList-Stretching">5.9.6 Масштабирование PositionList</a></li>
    </ul></li>
    <li><a name="toc-Positions-Repository-1" href="#Positions-Repository">5.10 Хранилище позиций</a>
    <ul class="toc">
      <li><a name="toc-Positions-Repository-Request-1" href="#Positions-Repository-Request">5.10.1 Запрос к хранилищу позиций</a></li>
      <li><a name="toc-Positions-Repository-Storage-1" href="#Positions-Repository-Storage">5.10.2 Доступ к элементам хранилища позиций</a></li>
      <li><a name="toc-Position-Conversion-1" href="#Position-Conversion">5.10.3 Преобразование позиций</a></li>
      <li><a name="toc-PositionList-Conversion-1" href="#PositionList-Conversion">5.10.4 Преобразование PositionList</a></li>
    </ul></li>
    <li><a name="toc-Tile-and-Object-Declaration-1" href="#Tile-and-Object-Declaration">5.11 Описание секций и объектов</a>
    <ul class="toc">
      <li><a name="toc-Tile-concat-1" href="#Tile-concat">5.11.1 Объединение секций</a></li>
    </ul></li>
    <li><a name="toc-Tiles-Repository-1" href="#Tiles-Repository">5.12 Хранилище секций</a>
    <ul class="toc">
      <li><a name="toc-Tiles-Storage-1" href="#Tiles-Storage">5.12.1 Запись секций</a></li>
      <li><a name="toc-Tiles-Request-1" href="#Tiles-Request">5.12.2 Запрос секции</a></li>
      <li><a name="toc-Tile-Conversion-1" href="#Tile-Conversion">5.12.3 Преобразование секции</a></li>
    </ul></li>
    <li><a name="toc-World-1" href="#World">5.13 Мир</a>
    <ul class="toc">
      <li><a name="toc-World-Creation-1" href="#World-Creation">5.13.1 Создание мира</a></li>
      <li><a name="toc-World-Tile-Set-1" href="#World-Tile-Set">5.13.2 Установка секций мира</a></li>
      <li><a name="toc-Global-Attribute-Set-1" href="#Global-Attribute-Set">5.13.3 Установка глобальных атрибутов</a></li>
      <li><a name="toc-Global-Attribute-Get-1" href="#Global-Attribute-Get">5.13.4 Чтение глобальных атрибутов</a></li>
      <li><a name="toc-add-1" href="#add">5.13.5 add</a></li>
      <li><a name="toc-drawBorder-1" href="#drawBorder">5.13.6 drawBorder</a></li>
      <li><a name="toc-drawMap-1" href="#drawMap">5.13.7 drawMap</a></li>
      <li><a name="toc-drawRect-1" href="#drawRect">5.13.8 drawRect</a></li>
      <li><a name="toc-world-floor-1" href="#world-floor">5.13.9 world floor</a></li>
      <li><a name="toc-world-item-1" href="#world-item">5.13.10 world item</a></li>
      <li><a name="toc-shuffleOxyd-1" href="#shuffleOxyd">5.13.11 shuffleOxyd</a></li>
      <li><a name="toc-world-stone-1" href="#world-stone">5.13.12 world stone</a></li>
    </ul></li>
    <li><a name="toc-Functions-1" href="#Functions">5.14 Функции</a>
    <ul class="toc">
      <li><a name="toc-assert_005fbool-1" href="#assert_005fbool">5.14.1 assert_bool</a></li>
      <li><a name="toc-assert_005ftype-1" href="#assert_005ftype">5.14.2 assert_type</a></li>
      <li><a name="toc-cond-1" href="#cond">5.14.3 cond</a></li>
      <li><a name="toc-etype-1" href="#etype">5.14.4 etype</a></li>
      <li><a name="toc-fl-1" href="#fl">5.14.5 fl</a></li>
      <li><a name="toc-grp-1" href="#grp">5.14.6 grp</a></li>
      <li><a name="toc-it-1" href="#it">5.14.7 it</a></li>
      <li><a name="toc-ORI2DIR-1" href="#ORI2DIR">5.14.8 ORI2DIR</a></li>
      <li><a name="toc-random-1" href="#random">5.14.9 random</a></li>
      <li><a name="toc-st-1" href="#st">5.14.10 st</a></li>
      <li><a name="toc-usertype-1" href="#usertype">5.14.11 usertype</a></li>
    </ul>
</li>
  </ul></li>
  <li><a name="toc-Common-Attributes-and-Messages-1" href="#Common-Attributes-and-Messages">6. Общие атрибуты и сообщения</a>
  <ul class="toc">
    <li><a name="toc-Common-Attributes-1" href="#Common-Attributes">6.1 Общие атрибуты</a>
    <ul class="toc">
      <li><a name="toc-name-1" href="#name">6.1.1 name</a></li>
      <li><a name="toc-state-1" href="#state">6.1.2 state</a></li>
      <li><a name="toc-target-1" href="#target">6.1.3 target</a></li>
      <li><a name="toc-action-1" href="#action">6.1.4 action</a></li>
      <li><a name="toc-nopaction-1" href="#nopaction">6.1.5 nopaction</a></li>
      <li><a name="toc-safeaction-1" href="#safeaction">6.1.6 safeaction</a></li>
      <li><a name="toc-inverse-1" href="#inverse">6.1.7 inverse</a></li>
      <li><a name="toc-destination-1" href="#destination">6.1.8 destination</a></li>
      <li><a name="toc-friction-1" href="#friction">6.1.9 friction</a></li>
      <li><a name="toc-adhesion-1" href="#adhesion">6.1.10 adhesion</a></li>
      <li><a name="toc-checkerboard-1" href="#checkerboard">6.1.11 checkerboard</a></li>
      <li><a name="toc-rubbers-1" href="#rubbers">6.1.12 rubbers</a></li>
      <li><a name="toc-wires-1" href="#wires">6.1.13 wires</a></li>
      <li><a name="toc-fellows-1" href="#fellows">6.1.14 fellows</a></li>
    </ul></li>
    <li><a name="toc-Common-Messages-1" href="#Common-Messages">6.2 Общие сообщения</a>
    <ul class="toc">
      <li><a name="toc-toggle-1" href="#toggle">6.2.1 toggle</a></li>
      <li><a name="toc-nop-1" href="#nop">6.2.2 nop</a></li>
      <li><a name="toc-signal-1" href="#signal">6.2.3 signal</a></li>
      <li><a name="toc-on-1" href="#on">6.2.4 on</a></li>
      <li><a name="toc-off-1" href="#off">6.2.5 off</a></li>
      <li><a name="toc-open-1" href="#open">6.2.6 open</a></li>
      <li><a name="toc-close-1" href="#close">6.2.7 close</a></li>
      <li><a name="toc-ignite-1" href="#ignite">6.2.8 ignite</a></li>
      <li><a name="toc-heat-1" href="#heat">6.2.9 heat</a></li>
      <li><a name="toc-setfire-1" href="#setfire">6.2.10 setfire</a></li>
      <li><a name="toc-kill-1" href="#kill">6.2.11 kill</a></li>
      <li><a name="toc-sound-1" href="#sound">6.2.12 sound</a></li>
      <li><a name="toc-disconnect-1" href="#disconnect">6.2.13 disconnect</a></li>
    </ul></li>
    <li><a name="toc-Common-Constants-1" href="#Common-Constants">6.3 Общие константы</a>
    <ul class="toc">
      <li><a name="toc-state-values-1" href="#state-values">6.3.1 Значения состояний</a></li>
      <li><a name="toc-color-values-1" href="#color-values">6.3.2 Значения цветов</a></li>
      <li><a name="toc-actor-controllers-1" href="#actor-controllers">6.3.3 Управление актёром (controllers)</a></li>
      <li><a name="toc-oxyd-colors-1" href="#oxyd-colors">6.3.4 Цвета оксидов</a></li>
      <li><a name="toc-orientations-1" href="#orientations">6.3.5 Положения (orientation)</a></li>
      <li><a name="toc-direction-offsets-1" href="#direction-offsets">6.3.6 Смещения направления</a></li>
      <li><a name="toc-position-lists-1" href="#position-lists">6.3.7 Списки положений</a></li>
      <li><a name="toc-essentialness-1" href="#essentialness">6.3.8 Важность</a></li>
      <li><a name="toc-meditation-types-1" href="#meditation-types">6.3.9 Типы медитации</a></li>
      <li><a name="toc-glasses-abilities-1" href="#glasses-abilities">6.3.10 Возможности очков</a></li>
      <li><a name="toc-coinslot-acceptance-1" href="#coinslot-acceptance">6.3.11 Приём монет</a></li>
      <li><a name="toc-rubberband-length-1" href="#rubberband-length">6.3.12 Длина резиновой ленты</a></li>
      <li><a name="toc-subsoil-kind-1" href="#subsoil-kind">6.3.13 Тип подпочвы</a></li>
      <li><a name="toc-screen-scrolling-1" href="#screen-scrolling">6.3.14 Прокрутка изображения</a></li>
      <li><a name="toc-map-read-directions-1" href="#map-read-directions">6.3.15 Направления чтения карты</a></li>
    </ul></li>
    <li><a name="toc-Global-Attributes-1" href="#Global-Attributes">6.4 Глобальные атрибуты</a>
    <ul class="toc">
      <li><a name="toc-ActorimpulseStrength-1" href="#ActorimpulseStrength">6.4.1 ActorimpulseStrength</a></li>
      <li><a name="toc-AllowSingleOxyds-1" href="#AllowSingleOxyds">6.4.2 AllowSingleOxyds</a></li>
      <li><a name="toc-AllowSuicide-1" href="#AllowSuicide">6.4.3 AllowSuicide</a></li>
      <li><a name="toc-AutoRespawn-1" href="#AutoRespawn">6.4.4 AutoRespawn</a></li>
      <li><a name="toc-ConserveLevel-1" href="#ConserveLevel">6.4.5 ConserveLevel</a></li>
      <li><a name="toc-CrackSpreading-1" href="#CrackSpreading">6.4.6 CrackSpreading</a></li>
      <li><a name="toc-CreatingPreview-1" href="#CreatingPreview">6.4.7 CreatingPreview</a></li>
      <li><a name="toc-ElectricStrength-1" href="#ElectricStrength">6.4.8 ElectricStrength</a></li>
      <li><a name="toc-ExtralifeGlasses-1" href="#ExtralifeGlasses">6.4.9 ExtralifeGlasses</a></li>
      <li><a name="toc-FallenPuzzle-1" href="#FallenPuzzle">6.4.10 FallenPuzzle</a></li>
      <li><a name="toc-FollowAction-1" href="#FollowAction">6.4.11 FollowAction</a></li>
      <li><a name="toc-FollowGrid-1" href="#FollowGrid">6.4.12 FollowGrid</a></li>
      <li><a name="toc-FollowMethod-1" href="#FollowMethod">6.4.13 FollowMethod</a></li>
      <li><a name="toc-FollowThreshold-1" href="#FollowThreshold">6.4.14 FollowThreshold</a></li>
      <li><a name="toc-Fragility-1" href="#Fragility">6.4.15 Fragility</a></li>
      <li><a name="toc-FrictionStrength-1" href="#FrictionStrength">6.4.16 FrictionStrength</a></li>
      <li><a name="toc-GlobalForce-1" href="#GlobalForce">6.4.17 GlobalForce</a></li>
      <li><a name="toc-Height-1" href="#Height">6.4.18 Height</a></li>
      <li><a name="toc-InfiniteReincarnation-1" href="#InfiniteReincarnation">6.4.19 InfiniteReincarnation</a></li>
      <li><a name="toc-IsDifficult-1" href="#IsDifficult">6.4.20 IsDifficult</a></li>
      <li><a name="toc-MagnetRange-1" href="#MagnetRange">6.4.21 MagnetRange</a></li>
      <li><a name="toc-MagnetStrength-1" href="#MagnetStrength">6.4.22 MagnetStrength</a></li>
      <li><a name="toc-MaxOxydColor-1" href="#MaxOxydColor">6.4.23 MaxOxydColor</a></li>
      <li><a name="toc-MeditationStrength-1" href="#MeditationStrength">6.4.24 MeditationStrength</a></li>
      <li><a name="toc-ProvideExtralifes-1" href="#ProvideExtralifes">6.4.25 ProvideExtralifes</a></li>
      <li><a name="toc-RubberViolationStrength-1" href="#RubberViolationStrength">6.4.26 RubberViolationStrength</a></li>
      <li><a name="toc-ShowMoves-1" href="#ShowMoves">6.4.27 ShowMoves</a></li>
      <li><a name="toc-SlopeStrength-1" href="#SlopeStrength">6.4.28 SlopeStrength</a></li>
      <li><a name="toc-SublevelNumber-1" href="#SublevelNumber">6.4.29 SublevelNumber</a></li>
      <li><a name="toc-SublevelTitle-1" href="#SublevelTitle">6.4.30 SublevelTitle</a></li>
      <li><a name="toc-SubSoil-1" href="#SubSoil">6.4.31 SubSoil</a></li>
      <li><a name="toc-SurviveFinish-1" href="#SurviveFinish">6.4.32 SurviveFinish</a></li>
      <li><a name="toc-SwampSinkTime-1" href="#SwampSinkTime">6.4.33 SwampSinkTime</a></li>
      <li><a name="toc-WaterSinkTime-1" href="#WaterSinkTime">6.4.34 WaterSinkTime</a></li>
      <li><a name="toc-Width-1" href="#Width">6.4.35 Width</a></li>
      <li><a name="toc-WormholeRange-1" href="#WormholeRange">6.4.36 WormholeRange</a></li>
      <li><a name="toc-WormholeStrength-1" href="#WormholeStrength">6.4.37 WormholeStrength</a></li>
    </ul>
</li>
  </ul></li>
  <li><a name="toc-Floor-Objects-1" href="#Floor-Objects">7. Покрытия</a>
  <ul class="toc">
    <li><a name="toc-Floor-Overview-1" href="#Floor-Overview">7.1 Обзор покрытий</a></li>
    <li><a name="toc-Floor-Attributes-1" href="#Floor-Attributes">7.2 Атрибуты покрытий</a>
    <ul class="toc">
      <li><a name="toc-adhesion-_0028floor_0029-1" href="#adhesion-_0028floor_0029">7.2.1 adhesion (floor)</a></li>
      <li><a name="toc-burnable-1" href="#burnable">7.2.2 burnable</a></li>
      <li><a name="toc-eternal-1" href="#eternal">7.2.3 eternal</a></li>
      <li><a name="toc-faces-_0028floor_0029-1" href="#faces-_0028floor_0029">7.2.4 faces (покрытие)</a></li>
      <li><a name="toc-fastfire-1" href="#fastfire">7.2.5 fastfire</a></li>
      <li><a name="toc-floodable-1" href="#floodable">7.2.6 floodable</a></li>
      <li><a name="toc-force_005fx-1" href="#force_005fx">7.2.7 force_x</a></li>
      <li><a name="toc-force_005fy-1" href="#force_005fy">7.2.8 force_y</a></li>
      <li><a name="toc-fragility-_0028floor_0029-1" href="#fragility-_0028floor_0029">7.2.9 fragility (покрытие)</a></li>
      <li><a name="toc-freeze_005fcheck-_0028floor_0029-1" href="#freeze_005fcheck-_0028floor_0029">7.2.10 freeze_check (покрытие)</a></li>
      <li><a name="toc-friction-_0028floor_0029-1" href="#friction-_0028floor_0029">7.2.11 friction (покрытие)</a></li>
      <li><a name="toc-ignitable-1" href="#ignitable">7.2.12 ignitable</a></li>
      <li><a name="toc-indestructible-1" href="#indestructible">7.2.13 indestructible</a></li>
      <li><a name="toc-initfire-1" href="#initfire">7.2.14 initfire</a></li>
      <li><a name="toc-noash-1" href="#noash">7.2.15 noash</a></li>
      <li><a name="toc-push_005fdirections-1" href="#push_005fdirections">7.2.16 push_directions</a></li>
      <li><a name="toc-secure-1" href="#secure">7.2.17 secure</a></li>
      <li><a name="toc-texture-1" href="#texture">7.2.18 texture</a></li>
    </ul></li>
    <li><a name="toc-Standard-Floors-1" href="#Standard-Floors">7.3 Стандартные покрытия</a>
    <ul class="toc">
      <li><a name="toc-fl_005fadhesionless-1" href="#fl_005fadhesionless">7.3.1 fl_adhesionless</a></li>
      <li><a name="toc-fl_005faquamarine-1" href="#fl_005faquamarine">7.3.2 fl_aquamarine</a></li>
      <li><a name="toc-fl_005fbast-1" href="#fl_005fbast">7.3.3 fl_bast</a></li>
      <li><a name="toc-fl_005fbluegray-1" href="#fl_005fbluegray">7.3.4 fl_bluegray</a></li>
      <li><a name="toc-fl_005fbluegreen-1" href="#fl_005fbluegreen">7.3.5 fl_bluegreen</a></li>
      <li><a name="toc-fl_005fblueslab-1" href="#fl_005fblueslab">7.3.6 fl_blueslab</a></li>
      <li><a name="toc-fl_005fbrick-1" href="#fl_005fbrick">7.3.7 fl_brick</a></li>
      <li><a name="toc-fl_005fbright-1" href="#fl_005fbright">7.3.8 fl_bright</a></li>
      <li><a name="toc-fl_005fconcrete-1" href="#fl_005fconcrete">7.3.9 fl_concrete</a></li>
      <li><a name="toc-fl_005fdark-1" href="#fl_005fdark">7.3.10 fl_dark</a></li>
      <li><a name="toc-fl_005fdarkgray-1" href="#fl_005fdarkgray">7.3.11 fl_darkgray</a></li>
      <li><a name="toc-fl_005fdunes-1" href="#fl_005fdunes">7.3.12 fl_dunes</a></li>
      <li><a name="toc-fl_005fgravel-1" href="#fl_005fgravel">7.3.13 fl_gravel</a></li>
      <li><a name="toc-fl_005fgray-1" href="#fl_005fgray">7.3.14 fl_gray</a></li>
      <li><a name="toc-fl_005fhimalaya-1" href="#fl_005fhimalaya">7.3.15 fl_himalaya</a></li>
      <li><a name="toc-fl_005fivory-1" href="#fl_005fivory">7.3.16 fl_ivory</a></li>
      <li><a name="toc-fl_005flawn-1" href="#fl_005flawn">7.3.17 fl_lawn</a></li>
      <li><a name="toc-fl_005fmarble-1" href="#fl_005fmarble">7.3.18 fl_marble</a></li>
      <li><a name="toc-fl_005fmetal-1" href="#fl_005fmetal">7.3.19 fl_metal</a></li>
      <li><a name="toc-fl_005fmortar-1" href="#fl_005fmortar">7.3.20 fl_mortar</a></li>
      <li><a name="toc-fl_005fpinkbumps-1" href="#fl_005fpinkbumps">7.3.21 fl_pinkbumps</a></li>
      <li><a name="toc-fl_005fplank-1" href="#fl_005fplank">7.3.22 fl_plank</a></li>
      <li><a name="toc-fl_005fplatinum-1" href="#fl_005fplatinum">7.3.23 fl_platinum</a></li>
      <li><a name="toc-fl_005fred-1" href="#fl_005fred">7.3.24 fl_red</a></li>
      <li><a name="toc-fl_005fredslab-1" href="#fl_005fredslab">7.3.25 fl_redslab</a></li>
      <li><a name="toc-fl_005frough-1" href="#fl_005frough">7.3.26 fl_rough</a></li>
      <li><a name="toc-fl_005fsahara-1" href="#fl_005fsahara">7.3.27 fl_sahara</a></li>
      <li><a name="toc-fl_005fsamba-1" href="#fl_005fsamba">7.3.28 fl_samba</a></li>
      <li><a name="toc-fl_005fsand-1" href="#fl_005fsand">7.3.29 fl_sand</a></li>
      <li><a name="toc-fl_005fspace-1" href="#fl_005fspace">7.3.30 fl_space</a></li>
      <li><a name="toc-fl_005fstone-1" href="#fl_005fstone">7.3.31 fl_stone</a></li>
      <li><a name="toc-fl_005ftigris-1" href="#fl_005ftigris">7.3.32 fl_tigris</a></li>
      <li><a name="toc-fl_005fwhite-1" href="#fl_005fwhite">7.3.33 fl_white</a></li>
      <li><a name="toc-fl_005fwoven-1" href="#fl_005fwoven">7.3.34 fl_woven</a></li>
    </ul></li>
    <li><a name="toc-Special-Floors-1" href="#Special-Floors">7.4 Особые покрытия</a>
    <ul class="toc">
      <li><a name="toc-fl_005fabyss-1" href="#fl_005fabyss">7.4.1 fl_abyss</a></li>
      <li><a name="toc-fl_005fbridge-1" href="#fl_005fbridge">7.4.2 fl_bridge</a></li>
      <li><a name="toc-fl_005ffake-1" href="#fl_005ffake">7.4.3 fl_fake</a></li>
      <li><a name="toc-fl_005fhay-1" href="#fl_005fhay">7.4.4 fl_hay</a></li>
      <li><a name="toc-fl_005fice-1" href="#fl_005fice">7.4.5 fl_ice</a></li>
      <li><a name="toc-fl_005finverse-1" href="#fl_005finverse">7.4.6 fl_inverse</a></li>
      <li><a name="toc-fl_005frock-1" href="#fl_005frock">7.4.7 fl_rock</a></li>
      <li><a name="toc-fl_005fscales-1" href="#fl_005fscales">7.4.8 fl_scales</a></li>
      <li><a name="toc-fl_005fslope-1" href="#fl_005fslope">7.4.9 fl_slope</a></li>
      <li><a name="toc-fl_005fswamp-1" href="#fl_005fswamp">7.4.10 fl_swamp</a></li>
      <li><a name="toc-fl_005fthief-1" href="#fl_005fthief">7.4.11 fl_thief</a></li>
      <li><a name="toc-fl_005fwater-1" href="#fl_005fwater">7.4.12 fl_water</a></li>
      <li><a name="toc-fl_005fwood-1" href="#fl_005fwood">7.4.13 fl_wood</a></li>
      <li><a name="toc-fl_005fyinyang-1" href="#fl_005fyinyang">7.4.14 fl_yinyang</a></li>
    </ul>
</li>
  </ul></li>
  <li><a name="toc-Item-Objects-1" href="#Item-Objects">8. Предметы</a>
  <ul class="toc">
    <li><a name="toc-Item-Overview-1" href="#Item-Overview">8.1 Обзор предметов</a></li>
    <li><a name="toc-Item-Attributes-1" href="#Item-Attributes">8.2 Атрибуты предметов</a>
    <ul class="toc">
      <li><a name="toc-fireproof-1" href="#fireproof">8.2.1 fireproof (огнеупорность)</a></li>
      <li><a name="toc-freezable-1" href="#freezable">8.2.2 freezable</a></li>
      <li><a name="toc-liftable-1" href="#liftable">8.2.3 liftable</a></li>
      <li><a name="toc-portable-1" href="#portable">8.2.4 portable</a></li>
    </ul></li>
    <li><a name="toc-Liftable-Items-1" href="#Liftable-Items">8.3 Переносные предметы</a>
    <ul class="toc">
      <li><a name="toc-it_005fbag-1" href="#it_005fbag">8.3.1 it_bag</a></li>
      <li><a name="toc-it_005fbanana-1" href="#it_005fbanana">8.3.2 it_banana</a></li>
      <li><a name="toc-it_005fbottle-1" href="#it_005fbottle">8.3.3 it_bottle</a></li>
      <li><a name="toc-it_005fbrake-1" href="#it_005fbrake">8.3.4 it_brake</a></li>
      <li><a name="toc-it_005fbrush-1" href="#it_005fbrush">8.3.5 it_brush</a></li>
      <li><a name="toc-it_005fcherry-1" href="#it_005fcherry">8.3.6 it_cherry</a></li>
      <li><a name="toc-it_005fcoffee-1" href="#it_005fcoffee">8.3.7 it_coffee</a></li>
      <li><a name="toc-it_005fcoin-1" href="#it_005fcoin">8.3.8 it_coin</a></li>
      <li><a name="toc-it_005fdocument-1" href="#it_005fdocument">8.3.9 it_document</a></li>
      <li><a name="toc-it_005fdrop-1" href="#it_005fdrop">8.3.10 it_drop</a></li>
      <li><a name="toc-it_005fdynamite-1" href="#it_005fdynamite">8.3.11 it_dynamite</a></li>
      <li><a name="toc-it_005fextinguisher-1" href="#it_005fextinguisher">8.3.12 it_extinguisher</a></li>
      <li><a name="toc-it_005fextralife-1" href="#it_005fextralife">8.3.13 it_extralife</a></li>
      <li><a name="toc-it_005fflag-1" href="#it_005fflag">8.3.14 it_flag</a></li>
      <li><a name="toc-it_005ffloppy-1" href="#it_005ffloppy">8.3.15 it_floppy</a></li>
      <li><a name="toc-it_005fglasses-1" href="#it_005fglasses">8.3.16 it_glasses</a></li>
      <li><a name="toc-it_005fhammer-1" href="#it_005fhammer">8.3.17 it_hammer</a></li>
      <li><a name="toc-it_005fkey-1" href="#it_005fkey">8.3.18 it_key</a></li>
      <li><a name="toc-it_005fmagicwand-1" href="#it_005fmagicwand">8.3.19 it_magicwand</a></li>
      <li><a name="toc-it_005fpencil-1" href="#it_005fpencil">8.3.20 it_pencil</a></li>
      <li><a name="toc-it_005fpin-1" href="#it_005fpin">8.3.21 it_pin</a></li>
      <li><a name="toc-it_005fpipe-1" href="#it_005fpipe">8.3.22 it_pipe</a></li>
      <li><a name="toc-it_005fpuller-1" href="#it_005fpuller">8.3.23 it_puller</a></li>
      <li><a name="toc-it_005fring-1" href="#it_005fring">8.3.24 it_ring</a></li>
      <li><a name="toc-it_005frubberband-1" href="#it_005frubberband">8.3.25 it_rubberband</a></li>
      <li><a name="toc-it_005fseed-1" href="#it_005fseed">8.3.26 it_seed</a></li>
      <li><a name="toc-it_005fspade-1" href="#it_005fspade">8.3.27 it_spade</a></li>
      <li><a name="toc-it_005fspoon-1" href="#it_005fspoon">8.3.28 it_spoon</a></li>
      <li><a name="toc-it_005fspring-1" href="#it_005fspring">8.3.29 it_spring</a></li>
      <li><a name="toc-it_005fsurprise-1" href="#it_005fsurprise">8.3.30 it_surprise</a></li>
      <li><a name="toc-it_005fsword-1" href="#it_005fsword">8.3.31 it_sword</a></li>
      <li><a name="toc-it_005fumbrella-1" href="#it_005fumbrella">8.3.32 it_umbrella</a></li>
      <li><a name="toc-it_005fweight-1" href="#it_005fweight">8.3.33 it_weight</a></li>
      <li><a name="toc-it_005fwrench-1" href="#it_005fwrench">8.3.34 it_wrench</a></li>
      <li><a name="toc-it_005fyinyang-1" href="#it_005fyinyang">8.3.35 it_yinyang</a></li>
    </ul></li>
    <li><a name="toc-Static-Items-1" href="#Static-Items">8.4 Static Items</a>
    <ul class="toc">
      <li><a name="toc-it_005fblocker-1" href="#it_005fblocker">8.4.1 it_blocker</a></li>
      <li><a name="toc-it_005fbomb-1" href="#it_005fbomb">8.4.2 it_bomb</a></li>
      <li><a name="toc-it_005fburnable-1" href="#it_005fburnable">8.4.3 it_burnable</a></li>
      <li><a name="toc-it_005fcrack-1" href="#it_005fcrack">8.4.4 it_crack</a></li>
      <li><a name="toc-it_005fcross-1" href="#it_005fcross">8.4.5 it_cross</a></li>
      <li><a name="toc-it_005fdeath-1" href="#it_005fdeath">8.4.6 it_death</a></li>
      <li><a name="toc-it_005fexplosion-1" href="#it_005fexplosion">8.4.7 it_explosion</a></li>
      <li><a name="toc-it_005flandmine-1" href="#it_005flandmine">8.4.8 it_landmine</a></li>
      <li><a name="toc-it_005flaserbeam-1" href="#it_005flaserbeam">8.4.9 it_laserbeam</a></li>
      <li><a name="toc-it_005fmagnet-1" href="#it_005fmagnet">8.4.10 it_magnet</a></li>
      <li><a name="toc-it_005fmeditation-1" href="#it_005fmeditation">8.4.11 it_meditation</a></li>
      <li><a name="toc-it_005fsensor-1" href="#it_005fsensor">8.4.12 it_sensor</a></li>
      <li><a name="toc-it_005fshogun-1" href="#it_005fshogun">8.4.13 it_shogun</a></li>
      <li><a name="toc-it_005fspringboard-1" href="#it_005fspringboard">8.4.14 it_springboard</a></li>
      <li><a name="toc-it_005fsquashed-1" href="#it_005fsquashed">8.4.15 it_squashed</a></li>
      <li><a name="toc-it_005fstrip-1" href="#it_005fstrip">8.4.16 it_strip</a></li>
      <li><a name="toc-it_005ftrap-1" href="#it_005ftrap">8.4.17 it_trap</a></li>
      <li><a name="toc-it_005ftrigger-1" href="#it_005ftrigger">8.4.18 it_trigger</a></li>
      <li><a name="toc-it_005fvortex-1" href="#it_005fvortex">8.4.19 it_vortex</a></li>
      <li><a name="toc-it_005fwormhole-1" href="#it_005fwormhole">8.4.20 it_wormhole</a></li>
    </ul>
</li>
  </ul></li>
  <li><a name="toc-Stone-Objects-1" href="#Stone-Objects">9. Камни</a>
  <ul class="toc">
    <li><a name="toc-Stone-Overview-1" href="#Stone-Overview">9.1 Обзор камней</a></li>
    <li><a name="toc-Stone-Attributes-1" href="#Stone-Attributes">9.2 Атрибуты камней</a>
    <ul class="toc">
      <li><a name="toc-breakable-1" href="#breakable">9.2.1 breakable (бьющийся)</a></li>
      <li><a name="toc-freeze_005fcheck-_0028stone_0029-1" href="#freeze_005fcheck-_0028stone_0029">9.2.2 freeze_check (камень)</a></li>
      <li><a name="toc-hit_005f_002a-1" href="#hit_005f_002a">9.2.3 hit_*</a></li>
      <li><a name="toc-hollow-1" href="#hollow">9.2.4 hollow (полый)</a></li>
      <li><a name="toc-hovering-1" href="#hovering">9.2.5 hovering (парящий)</a></li>
      <li><a name="toc-movable-1" href="#movable">9.2.6 movable</a></li>
      <li><a name="toc-transparent-1" href="#transparent">9.2.7 transparent (прозрачный)</a></li>
    </ul></li>
    <li><a name="toc-Standard-Stones-1" href="#Standard-Stones">9.3 Простые камни</a>
    <ul class="toc">
      <li><a name="toc-st_005fancient-1" href="#st_005fancient">9.3.1 st_ancient</a></li>
      <li><a name="toc-st_005fbluegray-1" href="#st_005fbluegray">9.3.2 st_bluegray</a></li>
      <li><a name="toc-st_005fbrownie-1" href="#st_005fbrownie">9.3.3 st_brownie</a></li>
      <li><a name="toc-st_005fbrownmarble-1" href="#st_005fbrownmarble">9.3.4 st_brownmarble</a></li>
      <li><a name="toc-st_005fcamouflage-1" href="#st_005fcamouflage">9.3.5 st_camouflage</a></li>
      <li><a name="toc-st_005fconcrete-1" href="#st_005fconcrete">9.3.6 st_concrete</a></li>
      <li><a name="toc-st_005fdarkgray-1" href="#st_005fdarkgray">9.3.7 st_darkgray</a></li>
      <li><a name="toc-st_005fgranite-1" href="#st_005fgranite">9.3.8 st_granite</a></li>
      <li><a name="toc-st_005fgreengray-1" href="#st_005fgreengray">9.3.9 st_greengray</a></li>
      <li><a name="toc-st_005finvisible-1" href="#st_005finvisible">9.3.10 st_invisible</a></li>
      <li><a name="toc-st_005fmetal-1" href="#st_005fmetal">9.3.11 st_metal</a></li>
      <li><a name="toc-st_005fpinkbumps-1" href="#st_005fpinkbumps">9.3.12 st_pinkbumps</a></li>
      <li><a name="toc-st_005fpurplegray-1" href="#st_005fpurplegray">9.3.13 st_purplegray</a></li>
      <li><a name="toc-st_005fpurplemarble-1" href="#st_005fpurplemarble">9.3.14 st_purplemarble</a></li>
      <li><a name="toc-st_005fredbrown-1" href="#st_005fredbrown">9.3.15 st_redbrown</a></li>
      <li><a name="toc-st_005fredmarble-1" href="#st_005fredmarble">9.3.16 st_redmarble</a></li>
      <li><a name="toc-st_005fredrock-1" href="#st_005fredrock">9.3.17 st_redrock</a></li>
      <li><a name="toc-st_005ftigris-1" href="#st_005ftigris">9.3.18 st_tigris</a></li>
      <li><a name="toc-st_005fwoven-1" href="#st_005fwoven">9.3.19 st_woven</a></li>
      <li><a name="toc-st_005fyellow-1" href="#st_005fyellow">9.3.20 st_yellow</a></li>
    </ul></li>
    <li><a name="toc-Cluster-Stones-1" href="#Cluster-Stones">9.4 Строительные камни</a>
    <ul class="toc">
      <li><a name="toc-Cluster-Features-1" href="#Cluster-Features">9.4.1 Особенности строительных камней</a></li>
      <li><a name="toc-st_005fbluesand-1" href="#st_005fbluesand">9.4.2 st_bluesand</a></li>
      <li><a name="toc-st_005fbrick-1" href="#st_005fbrick">9.4.3 st_brick</a></li>
      <li><a name="toc-st_005fpanel-1" href="#st_005fpanel">9.4.4 st_panel</a></li>
    </ul></li>
    <li><a name="toc-Special-Stones-1" href="#Special-Stones">9.5 Специальные камни</a>
    <ul class="toc">
      <li><a name="toc-st_005factorimpulse-1" href="#st_005factorimpulse">9.5.1 st_actorimpulse</a></li>
      <li><a name="toc-st_005fbarrier-1" href="#st_005fbarrier">9.5.2 st_barrier</a></li>
      <li><a name="toc-st_005fbeads-1" href="#st_005fbeads">9.5.3 st_beads</a></li>
      <li><a name="toc-st_005fblocker-1" href="#st_005fblocker">9.5.4 st_blocker</a></li>
      <li><a name="toc-st_005fblur-1" href="#st_005fblur">9.5.5 st_blur</a></li>
      <li><a name="toc-st_005fboulder-1" href="#st_005fboulder">9.5.6 st_boulder</a></li>
      <li><a name="toc-st_005fbox-1" href="#st_005fbox">9.5.7 st_box</a></li>
      <li><a name="toc-st_005fbrake-1" href="#st_005fbrake">9.5.8 st_brake</a></li>
      <li><a name="toc-st_005fbreak-1" href="#st_005fbreak">9.5.9 st_break</a></li>
      <li><a name="toc-st_005fbrownpyramid-1" href="#st_005fbrownpyramid">9.5.10 st_brownpyramid</a></li>
      <li><a name="toc-st_005fchameleon-1" href="#st_005fchameleon">9.5.11 st_chameleon</a></li>
      <li><a name="toc-st_005fcharge-1" href="#st_005fcharge">9.5.12 st_charge</a></li>
      <li><a name="toc-st_005fchess-1" href="#st_005fchess">9.5.13 st_chess</a></li>
      <li><a name="toc-st_005fcoinslot-1" href="#st_005fcoinslot">9.5.14 st_coinslot</a></li>
      <li><a name="toc-st_005fdarkglass-1" href="#st_005fdarkglass">9.5.15 st_darkglass</a></li>
      <li><a name="toc-st_005fdeath-1" href="#st_005fdeath">9.5.16 st_death</a></li>
      <li><a name="toc-st_005fdisco-1" href="#st_005fdisco">9.5.17 st_disco</a></li>
      <li><a name="toc-st_005fdispenser-1" href="#st_005fdispenser">9.5.18 st_dispenser</a></li>
      <li><a name="toc-st_005fdoor-1" href="#st_005fdoor">9.5.19 st_door</a></li>
      <li><a name="toc-st_005ffake-1" href="#st_005ffake">9.5.20 st_fake</a></li>
      <li><a name="toc-st_005fflash-1" href="#st_005fflash">9.5.21 st_flash</a></li>
      <li><a name="toc-st_005fflat-1" href="#st_005fflat">9.5.22 st_flat</a></li>
      <li><a name="toc-st_005ffloppy-1" href="#st_005ffloppy">9.5.23 st_floppy</a></li>
      <li><a name="toc-st_005ffourswitch-1" href="#st_005ffourswitch">9.5.24 st_fourswitch</a></li>
      <li><a name="toc-st_005fghost-1" href="#st_005fghost">9.5.25 st_ghost</a></li>
      <li><a name="toc-st_005fgrate-1" href="#st_005fgrate">9.5.26 st_grate</a></li>
      <li><a name="toc-st_005fgreenbrown-1" href="#st_005fgreenbrown">9.5.27 st_greenbrown</a></li>
      <li><a name="toc-st_005fice-1" href="#st_005fice">9.5.28 st_ice</a></li>
      <li><a name="toc-st_005fjamb-1" href="#st_005fjamb">9.5.29 st_jamb</a></li>
      <li><a name="toc-st_005fkey-1" href="#st_005fkey">9.5.30 st_key</a></li>
      <li><a name="toc-st_005fknight-1" href="#st_005fknight">9.5.31 st_knight</a></li>
      <li><a name="toc-st_005flaser-1" href="#st_005flaser">9.5.32 st_laser</a></li>
      <li><a name="toc-st_005flaserflop-1" href="#st_005flaserflop">9.5.33 st_laserflop</a></li>
      <li><a name="toc-st_005flaserswitch-1" href="#st_005flaserswitch">9.5.34 st_laserswitch</a></li>
      <li><a name="toc-st_005flightglass-1" href="#st_005flightglass">9.5.35 st_lightglass</a></li>
      <li><a name="toc-st_005flightpassenger-1" href="#st_005flightpassenger">9.5.36 st_lightpassenger</a></li>
      <li><a name="toc-st_005fmagic-1" href="#st_005fmagic">9.5.37 st_magic</a></li>
      <li><a name="toc-st_005fmail-1" href="#st_005fmail">9.5.38 st_mail</a></li>
      <li><a name="toc-st_005fmirror-1" href="#st_005fmirror">9.5.39 st_mirror</a></li>
      <li><a name="toc-st_005fmonoflop-1" href="#st_005fmonoflop">9.5.40 st_monoflop</a></li>
      <li><a name="toc-st_005foneway-1" href="#st_005foneway">9.5.41 st_oneway</a></li>
      <li><a name="toc-st_005foxyd-1" href="#st_005foxyd">9.5.42 st_oxyd</a></li>
      <li><a name="toc-st_005fpassage-1" href="#st_005fpassage">9.5.43 st_passage</a></li>
      <li><a name="toc-st_005fplaster-1" href="#st_005fplaster">9.5.44 st_plaster</a></li>
      <li><a name="toc-st_005fplop-1" href="#st_005fplop">9.5.45 st_plop</a></li>
      <li><a name="toc-st_005fpolarswitch-1" href="#st_005fpolarswitch">9.5.46 st_polarswitch</a></li>
      <li><a name="toc-st_005fportal-1" href="#st_005fportal">9.5.47 st_portal</a></li>
      <li><a name="toc-st_005fpull-1" href="#st_005fpull">9.5.48 st_pull</a></li>
      <li><a name="toc-st_005fpuzzle-1" href="#st_005fpuzzle">9.5.49 st_puzzle</a></li>
      <li><a name="toc-st_005fquake-1" href="#st_005fquake">9.5.50 st_quake</a></li>
      <li><a name="toc-st_005frawglass-1" href="#st_005frawglass">9.5.51 st_rawglass</a></li>
      <li><a name="toc-st_005fredfiber-1" href="#st_005fredfiber">9.5.52 st_redfiber</a></li>
      <li><a name="toc-st_005frotator-1" href="#st_005frotator">9.5.53 st_rotator</a></li>
      <li><a name="toc-st_005frubberband-1" href="#st_005frubberband">9.5.54 st_rubberband</a></li>
      <li><a name="toc-st_005fscissors-1" href="#st_005fscissors">9.5.55 st_scissors</a></li>
      <li><a name="toc-st_005fshogun-1" href="#st_005fshogun">9.5.56 st_shogun</a></li>
      <li><a name="toc-st_005fspitter-1" href="#st_005fspitter">9.5.57 st_spitter</a></li>
      <li><a name="toc-st_005fstoneimpulse-1" href="#st_005fstoneimpulse">9.5.58 st_stoneimpulse</a></li>
      <li><a name="toc-st_005fsurprise-1" href="#st_005fsurprise">9.5.59 st_surprise</a></li>
      <li><a name="toc-st_005fswap-1" href="#st_005fswap">9.5.60 st_swap</a></li>
      <li><a name="toc-st_005fswitch-1" href="#st_005fswitch">9.5.61 st_switch</a></li>
      <li><a name="toc-st_005fthief-1" href="#st_005fthief">9.5.62 st_thief</a></li>
      <li><a name="toc-st_005ftimer-1" href="#st_005ftimer">9.5.63 st_timer</a></li>
      <li><a name="toc-st_005fturnstile-1" href="#st_005fturnstile">9.5.64 st_turnstile</a></li>
      <li><a name="toc-st_005fturnstilearm-1" href="#st_005fturnstilearm">9.5.65 st_turnstilearm</a></li>
      <li><a name="toc-st_005fvolcano-1" href="#st_005fvolcano">9.5.66 st_volcano</a></li>
      <li><a name="toc-st_005fwindow-1" href="#st_005fwindow">9.5.67 st_window</a></li>
      <li><a name="toc-st_005fyinyang-1" href="#st_005fyinyang">9.5.68 st_yinyang</a></li>
    </ul></li>
    <li><a name="toc-Stone-Feature-Summaries-1" href="#Stone-Feature-Summaries">9.6 Обзор свойств камней</a>
    <ul class="toc">
      <li><a name="toc-Transparent-Stones-1" href="#Transparent-Stones">9.6.1 Прозрачные камни</a></li>
      <li><a name="toc-Breakable-Stones-1" href="#Breakable-Stones">9.6.2 Бьющиеся камни</a></li>
    </ul>
</li>
  </ul></li>
  <li><a name="toc-Actor-Objects-1" href="#Actor-Objects">10. Актёры</a>
  <ul class="toc">
    <li><a name="toc-Actor-Attributes-1" href="#Actor-Attributes">10.1 Атрибуты актёров</a>
    <ul class="toc">
      <li><a name="toc-adhesion-_0028actor_0029-1" href="#adhesion-_0028actor_0029">10.1.1 adhesion (актёры)</a></li>
      <li><a name="toc-charge-1" href="#charge">10.1.2 charge</a></li>
      <li><a name="toc-controllers-1" href="#controllers">10.1.3 controllers</a></li>
      <li><a name="toc-color-1" href="#color">10.1.4 color</a></li>
      <li><a name="toc-essential-1" href="#essential">10.1.5 essential</a></li>
      <li><a name="toc-essential_005fid-1" href="#essential_005fid">10.1.6 essential_id</a></li>
      <li><a name="toc-owner-1" href="#owner">10.1.7 owner</a></li>
      <li><a name="toc-velocity_005fx-1" href="#velocity_005fx">10.1.8 velocity_x</a></li>
      <li><a name="toc-velocity_005fy-1" href="#velocity_005fy">10.1.9 velocity_y</a></li>
    </ul></li>
    <li><a name="toc-Actors-1" href="#Actors">10.2 Актёры</a>
    <ul class="toc">
      <li><a name="toc-ac_005fbug-1" href="#ac_005fbug">10.2.1 ac_bug</a></li>
      <li><a name="toc-ac_005fhorse-1" href="#ac_005fhorse">10.2.2 ac_horse</a></li>
      <li><a name="toc-ac_005fkiller-1" href="#ac_005fkiller">10.2.3 ac_killer</a></li>
      <li><a name="toc-ac_005fmarble-1" href="#ac_005fmarble">10.2.4 ac_marble</a></li>
      <li><a name="toc-ac_005fpearl-1" href="#ac_005fpearl">10.2.5 ac_pearl</a></li>
      <li><a name="toc-ac_005frotor-1" href="#ac_005frotor">10.2.6 ac_rotor</a></li>
      <li><a name="toc-ac_005ftop-1" href="#ac_005ftop">10.2.7 ac_top</a></li>
    </ul></li>
    <li><a name="toc-Actor-Features-1" href="#Actor-Features">10.3 Свойства актёров</a>
    <ul class="toc">
      <li><a name="toc-Flying-Actors-1" href="#Flying-Actors">10.3.1 Летающие актёры</a></li>
    </ul>
</li>
  </ul></li>
  <li><a name="toc-Other-Objects-1" href="#Other-Objects">11. Остальные объекты</a>
  <ul class="toc">
    <li><a name="toc-Visible-Others-1" href="#Visible-Others">11.1 Видимые объекты</a>
    <ul class="toc">
      <li><a name="toc-ot_005fcannonball-1" href="#ot_005fcannonball">11.1.1 ot_cannonball</a></li>
      <li><a name="toc-ot_005frubberband-1" href="#ot_005frubberband">11.1.2 ot_rubberband</a></li>
      <li><a name="toc-ot_005fwire-1" href="#ot_005fwire">11.1.3 ot_wire</a></li>
    </ul></li>
    <li><a name="toc-Gadgets-1" href="#Gadgets">11.2 Гаджеты</a>
    <ul class="toc">
      <li><a name="toc-ot_005fcounter-1" href="#ot_005fcounter">11.2.1 ot_counter</a></li>
      <li><a name="toc-ot_005ftimer-1" href="#ot_005ftimer">11.2.2 ot_timer</a></li>
    </ul>
</li>
  </ul></li>
  <li><a name="toc-Libraries-1" href="#Libraries">12. Библиотеки</a>
  <ul class="toc">
    <li><a name="toc-Basic-Functions-1" href="#Basic-Functions">12.1 Основные функции</a></li>
    <li><a name="toc-liblua-1" href="#liblua">12.2 liblua</a>
    <ul class="toc">
      <li><a name="toc-lib_002elua_002ecombine_005ftables-1" href="#lib_002elua_002ecombine_005ftables">12.2.1 lib.lua.combine_tables</a></li>
      <li><a name="toc-lib_002elua_002edeep_005fcopy-1" href="#lib_002elua_002edeep_005fcopy">12.2.2 lib.lua.deep_copy</a></li>
      <li><a name="toc-lib_002elua_002emod-1" href="#lib_002elua_002emod">12.2.3 lib.lua.mod</a></li>
      <li><a name="toc-lib_002elua_002eprint_005ftable-1" href="#lib_002elua_002eprint_005ftable">12.2.4 lib.lua.print_table</a></li>
      <li><a name="toc-lib_002elua_002eshuffle-1" href="#lib_002elua_002eshuffle">12.2.5 lib.lua.shuffle</a></li>
      <li><a name="toc-lib_002elua_002eto_005fstring-1" href="#lib_002elua_002eto_005fstring">12.2.6 lib.lua.to_string</a></li>
    </ul></li>
    <li><a name="toc-libmath-1" href="#libmath">12.3 libmath</a>
    <ul class="toc">
      <li><a name="toc-lib_002emath_002ecombinations-1" href="#lib_002emath_002ecombinations">12.3.1 lib.math.combinations</a></li>
      <li><a name="toc-lib_002emath_002ecubic_005fpolynomial-1" href="#lib_002emath_002ecubic_005fpolynomial">12.3.2 lib.math.cubic_polynomial</a></li>
      <li><a name="toc-lib_002emath_002ecyclic_005fpermutation-1" href="#lib_002emath_002ecyclic_005fpermutation">12.3.3 lib.math.cyclic_permutation</a></li>
      <li><a name="toc-lib_002emath_002edigits-1" href="#lib_002emath_002edigits">12.3.4 lib.math.digits</a></li>
      <li><a name="toc-lib_002emath_002emanhattan_005fdistance-1" href="#lib_002emath_002emanhattan_005fdistance">12.3.5 lib.math.manhattan_distance</a></li>
      <li><a name="toc-lib_002emath_002emark_005fcomponents-1" href="#lib_002emath_002emark_005fcomponents">12.3.6 lib.math.mark_components</a></li>
      <li><a name="toc-lib_002emath_002epermutation-1" href="#lib_002emath_002epermutation">12.3.7 lib.math.permutation</a></li>
      <li><a name="toc-lib_002emath_002erandom_005fvector-1" href="#lib_002emath_002erandom_005fvector">12.3.8 lib.math.random_vector</a></li>
      <li><a name="toc-lib_002emath_002esteps-1" href="#lib_002emath_002esteps">12.3.9 lib.math.steps</a></li>
    </ul></li>
    <li><a name="toc-libmap-1" href="#libmap">12.4 libmap</a>
    <ul class="toc">
      <li><a name="toc-Creating-Maps-1" href="#Creating-Maps">12.4.1 Создание карт</a></li>
      <li><a name="toc-Drawing-Maps-1" href="#Drawing-Maps">12.4.2 Рисование карт</a></li>
      <li><a name="toc-Rotating-and-Mirroring-Maps-1" href="#Rotating-and-Mirroring-Maps">12.4.3 Вращение и отражение карт</a></li>
      <li><a name="toc-Requesting-and-Changing-Single-Map-Entries-1" href="#Requesting-and-Changing-Single-Map-Entries">12.4.4 Запрос и изменение отдельных участков карт</a></li>
      <li><a name="toc-Connecting-Two-Maps-1" href="#Connecting-Two-Maps">12.4.5 Соединение двух карт</a></li>
      <li><a name="toc-Other-Map-Tasks-1" href="#Other-Map-Tasks">12.4.6 Другие операции с картами</a></li>
      <li><a name="toc-newMap-1" href="#newMap">12.4.7 newMap</a></li>
      <li><a name="toc-Map-Entry-Request-1" href="#Map-Entry-Request">12.4.8 Запрос участка карты</a></li>
      <li><a name="toc-Map-Transformation-1" href="#Map-Transformation">12.4.9 Преобразование карты</a></li>
      <li><a name="toc-Map-Horizontal-Concatenation-1" href="#Map-Horizontal-Concatenation">12.4.10 Горизонтальное объединение карт</a></li>
      <li><a name="toc-Map-Vertical-Concatenation-1" href="#Map-Vertical-Concatenation">12.4.11 Вертикальное объединение карт</a></li>
      <li><a name="toc-Map-Fusing-1" href="#Map-Fusing">12.4.12 Слияние карт</a></li>
      <li><a name="toc-Map-Default-Keys-1" href="#Map-Default-Keys">12.4.13 Предустановленные коды карты</a></li>
      <li><a name="toc-Map-Width-and-Height-1" href="#Map-Width-and-Height">12.4.14 Ширина и высота карты</a></li>
      <li><a name="toc-lib_002emap_002ecovers-1" href="#lib_002emap_002ecovers">12.4.15 lib.map.covers</a></li>
      <li><a name="toc-lib_002emap_002edefuse-1" href="#lib_002emap_002edefuse">12.4.16 lib.map.defuse</a></li>
      <li><a name="toc-lib_002emap_002eextend-1" href="#lib_002emap_002eextend">12.4.17 lib.map.extend</a></li>
      <li><a name="toc-lib_002emap_002ematch-1" href="#lib_002emap_002ematch">12.4.18 lib.map.match</a></li>
      <li><a name="toc-lib_002emap_002epaste-1" href="#lib_002emap_002epaste">12.4.19 lib.map.paste</a></li>
      <li><a name="toc-lib_002emap_002eprint-1" href="#lib_002emap_002eprint">12.4.20 lib.map.print</a></li>
      <li><a name="toc-lib_002emap_002ereplace-1" href="#lib_002emap_002ereplace">12.4.21 lib.map.replace</a></li>
      <li><a name="toc-lib_002emap_002ereplace_005foutside-1" href="#lib_002emap_002ereplace_005foutside">12.4.22 lib.map.replace_outside</a></li>
      <li><a name="toc-lib_002emap_002esub-1" href="#lib_002emap_002esub">12.4.23 lib.map.sub</a></li>
      <li><a name="toc-lib_002emap_002etrim-1" href="#lib_002emap_002etrim">12.4.24 lib.map.trim</a></li>
      <li><a name="toc-Map-Transformation-Index-and-MAP_005fALL-1" href="#Map-Transformation-Index-and-MAP_005fALL">12.4.25 Индекс преобразования карты и MAP_ALL</a></li>
      <li><a name="toc-Map-Transformation-Composition-and-Powers-1" href="#Map-Transformation-Composition-and-Powers">12.4.26 Произведение и возведение в степень преобразований карт</a></li>
      <li><a name="toc-Map-Transformation-Inverse-1" href="#Map-Transformation-Inverse">12.4.27 Обратное преобразование карты</a></li>
      <li><a name="toc-Random-Map-Transformations-1" href="#Random-Map-Transformations">12.4.28 Случайные преобразования карты</a></li>
    </ul></li>
    <li><a name="toc-libimport-1" href="#libimport">12.5 libimport</a>
    <ul class="toc">
      <li><a name="toc-lib_002eimport_002eunpack_005fmultilevel-1" href="#lib_002eimport_002eunpack_005fmultilevel">12.5.1 lib.import.unpack_multilevel</a></li>
      <li><a name="toc-lib_002eimport_002euncompress_005frle-1" href="#lib_002eimport_002euncompress_005frle">12.5.2 lib.import.uncompress_rle</a></li>
      <li><a name="toc-lib_002eimport_002elevel_005fto_005fmap-1" href="#lib_002eimport_002elevel_005fto_005fmap">12.5.3 lib.import.level_to_map</a></li>
      <li><a name="toc-lib_002eimport_002emap_005fsokoban-1" href="#lib_002eimport_002emap_005fsokoban">12.5.4 lib.import.map_sokoban</a></li>
      <li><a name="toc-lib_002eimport_002emap_005fwanderer-1" href="#lib_002eimport_002emap_005fwanderer">12.5.5 lib.import.map_wanderer</a></li>
    </ul></li>
    <li><a name="toc-libsoko-1" href="#libsoko">12.6 libsoko</a></li>
  </ul></li>
  <li><a name="toc-Advanced-Features-1" href="#Advanced-Features">13. Дополнительные возможности</a>
  <ul class="toc">
    <li><a name="toc-Resolvers-1" href="#Resolvers">13.1 Преобразования</a>
    <ul class="toc">
      <li><a name="toc-Resolver-Chaining-1" href="#Resolver-Chaining">13.1.1 Составление цепочек преобразований</a></li>
      <li><a name="toc-Custom-Resolver-1" href="#Custom-Resolver">13.1.2 Настраиваемое преобразование</a></li>
      <li><a name="toc-res_002eautotile-1" href="#res_002eautotile">13.1.3 res.autotile</a></li>
      <li><a name="toc-res_002ecomposer-1" href="#res_002ecomposer">13.1.4 res.composer</a></li>
      <li><a name="toc-res_002emaze-1" href="#res_002emaze">13.1.5 res.maze</a></li>
      <li><a name="toc-res_002epuzzle-1" href="#res_002epuzzle">13.1.6 res.puzzle</a></li>
      <li><a name="toc-res_002erandom-1" href="#res_002erandom">13.1.7 res.random</a></li>
      <li><a name="toc-res_002etrain-1" href="#res_002etrain">13.1.8 res.train</a></li>
    </ul></li>
    <li><a name="toc-General-Features-1" href="#General-Features">13.2 Общие возможности</a>
    <ul class="toc">
      <li><a name="toc-Display-Follow-Strategy-1" href="#Display-Follow-Strategy">13.2.1 Способы прокрутки изображения</a></li>
      <li><a name="toc-Flood-Spreading-1" href="#Flood-Spreading">13.2.2 Распространение воды</a></li>
      <li><a name="toc-Fire-Spreading-1" href="#Fire-Spreading">13.2.3 Распространение огня</a></li>
      <li><a name="toc-Heat_002dTransformation-1" href="#Heat_002dTransformation">13.2.4 Тепловая трансформация</a></li>
      <li><a name="toc-Freeze-Checking-1" href="#Freeze-Checking">13.2.5 Проверка тупика</a></li>
    </ul></li>
    <li><a name="toc-Tips-and-Tricks-1" href="#Tips-and-Tricks">13.3 Советы и хитрости</a>
    <ul class="toc">
      <li><a name="toc-Nearest-Object-Clustering-1" href="#Nearest-Object-Clustering">13.3.1 Группировка ближайших объектов</a></li>
      <li><a name="toc-Orthogonal-Autotiling-1" href="#Orthogonal-Autotiling">13.3.2 Ортогональное автоопределение секций</a></li>
    </ul>
</li>
  </ul></li>
  <li><a name="toc-Extension-Development-1" href="#Extension-Development">14. Разработка расширений</a>
  <ul class="toc">
    <li><a name="toc-Resolver-Development-1" href="#Resolver-Development">14.1 Разработка преобразований</a>
    <ul class="toc">
      <li><a name="toc-Resolver-Configurator-1" href="#Resolver-Configurator">14.1.1 Блок настройки преобразования</a></li>
      <li><a name="toc-Resolver-Implementation-1" href="#Resolver-Implementation">14.1.2 Блок реализации преобразования</a></li>
      <li><a name="toc-Resolver-Finalizer-1" href="#Resolver-Finalizer">14.1.3 Блок завершения преобразования</a></li>
    </ul>
</li>
  </ul></li>
  <li><a name="toc-Guidelines-and-Hints-1" href="#Guidelines-and-Hints">15. Советы и рекомендации</a>
  <ul class="toc">
    <li><a name="toc-Filename-Recommendation-1" href="#Filename-Recommendation">15.1 Имя файла</a></li>
    <li><a name="toc-Title-Recommendation-1" href="#Title-Recommendation">15.2 Название уровня</a></li>
    <li><a name="toc-Tile-Key-Recommendation-1" href="#Tile-Key-Recommendation">15.3 Выбор кодов секций</a></li>
    <li><a name="toc-Easy-Mode-Hints-1" href="#Easy-Mode-Hints">15.4 Рекомендации по использованию простого режима сложности</a></li>
  </ul></li>
  <li><a name="toc-Compatibility-1" href="#Compatibility">16. Совместимость</a>
  <ul class="toc">
    <li><a name="toc-Engine-Compatibility-1" href="#Engine-Compatibility">16.1 Совместимость движка</a></li>
  </ul></li>
  <li><a name="toc-Object-Index-1" href="#Object-Index">Указатель объектов</a></li>
  <li><a name="toc-Attribute-Index-1" href="#Attribute-Index">Указатель атрибутов</a></li>
  <li><a name="toc-Message-Index-1" href="#Message-Index">Указатель сообщений</a></li>
  <li><a name="toc-Function-Index-1" href="#Function-Index">Указатель функций</a></li>
  <li><a name="toc-Concept-Index-1" href="#Concept-Index">Указатель терминов</a></li>
  <li><a name="toc-Renaming-Index-1" href="#Renaming-Index">Список изменений</a></li>
</ul>
</div>
<hr size="1">
<a name="SEC_About"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Top" title="Переход в начало документа">В начало</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_Contents" title="Переход к Содержанию документа">Содержание</a>]</td>
<td valign="middle" align="left">[<a href="#Object-Index" title="Переход к Предметному указателю">Предметный указатель</a>]</td>
<td valign="middle" align="left">[<a href="#SEC_About" title="Справка"> ? </a>]</td>
</tr></table>
<h1>О настоящем документе</h1>
<p>
  
</p>
<p>
  Кнопки на панели навигации имеют следующее значение:
</p>
<table border="1">
  <tr>
    <th> Кнопка </th>
    <th> Имя </th>
    <th> Перейти к </th>
    <th> Перейти из раздела 1.2.3 к разделу</th>
  </tr>
  <tr>
    <td align="center"> [ &lt; ] </td>
    <td align="center">Назад</td>
    <td>Переход к предыдущему разделу</td>
    <td>1.2.2</td>
  </tr>
  <tr>
    <td align="center"> [ &gt; ] </td>
    <td align="center">Вперёд</td>
    <td>Переход к следующему разделу</td>
    <td>1.4.2</td>
  </tr>
  <tr>
    <td align="center"> [ &lt;&lt; ] </td>
    <td align="center">Быстрый переход назад</td>
    <td>Переход к началу данной или предыдущей главы</td>
    <td>1</td>
  </tr>
  <tr>
    <td align="center"> [ Вверх ] </td>
    <td align="center">Вверх</td>
    <td>Переход в начало раздела</td>
    <td>1.2</td>
  </tr>
  <tr>
    <td align="center"> [ &gt;&gt; ] </td>
    <td align="center">Быстрый переход вперёд</td>
    <td>Переход к следующей главе</td>
    <td>2</td>
  </tr>
  <tr>
    <td align="center"> [В начало] </td>
    <td align="center">В начало</td>
    <td>Переход в начало документа</td>
    <td> &nbsp; </td>
  </tr>
  <tr>
    <td align="center"> [Содержание] </td>
    <td align="center">Содержание</td>
    <td>Переход к Содержанию документа</td>
    <td> &nbsp; </td>
  </tr>
  <tr>
    <td align="center"> [Предметный указатель] </td>
    <td align="center">Переход к Предметному указателю</td>
    <td>Переход к Предметному указателю</td>
    <td> &nbsp; </td>
  </tr>
  <tr>
    <td align="center"> [ ? ] </td>
    <td align="center">О документе</td>
    <td>Справка</td>
    <td> &nbsp; </td>
  </tr>
</table>

<p>
  где в <B>Примере</B> предполагается, что текущей позицией является <B>Параграф один-два-три</B> в документе, имеющем следующую структуру:
</p>

<ul>
  <li> 1. Раздел один
    <ul>
      <li>1.1 Подраздел один-один
        <ul>
          <li>...</li>
        </ul>
      </li>
      <li>1.2 Подраздел один-два
        <ul>
          <li>1.2.1 Параграф один-два-один</li>
          <li>1.2.2 Параграф один-два-два</li>
          <li>1.2.3 Параграф один-два-три &nbsp; &nbsp; <strong>&lt;== Текущее положение </strong></li>
          <li>1.2.4 Параграф один-два-четыре</li>
        </ul>
      </li>
      <li>1.3 Подраздел один-два
        <ul>
          <li>...</li>
        </ul>
      </li>
      <li>Подраздел один-четыре</li>
    </ul>
  </li>
</ul>

<hr size="1">
<p>
 <font size="-1"></font> <br>

</p>
</body>
</html>
